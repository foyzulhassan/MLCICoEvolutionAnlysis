OBJECT [0,4418]
    FIELD [1,20]
        String: "name" [1,7]
        STRING [8,20]
            String: "PR slow CI" [8,20]
    FIELD [21,117]
        String: "on" [21,25]
        OBJECT [26,117]
            FIELD [27,116]
                String: "pull_request" [27,41]
                OBJECT [42,116]
                    FIELD [43,115]
                        String: "paths" [43,50]
                        ARRAY [51,115]
                            STRING [52,93]
                                String: "src/transformers/models/*/modeling_*.py" [52,93]
                            STRING [94,114]
                                String: "tests/**/test_*.py" [94,114]
    FIELD [118,232]
        String: "concurrency" [118,131]
        OBJECT [132,232]
            FIELD [133,205]
                String: "group" [133,140]
                STRING [141,205]
                    String: "${{ github.workflow }}-${{ github.head_ref || github.run_id }}" [141,205]
            FIELD [206,231]
                String: "cancel-in-progress" [206,226]
                TRUE [227,231]
    FIELD [233,541]
        String: "env" [233,238]
        OBJECT [239,541]
            FIELD [240,262]
                String: "HF_HOME" [240,249]
                STRING [250,262]
                    String: "/mnt/cache" [250,262]
            FIELD [263,288]
                String: "TRANSFORMERS_IS_CI" [263,283]
                TRUE [284,288]
            FIELD [289,308]
                String: "OMP_NUM_THREADS" [289,306]
                NUMBER [307,308]
                    Number: 8 [307,308]
            FIELD [309,328]
                String: "MKL_NUM_THREADS" [309,326]
                NUMBER [327,328]
                    Number: 8 [327,328]
            FIELD [329,344]
                String: "RUN_SLOW" [329,339]
                TRUE [340,344]
            FIELD [345,399]
                String: "HF_HUB_READ_TOKEN" [345,364]
                STRING [365,399]
                    String: "${{ secrets.HF_HUB_READ_TOKEN }}" [365,399]
            FIELD [400,452]
                String: "SIGOPT_API_TOKEN" [400,418]
                STRING [419,452]
                    String: "${{ secrets.SIGOPT_API_TOKEN }}" [419,452]
            FIELD [453,485]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [453,480]
                TRUE [481,485]
            FIELD [486,511]
                String: "RUN_PT_TF_CROSS_TESTS" [486,509]
                NUMBER [510,511]
                    Number: 1 [510,511]
            FIELD [512,540]
                String: "CUDA_VISIBLE_DEVICES" [512,534]
                STRING [535,540]
                    String: "0,1" [535,540]
    FIELD [542,4417]
        String: "jobs" [542,548]
        OBJECT [549,4417]
            FIELD [550,1421]
                String: "find_models_to_run" [550,570]
                OBJECT [571,1421]
                    FIELD [572,596]
                        String: "runs-on" [572,581]
                        STRING [582,596]
                            String: "ubuntu-22.04" [582,596]
                    FIELD [597,635]
                        String: "name" [597,603]
                        STRING [604,635]
                            String: "Find models to run slow tests" [604,635]
                    FIELD [636,711]
                        String: "if" [636,640]
                        STRING [641,711]
                            String: "${{ contains(github.event.pull_request.labels.*.name, 'run-slow') }}" [641,711]
                    FIELD [712,776]
                        String: "outputs" [712,721]
                        OBJECT [722,776]
                            FIELD [723,775]
                                String: "models" [723,731]
                                STRING [732,775]
                                    String: "${{ steps.models_to_run.outputs.models }}" [732,775]
                    FIELD [777,1420]
                        String: "steps" [777,784]
                        ARRAY [785,1420]
                            OBJECT [786,893]
                                FIELD [787,815]
                                    String: "uses" [787,793]
                                    STRING [794,815]
                                        String: "actions/checkout@v4" [794,815]
                                FIELD [816,892]
                                    String: "with" [816,822]
                                    OBJECT [823,892]
                                        FIELD [824,841]
                                            String: "fetch-depth" [824,837]
                                            STRING [838,841]
                                                String: "0" [838,841]
                                        FIELD [842,891]
                                            String: "ref" [842,847]
                                            STRING [848,891]
                                                String: "${{ github.event.pull_request.head.sha }}" [848,891]
                            OBJECT [894,999]
                                FIELD [895,922]
                                    String: "name" [895,901]
                                    STRING [902,922]
                                        String: "Get commit message" [902,922]
                                FIELD [923,998]
                                    String: "run" [923,928]
                                    STRING [929,998]
                                        String: "echo \"commit_message=$(git show -s --format=%s)\" >> $GITHUB_ENV\n" [929,998]
                            OBJECT [1000,1272]
                                FIELD [1001,1038]
                                    String: "name" [1001,1007]
                                    STRING [1008,1038]
                                        String: "Get models to run slow tests" [1008,1038]
                                FIELD [1039,1271]
                                    String: "run" [1039,1044]
                                    STRING [1045,1271]
                                        String: "echo \"${{ env.commit_message }}\"\npython -m pip install GitPython\npython utils/pr_slow_ci_models.py --commit_message \"${{ env.commit_message }}\" | tee output.txt\necho \"models=$(tail -n 1 output.txt)\" >> $GITHUB_ENV\n" [1045,1271]
                            OBJECT [1273,1419]
                                FIELD [1274,1307]
                                    String: "name" [1274,1280]
                                    STRING [1281,1307]
                                        String: "Models to run slow tests" [1281,1307]
                                FIELD [1308,1328]
                                    String: "id" [1308,1312]
                                    STRING [1313,1328]
                                        String: "models_to_run" [1313,1328]
                                FIELD [1329,1418]
                                    String: "run" [1329,1334]
                                    STRING [1335,1418]
                                        String: "echo \"${{ env.models }}\"\necho \"models=${{ env.models }}\" >> $GITHUB_OUTPUT\n" [1335,1418]
            FIELD [1422,4416]
                String: "run_models_gpu" [1422,1438]
                OBJECT [1439,4416]
                    FIELD [1440,1476]
                        String: "name" [1440,1446]
                        STRING [1447,1476]
                            String: "Run all tests for the model" [1447,1476]
                    FIELD [1477,1538]
                        String: "if" [1477,1481]
                        STRING [1482,1538]
                            String: "${{ needs.find_models_to_run.outputs.models != '[]' }}" [1482,1538]
                    FIELD [1539,1567]
                        String: "needs" [1539,1546]
                        STRING [1547,1567]
                            String: "find_models_to_run" [1547,1567]
                    FIELD [1568,1720]
                        String: "strategy" [1568,1578]
                        OBJECT [1579,1720]
                            FIELD [1580,1597]
                                String: "fail-fast" [1580,1591]
                                FALSE [1592,1597]
                            FIELD [1598,1719]
                                String: "matrix" [1598,1606]
                                OBJECT [1607,1719]
                                    FIELD [1608,1676]
                                        String: "folders" [1608,1617]
                                        STRING [1618,1676]
                                            String: "${{ fromJson(needs.find_models_to_run.outputs.models) }}" [1618,1676]
                                    FIELD [1677,1718]
                                        String: "machine_type" [1677,1691]
                                        ARRAY [1692,1718]
                                            STRING [1693,1705]
                                                String: "single-gpu" [1693,1705]
                                            STRING [1706,1717]
                                                String: "multi-gpu" [1706,1717]
                    FIELD [1721,1784]
                        String: "runs-on" [1721,1730]
                        ARRAY [1731,1784]
                            STRING [1732,1760]
                                String: "${{ matrix.machine_type }}" [1732,1760]
                            STRING [1761,1773]
                                String: "nvidia-gpu" [1761,1773]
                            STRING [1774,1778]
                                String: "t4" [1774,1778]
                            STRING [1779,1783]
                                String: "ci" [1779,1783]
                    FIELD [1785,1947]
                        String: "container" [1785,1796]
                        OBJECT [1797,1947]
                            FIELD [1798,1847]
                                String: "image" [1798,1805]
                                STRING [1806,1847]
                                    String: "huggingface/transformers-all-latest-gpu" [1806,1847]
                            FIELD [1848,1946]
                                String: "options" [1848,1857]
                                STRING [1858,1946]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1858,1946]
                    FIELD [1948,4415]
                        String: "steps" [1948,1955]
                        ARRAY [1956,4415]
                            OBJECT [1957,2050]
                                FIELD [1958,1993]
                                    String: "name" [1958,1964]
                                    STRING [1965,1993]
                                        String: "Echo input and matrix info" [1965,1993]
                                FIELD [1994,2008]
                                    String: "shell" [1994,2001]
                                    STRING [2002,2008]
                                        String: "bash" [2002,2008]
                                FIELD [2009,2049]
                                    String: "run" [2009,2014]
                                    STRING [2015,2049]
                                        String: "echo \"${{ matrix.folders }}\"\n" [2015,2049]
                            OBJECT [2051,2325]
                                FIELD [2052,2094]
                                    String: "name" [2052,2058]
                                    STRING [2059,2094]
                                        String: "Echo folder ${{ matrix.folders }}" [2059,2094]
                                FIELD [2095,2109]
                                    String: "shell" [2095,2102]
                                    STRING [2103,2109]
                                        String: "bash" [2103,2109]
                                FIELD [2110,2324]
                                    String: "run" [2110,2115]
                                    STRING [2116,2324]
                                        String: "echo \"${{ matrix.folders }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [2116,2324]
                            OBJECT [2326,2591]
                                FIELD [2327,2348]
                                    String: "name" [2327,2333]
                                    STRING [2334,2348]
                                        String: "Update clone" [2334,2348]
                                FIELD [2349,2384]
                                    String: "working-directory" [2349,2368]
                                    STRING [2369,2384]
                                        String: "/transformers" [2369,2384]
                                FIELD [2385,2590]
                                    String: "run" [2385,2390]
                                    STRING [2391,2590]
                                        String: "git fetch && git fetch origin pull/${{ github.event.pull_request.number }}/head:pull/${{ github.event.pull_request.number }}/merge && git checkout pull/${{ github.event.pull_request.number }}/merge" [2391,2590]
                            OBJECT [2592,2807]
                                FIELD [2593,2690]
                                    String: "name" [2593,2599]
                                    STRING [2600,2690]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [2600,2690]
                                FIELD [2691,2726]
                                    String: "working-directory" [2691,2710]
                                    STRING [2711,2726]
                                        String: "/transformers" [2711,2726]
                                FIELD [2727,2806]
                                    String: "run" [2727,2732]
                                    STRING [2733,2806]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [2733,2806]
                            OBJECT [2808,2850]
                                FIELD [2809,2828]
                                    String: "name" [2809,2815]
                                    STRING [2816,2828]
                                        String: "NVIDIA-SMI" [2816,2828]
                                FIELD [2829,2849]
                                    String: "run" [2829,2834]
                                    STRING [2835,2849]
                                        String: "nvidia-smi\n" [2835,2849]
                            OBJECT [2851,2946]
                                FIELD [2852,2872]
                                    String: "name" [2852,2858]
                                    STRING [2859,2872]
                                        String: "Environment" [2859,2872]
                                FIELD [2873,2908]
                                    String: "working-directory" [2873,2892]
                                    STRING [2893,2908]
                                        String: "/transformers" [2893,2908]
                                FIELD [2909,2945]
                                    String: "run" [2909,2914]
                                    STRING [2915,2945]
                                        String: "python3 utils/print_env.py\n" [2915,2945]
                            OBJECT [2947,3056]
                                FIELD [2948,3000]
                                    String: "name" [2948,2954]
                                    STRING [2955,3000]
                                        String: "Show installed libraries and their versions" [2955,3000]
                                FIELD [3001,3036]
                                    String: "working-directory" [3001,3020]
                                    STRING [3021,3036]
                                        String: "/transformers" [3021,3036]
                                FIELD [3037,3055]
                                    String: "run" [3037,3042]
                                    STRING [3043,3055]
                                        String: "pip freeze" [3043,3055]
                            OBJECT [3057,3422]
                                FIELD [3058,3087]
                                    String: "name" [3058,3064]
                                    STRING [3065,3087]
                                        String: "Run all tests on GPU" [3065,3087]
                                FIELD [3088,3123]
                                    String: "working-directory" [3088,3107]
                                    STRING [3108,3123]
                                        String: "/transformers" [3108,3123]
                                FIELD [3124,3421]
                                    String: "run" [3124,3129]
                                    STRING [3130,3421]
                                        String: "export CUDA_VISIBLE_DEVICES=\"$(python3 utils/set_cuda_devices_for_ci.py --test_folder ${{ matrix.folders }})\"\necho $CUDA_VISIBLE_DEVICES\npython3 -m pytest -v -rsfE --make-reports=${{ matrix.machine_type }}_run_models_gpu_${{ matrix.folders }}_test_reports tests/${{ matrix.folders }}\n" [3130,3421]
                            OBJECT [3423,3634]
                                FIELD [3424,3454]
                                    String: "name" [3424,3430]
                                    STRING [3431,3454]
                                        String: "Failure short reports" [3431,3454]
                                FIELD [3455,3478]
                                    String: "if" [3455,3459]
                                    STRING [3460,3478]
                                        String: "${{ failure() }}" [3460,3478]
                                FIELD [3479,3503]
                                    String: "continue-on-error" [3479,3498]
                                    TRUE [3499,3503]
                                FIELD [3504,3633]
                                    String: "run" [3504,3509]
                                    STRING [3510,3633]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_run_models_gpu_${{ matrix.folders }}_test_reports/failures_short.txt" [3510,3633]
                            OBJECT [3635,4026]
                                FIELD [3636,3678]
                                    String: "name" [3636,3642]
                                    STRING [3643,3678]
                                        String: "Make sure report directory exists" [3643,3678]
                                FIELD [3679,3693]
                                    String: "shell" [3679,3686]
                                    STRING [3687,3693]
                                        String: "bash" [3687,3693]
                                FIELD [3694,4025]
                                    String: "run" [3694,3699]
                                    STRING [3700,4025]
                                        String: "mkdir -p /transformers/reports/${{ matrix.machine_type }}_run_models_gpu_${{ matrix.folders }}_test_reports\necho \"hello\" > /transformers/reports/${{ matrix.machine_type }}_run_models_gpu_${{ matrix.folders }}_test_reports/hello.txt\necho \"${{ matrix.machine_type }}_run_models_gpu_${{ matrix.folders }}_test_reports\"\n" [3700,4025]
                            OBJECT [4027,4414]
                                FIELD [4028,4147]
                                    String: "name" [4028,4034]
                                    STRING [4035,4147]
                                        String: "Test suite reports artifacts: ${{ matrix.machine_type }}_run_models_gpu_${{ env.matrix_folders }}_test_reports" [4035,4147]
                                FIELD [4148,4170]
                                    String: "if" [4148,4152]
                                    STRING [4153,4170]
                                        String: "${{ always() }}" [4153,4170]
                                FIELD [4171,4206]
                                    String: "uses" [4171,4177]
                                    STRING [4178,4206]
                                        String: "actions/upload-artifact@v4" [4178,4206]
                                FIELD [4207,4413]
                                    String: "with" [4207,4213]
                                    OBJECT [4214,4413]
                                        FIELD [4215,4304]
                                            String: "name" [4215,4221]
                                            STRING [4222,4304]
                                                String: "${{ matrix.machine_type }}_run_models_gpu_${{ env.matrix_folders }}_test_reports" [4222,4304]
                                        FIELD [4305,4412]
                                            String: "path" [4305,4311]
                                            STRING [4312,4412]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_run_models_gpu_${{ matrix.folders }}_test_reports" [4312,4412]