OBJECT [0,4517]
    FIELD [1,56]
        String: "name" [1,7]
        STRING [8,56]
            String: "Slow tests on important models (on Push - A10)" [8,56]
    FIELD [57,92]
        String: "on" [57,61]
        OBJECT [62,92]
            FIELD [63,91]
                String: "push" [63,69]
                OBJECT [70,91]
                    FIELD [71,90]
                        String: "branches" [71,81]
                        ARRAY [82,90]
                            STRING [83,89]
                                String: "main" [83,89]
    FIELD [93,412]
        String: "env" [93,98]
        OBJECT [99,412]
            FIELD [100,139]
                String: "OUTPUT_SLACK_CHANNEL_ID" [100,125]
                STRING [126,139]
                    String: "C06L2SGMEEA" [126,139]
            FIELD [140,194]
                String: "HF_HUB_READ_TOKEN" [140,159]
                STRING [160,194]
                    String: "${{ secrets.HF_HUB_READ_TOKEN }}" [160,194]
            FIELD [195,217]
                String: "HF_HOME" [195,204]
                STRING [205,217]
                    String: "/mnt/cache" [205,217]
            FIELD [218,243]
                String: "TRANSFORMERS_IS_CI" [218,238]
                TRUE [239,243]
            FIELD [244,263]
                String: "OMP_NUM_THREADS" [244,261]
                NUMBER [262,263]
                    Number: 8 [262,263]
            FIELD [264,283]
                String: "MKL_NUM_THREADS" [264,281]
                NUMBER [282,283]
                    Number: 8 [282,283]
            FIELD [284,299]
                String: "RUN_SLOW" [284,294]
                TRUE [295,299]
            FIELD [300,352]
                String: "SIGOPT_API_TOKEN" [300,318]
                STRING [319,352]
                    String: "${{ secrets.SIGOPT_API_TOKEN }}" [319,352]
            FIELD [353,385]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [353,380]
                TRUE [381,385]
            FIELD [386,411]
                String: "RUN_PT_TF_CROSS_TESTS" [386,409]
                NUMBER [410,411]
                    Number: 1 [410,411]
    FIELD [413,4516]
        String: "jobs" [413,419]
        OBJECT [420,4516]
            FIELD [421,1457]
                String: "get_modified_models" [421,442]
                OBJECT [443,1457]
                    FIELD [444,475]
                        String: "name" [444,450]
                        STRING [451,475]
                            String: "Get all modified files" [451,475]
                    FIELD [476,501]
                        String: "runs-on" [476,485]
                        STRING [486,501]
                            String: "ubuntu-latest" [486,501]
                    FIELD [502,563]
                        String: "outputs" [502,511]
                        OBJECT [512,563]
                            FIELD [513,562]
                                String: "matrix" [513,521]
                                STRING [522,562]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [522,562]
                    FIELD [564,1456]
                        String: "steps" [564,571]
                        ARRAY [572,1456]
                            OBJECT [573,627]
                                FIELD [574,597]
                                    String: "name" [574,580]
                                    STRING [581,597]
                                        String: "Check out code" [581,597]
                                FIELD [598,626]
                                    String: "uses" [598,604]
                                    STRING [605,626]
                                        String: "actions/checkout@v4" [605,626]
                            OBJECT [628,798]
                                FIELD [629,655]
                                    String: "name" [629,635]
                                    STRING [636,655]
                                        String: "Get changed files" [636,655]
                                FIELD [656,676]
                                    String: "id" [656,660]
                                    STRING [661,676]
                                        String: "changed-files" [661,676]
                                FIELD [677,751]
                                    String: "uses" [677,683]
                                    STRING [684,751]
                                        String: "tj-actions/changed-files@3f54ebb830831fc121d3263c1857cfbdc310cdb9" [684,751]
                                FIELD [752,797]
                                    String: "with" [752,758]
                                    OBJECT [759,797]
                                        FIELD [760,796]
                                            String: "files" [760,767]
                                            STRING [768,796]
                                                String: "src/transformers/models/**" [768,796]
                            OBJECT [799,1455]
                                FIELD [800,855]
                                    String: "name" [800,806]
                                    STRING [807,855]
                                        String: "Run step if only the files listed above change" [807,855]
                                FIELD [856,912]
                                    String: "if" [856,860]
                                    STRING [861,912]
                                        String: "steps.changed-files.outputs.any_changed == 'true'" [861,912]
                                FIELD [913,930]
                                    String: "id" [913,917]
                                    STRING [918,930]
                                        String: "set-matrix" [918,930]
                                FIELD [931,1013]
                                    String: "env" [931,936]
                                    OBJECT [937,1013]
                                        FIELD [938,1012]
                                            String: "ALL_CHANGED_FILES" [938,957]
                                            STRING [958,1012]
                                                String: "${{ steps.changed-files.outputs.all_changed_files }}" [958,1012]
                                FIELD [1014,1454]
                                    String: "run" [1014,1019]
                                    STRING [1020,1454]
                                        String: "model_arrays=()\nfor file in $ALL_CHANGED_FILES; do\n    model_path=\"${file#*models/}\"\n    model_path=\"models/${model_path%%/*}\"\n    if grep -qFx \"$model_path\" utils/important_models.txt; then\n        # Append the file to the matrix string\n        model_arrays+=(\"$model_path\")\n    fi\ndone\nmatrix_string=$(printf '\"%s\", ' \"${model_arrays[@]}\" | sed 's/, $//')\necho \"matrix=[$matrix_string]\" >> $GITHUB_OUTPUT\n" [1020,1454]
            FIELD [1458,4410]
                String: "test_modified_files" [1458,1479]
                OBJECT [1480,4410]
                    FIELD [1481,1510]
                        String: "needs" [1481,1488]
                        STRING [1489,1510]
                            String: "get_modified_models" [1489,1510]
                    FIELD [1511,1536]
                        String: "name" [1511,1517]
                        STRING [1518,1536]
                            String: "Slow & FA2 tests" [1518,1536]
                    FIELD [1537,1585]
                        String: "runs-on" [1537,1546]
                        ARRAY [1547,1585]
                            STRING [1548,1560]
                                String: "single-gpu" [1548,1560]
                            STRING [1561,1573]
                                String: "nvidia-gpu" [1561,1573]
                            STRING [1574,1579]
                                String: "a10" [1574,1579]
                            STRING [1580,1584]
                                String: "ci" [1580,1584]
                    FIELD [1586,1741]
                        String: "container" [1586,1597]
                        OBJECT [1598,1741]
                            FIELD [1599,1648]
                                String: "image" [1599,1606]
                                STRING [1607,1648]
                                    String: "huggingface/transformers-all-latest-gpu" [1607,1648]
                            FIELD [1649,1740]
                                String: "options" [1649,1658]
                                STRING [1659,1740]
                                    String: "--gpus all --privileged --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1659,1740]
                    FIELD [1742,1919]
                        String: "if" [1742,1746]
                        STRING [1747,1919]
                            String: "${{ needs.get_modified_models.outputs.matrix != '[]' && needs.get_modified_models.outputs.matrix != '' && fromJson(needs.get_modified_models.outputs.matrix)[0] != null }}" [1747,1919]
                    FIELD [1920,2034]
                        String: "strategy" [1920,1930]
                        OBJECT [1931,2034]
                            FIELD [1932,1949]
                                String: "fail-fast" [1932,1943]
                                FALSE [1944,1949]
                            FIELD [1950,2033]
                                String: "matrix" [1950,1958]
                                OBJECT [1959,2033]
                                    FIELD [1960,2032]
                                        String: "model-name" [1960,1972]
                                        STRING [1973,2032]
                                            String: "${{ fromJson(needs.get_modified_models.outputs.matrix) }}" [1973,2032]
                    FIELD [2035,4409]
                        String: "steps" [2035,2042]
                        ARRAY [2043,4409]
                            OBJECT [2044,2098]
                                FIELD [2045,2068]
                                    String: "name" [2045,2051]
                                    STRING [2052,2068]
                                        String: "Check out code" [2052,2068]
                                FIELD [2069,2097]
                                    String: "uses" [2069,2075]
                                    STRING [2076,2097]
                                        String: "actions/checkout@v4" [2076,2097]
                            OBJECT [2099,2378]
                                FIELD [2100,2150]
                                    String: "name" [2100,2106]
                                    STRING [2107,2150]
                                        String: "Install locally transformers & other libs" [2107,2150]
                                FIELD [2151,2377]
                                    String: "run" [2151,2156]
                                    STRING [2157,2377]
                                        String: "apt install sudo\nsudo -H pip install --upgrade pip\nsudo -H pip uninstall -y transformers \nsudo -H pip install -U -e \".[testing]\" \nMAX_JOBS=4 pip install flash-attn --no-build-isolation\npip install bitsandbytes\n" [2157,2377]
                            OBJECT [2379,2421]
                                FIELD [2380,2399]
                                    String: "name" [2380,2386]
                                    STRING [2387,2399]
                                        String: "NVIDIA-SMI" [2387,2399]
                                FIELD [2400,2420]
                                    String: "run" [2400,2405]
                                    STRING [2406,2420]
                                        String: "nvidia-smi\n" [2406,2420]
                            OBJECT [2422,2495]
                                FIELD [2423,2475]
                                    String: "name" [2423,2429]
                                    STRING [2430,2475]
                                        String: "Show installed libraries and their versions" [2430,2475]
                                FIELD [2476,2494]
                                    String: "run" [2476,2481]
                                    STRING [2482,2494]
                                        String: "pip freeze" [2482,2494]
                            OBJECT [2496,2683]
                                FIELD [2497,2519]
                                    String: "name" [2497,2503]
                                    STRING [2504,2519]
                                        String: "Run FA2 tests" [2504,2519]
                                FIELD [2520,2540]
                                    String: "id" [2520,2524]
                                    STRING [2525,2540]
                                        String: "run_fa2_tests" [2525,2540]
                                FIELD [2541,2682]
                                    String: "run" [2541,2546]
                                    STRING [2547,2682]
                                        String: "pytest -rsfE -m \"flash_attn_test\" --make-reports=${{ matrix.model-name }}_fa2_tests/ tests/${{ matrix.model-name }}/test_modeling_*" [2547,2682]
                            OBJECT [2684,2937]
                                FIELD [2685,2758]
                                    String: "name" [2685,2691]
                                    STRING [2692,2758]
                                        String: "Test suite reports artifacts: ${{ matrix.model-name }}_fa2_tests" [2692,2758]
                                FIELD [2759,2781]
                                    String: "if" [2759,2763]
                                    STRING [2764,2781]
                                        String: "${{ always() }}" [2764,2781]
                                FIELD [2782,2817]
                                    String: "uses" [2782,2788]
                                    STRING [2789,2817]
                                        String: "actions/upload-artifact@v4" [2789,2817]
                                FIELD [2818,2936]
                                    String: "with" [2818,2824]
                                    OBJECT [2825,2936]
                                        FIELD [2826,2869]
                                            String: "name" [2826,2832]
                                            STRING [2833,2869]
                                                String: "${{ matrix.model-name }}_fa2_tests" [2833,2869]
                                        FIELD [2870,2935]
                                            String: "path" [2870,2876]
                                            STRING [2877,2935]
                                                String: "/transformers/reports/${{ matrix.model-name }}_fa2_tests" [2877,2935]
                            OBJECT [2938,3269]
                                FIELD [2939,2961]
                                    String: "name" [2939,2945]
                                    STRING [2946,2961]
                                        String: "Post to Slack" [2946,2961]
                                FIELD [2962,2977]
                                    String: "if" [2962,2966]
                                    STRING [2967,2977]
                                        String: "always()" [2967,2977]
                                FIELD [2978,3043]
                                    String: "uses" [2978,2984]
                                    STRING [2985,3043]
                                        String: "huggingface/hf-workflows/.github/actions/post-slack@main" [2985,3043]
                                FIELD [3044,3268]
                                    String: "with" [3044,3050]
                                    OBJECT [3051,3268]
                                        FIELD [3052,3104]
                                            String: "slack_channel" [3052,3067]
                                            STRING [3068,3104]
                                                String: "${{ env.OUTPUT_SLACK_CHANNEL_ID }}" [3068,3104]
                                        FIELD [3105,3169]
                                            String: "title" [3105,3112]
                                            STRING [3113,3169]
                                                String: "🤗 Results of the FA2 tests - ${{ matrix.model-name }}" [3113,3169]
                                        FIELD [3170,3217]
                                            String: "status" [3170,3178]
                                            STRING [3179,3217]
                                                String: "${{ steps.run_fa2_tests.conclusion}}" [3179,3217]
                                        FIELD [3218,3267]
                                            String: "slack_token" [3218,3231]
                                            STRING [3232,3267]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [3232,3267]
                            OBJECT [3270,3497]
                                FIELD [3271,3301]
                                    String: "name" [3271,3277]
                                    STRING [3278,3301]
                                        String: "Run integration tests" [3278,3301]
                                FIELD [3302,3330]
                                    String: "id" [3302,3306]
                                    STRING [3307,3330]
                                        String: "run_integration_tests" [3307,3330]
                                FIELD [3331,3346]
                                    String: "if" [3331,3335]
                                    STRING [3336,3346]
                                        String: "always()" [3336,3346]
                                FIELD [3347,3496]
                                    String: "run" [3347,3352]
                                    STRING [3353,3496]
                                        String: "pytest -rsfE -k \"IntegrationTest\"  --make-reports=tests_integration_${{ matrix.model-name }} tests/${{ matrix.model-name }}/test_modeling_*" [3353,3496]
                            OBJECT [3498,3775]
                                FIELD [3499,3580]
                                    String: "name" [3499,3505]
                                    STRING [3506,3580]
                                        String: "Test suite reports artifacts: tests_integration_${{ matrix.model-name }}" [3506,3580]
                                FIELD [3581,3603]
                                    String: "if" [3581,3585]
                                    STRING [3586,3603]
                                        String: "${{ always() }}" [3586,3603]
                                FIELD [3604,3639]
                                    String: "uses" [3604,3610]
                                    STRING [3611,3639]
                                        String: "actions/upload-artifact@v4" [3611,3639]
                                FIELD [3640,3774]
                                    String: "with" [3640,3646]
                                    OBJECT [3647,3774]
                                        FIELD [3648,3699]
                                            String: "name" [3648,3654]
                                            STRING [3655,3699]
                                                String: "tests_integration_${{ matrix.model-name }}" [3655,3699]
                                        FIELD [3700,3773]
                                            String: "path" [3700,3706]
                                            STRING [3707,3773]
                                                String: "/transformers/reports/tests_integration_${{ matrix.model-name }}" [3707,3773]
                            OBJECT [3776,4123]
                                FIELD [3777,3799]
                                    String: "name" [3777,3783]
                                    STRING [3784,3799]
                                        String: "Post to Slack" [3784,3799]
                                FIELD [3800,3815]
                                    String: "if" [3800,3804]
                                    STRING [3805,3815]
                                        String: "always()" [3805,3815]
                                FIELD [3816,3881]
                                    String: "uses" [3816,3822]
                                    STRING [3823,3881]
                                        String: "huggingface/hf-workflows/.github/actions/post-slack@main" [3823,3881]
                                FIELD [3882,4122]
                                    String: "with" [3882,3888]
                                    OBJECT [3889,4122]
                                        FIELD [3890,3942]
                                            String: "slack_channel" [3890,3905]
                                            STRING [3906,3942]
                                                String: "${{ env.OUTPUT_SLACK_CHANNEL_ID }}" [3906,3942]
                                        FIELD [3943,4015]
                                            String: "title" [3943,3950]
                                            STRING [3951,4015]
                                                String: "🤗 Results of the Integration tests - ${{ matrix.model-name }}" [3951,4015]
                                        FIELD [4016,4071]
                                            String: "status" [4016,4024]
                                            STRING [4025,4071]
                                                String: "${{ steps.run_integration_tests.conclusion}}" [4025,4071]
                                        FIELD [4072,4121]
                                            String: "slack_token" [4072,4085]
                                            STRING [4086,4121]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [4086,4121]
                            OBJECT [4124,4408]
                                FIELD [4125,4143]
                                    String: "name" [4125,4131]
                                    STRING [4132,4143]
                                        String: "Tailscale" [4132,4143]
                                FIELD [4144,4176]
                                    String: "if" [4144,4148]
                                    STRING [4149,4176]
                                        String: "${{ runner.debug == '1'}}" [4149,4176]
                                FIELD [4177,4217]
                                    String: "uses" [4177,4183]
                                    STRING [4184,4217]
                                        String: "huggingface/tailscale-action@v1" [4184,4217]
                                FIELD [4218,4407]
                                    String: "with" [4218,4224]
                                    OBJECT [4225,4407]
                                        FIELD [4226,4274]
                                            String: "authkey" [4226,4235]
                                            STRING [4236,4274]
                                                String: "${{ secrets.TAILSCALE_SSH_AUTHKEY }}" [4236,4274]
                                        FIELD [4275,4331]
                                            String: "slackChannel" [4275,4289]
                                            STRING [4290,4331]
                                                String: "${{ secrets.SLACK_CIFEEDBACK_CHANNEL }}" [4290,4331]
                                        FIELD [4332,4388]
                                            String: "slackToken" [4332,4344]
                                            STRING [4345,4388]
                                                String: "${{ secrets.SLACK_CIFEEDBACK_BOT_TOKEN }}" [4345,4388]
                                        FIELD [4389,4406]
                                            String: "waitForSSH" [4389,4401]
                                            TRUE [4402,4406]
            FIELD [4411,4515]
                String: "benchmark" [4411,4422]
                OBJECT [4423,4515]
                    FIELD [4424,4451]
                        String: "name" [4424,4430]
                        STRING [4431,4451]
                            String: "Benchmark workflow" [4431,4451]
                    FIELD [4452,4494]
                        String: "uses" [4452,4458]
                        STRING [4459,4494]
                            String: "./.github/workflows/benchmark.yml" [4459,4494]
                    FIELD [4495,4514]
                        String: "secrets" [4495,4504]
                        STRING [4505,4514]
                            String: "inherit" [4505,4514]