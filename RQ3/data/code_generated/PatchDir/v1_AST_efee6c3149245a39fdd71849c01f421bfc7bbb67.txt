OBJECT [0,4090]
    FIELD [1,23]
        String: "name" [1,7]
        STRING [8,23]
            String: "PHPUnit mysql" [8,23]
    FIELD [24,261]
        String: "on" [24,28]
        OBJECT [29,261]
            FIELD [30,212]
                String: "pull_request" [30,44]
                OBJECT [45,212]
                    FIELD [46,211]
                        String: "paths" [46,53]
                        ARRAY [54,211]
                            STRING [55,77]
                                String: ".github/workflows/**" [55,77]
                            STRING [78,90]
                                String: "appinfo/**" [78,90]
                            STRING [91,99]
                                String: "lib/**" [91,99]
                            STRING [100,114]
                                String: "templates/**" [100,114]
                            STRING [115,125]
                                String: "tests/**" [115,125]
                            STRING [126,137]
                                String: "vendor/**" [126,137]
                            STRING [138,153]
                                String: "vendor-bin/**" [138,153]
                            STRING [154,178]
                                String: ".php-cs-fixer.dist.php" [154,178]
                            STRING [179,194]
                                String: "composer.json" [179,194]
                            STRING [195,210]
                                String: "composer.lock" [195,210]
            FIELD [213,260]
                String: "push" [213,219]
                OBJECT [220,260]
                    FIELD [221,259]
                        String: "branches" [221,231]
                        ARRAY [232,259]
                            STRING [233,239]
                                String: "main" [233,239]
                            STRING [240,248]
                                String: "master" [240,248]
                            STRING [249,258]
                                String: "stable*" [249,258]
    FIELD [262,295]
        String: "permissions" [262,275]
        OBJECT [276,295]
            FIELD [277,294]
                String: "contents" [277,287]
                STRING [288,294]
                    String: "read" [288,294]
    FIELD [296,401]
        String: "concurrency" [296,309]
        OBJECT [310,401]
            FIELD [311,374]
                String: "group" [311,318]
                STRING [319,374]
                    String: "phpunit-mysql-${{ github.head_ref || github.run_id }}" [319,374]
            FIELD [375,400]
                String: "cancel-in-progress" [375,395]
                TRUE [396,400]
    FIELD [402,4089]
        String: "jobs" [402,408]
        OBJECT [409,4089]
            FIELD [410,3834]
                String: "phpunit-mysql" [410,425]
                OBJECT [426,3834]
                    FIELD [427,452]
                        String: "runs-on" [427,436]
                        STRING [437,452]
                            String: "ubuntu-latest" [437,452]
                    FIELD [453,546]
                        String: "strategy" [453,463]
                        OBJECT [464,546]
                            FIELD [465,545]
                                String: "matrix" [465,473]
                                OBJECT [474,545]
                                    FIELD [475,515]
                                        String: "php-versions" [475,489]
                                        ARRAY [490,515]
                                            STRING [491,496]
                                                String: "8.0" [491,496]
                                            STRING [497,502]
                                                String: "8.1" [497,502]
                                            STRING [503,508]
                                                String: "8.2" [503,508]
                                            STRING [509,514]
                                                String: "8.3" [509,514]
                                    FIELD [516,544]
                                        String: "server-versions" [516,533]
                                        ARRAY [534,544]
                                            STRING [535,543]
                                                String: "master" [535,543]
                    FIELD [547,816]
                        String: "services" [547,557]
                        OBJECT [558,816]
                            FIELD [559,815]
                                String: "mysql" [559,566]
                                OBJECT [567,815]
                                    FIELD [568,638]
                                        String: "image" [568,575]
                                        STRING [576,638]
                                            String: "ghcr.io/nextcloud/continuous-integration-mariadb-10.6:latest" [576,638]
                                    FIELD [639,664]
                                        String: "ports" [639,646]
                                        ARRAY [647,664]
                                            STRING [648,663]
                                                String: "4444:3306/tcp" [648,663]
                                    FIELD [665,709]
                                        String: "env" [665,670]
                                        OBJECT [671,709]
                                            FIELD [672,708]
                                                String: "MYSQL_ROOT_PASSWORD" [672,693]
                                                STRING [694,708]
                                                    String: "rootpassword" [694,708]
                                    FIELD [710,814]
                                        String: "options" [710,719]
                                        STRING [720,814]
                                            String: "--health-cmd=\"mysqladmin ping\" --health-interval 5s --health-timeout 2s --health-retries 5" [720,814]
                    FIELD [817,3833]
                        String: "steps" [817,824]
                        ARRAY [825,3833]
                            OBJECT [826,939]
                                FIELD [827,847]
                                    String: "name" [827,833]
                                    STRING [834,847]
                                        String: "Set app env" [834,847]
                                FIELD [848,938]
                                    String: "run" [848,853]
                                    STRING [854,938]
                                        String: "# Split and keep last\necho \"APP_NAME=${GITHUB_REPOSITORY##*/}\" >> $GITHUB_ENV\n" [854,938]
                            OBJECT [940,1212]
                                FIELD [941,988]
                                    String: "name" [941,947]
                                    STRING [948,988]
                                        String: "Enable ONLY_FULL_GROUP_BY MySQL option" [948,988]
                                FIELD [989,1211]
                                    String: "run" [989,994]
                                    STRING [995,1211]
                                        String: "echo \"SET GLOBAL sql_mode=(SELECT CONCAT(@@sql_mode,',ONLY_FULL_GROUP_BY'));\" | mysql -h 127.0.0.1 -P 4444 -u root -prootpassword\necho \"SELECT @@sql_mode;\" | mysql -h 127.0.0.1 -P 4444 -u root -prootpassword\n" [995,1211]
                            OBJECT [1213,1403]
                                FIELD [1214,1238]
                                    String: "name" [1214,1220]
                                    STRING [1221,1238]
                                        String: "Checkout server" [1221,1238]
                                FIELD [1239,1305]
                                    String: "uses" [1239,1245]
                                    STRING [1246,1305]
                                        String: "actions/checkout@8e5e7e5ab8b370d6c329ec480221332ada57f0ab" [1246,1305]
                                FIELD [1306,1402]
                                    String: "with" [1306,1312]
                                    OBJECT [1313,1402]
                                        FIELD [1314,1331]
                                            String: "submodules" [1314,1326]
                                            TRUE [1327,1331]
                                        FIELD [1332,1363]
                                            String: "repository" [1332,1344]
                                            STRING [1345,1363]
                                                String: "nextcloud/server" [1345,1363]
                                        FIELD [1364,1401]
                                            String: "ref" [1364,1369]
                                            STRING [1370,1401]
                                                String: "${{ matrix.server-versions }}" [1370,1401]
                            OBJECT [1404,1537]
                                FIELD [1405,1426]
                                    String: "name" [1405,1411]
                                    STRING [1412,1426]
                                        String: "Checkout app" [1412,1426]
                                FIELD [1427,1493]
                                    String: "uses" [1427,1433]
                                    STRING [1434,1493]
                                        String: "actions/checkout@8e5e7e5ab8b370d6c329ec480221332ada57f0ab" [1434,1493]
                                FIELD [1494,1536]
                                    String: "with" [1494,1500]
                                    OBJECT [1501,1536]
                                        FIELD [1502,1535]
                                            String: "path" [1502,1508]
                                            STRING [1509,1535]
                                                String: "apps/${{ env.APP_NAME }}" [1509,1535]
                            OBJECT [1538,1989]
                                FIELD [1539,1585]
                                    String: "name" [1539,1545]
                                    STRING [1546,1585]
                                        String: "Set up php ${{ matrix.php-versions }}" [1546,1585]
                                FIELD [1586,1658]
                                    String: "uses" [1586,1592]
                                    STRING [1593,1658]
                                        String: "shivammathur/setup-php@c5fc0d8281aba02c7fda07d3a70cc5371548067d" [1593,1658]
                                FIELD [1659,1935]
                                    String: "with" [1659,1665]
                                    OBJECT [1666,1935]
                                        FIELD [1667,1709]
                                            String: "php-version" [1667,1680]
                                            STRING [1681,1709]
                                                String: "${{ matrix.php-versions }}" [1681,1709]
                                        FIELD [1710,1891]
                                            String: "extensions" [1710,1722]
                                            STRING [1723,1891]
                                                String: "bz2, ctype, curl, dom, fileinfo, gd, iconv, intl, json, libxml, mbstring, openssl, pcntl, posix, session, simplexml, xmlreader, xmlwriter, zip, zlib, mysql, pdo_mysql" [1723,1891]
                                        FIELD [1892,1909]
                                            String: "coverage" [1892,1902]
                                            STRING [1903,1909]
                                                String: "none" [1903,1909]
                                        FIELD [1910,1934]
                                            String: "ini-file" [1910,1920]
                                            STRING [1921,1934]
                                                String: "development" [1921,1934]
                                FIELD [1936,1988]
                                    String: "env" [1936,1941]
                                    OBJECT [1942,1988]
                                        FIELD [1943,1987]
                                            String: "GITHUB_TOKEN" [1943,1957]
                                            STRING [1958,1987]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [1958,1987]
                            OBJECT [1990,2190]
                                FIELD [1991,2029]
                                    String: "name" [1991,1997]
                                    STRING [1998,2029]
                                        String: "Check composer file existence" [1998,2029]
                                FIELD [2030,2051]
                                    String: "id" [2030,2034]
                                    STRING [2035,2051]
                                        String: "check_composer" [2035,2051]
                                FIELD [2052,2131]
                                    String: "uses" [2052,2058]
                                    STRING [2059,2131]
                                        String: "andstor/file-existence-action@20b4d2e596410855db8f9ca21e96fbe18e12930b" [2059,2131]
                                FIELD [2132,2189]
                                    String: "with" [2132,2138]
                                    OBJECT [2139,2189]
                                        FIELD [2140,2188]
                                            String: "files" [2140,2147]
                                            STRING [2148,2188]
                                                String: "apps/${{ env.APP_NAME }}/composer.json" [2148,2188]
                            OBJECT [2191,2346]
                                FIELD [2192,2220]
                                    String: "name" [2192,2198]
                                    STRING [2199,2220]
                                        String: "Set up dependencies" [2199,2220]
                                FIELD [2221,2279]
                                    String: "if" [2221,2225]
                                    STRING [2226,2279]
                                        String: "steps.check_composer.outputs.files_exists == 'true'" [2226,2279]
                                FIELD [2280,2326]
                                    String: "working-directory" [2280,2299]
                                    STRING [2300,2326]
                                        String: "apps/${{ env.APP_NAME }}" [2300,2326]
                                FIELD [2327,2345]
                                    String: "run" [2327,2332]
                                    STRING [2333,2345]
                                        String: "composer i" [2333,2345]
                            OBJECT [2347,2675]
                                FIELD [2348,2373]
                                    String: "name" [2348,2354]
                                    STRING [2355,2373]
                                        String: "Set up Nextcloud" [2355,2373]
                                FIELD [2374,2396]
                                    String: "env" [2374,2379]
                                    OBJECT [2380,2396]
                                        FIELD [2381,2395]
                                            String: "DB_PORT" [2381,2390]
                                            NUMBER [2391,2395]
                                                Number: 4444 [2391,2395]
                                FIELD [2397,2674]
                                    String: "run" [2397,2402]
                                    STRING [2403,2674]
                                        String: "mkdir data\n./occ maintenance:install --verbose --database=mysql --database-name=nextcloud --database-host=127.0.0.1 --database-port=$DB_PORT --database-user=root --database-pass=rootpassword --admin-user admin --admin-pass admin\n./occ app:enable ${{ env.APP_NAME }}\n" [2403,2674]
                            OBJECT [2676,2883]
                                FIELD [2677,2717]
                                    String: "name" [2677,2683]
                                    STRING [2684,2717]
                                        String: "Check PHPUnit script is defined" [2684,2717]
                                FIELD [2718,2738]
                                    String: "id" [2718,2722]
                                    STRING [2723,2738]
                                        String: "check_phpunit" [2723,2738]
                                FIELD [2739,2763]
                                    String: "continue-on-error" [2739,2758]
                                    TRUE [2759,2763]
                                FIELD [2764,2810]
                                    String: "working-directory" [2764,2783]
                                    STRING [2784,2810]
                                        String: "apps/${{ env.APP_NAME }}" [2784,2810]
                                FIELD [2811,2882]
                                    String: "run" [2811,2816]
                                    STRING [2817,2882]
                                        String: "composer run --list | grep \"^  test:unit \" | wc -l | grep 1\n" [2817,2882]
                            OBJECT [2884,3028]
                                FIELD [2885,2901]
                                    String: "name" [2885,2891]
                                    STRING [2892,2901]
                                        String: "PHPUnit" [2892,2901]
                                FIELD [2902,2949]
                                    String: "if" [2902,2906]
                                    STRING [2907,2949]
                                        String: "steps.check_phpunit.outcome == 'success'" [2907,2949]
                                FIELD [2950,2996]
                                    String: "working-directory" [2950,2969]
                                    STRING [2970,2996]
                                        String: "apps/${{ env.APP_NAME }}" [2970,2996]
                                FIELD [2997,3027]
                                    String: "run" [2997,3002]
                                    STRING [3003,3027]
                                        String: "composer run test:unit" [3003,3027]
                            OBJECT [3029,3259]
                                FIELD [3030,3082]
                                    String: "name" [3030,3036]
                                    STRING [3037,3082]
                                        String: "Check PHPUnit integration script is defined" [3037,3082]
                                FIELD [3083,3107]
                                    String: "id" [3083,3087]
                                    STRING [3088,3107]
                                        String: "check_integration" [3088,3107]
                                FIELD [3108,3132]
                                    String: "continue-on-error" [3108,3127]
                                    TRUE [3128,3132]
                                FIELD [3133,3179]
                                    String: "working-directory" [3133,3152]
                                    STRING [3153,3179]
                                        String: "apps/${{ env.APP_NAME }}" [3153,3179]
                                FIELD [3180,3258]
                                    String: "run" [3180,3185]
                                    STRING [3186,3258]
                                        String: "composer run --list | grep \"^  test:integration \" | wc -l | grep 1\n" [3186,3258]
                            OBJECT [3260,3368]
                                FIELD [3261,3283]
                                    String: "name" [3261,3267]
                                    STRING [3268,3283]
                                        String: "Run Nextcloud" [3268,3283]
                                FIELD [3284,3335]
                                    String: "if" [3284,3288]
                                    STRING [3289,3335]
                                        String: "steps.check_integration.outcome == 'success'" [3289,3335]
                                FIELD [3336,3367]
                                    String: "run" [3336,3341]
                                    STRING [3342,3367]
                                        String: "php -S localhost:8080 &" [3342,3367]
                            OBJECT [3369,3536]
                                FIELD [3370,3398]
                                    String: "name" [3370,3376]
                                    STRING [3377,3398]
                                        String: "PHPUnit integration" [3377,3398]
                                FIELD [3399,3450]
                                    String: "if" [3399,3403]
                                    STRING [3404,3450]
                                        String: "steps.check_integration.outcome == 'success'" [3404,3450]
                                FIELD [3451,3497]
                                    String: "working-directory" [3451,3470]
                                    STRING [3471,3497]
                                        String: "apps/${{ env.APP_NAME }}" [3471,3497]
                                FIELD [3498,3535]
                                    String: "run" [3498,3503]
                                    STRING [3504,3535]
                                        String: "composer run test:integration" [3504,3535]
                            OBJECT [3537,3607]
                                FIELD [3538,3557]
                                    String: "name" [3538,3544]
                                    STRING [3545,3557]
                                        String: "Print logs" [3545,3557]
                                FIELD [3558,3573]
                                    String: "if" [3558,3562]
                                    STRING [3563,3573]
                                        String: "always()" [3563,3573]
                                FIELD [3574,3606]
                                    String: "run" [3574,3579]
                                    STRING [3580,3606]
                                        String: "cat data/nextcloud.log\n" [3580,3606]
                            OBJECT [3608,3832]
                                FIELD [3609,3625]
                                    String: "name" [3609,3615]
                                    STRING [3616,3625]
                                        String: "Skipped" [3616,3625]
                                FIELD [3626,3721]
                                    String: "if" [3626,3630]
                                    STRING [3631,3721]
                                        String: "steps.check_phpunit.outcome == 'failure' && steps.check_integration.outcome == 'failure'" [3631,3721]
                                FIELD [3722,3831]
                                    String: "run" [3722,3727]
                                    STRING [3728,3831]
                                        String: "echo 'Neither PHPUnit nor PHPUnit integration tests are specified in composer.json scripts'\nexit 1\n" [3728,3831]
            FIELD [3835,4088]
                String: "summary" [3835,3844]
                OBJECT [3845,4088]
                    FIELD [3846,3879]
                        String: "permissions" [3846,3859]
                        OBJECT [3860,3879]
                            FIELD [3861,3878]
                                String: "contents" [3861,3871]
                                STRING [3872,3878]
                                    String: "none" [3872,3878]
                    FIELD [3880,3905]
                        String: "runs-on" [3880,3889]
                        STRING [3890,3905]
                            String: "ubuntu-latest" [3890,3905]
                    FIELD [3906,3929]
                        String: "needs" [3906,3913]
                        STRING [3914,3929]
                            String: "phpunit-mysql" [3914,3929]
                    FIELD [3930,3945]
                        String: "if" [3930,3934]
                        STRING [3935,3945]
                            String: "always()" [3935,3945]
                    FIELD [3946,3976]
                        String: "name" [3946,3952]
                        STRING [3953,3976]
                            String: "phpunit-mysql-summary" [3953,3976]
                    FIELD [3977,4087]
                        String: "steps" [3977,3984]
                        ARRAY [3985,4087]
                            OBJECT [3986,4086]
                                FIELD [3987,4010]
                                    String: "name" [3987,3993]
                                    STRING [3994,4010]
                                        String: "Summary status" [3994,4010]
                                FIELD [4011,4085]
                                    String: "run" [4011,4016]
                                    STRING [4017,4085]
                                        String: "if ${{ needs.phpunit-mysql.result != 'success' }}; then exit 1; fi" [4017,4085]