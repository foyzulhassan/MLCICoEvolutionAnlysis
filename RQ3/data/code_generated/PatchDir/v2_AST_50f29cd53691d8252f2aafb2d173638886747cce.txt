OBJECT [0,5471]
    FIELD [1,30]
        String: "name" [1,7]
        STRING [8,30]
            String: "pr-integration-tests" [8,30]
    FIELD [31,104]
        String: "on" [31,35]
        OBJECT [36,104]
            FIELD [37,103]
                String: "pull_request_target" [37,58]
                OBJECT [59,103]
                    FIELD [60,102]
                        String: "types" [60,67]
                        ARRAY [68,102]
                            STRING [69,77]
                                String: "opened" [69,77]
                            STRING [78,91]
                                String: "synchronize" [78,91]
                            STRING [92,101]
                                String: "labeled" [92,101]
    FIELD [105,5470]
        String: "jobs" [105,111]
        OBJECT [112,5470]
            FIELD [113,2254]
                String: "build-docker-image" [113,133]
                OBJECT [134,2254]
                    FIELD [135,434]
                        String: "if" [135,139]
                        STRING [140,434]
                            String: "(github.event.action == 'labeled' && (github.event.label.name == 'approved' || github.event.label.name == 'ok-to-test')) || (github.event.action != 'labeled' && (contains(github.event.pull_request.labels.*.name, 'ok-to-test') || contains(github.event.pull_request.labels.*.name, 'approved')))" [140,434]
                    FIELD [435,460]
                        String: "runs-on" [435,444]
                        STRING [445,460]
                            String: "ubuntu-latest" [445,460]
                    FIELD [461,2172]
                        String: "steps" [461,468]
                        ARRAY [469,2172]
                            OBJECT [470,598]
                                FIELD [471,499]
                                    String: "uses" [471,477]
                                    STRING [478,499]
                                        String: "actions/checkout@v2" [478,499]
                                FIELD [500,597]
                                    String: "with" [500,506]
                                    OBJECT [507,597]
                                        FIELD [508,571]
                                            String: "ref" [508,513]
                                            STRING [514,571]
                                                String: "refs/pull/${{ github.event.pull_request.number }}/merge" [514,571]
                                        FIELD [572,596]
                                            String: "submodules" [572,584]
                                            STRING [585,596]
                                                String: "recursive" [585,596]
                            OBJECT [599,658]
                                FIELD [600,620]
                                    String: "name" [600,606]
                                    STRING [607,620]
                                        String: "Set up QEMU" [607,620]
                                FIELD [621,657]
                                    String: "uses" [621,627]
                                    STRING [628,657]
                                        String: "docker/setup-qemu-action@v1" [628,657]
                            OBJECT [659,729]
                                FIELD [660,689]
                                    String: "name" [660,666]
                                    STRING [667,689]
                                        String: "Set up Docker Buildx" [667,689]
                                FIELD [690,728]
                                    String: "uses" [690,696]
                                    STRING [697,728]
                                        String: "docker/setup-buildx-action@v1" [697,728]
                            OBJECT [730,957]
                                FIELD [731,754]
                                    String: "name" [731,737]
                                    STRING [738,754]
                                        String: "Set up AWS SDK" [738,754]
                                FIELD [755,804]
                                    String: "uses" [755,761]
                                    STRING [762,804]
                                        String: "aws-actions/configure-aws-credentials@v1" [762,804]
                                FIELD [805,956]
                                    String: "with" [805,811]
                                    OBJECT [812,956]
                                        FIELD [813,867]
                                            String: "aws-access-key-id" [813,832]
                                            STRING [833,867]
                                                String: "${{ secrets.AWS_ACCESS_KEY_ID }}" [833,867]
                                        FIELD [868,930]
                                            String: "aws-secret-access-key" [868,891]
                                            STRING [892,930]
                                                String: "${{ secrets.AWS_SECRET_ACCESS_KEY }}" [892,930]
                                        FIELD [931,955]
                                            String: "aws-region" [931,943]
                                            STRING [944,955]
                                                String: "us-west-2" [944,955]
                            OBJECT [958,1046]
                                FIELD [959,987]
                                    String: "name" [959,965]
                                    STRING [966,987]
                                        String: "Login to Amazon ECR" [966,987]
                                FIELD [988,1004]
                                    String: "id" [988,992]
                                    STRING [993,1004]
                                        String: "login-ecr" [993,1004]
                                FIELD [1005,1045]
                                    String: "uses" [1005,1011]
                                    STRING [1012,1045]
                                        String: "aws-actions/amazon-ecr-login@v1" [1012,1045]
                            OBJECT [1047,1166]
                                FIELD [1048,1074]
                                    String: "name" [1048,1054]
                                    STRING [1055,1074]
                                        String: "Set ECR image tag" [1055,1074]
                                FIELD [1075,1091]
                                    String: "id" [1075,1079]
                                    STRING [1080,1091]
                                        String: "image-tag" [1080,1091]
                                FIELD [1092,1165]
                                    String: "run" [1092,1097]
                                    STRING [1098,1165]
                                        String: "echo \"::set-output name=DOCKER_IMAGE_TAG::`git rev-parse HEAD`\"" [1098,1165]
                            OBJECT [1167,1303]
                                FIELD [1168,1199]
                                    String: "name" [1168,1174]
                                    STRING [1175,1199]
                                        String: "Cache Public ECR Image" [1175,1199]
                                FIELD [1200,1224]
                                    String: "id" [1200,1204]
                                    STRING [1205,1224]
                                        String: "lambda_python_3_9" [1205,1224]
                                FIELD [1225,1250]
                                    String: "uses" [1225,1231]
                                    STRING [1232,1250]
                                        String: "actions/cache@v2" [1232,1250]
                                FIELD [1251,1302]
                                    String: "with" [1251,1257]
                                    OBJECT [1258,1302]
                                        FIELD [1259,1275]
                                            String: "path" [1259,1265]
                                            STRING [1266,1275]
                                                String: "~/cache" [1266,1275]
                                        FIELD [1276,1301]
                                            String: "key" [1276,1281]
                                            STRING [1282,1301]
                                                String: "lambda_python_3_9" [1282,1301]
                            OBJECT [1304,1584]
                                FIELD [1305,1377]
                                    String: "name" [1305,1311]
                                    STRING [1312,1377]
                                        String: "Handle Cache Miss (pull public ECR image & save it to tar file)" [1312,1377]
                                FIELD [1378,1431]
                                    String: "if" [1378,1382]
                                    STRING [1383,1431]
                                        String: "steps.cache-primes.outputs.cache-hit != 'true'" [1383,1431]
                                FIELD [1432,1583]
                                    String: "run" [1432,1437]
                                    STRING [1438,1583]
                                        String: "mkdir -p ~/cache\ndocker pull public.ecr.aws/lambda/python:3.9\ndocker save public.ecr.aws/lambda/python:3.9 -o ~/cache/lambda_python_3_9.tar\n" [1438,1583]
                            OBJECT [1585,1755]
                                FIELD [1586,1645]
                                    String: "name" [1586,1592]
                                    STRING [1593,1645]
                                        String: "Handle Cache Hit (load docker image from tar file)" [1593,1645]
                                FIELD [1646,1699]
                                    String: "if" [1646,1650]
                                    STRING [1651,1699]
                                        String: "steps.cache-primes.outputs.cache-hit == 'true'" [1651,1699]
                                FIELD [1700,1754]
                                    String: "run" [1700,1705]
                                    STRING [1706,1754]
                                        String: "docker load -i ~/cache/lambda_python_3_9.tar\n" [1706,1754]
                            OBJECT [1756,2171]
                                FIELD [1757,1780]
                                    String: "name" [1757,1763]
                                    STRING [1764,1780]
                                        String: "Build and push" [1764,1780]
                                FIELD [1781,1884]
                                    String: "env" [1781,1786]
                                    OBJECT [1787,1884]
                                        FIELD [1788,1844]
                                            String: "ECR_REGISTRY" [1788,1802]
                                            STRING [1803,1844]
                                                String: "${{ steps.login-ecr.outputs.registry }}" [1803,1844]
                                        FIELD [1845,1883]
                                            String: "ECR_REPOSITORY" [1845,1861]
                                            STRING [1862,1883]
                                                String: "feast-python-server" [1862,1883]
                                FIELD [1885,2170]
                                    String: "run" [1885,1890]
                                    STRING [1891,2170]
                                        String: "docker build \\\n  --file sdk/python/feast/infra/feature_servers/aws_lambda/Dockerfile \\\n  --tag $ECR_REGISTRY/$ECR_REPOSITORY:${{ steps.image-tag.outputs.DOCKER_IMAGE_TAG }} \\\n  .\ndocker push $ECR_REGISTRY/$ECR_REPOSITORY:${{ steps.image-tag.outputs.DOCKER_IMAGE_TAG }}\n" [1891,2170]
                    FIELD [2173,2253]
                        String: "outputs" [2173,2182]
                        OBJECT [2183,2253]
                            FIELD [2184,2252]
                                String: "DOCKER_IMAGE_TAG" [2184,2202]
                                STRING [2203,2252]
                                    String: "${{ steps.image-tag.outputs.DOCKER_IMAGE_TAG }}" [2203,2252]
            FIELD [2255,5469]
                String: "integration-test-python" [2255,2280]
                OBJECT [2281,5469]
                    FIELD [2282,2581]
                        String: "if" [2282,2286]
                        STRING [2287,2581]
                            String: "(github.event.action == 'labeled' && (github.event.label.name == 'approved' || github.event.label.name == 'ok-to-test')) || (github.event.action != 'labeled' && (contains(github.event.pull_request.labels.*.name, 'ok-to-test') || contains(github.event.pull_request.labels.*.name, 'approved')))" [2287,2581]
                    FIELD [2582,2610]
                        String: "needs" [2582,2589]
                        STRING [2590,2610]
                            String: "build-docker-image" [2590,2610]
                    FIELD [2611,2639]
                        String: "runs-on" [2611,2620]
                        STRING [2621,2639]
                            String: "${{ matrix.os }}" [2621,2639]
                    FIELD [2640,2735]
                        String: "strategy" [2640,2650]
                        OBJECT [2651,2735]
                            FIELD [2652,2669]
                                String: "fail-fast" [2652,2663]
                                FALSE [2664,2669]
                            FIELD [2670,2734]
                                String: "matrix" [2670,2678]
                                OBJECT [2679,2734]
                                    FIELD [2680,2710]
                                        String: "python-version" [2680,2696]
                                        ARRAY [2697,2710]
                                            NUMBER [2698,2701]
                                                Number: 3.7 [2698,2701]
                                            NUMBER [2702,2705]
                                                Number: 3.8 [2702,2705]
                                            NUMBER [2706,2709]
                                                Number: 3.9 [2706,2709]
                                    FIELD [2711,2733]
                                        String: "os" [2711,2715]
                                        ARRAY [2716,2733]
                                            STRING [2717,2732]
                                                String: "ubuntu-latest" [2717,2732]
                    FIELD [2736,2807]
                        String: "env" [2736,2741]
                        OBJECT [2742,2807]
                            FIELD [2743,2766]
                                String: "OS" [2743,2747]
                                STRING [2748,2766]
                                    String: "${{ matrix.os }}" [2748,2766]
                            FIELD [2767,2806]
                                String: "PYTHON" [2767,2775]
                                STRING [2776,2806]
                                    String: "${{ matrix.python-version }}" [2776,2806]
                    FIELD [2808,2973]
                        String: "services" [2808,2818]
                        OBJECT [2819,2973]
                            FIELD [2820,2972]
                                String: "redis" [2820,2827]
                                OBJECT [2828,2972]
                                    FIELD [2829,2844]
                                        String: "image" [2829,2836]
                                        STRING [2837,2844]
                                            String: "redis" [2837,2844]
                                    FIELD [2845,2866]
                                        String: "ports" [2845,2852]
                                        ARRAY [2853,2866]
                                            STRING [2854,2865]
                                                String: "6379:6379" [2854,2865]
                                    FIELD [2867,2971]
                                        String: "options" [2867,2876]
                                        STRING [2877,2971]
                                            String: "--health-cmd \"redis-cli ping\" --health-interval 10s --health-timeout 5s --health-retries 5" [2877,2971]
                    FIELD [2974,5468]
                        String: "steps" [2974,2981]
                        ARRAY [2982,5468]
                            OBJECT [2983,3111]
                                FIELD [2984,3012]
                                    String: "uses" [2984,2990]
                                    STRING [2991,3012]
                                        String: "actions/checkout@v2" [2991,3012]
                                FIELD [3013,3110]
                                    String: "with" [3013,3019]
                                    OBJECT [3020,3110]
                                        FIELD [3021,3084]
                                            String: "ref" [3021,3026]
                                            STRING [3027,3084]
                                                String: "refs/pull/${{ github.event.pull_request.number }}/merge" [3027,3084]
                                        FIELD [3085,3109]
                                            String: "submodules" [3085,3097]
                                            STRING [3098,3109]
                                                String: "recursive" [3098,3109]
                            OBJECT [3112,3266]
                                FIELD [3113,3134]
                                    String: "name" [3113,3119]
                                    STRING [3120,3134]
                                        String: "Setup Python" [3120,3134]
                                FIELD [3135,3167]
                                    String: "uses" [3135,3141]
                                    STRING [3142,3167]
                                        String: "actions/setup-python@v2" [3142,3167]
                                FIELD [3168,3187]
                                    String: "id" [3168,3172]
                                    STRING [3173,3187]
                                        String: "setup-python" [3173,3187]
                                FIELD [3188,3265]
                                    String: "with" [3188,3194]
                                    OBJECT [3195,3265]
                                        FIELD [3196,3243]
                                            String: "python-version" [3196,3212]
                                            STRING [3213,3243]
                                                String: "${{ matrix.python-version }}" [3213,3243]
                                        FIELD [3244,3264]
                                            String: "architecture" [3244,3258]
                                            STRING [3259,3264]
                                                String: "x64" [3259,3264]
                            OBJECT [3267,3480]
                                FIELD [3268,3294]
                                    String: "name" [3268,3274]
                                    STRING [3275,3294]
                                        String: "Set up gcloud SDK" [3275,3294]
                                FIELD [3295,3341]
                                    String: "uses" [3295,3301]
                                    STRING [3302,3341]
                                        String: "google-github-actions/setup-gcloud@v0" [3302,3341]
                                FIELD [3342,3479]
                                    String: "with" [3342,3348]
                                    OBJECT [3349,3479]
                                        FIELD [3350,3394]
                                            String: "project_id" [3350,3362]
                                            STRING [3363,3394]
                                                String: "${{ secrets.GCP_PROJECT_ID }}" [3363,3394]
                                        FIELD [3395,3444]
                                            String: "service_account_key" [3395,3416]
                                            STRING [3417,3444]
                                                String: "${{ secrets.GCP_SA_KEY }}" [3417,3444]
                                        FIELD [3445,3478]
                                            String: "export_default_credentials" [3445,3473]
                                            TRUE [3474,3478]
                            OBJECT [3481,3526]
                                FIELD [3482,3505]
                                    String: "name" [3482,3488]
                                    STRING [3489,3505]
                                        String: "Use gcloud CLI" [3489,3505]
                                FIELD [3506,3525]
                                    String: "run" [3506,3511]
                                    STRING [3512,3525]
                                        String: "gcloud info" [3512,3525]
                            OBJECT [3527,3754]
                                FIELD [3528,3551]
                                    String: "name" [3528,3534]
                                    STRING [3535,3551]
                                        String: "Set up AWS SDK" [3535,3551]
                                FIELD [3552,3601]
                                    String: "uses" [3552,3558]
                                    STRING [3559,3601]
                                        String: "aws-actions/configure-aws-credentials@v1" [3559,3601]
                                FIELD [3602,3753]
                                    String: "with" [3602,3608]
                                    OBJECT [3609,3753]
                                        FIELD [3610,3664]
                                            String: "aws-access-key-id" [3610,3629]
                                            STRING [3630,3664]
                                                String: "${{ secrets.AWS_ACCESS_KEY_ID }}" [3630,3664]
                                        FIELD [3665,3727]
                                            String: "aws-secret-access-key" [3665,3688]
                                            STRING [3689,3727]
                                                String: "${{ secrets.AWS_SECRET_ACCESS_KEY }}" [3689,3727]
                                        FIELD [3728,3752]
                                            String: "aws-region" [3728,3740]
                                            STRING [3741,3752]
                                                String: "us-west-2" [3741,3752]
                            OBJECT [3755,3813]
                                FIELD [3756,3776]
                                    String: "name" [3756,3762]
                                    STRING [3763,3776]
                                        String: "Use AWS CLI" [3763,3776]
                                FIELD [3777,3812]
                                    String: "run" [3777,3782]
                                    STRING [3783,3812]
                                        String: "aws sts get-caller-identity" [3783,3812]
                            OBJECT [3814,3892]
                                FIELD [3815,3843]
                                    String: "name" [3815,3821]
                                    STRING [3822,3843]
                                        String: "Upgrade pip version" [3822,3843]
                                FIELD [3844,3891]
                                    String: "run" [3844,3849]
                                    STRING [3850,3891]
                                        String: "pip install --upgrade \"pip>=21.3.1\"\n" [3850,3891]
                            OBJECT [3893,3997]
                                FIELD [3894,3920]
                                    String: "name" [3894,3900]
                                    STRING [3901,3920]
                                        String: "Get pip cache dir" [3901,3920]
                                FIELD [3921,3937]
                                    String: "id" [3921,3925]
                                    STRING [3926,3937]
                                        String: "pip-cache" [3926,3937]
                                FIELD [3938,3996]
                                    String: "run" [3938,3943]
                                    STRING [3944,3996]
                                        String: "echo \"::set-output name=dir::$(pip cache dir)\"\n" [3944,3996]
                            OBJECT [3998,4403]
                                FIELD [3999,4017]
                                    String: "name" [3999,4005]
                                    STRING [4006,4017]
                                        String: "pip cache" [4006,4017]
                                FIELD [4018,4043]
                                    String: "uses" [4018,4024]
                                    STRING [4025,4043]
                                        String: "actions/cache@v2" [4025,4043]
                                FIELD [4044,4402]
                                    String: "with" [4044,4050]
                                    OBJECT [4051,4402]
                                        FIELD [4052,4164]
                                            String: "path" [4052,4058]
                                            STRING [4059,4164]
                                                String: "${{ steps.pip-cache.outputs.dir }}\n/opt/hostedtoolcache/Python\n/Users/runner/hostedtoolcache/Python\n" [4059,4164]
                                        FIELD [4165,4311]
                                            String: "key" [4165,4170]
                                            STRING [4171,4311]
                                                String: "${{ runner.os }}-${{ steps.setup-python.outputs.python-version }}-pip-${{ hashFiles(format('**/py{0}-ci-requirements.txt', env.PYTHON)) }}" [4171,4311]
                                        FIELD [4312,4401]
                                            String: "restore-keys" [4312,4326]
                                            STRING [4327,4401]
                                                String: "${{ runner.os }}-${{ steps.setup-python.outputs.python-version }}-pip-\n" [4327,4401]
                            OBJECT [4404,4462]
                                FIELD [4405,4431]
                                    String: "name" [4405,4411]
                                    STRING [4412,4431]
                                        String: "Install pip-tools" [4412,4431]
                                FIELD [4432,4461]
                                    String: "run" [4432,4437]
                                    STRING [4438,4461]
                                        String: "pip install pip-tools" [4438,4461]
                            OBJECT [4463,4538]
                                FIELD [4464,4493]
                                    String: "name" [4464,4470]
                                    STRING [4471,4493]
                                        String: "Install dependencies" [4471,4493]
                                FIELD [4494,4537]
                                    String: "run" [4494,4499]
                                    STRING [4500,4537]
                                        String: "make install-python-ci-dependencies" [4500,4537]
                            OBJECT [4539,4812]
                                FIELD [4540,4560]
                                    String: "name" [4540,4546]
                                    STRING [4547,4560]
                                        String: "Test python" [4547,4560]
                                FIELD [4561,4698]
                                    String: "env" [4561,4566]
                                    OBJECT [4567,4698]
                                        FIELD [4568,4658]
                                            String: "FEAST_SERVER_DOCKER_IMAGE_TAG" [4568,4599]
                                            STRING [4600,4658]
                                                String: "${{ needs.build-docker-image.outputs.DOCKER_IMAGE_TAG }}" [4600,4658]
                                        FIELD [4659,4680]
                                            String: "FEAST_USAGE" [4659,4672]
                                            STRING [4673,4680]
                                                String: "False" [4673,4680]
                                        FIELD [4681,4697]
                                            String: "IS_TEST" [4681,4690]
                                            STRING [4691,4697]
                                                String: "True" [4691,4697]
                                FIELD [4699,4811]
                                    String: "run" [4699,4704]
                                    STRING [4705,4811]
                                        String: "pytest -n 8 --cov=./ --cov-report=xml --verbose --color=yes sdk/python/tests --integration --durations=5" [4705,4811]
                            OBJECT [4813,5047]
                                FIELD [4814,4849]
                                    String: "name" [4814,4820]
                                    STRING [4821,4849]
                                        String: "Upload coverage to Codecov" [4821,4849]
                                FIELD [4850,4884]
                                    String: "uses" [4850,4856]
                                    STRING [4857,4884]
                                        String: "codecov/codecov-action@v1" [4857,4884]
                                FIELD [4885,5046]
                                    String: "with" [4885,4891]
                                    OBJECT [4892,5046]
                                        FIELD [4893,4931]
                                            String: "token" [4893,4900]
                                            STRING [4901,4931]
                                                String: "${{ secrets.CODECOV_TOKEN }}" [4901,4931]
                                        FIELD [4932,4956]
                                            String: "files" [4932,4939]
                                            STRING [4940,4956]
                                                String: "./coverage.xml" [4940,4956]
                                        FIELD [4957,4983]
                                            String: "flags" [4957,4964]
                                            STRING [4965,4983]
                                                String: "integrationtests" [4965,4983]
                                        FIELD [4984,5006]
                                            String: "env_vars" [4984,4994]
                                            STRING [4995,5006]
                                                String: "OS,PYTHON" [4995,5006]
                                        FIELD [5007,5030]
                                            String: "fail_ci_if_error" [5007,5025]
                                            TRUE [5026,5030]
                                        FIELD [5031,5045]
                                            String: "verbose" [5031,5040]
                                            TRUE [5041,5045]
                            OBJECT [5048,5350]
                                FIELD [5049,5074]
                                    String: "name" [5049,5055]
                                    STRING [5056,5074]
                                        String: "Benchmark python" [5056,5074]
                                FIELD [5075,5212]
                                    String: "env" [5075,5080]
                                    OBJECT [5081,5212]
                                        FIELD [5082,5172]
                                            String: "FEAST_SERVER_DOCKER_IMAGE_TAG" [5082,5113]
                                            STRING [5114,5172]
                                                String: "${{ needs.build-docker-image.outputs.DOCKER_IMAGE_TAG }}" [5114,5172]
                                        FIELD [5173,5194]
                                            String: "FEAST_USAGE" [5173,5186]
                                            STRING [5187,5194]
                                                String: "False" [5187,5194]
                                        FIELD [5195,5211]
                                            String: "IS_TEST" [5195,5204]
                                            STRING [5205,5211]
                                                String: "True" [5205,5211]
                                FIELD [5213,5349]
                                    String: "run" [5213,5218]
                                    STRING [5219,5349]
                                        String: "pytest --verbose --color=yes sdk/python/tests --integration --benchmark --benchmark-autosave --benchmark-save-data --durations=5" [5219,5349]
                            OBJECT [5351,5467]
                                FIELD [5352,5392]
                                    String: "name" [5352,5358]
                                    STRING [5359,5392]
                                        String: "Upload Benchmark Artifact to S3" [5359,5392]
                                FIELD [5393,5466]
                                    String: "run" [5393,5398]
                                    STRING [5399,5466]
                                        String: "aws s3 cp --recursive .benchmarks s3://feast-ci-pytest-benchmarks" [5399,5466]