OBJECT [0,5856]
    FIELD [1,24]
        String: "name" [1,7]
        STRING [8,24]
            String: "OctoBot-Docker" [8,24]
    FIELD [25,101]
        String: "on" [25,29]
        OBJECT [30,101]
            FIELD [31,80]
                String: "push" [31,37]
                OBJECT [38,80]
                    FIELD [39,66]
                        String: "branches" [39,49]
                        ARRAY [50,66]
                            STRING [51,59]
                                String: "master" [51,59]
                            STRING [60,65]
                                String: "dev" [60,65]
                    FIELD [67,79]
                        String: "tags" [67,73]
                        ARRAY [74,79]
                            STRING [75,78]
                                String: "*" [75,78]
            FIELD [81,100]
                String: "pull_request" [81,95]
                NULL [96,100]
    FIELD [102,5855]
        String: "jobs" [102,108]
        OBJECT [109,5855]
            FIELD [110,374]
                String: "lint" [110,116]
                OBJECT [117,374]
                    FIELD [118,156]
                        String: "name" [118,124]
                        STRING [125,156]
                            String: "ubuntu-latest - Docker - lint" [125,156]
                    FIELD [157,182]
                        String: "runs-on" [157,166]
                        STRING [167,182]
                            String: "ubuntu-latest" [167,182]
                    FIELD [183,373]
                        String: "steps" [183,190]
                        ARRAY [191,373]
                            OBJECT [192,222]
                                FIELD [193,221]
                                    String: "uses" [193,199]
                                    STRING [200,221]
                                        String: "actions/checkout@v2" [200,221]
                            OBJECT [223,372]
                                FIELD [224,245]
                                    String: "name" [224,230]
                                    STRING [231,245]
                                        String: "Run hadolint" [231,245]
                                FIELD [246,283]
                                    String: "uses" [246,252]
                                    STRING [253,283]
                                        String: "reviewdog/action-hadolint@v1" [253,283]
                                FIELD [284,371]
                                    String: "with" [284,290]
                                    OBJECT [291,371]
                                        FIELD [292,336]
                                            String: "github_token" [292,306]
                                            STRING [307,336]
                                                String: "${{ secrets.github_token }}" [307,336]
                                        FIELD [337,370]
                                            String: "hadolint_ignore" [337,354]
                                            STRING [355,370]
                                                String: "DL3013 DL3008" [355,370]
            FIELD [375,5585]
                String: "build_test_push" [375,392]
                OBJECT [393,5585]
                    FIELD [394,408]
                        String: "needs" [394,401]
                        STRING [402,408]
                            String: "lint" [402,408]
                    FIELD [409,462]
                        String: "name" [409,415]
                        STRING [416,462]
                            String: "ubuntu-latest - Docker - build & test & push" [416,462]
                    FIELD [463,488]
                        String: "runs-on" [463,472]
                        STRING [473,488]
                            String: "ubuntu-latest" [473,488]
                    FIELD [489,5584]
                        String: "steps" [489,496]
                        ARRAY [497,5584]
                            OBJECT [498,528]
                                FIELD [499,527]
                                    String: "uses" [499,505]
                                    STRING [506,527]
                                        String: "actions/checkout@v2" [506,527]
                            OBJECT [529,1047]
                                FIELD [530,564]
                                    String: "name" [530,536]
                                    STRING [537,564]
                                        String: "Set Environment Variables" [537,564]
                                FIELD [565,1046]
                                    String: "run" [565,570]
                                    STRING [571,1046]
                                        String: "OWNER=\"$(echo \"${{ github.repository_owner }}\" | tr '[:upper:]' '[:lower:]' | tr -d '-')\"\nIMG=octobot\necho \"VERSION=${GITHUB_REF##*/}\" >> $GITHUB_ENV\necho \"IMAGE=${OWNER}/${IMG}\" >> $GITHUB_ENV\necho \"LATEST=latest\" >> $GITHUB_ENV\necho \"STABLE=stable\" >> $GITHUB_ENV\necho \"TEST=test\" >> $GITHUB_ENV\necho \"CONTAINER_NAME=octobot\" >> $GITHUB_ENV\necho \"CHECK_TENTACLE_CONTAINER_TIME=10\" >> $GITHUB_ENV\necho \"WAIT_CONTAINER_TIME=80\" >> $GITHUB_ENV\n" [571,1046]
                            OBJECT [1048,1408]
                                FIELD [1049,1076]
                                    String: "name" [1049,1055]
                                    STRING [1056,1076]
                                        String: "Wait for tentacles" [1056,1076]
                                FIELD [1077,1150]
                                    String: "if" [1077,1081]
                                    STRING [1082,1150]
                                        String: "github.event_name == 'push' && startsWith(github.ref, 'refs/tags')" [1082,1150]
                                FIELD [1151,1201]
                                    String: "uses" [1151,1157]
                                    STRING [1158,1201]
                                        String: "fountainhead/action-wait-for-check@v1.0.0" [1158,1201]
                                FIELD [1202,1227]
                                    String: "id" [1202,1206]
                                    STRING [1207,1227]
                                        String: "wait-for-tentacles" [1207,1227]
                                FIELD [1228,1407]
                                    String: "with" [1228,1234]
                                    OBJECT [1235,1407]
                                        FIELD [1236,1271]
                                            String: "token" [1236,1243]
                                            STRING [1244,1271]
                                                String: "${{ secrets.AUTH_TOKEN }}" [1244,1271]
                                        FIELD [1272,1331]
                                            String: "checkName" [1272,1283]
                                            STRING [1284,1331]
                                                String: "ubuntu-latest - Python 3.8 - upload tentacles" [1284,1331]
                                        FIELD [1332,1357]
                                            String: "ref" [1332,1337]
                                            STRING [1338,1357]
                                                String: "${{ github.ref }}" [1338,1357]
                                        FIELD [1358,1384]
                                            String: "repo" [1358,1364]
                                            STRING [1365,1384]
                                                String: "OctoBot-Tentacles" [1365,1384]
                                        FIELD [1385,1406]
                                            String: "timeoutSeconds" [1385,1401]
                                            NUMBER [1402,1406]
                                                Number: 3600 [1402,1406]
                            OBJECT [1409,1603]
                                FIELD [1410,1453]
                                    String: "name" [1410,1416]
                                    STRING [1417,1453]
                                        String: "Trigger fail when Tentacles failed" [1417,1453]
                                FIELD [1454,1587]
                                    String: "if" [1454,1458]
                                    STRING [1459,1587]
                                        String: "github.event_name == 'push' && startsWith(github.ref, 'refs/tags') && steps.wait-for-tentacles.outputs.conclusion == 'failure'" [1459,1587]
                                FIELD [1588,1602]
                                    String: "run" [1588,1593]
                                    STRING [1594,1602]
                                        String: "exit 1" [1594,1602]
                            OBJECT [1604,1712]
                                FIELD [1605,1625]
                                    String: "name" [1605,1611]
                                    STRING [1612,1625]
                                        String: "Set up QEMU" [1612,1625]
                                FIELD [1626,1643]
                                    String: "id" [1626,1630]
                                    STRING [1631,1643]
                                        String: "qemu-setup" [1631,1643]
                                FIELD [1644,1684]
                                    String: "uses" [1644,1650]
                                    STRING [1651,1684]
                                        String: "docker/setup-qemu-action@master" [1651,1684]
                                FIELD [1685,1711]
                                    String: "with" [1685,1691]
                                    OBJECT [1692,1711]
                                        FIELD [1693,1710]
                                            String: "platforms" [1693,1704]
                                            STRING [1705,1710]
                                                String: "all" [1705,1710]
                            OBJECT [1713,1798]
                                FIELD [1714,1748]
                                    String: "name" [1714,1720]
                                    STRING [1721,1748]
                                        String: "Print available platforms" [1721,1748]
                                FIELD [1749,1797]
                                    String: "run" [1749,1754]
                                    STRING [1755,1797]
                                        String: "echo ${{ steps.qemu.outputs.platforms }}" [1755,1797]
                            OBJECT [1799,1935]
                                FIELD [1800,1829]
                                    String: "name" [1800,1806]
                                    STRING [1807,1829]
                                        String: "Set up Docker Buildx" [1807,1829]
                                FIELD [1830,1843]
                                    String: "id" [1830,1834]
                                    STRING [1835,1843]
                                        String: "buildx" [1835,1843]
                                FIELD [1844,1886]
                                    String: "uses" [1844,1850]
                                    STRING [1851,1886]
                                        String: "docker/setup-buildx-action@master" [1851,1886]
                                FIELD [1887,1934]
                                    String: "with" [1887,1893]
                                    OBJECT [1894,1934]
                                        FIELD [1895,1922]
                                            String: "driver" [1895,1903]
                                            STRING [1904,1922]
                                                String: "docker-container" [1904,1922]
                                        FIELD [1923,1933]
                                            String: "use" [1923,1928]
                                            TRUE [1929,1933]
                            OBJECT [1936,2123]
                                FIELD [1937,1965]
                                    String: "name" [1937,1943]
                                    STRING [1944,1965]
                                        String: "Cache Docker layers" [1944,1965]
                                FIELD [1966,1991]
                                    String: "uses" [1966,1972]
                                    STRING [1973,1991]
                                        String: "actions/cache@v2" [1973,1991]
                                FIELD [1992,2122]
                                    String: "with" [1992,1998]
                                    OBJECT [1999,2122]
                                        FIELD [2000,2027]
                                            String: "path" [2000,2006]
                                            STRING [2007,2027]
                                                String: "/tmp/.buildx-cache" [2007,2027]
                                        FIELD [2028,2077]
                                            String: "key" [2028,2033]
                                            STRING [2034,2077]
                                                String: "${{ runner.os }}-buildx-${{ github.sha }}" [2034,2077]
                                        FIELD [2078,2121]
                                            String: "restore-keys" [2078,2092]
                                            STRING [2093,2121]
                                                String: "${{ runner.os }}-buildx-\n" [2093,2121]
                            OBJECT [2124,2320]
                                FIELD [2125,2152]
                                    String: "name" [2125,2131]
                                    STRING [2132,2152]
                                        String: "Login to DockerHub" [2132,2152]
                                FIELD [2153,2187]
                                    String: "if" [2153,2157]
                                    STRING [2158,2187]
                                        String: "github.event_name == 'push'" [2158,2187]
                                FIELD [2188,2219]
                                    String: "uses" [2188,2194]
                                    STRING [2195,2219]
                                        String: "docker/login-action@v1" [2195,2219]
                                FIELD [2220,2319]
                                    String: "with" [2220,2226]
                                    OBJECT [2227,2319]
                                        FIELD [2228,2274]
                                            String: "username" [2228,2238]
                                            STRING [2239,2274]
                                                String: "${{ secrets.DOCKERHUB_USERNAME }}" [2239,2274]
                                        FIELD [2275,2318]
                                            String: "password" [2275,2285]
                                            STRING [2286,2318]
                                                String: "${{ secrets.DOCKERHUB_TOKEN }}" [2286,2318]
                            OBJECT [2321,2581]
                                FIELD [2322,2355]
                                    String: "name" [2322,2328]
                                    STRING [2329,2355]
                                        String: "Wait for main build done" [2329,2355]
                                FIELD [2356,2390]
                                    String: "if" [2356,2360]
                                    STRING [2361,2390]
                                        String: "github.event_name == 'push'" [2361,2390]
                                FIELD [2391,2441]
                                    String: "uses" [2391,2397]
                                    STRING [2398,2441]
                                        String: "fountainhead/action-wait-for-check@v1.0.0" [2398,2441]
                                FIELD [2442,2468]
                                    String: "id" [2442,2446]
                                    STRING [2447,2468]
                                        String: "wait-for-main-build" [2447,2468]
                                FIELD [2469,2580]
                                    String: "with" [2469,2475]
                                    OBJECT [2476,2580]
                                        FIELD [2477,2512]
                                            String: "token" [2477,2484]
                                            STRING [2485,2512]
                                                String: "${{ secrets.AUTH_TOKEN }}" [2485,2512]
                                        FIELD [2513,2531]
                                            String: "checkName" [2513,2524]
                                            STRING [2525,2531]
                                                String: "Done" [2525,2531]
                                        FIELD [2532,2557]
                                            String: "ref" [2532,2537]
                                            STRING [2538,2557]
                                                String: "${{ github.sha }}" [2538,2557]
                                        FIELD [2558,2579]
                                            String: "timeoutSeconds" [2558,2574]
                                            NUMBER [2575,2579]
                                                Number: 3600 [2575,2579]
                            OBJECT [2582,2733]
                                FIELD [2583,2621]
                                    String: "name" [2583,2589]
                                    STRING [2590,2621]
                                        String: "Trigger fail when Main failed" [2590,2621]
                                FIELD [2622,2717]
                                    String: "if" [2622,2626]
                                    STRING [2627,2717]
                                        String: "github.event_name == 'push' && steps.wait-for-main-build.outputs.conclusion == 'failure'" [2627,2717]
                                FIELD [2718,2732]
                                    String: "run" [2718,2723]
                                    STRING [2724,2732]
                                        String: "exit 1" [2724,2732]
                            OBJECT [2734,3134]
                                FIELD [2735,2756]
                                    String: "name" [2735,2741]
                                    STRING [2742,2756]
                                        String: "Build latest" [2742,2756]
                                FIELD [2757,2791]
                                    String: "if" [2757,2761]
                                    STRING [2762,2791]
                                        String: "github.event_name != 'push'" [2762,2791]
                                FIELD [2792,2832]
                                    String: "uses" [2792,2798]
                                    STRING [2799,2832]
                                        String: "docker/build-push-action@master" [2799,2832]
                                FIELD [2833,3133]
                                    String: "with" [2833,2839]
                                    OBJECT [2840,3133]
                                        FIELD [2841,2854]
                                            String: "context" [2841,2850]
                                            STRING [2851,2854]
                                                String: "." [2851,2854]
                                        FIELD [2855,2899]
                                            String: "builder" [2855,2864]
                                            STRING [2865,2899]
                                                String: "${{ steps.buildx.outputs.name }}" [2865,2899]
                                        FIELD [2900,2925]
                                            String: "platforms" [2900,2911]
                                            STRING [2912,2925]
                                                String: "linux/amd64" [2912,2925]
                                        FIELD [2926,2938]
                                            String: "push" [2926,2932]
                                            FALSE [2933,2938]
                                        FIELD [2939,2982]
                                            String: "tags" [2939,2945]
                                            STRING [2946,2982]
                                                String: "${{ env.IMAGE }}:${{ env.LATEST }}" [2946,2982]
                                        FIELD [2983,3035]
                                            String: "build-args" [2983,2995]
                                            STRING [2996,3035]
                                                String: "TENTACLES_URL_TAG=${{ env.LATEST }}\n" [2996,3035]
                                        FIELD [3036,3084]
                                            String: "cache-from" [3036,3048]
                                            STRING [3049,3084]
                                                String: "type=local,src=/tmp/.buildx-cache" [3049,3084]
                                        FIELD [3085,3132]
                                            String: "cache-to" [3085,3095]
                                            STRING [3096,3132]
                                                String: "type=local,dest=/tmp/.buildx-cache" [3096,3132]
                            OBJECT [3135,3352]
                                FIELD [3136,3172]
                                    String: "name" [3136,3142]
                                    STRING [3143,3172]
                                        String: "Docker build test container" [3143,3172]
                                FIELD [3173,3207]
                                    String: "if" [3173,3177]
                                    STRING [3178,3207]
                                        String: "github.event_name != 'push'" [3178,3207]
                                FIELD [3208,3351]
                                    String: "run" [3208,3213]
                                    STRING [3214,3351]
                                        String: "docker build -f ./tests/Dockerfile --build-arg OCTOBOT_IMAGE=${{ env.IMAGE }}:${{ env.LATEST }} -t ${{ env.IMAGE }}:${{ env.TEST }} .\n" [3214,3351]
                            OBJECT [3353,3558]
                                FIELD [3354,3382]
                                    String: "name" [3354,3360]
                                    STRING [3361,3382]
                                        String: "run tests in docker" [3361,3382]
                                FIELD [3383,3417]
                                    String: "if" [3383,3387]
                                    STRING [3388,3417]
                                        String: "github.event_name != 'push'" [3388,3417]
                                FIELD [3418,3557]
                                    String: "run" [3418,3423]
                                    STRING [3424,3557]
                                        String: "docker run -i -e TENTACLES_REPOSITORY=dev-tentacles -e TENTACLES_URL_TAG=${GITHUB_HEAD_REF////_} ${{ env.IMAGE }}:${{ env.TEST }}\n" [3424,3557]
                            OBJECT [3559,4471]
                                FIELD [3560,3601]
                                    String: "name" [3560,3566]
                                    STRING [3567,3601]
                                        String: "run and check health after start" [3567,3601]
                                FIELD [3602,3636]
                                    String: "if" [3602,3606]
                                    STRING [3607,3636]
                                        String: "github.event_name != 'push'" [3607,3636]
                                FIELD [3637,4470]
                                    String: "run" [3637,3642]
                                    STRING [3643,4470]
                                        String: "echo Start OctoBot docker with branche_name tentacles package\ndocker run -id -e TENTACLES_PACKAGES_SOURCE=dev -e TENTACLES_URL_TAG=${GITHUB_HEAD_REF////_} --name ${{ env.CONTAINER_NAME }} ${{ env.IMAGE }}:${{ env.LATEST }}\nsleep ${{ env.CHECK_TENTACLE_CONTAINER_TIME }}\nif docker logs ${{ env.CONTAINER_NAME }} | grep \"octobot_tentacles_manager.api.util.tentacles_management Can't find tentacle archive at:\" ; then\n    docker rm -f ${{ env.CONTAINER_NAME }}\n    echo Restarting docker with latest tentacle package...\n    docker run -id -e TENTACLES_URL_TAG=${{ env.LATEST }} --name ${{ env.CONTAINER_NAME }} ${{ env.IMAGE }}:${{ env.LATEST }}\nfi\nsleep ${{ env.WAIT_CONTAINER_TIME }}\ndocker logs ${{ env.CONTAINER_NAME }}\ndocker inspect ${{ env.CONTAINER_NAME }} | jq '.[].State.Health.Status' | grep \"healthy\"\n" [3643,4470]
                            OBJECT [4472,4979]
                                FIELD [4473,4503]
                                    String: "name" [4473,4479]
                                    STRING [4480,4503]
                                        String: "Build and push latest" [4480,4503]
                                FIELD [4504,4612]
                                    String: "if" [4504,4508]
                                    STRING [4509,4612]
                                        String: "github.event_name == 'push' && !startsWith(github.ref, 'refs/tags') && github.ref == 'refs/heads/dev'" [4509,4612]
                                FIELD [4613,4653]
                                    String: "uses" [4613,4619]
                                    STRING [4620,4653]
                                        String: "docker/build-push-action@master" [4620,4653]
                                FIELD [4654,4978]
                                    String: "with" [4654,4660]
                                    OBJECT [4661,4978]
                                        FIELD [4662,4675]
                                            String: "context" [4662,4671]
                                            STRING [4672,4675]
                                                String: "." [4672,4675]
                                        FIELD [4676,4720]
                                            String: "builder" [4676,4685]
                                            STRING [4686,4720]
                                                String: "${{ steps.buildx.outputs.name }}" [4686,4720]
                                        FIELD [4721,4771]
                                            String: "platforms" [4721,4732]
                                            STRING [4733,4771]
                                                String: "linux/amd64,linux/arm64,linux/arm/v7" [4733,4771]
                                        FIELD [4772,4783]
                                            String: "push" [4772,4778]
                                            TRUE [4779,4783]
                                        FIELD [4784,4827]
                                            String: "tags" [4784,4790]
                                            STRING [4791,4827]
                                                String: "${{ env.IMAGE }}:${{ env.LATEST }}" [4791,4827]
                                        FIELD [4828,4880]
                                            String: "build-args" [4828,4840]
                                            STRING [4841,4880]
                                                String: "TENTACLES_URL_TAG=${{ env.LATEST }}\n" [4841,4880]
                                        FIELD [4881,4929]
                                            String: "cache-from" [4881,4893]
                                            STRING [4894,4929]
                                                String: "type=local,src=/tmp/.buildx-cache" [4894,4929]
                                        FIELD [4930,4977]
                                            String: "cache-to" [4930,4940]
                                            STRING [4941,4977]
                                                String: "type=local,dest=/tmp/.buildx-cache" [4941,4977]
                            OBJECT [4980,5496]
                                FIELD [4981,5011]
                                    String: "name" [4981,4987]
                                    STRING [4988,5011]
                                        String: "Build and push on tag" [4988,5011]
                                FIELD [5012,5085]
                                    String: "if" [5012,5016]
                                    STRING [5017,5085]
                                        String: "github.event_name == 'push' && startsWith(github.ref, 'refs/tags')" [5017,5085]
                                FIELD [5086,5126]
                                    String: "uses" [5086,5092]
                                    STRING [5093,5126]
                                        String: "docker/build-push-action@master" [5093,5126]
                                FIELD [5127,5495]
                                    String: "with" [5127,5133]
                                    OBJECT [5134,5495]
                                        FIELD [5135,5148]
                                            String: "context" [5135,5144]
                                            STRING [5145,5148]
                                                String: "." [5145,5148]
                                        FIELD [5149,5170]
                                            String: "file" [5149,5155]
                                            STRING [5156,5170]
                                                String: "./Dockerfile" [5156,5170]
                                        FIELD [5171,5215]
                                            String: "builder" [5171,5180]
                                            STRING [5181,5215]
                                                String: "${{ steps.buildx.outputs.name }}" [5181,5215]
                                        FIELD [5216,5266]
                                            String: "platforms" [5216,5227]
                                            STRING [5228,5266]
                                                String: "linux/amd64,linux/arm64,linux/arm/v7" [5228,5266]
                                        FIELD [5267,5278]
                                            String: "push" [5267,5273]
                                            TRUE [5274,5278]
                                        FIELD [5279,5397]
                                            String: "tags" [5279,5285]
                                            STRING [5286,5397]
                                                String: "${{ env.IMAGE }}:${{ env.LATEST }}\n${{ env.IMAGE }}:${{ env.STABLE }}\n${{ env.IMAGE }}:${{ env.VERSION }}\n" [5286,5397]
                                        FIELD [5398,5446]
                                            String: "cache-from" [5398,5410]
                                            STRING [5411,5446]
                                                String: "type=local,src=/tmp/.buildx-cache" [5411,5446]
                                        FIELD [5447,5494]
                                            String: "cache-to" [5447,5457]
                                            STRING [5458,5494]
                                                String: "type=local,dest=/tmp/.buildx-cache" [5458,5494]
                            OBJECT [5497,5583]
                                FIELD [5498,5519]
                                    String: "name" [5498,5504]
                                    STRING [5505,5519]
                                        String: "Image digest" [5505,5519]
                                FIELD [5520,5582]
                                    String: "run" [5520,5525]
                                    STRING [5526,5582]
                                        String: "echo ${{ steps.docker_build_and_psuh.outputs.digest }}" [5526,5582]
            FIELD [5586,5854]
                String: "notify" [5586,5594]
                OBJECT [5595,5854]
                    FIELD [5596,5611]
                        String: "name" [5596,5602]
                        STRING [5603,5611]
                            String: "Notify" [5603,5611]
                    FIELD [5612,5637]
                        String: "runs-on" [5612,5621]
                        STRING [5622,5637]
                            String: "ubuntu-latest" [5622,5637]
                    FIELD [5638,5672]
                        String: "needs" [5638,5645]
                        ARRAY [5646,5672]
                            STRING [5647,5653]
                                String: "lint" [5647,5653]
                            STRING [5654,5671]
                                String: "build_test_push" [5654,5671]
                    FIELD [5673,5696]
                        String: "if" [5673,5677]
                        STRING [5678,5696]
                            String: "${{ failure() }}" [5678,5696]
                    FIELD [5697,5853]
                        String: "steps" [5697,5704]
                        ARRAY [5705,5853]
                            OBJECT [5706,5852]
                                FIELD [5707,5730]
                                    String: "name" [5707,5713]
                                    STRING [5714,5730]
                                        String: "Notify discord" [5714,5730]
                                FIELD [5731,5773]
                                    String: "uses" [5731,5737]
                                    STRING [5738,5773]
                                        String: "sarisia/actions-status-discord@v1" [5738,5773]
                                FIELD [5774,5851]
                                    String: "with" [5774,5780]
                                    OBJECT [5781,5851]
                                        FIELD [5782,5800]
                                            String: "status" [5782,5790]
                                            STRING [5791,5800]
                                                String: "Failure" [5791,5800]
                                        FIELD [5801,5850]
                                            String: "webhook" [5801,5810]
                                            STRING [5811,5850]
                                                String: "${{ secrets.DISCORD_GITHUB_WEBHOOK }}" [5811,5850]