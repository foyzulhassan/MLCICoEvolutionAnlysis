OBJECT [0,6460]
    FIELD [1,20]
        String: "name" [1,7]
        STRING [8,20]
            String: "Autoformat" [8,20]
    FIELD [21,74]
        String: "on" [21,25]
        OBJECT [26,74]
            FIELD [27,73]
                String: "issue_comment" [27,42]
                OBJECT [43,73]
                    FIELD [44,72]
                        String: "types" [44,51]
                        ARRAY [52,72]
                            STRING [53,62]
                                String: "created" [53,62]
                            STRING [63,71]
                                String: "edited" [63,71]
    FIELD [75,108]
        String: "permissions" [75,88]
        OBJECT [89,108]
            FIELD [90,107]
                String: "contents" [90,100]
                STRING [101,107]
                    String: "read" [101,107]
    FIELD [109,181]
        String: "defaults" [109,119]
        OBJECT [120,181]
            FIELD [121,180]
                String: "run" [121,126]
                OBJECT [127,180]
                    FIELD [128,179]
                        String: "shell" [128,135]
                        STRING [136,179]
                            String: "bash --noprofile --norc -exo pipefail {0}" [136,179]
    FIELD [182,6459]
        String: "jobs" [182,188]
        OBJECT [189,6459]
            FIELD [190,1831]
                String: "check-comment" [190,205]
                OBJECT [206,1831]
                    FIELD [207,232]
                        String: "runs-on" [207,216]
                        STRING [217,232]
                            String: "ubuntu-latest" [217,232]
                    FIELD [233,253]
                        String: "timeout-minutes" [233,250]
                        NUMBER [251,253]
                            Number: 10 [251,253]
                    FIELD [254,352]
                        String: "if" [254,258]
                        STRING [259,352]
                            String: "${{ github.event.issue.pull_request && contains(github.event.comment.body, 'autoformat') }}" [259,352]
                    FIELD [353,411]
                        String: "permissions" [353,366]
                        OBJECT [367,411]
                            FIELD [368,386]
                                String: "statuses" [368,378]
                                STRING [379,386]
                                    String: "write" [379,386]
                            FIELD [387,410]
                                String: "pull-requests" [387,402]
                                STRING [403,410]
                                    String: "write" [403,410]
                    FIELD [412,980]
                        String: "outputs" [412,421]
                        OBJECT [422,980]
                            FIELD [423,505]
                                String: "should_autoformat" [423,442]
                                STRING [443,505]
                                    String: "${{ fromJSON(steps.judge.outputs.result).shouldAutoformat }}" [443,505]
                            FIELD [506,575]
                                String: "repository" [506,518]
                                STRING [519,575]
                                    String: "${{ fromJSON(steps.judge.outputs.result).repository }}" [519,575]
                            FIELD [576,641]
                                String: "head_ref" [576,586]
                                STRING [587,641]
                                    String: "${{ fromJSON(steps.judge.outputs.result).head_ref }}" [587,641]
                            FIELD [642,707]
                                String: "head_sha" [642,652]
                                STRING [653,707]
                                    String: "${{ fromJSON(steps.judge.outputs.result).head_sha }}" [653,707]
                            FIELD [708,773]
                                String: "base_ref" [708,718]
                                STRING [719,773]
                                    String: "${{ fromJSON(steps.judge.outputs.result).base_ref }}" [719,773]
                            FIELD [774,839]
                                String: "base_sha" [774,784]
                                STRING [785,839]
                                    String: "${{ fromJSON(steps.judge.outputs.result).base_sha }}" [785,839]
                            FIELD [840,907]
                                String: "base_repo" [840,851]
                                STRING [852,907]
                                    String: "${{ fromJSON(steps.judge.outputs.result).base_repo }}" [852,907]
                            FIELD [908,979]
                                String: "pull_number" [908,921]
                                STRING [922,979]
                                    String: "${{ fromJSON(steps.judge.outputs.result).pull_number }}" [922,979]
                    FIELD [981,1830]
                        String: "steps" [981,988]
                        ARRAY [989,1830]
                            OBJECT [990,1020]
                                FIELD [991,1019]
                                    String: "uses" [991,997]
                                    STRING [998,1019]
                                        String: "actions/checkout@v4" [998,1019]
                            OBJECT [1021,1829]
                                FIELD [1022,1036]
                                    String: "name" [1022,1028]
                                    STRING [1029,1036]
                                        String: "judge" [1029,1036]
                                FIELD [1037,1049]
                                    String: "id" [1037,1041]
                                    STRING [1042,1049]
                                        String: "judge" [1042,1049]
                                FIELD [1050,1083]
                                    String: "uses" [1050,1056]
                                    STRING [1057,1083]
                                        String: "actions/github-script@v7" [1057,1083]
                                FIELD [1084,1828]
                                    String: "with" [1084,1090]
                                    OBJECT [1091,1828]
                                        FIELD [1092,1827]
                                            String: "script" [1092,1100]
                                            STRING [1101,1827]
                                                String: "core.debug(JSON.stringify(context, null, 2));\nconst autoformat = require('./.github/workflows/autoformat.js');\nconst { comment } = context.payload;\nconst pullInfo = await autoformat.getPullInformation(context, github);\nconst isMaintainer = autoformat.isMlflowMaintainer(comment.author_association) && autoformat.isMlflowMaintainer(pullInfo.author_association);\nif (!isMaintainer) {\n  core.setFailed(\"Only MLflow maintainers can trigger this workflow in their PRs.\");\n}\nconst shouldAutoformat = autoformat.shouldAutoformat(comment);\nif (shouldAutoformat) {\n  await autoformat.createReaction(context, github);\n  await autoformat.createStatus(context, github, core);\n}\nreturn { ...pullInfo, shouldAutoformat };\n" [1101,1827]
            FIELD [1832,4829]
                String: "format" [1832,1840]
                OBJECT [1841,4829]
                    FIELD [1842,1867]
                        String: "runs-on" [1842,1851]
                        STRING [1852,1867]
                            String: "ubuntu-latest" [1852,1867]
                    FIELD [1868,1888]
                        String: "timeout-minutes" [1868,1885]
                        NUMBER [1886,1888]
                            Number: 30 [1886,1888]
                    FIELD [1889,1912]
                        String: "needs" [1889,1896]
                        STRING [1897,1912]
                            String: "check-comment" [1897,1912]
                    FIELD [1913,1982]
                        String: "if" [1913,1917]
                        STRING [1918,1982]
                            String: "${{ needs.check-comment.outputs.should_autoformat == 'true' }}" [1918,1982]
                    FIELD [1983,2021]
                        String: "permissions" [1983,1996]
                        OBJECT [1997,2021]
                            FIELD [1998,2020]
                                String: "pull-requests" [1998,2013]
                                STRING [2014,2020]
                                    String: "read" [2014,2020]
                    FIELD [2022,2088]
                        String: "outputs" [2022,2031]
                        OBJECT [2032,2088]
                            FIELD [2033,2087]
                                String: "reformatted" [2033,2046]
                                STRING [2047,2087]
                                    String: "${{ steps.patch.outputs.reformatted }}" [2047,2087]
                    FIELD [2089,4828]
                        String: "steps" [2089,2096]
                        ARRAY [2097,4828]
                            OBJECT [2098,2268]
                                FIELD [2099,2127]
                                    String: "uses" [2099,2105]
                                    STRING [2106,2127]
                                        String: "actions/checkout@v4" [2106,2127]
                                FIELD [2128,2267]
                                    String: "with" [2128,2134]
                                    OBJECT [2135,2267]
                                        FIELD [2136,2196]
                                            String: "repository" [2136,2148]
                                            STRING [2149,2196]
                                                String: "${{ needs.check-comment.outputs.repository }}" [2149,2196]
                                        FIELD [2197,2248]
                                            String: "ref" [2197,2202]
                                            STRING [2203,2248]
                                                String: "${{ needs.check-comment.outputs.head_ref }}" [2203,2248]
                                        FIELD [2249,2266]
                                            String: "fetch-depth" [2249,2262]
                                            NUMBER [2263,2266]
                                                Number: 300 [2263,2266]
                            OBJECT [2269,2957]
                                FIELD [2270,2289]
                                    String: "name" [2270,2276]
                                    STRING [2277,2289]
                                        String: "Check diff" [2277,2289]
                                FIELD [2290,2301]
                                    String: "id" [2290,2294]
                                    STRING [2295,2301]
                                        String: "diff" [2295,2301]
                                FIELD [2302,2354]
                                    String: "env" [2302,2307]
                                    OBJECT [2308,2354]
                                        FIELD [2309,2353]
                                            String: "GITHUB_TOKEN" [2309,2323]
                                            STRING [2324,2353]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [2324,2353]
                                FIELD [2355,2956]
                                    String: "run" [2355,2360]
                                    STRING [2361,2956]
                                        String: "changed_files=\"$(gh pr view --repo ${{ github.repository }} ${{ needs.check-comment.outputs.pull_number }} --json files --jq '.files.[].path')\"\nprotos=$([[ -z $(echo \"$changed_files\" | grep '^\\(mlflow/protos\\|tests/protos\\)') ]] && echo \"false\" || echo \"true\")\njs=$([[ -z $(echo \"$changed_files\" | grep '^mlflow/server/js') ]] && echo \"false\" || echo \"true\")\nr=$([[ -z $(echo \"$changed_files\" | grep '^mlflow/R/mlflow') ]] && echo \"false\" || echo \"true\")\necho \"protos=$protos\" >> $GITHUB_OUTPUT\necho \"js=$js\" >> $GITHUB_OUTPUT\necho \"r=$r\" >> $GITHUB_OUTPUT\n" [2361,2956]
                            OBJECT [2958,3314]
                                FIELD [2959,2985]
                                    String: "name" [2959,2965]
                                    STRING [2966,2985]
                                        String: "Merge base branch" [2966,2985]
                                FIELD [2986,3313]
                                    String: "run" [2986,2991]
                                    STRING [2992,3313]
                                        String: "git config user.name 'mlflow-automation'\ngit config user.email 'mlflow-automation@users.noreply.github.com'\ngit remote add base https://github.com/${{ needs.check-comment.outputs.base_repo }}.git\ngit fetch base ${{ needs.check-comment.outputs.base_ref }}\ngit merge base/${{ needs.check-comment.outputs.base_ref }}\n" [2992,3313]
                            OBJECT [3315,3356]
                                FIELD [3316,3355]
                                    String: "uses" [3316,3322]
                                    STRING [3323,3355]
                                        String: "./.github/actions/setup-python" [3323,3355]
                            OBJECT [3357,3511]
                                FIELD [3358,3510]
                                    String: "run" [3358,3363]
                                    STRING [3364,3510]
                                        String: "pip install -r requirements/lint-requirements.txt\ndev/install-taplo.sh\npre-commit install\npre-commit run --all-files --color=always || true\n" [3364,3510]
                            OBJECT [3512,3880]
                                FIELD [3513,3555]
                                    String: "if" [3513,3517]
                                    STRING [3518,3555]
                                        String: "steps.diff.outputs.protos == 'true'" [3518,3555]
                                FIELD [3556,3583]
                                    String: "env" [3556,3561]
                                    OBJECT [3562,3583]
                                        FIELD [3563,3582]
                                            String: "DOCKER_BUILDKIT" [3563,3580]
                                            NUMBER [3581,3582]
                                                Number: 1 [3581,3582]
                                FIELD [3584,3879]
                                    String: "run" [3584,3589]
                                    STRING [3590,3879]
                                        String: "wget https://github.com/protocolbuffers/protobuf/releases/download/v3.19.4/protoc-3.19.4-linux-x86_64.zip -O /tmp/protoc.zip\nsudo unzip /tmp/protoc.zip -d /tmp/protoc\nsudo chmod -R 777 /tmp/protoc\necho \"/tmp/protoc/bin\" >> $GITHUB_PATH\npip install --upgrade pip\npip install -e .\n" [3590,3879]
                            OBJECT [3881,3967]
                                FIELD [3882,3924]
                                    String: "if" [3882,3886]
                                    STRING [3887,3924]
                                        String: "steps.diff.outputs.protos == 'true'" [3887,3924]
                                FIELD [3925,3966]
                                    String: "run" [3925,3930]
                                    STRING [3931,3966]
                                        String: "python ./dev/generate_protos.py\n" [3931,3966]
                            OBJECT [3968,4046]
                                FIELD [3969,4007]
                                    String: "if" [3969,3973]
                                    STRING [3974,4007]
                                        String: "steps.diff.outputs.js == 'true'" [3974,4007]
                                FIELD [4008,4045]
                                    String: "uses" [4008,4014]
                                    STRING [4015,4045]
                                        String: "./.github/actions/setup-node" [4015,4045]
                            OBJECT [4047,4149]
                                FIELD [4048,4086]
                                    String: "if" [4048,4052]
                                    STRING [4053,4086]
                                        String: "steps.diff.outputs.js == 'true'" [4053,4086]
                                FIELD [4087,4125]
                                    String: "working-directory" [4087,4106]
                                    STRING [4107,4125]
                                        String: "mlflow/server/js" [4107,4125]
                                FIELD [4126,4148]
                                    String: "run" [4126,4131]
                                    STRING [4132,4148]
                                        String: "yarn install\n" [4132,4148]
                            OBJECT [4150,4272]
                                FIELD [4151,4189]
                                    String: "if" [4151,4155]
                                    STRING [4156,4189]
                                        String: "steps.diff.outputs.js == 'true'" [4156,4189]
                                FIELD [4190,4228]
                                    String: "working-directory" [4190,4209]
                                    STRING [4210,4228]
                                        String: "mlflow/server/js" [4210,4228]
                                FIELD [4229,4271]
                                    String: "run" [4229,4234]
                                    STRING [4235,4271]
                                        String: "yarn lint:fix\nyarn prettier:fix\n" [4235,4271]
                            OBJECT [4273,4372]
                                FIELD [4274,4312]
                                    String: "if" [4274,4278]
                                    STRING [4279,4312]
                                        String: "steps.diff.outputs.js == 'true'" [4279,4312]
                                FIELD [4313,4351]
                                    String: "working-directory" [4313,4332]
                                    STRING [4333,4351]
                                        String: "mlflow/server/js" [4333,4351]
                                FIELD [4352,4371]
                                    String: "run" [4352,4357]
                                    STRING [4358,4371]
                                        String: "yarn i18n\n" [4358,4371]
                            OBJECT [4373,4465]
                                FIELD [4374,4411]
                                    String: "if" [4374,4378]
                                    STRING [4379,4411]
                                        String: "steps.diff.outputs.r == 'true'" [4379,4411]
                                FIELD [4412,4438]
                                    String: "working-directory" [4412,4431]
                                    STRING [4432,4438]
                                        String: "docs" [4432,4438]
                                FIELD [4439,4464]
                                    String: "run" [4439,4444]
                                    STRING [4445,4464]
                                        String: "./build-rdoc.sh\n" [4445,4464]
                            OBJECT [4466,4688]
                                FIELD [4467,4488]
                                    String: "name" [4467,4473]
                                    STRING [4474,4488]
                                        String: "Create patch" [4474,4488]
                                FIELD [4489,4501]
                                    String: "id" [4489,4493]
                                    STRING [4494,4501]
                                        String: "patch" [4494,4501]
                                FIELD [4502,4687]
                                    String: "run" [4502,4507]
                                    STRING [4508,4687]
                                        String: "git diff > ${{ github.run_id }}.diff\nreformatted=$([[ -s ${{ github.run_id }}.diff ]] && echo \"true\" || echo \"false\")\necho \"reformatted=$reformatted\" >> $GITHUB_OUTPUT\n" [4508,4687]
                            OBJECT [4689,4827]
                                FIELD [4690,4711]
                                    String: "name" [4690,4696]
                                    STRING [4697,4711]
                                        String: "Upload patch" [4697,4711]
                                FIELD [4712,4747]
                                    String: "uses" [4712,4718]
                                    STRING [4719,4747]
                                        String: "actions/upload-artifact@v4" [4719,4747]
                                FIELD [4748,4826]
                                    String: "with" [4748,4754]
                                    OBJECT [4755,4826]
                                        FIELD [4756,4790]
                                            String: "name" [4756,4762]
                                            STRING [4763,4790]
                                                String: "${{ github.run_id }}.diff" [4763,4790]
                                        FIELD [4791,4825]
                                            String: "path" [4791,4797]
                                            STRING [4798,4825]
                                                String: "${{ github.run_id }}.diff" [4798,4825]
            FIELD [4830,5889]
                String: "push" [4830,4836]
                OBJECT [4837,5889]
                    FIELD [4838,4863]
                        String: "runs-on" [4838,4847]
                        STRING [4848,4863]
                            String: "ubuntu-latest" [4848,4863]
                    FIELD [4864,4883]
                        String: "timeout-minutes" [4864,4881]
                        NUMBER [4882,4883]
                            Number: 5 [4882,4883]
                    FIELD [4884,4918]
                        String: "needs" [4884,4891]
                        ARRAY [4892,4918]
                            STRING [4893,4908]
                                String: "check-comment" [4893,4908]
                            STRING [4909,4917]
                                String: "format" [4909,4917]
                    FIELD [4919,4975]
                        String: "if" [4919,4923]
                        STRING [4924,4975]
                            String: "${{ needs.format.outputs.reformatted == 'true' }}" [4924,4975]
                    FIELD [4976,5888]
                        String: "steps" [4976,4983]
                        ARRAY [4984,5888]
                            OBJECT [4985,5204]
                                FIELD [4986,5014]
                                    String: "uses" [4986,4992]
                                    STRING [4993,5014]
                                        String: "actions/checkout@v4" [4993,5014]
                                FIELD [5015,5203]
                                    String: "with" [5015,5021]
                                    OBJECT [5022,5203]
                                        FIELD [5023,5083]
                                            String: "repository" [5023,5035]
                                            STRING [5036,5083]
                                                String: "${{ needs.check-comment.outputs.repository }}" [5036,5083]
                                        FIELD [5084,5135]
                                            String: "ref" [5084,5089]
                                            STRING [5090,5135]
                                                String: "${{ needs.check-comment.outputs.head_ref }}" [5090,5135]
                                        FIELD [5136,5153]
                                            String: "fetch-depth" [5136,5149]
                                            NUMBER [5150,5153]
                                                Number: 300 [5150,5153]
                                        FIELD [5154,5202]
                                            String: "token" [5154,5161]
                                            STRING [5162,5202]
                                                String: "${{ secrets.MLFLOW_AUTOMATION_TOKEN }}" [5162,5202]
                            OBJECT [5205,5561]
                                FIELD [5206,5232]
                                    String: "name" [5206,5212]
                                    STRING [5213,5232]
                                        String: "Merge base branch" [5213,5232]
                                FIELD [5233,5560]
                                    String: "run" [5233,5238]
                                    STRING [5239,5560]
                                        String: "git config user.name 'mlflow-automation'\ngit config user.email 'mlflow-automation@users.noreply.github.com'\ngit remote add base https://github.com/${{ needs.check-comment.outputs.base_repo }}.git\ngit fetch base ${{ needs.check-comment.outputs.base_ref }}\ngit merge base/${{ needs.check-comment.outputs.base_ref }}\n" [5239,5560]
                            OBJECT [5562,5683]
                                FIELD [5563,5586]
                                    String: "name" [5563,5569]
                                    STRING [5570,5586]
                                        String: "Download patch" [5570,5586]
                                FIELD [5587,5624]
                                    String: "uses" [5587,5593]
                                    STRING [5594,5624]
                                        String: "actions/download-artifact@v4" [5594,5624]
                                FIELD [5625,5682]
                                    String: "with" [5625,5631]
                                    OBJECT [5632,5682]
                                        FIELD [5633,5667]
                                            String: "name" [5633,5639]
                                            STRING [5640,5667]
                                                String: "${{ github.run_id }}.diff" [5640,5667]
                                        FIELD [5668,5681]
                                            String: "path" [5668,5674]
                                            STRING [5675,5681]
                                                String: "/tmp" [5675,5681]
                            OBJECT [5684,5887]
                                FIELD [5685,5714]
                                    String: "name" [5685,5691]
                                    STRING [5692,5714]
                                        String: "Apply patch and push" [5692,5714]
                                FIELD [5715,5886]
                                    String: "run" [5715,5720]
                                    STRING [5721,5886]
                                        String: "git apply /tmp/${{ github.run_id }}.diff\ngit commit -sam \"Autoformat: https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}\"\ngit push\n" [5721,5886]
            FIELD [5890,6458]
                String: "update-status" [5890,5905]
                OBJECT [5906,6458]
                    FIELD [5907,5932]
                        String: "runs-on" [5907,5916]
                        STRING [5917,5932]
                            String: "ubuntu-latest" [5917,5932]
                    FIELD [5933,5953]
                        String: "timeout-minutes" [5933,5950]
                        NUMBER [5951,5953]
                            Number: 10 [5951,5953]
                    FIELD [5954,5995]
                        String: "needs" [5954,5961]
                        ARRAY [5962,5995]
                            STRING [5963,5978]
                                String: "check-comment" [5963,5978]
                            STRING [5979,5987]
                                String: "format" [5979,5987]
                            STRING [5988,5994]
                                String: "push" [5988,5994]
                    FIELD [5996,6070]
                        String: "if" [5996,6000]
                        STRING [6001,6070]
                            String: "always() && needs.check-comment.outputs.should_autoformat == 'true'" [6001,6070]
                    FIELD [6071,6105]
                        String: "permissions" [6071,6084]
                        OBJECT [6085,6105]
                            FIELD [6086,6104]
                                String: "statuses" [6086,6096]
                                STRING [6097,6104]
                                    String: "write" [6097,6104]
                    FIELD [6106,6457]
                        String: "steps" [6106,6113]
                        ARRAY [6114,6457]
                            OBJECT [6115,6145]
                                FIELD [6116,6144]
                                    String: "uses" [6116,6122]
                                    STRING [6123,6144]
                                        String: "actions/checkout@v4" [6123,6144]
                            OBJECT [6146,6456]
                                FIELD [6147,6169]
                                    String: "name" [6147,6153]
                                    STRING [6154,6169]
                                        String: "Update status" [6154,6169]
                                FIELD [6170,6203]
                                    String: "uses" [6170,6176]
                                    STRING [6177,6203]
                                        String: "actions/github-script@v7" [6177,6203]
                                FIELD [6204,6455]
                                    String: "with" [6204,6210]
                                    OBJECT [6211,6455]
                                        FIELD [6212,6454]
                                            String: "script" [6212,6220]
                                            STRING [6221,6454]
                                                String: "const needs = ${{ toJson(needs) }};\nconst head_sha = '${{ needs.check-comment.outputs.head_sha }}'\nconst autoformat = require('./.github/workflows/autoformat.js');\nawait autoformat.updateStatus(context, github, head_sha, needs);" [6221,6454]