OBJECT [0,4321]
    FIELD [1,28]
        String: "name" [1,7]
        STRING [8,28]
            String: "Test package build" [8,28]
    FIELD [29,581]
        String: "on" [29,33]
        OBJECT [34,581]
            FIELD [35,65]
                String: "push" [35,41]
                OBJECT [42,65]
                    FIELD [43,64]
                        String: "branches" [43,53]
                        ARRAY [54,64]
                            STRING [55,63]
                                String: "master" [55,63]
            FIELD [66,104]
                String: "pull_request" [66,80]
                OBJECT [81,104]
                    FIELD [82,103]
                        String: "branches" [82,92]
                        ARRAY [93,103]
                            STRING [94,102]
                                String: "master" [94,102]
            FIELD [105,580]
                String: "workflow_dispatch" [105,124]
                OBJECT [125,580]
                    FIELD [126,579]
                        String: "inputs" [126,134]
                        OBJECT [135,579]
                            FIELD [136,321]
                                String: "repository" [136,148]
                                OBJECT [149,321]
                                    FIELD [150,290]
                                        String: "description" [150,163]
                                        STRING [164,290]
                                            String: "[Optional] Repository name with owner. For example, mlflow/mlflow.\n Defaults to the repository that triggered a workflow.\n" [164,290]
                                    FIELD [291,307]
                                        String: "required" [291,301]
                                        FALSE [302,307]
                                    FIELD [308,320]
                                        String: "default" [308,317]
                                        STRING [318,320]
                                            String: "" [318,320]
                            FIELD [322,578]
                                String: "ref" [322,327]
                                OBJECT [328,578]
                                    FIELD [329,547]
                                        String: "description" [329,342]
                                        STRING [343,547]
                                            String: "[Optional] The branch, tag or SHA to checkout. When checking out the repository that\n triggered a workflow, this defaults to the reference or SHA for that event. Otherwise,\n uses the default branch.\n" [343,547]
                                    FIELD [548,564]
                                        String: "required" [548,558]
                                        FALSE [559,564]
                                    FIELD [565,577]
                                        String: "default" [565,574]
                                        STRING [575,577]
                                            String: "" [575,577]
    FIELD [582,732]
        String: "concurrency" [582,595]
        OBJECT [596,732]
            FIELD [597,705]
                String: "group" [597,604]
                STRING [605,705]
                    String: "${{ github.workflow }}-${{ github.ref == 'refs/heads/master' && github.run_number || github.ref }}" [605,705]
            FIELD [706,731]
                String: "cancel-in-progress" [706,726]
                TRUE [727,731]
    FIELD [733,805]
        String: "defaults" [733,743]
        OBJECT [744,805]
            FIELD [745,804]
                String: "run" [745,750]
                OBJECT [751,804]
                    FIELD [752,803]
                        String: "shell" [752,759]
                        STRING [760,803]
                            String: "bash --noprofile --norc -exo pipefail {0}" [760,803]
    FIELD [806,4320]
        String: "jobs" [806,812]
        OBJECT [813,4320]
            FIELD [814,4319]
                String: "build" [814,821]
                OBJECT [822,4319]
                    FIELD [823,848]
                        String: "runs-on" [823,832]
                        STRING [833,848]
                            String: "ubuntu-latest" [833,848]
                    FIELD [849,897]
                        String: "strategy" [849,859]
                        OBJECT [860,897]
                            FIELD [861,896]
                                String: "matrix" [861,869]
                                OBJECT [870,896]
                                    FIELD [871,895]
                                        String: "type" [871,877]
                                        ARRAY [878,895]
                                            STRING [879,885]
                                                String: "full" [879,885]
                                            STRING [886,894]
                                                String: "skinny" [886,894]
                    FIELD [898,4318]
                        String: "steps" [898,905]
                        ARRAY [906,4318]
                            OBJECT [907,1063]
                                FIELD [908,936]
                                    String: "uses" [908,914]
                                    STRING [915,936]
                                        String: "actions/checkout@v3" [915,936]
                                FIELD [937,1062]
                                    String: "with" [937,943]
                                    OBJECT [944,1062]
                                        FIELD [945,969]
                                            String: "submodules" [945,957]
                                            STRING [958,969]
                                                String: "recursive" [958,969]
                                        FIELD [970,1022]
                                            String: "repository" [970,982]
                                            STRING [983,1022]
                                                String: "${{ github.event.inputs.repository }}" [983,1022]
                                        FIELD [1023,1061]
                                            String: "ref" [1023,1028]
                                            STRING [1029,1061]
                                                String: "${{ github.event.inputs.ref }}" [1029,1061]
                            OBJECT [1064,1105]
                                FIELD [1065,1104]
                                    String: "uses" [1065,1071]
                                    STRING [1072,1104]
                                        String: "./.github/actions/setup-python" [1072,1104]
                            OBJECT [1106,1256]
                                FIELD [1107,1164]
                                    String: "name" [1107,1113]
                                    STRING [1114,1164]
                                        String: "Set environment variable for skinny client build" [1114,1164]
                                FIELD [1165,1202]
                                    String: "if" [1165,1169]
                                    STRING [1170,1202]
                                        String: "${{ matrix.type == 'skinny' }}" [1170,1202]
                                FIELD [1203,1255]
                                    String: "run" [1203,1208]
                                    STRING [1209,1255]
                                        String: "echo \"MLFLOW_SKINNY=true\" >> $GITHUB_ENV\n" [1209,1255]
                            OBJECT [1257,1530]
                                FIELD [1258,1289]
                                    String: "name" [1258,1264]
                                    STRING [1265,1289]
                                        String: "Create dummy MLflow UI" [1265,1289]
                                FIELD [1290,1529]
                                    String: "run" [1290,1295]
                                    STRING [1296,1529]
                                        String: "mkdir -p mlflow/server/js/build\necho '\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\">\n    <title>MLflow</title>\n  </head>\n<body>\n  MLflow\n</body>\n</html>\n' > mlflow/server/js/build/index.html\n" [1296,1529]
                            OBJECT [1531,1645]
                                FIELD [1532,1571]
                                    String: "name" [1532,1538]
                                    STRING [1539,1571]
                                        String: "Check dependencies consistency" [1539,1571]
                                FIELD [1572,1644]
                                    String: "run" [1572,1577]
                                    STRING [1578,1644]
                                        String: "pip install pyyaml\n./dev/validate-requirements-consistency.sh\n" [1578,1644]
                            OBJECT [1646,1711]
                                FIELD [1647,1676]
                                    String: "name" [1647,1653]
                                    STRING [1654,1676]
                                        String: "Install dependencies" [1654,1676]
                                FIELD [1677,1710]
                                    String: "run" [1677,1682]
                                    STRING [1683,1710]
                                        String: "pip install wheel twine\n" [1683,1710]
                            OBJECT [1712,2319]
                                FIELD [1713,1746]
                                    String: "name" [1713,1719]
                                    STRING [1720,1746]
                                        String: "Build distribution files" [1720,1746]
                                FIELD [1747,1764]
                                    String: "id" [1747,1751]
                                    STRING [1752,1764]
                                        String: "build-dist" [1752,1764]
                                FIELD [1765,2318]
                                    String: "run" [1765,1770]
                                    STRING [1771,2318]
                                        String: "# Build distribution files\npython setup.py sdist bdist_wheel\n\n# List distribution files and check their file sizes\nls -lh dist\n\n# Set step outputs\nsdist_path=$(find dist -type f -name \"*.tar.gz\")\nwheel_path=$(find dist -type f -name \"*.whl\")\nwheel_name=$(basename $wheel_path)\nwheel_size=$(stat -c %s $wheel_path)\necho \"::set-output name=sdist-path::${sdist_path}\"\necho \"::set-output name=wheel-path::${wheel_path}\"\necho \"::set-output name=wheel-name::${wheel_name}\"\necho \"::set-output name=wheel-size::${wheel_size}\"\n" [1771,2318]
                            OBJECT [2320,2420]
                                FIELD [2321,2345]
                                    String: "name" [2321,2327]
                                    STRING [2328,2345]
                                        String: "Run twine check" [2328,2345]
                                FIELD [2346,2419]
                                    String: "run" [2346,2351]
                                    STRING [2352,2419]
                                        String: "twine check --strict ${{ steps.build-dist.outputs.wheel-path }}\n" [2352,2419]
                            OBJECT [2421,2583]
                                FIELD [2422,2461]
                                    String: "name" [2422,2428]
                                    STRING [2429,2461]
                                        String: "Test installation from tarball" [2429,2461]
                                FIELD [2462,2582]
                                    String: "run" [2462,2467]
                                    STRING [2468,2582]
                                        String: "pip install ${{ steps.build-dist.outputs.sdist-path }}\npython -c \"import mlflow; print(mlflow.__version__)\"\n" [2468,2582]
                            OBJECT [2584,2762]
                                FIELD [2585,2622]
                                    String: "name" [2585,2591]
                                    STRING [2592,2622]
                                        String: "Test installation from wheel" [2592,2622]
                                FIELD [2623,2761]
                                    String: "run" [2623,2628]
                                    STRING [2629,2761]
                                        String: "pip install --force-reinstall ${{ steps.build-dist.outputs.wheel-path }}\npython -c \"import mlflow; print(mlflow.__version__)\"\n" [2629,2761]
                            OBJECT [2763,2969]
                                FIELD [2764,2784]
                                    String: "name" [2764,2770]
                                    STRING [2771,2784]
                                        String: "Store wheel" [2771,2784]
                                FIELD [2785,2820]
                                    String: "uses" [2785,2791]
                                    STRING [2792,2820]
                                        String: "actions/upload-artifact@v3" [2792,2820]
                                FIELD [2821,2855]
                                    String: "if" [2821,2825]
                                    STRING [2826,2855]
                                        String: "github.event_name == 'push'" [2826,2855]
                                FIELD [2856,2968]
                                    String: "with" [2856,2862]
                                    OBJECT [2863,2968]
                                        FIELD [2864,2915]
                                            String: "name" [2864,2870]
                                            STRING [2871,2915]
                                                String: "${{ steps.build-dist.outputs.wheel-name }}" [2871,2915]
                                        FIELD [2916,2967]
                                            String: "path" [2916,2922]
                                            STRING [2923,2967]
                                                String: "${{ steps.build-dist.outputs.wheel-path }}" [2923,2967]
                            OBJECT [2970,4317]
                                FIELD [2971,2997]
                                    String: "name" [2971,2977]
                                    STRING [2978,2997]
                                        String: "Remove old wheels" [2978,2997]
                                FIELD [2998,3031]
                                    String: "uses" [2998,3004]
                                    STRING [3005,3031]
                                        String: "actions/github-script@v3" [3005,3031]
                                FIELD [3032,3066]
                                    String: "if" [3032,3036]
                                    STRING [3037,3066]
                                        String: "github.event_name == 'push'" [3037,3066]
                                FIELD [3067,3132]
                                    String: "env" [3067,3072]
                                    OBJECT [3073,3132]
                                        FIELD [3074,3131]
                                            String: "WHEEL_SIZE" [3074,3086]
                                            STRING [3087,3131]
                                                String: "${{ steps.build-dist.outputs.wheel-size }}" [3087,3131]
                                FIELD [3133,4316]
                                    String: "with" [3133,3139]
                                    OBJECT [3140,4316]
                                        FIELD [3141,3185]
                                            String: "github-token" [3141,3155]
                                            STRING [3156,3185]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [3156,3185]
                                        FIELD [3186,4315]
                                            String: "script" [3186,3194]
                                            STRING [3195,4315]
                                                String: "const { owner, repo } = context.repo;\n\n// For some reason, the newly-uploaded wheel in the previous step is not included.\nconst artifactsResp = await github.actions.listArtifactsForRepo({\n  owner,\n  repo,\n});\nconst wheels = artifactsResp.data.artifacts.filter(({ name }) => name.endsWith(\".whl\"));\n\n// The storage usage limit for a free github account is up to 500 MB. See the page below for details:\n// https://docs.github.com/en/github/setting-up-and-managing-billing-and-payments-on-github/about-billing-for-github-actions\nMAX_SIZE_IN_BYTES = 300_000_000; // 300 MB\n\nlet index = 0;\nlet sum = parseInt(process.env.WHEEL_SIZE);  // include the newly-uploaded wheel\nfor (const [idx, { size_in_bytes }] of wheels.entries()) {\n  index = idx;\n  sum += size_in_bytes;\n  if (sum > MAX_SIZE_IN_BYTES) {\n    break;\n  }\n}\n\nif (sum <= MAX_SIZE_IN_BYTES) {\n  return;\n}\n\n// Delete old wheels\nconst promises = wheels.slice(index).map(({ id: artifact_id }) =>\n  github.actions.deleteArtifact({\n    owner,\n    repo,\n    artifact_id,\n  })\n);\nPromise.all(promises).then(data => console.log(data));" [3195,4315]