OBJECT [0,9852]
    FIELD [1,40]
        String: "name" [1,7]
        STRING [8,40]
            String: "Self-hosted runner (scheduled)" [8,40]
    FIELD [41,108]
        String: "on" [41,45]
        OBJECT [46,108]
            FIELD [47,73]
                String: "repository_dispatch" [47,68]
                NULL [69,73]
            FIELD [74,107]
                String: "schedule" [74,84]
                ARRAY [85,107]
                    OBJECT [86,106]
                        FIELD [87,105]
                            String: "cron" [87,93]
                            STRING [94,105]
                                String: "0 0 * * *" [94,105]
    FIELD [109,9851]
        String: "jobs" [109,115]
        OBJECT [116,9851]
            FIELD [117,2655]
                String: "run_all_tests_torch_gpu" [117,142]
                OBJECT [143,2655]
                    FIELD [144,188]
                        String: "runs-on" [144,153]
                        ARRAY [154,188]
                            STRING [155,168]
                                String: "self-hosted" [155,168]
                            STRING [169,174]
                                String: "gpu" [169,174]
                            STRING [175,187]
                                String: "single-gpu" [175,187]
                    FIELD [189,2654]
                        String: "steps" [189,196]
                        ARRAY [197,2654]
                            OBJECT [198,228]
                                FIELD [199,227]
                                    String: "uses" [199,205]
                                    STRING [206,227]
                                        String: "actions/checkout@v2" [206,227]
                            OBJECT [229,381]
                                FIELD [230,253]
                                    String: "name" [230,236]
                                    STRING [237,253]
                                        String: "Loading cache." [237,253]
                                FIELD [254,279]
                                    String: "uses" [254,260]
                                    STRING [261,279]
                                        String: "actions/cache@v2" [261,279]
                                FIELD [280,292]
                                    String: "id" [280,284]
                                    STRING [285,292]
                                        String: "cache" [285,292]
                                FIELD [293,380]
                                    String: "with" [293,299]
                                    OBJECT [300,380]
                                        FIELD [301,314]
                                            String: "path" [301,307]
                                            STRING [308,314]
                                                String: ".env" [308,314]
                                        FIELD [315,379]
                                            String: "key" [315,320]
                                            STRING [321,379]
                                                String: "v  1.1-slow_tests_torch_gpu-${{ hashFiles('setup.py') }}" [321,379]
                            OBJECT [382,463]
                                FIELD [383,406]
                                    String: "name" [383,389]
                                    STRING [390,406]
                                        String: "Python version" [390,406]
                                FIELD [407,462]
                                    String: "run" [407,412]
                                    STRING [413,462]
                                        String: "which python\npython --version\npip --version\n" [413,462]
                            OBJECT [464,498]
                                FIELD [465,485]
                                    String: "name" [465,471]
                                    STRING [472,485]
                                        String: "Current dir" [472,485]
                                FIELD [486,497]
                                    String: "run" [486,491]
                                    STRING [492,497]
                                        String: "pwd" [492,497]
                            OBJECT [499,519]
                                FIELD [500,518]
                                    String: "run" [500,505]
                                    STRING [506,518]
                                        String: "nvidia-smi" [506,518]
                            OBJECT [520,632]
                                FIELD [521,564]
                                    String: "name" [521,527]
                                    STRING [528,564]
                                        String: "Kill any run-away pytest processes" [528,564]
                                FIELD [565,631]
                                    String: "run" [565,570]
                                    STRING [571,631]
                                        String: "(pkill -f tests; pkill -f examples) || echo \"no zombies\"" [571,631]
                            OBJECT [633,878]
                                FIELD [634,727]
                                    String: "name" [634,640]
                                    STRING [641,727]
                                        String: "Create new python env (on self-hosted runners we have to handle isolation ourselves)" [641,727]
                                FIELD [728,774]
                                    String: "if" [728,732]
                                    STRING [733,774]
                                        String: "steps.cache.outputs.cache-hit != 'true'" [733,774]
                                FIELD [775,877]
                                    String: "run" [775,780]
                                    STRING [781,877]
                                        String: "python -m venv .env\nsource .env/bin/activate\nwhich python\npython --version\npip --version\n" [781,877]
                            OBJECT [879,1103]
                                FIELD [880,909]
                                    String: "name" [880,886]
                                    STRING [887,909]
                                        String: "Install dependencies" [887,909]
                                FIELD [910,1102]
                                    String: "run" [910,915]
                                    STRING [916,1102]
                                        String: "source .env/bin/activate\npip install --upgrade pip\npip install .[torch,sklearn,testing,onnxruntime,sentencepiece]\npip install git+https://github.com/huggingface/datasets\npip list\n" [916,1102]
                            OBJECT [1104,1362]
                                FIELD [1105,1154]
                                    String: "name" [1105,1111]
                                    STRING [1112,1154]
                                        String: "Are GPUs recognized by our DL frameworks" [1112,1154]
                                FIELD [1155,1361]
                                    String: "run" [1155,1160]
                                    STRING [1161,1361]
                                        String: "source .env/bin/activate\npython -c \"import torch; print('Cuda available:', torch.cuda.is_available())\"\npython -c \"import torch; print('Number of GPUs available:', torch.cuda.device_count())\"\n" [1161,1361]
                            OBJECT [1363,1552]
                                FIELD [1364,1393]
                                    String: "name" [1364,1370]
                                    STRING [1371,1393]
                                        String: "Run all tests on GPU" [1371,1393]
                                FIELD [1394,1437]
                                    String: "env" [1394,1399]
                                    OBJECT [1400,1437]
                                        FIELD [1401,1420]
                                            String: "OMP_NUM_THREADS" [1401,1418]
                                            NUMBER [1419,1420]
                                                Number: 1 [1419,1420]
                                        FIELD [1421,1436]
                                            String: "RUN_SLOW" [1421,1431]
                                            TRUE [1432,1436]
                                FIELD [1438,1551]
                                    String: "run" [1438,1443]
                                    STRING [1444,1551]
                                        String: "source .env/bin/activate\npython -m pytest -n 1 --dist=loadfile -s --make-reports=tests_torch_gpu tests\n" [1444,1551]
                            OBJECT [1553,1663]
                                FIELD [1554,1584]
                                    String: "name" [1554,1560]
                                    STRING [1561,1584]
                                        String: "Failure short reports" [1561,1584]
                                FIELD [1585,1607]
                                    String: "if" [1585,1589]
                                    STRING [1590,1607]
                                        String: "${{ always() }}" [1590,1607]
                                FIELD [1608,1662]
                                    String: "run" [1608,1613]
                                    STRING [1614,1662]
                                        String: "cat reports/tests_torch_gpu_failures_short.txt" [1614,1662]
                            OBJECT [1664,1936]
                                FIELD [1665,1699]
                                    String: "name" [1665,1671]
                                    STRING [1672,1699]
                                        String: "Run examples tests on GPU" [1672,1699]
                                FIELD [1700,1722]
                                    String: "if" [1700,1704]
                                    STRING [1705,1722]
                                        String: "${{ always() }}" [1705,1722]
                                FIELD [1723,1766]
                                    String: "env" [1723,1728]
                                    OBJECT [1729,1766]
                                        FIELD [1730,1749]
                                            String: "OMP_NUM_THREADS" [1730,1747]
                                            NUMBER [1748,1749]
                                                Number: 1 [1748,1749]
                                        FIELD [1750,1765]
                                            String: "RUN_SLOW" [1750,1760]
                                            TRUE [1761,1765]
                                FIELD [1767,1935]
                                    String: "run" [1767,1772]
                                    STRING [1773,1935]
                                        String: "source .env/bin/activate\npip install -r examples/_tests_requirements.txt\npython -m pytest -n 1 --dist=loadfile -s --make-reports=examples_torch_gpu examples\n" [1773,1935]
                            OBJECT [1937,2050]
                                FIELD [1938,1968]
                                    String: "name" [1938,1944]
                                    STRING [1945,1968]
                                        String: "Failure short reports" [1945,1968]
                                FIELD [1969,1991]
                                    String: "if" [1969,1973]
                                    STRING [1974,1991]
                                        String: "${{ always() }}" [1974,1991]
                                FIELD [1992,2049]
                                    String: "run" [1992,1997]
                                    STRING [1998,2049]
                                        String: "cat reports/examples_torch_gpu_failures_short.txt" [1998,2049]
                            OBJECT [2051,2362]
                                FIELD [2052,2090]
                                    String: "name" [2052,2058]
                                    STRING [2059,2090]
                                        String: "Run all pipeline tests on GPU" [2059,2090]
                                FIELD [2091,2113]
                                    String: "if" [2091,2095]
                                    STRING [2096,2113]
                                        String: "${{ always() }}" [2096,2113]
                                FIELD [2114,2218]
                                    String: "env" [2114,2119]
                                    OBJECT [2120,2218]
                                        FIELD [2121,2155]
                                            String: "TF_FORCE_GPU_ALLOW_GROWTH" [2121,2148]
                                            STRING [2149,2155]
                                                String: "true" [2149,2155]
                                        FIELD [2156,2175]
                                            String: "OMP_NUM_THREADS" [2156,2173]
                                            NUMBER [2174,2175]
                                                Number: 1 [2174,2175]
                                        FIELD [2176,2191]
                                            String: "RUN_SLOW" [2176,2186]
                                            TRUE [2187,2191]
                                        FIELD [2192,2217]
                                            String: "RUN_PIPELINE_TESTS" [2192,2212]
                                            TRUE [2213,2217]
                                FIELD [2219,2361]
                                    String: "run" [2219,2224]
                                    STRING [2225,2361]
                                        String: "source .env/bin/activate\npython -m pytest -n 1 --dist=loadfile -s -m is_pipeline_test --make-reports=tests_torch_pipeline_gpu tests\n" [2225,2361]
                            OBJECT [2363,2482]
                                FIELD [2364,2394]
                                    String: "name" [2364,2370]
                                    STRING [2371,2394]
                                        String: "Failure short reports" [2371,2394]
                                FIELD [2395,2417]
                                    String: "if" [2395,2399]
                                    STRING [2400,2417]
                                        String: "${{ always() }}" [2400,2417]
                                FIELD [2418,2481]
                                    String: "run" [2418,2423]
                                    STRING [2424,2481]
                                        String: "cat reports/tests_torch_pipeline_gpu_failures_short.txt" [2424,2481]
                            OBJECT [2483,2653]
                                FIELD [2484,2521]
                                    String: "name" [2484,2490]
                                    STRING [2491,2521]
                                        String: "Test suite reports artifacts" [2491,2521]
                                FIELD [2522,2544]
                                    String: "if" [2522,2526]
                                    STRING [2527,2544]
                                        String: "${{ always() }}" [2527,2544]
                                FIELD [2545,2580]
                                    String: "uses" [2545,2551]
                                    STRING [2552,2580]
                                        String: "actions/upload-artifact@v2" [2552,2580]
                                FIELD [2581,2652]
                                    String: "with" [2581,2587]
                                    OBJECT [2588,2652]
                                        FIELD [2589,2634]
                                            String: "name" [2589,2595]
                                            STRING [2596,2634]
                                                String: "run_all_tests_torch_gpu_test_reports" [2596,2634]
                                        FIELD [2635,2651]
                                            String: "path" [2635,2641]
                                            STRING [2642,2651]
                                                String: "reports" [2642,2651]
            FIELD [2656,4894]
                String: "run_all_tests_tf_gpu" [2656,2678]
                OBJECT [2679,4894]
                    FIELD [2680,2724]
                        String: "runs-on" [2680,2689]
                        ARRAY [2690,2724]
                            STRING [2691,2704]
                                String: "self-hosted" [2691,2704]
                            STRING [2705,2710]
                                String: "gpu" [2705,2710]
                            STRING [2711,2723]
                                String: "single-gpu" [2711,2723]
                    FIELD [2725,4893]
                        String: "steps" [2725,2732]
                        ARRAY [2733,4893]
                            OBJECT [2734,2764]
                                FIELD [2735,2763]
                                    String: "uses" [2735,2741]
                                    STRING [2742,2763]
                                        String: "actions/checkout@v2" [2742,2763]
                            OBJECT [2765,2912]
                                FIELD [2766,2789]
                                    String: "name" [2766,2772]
                                    STRING [2773,2789]
                                        String: "Loading cache." [2773,2789]
                                FIELD [2790,2815]
                                    String: "uses" [2790,2796]
                                    STRING [2797,2815]
                                        String: "actions/cache@v2" [2797,2815]
                                FIELD [2816,2828]
                                    String: "id" [2816,2820]
                                    STRING [2821,2828]
                                        String: "cache" [2821,2828]
                                FIELD [2829,2911]
                                    String: "with" [2829,2835]
                                    OBJECT [2836,2911]
                                        FIELD [2837,2850]
                                            String: "path" [2837,2843]
                                            STRING [2844,2850]
                                                String: ".env" [2844,2850]
                                        FIELD [2851,2910]
                                            String: "key" [2851,2856]
                                            STRING [2857,2910]
                                                String: "v1.1-slow_tests_tf_gpu-${{ hashFiles('setup.py') }}" [2857,2910]
                            OBJECT [2913,2994]
                                FIELD [2914,2937]
                                    String: "name" [2914,2920]
                                    STRING [2921,2937]
                                        String: "Python version" [2921,2937]
                                FIELD [2938,2993]
                                    String: "run" [2938,2943]
                                    STRING [2944,2993]
                                        String: "which python\npython --version\npip --version\n" [2944,2993]
                            OBJECT [2995,3029]
                                FIELD [2996,3016]
                                    String: "name" [2996,3002]
                                    STRING [3003,3016]
                                        String: "Current dir" [3003,3016]
                                FIELD [3017,3028]
                                    String: "run" [3017,3022]
                                    STRING [3023,3028]
                                        String: "pwd" [3023,3028]
                            OBJECT [3030,3050]
                                FIELD [3031,3049]
                                    String: "run" [3031,3036]
                                    STRING [3037,3049]
                                        String: "nvidia-smi" [3037,3049]
                            OBJECT [3051,3163]
                                FIELD [3052,3095]
                                    String: "name" [3052,3058]
                                    STRING [3059,3095]
                                        String: "Kill any run-away pytest processes" [3059,3095]
                                FIELD [3096,3162]
                                    String: "run" [3096,3101]
                                    STRING [3102,3162]
                                        String: "(pkill -f tests; pkill -f examples) || echo \"no zombies\"" [3102,3162]
                            OBJECT [3164,3409]
                                FIELD [3165,3258]
                                    String: "name" [3165,3171]
                                    STRING [3172,3258]
                                        String: "Create new python env (on self-hosted runners we have to handle isolation ourselves)" [3172,3258]
                                FIELD [3259,3305]
                                    String: "if" [3259,3263]
                                    STRING [3264,3305]
                                        String: "steps.cache.outputs.cache-hit != 'true'" [3264,3305]
                                FIELD [3306,3408]
                                    String: "run" [3306,3311]
                                    STRING [3312,3408]
                                        String: "python -m venv .env\nsource .env/bin/activate\nwhich python\npython --version\npip --version\n" [3312,3408]
                            OBJECT [3410,3631]
                                FIELD [3411,3440]
                                    String: "name" [3411,3417]
                                    STRING [3418,3440]
                                        String: "Install dependencies" [3418,3440]
                                FIELD [3441,3630]
                                    String: "run" [3441,3446]
                                    STRING [3447,3630]
                                        String: "source .env/bin/activate\npip install --upgrade pip\npip install .[tf,sklearn,testing,onnxruntime,sentencepiece]\npip install git+https://github.com/huggingface/datasets\npip list\n" [3447,3630]
                            OBJECT [3632,4001]
                                FIELD [3633,3682]
                                    String: "name" [3633,3639]
                                    STRING [3640,3682]
                                        String: "Are GPUs recognized by our DL frameworks" [3640,3682]
                                FIELD [3683,4000]
                                    String: "run" [3683,3688]
                                    STRING [3689,4000]
                                        String: "source .env/bin/activate\nTF_CPP_MIN_LOG_LEVEL=3 python -c \"import tensorflow as tf; print('TF GPUs available:', bool(tf.config.list_physical_devices('GPU')))\"\nTF_CPP_MIN_LOG_LEVEL=3 python -c \"import tensorflow as tf; print('Number of TF GPUs available:', len(tf.config.list_physical_devices('GPU')))\"\n" [3689,4000]
                            OBJECT [4002,4188]
                                FIELD [4003,4032]
                                    String: "name" [4003,4009]
                                    STRING [4010,4032]
                                        String: "Run all tests on GPU" [4010,4032]
                                FIELD [4033,4076]
                                    String: "env" [4033,4038]
                                    OBJECT [4039,4076]
                                        FIELD [4040,4059]
                                            String: "OMP_NUM_THREADS" [4040,4057]
                                            NUMBER [4058,4059]
                                                Number: 1 [4058,4059]
                                        FIELD [4060,4075]
                                            String: "RUN_SLOW" [4060,4070]
                                            TRUE [4071,4075]
                                FIELD [4077,4187]
                                    String: "run" [4077,4082]
                                    STRING [4083,4187]
                                        String: "source .env/bin/activate\npython -m pytest -n 1 --dist=loadfile -s --make-reports=tests_tf_gpu tests\n" [4083,4187]
                            OBJECT [4189,4296]
                                FIELD [4190,4220]
                                    String: "name" [4190,4196]
                                    STRING [4197,4220]
                                        String: "Failure short reports" [4197,4220]
                                FIELD [4221,4243]
                                    String: "if" [4221,4225]
                                    STRING [4226,4243]
                                        String: "${{ always() }}" [4226,4243]
                                FIELD [4244,4295]
                                    String: "run" [4244,4249]
                                    STRING [4250,4295]
                                        String: "cat reports/tests_tf_gpu_failures_short.txt" [4250,4295]
                            OBJECT [4297,4606]
                                FIELD [4298,4336]
                                    String: "name" [4298,4304]
                                    STRING [4305,4336]
                                        String: "Run all pipeline tests on GPU" [4305,4336]
                                FIELD [4337,4359]
                                    String: "if" [4337,4341]
                                    STRING [4342,4359]
                                        String: "${{ always() }}" [4342,4359]
                                FIELD [4360,4464]
                                    String: "env" [4360,4365]
                                    OBJECT [4366,4464]
                                        FIELD [4367,4401]
                                            String: "TF_FORCE_GPU_ALLOW_GROWTH" [4367,4394]
                                            STRING [4395,4401]
                                                String: "true" [4395,4401]
                                        FIELD [4402,4421]
                                            String: "OMP_NUM_THREADS" [4402,4419]
                                            NUMBER [4420,4421]
                                                Number: 1 [4420,4421]
                                        FIELD [4422,4437]
                                            String: "RUN_SLOW" [4422,4432]
                                            TRUE [4433,4437]
                                        FIELD [4438,4463]
                                            String: "RUN_PIPELINE_TESTS" [4438,4458]
                                            TRUE [4459,4463]
                                FIELD [4465,4605]
                                    String: "run" [4465,4470]
                                    STRING [4471,4605]
                                        String: "source .env/bin/activate\npython -m pytest -n 1 --dist=loadfile -s -m is_pipeline_test --make-reports=tests_tf_pipelines_gpu tests\n" [4471,4605]
                            OBJECT [4607,4724]
                                FIELD [4608,4638]
                                    String: "name" [4608,4614]
                                    STRING [4615,4638]
                                        String: "Failure short reports" [4615,4638]
                                FIELD [4639,4661]
                                    String: "if" [4639,4643]
                                    STRING [4644,4661]
                                        String: "${{ always() }}" [4644,4661]
                                FIELD [4662,4723]
                                    String: "run" [4662,4667]
                                    STRING [4668,4723]
                                        String: "cat reports/tests_tf_pipelines_gpu_failures_short.txt" [4668,4723]
                            OBJECT [4725,4892]
                                FIELD [4726,4763]
                                    String: "name" [4726,4732]
                                    STRING [4733,4763]
                                        String: "Test suite reports artifacts" [4733,4763]
                                FIELD [4764,4786]
                                    String: "if" [4764,4768]
                                    STRING [4769,4786]
                                        String: "${{ always() }}" [4769,4786]
                                FIELD [4787,4822]
                                    String: "uses" [4787,4793]
                                    STRING [4794,4822]
                                        String: "actions/upload-artifact@v2" [4794,4822]
                                FIELD [4823,4891]
                                    String: "with" [4823,4829]
                                    OBJECT [4830,4891]
                                        FIELD [4831,4873]
                                            String: "name" [4831,4837]
                                            STRING [4838,4873]
                                                String: "run_all_tests_tf_gpu_test_reports" [4838,4873]
                                        FIELD [4874,4890]
                                            String: "path" [4874,4880]
                                            STRING [4881,4890]
                                                String: "reports" [4881,4890]
            FIELD [4895,7560]
                String: "run_all_tests_torch_multi_gpu" [4895,4926]
                OBJECT [4927,7560]
                    FIELD [4928,4971]
                        String: "runs-on" [4928,4937]
                        ARRAY [4938,4971]
                            STRING [4939,4952]
                                String: "self-hosted" [4939,4952]
                            STRING [4953,4958]
                                String: "gpu" [4953,4958]
                            STRING [4959,4970]
                                String: "multi-gpu" [4959,4970]
                    FIELD [4972,7559]
                        String: "steps" [4972,4979]
                        ARRAY [4980,7559]
                            OBJECT [4981,5011]
                                FIELD [4982,5010]
                                    String: "uses" [4982,4988]
                                    STRING [4989,5010]
                                        String: "actions/checkout@v2" [4989,5010]
                            OBJECT [5012,5168]
                                FIELD [5013,5036]
                                    String: "name" [5013,5019]
                                    STRING [5020,5036]
                                        String: "Loading cache." [5020,5036]
                                FIELD [5037,5062]
                                    String: "uses" [5037,5043]
                                    STRING [5044,5062]
                                        String: "actions/cache@v2" [5044,5062]
                                FIELD [5063,5075]
                                    String: "id" [5063,5067]
                                    STRING [5068,5075]
                                        String: "cache" [5068,5075]
                                FIELD [5076,5167]
                                    String: "with" [5076,5082]
                                    OBJECT [5083,5167]
                                        FIELD [5084,5097]
                                            String: "path" [5084,5090]
                                            STRING [5091,5097]
                                                String: ".env" [5091,5097]
                                        FIELD [5098,5166]
                                            String: "key" [5098,5103]
                                            STRING [5104,5166]
                                                String: "v1.1-slow_tests_torch_multi_gpu-${{ hashFiles('setup.py') }}" [5104,5166]
                            OBJECT [5169,5250]
                                FIELD [5170,5193]
                                    String: "name" [5170,5176]
                                    STRING [5177,5193]
                                        String: "Python version" [5177,5193]
                                FIELD [5194,5249]
                                    String: "run" [5194,5199]
                                    STRING [5200,5249]
                                        String: "which python\npython --version\npip --version\n" [5200,5249]
                            OBJECT [5251,5285]
                                FIELD [5252,5272]
                                    String: "name" [5252,5258]
                                    STRING [5259,5272]
                                        String: "Current dir" [5259,5272]
                                FIELD [5273,5284]
                                    String: "run" [5273,5278]
                                    STRING [5279,5284]
                                        String: "pwd" [5279,5284]
                            OBJECT [5286,5306]
                                FIELD [5287,5305]
                                    String: "run" [5287,5292]
                                    STRING [5293,5305]
                                        String: "nvidia-smi" [5293,5305]
                            OBJECT [5307,5419]
                                FIELD [5308,5351]
                                    String: "name" [5308,5314]
                                    STRING [5315,5351]
                                        String: "Kill any run-away pytest processes" [5315,5351]
                                FIELD [5352,5418]
                                    String: "run" [5352,5357]
                                    STRING [5358,5418]
                                        String: "(pkill -f tests; pkill -f examples) || echo \"no zombies\"" [5358,5418]
                            OBJECT [5420,5665]
                                FIELD [5421,5514]
                                    String: "name" [5421,5427]
                                    STRING [5428,5514]
                                        String: "Create new python env (on self-hosted runners we have to handle isolation ourselves)" [5428,5514]
                                FIELD [5515,5561]
                                    String: "if" [5515,5519]
                                    STRING [5520,5561]
                                        String: "steps.cache.outputs.cache-hit != 'true'" [5520,5561]
                                FIELD [5562,5664]
                                    String: "run" [5562,5567]
                                    STRING [5568,5664]
                                        String: "python -m venv .env\nsource .env/bin/activate\nwhich python\npython --version\npip --version\n" [5568,5664]
                            OBJECT [5666,5936]
                                FIELD [5667,5696]
                                    String: "name" [5667,5673]
                                    STRING [5674,5696]
                                        String: "Install dependencies" [5674,5696]
                                FIELD [5697,5935]
                                    String: "run" [5697,5702]
                                    STRING [5703,5935]
                                        String: "source .env/bin/activate\npip install --upgrade pip\npip install .[torch,sklearn,testing,onnxruntime,sentencepiece]\npip install git+https://github.com/huggingface/datasets\npip install fairscale\npip install deepspeed\npip list\n" [5703,5935]
                            OBJECT [5937,6195]
                                FIELD [5938,5987]
                                    String: "name" [5938,5944]
                                    STRING [5945,5987]
                                        String: "Are GPUs recognized by our DL frameworks" [5945,5987]
                                FIELD [5988,6194]
                                    String: "run" [5988,5993]
                                    STRING [5994,6194]
                                        String: "source .env/bin/activate\npython -c \"import torch; print('Cuda available:', torch.cuda.is_available())\"\npython -c \"import torch; print('Number of GPUs available:', torch.cuda.device_count())\"\n" [5994,6194]
                            OBJECT [6196,6397]
                                FIELD [6197,6232]
                                    String: "name" [6197,6203]
                                    STRING [6204,6232]
                                        String: "Run all tests on multi-GPU" [6204,6232]
                                FIELD [6233,6276]
                                    String: "env" [6233,6238]
                                    OBJECT [6239,6276]
                                        FIELD [6240,6259]
                                            String: "OMP_NUM_THREADS" [6240,6257]
                                            NUMBER [6258,6259]
                                                Number: 1 [6258,6259]
                                        FIELD [6260,6275]
                                            String: "RUN_SLOW" [6260,6270]
                                            TRUE [6271,6275]
                                FIELD [6277,6396]
                                    String: "run" [6277,6282]
                                    STRING [6283,6396]
                                        String: "source .env/bin/activate\npython -m pytest -n 1 --dist=loadfile -s --make-reports=tests_torch_multi_gpu tests\n" [6283,6396]
                            OBJECT [6398,6514]
                                FIELD [6399,6429]
                                    String: "name" [6399,6405]
                                    STRING [6406,6429]
                                        String: "Failure short reports" [6406,6429]
                                FIELD [6430,6452]
                                    String: "if" [6430,6434]
                                    STRING [6435,6452]
                                        String: "${{ always() }}" [6435,6452]
                                FIELD [6453,6513]
                                    String: "run" [6453,6458]
                                    STRING [6459,6513]
                                        String: "cat reports/tests_torch_multi_gpu_failures_short.txt" [6459,6513]
                            OBJECT [6515,6805]
                                FIELD [6516,6556]
                                    String: "name" [6516,6522]
                                    STRING [6523,6556]
                                        String: "Run examples tests on multi-GPU" [6523,6556]
                                FIELD [6557,6579]
                                    String: "if" [6557,6561]
                                    STRING [6562,6579]
                                        String: "${{ always() }}" [6562,6579]
                                FIELD [6580,6623]
                                    String: "env" [6580,6585]
                                    OBJECT [6586,6623]
                                        FIELD [6587,6606]
                                            String: "OMP_NUM_THREADS" [6587,6604]
                                            NUMBER [6605,6606]
                                                Number: 1 [6605,6606]
                                        FIELD [6607,6622]
                                            String: "RUN_SLOW" [6607,6617]
                                            TRUE [6618,6622]
                                FIELD [6624,6804]
                                    String: "run" [6624,6629]
                                    STRING [6630,6804]
                                        String: "source .env/bin/activate\npip install -r examples/_tests_requirements.txt\npython -m pytest -n 1 --dist=loadfile -s --make-reports=tests_torch_examples_multi_gpu examples\n" [6630,6804]
                            OBJECT [6806,6931]
                                FIELD [6807,6837]
                                    String: "name" [6807,6813]
                                    STRING [6814,6837]
                                        String: "Failure short reports" [6814,6837]
                                FIELD [6838,6860]
                                    String: "if" [6838,6842]
                                    STRING [6843,6860]
                                        String: "${{ always() }}" [6843,6860]
                                FIELD [6861,6930]
                                    String: "run" [6861,6866]
                                    STRING [6867,6930]
                                        String: "cat reports/tests_torch_examples_multi_gpu_failures_short.txt" [6867,6930]
                            OBJECT [6932,7255]
                                FIELD [6933,6977]
                                    String: "name" [6933,6939]
                                    STRING [6940,6977]
                                        String: "Run all pipeline tests on multi-GPU" [6940,6977]
                                FIELD [6978,7000]
                                    String: "if" [6978,6982]
                                    STRING [6983,7000]
                                        String: "${{ always() }}" [6983,7000]
                                FIELD [7001,7105]
                                    String: "env" [7001,7006]
                                    OBJECT [7007,7105]
                                        FIELD [7008,7042]
                                            String: "TF_FORCE_GPU_ALLOW_GROWTH" [7008,7035]
                                            STRING [7036,7042]
                                                String: "true" [7036,7042]
                                        FIELD [7043,7062]
                                            String: "OMP_NUM_THREADS" [7043,7060]
                                            NUMBER [7061,7062]
                                                Number: 1 [7061,7062]
                                        FIELD [7063,7078]
                                            String: "RUN_SLOW" [7063,7073]
                                            TRUE [7074,7078]
                                        FIELD [7079,7104]
                                            String: "RUN_PIPELINE_TESTS" [7079,7099]
                                            TRUE [7100,7104]
                                FIELD [7106,7254]
                                    String: "run" [7106,7111]
                                    STRING [7112,7254]
                                        String: "source .env/bin/activate\npython -m pytest -n 1 --dist=loadfile -s -m is_pipeline_test --make-reports=tests_torch_pipeline_multi_gpu tests\n" [7112,7254]
                            OBJECT [7256,7381]
                                FIELD [7257,7287]
                                    String: "name" [7257,7263]
                                    STRING [7264,7287]
                                        String: "Failure short reports" [7264,7287]
                                FIELD [7288,7310]
                                    String: "if" [7288,7292]
                                    STRING [7293,7310]
                                        String: "${{ always() }}" [7293,7310]
                                FIELD [7311,7380]
                                    String: "run" [7311,7316]
                                    STRING [7317,7380]
                                        String: "cat reports/tests_torch_pipeline_multi_gpu_failures_short.txt" [7317,7380]
                            OBJECT [7382,7558]
                                FIELD [7383,7420]
                                    String: "name" [7383,7389]
                                    STRING [7390,7420]
                                        String: "Test suite reports artifacts" [7390,7420]
                                FIELD [7421,7443]
                                    String: "if" [7421,7425]
                                    STRING [7426,7443]
                                        String: "${{ always() }}" [7426,7443]
                                FIELD [7444,7479]
                                    String: "uses" [7444,7450]
                                    STRING [7451,7479]
                                        String: "actions/upload-artifact@v2" [7451,7479]
                                FIELD [7480,7557]
                                    String: "with" [7480,7486]
                                    OBJECT [7487,7557]
                                        FIELD [7488,7539]
                                            String: "name" [7488,7494]
                                            STRING [7495,7539]
                                                String: "run_all_tests_torch_multi_gpu_test_reports" [7495,7539]
                                        FIELD [7540,7556]
                                            String: "path" [7540,7546]
                                            STRING [7547,7556]
                                                String: "reports" [7547,7556]
            FIELD [7561,9850]
                String: "run_all_tests_tf_multi_gpu" [7561,7589]
                OBJECT [7590,9850]
                    FIELD [7591,7634]
                        String: "runs-on" [7591,7600]
                        ARRAY [7601,7634]
                            STRING [7602,7615]
                                String: "self-hosted" [7602,7615]
                            STRING [7616,7621]
                                String: "gpu" [7616,7621]
                            STRING [7622,7633]
                                String: "multi-gpu" [7622,7633]
                    FIELD [7635,9849]
                        String: "steps" [7635,7642]
                        ARRAY [7643,9849]
                            OBJECT [7644,7674]
                                FIELD [7645,7673]
                                    String: "uses" [7645,7651]
                                    STRING [7652,7673]
                                        String: "actions/checkout@v2" [7652,7673]
                            OBJECT [7675,7828]
                                FIELD [7676,7699]
                                    String: "name" [7676,7682]
                                    STRING [7683,7699]
                                        String: "Loading cache." [7683,7699]
                                FIELD [7700,7725]
                                    String: "uses" [7700,7706]
                                    STRING [7707,7725]
                                        String: "actions/cache@v2" [7707,7725]
                                FIELD [7726,7738]
                                    String: "id" [7726,7730]
                                    STRING [7731,7738]
                                        String: "cache" [7731,7738]
                                FIELD [7739,7827]
                                    String: "with" [7739,7745]
                                    OBJECT [7746,7827]
                                        FIELD [7747,7760]
                                            String: "path" [7747,7753]
                                            STRING [7754,7760]
                                                String: ".env" [7754,7760]
                                        FIELD [7761,7826]
                                            String: "key" [7761,7766]
                                            STRING [7767,7826]
                                                String: "v1.1-slow_tests_tf_multi_gpu-${{ hashFiles('setup.py') }}" [7767,7826]
                            OBJECT [7829,7910]
                                FIELD [7830,7853]
                                    String: "name" [7830,7836]
                                    STRING [7837,7853]
                                        String: "Python version" [7837,7853]
                                FIELD [7854,7909]
                                    String: "run" [7854,7859]
                                    STRING [7860,7909]
                                        String: "which python\npython --version\npip --version\n" [7860,7909]
                            OBJECT [7911,7945]
                                FIELD [7912,7932]
                                    String: "name" [7912,7918]
                                    STRING [7919,7932]
                                        String: "Current dir" [7919,7932]
                                FIELD [7933,7944]
                                    String: "run" [7933,7938]
                                    STRING [7939,7944]
                                        String: "pwd" [7939,7944]
                            OBJECT [7946,7966]
                                FIELD [7947,7965]
                                    String: "run" [7947,7952]
                                    STRING [7953,7965]
                                        String: "nvidia-smi" [7953,7965]
                            OBJECT [7967,8079]
                                FIELD [7968,8011]
                                    String: "name" [7968,7974]
                                    STRING [7975,8011]
                                        String: "Kill any run-away pytest processes" [7975,8011]
                                FIELD [8012,8078]
                                    String: "run" [8012,8017]
                                    STRING [8018,8078]
                                        String: "(pkill -f tests; pkill -f examples) || echo \"no zombies\"" [8018,8078]
                            OBJECT [8080,8325]
                                FIELD [8081,8174]
                                    String: "name" [8081,8087]
                                    STRING [8088,8174]
                                        String: "Create new python env (on self-hosted runners we have to handle isolation ourselves)" [8088,8174]
                                FIELD [8175,8221]
                                    String: "if" [8175,8179]
                                    STRING [8180,8221]
                                        String: "steps.cache.outputs.cache-hit != 'true'" [8180,8221]
                                FIELD [8222,8324]
                                    String: "run" [8222,8227]
                                    STRING [8228,8324]
                                        String: "python -m venv .env\nsource .env/bin/activate\nwhich python\npython --version\npip --version\n" [8228,8324]
                            OBJECT [8326,8547]
                                FIELD [8327,8356]
                                    String: "name" [8327,8333]
                                    STRING [8334,8356]
                                        String: "Install dependencies" [8334,8356]
                                FIELD [8357,8546]
                                    String: "run" [8357,8362]
                                    STRING [8363,8546]
                                        String: "source .env/bin/activate\npip install --upgrade pip\npip install .[tf,sklearn,testing,onnxruntime,sentencepiece]\npip install git+https://github.com/huggingface/datasets\npip list\n" [8363,8546]
                            OBJECT [8548,8917]
                                FIELD [8549,8598]
                                    String: "name" [8549,8555]
                                    STRING [8556,8598]
                                        String: "Are GPUs recognized by our DL frameworks" [8556,8598]
                                FIELD [8599,8916]
                                    String: "run" [8599,8604]
                                    STRING [8605,8916]
                                        String: "source .env/bin/activate\nTF_CPP_MIN_LOG_LEVEL=3 python -c \"import tensorflow as tf; print('TF GPUs available:', bool(tf.config.list_physical_devices('GPU')))\"\nTF_CPP_MIN_LOG_LEVEL=3 python -c \"import tensorflow as tf; print('Number of TF GPUs available:', len(tf.config.list_physical_devices('GPU')))\"\n" [8605,8916]
                            OBJECT [8918,9116]
                                FIELD [8919,8954]
                                    String: "name" [8919,8925]
                                    STRING [8926,8954]
                                        String: "Run all tests on multi-GPU" [8926,8954]
                                FIELD [8955,8998]
                                    String: "env" [8955,8960]
                                    OBJECT [8961,8998]
                                        FIELD [8962,8981]
                                            String: "OMP_NUM_THREADS" [8962,8979]
                                            NUMBER [8980,8981]
                                                Number: 1 [8980,8981]
                                        FIELD [8982,8997]
                                            String: "RUN_SLOW" [8982,8992]
                                            TRUE [8993,8997]
                                FIELD [8999,9115]
                                    String: "run" [8999,9004]
                                    STRING [9005,9115]
                                        String: "source .env/bin/activate\npython -m pytest -n 1 --dist=loadfile -s --make-reports=tests_tf_multi_gpu tests\n" [9005,9115]
                            OBJECT [9117,9230]
                                FIELD [9118,9148]
                                    String: "name" [9118,9124]
                                    STRING [9125,9148]
                                        String: "Failure short reports" [9125,9148]
                                FIELD [9149,9171]
                                    String: "if" [9149,9153]
                                    STRING [9154,9171]
                                        String: "${{ always() }}" [9154,9171]
                                FIELD [9172,9229]
                                    String: "run" [9172,9177]
                                    STRING [9178,9229]
                                        String: "cat reports/tests_tf_multi_gpu_failures_short.txt" [9178,9229]
                            OBJECT [9231,9551]
                                FIELD [9232,9276]
                                    String: "name" [9232,9238]
                                    STRING [9239,9276]
                                        String: "Run all pipeline tests on multi-GPU" [9239,9276]
                                FIELD [9277,9299]
                                    String: "if" [9277,9281]
                                    STRING [9282,9299]
                                        String: "${{ always() }}" [9282,9299]
                                FIELD [9300,9404]
                                    String: "env" [9300,9305]
                                    OBJECT [9306,9404]
                                        FIELD [9307,9341]
                                            String: "TF_FORCE_GPU_ALLOW_GROWTH" [9307,9334]
                                            STRING [9335,9341]
                                                String: "true" [9335,9341]
                                        FIELD [9342,9361]
                                            String: "OMP_NUM_THREADS" [9342,9359]
                                            NUMBER [9360,9361]
                                                Number: 1 [9360,9361]
                                        FIELD [9362,9377]
                                            String: "RUN_SLOW" [9362,9372]
                                            TRUE [9373,9377]
                                        FIELD [9378,9403]
                                            String: "RUN_PIPELINE_TESTS" [9378,9398]
                                            TRUE [9399,9403]
                                FIELD [9405,9550]
                                    String: "run" [9405,9410]
                                    STRING [9411,9550]
                                        String: "source .env/bin/activate\npython -m pytest -n 1 --dist=loadfile -s -m is_pipeline_test --make-reports=tests_tf_pipeline_multi_gpu tests\n" [9411,9550]
                            OBJECT [9552,9674]
                                FIELD [9553,9583]
                                    String: "name" [9553,9559]
                                    STRING [9560,9583]
                                        String: "Failure short reports" [9560,9583]
                                FIELD [9584,9606]
                                    String: "if" [9584,9588]
                                    STRING [9589,9606]
                                        String: "${{ always() }}" [9589,9606]
                                FIELD [9607,9673]
                                    String: "run" [9607,9612]
                                    STRING [9613,9673]
                                        String: "cat reports/tests_tf_pipeline_multi_gpu_failures_short.txt" [9613,9673]
                            OBJECT [9675,9848]
                                FIELD [9676,9713]
                                    String: "name" [9676,9682]
                                    STRING [9683,9713]
                                        String: "Test suite reports artifacts" [9683,9713]
                                FIELD [9714,9736]
                                    String: "if" [9714,9718]
                                    STRING [9719,9736]
                                        String: "${{ always() }}" [9719,9736]
                                FIELD [9737,9772]
                                    String: "uses" [9737,9743]
                                    STRING [9744,9772]
                                        String: "actions/upload-artifact@v2" [9744,9772]
                                FIELD [9773,9847]
                                    String: "with" [9773,9779]
                                    OBJECT [9780,9847]
                                        FIELD [9781,9829]
                                            String: "name" [9781,9787]
                                            STRING [9788,9829]
                                                String: "run_all_tests_tf_multi_gpu_test_reports" [9788,9829]
                                        FIELD [9830,9846]
                                            String: "path" [9830,9836]
                                            STRING [9837,9846]
                                                String: "reports" [9837,9846]