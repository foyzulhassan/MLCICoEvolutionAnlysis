OBJECT [0,18606]
    FIELD [1,35]
        String: "name" [1,7]
        STRING [8,35]
            String: "Self-hosted runner (push)" [8,35]
    FIELD [36,282]
        String: "on" [36,40]
        OBJECT [41,282]
            FIELD [42,149]
                String: "workflow_run" [42,56]
                OBJECT [57,149]
                    FIELD [58,106]
                        String: "workflows" [58,69]
                        ARRAY [70,106]
                            STRING [71,105]
                                String: "Self-hosted runner (push-caller)" [71,105]
                    FIELD [107,126]
                        String: "branches" [107,117]
                        ARRAY [118,126]
                            STRING [119,125]
                                String: "main" [119,125]
                    FIELD [127,148]
                        String: "types" [127,134]
                        ARRAY [135,148]
                            STRING [136,147]
                                String: "completed" [136,147]
            FIELD [150,254]
                String: "push" [150,156]
                OBJECT [157,254]
                    FIELD [158,184]
                        String: "branches" [158,168]
                        ARRAY [169,184]
                            STRING [170,176]
                                String: "ci_*" [170,176]
                            STRING [177,183]
                                String: "ci-*" [177,183]
                    FIELD [185,253]
                        String: "paths" [185,192]
                        ARRAY [193,253]
                            STRING [194,202]
                                String: "src/**" [194,202]
                            STRING [203,213]
                                String: "tests/**" [203,213]
                            STRING [214,226]
                                String: ".github/**" [214,226]
                            STRING [227,241]
                                String: "templates/**" [227,241]
                            STRING [242,252]
                                String: "utils/**" [242,252]
            FIELD [255,281]
                String: "repository_dispatch" [255,276]
                NULL [277,281]
    FIELD [283,458]
        String: "env" [283,288]
        OBJECT [289,458]
            FIELD [290,312]
                String: "HF_HOME" [290,299]
                STRING [300,312]
                    String: "/mnt/cache" [300,312]
            FIELD [313,338]
                String: "TRANSFORMERS_IS_CI" [313,333]
                TRUE [334,338]
            FIELD [339,358]
                String: "OMP_NUM_THREADS" [339,356]
                NUMBER [357,358]
                    Number: 8 [357,358]
            FIELD [359,378]
                String: "MKL_NUM_THREADS" [359,376]
                NUMBER [377,378]
                    Number: 8 [377,378]
            FIELD [379,398]
                String: "PYTEST_TIMEOUT" [379,395]
                NUMBER [396,398]
                    Number: 60 [396,398]
            FIELD [399,431]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [399,426]
                TRUE [427,431]
            FIELD [432,457]
                String: "RUN_PT_TF_CROSS_TESTS" [432,455]
                NUMBER [456,457]
                    Number: 1 [456,457]
    FIELD [459,18605]
        String: "jobs" [459,465]
        OBJECT [466,18605]
            FIELD [467,840]
                String: "check_runner_status" [467,488]
                OBJECT [489,840]
                    FIELD [490,518]
                        String: "name" [490,496]
                        STRING [497,518]
                            String: "Check Runner Status" [497,518]
                    FIELD [519,544]
                        String: "runs-on" [519,528]
                        STRING [529,544]
                            String: "ubuntu-latest" [529,544]
                    FIELD [545,839]
                        String: "steps" [545,552]
                        ARRAY [553,839]
                            OBJECT [554,640]
                                FIELD [555,585]
                                    String: "name" [555,561]
                                    STRING [562,585]
                                        String: "Checkout transformers" [562,585]
                                FIELD [586,614]
                                    String: "uses" [586,592]
                                    STRING [593,614]
                                        String: "actions/checkout@v2" [593,614]
                                FIELD [615,639]
                                    String: "with" [615,621]
                                    OBJECT [622,639]
                                        FIELD [623,638]
                                            String: "fetch-depth" [623,636]
                                            NUMBER [637,638]
                                                Number: 2 [637,638]
                            OBJECT [641,838]
                                FIELD [642,670]
                                    String: "name" [642,648]
                                    STRING [649,670]
                                        String: "Check Runner Status" [649,670]
                                FIELD [671,837]
                                    String: "run" [671,676]
                                    STRING [677,837]
                                        String: "python utils/check_self_hosted_runner.py --target_runners single-gpu-ci-runner-docker,multi-gpu-ci-runner-docker --token ${{ secrets.ACCESS_REPO_INFO_TOKEN }}" [677,837]
            FIELD [841,1267]
                String: "check_runners" [841,856]
                OBJECT [857,1267]
                    FIELD [858,880]
                        String: "name" [858,864]
                        STRING [865,880]
                            String: "Check Runners" [865,880]
                    FIELD [881,910]
                        String: "needs" [881,888]
                        STRING [889,910]
                            String: "check_runner_status" [889,910]
                    FIELD [911,976]
                        String: "strategy" [911,921]
                        OBJECT [922,976]
                            FIELD [923,975]
                                String: "matrix" [923,931]
                                OBJECT [932,975]
                                    FIELD [933,974]
                                        String: "machine_type" [933,947]
                                        ARRAY [948,974]
                                            STRING [949,961]
                                                String: "single-gpu" [949,961]
                                            STRING [962,973]
                                                String: "multi-gpu" [962,973]
                    FIELD [977,1044]
                        String: "runs-on" [977,986]
                        ARRAY [987,1044]
                            STRING [988,1001]
                                String: "self-hosted" [988,1001]
                            STRING [1002,1014]
                                String: "docker-gpu" [1002,1014]
                            STRING [1015,1043]
                                String: "${{ matrix.machine_type }}" [1015,1043]
                    FIELD [1045,1213]
                        String: "container" [1045,1056]
                        OBJECT [1057,1213]
                            FIELD [1058,1115]
                                String: "image" [1058,1065]
                                STRING [1066,1115]
                                    String: "huggingface/transformers-all-latest-gpu-push-ci" [1066,1115]
                            FIELD [1116,1212]
                                String: "options" [1116,1125]
                                STRING [1126,1212]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1126,1212]
                    FIELD [1214,1266]
                        String: "steps" [1214,1221]
                        ARRAY [1222,1266]
                            OBJECT [1223,1265]
                                FIELD [1224,1243]
                                    String: "name" [1224,1230]
                                    STRING [1231,1243]
                                        String: "NVIDIA-SMI" [1231,1243]
                                FIELD [1244,1264]
                                    String: "run" [1244,1249]
                                    STRING [1250,1264]
                                        String: "nvidia-smi\n" [1250,1264]
            FIELD [1268,4025]
                String: "setup" [1268,1275]
                OBJECT [1276,4025]
                    FIELD [1277,1291]
                        String: "name" [1277,1283]
                        STRING [1284,1291]
                            String: "Setup" [1284,1291]
                    FIELD [1292,1315]
                        String: "needs" [1292,1299]
                        STRING [1300,1315]
                            String: "check_runners" [1300,1315]
                    FIELD [1316,1381]
                        String: "strategy" [1316,1326]
                        OBJECT [1327,1381]
                            FIELD [1328,1380]
                                String: "matrix" [1328,1336]
                                OBJECT [1337,1380]
                                    FIELD [1338,1379]
                                        String: "machine_type" [1338,1352]
                                        ARRAY [1353,1379]
                                            STRING [1354,1366]
                                                String: "single-gpu" [1354,1366]
                                            STRING [1367,1378]
                                                String: "multi-gpu" [1367,1378]
                    FIELD [1382,1449]
                        String: "runs-on" [1382,1391]
                        ARRAY [1392,1449]
                            STRING [1393,1406]
                                String: "self-hosted" [1393,1406]
                            STRING [1407,1419]
                                String: "docker-gpu" [1407,1419]
                            STRING [1420,1448]
                                String: "${{ matrix.machine_type }}" [1420,1448]
                    FIELD [1450,1618]
                        String: "container" [1450,1461]
                        OBJECT [1462,1618]
                            FIELD [1463,1520]
                                String: "image" [1463,1470]
                                STRING [1471,1520]
                                    String: "huggingface/transformers-all-latest-gpu-push-ci" [1471,1520]
                            FIELD [1521,1617]
                                String: "options" [1521,1530]
                                STRING [1531,1617]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1531,1617]
                    FIELD [1619,1734]
                        String: "outputs" [1619,1628]
                        OBJECT [1629,1734]
                            FIELD [1630,1679]
                                String: "matrix" [1630,1638]
                                STRING [1639,1679]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [1639,1679]
                            FIELD [1680,1733]
                                String: "test_map" [1680,1690]
                                STRING [1691,1733]
                                    String: "${{ steps.set-matrix.outputs.test_map }}" [1691,1733]
                    FIELD [1735,4024]
                        String: "steps" [1735,1742]
                        ARRAY [1743,4024]
                            OBJECT [1744,2461]
                                FIELD [1745,1790]
                                    String: "name" [1745,1751]
                                    STRING [1752,1790]
                                        String: "Prepare custom environment variables" [1752,1790]
                                FIELD [1791,1805]
                                    String: "shell" [1791,1798]
                                    STRING [1799,1805]
                                        String: "bash" [1799,1805]
                                FIELD [1806,2460]
                                    String: "run" [1806,1811]
                                    STRING [1812,2460]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [1812,2460]
                            OBJECT [2462,2597]
                                FIELD [2463,2499]
                                    String: "name" [2463,2469]
                                    STRING [2470,2499]
                                        String: "print environment variables" [2470,2499]
                                FIELD [2500,2596]
                                    String: "run" [2500,2505]
                                    STRING [2506,2596]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [2506,2596]
                            OBJECT [2598,2684]
                                FIELD [2599,2629]
                                    String: "name" [2599,2605]
                                    STRING [2606,2629]
                                        String: "Checkout transformers" [2606,2629]
                                FIELD [2630,2658]
                                    String: "uses" [2630,2636]
                                    STRING [2637,2658]
                                        String: "actions/checkout@v2" [2637,2658]
                                FIELD [2659,2683]
                                    String: "with" [2659,2665]
                                    OBJECT [2666,2683]
                                        FIELD [2667,2682]
                                            String: "fetch-depth" [2667,2680]
                                            NUMBER [2681,2682]
                                                Number: 2 [2681,2682]
                            OBJECT [2685,3006]
                                FIELD [2686,2735]
                                    String: "name" [2686,2692]
                                    STRING [2693,2735]
                                        String: "Update clone using environment variables" [2693,2735]
                                FIELD [2736,2771]
                                    String: "working-directory" [2736,2755]
                                    STRING [2756,2771]
                                        String: "/transformers" [2756,2771]
                                FIELD [2772,3005]
                                    String: "run" [2772,2777]
                                    STRING [2778,3005]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [2778,3005]
                            OBJECT [3007,3109]
                                FIELD [3008,3024]
                                    String: "name" [3008,3014]
                                    STRING [3015,3024]
                                        String: "Cleanup" [3015,3024]
                                FIELD [3025,3108]
                                    String: "run" [3025,3030]
                                    STRING [3031,3108]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [3031,3108]
                            OBJECT [3110,3268]
                                FIELD [3111,3142]
                                    String: "name" [3111,3117]
                                    STRING [3118,3142]
                                        String: "Fetch the tests to run" [3118,3142]
                                FIELD [3143,3267]
                                    String: "run" [3143,3148]
                                    STRING [3149,3267]
                                        String: "pip install --upgrade git-python\npython utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [3149,3267]
                            OBJECT [3269,3397]
                                FIELD [3270,3299]
                                    String: "name" [3270,3276]
                                    STRING [3277,3299]
                                        String: "Report fetched tests" [3277,3299]
                                FIELD [3300,3335]
                                    String: "uses" [3300,3306]
                                    STRING [3307,3335]
                                        String: "actions/upload-artifact@v2" [3307,3335]
                                FIELD [3336,3396]
                                    String: "with" [3336,3342]
                                    OBJECT [3343,3396]
                                        FIELD [3344,3365]
                                            String: "name" [3344,3350]
                                            STRING [3351,3365]
                                                String: "test_fetched" [3351,3365]
                                        FIELD [3366,3395]
                                            String: "path" [3366,3372]
                                            STRING [3373,3395]
                                                String: "test_preparation.txt" [3373,3395]
                            OBJECT [3398,4023]
                                FIELD [3399,3416]
                                    String: "id" [3399,3403]
                                    STRING [3404,3416]
                                        String: "set-matrix" [3404,3416]
                                FIELD [3417,3452]
                                    String: "name" [3417,3423]
                                    STRING [3424,3452]
                                        String: "Organize tests into models" [3424,3452]
                                FIELD [3453,4022]
                                    String: "run" [3453,3458]
                                    STRING [3459,4022]
                                        String: "if [ -f test_map.json ]; then\n    keys=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); d = list(test_map.keys()); print(d)')\n    test_map=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); print(test_map)')\nelse\n    keys=$(python3 -c 'keys = [\"dummy\"]; print(keys)')\n    test_map=$(python3 -c 'test_map = {\"dummy\": []}; print(test_map)')\nfi\necho $keys\necho $test_map\necho \"::set-output name=matrix::$keys\"\necho \"::set-output name=test_map::$test_map\"\n" [3459,4022]
            FIELD [4026,6954]
                String: "run_tests_single_gpu" [4026,4048]
                OBJECT [4049,6954]
                    FIELD [4050,4070]
                        String: "name" [4050,4056]
                        STRING [4057,4070]
                            String: "Model tests" [4057,4070]
                    FIELD [4071,4086]
                        String: "needs" [4071,4078]
                        STRING [4079,4086]
                            String: "setup" [4079,4086]
                    FIELD [4087,4157]
                        String: "if" [4087,4091]
                        STRING [4092,4157]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [4092,4157]
                    FIELD [4158,4285]
                        String: "strategy" [4158,4168]
                        OBJECT [4169,4285]
                            FIELD [4170,4187]
                                String: "fail-fast" [4170,4181]
                                FALSE [4182,4187]
                            FIELD [4188,4284]
                                String: "matrix" [4188,4196]
                                OBJECT [4197,4284]
                                    FIELD [4198,4253]
                                        String: "folders" [4198,4207]
                                        STRING [4208,4253]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [4208,4253]
                                    FIELD [4254,4283]
                                        String: "machine_type" [4254,4268]
                                        ARRAY [4269,4283]
                                            STRING [4270,4282]
                                                String: "single-gpu" [4270,4282]
                    FIELD [4286,4353]
                        String: "runs-on" [4286,4295]
                        ARRAY [4296,4353]
                            STRING [4297,4310]
                                String: "self-hosted" [4297,4310]
                            STRING [4311,4323]
                                String: "docker-gpu" [4311,4323]
                            STRING [4324,4352]
                                String: "${{ matrix.machine_type }}" [4324,4352]
                    FIELD [4354,4522]
                        String: "container" [4354,4365]
                        OBJECT [4366,4522]
                            FIELD [4367,4424]
                                String: "image" [4367,4374]
                                STRING [4375,4424]
                                    String: "huggingface/transformers-all-latest-gpu-push-ci" [4375,4424]
                            FIELD [4425,4521]
                                String: "options" [4425,4434]
                                STRING [4435,4521]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [4435,4521]
                    FIELD [4523,6953]
                        String: "steps" [4523,4530]
                        ARRAY [4531,6953]
                            OBJECT [4532,5249]
                                FIELD [4533,4578]
                                    String: "name" [4533,4539]
                                    STRING [4540,4578]
                                        String: "Prepare custom environment variables" [4540,4578]
                                FIELD [4579,4593]
                                    String: "shell" [4579,4586]
                                    STRING [4587,4593]
                                        String: "bash" [4587,4593]
                                FIELD [4594,5248]
                                    String: "run" [4594,4599]
                                    STRING [4600,5248]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [4600,5248]
                            OBJECT [5250,5385]
                                FIELD [5251,5287]
                                    String: "name" [5251,5257]
                                    STRING [5258,5287]
                                        String: "print environment variables" [5258,5287]
                                FIELD [5288,5384]
                                    String: "run" [5288,5293]
                                    STRING [5294,5384]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [5294,5384]
                            OBJECT [5386,5707]
                                FIELD [5387,5436]
                                    String: "name" [5387,5393]
                                    STRING [5394,5436]
                                        String: "Update clone using environment variables" [5394,5436]
                                FIELD [5437,5472]
                                    String: "working-directory" [5437,5456]
                                    STRING [5457,5472]
                                        String: "/transformers" [5457,5472]
                                FIELD [5473,5706]
                                    String: "run" [5473,5478]
                                    STRING [5479,5706]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [5479,5706]
                            OBJECT [5708,6054]
                                FIELD [5709,5751]
                                    String: "name" [5709,5715]
                                    STRING [5716,5751]
                                        String: "Echo folder ${{ matrix.folders }}" [5716,5751]
                                FIELD [5752,5766]
                                    String: "shell" [5752,5759]
                                    STRING [5760,5766]
                                        String: "bash" [5760,5766]
                                FIELD [5767,6053]
                                    String: "run" [5767,5772]
                                    STRING [5773,6053]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [5773,6053]
                            OBJECT [6055,6097]
                                FIELD [6056,6075]
                                    String: "name" [6056,6062]
                                    STRING [6063,6075]
                                        String: "NVIDIA-SMI" [6063,6075]
                                FIELD [6076,6096]
                                    String: "run" [6076,6081]
                                    STRING [6082,6096]
                                        String: "nvidia-smi\n" [6082,6096]
                            OBJECT [6098,6193]
                                FIELD [6099,6119]
                                    String: "name" [6099,6105]
                                    STRING [6106,6119]
                                        String: "Environment" [6106,6119]
                                FIELD [6120,6155]
                                    String: "working-directory" [6120,6139]
                                    STRING [6140,6155]
                                        String: "/transformers" [6140,6155]
                                FIELD [6156,6192]
                                    String: "run" [6156,6161]
                                    STRING [6162,6192]
                                        String: "python3 utils/print_env.py\n" [6162,6192]
                            OBJECT [6194,6467]
                                FIELD [6195,6242]
                                    String: "name" [6195,6201]
                                    STRING [6202,6242]
                                        String: "Run all non-slow selected tests on GPU" [6202,6242]
                                FIELD [6243,6278]
                                    String: "working-directory" [6243,6262]
                                    STRING [6263,6278]
                                        String: "/transformers" [6263,6278]
                                FIELD [6279,6466]
                                    String: "run" [6279,6284]
                                    STRING [6285,6466]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [6285,6466]
                            OBJECT [6468,6661]
                                FIELD [6469,6499]
                                    String: "name" [6469,6475]
                                    STRING [6476,6499]
                                        String: "Failure short reports" [6476,6499]
                                FIELD [6500,6523]
                                    String: "if" [6500,6504]
                                    STRING [6505,6523]
                                        String: "${{ failure() }}" [6505,6523]
                                FIELD [6524,6548]
                                    String: "continue-on-error" [6524,6543]
                                    TRUE [6544,6548]
                                FIELD [6549,6660]
                                    String: "run" [6549,6554]
                                    STRING [6555,6660]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [6555,6660]
                            OBJECT [6662,6952]
                                FIELD [6663,6700]
                                    String: "name" [6663,6669]
                                    STRING [6670,6700]
                                        String: "Test suite reports artifacts" [6670,6700]
                                FIELD [6701,6723]
                                    String: "if" [6701,6705]
                                    STRING [6706,6723]
                                        String: "${{ always() }}" [6706,6723]
                                FIELD [6724,6759]
                                    String: "uses" [6724,6730]
                                    STRING [6731,6759]
                                        String: "actions/upload-artifact@v2" [6731,6759]
                                FIELD [6760,6951]
                                    String: "with" [6760,6766]
                                    OBJECT [6767,6951]
                                        FIELD [6768,6860]
                                            String: "name" [6768,6774]
                                            STRING [6775,6860]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [6775,6860]
                                        FIELD [6861,6950]
                                            String: "path" [6861,6867]
                                            STRING [6868,6950]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [6868,6950]
            FIELD [6955,9919]
                String: "run_tests_multi_gpu" [6955,6976]
                OBJECT [6977,9919]
                    FIELD [6978,6998]
                        String: "name" [6978,6984]
                        STRING [6985,6998]
                            String: "Model tests" [6985,6998]
                    FIELD [6999,7014]
                        String: "needs" [6999,7006]
                        STRING [7007,7014]
                            String: "setup" [7007,7014]
                    FIELD [7015,7085]
                        String: "if" [7015,7019]
                        STRING [7020,7085]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [7020,7085]
                    FIELD [7086,7212]
                        String: "strategy" [7086,7096]
                        OBJECT [7097,7212]
                            FIELD [7098,7115]
                                String: "fail-fast" [7098,7109]
                                FALSE [7110,7115]
                            FIELD [7116,7211]
                                String: "matrix" [7116,7124]
                                OBJECT [7125,7211]
                                    FIELD [7126,7181]
                                        String: "folders" [7126,7135]
                                        STRING [7136,7181]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [7136,7181]
                                    FIELD [7182,7210]
                                        String: "machine_type" [7182,7196]
                                        ARRAY [7197,7210]
                                            STRING [7198,7209]
                                                String: "multi-gpu" [7198,7209]
                    FIELD [7213,7280]
                        String: "runs-on" [7213,7222]
                        ARRAY [7223,7280]
                            STRING [7224,7237]
                                String: "self-hosted" [7224,7237]
                            STRING [7238,7250]
                                String: "docker-gpu" [7238,7250]
                            STRING [7251,7279]
                                String: "${{ matrix.machine_type }}" [7251,7279]
                    FIELD [7281,7451]
                        String: "container" [7281,7292]
                        OBJECT [7293,7451]
                            FIELD [7294,7351]
                                String: "image" [7294,7301]
                                STRING [7302,7351]
                                    String: "huggingface/transformers-all-latest-gpu-push-ci" [7302,7351]
                            FIELD [7352,7450]
                                String: "options" [7352,7361]
                                STRING [7362,7450]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [7362,7450]
                    FIELD [7452,9918]
                        String: "steps" [7452,7459]
                        ARRAY [7460,9918]
                            OBJECT [7461,8178]
                                FIELD [7462,7507]
                                    String: "name" [7462,7468]
                                    STRING [7469,7507]
                                        String: "Prepare custom environment variables" [7469,7507]
                                FIELD [7508,7522]
                                    String: "shell" [7508,7515]
                                    STRING [7516,7522]
                                        String: "bash" [7516,7522]
                                FIELD [7523,8177]
                                    String: "run" [7523,7528]
                                    STRING [7529,8177]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [7529,8177]
                            OBJECT [8179,8314]
                                FIELD [8180,8216]
                                    String: "name" [8180,8186]
                                    STRING [8187,8216]
                                        String: "print environment variables" [8187,8216]
                                FIELD [8217,8313]
                                    String: "run" [8217,8222]
                                    STRING [8223,8313]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [8223,8313]
                            OBJECT [8315,8636]
                                FIELD [8316,8365]
                                    String: "name" [8316,8322]
                                    STRING [8323,8365]
                                        String: "Update clone using environment variables" [8323,8365]
                                FIELD [8366,8401]
                                    String: "working-directory" [8366,8385]
                                    STRING [8386,8401]
                                        String: "/transformers" [8386,8401]
                                FIELD [8402,8635]
                                    String: "run" [8402,8407]
                                    STRING [8408,8635]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [8408,8635]
                            OBJECT [8637,8983]
                                FIELD [8638,8680]
                                    String: "name" [8638,8644]
                                    STRING [8645,8680]
                                        String: "Echo folder ${{ matrix.folders }}" [8645,8680]
                                FIELD [8681,8695]
                                    String: "shell" [8681,8688]
                                    STRING [8689,8695]
                                        String: "bash" [8689,8695]
                                FIELD [8696,8982]
                                    String: "run" [8696,8701]
                                    STRING [8702,8982]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [8702,8982]
                            OBJECT [8984,9026]
                                FIELD [8985,9004]
                                    String: "name" [8985,8991]
                                    STRING [8992,9004]
                                        String: "NVIDIA-SMI" [8992,9004]
                                FIELD [9005,9025]
                                    String: "run" [9005,9010]
                                    STRING [9011,9025]
                                        String: "nvidia-smi\n" [9011,9025]
                            OBJECT [9027,9122]
                                FIELD [9028,9048]
                                    String: "name" [9028,9034]
                                    STRING [9035,9048]
                                        String: "Environment" [9035,9048]
                                FIELD [9049,9084]
                                    String: "working-directory" [9049,9068]
                                    STRING [9069,9084]
                                        String: "/transformers" [9069,9084]
                                FIELD [9085,9121]
                                    String: "run" [9085,9090]
                                    STRING [9091,9121]
                                        String: "python3 utils/print_env.py\n" [9091,9121]
                            OBJECT [9123,9432]
                                FIELD [9124,9171]
                                    String: "name" [9124,9130]
                                    STRING [9131,9171]
                                        String: "Run all non-slow selected tests on GPU" [9131,9171]
                                FIELD [9172,9207]
                                    String: "env" [9172,9177]
                                    OBJECT [9178,9207]
                                        FIELD [9179,9206]
                                            String: "MKL_SERVICE_FORCE_INTEL" [9179,9204]
                                            NUMBER [9205,9206]
                                                Number: 1 [9205,9206]
                                FIELD [9208,9243]
                                    String: "working-directory" [9208,9227]
                                    STRING [9228,9243]
                                        String: "/transformers" [9228,9243]
                                FIELD [9244,9431]
                                    String: "run" [9244,9249]
                                    STRING [9250,9431]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [9250,9431]
                            OBJECT [9433,9626]
                                FIELD [9434,9464]
                                    String: "name" [9434,9440]
                                    STRING [9441,9464]
                                        String: "Failure short reports" [9441,9464]
                                FIELD [9465,9488]
                                    String: "if" [9465,9469]
                                    STRING [9470,9488]
                                        String: "${{ failure() }}" [9470,9488]
                                FIELD [9489,9513]
                                    String: "continue-on-error" [9489,9508]
                                    TRUE [9509,9513]
                                FIELD [9514,9625]
                                    String: "run" [9514,9519]
                                    STRING [9520,9625]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [9520,9625]
                            OBJECT [9627,9917]
                                FIELD [9628,9665]
                                    String: "name" [9628,9634]
                                    STRING [9635,9665]
                                        String: "Test suite reports artifacts" [9635,9665]
                                FIELD [9666,9688]
                                    String: "if" [9666,9670]
                                    STRING [9671,9688]
                                        String: "${{ always() }}" [9671,9688]
                                FIELD [9689,9724]
                                    String: "uses" [9689,9695]
                                    STRING [9696,9724]
                                        String: "actions/upload-artifact@v2" [9696,9724]
                                FIELD [9725,9916]
                                    String: "with" [9725,9731]
                                    OBJECT [9732,9916]
                                        FIELD [9733,9825]
                                            String: "name" [9733,9739]
                                            STRING [9740,9825]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [9740,9825]
                                        FIELD [9826,9915]
                                            String: "path" [9826,9832]
                                            STRING [9833,9915]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [9833,9915]
            FIELD [9920,12982]
                String: "run_tests_torch_cuda_extensions_single_gpu" [9920,9964]
                OBJECT [9965,12982]
                    FIELD [9966,10001]
                        String: "name" [9966,9972]
                        STRING [9973,10001]
                            String: "Torch CUDA extension tests" [9973,10001]
                    FIELD [10002,10017]
                        String: "needs" [10002,10009]
                        STRING [10010,10017]
                            String: "setup" [10010,10017]
                    FIELD [10018,10146]
                        String: "if" [10018,10022]
                        STRING [10023,10146]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [10023,10146]
                    FIELD [10147,10218]
                        String: "strategy" [10147,10157]
                        OBJECT [10158,10218]
                            FIELD [10159,10176]
                                String: "fail-fast" [10159,10170]
                                FALSE [10171,10176]
                            FIELD [10177,10217]
                                String: "matrix" [10177,10185]
                                OBJECT [10186,10217]
                                    FIELD [10187,10216]
                                        String: "machine_type" [10187,10201]
                                        ARRAY [10202,10216]
                                            STRING [10203,10215]
                                                String: "single-gpu" [10203,10215]
                    FIELD [10219,10286]
                        String: "runs-on" [10219,10228]
                        ARRAY [10229,10286]
                            STRING [10230,10243]
                                String: "self-hosted" [10230,10243]
                            STRING [10244,10256]
                                String: "docker-gpu" [10244,10256]
                            STRING [10257,10285]
                                String: "${{ matrix.machine_type }}" [10257,10285]
                    FIELD [10287,10469]
                        String: "container" [10287,10298]
                        OBJECT [10299,10469]
                            FIELD [10300,10371]
                                String: "image" [10300,10307]
                                STRING [10308,10371]
                                    String: "huggingface/transformers-pytorch-deepspeed-latest-gpu-push-ci" [10308,10371]
                            FIELD [10372,10468]
                                String: "options" [10372,10381]
                                STRING [10382,10468]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [10382,10468]
                    FIELD [10470,12981]
                        String: "steps" [10470,10477]
                        ARRAY [10478,12981]
                            OBJECT [10479,11196]
                                FIELD [10480,10525]
                                    String: "name" [10480,10486]
                                    STRING [10487,10525]
                                        String: "Prepare custom environment variables" [10487,10525]
                                FIELD [10526,10540]
                                    String: "shell" [10526,10533]
                                    STRING [10534,10540]
                                        String: "bash" [10534,10540]
                                FIELD [10541,11195]
                                    String: "run" [10541,10546]
                                    STRING [10547,11195]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [10547,11195]
                            OBJECT [11197,11332]
                                FIELD [11198,11234]
                                    String: "name" [11198,11204]
                                    STRING [11205,11234]
                                        String: "print environment variables" [11205,11234]
                                FIELD [11235,11331]
                                    String: "run" [11235,11240]
                                    STRING [11241,11331]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [11241,11331]
                            OBJECT [11333,11664]
                                FIELD [11334,11383]
                                    String: "name" [11334,11340]
                                    STRING [11341,11383]
                                        String: "Update clone using environment variables" [11341,11383]
                                FIELD [11384,11429]
                                    String: "working-directory" [11384,11403]
                                    STRING [11404,11429]
                                        String: "/workspace/transformers" [11404,11429]
                                FIELD [11430,11663]
                                    String: "run" [11430,11435]
                                    STRING [11436,11663]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [11436,11663]
                            OBJECT [11665,11759]
                                FIELD [11666,11705]
                                    String: "name" [11666,11672]
                                    STRING [11673,11705]
                                        String: "Remove cached torch extensions" [11673,11705]
                                FIELD [11706,11758]
                                    String: "run" [11706,11711]
                                    STRING [11712,11758]
                                        String: "rm -rf /github/home/.cache/torch_extensions/" [11712,11758]
                            OBJECT [11760,12083]
                                FIELD [11761,11797]
                                    String: "name" [11761,11767]
                                    STRING [11768,11797]
                                        String: "Pre build DeepSpeed *again*" [11768,11797]
                                FIELD [11798,11830]
                                    String: "working-directory" [11798,11817]
                                    STRING [11818,11830]
                                        String: "/workspace" [11818,11830]
                                FIELD [11831,12082]
                                    String: "run" [11831,11836]
                                    STRING [11837,12082]
                                        String: "python3 -m pip uninstall -y deepspeed\nDS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 DS_BUILD_AIO=1 DS_BUILD_UTILS=1 python3 -m pip install deepspeed --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [11837,12082]
                            OBJECT [12084,12126]
                                FIELD [12085,12104]
                                    String: "name" [12085,12091]
                                    STRING [12092,12104]
                                        String: "NVIDIA-SMI" [12092,12104]
                                FIELD [12105,12125]
                                    String: "run" [12105,12110]
                                    STRING [12111,12125]
                                        String: "nvidia-smi\n" [12111,12125]
                            OBJECT [12127,12231]
                                FIELD [12128,12148]
                                    String: "name" [12128,12134]
                                    STRING [12135,12148]
                                        String: "Environment" [12135,12148]
                                FIELD [12149,12194]
                                    String: "working-directory" [12149,12168]
                                    STRING [12169,12194]
                                        String: "/workspace/transformers" [12169,12194]
                                FIELD [12195,12230]
                                    String: "run" [12195,12200]
                                    STRING [12201,12230]
                                        String: "python utils/print_env.py\n" [12201,12230]
                            OBJECT [12232,12483]
                                FIELD [12233,12280]
                                    String: "name" [12233,12239]
                                    STRING [12240,12280]
                                        String: "Run all non-slow selected tests on GPU" [12240,12280]
                                FIELD [12281,12326]
                                    String: "working-directory" [12281,12300]
                                    STRING [12301,12326]
                                        String: "/workspace/transformers" [12301,12326]
                                FIELD [12327,12482]
                                    String: "run" [12327,12332]
                                    STRING [12333,12482]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [12333,12482]
                            OBJECT [12484,12687]
                                FIELD [12485,12515]
                                    String: "name" [12485,12491]
                                    STRING [12492,12515]
                                        String: "Failure short reports" [12492,12515]
                                FIELD [12516,12539]
                                    String: "if" [12516,12520]
                                    STRING [12521,12539]
                                        String: "${{ failure() }}" [12521,12539]
                                FIELD [12540,12564]
                                    String: "continue-on-error" [12540,12559]
                                    TRUE [12560,12564]
                                FIELD [12565,12686]
                                    String: "run" [12565,12570]
                                    STRING [12571,12686]
                                        String: "cat /workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [12571,12686]
                            OBJECT [12688,12980]
                                FIELD [12689,12726]
                                    String: "name" [12689,12695]
                                    STRING [12696,12726]
                                        String: "Test suite reports artifacts" [12696,12726]
                                FIELD [12727,12749]
                                    String: "if" [12727,12731]
                                    STRING [12732,12749]
                                        String: "${{ always() }}" [12732,12749]
                                FIELD [12750,12785]
                                    String: "uses" [12750,12756]
                                    STRING [12757,12785]
                                        String: "actions/upload-artifact@v2" [12757,12785]
                                FIELD [12786,12979]
                                    String: "with" [12786,12792]
                                    OBJECT [12793,12979]
                                        FIELD [12794,12878]
                                            String: "name" [12794,12800]
                                            STRING [12801,12878]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [12801,12878]
                                        FIELD [12879,12978]
                                            String: "path" [12879,12885]
                                            STRING [12886,12978]
                                                String: "/workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [12886,12978]
            FIELD [12983,16045]
                String: "run_tests_torch_cuda_extensions_multi_gpu" [12983,13026]
                OBJECT [13027,16045]
                    FIELD [13028,13063]
                        String: "name" [13028,13034]
                        STRING [13035,13063]
                            String: "Torch CUDA extension tests" [13035,13063]
                    FIELD [13064,13079]
                        String: "needs" [13064,13071]
                        STRING [13072,13079]
                            String: "setup" [13072,13079]
                    FIELD [13080,13208]
                        String: "if" [13080,13084]
                        STRING [13085,13208]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [13085,13208]
                    FIELD [13209,13279]
                        String: "strategy" [13209,13219]
                        OBJECT [13220,13279]
                            FIELD [13221,13238]
                                String: "fail-fast" [13221,13232]
                                FALSE [13233,13238]
                            FIELD [13239,13278]
                                String: "matrix" [13239,13247]
                                OBJECT [13248,13278]
                                    FIELD [13249,13277]
                                        String: "machine_type" [13249,13263]
                                        ARRAY [13264,13277]
                                            STRING [13265,13276]
                                                String: "multi-gpu" [13265,13276]
                    FIELD [13280,13347]
                        String: "runs-on" [13280,13289]
                        ARRAY [13290,13347]
                            STRING [13291,13304]
                                String: "self-hosted" [13291,13304]
                            STRING [13305,13317]
                                String: "docker-gpu" [13305,13317]
                            STRING [13318,13346]
                                String: "${{ matrix.machine_type }}" [13318,13346]
                    FIELD [13348,13532]
                        String: "container" [13348,13359]
                        OBJECT [13360,13532]
                            FIELD [13361,13432]
                                String: "image" [13361,13368]
                                STRING [13369,13432]
                                    String: "huggingface/transformers-pytorch-deepspeed-latest-gpu-push-ci" [13369,13432]
                            FIELD [13433,13531]
                                String: "options" [13433,13442]
                                STRING [13443,13531]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [13443,13531]
                    FIELD [13533,16044]
                        String: "steps" [13533,13540]
                        ARRAY [13541,16044]
                            OBJECT [13542,14259]
                                FIELD [13543,13588]
                                    String: "name" [13543,13549]
                                    STRING [13550,13588]
                                        String: "Prepare custom environment variables" [13550,13588]
                                FIELD [13589,13603]
                                    String: "shell" [13589,13596]
                                    STRING [13597,13603]
                                        String: "bash" [13597,13603]
                                FIELD [13604,14258]
                                    String: "run" [13604,13609]
                                    STRING [13610,14258]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [13610,14258]
                            OBJECT [14260,14395]
                                FIELD [14261,14297]
                                    String: "name" [14261,14267]
                                    STRING [14268,14297]
                                        String: "print environment variables" [14268,14297]
                                FIELD [14298,14394]
                                    String: "run" [14298,14303]
                                    STRING [14304,14394]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [14304,14394]
                            OBJECT [14396,14727]
                                FIELD [14397,14446]
                                    String: "name" [14397,14403]
                                    STRING [14404,14446]
                                        String: "Update clone using environment variables" [14404,14446]
                                FIELD [14447,14492]
                                    String: "working-directory" [14447,14466]
                                    STRING [14467,14492]
                                        String: "/workspace/transformers" [14467,14492]
                                FIELD [14493,14726]
                                    String: "run" [14493,14498]
                                    STRING [14499,14726]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [14499,14726]
                            OBJECT [14728,14822]
                                FIELD [14729,14768]
                                    String: "name" [14729,14735]
                                    STRING [14736,14768]
                                        String: "Remove cached torch extensions" [14736,14768]
                                FIELD [14769,14821]
                                    String: "run" [14769,14774]
                                    STRING [14775,14821]
                                        String: "rm -rf /github/home/.cache/torch_extensions/" [14775,14821]
                            OBJECT [14823,15146]
                                FIELD [14824,14860]
                                    String: "name" [14824,14830]
                                    STRING [14831,14860]
                                        String: "Pre build DeepSpeed *again*" [14831,14860]
                                FIELD [14861,14893]
                                    String: "working-directory" [14861,14880]
                                    STRING [14881,14893]
                                        String: "/workspace" [14881,14893]
                                FIELD [14894,15145]
                                    String: "run" [14894,14899]
                                    STRING [14900,15145]
                                        String: "python3 -m pip uninstall -y deepspeed\nDS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 DS_BUILD_AIO=1 DS_BUILD_UTILS=1 python3 -m pip install deepspeed --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [14900,15145]
                            OBJECT [15147,15189]
                                FIELD [15148,15167]
                                    String: "name" [15148,15154]
                                    STRING [15155,15167]
                                        String: "NVIDIA-SMI" [15155,15167]
                                FIELD [15168,15188]
                                    String: "run" [15168,15173]
                                    STRING [15174,15188]
                                        String: "nvidia-smi\n" [15174,15188]
                            OBJECT [15190,15294]
                                FIELD [15191,15211]
                                    String: "name" [15191,15197]
                                    STRING [15198,15211]
                                        String: "Environment" [15198,15211]
                                FIELD [15212,15257]
                                    String: "working-directory" [15212,15231]
                                    STRING [15232,15257]
                                        String: "/workspace/transformers" [15232,15257]
                                FIELD [15258,15293]
                                    String: "run" [15258,15263]
                                    STRING [15264,15293]
                                        String: "python utils/print_env.py\n" [15264,15293]
                            OBJECT [15295,15546]
                                FIELD [15296,15343]
                                    String: "name" [15296,15302]
                                    STRING [15303,15343]
                                        String: "Run all non-slow selected tests on GPU" [15303,15343]
                                FIELD [15344,15389]
                                    String: "working-directory" [15344,15363]
                                    STRING [15364,15389]
                                        String: "/workspace/transformers" [15364,15389]
                                FIELD [15390,15545]
                                    String: "run" [15390,15395]
                                    STRING [15396,15545]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [15396,15545]
                            OBJECT [15547,15750]
                                FIELD [15548,15578]
                                    String: "name" [15548,15554]
                                    STRING [15555,15578]
                                        String: "Failure short reports" [15555,15578]
                                FIELD [15579,15602]
                                    String: "if" [15579,15583]
                                    STRING [15584,15602]
                                        String: "${{ failure() }}" [15584,15602]
                                FIELD [15603,15627]
                                    String: "continue-on-error" [15603,15622]
                                    TRUE [15623,15627]
                                FIELD [15628,15749]
                                    String: "run" [15628,15633]
                                    STRING [15634,15749]
                                        String: "cat /workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [15634,15749]
                            OBJECT [15751,16043]
                                FIELD [15752,15789]
                                    String: "name" [15752,15758]
                                    STRING [15759,15789]
                                        String: "Test suite reports artifacts" [15759,15789]
                                FIELD [15790,15812]
                                    String: "if" [15790,15794]
                                    STRING [15795,15812]
                                        String: "${{ always() }}" [15795,15812]
                                FIELD [15813,15848]
                                    String: "uses" [15813,15819]
                                    STRING [15820,15848]
                                        String: "actions/upload-artifact@v2" [15820,15848]
                                FIELD [15849,16042]
                                    String: "with" [15849,15855]
                                    OBJECT [15856,16042]
                                        FIELD [15857,15941]
                                            String: "name" [15857,15863]
                                            STRING [15864,15941]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [15864,15941]
                                        FIELD [15942,16041]
                                            String: "path" [15942,15948]
                                            STRING [15949,16041]
                                                String: "/workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [15949,16041]
            FIELD [16046,18604]
                String: "send_results" [16046,16060]
                OBJECT [16061,18604]
                    FIELD [16062,16094]
                        String: "name" [16062,16068]
                        STRING [16069,16094]
                            String: "Send results to webhook" [16069,16094]
                    FIELD [16095,16120]
                        String: "runs-on" [16095,16104]
                        STRING [16105,16120]
                            String: "ubuntu-latest" [16105,16120]
                    FIELD [16121,16136]
                        String: "if" [16121,16125]
                        STRING [16126,16136]
                            String: "always()" [16126,16136]
                    FIELD [16137,16326]
                        String: "needs" [16137,16144]
                        ARRAY [16145,16326]
                            STRING [16146,16167]
                                String: "check_runner_status" [16146,16167]
                            STRING [16168,16183]
                                String: "check_runners" [16168,16183]
                            STRING [16184,16191]
                                String: "setup" [16184,16191]
                            STRING [16192,16214]
                                String: "run_tests_single_gpu" [16192,16214]
                            STRING [16215,16236]
                                String: "run_tests_multi_gpu" [16215,16236]
                            STRING [16237,16281]
                                String: "run_tests_torch_cuda_extensions_single_gpu" [16237,16281]
                            STRING [16282,16325]
                                String: "run_tests_torch_cuda_extensions_multi_gpu" [16282,16325]
                    FIELD [16327,18603]
                        String: "steps" [16327,16334]
                        ARRAY [16335,18603]
                            OBJECT [16336,16573]
                                FIELD [16337,16368]
                                    String: "name" [16337,16343]
                                    STRING [16344,16368]
                                        String: "Preliminary job status" [16344,16368]
                                FIELD [16369,16383]
                                    String: "shell" [16369,16376]
                                    STRING [16377,16383]
                                        String: "bash" [16377,16383]
                                FIELD [16384,16572]
                                    String: "run" [16384,16389]
                                    STRING [16390,16572]
                                        String: "echo \"Runner availability: ${{ needs.check_runner_status.result }}\"\necho \"Setup status: ${{ needs.setup.result }}\"\necho \"Runner status: ${{ needs.check_runners.result }}\"\n" [16390,16572]
                            OBJECT [16574,17291]
                                FIELD [16575,16620]
                                    String: "name" [16575,16581]
                                    STRING [16582,16620]
                                        String: "Prepare custom environment variables" [16582,16620]
                                FIELD [16621,16635]
                                    String: "shell" [16621,16628]
                                    STRING [16629,16635]
                                        String: "bash" [16629,16635]
                                FIELD [16636,17290]
                                    String: "run" [16636,16641]
                                    STRING [16642,17290]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [16642,17290]
                            OBJECT [17292,17427]
                                FIELD [17293,17329]
                                    String: "name" [17293,17299]
                                    STRING [17300,17329]
                                        String: "print environment variables" [17300,17329]
                                FIELD [17330,17426]
                                    String: "run" [17330,17335]
                                    STRING [17336,17426]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [17336,17426]
                            OBJECT [17428,17458]
                                FIELD [17429,17457]
                                    String: "uses" [17429,17435]
                                    STRING [17436,17457]
                                        String: "actions/checkout@v2" [17436,17457]
                            OBJECT [17459,17744]
                                FIELD [17460,17509]
                                    String: "name" [17460,17466]
                                    STRING [17467,17509]
                                        String: "Update clone using environment variables" [17467,17509]
                                FIELD [17510,17743]
                                    String: "run" [17510,17515]
                                    STRING [17516,17743]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [17516,17743]
                            OBJECT [17745,17784]
                                FIELD [17746,17783]
                                    String: "uses" [17746,17752]
                                    STRING [17753,17783]
                                        String: "actions/download-artifact@v2" [17753,17783]
                            OBJECT [17785,18602]
                                FIELD [17786,17816]
                                    String: "name" [17786,17792]
                                    STRING [17793,17816]
                                        String: "Send message to Slack" [17793,17816]
                                FIELD [17817,18495]
                                    String: "env" [17817,17822]
                                    OBJECT [17823,18495]
                                        FIELD [17824,17880]
                                            String: "CI_SLACK_BOT_TOKEN" [17824,17844]
                                            STRING [17845,17880]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [17845,17880]
                                        FIELD [17881,17939]
                                            String: "CI_SLACK_CHANNEL_ID" [17881,17902]
                                            STRING [17903,17939]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [17903,17939]
                                        FIELD [17940,18010]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [17940,17967]
                                            STRING [17968,18010]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [17968,18010]
                                        FIELD [18011,18087]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [18011,18041]
                                            STRING [18042,18087]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [18042,18087]
                                        FIELD [18088,18153]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [18088,18116]
                                            STRING [18117,18153]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [18117,18153]
                                        FIELD [18154,18171]
                                            String: "CI_EVENT" [18154,18164]
                                            STRING [18165,18171]
                                                String: "push" [18165,18171]
                                        FIELD [18172,18229]
                                            String: "CI_TITLE_PUSH" [18172,18187]
                                            STRING [18188,18229]
                                                String: "${{ github.event.head_commit.message }}" [18188,18229]
                                        FIELD [18230,18308]
                                            String: "CI_TITLE_WORKFLOW_RUN" [18230,18253]
                                            STRING [18254,18308]
                                                String: "${{ github.event.workflow_run.head_commit.message }}" [18254,18308]
                                        FIELD [18309,18337]
                                            String: "CI_SHA" [18309,18317]
                                            STRING [18318,18337]
                                                String: "${{ env.CI_SHA }}" [18318,18337]
                                        FIELD [18338,18395]
                                            String: "RUNNER_STATUS" [18338,18353]
                                            STRING [18354,18395]
                                                String: "${{ needs.check_runner_status.result }}" [18354,18395]
                                        FIELD [18396,18451]
                                            String: "RUNNER_ENV_STATUS" [18396,18415]
                                            STRING [18416,18451]
                                                String: "${{ needs.check_runners.result }}" [18416,18451]
                                        FIELD [18452,18494]
                                            String: "SETUP_STATUS" [18452,18466]
                                            STRING [18467,18494]
                                                String: "${{ needs.setup.result }}" [18467,18494]
                                FIELD [18496,18601]
                                    String: "run" [18496,18501]
                                    STRING [18502,18601]
                                        String: "pip install slack_sdk\npython utils/notification_service.py \"${{ needs.setup.outputs.matrix }}\"" [18502,18601]