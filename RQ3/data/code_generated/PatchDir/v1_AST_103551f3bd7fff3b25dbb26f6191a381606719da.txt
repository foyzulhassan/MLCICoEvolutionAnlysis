OBJECT [0,6147]
    FIELD [1,21]
        String: "name" [1,7]
        STRING [8,21]
            String: "Build on M1" [8,21]
    FIELD [22,208]
        String: "on" [22,26]
        OBJECT [27,208]
            FIELD [28,96]
                String: "pull_request" [28,42]
                OBJECT [43,96]
                    FIELD [44,95]
                        String: "paths" [44,51]
                        ARRAY [52,95]
                            STRING [53,94]
                                String: ".github/workflows/build-m1-binaries.yml" [53,94]
            FIELD [97,182]
                String: "push" [97,103]
                OBJECT [104,182]
                    FIELD [105,139]
                        String: "branches" [105,115]
                        ARRAY [116,139]
                            STRING [117,126]
                                String: "nightly" [117,126]
                            STRING [127,138]
                                String: "release/*" [127,138]
                    FIELD [140,181]
                        String: "tags" [140,146]
                        ARRAY [147,181]
                            STRING [148,180]
                                String: "v[0-9]+.[0-9]+.[0-9]+-rc[0-9]+" [148,180]
            FIELD [183,207]
                String: "workflow_dispatch" [183,202]
                NULL [203,207]
    FIELD [209,236]
        String: "env" [209,214]
        OBJECT [215,236]
            FIELD [216,235]
                String: "CHANNEL" [216,225]
                STRING [226,235]
                    String: "nightly" [226,235]
    FIELD [237,5969]
        String: "jobs" [237,243]
        OBJECT [244,5969]
            FIELD [245,3611]
                String: "build_wheels" [245,259]
                OBJECT [260,3611]
                    FIELD [261,295]
                        String: "name" [261,267]
                        STRING [268,295]
                            String: "Build TorchText M1 wheels" [268,295]
                    FIELD [296,319]
                        String: "runs-on" [296,305]
                        STRING [306,319]
                            String: "macos-m1-12" [306,319]
                    FIELD [320,392]
                        String: "strategy" [320,330]
                        OBJECT [331,392]
                            FIELD [332,349]
                                String: "fail-fast" [332,343]
                                FALSE [344,349]
                            FIELD [350,391]
                                String: "matrix" [350,358]
                                OBJECT [359,391]
                                    FIELD [360,390]
                                        String: "py_vers" [360,369]
                                        ARRAY [370,390]
                                            STRING [371,376]
                                                String: "3.8" [371,376]
                                            STRING [377,382]
                                                String: "3.9" [377,382]
                                            STRING [383,389]
                                                String: "3.10" [383,389]
                    FIELD [393,3610]
                        String: "steps" [393,400]
                        ARRAY [401,3610]
                            OBJECT [402,461]
                                FIELD [403,431]
                                    String: "name" [403,409]
                                    STRING [410,431]
                                        String: "Checkout repository" [410,431]
                                FIELD [432,460]
                                    String: "uses" [432,438]
                                    STRING [439,460]
                                        String: "actions/checkout@v2" [439,460]
                            OBJECT [462,738]
                                FIELD [463,508]
                                    String: "name" [463,469]
                                    STRING [470,508]
                                        String: "Set CHANNEL (only for tagged pushes)" [470,508]
                                FIELD [509,596]
                                    String: "if" [509,513]
                                    STRING [514,596]
                                        String: "${{ github.event_name == 'push' && startsWith(github.event.ref, 'refs/tags/') }}" [514,596]
                                FIELD [597,737]
                                    String: "run" [597,602]
                                    STRING [603,737]
                                        String: "# reference ends with an RC suffix\nif [[ ${GITHUB_REF_NAME} = *-rc[0-9]* ]]; then\n  echo \"CHANNEL=test\" >> \"$GITHUB_ENV\"\nfi\n" [603,737]
                            OBJECT [739,976]
                                FIELD [740,782]
                                    String: "name" [740,746]
                                    STRING [747,782]
                                        String: "Set Release CHANNEL (for release)" [747,782]
                                FIELD [783,924]
                                    String: "if" [783,787]
                                    STRING [788,924]
                                        String: "${{ (github.event_name == 'pull_request' && startsWith(github.base_ref, 'release')) || startsWith(github.ref, 'refs/heads/release') }}" [788,924]
                                FIELD [925,975]
                                    String: "run" [925,930]
                                    STRING [931,975]
                                        String: "echo \"CHANNEL=test\" >> \"$GITHUB_ENV\"\n" [931,975]
                            OBJECT [977,2182]
                                FIELD [978,1011]
                                    String: "name" [978,984]
                                    STRING [985,1011]
                                        String: "Build TorchText M1 wheel" [985,1011]
                                FIELD [1012,1047]
                                    String: "shell" [1012,1019]
                                    STRING [1020,1047]
                                        String: "arch -arch arm64 bash {0}" [1020,1047]
                                FIELD [1048,1133]
                                    String: "env" [1048,1053]
                                    OBJECT [1054,1133]
                                        FIELD [1055,1098]
                                            String: "ENV_NAME" [1055,1065]
                                            STRING [1066,1098]
                                                String: "conda-env-${{ github.run_id }}" [1066,1098]
                                        FIELD [1099,1132]
                                            String: "PY_VERS" [1099,1108]
                                            STRING [1109,1132]
                                                String: "${{ matrix.py_vers }}" [1109,1132]
                                FIELD [1134,2181]
                                    String: "run" [1134,1139]
                                    STRING [1140,2181]
                                        String: "echo $PATH\n. ~/miniconda3/etc/profile.d/conda.sh\nset -ex\n. packaging/pkg_helpers.bash\n# if we are uploading to test channell, our version consist only of the base: 0.x.x - no date string or suffix added\nif [[ $CHANNEL == \"test\" ]]; then\n  setup_base_build_version\nelse\n  setup_build_version\nfi\ngit submodule update --init --recursive\nWHL_NAME=torchtext-${BUILD_VERSION}-cp${PY_VERS/.}-cp${PY_VERS/.}-macosx_11_0_arm64.whl\nconda create -yp ${ENV_NAME} python=${PY_VERS} numpy cmake ninja wheel pkg-config\nconda run -p ${ENV_NAME} python3 -mpip install torch --pre --extra-index-url=https://download.pytorch.org/whl/${CHANNEL}\nconda run -p ${ENV_NAME} python3 -mpip install delocate\nconda run -p ${ENV_NAME} python3 setup.py bdist_wheel\nexport PYTORCH_VERSION=\"$(conda run -p ${ENV_NAME} python3 -mpip show torch | grep ^Version: | sed 's/Version: *//')\"\nconda run -p ${ENV_NAME} DYLD_FALLBACK_LIBRARY_PATH=\"${ENV_NAME}/lib\" delocate-wheel -v --ignore-missing-dependencies dist/*.whl\nconda env remove -p ${ENV_NAME}\n" [1140,2181]
                            OBJECT [2183,2852]
                                FIELD [2184,2203]
                                    String: "name" [2184,2190]
                                    STRING [2191,2203]
                                        String: "Test wheel" [2191,2203]
                                FIELD [2204,2239]
                                    String: "shell" [2204,2211]
                                    STRING [2212,2239]
                                        String: "arch -arch arm64 bash {0}" [2212,2239]
                                FIELD [2240,2330]
                                    String: "env" [2240,2245]
                                    OBJECT [2246,2330]
                                        FIELD [2247,2295]
                                            String: "ENV_NAME" [2247,2257]
                                            STRING [2258,2295]
                                                String: "conda-test-env-${{ github.run_id }}" [2258,2295]
                                        FIELD [2296,2329]
                                            String: "PY_VERS" [2296,2305]
                                            STRING [2306,2329]
                                                String: "${{ matrix.py_vers }}" [2306,2329]
                                FIELD [2331,2851]
                                    String: "run" [2331,2336]
                                    STRING [2337,2851]
                                        String: ". ~/miniconda3/etc/profile.d/conda.sh\nset -ex\nconda create -yp ${ENV_NAME} python=${PY_VERS} numpy\nconda run -p ${ENV_NAME} python3 -mpip install torch --pre --extra-index-url=https://download.pytorch.org/whl/${CHANNEL}\nconda run -p ${ENV_NAME} python3 -mpip install dist/*.whl\n# Test torch is importable, by changing cwd and running import commands\nconda run --cwd /tmp -p ${ENV_NAME} python3 -c \"import torchtext;print('torchtext version is ', torchtext.__version__)\"\nconda env remove -p ${ENV_NAME}\n" [2337,2851]
                            OBJECT [2853,3134]
                                FIELD [2854,2885]
                                    String: "name" [2854,2860]
                                    STRING [2861,2885]
                                        String: "Upload wheel to GitHub" [2861,2885]
                                FIELD [2886,3019]
                                    String: "if" [2886,2890]
                                    STRING [2891,3019]
                                        String: "${{ github.event_name == 'push' && (github.event.ref == 'refs/heads/nightly' || startsWith(github.event.ref, 'refs/tags/')) }}" [2891,3019]
                                FIELD [3020,3055]
                                    String: "uses" [3020,3026]
                                    STRING [3027,3055]
                                        String: "actions/upload-artifact@v3" [3027,3055]
                                FIELD [3056,3133]
                                    String: "with" [3056,3062]
                                    OBJECT [3063,3133]
                                        FIELD [3064,3117]
                                            String: "name" [3064,3070]
                                            STRING [3071,3117]
                                                String: "torchtext-py${{ matrix.py_vers }}-macos11-m1" [3071,3117]
                                        FIELD [3118,3132]
                                            String: "path" [3118,3124]
                                            STRING [3125,3132]
                                                String: "dist/" [3125,3132]
                            OBJECT [3135,3609]
                                FIELD [3136,3163]
                                    String: "name" [3136,3142]
                                    STRING [3143,3163]
                                        String: "Upload wheel to S3" [3143,3163]
                                FIELD [3164,3297]
                                    String: "if" [3164,3168]
                                    STRING [3169,3297]
                                        String: "${{ github.event_name == 'push' && (github.event.ref == 'refs/heads/nightly' || startsWith(github.event.ref, 'refs/tags/')) }}" [3169,3297]
                                FIELD [3298,3333]
                                    String: "shell" [3298,3305]
                                    STRING [3306,3333]
                                        String: "arch -arch arm64 bash {0}" [3306,3333]
                                FIELD [3334,3493]
                                    String: "env" [3334,3339]
                                    OBJECT [3340,3493]
                                        FIELD [3341,3412]
                                            String: "AWS_ACCESS_KEY_ID" [3341,3360]
                                            STRING [3361,3412]
                                                String: "${{ secrets.AWS_PYTORCH_UPLOADER_ACCESS_KEY_ID }}" [3361,3412]
                                        FIELD [3413,3492]
                                            String: "AWS_SECRET_ACCESS_KEY" [3413,3436]
                                            STRING [3437,3492]
                                                String: "${{ secrets.AWS_PYTORCH_UPLOADER_SECRET_ACCESS_KEY }}" [3437,3492]
                                FIELD [3494,3608]
                                    String: "run" [3494,3499]
                                    STRING [3500,3608]
                                        String: "for pkg in dist/*; do\n  aws s3 cp \"$pkg\" \"s3://pytorch/whl/${CHANNEL}/cpu/\" --acl public-read\ndone\n" [3500,3608]
            FIELD [3612,5968]
                String: "build_conda" [3612,3625]
                OBJECT [3626,5968]
                    FIELD [3627,3669]
                        String: "name" [3627,3633]
                        STRING [3634,3669]
                            String: "Build TorchText M1 conda packages" [3634,3669]
                    FIELD [3670,3693]
                        String: "runs-on" [3670,3679]
                        STRING [3680,3693]
                            String: "macos-m1-12" [3680,3693]
                    FIELD [3694,3748]
                        String: "strategy" [3694,3704]
                        OBJECT [3705,3748]
                            FIELD [3706,3747]
                                String: "matrix" [3706,3714]
                                OBJECT [3715,3747]
                                    FIELD [3716,3746]
                                        String: "py_vers" [3716,3725]
                                        ARRAY [3726,3746]
                                            STRING [3727,3732]
                                                String: "3.8" [3727,3732]
                                            STRING [3733,3738]
                                                String: "3.9" [3733,3738]
                                            STRING [3739,3745]
                                                String: "3.10" [3739,3745]
                    FIELD [3749,5967]
                        String: "steps" [3749,3756]
                        ARRAY [3757,5967]
                            OBJECT [3758,3817]
                                FIELD [3759,3787]
                                    String: "name" [3759,3765]
                                    STRING [3766,3787]
                                        String: "Checkout repository" [3766,3787]
                                FIELD [3788,3816]
                                    String: "uses" [3788,3794]
                                    STRING [3795,3816]
                                        String: "actions/checkout@v2" [3795,3816]
                            OBJECT [3818,4094]
                                FIELD [3819,3864]
                                    String: "name" [3819,3825]
                                    STRING [3826,3864]
                                        String: "Set CHANNEL (only for tagged pushes)" [3826,3864]
                                FIELD [3865,3952]
                                    String: "if" [3865,3869]
                                    STRING [3870,3952]
                                        String: "${{ github.event_name == 'push' && startsWith(github.event.ref, 'refs/tags/') }}" [3870,3952]
                                FIELD [3953,4093]
                                    String: "run" [3953,3958]
                                    STRING [3959,4093]
                                        String: "# reference ends with an RC suffix\nif [[ ${GITHUB_REF_NAME} = *-rc[0-9]* ]]; then\n  echo \"CHANNEL=test\" >> \"$GITHUB_ENV\"\nfi\n" [3959,4093]
                            OBJECT [4095,4332]
                                FIELD [4096,4138]
                                    String: "name" [4096,4102]
                                    STRING [4103,4138]
                                        String: "Set CHANNEL Release (for release)" [4103,4138]
                                FIELD [4139,4280]
                                    String: "if" [4139,4143]
                                    STRING [4144,4280]
                                        String: "${{ (github.event_name == 'pull_request' && startsWith(github.base_ref, 'release')) || startsWith(github.ref, 'refs/heads/release') }}" [4144,4280]
                                FIELD [4281,4331]
                                    String: "run" [4281,4286]
                                    STRING [4287,4331]
                                        String: "echo \"CHANNEL=test\" >> \"$GITHUB_ENV\"\n" [4287,4331]
                            OBJECT [4333,4530]
                                FIELD [4334,4391]
                                    String: "name" [4334,4340]
                                    STRING [4341,4391]
                                        String: "Install conda-build and purge previous artifacts" [4341,4391]
                                FIELD [4392,4427]
                                    String: "shell" [4392,4399]
                                    STRING [4400,4427]
                                        String: "arch -arch arm64 bash {0}" [4400,4427]
                                FIELD [4428,4529]
                                    String: "run" [4428,4433]
                                    STRING [4434,4529]
                                        String: ". ~/miniconda3/etc/profile.d/conda.sh\nconda install -yq conda-build\nconda build purge-all\n" [4434,4529]
                            OBJECT [4531,5286]
                                FIELD [4532,4573]
                                    String: "name" [4532,4538]
                                    STRING [4539,4573]
                                        String: "Build TorchText M1 conda package" [4539,4573]
                                FIELD [4574,4609]
                                    String: "shell" [4574,4581]
                                    STRING [4582,4609]
                                        String: "arch -arch arm64 bash {0}" [4582,4609]
                                FIELD [4610,4721]
                                    String: "env" [4610,4615]
                                    OBJECT [4616,4721]
                                        FIELD [4617,4660]
                                            String: "ENV_NAME" [4617,4627]
                                            STRING [4628,4660]
                                                String: "conda-env-${{ github.run_id }}" [4628,4660]
                                        FIELD [4661,4701]
                                            String: "PYTHON_VERSION" [4661,4677]
                                            STRING [4678,4701]
                                                String: "${{ matrix.py_vers }}" [4678,4701]
                                        FIELD [4702,4720]
                                            String: "CU_VERSION" [4702,4714]
                                            STRING [4715,4720]
                                                String: "cpu" [4715,4720]
                                FIELD [4722,5285]
                                    String: "run" [4722,4727]
                                    STRING [4728,5285]
                                        String: ". ~/miniconda3/etc/profile.d/conda.sh\nset -ex\n. packaging/pkg_helpers.bash\n\nif [[ $CHANNEL == \"test\" ]]; then\n  setup_base_build_version\n  export CONDA_CHANNEL_FLAGS=\"-c pytorch-test\"\nelse\n  setup_build_version\nfi\nexport BUILD_TYPE=\"conda\"\nexport NO_CUDA_PACKAGE=1\nexport SOURCE_ROOT_DIR=\"$PWD\"\n\nsetup_conda_pytorch_constraint\nexport SOURCE_ROOT_DIR=$(pwd)\nconda build \\\n  -c defaults \\\n  $CONDA_CHANNEL_FLAGS \\\n  --no-anaconda-upload \\\n  --python \"$PYTHON_VERSION\" \\\n  --output-folder=dist/ \\\n  packaging/torchtext\n" [4728,5285]
                            OBJECT [5287,5442]
                                FIELD [5288,5321]
                                    String: "name" [5288,5294]
                                    STRING [5295,5321]
                                        String: "Upload package to GitHub" [5295,5321]
                                FIELD [5322,5357]
                                    String: "uses" [5322,5328]
                                    STRING [5329,5357]
                                        String: "actions/upload-artifact@v3" [5329,5357]
                                FIELD [5358,5441]
                                    String: "with" [5358,5364]
                                    OBJECT [5365,5441]
                                        FIELD [5366,5425]
                                            String: "name" [5366,5372]
                                            STRING [5373,5425]
                                                String: "torchtext-py${{ matrix.py_vers }}-macos11-m1-conda" [5373,5425]
                                        FIELD [5426,5440]
                                            String: "path" [5426,5432]
                                            STRING [5433,5440]
                                                String: "dist/" [5433,5440]
                            OBJECT [5443,5966]
                                FIELD [5444,5476]
                                    String: "name" [5444,5450]
                                    STRING [5451,5476]
                                        String: "Upload package to conda" [5451,5476]
                                FIELD [5477,5610]
                                    String: "if" [5477,5481]
                                    STRING [5482,5610]
                                        String: "${{ github.event_name == 'push' && (github.event.ref == 'refs/heads/nightly' || startsWith(github.event.ref, 'refs/tags/')) }}" [5482,5610]
                                FIELD [5611,5646]
                                    String: "shell" [5611,5618]
                                    STRING [5619,5646]
                                        String: "arch -arch arm64 bash {0}" [5619,5646]
                                FIELD [5647,5719]
                                    String: "env" [5647,5652]
                                    OBJECT [5653,5719]
                                        FIELD [5654,5718]
                                            String: "CONDA_PYTORCHBOT_TOKEN" [5654,5678]
                                            STRING [5679,5718]
                                                String: "${{ secrets.CONDA_PYTORCHBOT_TOKEN }}" [5679,5718]
                                FIELD [5720,5965]
                                    String: "run" [5720,5725]
                                    STRING [5726,5965]
                                        String: ". ~/miniconda3/etc/profile.d/conda.sh\nconda install -yq anaconda-client\nset -x\nanaconda  -t \"${CONDA_PYTORCHBOT_TOKEN}\" upload ~/miniconda3/conda-bld/osx-arm64/*.tar.bz2 -u \"pytorch-${CHANNEL}\" --label main --no-progress --force\n" [5726,5965]
    FIELD [5970,6146]
        String: "concurrency" [5970,5983]
        OBJECT [5984,6146]
            FIELD [5985,6119]
                String: "group" [5985,5992]
                STRING [5993,6119]
                    String: "${{ github.workflow }}-${{ github.event.pull_request.number || github.sha }}-${{ github.event_name == 'workflow_dispatch' }}" [5993,6119]
            FIELD [6120,6145]
                String: "cancel-in-progress" [6120,6140]
                TRUE [6141,6145]