OBJECT [0,4387]
    FIELD [1,20]
        String: "name" [1,7]
        STRING [8,20]
            String: "MacRelease" [8,20]
    FIELD [21,172]
        String: "on" [21,25]
        OBJECT [26,172]
            FIELD [27,64]
                String: "schedule" [27,37]
                ARRAY [38,64]
                    OBJECT [39,63]
                        FIELD [40,62]
                            String: "cron" [40,46]
                            STRING [47,62]
                                String: "00 00 * * MON" [47,62]
            FIELD [65,101]
                String: "push" [65,71]
                OBJECT [72,101]
                    FIELD [73,100]
                        String: "branches" [73,83]
                        ARRAY [84,100]
                            STRING [85,91]
                                String: "main" [85,91]
                            STRING [92,99]
                                String: "rel-*" [92,99]
            FIELD [102,146]
                String: "pull_request" [102,116]
                OBJECT [117,146]
                    FIELD [118,145]
                        String: "branches" [118,128]
                        ARRAY [129,145]
                            STRING [130,136]
                                String: "main" [130,136]
                            STRING [137,144]
                                String: "rel-*" [137,144]
            FIELD [147,171]
                String: "workflow_dispatch" [147,166]
                NULL [167,171]
    FIELD [173,213]
        String: "env" [173,178]
        OBJECT [179,213]
            FIELD [180,212]
                String: "MACOSX_DEPLOYMENT_TARGET" [180,206]
                NUMBER [207,212]
                    Number: 10.12 [207,212]
    FIELD [214,4386]
        String: "jobs" [214,220]
        OBJECT [221,4386]
            FIELD [222,4385]
                String: "build" [222,229]
                OBJECT [230,4385]
                    FIELD [231,386]
                        String: "if" [231,235]
                        STRING [236,386]
                            String: "github.event_name != 'pull_request' || startsWith( github.base_ref, 'rel-') || contains( github.event.pull_request.labels.*.name, 'run release CIs')" [236,386]
                    FIELD [387,411]
                        String: "runs-on" [387,396]
                        STRING [397,411]
                            String: "macos-latest" [397,411]
                    FIELD [412,553]
                        String: "strategy" [412,422]
                        OBJECT [423,553]
                            FIELD [424,552]
                                String: "matrix" [424,432]
                                OBJECT [433,552]
                                    FIELD [434,477]
                                        String: "python-version" [434,450]
                                        ARRAY [451,477]
                                            STRING [452,457]
                                                String: "3.7" [452,457]
                                            STRING [458,463]
                                                String: "3.8" [458,463]
                                            STRING [464,469]
                                                String: "3.9" [464,469]
                                            STRING [470,476]
                                                String: "3.10" [470,476]
                                    FIELD [478,505]
                                        String: "host-architecture" [478,497]
                                        ARRAY [498,505]
                                            STRING [499,504]
                                                String: "x64" [499,504]
                                    FIELD [506,551]
                                        String: "target-architecture" [506,527]
                                        ARRAY [528,551]
                                            STRING [529,537]
                                                String: "x86_64" [529,537]
                                            STRING [538,550]
                                                String: "universal2" [538,550]
                    FIELD [554,4384]
                        String: "steps" [554,561]
                        ARRAY [562,4384]
                            OBJECT [563,593]
                                FIELD [564,592]
                                    String: "uses" [564,570]
                                    STRING [571,592]
                                        String: "actions/checkout@v3" [571,592]
                            OBJECT [594,880]
                                FIELD [595,623]
                                    String: "name" [595,601]
                                    STRING [602,623]
                                        String: "Checkout submodules" [602,623]
                                FIELD [624,638]
                                    String: "shell" [624,631]
                                    STRING [632,638]
                                        String: "bash" [632,638]
                                FIELD [639,879]
                                    String: "run" [639,644]
                                    STRING [645,879]
                                        String: "auth_header=\"$(git config --local --get http.https://github.com/.extraheader)\"\ngit submodule sync --recursive\ngit -c \"http.extraheader=$auth_header\" -c protocol.version=2 submodule update --init --force --recursive --depth=1\n" [645,879]
                            OBJECT [881,1073]
                                FIELD [882,933]
                                    String: "name" [882,888]
                                    STRING [889,933]
                                        String: "Set up Python ${{ matrix.python-version }}" [889,933]
                                FIELD [934,966]
                                    String: "uses" [934,940]
                                    STRING [941,966]
                                        String: "actions/setup-python@v4" [941,966]
                                FIELD [967,1072]
                                    String: "with" [967,973]
                                    OBJECT [974,1072]
                                        FIELD [975,1022]
                                            String: "python-version" [975,991]
                                            STRING [992,1022]
                                                String: "${{ matrix.python-version }}" [992,1022]
                                        FIELD [1023,1071]
                                            String: "architecture" [1023,1037]
                                            STRING [1038,1071]
                                                String: "${{ matrix.host-architecture }}" [1038,1071]
                            OBJECT [1074,1359]
                                FIELD [1075,1111]
                                    String: "name" [1075,1081]
                                    STRING [1082,1111]
                                        String: "Install Python dependencies" [1082,1111]
                                FIELD [1112,1358]
                                    String: "run" [1112,1117]
                                    STRING [1118,1358]
                                        String: "python -m pip install -q --upgrade pip\npython -m pip install -q -r requirements-release.txt\n# Mac cannot work with Python Protobuf 3.18.3 https://github.com/protocolbuffers/protobuf/issues/10691\npython -m pip install protobuf==3.19.5\n" [1118,1358]
                            OBJECT [1360,2379]
                                FIELD [1361,1393]
                                    String: "name" [1361,1367]
                                    STRING [1368,1393]
                                        String: "Build wheel and install" [1368,1393]
                                FIELD [1394,1442]
                                    String: "env" [1394,1399]
                                    OBJECT [1400,1442]
                                        FIELD [1401,1413]
                                            String: "CC" [1401,1405]
                                            STRING [1406,1413]
                                                String: "clang" [1406,1413]
                                        FIELD [1414,1429]
                                            String: "CXX" [1414,1419]
                                            STRING [1420,1429]
                                                String: "clang++" [1420,1429]
                                        FIELD [1430,1441]
                                            String: "ONNX_ML" [1430,1439]
                                            NUMBER [1440,1441]
                                                Number: 1 [1440,1441]
                                FIELD [1443,2378]
                                    String: "run" [1443,1448]
                                    STRING [1449,2378]
                                        String: "# Install Protobuf from source\nexport NUM_CORES=`sysctl -n hw.logicalcpu`\nif [ '${{ matrix.target-architecture }}' == 'x86_64' ]; then\n  export CMAKE_OSX_ARCHITECTURES=x86_64\nelif [ '${{ matrix.target-architecture }}' == 'universal2' ]; then\n  export CMAKE_OSX_ARCHITECTURES='arm64;x86_64'\nfi\nsource workflow_scripts/protobuf/build_protobuf_unix.sh $NUM_CORES $(pwd)/protobuf/protobuf_install\nexport CMAKE_ARGS=\"-DONNX_USE_LITE_PROTO=ON\"\n# Currently GitHub Action agent is using macos-11, use -p to force change the final MACOSX_DEPLOYMENT_TARGET\n# Change -p if MACOSX_DEPLOYMENT_TARGET is different\nif [ '${{ github.event_name }}' == 'schedule' ]; then\n  python setup.py bdist_wheel -p macosx_10_12_${{ matrix.target-architecture }} --weekly_build\nelse\n  python setup.py bdist_wheel -p macosx_10_12_${{ matrix.target-architecture }}\nfi\nfor file in dist/*.whl; do python -m pip install --upgrade $file; done\n" [1449,2378]
                            OBJECT [2380,2432]
                                FIELD [2381,2414]
                                    String: "name" [2381,2387]
                                    STRING [2388,2414]
                                        String: "Test the installed wheel" [2388,2414]
                                FIELD [2415,2431]
                                    String: "run" [2415,2420]
                                    STRING [2421,2431]
                                        String: "pytest\n" [2421,2431]
                            OBJECT [2433,2509]
                                FIELD [2434,2469]
                                    String: "uses" [2434,2440]
                                    STRING [2441,2469]
                                        String: "actions/upload-artifact@v1" [2441,2469]
                                FIELD [2470,2508]
                                    String: "with" [2470,2476]
                                    OBJECT [2477,2508]
                                        FIELD [2478,2493]
                                            String: "name" [2478,2484]
                                            STRING [2485,2493]
                                                String: "wheels" [2485,2493]
                                        FIELD [2494,2507]
                                            String: "path" [2494,2500]
                                            STRING [2501,2507]
                                                String: "dist" [2501,2507]
                            OBJECT [2510,2754]
                                FIELD [2511,2551]
                                    String: "name" [2511,2517]
                                    STRING [2518,2551]
                                        String: "Upload wheel to TestPyPI weekly" [2518,2551]
                                FIELD [2552,2590]
                                    String: "if" [2552,2556]
                                    STRING [2557,2590]
                                        String: "github.event_name == 'schedule'" [2557,2590]
                                FIELD [2591,2753]
                                    String: "run" [2591,2596]
                                    STRING [2597,2753]
                                        String: "twine upload --verbose dist/*.whl --repository-url https://test.pypi.org/legacy/ -u ${{ secrets.TESTPYPI_USERNAME }} -p ${{ secrets.TESTPYPI_PASSWORD }}\n" [2597,2753]
                            OBJECT [2755,2981]
                                FIELD [2756,2798]
                                    String: "name" [2756,2762]
                                    STRING [2763,2798]
                                        String: "Verify ONNX with the latest numpy" [2763,2798]
                                FIELD [2799,2821]
                                    String: "if" [2799,2803]
                                    STRING [2804,2821]
                                        String: "${{ always() }}" [2804,2821]
                                FIELD [2822,2980]
                                    String: "run" [2822,2827]
                                    STRING [2828,2980]
                                        String: "python -m pip uninstall -y numpy onnx && python -m pip install numpy\nfor file in dist/*.whl; do python -m pip install --upgrade $file; done\npytest\n" [2828,2980]
                            OBJECT [2982,3217]
                                FIELD [2983,3028]
                                    String: "name" [2983,2989]
                                    STRING [2990,3028]
                                        String: "Verify ONNX with the latest protobuf" [2990,3028]
                                FIELD [3029,3051]
                                    String: "if" [3029,3033]
                                    STRING [3034,3051]
                                        String: "${{ always() }}" [3034,3051]
                                FIELD [3052,3216]
                                    String: "run" [3052,3057]
                                    STRING [3058,3216]
                                        String: "python -m pip uninstall -y protobuf onnx && python -m pip install protobuf\nfor file in dist/*.whl; do python -m pip install --upgrade $file; done\npytest\n" [3058,3216]
                            OBJECT [3218,3496]
                                FIELD [3219,3299]
                                    String: "name" [3219,3225]
                                    STRING [3226,3299]
                                        String: "Verify ONNX with the minimum supported protobuf (from requirements.txt)" [3226,3299]
                                FIELD [3300,3322]
                                    String: "if" [3300,3304]
                                    STRING [3305,3322]
                                        String: "${{ always() }}" [3305,3322]
                                FIELD [3323,3495]
                                    String: "run" [3323,3328]
                                    STRING [3329,3495]
                                        String: "python -m pip uninstall -y protobuf onnx && python -m pip install protobuf==3.12.2\nfor file in dist/*.whl; do python -m pip install --upgrade $file; done\npytest\n" [3329,3495]
                            OBJECT [3497,3632]
                                FIELD [3498,3549]
                                    String: "name" [3498,3504]
                                    STRING [3505,3549]
                                        String: "Verify ONNX with ONNX Runtime PyPI package" [3505,3549]
                                FIELD [3550,3631]
                                    String: "run" [3550,3555]
                                    STRING [3556,3631]
                                        String: "python -m pip install -q onnxruntime\npython onnx/test/test_with_ort.py\n" [3556,3631]
                            OBJECT [3633,4028]
                                FIELD [3634,3698]
                                    String: "name" [3634,3640]
                                    STRING [3641,3698]
                                        String: "Build and upload source distribution to TestPyPI weekly" [3641,3698]
                                FIELD [3699,3772]
                                    String: "if" [3699,3703]
                                    STRING [3704,3772]
                                        String: "github.event_name == 'schedule' && matrix.python-version == '3.10'" [3704,3772]
                                FIELD [3773,4027]
                                    String: "run" [3773,3778]
                                    STRING [3779,4027]
                                        String: "# Build and upload source distribution to TestPyPI\ngit clean -xdf\npython setup.py sdist --weekly_build\ntwine upload dist/* --repository-url https://test.pypi.org/legacy/ -u ${{ secrets.TESTPYPI_USERNAME }} -p ${{ secrets.TESTPYPI_PASSWORD }}\n" [3779,4027]
                            OBJECT [4029,4383]
                                FIELD [4030,4077]
                                    String: "name" [4030,4036]
                                    STRING [4037,4077]
                                        String: "Test source distribution from TestPyPI" [4037,4077]
                                FIELD [4078,4151]
                                    String: "if" [4078,4082]
                                    STRING [4083,4151]
                                        String: "github.event_name == 'schedule' && matrix.python-version == '3.10'" [4083,4151]
                                FIELD [4152,4382]
                                    String: "run" [4152,4157]
                                    STRING [4158,4382]
                                        String: "python -m pip uninstall -y onnx\npython -m pip install setuptools\npython -m pip install --index-url https://test.pypi.org/simple --use-deprecated=legacy-resolver --no-use-pep517 --no-binary onnx-weekly onnx-weekly\npytest" [4158,4382]