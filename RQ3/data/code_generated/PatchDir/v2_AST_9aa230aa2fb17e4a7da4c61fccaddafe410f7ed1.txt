OBJECT [0,9453]
    FIELD [1,35]
        String: "name" [1,7]
        STRING [8,35]
            String: "Self-hosted runner (push)" [8,35]
    FIELD [36,184]
        String: "on" [36,40]
        OBJECT [41,184]
            FIELD [42,156]
                String: "push" [42,48]
                OBJECT [49,156]
                    FIELD [50,86]
                        String: "branches" [50,60]
                        ARRAY [61,86]
                            STRING [62,71]
                                String: "push-ci" [62,71]
                            STRING [72,78]
                                String: "ci_*" [72,78]
                            STRING [79,85]
                                String: "ci-*" [79,85]
                    FIELD [87,155]
                        String: "paths" [87,94]
                        ARRAY [95,155]
                            STRING [96,104]
                                String: "src/**" [96,104]
                            STRING [105,115]
                                String: "tests/**" [105,115]
                            STRING [116,128]
                                String: ".github/**" [116,128]
                            STRING [129,143]
                                String: "templates/**" [129,143]
                            STRING [144,154]
                                String: "utils/**" [144,154]
            FIELD [157,183]
                String: "repository_dispatch" [157,178]
                NULL [179,183]
    FIELD [185,360]
        String: "env" [185,190]
        OBJECT [191,360]
            FIELD [192,214]
                String: "HF_HOME" [192,201]
                STRING [202,214]
                    String: "/mnt/cache" [202,214]
            FIELD [215,240]
                String: "TRANSFORMERS_IS_CI" [215,235]
                TRUE [236,240]
            FIELD [241,260]
                String: "OMP_NUM_THREADS" [241,258]
                NUMBER [259,260]
                    Number: 8 [259,260]
            FIELD [261,280]
                String: "MKL_NUM_THREADS" [261,278]
                NUMBER [279,280]
                    Number: 8 [279,280]
            FIELD [281,300]
                String: "PYTEST_TIMEOUT" [281,297]
                NUMBER [298,300]
                    Number: 60 [298,300]
            FIELD [301,333]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [301,328]
                TRUE [329,333]
            FIELD [334,359]
                String: "RUN_PT_TF_CROSS_TESTS" [334,357]
                NUMBER [358,359]
                    Number: 1 [358,359]
    FIELD [361,9452]
        String: "jobs" [361,367]
        OBJECT [368,9452]
            FIELD [369,1649]
                String: "setup" [369,376]
                OBJECT [377,1649]
                    FIELD [378,392]
                        String: "name" [378,384]
                        STRING [385,392]
                            String: "Setup" [385,392]
                    FIELD [393,418]
                        String: "runs-on" [393,402]
                        STRING [403,418]
                            String: "ubuntu-latest" [403,418]
                    FIELD [419,534]
                        String: "outputs" [419,428]
                        OBJECT [429,534]
                            FIELD [430,479]
                                String: "matrix" [430,438]
                                STRING [439,479]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [439,479]
                            FIELD [480,533]
                                String: "test_map" [480,490]
                                STRING [491,533]
                                    String: "${{ steps.set-matrix.outputs.test_map }}" [491,533]
                    FIELD [535,1648]
                        String: "steps" [535,542]
                        ARRAY [543,1648]
                            OBJECT [544,630]
                                FIELD [545,575]
                                    String: "name" [545,551]
                                    STRING [552,575]
                                        String: "Checkout transformers" [552,575]
                                FIELD [576,604]
                                    String: "uses" [576,582]
                                    STRING [583,604]
                                        String: "actions/checkout@v2" [583,604]
                                FIELD [605,629]
                                    String: "with" [605,611]
                                    OBJECT [612,629]
                                        FIELD [613,628]
                                            String: "fetch-depth" [613,626]
                                            NUMBER [627,628]
                                                Number: 2 [627,628]
                            OBJECT [631,733]
                                FIELD [632,648]
                                    String: "name" [632,638]
                                    STRING [639,648]
                                        String: "Cleanup" [639,648]
                                FIELD [649,732]
                                    String: "run" [649,654]
                                    STRING [655,732]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [655,732]
                            OBJECT [734,892]
                                FIELD [735,766]
                                    String: "name" [735,741]
                                    STRING [742,766]
                                        String: "Fetch the tests to run" [742,766]
                                FIELD [767,891]
                                    String: "run" [767,772]
                                    STRING [773,891]
                                        String: "pip install --upgrade git-python\npython utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [773,891]
                            OBJECT [893,1021]
                                FIELD [894,923]
                                    String: "name" [894,900]
                                    STRING [901,923]
                                        String: "Report fetched tests" [901,923]
                                FIELD [924,959]
                                    String: "uses" [924,930]
                                    STRING [931,959]
                                        String: "actions/upload-artifact@v2" [931,959]
                                FIELD [960,1020]
                                    String: "with" [960,966]
                                    OBJECT [967,1020]
                                        FIELD [968,989]
                                            String: "name" [968,974]
                                            STRING [975,989]
                                                String: "test_fetched" [975,989]
                                        FIELD [990,1019]
                                            String: "path" [990,996]
                                            STRING [997,1019]
                                                String: "test_preparation.txt" [997,1019]
                            OBJECT [1022,1647]
                                FIELD [1023,1040]
                                    String: "id" [1023,1027]
                                    STRING [1028,1040]
                                        String: "set-matrix" [1028,1040]
                                FIELD [1041,1076]
                                    String: "name" [1041,1047]
                                    STRING [1048,1076]
                                        String: "Organize tests into models" [1048,1076]
                                FIELD [1077,1646]
                                    String: "run" [1077,1082]
                                    STRING [1083,1646]
                                        String: "if [ -f test_map.json ]; then\n    keys=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); d = list(test_map.keys()); print(d)')\n    test_map=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); print(test_map)')\nelse\n    keys=$(python3 -c 'keys = [\"dummy\"]; print(keys)')\n    test_map=$(python3 -c 'test_map = {\"dummy\": []}; print(test_map)')\nfi\necho $keys\necho $test_map\necho \"::set-output name=matrix::$keys\"\necho \"::set-output name=test_map::$test_map\"\n" [1083,1646]
            FIELD [1650,3506]
                String: "run_tests_single_gpu" [1650,1672]
                OBJECT [1673,3506]
                    FIELD [1674,1694]
                        String: "name" [1674,1680]
                        STRING [1681,1694]
                            String: "Model tests" [1681,1694]
                    FIELD [1695,1710]
                        String: "needs" [1695,1702]
                        STRING [1703,1710]
                            String: "setup" [1703,1710]
                    FIELD [1711,1781]
                        String: "if" [1711,1715]
                        STRING [1716,1781]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [1716,1781]
                    FIELD [1782,1909]
                        String: "strategy" [1782,1792]
                        OBJECT [1793,1909]
                            FIELD [1794,1811]
                                String: "fail-fast" [1794,1805]
                                FALSE [1806,1811]
                            FIELD [1812,1908]
                                String: "matrix" [1812,1820]
                                OBJECT [1821,1908]
                                    FIELD [1822,1877]
                                        String: "folders" [1822,1831]
                                        STRING [1832,1877]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [1832,1877]
                                    FIELD [1878,1907]
                                        String: "machine_type" [1878,1892]
                                        ARRAY [1893,1907]
                                            STRING [1894,1906]
                                                String: "single-gpu" [1894,1906]
                    FIELD [1910,1977]
                        String: "runs-on" [1910,1919]
                        ARRAY [1920,1977]
                            STRING [1921,1934]
                                String: "self-hosted" [1921,1934]
                            STRING [1935,1947]
                                String: "docker-gpu" [1935,1947]
                            STRING [1948,1976]
                                String: "${{ matrix.machine_type }}" [1948,1976]
                    FIELD [1978,2138]
                        String: "container" [1978,1989]
                        OBJECT [1990,2138]
                            FIELD [1991,2040]
                                String: "image" [1991,1998]
                                STRING [1999,2040]
                                    String: "huggingface/transformers-all-latest-gpu" [1999,2040]
                            FIELD [2041,2137]
                                String: "options" [2041,2050]
                                STRING [2051,2137]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [2051,2137]
                    FIELD [2139,3505]
                        String: "steps" [2139,2146]
                        ARRAY [2147,3505]
                            OBJECT [2148,2494]
                                FIELD [2149,2191]
                                    String: "name" [2149,2155]
                                    STRING [2156,2191]
                                        String: "Echo folder ${{ matrix.folders }}" [2156,2191]
                                FIELD [2192,2206]
                                    String: "shell" [2192,2199]
                                    STRING [2200,2206]
                                        String: "bash" [2200,2206]
                                FIELD [2207,2493]
                                    String: "run" [2207,2212]
                                    STRING [2213,2493]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [2213,2493]
                            OBJECT [2495,2606]
                                FIELD [2496,2517]
                                    String: "name" [2496,2502]
                                    STRING [2503,2517]
                                        String: "Update clone" [2503,2517]
                                FIELD [2518,2553]
                                    String: "working-directory" [2518,2537]
                                    STRING [2538,2553]
                                        String: "/transformers" [2538,2553]
                                FIELD [2554,2605]
                                    String: "run" [2554,2559]
                                    STRING [2560,2605]
                                        String: "git fetch && git checkout ${{ github.sha }}" [2560,2605]
                            OBJECT [2607,2649]
                                FIELD [2608,2627]
                                    String: "name" [2608,2614]
                                    STRING [2615,2627]
                                        String: "NVIDIA-SMI" [2615,2627]
                                FIELD [2628,2648]
                                    String: "run" [2628,2633]
                                    STRING [2634,2648]
                                        String: "nvidia-smi\n" [2634,2648]
                            OBJECT [2650,2745]
                                FIELD [2651,2671]
                                    String: "name" [2651,2657]
                                    STRING [2658,2671]
                                        String: "Environment" [2658,2671]
                                FIELD [2672,2707]
                                    String: "working-directory" [2672,2691]
                                    STRING [2692,2707]
                                        String: "/transformers" [2692,2707]
                                FIELD [2708,2744]
                                    String: "run" [2708,2713]
                                    STRING [2714,2744]
                                        String: "python3 utils/print_env.py\n" [2714,2744]
                            OBJECT [2746,3019]
                                FIELD [2747,2794]
                                    String: "name" [2747,2753]
                                    STRING [2754,2794]
                                        String: "Run all non-slow selected tests on GPU" [2754,2794]
                                FIELD [2795,2830]
                                    String: "working-directory" [2795,2814]
                                    STRING [2815,2830]
                                        String: "/transformers" [2815,2830]
                                FIELD [2831,3018]
                                    String: "run" [2831,2836]
                                    STRING [2837,3018]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [2837,3018]
                            OBJECT [3020,3213]
                                FIELD [3021,3051]
                                    String: "name" [3021,3027]
                                    STRING [3028,3051]
                                        String: "Failure short reports" [3028,3051]
                                FIELD [3052,3075]
                                    String: "if" [3052,3056]
                                    STRING [3057,3075]
                                        String: "${{ failure() }}" [3057,3075]
                                FIELD [3076,3100]
                                    String: "continue-on-error" [3076,3095]
                                    TRUE [3096,3100]
                                FIELD [3101,3212]
                                    String: "run" [3101,3106]
                                    STRING [3107,3212]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [3107,3212]
                            OBJECT [3214,3504]
                                FIELD [3215,3252]
                                    String: "name" [3215,3221]
                                    STRING [3222,3252]
                                        String: "Test suite reports artifacts" [3222,3252]
                                FIELD [3253,3275]
                                    String: "if" [3253,3257]
                                    STRING [3258,3275]
                                        String: "${{ always() }}" [3258,3275]
                                FIELD [3276,3311]
                                    String: "uses" [3276,3282]
                                    STRING [3283,3311]
                                        String: "actions/upload-artifact@v2" [3283,3311]
                                FIELD [3312,3503]
                                    String: "with" [3312,3318]
                                    OBJECT [3319,3503]
                                        FIELD [3320,3412]
                                            String: "name" [3320,3326]
                                            STRING [3327,3412]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [3327,3412]
                                        FIELD [3413,3502]
                                            String: "path" [3413,3419]
                                            STRING [3420,3502]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [3420,3502]
            FIELD [3507,5399]
                String: "run_tests_multi_gpu" [3507,3528]
                OBJECT [3529,5399]
                    FIELD [3530,3550]
                        String: "name" [3530,3536]
                        STRING [3537,3550]
                            String: "Model tests" [3537,3550]
                    FIELD [3551,3566]
                        String: "needs" [3551,3558]
                        STRING [3559,3566]
                            String: "setup" [3559,3566]
                    FIELD [3567,3637]
                        String: "if" [3567,3571]
                        STRING [3572,3637]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [3572,3637]
                    FIELD [3638,3764]
                        String: "strategy" [3638,3648]
                        OBJECT [3649,3764]
                            FIELD [3650,3667]
                                String: "fail-fast" [3650,3661]
                                FALSE [3662,3667]
                            FIELD [3668,3763]
                                String: "matrix" [3668,3676]
                                OBJECT [3677,3763]
                                    FIELD [3678,3733]
                                        String: "folders" [3678,3687]
                                        STRING [3688,3733]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [3688,3733]
                                    FIELD [3734,3762]
                                        String: "machine_type" [3734,3748]
                                        ARRAY [3749,3762]
                                            STRING [3750,3761]
                                                String: "multi-gpu" [3750,3761]
                    FIELD [3765,3832]
                        String: "runs-on" [3765,3774]
                        ARRAY [3775,3832]
                            STRING [3776,3789]
                                String: "self-hosted" [3776,3789]
                            STRING [3790,3802]
                                String: "docker-gpu" [3790,3802]
                            STRING [3803,3831]
                                String: "${{ matrix.machine_type }}" [3803,3831]
                    FIELD [3833,3995]
                        String: "container" [3833,3844]
                        OBJECT [3845,3995]
                            FIELD [3846,3895]
                                String: "image" [3846,3853]
                                STRING [3854,3895]
                                    String: "huggingface/transformers-all-latest-gpu" [3854,3895]
                            FIELD [3896,3994]
                                String: "options" [3896,3905]
                                STRING [3906,3994]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [3906,3994]
                    FIELD [3996,5398]
                        String: "steps" [3996,4003]
                        ARRAY [4004,5398]
                            OBJECT [4005,4351]
                                FIELD [4006,4048]
                                    String: "name" [4006,4012]
                                    STRING [4013,4048]
                                        String: "Echo folder ${{ matrix.folders }}" [4013,4048]
                                FIELD [4049,4063]
                                    String: "shell" [4049,4056]
                                    STRING [4057,4063]
                                        String: "bash" [4057,4063]
                                FIELD [4064,4350]
                                    String: "run" [4064,4069]
                                    STRING [4070,4350]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [4070,4350]
                            OBJECT [4352,4463]
                                FIELD [4353,4374]
                                    String: "name" [4353,4359]
                                    STRING [4360,4374]
                                        String: "Update clone" [4360,4374]
                                FIELD [4375,4410]
                                    String: "working-directory" [4375,4394]
                                    STRING [4395,4410]
                                        String: "/transformers" [4395,4410]
                                FIELD [4411,4462]
                                    String: "run" [4411,4416]
                                    STRING [4417,4462]
                                        String: "git fetch && git checkout ${{ github.sha }}" [4417,4462]
                            OBJECT [4464,4506]
                                FIELD [4465,4484]
                                    String: "name" [4465,4471]
                                    STRING [4472,4484]
                                        String: "NVIDIA-SMI" [4472,4484]
                                FIELD [4485,4505]
                                    String: "run" [4485,4490]
                                    STRING [4491,4505]
                                        String: "nvidia-smi\n" [4491,4505]
                            OBJECT [4507,4602]
                                FIELD [4508,4528]
                                    String: "name" [4508,4514]
                                    STRING [4515,4528]
                                        String: "Environment" [4515,4528]
                                FIELD [4529,4564]
                                    String: "working-directory" [4529,4548]
                                    STRING [4549,4564]
                                        String: "/transformers" [4549,4564]
                                FIELD [4565,4601]
                                    String: "run" [4565,4570]
                                    STRING [4571,4601]
                                        String: "python3 utils/print_env.py\n" [4571,4601]
                            OBJECT [4603,4912]
                                FIELD [4604,4651]
                                    String: "name" [4604,4610]
                                    STRING [4611,4651]
                                        String: "Run all non-slow selected tests on GPU" [4611,4651]
                                FIELD [4652,4687]
                                    String: "env" [4652,4657]
                                    OBJECT [4658,4687]
                                        FIELD [4659,4686]
                                            String: "MKL_SERVICE_FORCE_INTEL" [4659,4684]
                                            NUMBER [4685,4686]
                                                Number: 1 [4685,4686]
                                FIELD [4688,4723]
                                    String: "working-directory" [4688,4707]
                                    STRING [4708,4723]
                                        String: "/transformers" [4708,4723]
                                FIELD [4724,4911]
                                    String: "run" [4724,4729]
                                    STRING [4730,4911]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [4730,4911]
                            OBJECT [4913,5106]
                                FIELD [4914,4944]
                                    String: "name" [4914,4920]
                                    STRING [4921,4944]
                                        String: "Failure short reports" [4921,4944]
                                FIELD [4945,4968]
                                    String: "if" [4945,4949]
                                    STRING [4950,4968]
                                        String: "${{ failure() }}" [4950,4968]
                                FIELD [4969,4993]
                                    String: "continue-on-error" [4969,4988]
                                    TRUE [4989,4993]
                                FIELD [4994,5105]
                                    String: "run" [4994,4999]
                                    STRING [5000,5105]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [5000,5105]
                            OBJECT [5107,5397]
                                FIELD [5108,5145]
                                    String: "name" [5108,5114]
                                    STRING [5115,5145]
                                        String: "Test suite reports artifacts" [5115,5145]
                                FIELD [5146,5168]
                                    String: "if" [5146,5150]
                                    STRING [5151,5168]
                                        String: "${{ always() }}" [5151,5168]
                                FIELD [5169,5204]
                                    String: "uses" [5169,5175]
                                    STRING [5176,5204]
                                        String: "actions/upload-artifact@v2" [5176,5204]
                                FIELD [5205,5396]
                                    String: "with" [5205,5211]
                                    OBJECT [5212,5396]
                                        FIELD [5213,5305]
                                            String: "name" [5213,5219]
                                            STRING [5220,5305]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [5220,5305]
                                        FIELD [5306,5395]
                                            String: "path" [5306,5312]
                                            STRING [5313,5395]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [5313,5395]
            FIELD [5400,6921]
                String: "run_tests_torch_cuda_extensions_single_gpu" [5400,5444]
                OBJECT [5445,6921]
                    FIELD [5446,5481]
                        String: "name" [5446,5452]
                        STRING [5453,5481]
                            String: "Torch CUDA extension tests" [5453,5481]
                    FIELD [5482,5497]
                        String: "needs" [5482,5489]
                        STRING [5490,5497]
                            String: "setup" [5490,5497]
                    FIELD [5498,5626]
                        String: "if" [5498,5502]
                        STRING [5503,5626]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [5503,5626]
                    FIELD [5627,5698]
                        String: "strategy" [5627,5637]
                        OBJECT [5638,5698]
                            FIELD [5639,5656]
                                String: "fail-fast" [5639,5650]
                                FALSE [5651,5656]
                            FIELD [5657,5697]
                                String: "matrix" [5657,5665]
                                OBJECT [5666,5697]
                                    FIELD [5667,5696]
                                        String: "machine_type" [5667,5681]
                                        ARRAY [5682,5696]
                                            STRING [5683,5695]
                                                String: "single-gpu" [5683,5695]
                    FIELD [5699,5766]
                        String: "runs-on" [5699,5708]
                        ARRAY [5709,5766]
                            STRING [5710,5723]
                                String: "self-hosted" [5710,5723]
                            STRING [5724,5736]
                                String: "docker-gpu" [5724,5736]
                            STRING [5737,5765]
                                String: "${{ matrix.machine_type }}" [5737,5765]
                    FIELD [5767,5920]
                        String: "container" [5767,5778]
                        OBJECT [5779,5920]
                            FIELD [5780,5822]
                                String: "image" [5780,5787]
                                STRING [5788,5822]
                                    String: "nvcr.io/nvidia/pytorch:21.03-py3" [5788,5822]
                            FIELD [5823,5919]
                                String: "options" [5823,5832]
                                STRING [5833,5919]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [5833,5919]
                    FIELD [5921,6920]
                        String: "steps" [5921,5928]
                        ARRAY [5929,6920]
                            OBJECT [5930,6016]
                                FIELD [5931,5961]
                                    String: "name" [5931,5937]
                                    STRING [5938,5961]
                                        String: "Checkout transformers" [5938,5961]
                                FIELD [5962,5990]
                                    String: "uses" [5962,5968]
                                    STRING [5969,5990]
                                        String: "actions/checkout@v2" [5969,5990]
                                FIELD [5991,6015]
                                    String: "with" [5991,5997]
                                    OBJECT [5998,6015]
                                        FIELD [5999,6014]
                                            String: "fetch-depth" [5999,6012]
                                            NUMBER [6013,6014]
                                                Number: 2 [6013,6014]
                            OBJECT [6017,6162]
                                FIELD [6018,6047]
                                    String: "name" [6018,6024]
                                    STRING [6025,6047]
                                        String: "Install dependencies" [6025,6047]
                                FIELD [6048,6161]
                                    String: "run" [6048,6053]
                                    STRING [6054,6161]
                                        String: "apt -y update && apt install -y libaio-dev\npip install --upgrade pip\npip install .[deepspeed-testing]\n" [6054,6161]
                            OBJECT [6163,6205]
                                FIELD [6164,6183]
                                    String: "name" [6164,6170]
                                    STRING [6171,6183]
                                        String: "NVIDIA-SMI" [6171,6183]
                                FIELD [6184,6204]
                                    String: "run" [6184,6189]
                                    STRING [6190,6204]
                                        String: "nvidia-smi\n" [6190,6204]
                            OBJECT [6206,6264]
                                FIELD [6207,6227]
                                    String: "name" [6207,6213]
                                    STRING [6214,6227]
                                        String: "Environment" [6214,6227]
                                FIELD [6228,6263]
                                    String: "run" [6228,6233]
                                    STRING [6234,6263]
                                        String: "python utils/print_env.py\n" [6234,6263]
                            OBJECT [6265,6470]
                                FIELD [6266,6313]
                                    String: "name" [6266,6272]
                                    STRING [6273,6313]
                                        String: "Run all non-slow selected tests on GPU" [6273,6313]
                                FIELD [6314,6469]
                                    String: "run" [6314,6319]
                                    STRING [6320,6469]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [6320,6469]
                            OBJECT [6471,6650]
                                FIELD [6472,6502]
                                    String: "name" [6472,6478]
                                    STRING [6479,6502]
                                        String: "Failure short reports" [6479,6502]
                                FIELD [6503,6526]
                                    String: "if" [6503,6507]
                                    STRING [6508,6526]
                                        String: "${{ failure() }}" [6508,6526]
                                FIELD [6527,6551]
                                    String: "continue-on-error" [6527,6546]
                                    TRUE [6547,6551]
                                FIELD [6552,6649]
                                    String: "run" [6552,6557]
                                    STRING [6558,6649]
                                        String: "cat reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [6558,6649]
                            OBJECT [6651,6919]
                                FIELD [6652,6689]
                                    String: "name" [6652,6658]
                                    STRING [6659,6689]
                                        String: "Test suite reports artifacts" [6659,6689]
                                FIELD [6690,6712]
                                    String: "if" [6690,6694]
                                    STRING [6695,6712]
                                        String: "${{ always() }}" [6695,6712]
                                FIELD [6713,6748]
                                    String: "uses" [6713,6719]
                                    STRING [6720,6748]
                                        String: "actions/upload-artifact@v2" [6720,6748]
                                FIELD [6749,6918]
                                    String: "with" [6749,6755]
                                    OBJECT [6756,6918]
                                        FIELD [6757,6841]
                                            String: "name" [6757,6763]
                                            STRING [6764,6841]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [6764,6841]
                                        FIELD [6842,6917]
                                            String: "path" [6842,6848]
                                            STRING [6849,6917]
                                                String: "reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [6849,6917]
            FIELD [6922,8524]
                String: "run_tests_torch_cuda_extensions_multi_gpu" [6922,6965]
                OBJECT [6966,8524]
                    FIELD [6967,7002]
                        String: "name" [6967,6973]
                        STRING [6974,7002]
                            String: "Torch CUDA extension tests" [6974,7002]
                    FIELD [7003,7018]
                        String: "needs" [7003,7010]
                        STRING [7011,7018]
                            String: "setup" [7011,7018]
                    FIELD [7019,7147]
                        String: "if" [7019,7023]
                        STRING [7024,7147]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [7024,7147]
                    FIELD [7148,7218]
                        String: "strategy" [7148,7158]
                        OBJECT [7159,7218]
                            FIELD [7160,7177]
                                String: "fail-fast" [7160,7171]
                                FALSE [7172,7177]
                            FIELD [7178,7217]
                                String: "matrix" [7178,7186]
                                OBJECT [7187,7217]
                                    FIELD [7188,7216]
                                        String: "machine_type" [7188,7202]
                                        ARRAY [7203,7216]
                                            STRING [7204,7215]
                                                String: "multi-gpu" [7204,7215]
                    FIELD [7219,7286]
                        String: "runs-on" [7219,7228]
                        ARRAY [7229,7286]
                            STRING [7230,7243]
                                String: "self-hosted" [7230,7243]
                            STRING [7244,7256]
                                String: "docker-gpu" [7244,7256]
                            STRING [7257,7285]
                                String: "${{ matrix.machine_type }}" [7257,7285]
                    FIELD [7287,7442]
                        String: "container" [7287,7298]
                        OBJECT [7299,7442]
                            FIELD [7300,7342]
                                String: "image" [7300,7307]
                                STRING [7308,7342]
                                    String: "nvcr.io/nvidia/pytorch:21.03-py3" [7308,7342]
                            FIELD [7343,7441]
                                String: "options" [7343,7352]
                                STRING [7353,7441]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [7353,7441]
                    FIELD [7443,8523]
                        String: "steps" [7443,7450]
                        ARRAY [7451,8523]
                            OBJECT [7452,7538]
                                FIELD [7453,7483]
                                    String: "name" [7453,7459]
                                    STRING [7460,7483]
                                        String: "Checkout transformers" [7460,7483]
                                FIELD [7484,7512]
                                    String: "uses" [7484,7490]
                                    STRING [7491,7512]
                                        String: "actions/checkout@v2" [7491,7512]
                                FIELD [7513,7537]
                                    String: "with" [7513,7519]
                                    OBJECT [7520,7537]
                                        FIELD [7521,7536]
                                            String: "fetch-depth" [7521,7534]
                                            NUMBER [7535,7536]
                                                Number: 2 [7535,7536]
                            OBJECT [7539,7765]
                                FIELD [7540,7569]
                                    String: "name" [7540,7546]
                                    STRING [7547,7569]
                                        String: "Install dependencies" [7547,7569]
                                FIELD [7570,7764]
                                    String: "run" [7570,7575]
                                    STRING [7576,7764]
                                        String: "apt -y update && apt install -y libaio-dev\npip install --upgrade pip\nrm -rf ~/.cache/torch_extensions/ # shared between conflicting builds\npip install .[testing,deepspeed,fairscale]\n" [7576,7764]
                            OBJECT [7766,7808]
                                FIELD [7767,7786]
                                    String: "name" [7767,7773]
                                    STRING [7774,7786]
                                        String: "NVIDIA-SMI" [7774,7786]
                                FIELD [7787,7807]
                                    String: "run" [7787,7792]
                                    STRING [7793,7807]
                                        String: "nvidia-smi\n" [7793,7807]
                            OBJECT [7809,7867]
                                FIELD [7810,7830]
                                    String: "name" [7810,7816]
                                    STRING [7817,7830]
                                        String: "Environment" [7817,7830]
                                FIELD [7831,7866]
                                    String: "run" [7831,7836]
                                    STRING [7837,7866]
                                        String: "python utils/print_env.py\n" [7837,7866]
                            OBJECT [7868,8073]
                                FIELD [7869,7916]
                                    String: "name" [7869,7875]
                                    STRING [7876,7916]
                                        String: "Run all non-slow selected tests on GPU" [7876,7916]
                                FIELD [7917,8072]
                                    String: "run" [7917,7922]
                                    STRING [7923,8072]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [7923,8072]
                            OBJECT [8074,8253]
                                FIELD [8075,8105]
                                    String: "name" [8075,8081]
                                    STRING [8082,8105]
                                        String: "Failure short reports" [8082,8105]
                                FIELD [8106,8129]
                                    String: "if" [8106,8110]
                                    STRING [8111,8129]
                                        String: "${{ failure() }}" [8111,8129]
                                FIELD [8130,8154]
                                    String: "continue-on-error" [8130,8149]
                                    TRUE [8150,8154]
                                FIELD [8155,8252]
                                    String: "run" [8155,8160]
                                    STRING [8161,8252]
                                        String: "cat reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [8161,8252]
                            OBJECT [8254,8522]
                                FIELD [8255,8292]
                                    String: "name" [8255,8261]
                                    STRING [8262,8292]
                                        String: "Test suite reports artifacts" [8262,8292]
                                FIELD [8293,8315]
                                    String: "if" [8293,8297]
                                    STRING [8298,8315]
                                        String: "${{ always() }}" [8298,8315]
                                FIELD [8316,8351]
                                    String: "uses" [8316,8322]
                                    STRING [8323,8351]
                                        String: "actions/upload-artifact@v2" [8323,8351]
                                FIELD [8352,8521]
                                    String: "with" [8352,8358]
                                    OBJECT [8359,8521]
                                        FIELD [8360,8444]
                                            String: "name" [8360,8366]
                                            STRING [8367,8444]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [8367,8444]
                                        FIELD [8445,8520]
                                            String: "path" [8445,8451]
                                            STRING [8452,8520]
                                                String: "reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [8452,8520]
            FIELD [8525,9451]
                String: "send_results" [8525,8539]
                OBJECT [8540,9451]
                    FIELD [8541,8573]
                        String: "name" [8541,8547]
                        STRING [8548,8573]
                            String: "Send results to webhook" [8548,8573]
                    FIELD [8574,8599]
                        String: "runs-on" [8574,8583]
                        STRING [8584,8599]
                            String: "ubuntu-latest" [8584,8599]
                    FIELD [8600,8615]
                        String: "if" [8600,8604]
                        STRING [8605,8615]
                            String: "always()" [8605,8615]
                    FIELD [8616,8767]
                        String: "needs" [8616,8623]
                        ARRAY [8624,8767]
                            STRING [8625,8632]
                                String: "setup" [8625,8632]
                            STRING [8633,8655]
                                String: "run_tests_single_gpu" [8633,8655]
                            STRING [8656,8677]
                                String: "run_tests_multi_gpu" [8656,8677]
                            STRING [8678,8722]
                                String: "run_tests_torch_cuda_extensions_single_gpu" [8678,8722]
                            STRING [8723,8766]
                                String: "run_tests_torch_cuda_extensions_multi_gpu" [8723,8766]
                    FIELD [8768,9450]
                        String: "steps" [8768,8775]
                        ARRAY [8776,9450]
                            OBJECT [8777,8807]
                                FIELD [8778,8806]
                                    String: "uses" [8778,8784]
                                    STRING [8785,8806]
                                        String: "actions/checkout@v2" [8785,8806]
                            OBJECT [8808,8847]
                                FIELD [8809,8846]
                                    String: "uses" [8809,8815]
                                    STRING [8816,8846]
                                        String: "actions/download-artifact@v2" [8816,8846]
                            OBJECT [8848,9449]
                                FIELD [8849,8879]
                                    String: "name" [8849,8855]
                                    STRING [8856,8879]
                                        String: "Send message to Slack" [8856,8879]
                                FIELD [8880,9342]
                                    String: "env" [8880,8885]
                                    OBJECT [8886,9342]
                                        FIELD [8887,8943]
                                            String: "CI_SLACK_BOT_TOKEN" [8887,8907]
                                            STRING [8908,8943]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [8908,8943]
                                        FIELD [8944,9002]
                                            String: "CI_SLACK_CHANNEL_ID" [8944,8965]
                                            STRING [8966,9002]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [8966,9002]
                                        FIELD [9003,9073]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [9003,9030]
                                            STRING [9031,9073]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [9031,9073]
                                        FIELD [9074,9150]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [9074,9104]
                                            STRING [9105,9150]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [9105,9150]
                                        FIELD [9151,9216]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [9151,9179]
                                            STRING [9180,9216]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [9180,9216]
                                        FIELD [9217,9234]
                                            String: "CI_EVENT" [9217,9227]
                                            STRING [9228,9234]
                                                String: "push" [9228,9234]
                                        FIELD [9235,9287]
                                            String: "CI_TITLE" [9235,9245]
                                            STRING [9246,9287]
                                                String: "${{ github.event.head_commit.message }}" [9246,9287]
                                        FIELD [9288,9341]
                                            String: "CI_COMMIT_URL" [9288,9303]
                                            STRING [9304,9341]
                                                String: "${{ github.event.head_commit.url }}" [9304,9341]
                                FIELD [9343,9448]
                                    String: "run" [9343,9348]
                                    STRING [9349,9448]
                                        String: "pip install slack_sdk\npython utils/notification_service.py \"${{ needs.setup.outputs.matrix }}\"" [9349,9448]