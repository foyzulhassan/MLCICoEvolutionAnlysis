OBJECT [0,6039]
    FIELD [1,31]
        String: "name" [1,7]
        STRING [8,31]
            String: "CD - Kubernetes - Dev" [8,31]
    FIELD [32,277]
        String: "on" [32,36]
        OBJECT [37,277]
            FIELD [38,73]
                String: "schedule" [38,48]
                ARRAY [49,73]
                    OBJECT [50,72]
                        FIELD [51,71]
                            String: "cron" [51,57]
                            STRING [58,71]
                                String: "0 */3 * * *" [58,71]
            FIELD [74,276]
                String: "workflow_dispatch" [74,93]
                OBJECT [94,276]
                    FIELD [95,275]
                        String: "inputs" [95,103]
                        OBJECT [104,275]
                            FIELD [105,190]
                                String: "check-cache" [105,118]
                                OBJECT [119,190]
                                    FIELD [120,136]
                                        String: "type" [120,126]
                                        STRING [127,136]
                                            String: "boolean" [127,136]
                                    FIELD [137,173]
                                        String: "description" [137,150]
                                        STRING [151,173]
                                            String: "Check workflow cache" [151,173]
                                    FIELD [174,189]
                                        String: "default" [174,183]
                                        FALSE [184,189]
                            FIELD [191,274]
                                String: "deploy-helm" [191,204]
                                OBJECT [205,274]
                                    FIELD [206,222]
                                        String: "type" [206,212]
                                        STRING [213,222]
                                            String: "boolean" [213,222]
                                    FIELD [223,257]
                                        String: "description" [223,236]
                                        STRING [237,257]
                                            String: "Deploy Helm Charts" [237,257]
                                    FIELD [258,273]
                                        String: "default" [258,267]
                                        FALSE [268,273]
    FIELD [278,6038]
        String: "jobs" [278,284]
        OBJECT [285,6038]
            FIELD [286,665]
                String: "check-last-run" [286,302]
                OBJECT [303,665]
                    FIELD [304,339]
                        String: "runs-on" [304,313]
                        STRING [314,339]
                            String: "om-ci-16vcpu-ubuntu2204" [314,339]
                    FIELD [340,404]
                        String: "outputs" [340,349]
                        OBJECT [350,404]
                            FIELD [351,403]
                                String: "same-commit" [351,364]
                                STRING [365,403]
                                    String: "${{ steps.cache.outputs.cache-hit }}" [365,403]
                    FIELD [405,664]
                        String: "steps" [405,412]
                        ARRAY [413,664]
                            OBJECT [414,663]
                                FIELD [415,445]
                                    String: "name" [415,421]
                                    STRING [422,445]
                                        String: "Check for new changes" [422,445]
                                FIELD [446,529]
                                    String: "if" [446,450]
                                    STRING [451,529]
                                        String: "github.event_name == 'schedule' || github.event.inputs.check-cache == 'true'" [451,529]
                                FIELD [530,542]
                                    String: "id" [530,534]
                                    STRING [535,542]
                                        String: "cache" [535,542]
                                FIELD [543,568]
                                    String: "uses" [543,549]
                                    STRING [550,568]
                                        String: "actions/cache@v3" [550,568]
                                FIELD [569,662]
                                    String: "with" [569,575]
                                    OBJECT [576,662]
                                        FIELD [577,605]
                                            String: "path" [577,583]
                                            STRING [584,605]
                                                String: "scripts/commit_hash" [584,605]
                                        FIELD [606,642]
                                            String: "key" [606,611]
                                            STRING [612,642]
                                                String: "dev-commit-${{ github.sha }}" [612,642]
                                        FIELD [643,661]
                                            String: "lookup-only" [643,656]
                                            TRUE [657,661]
            FIELD [666,6037]
                String: "deploy-syft-dev" [666,683]
                OBJECT [684,6037]
                    FIELD [685,709]
                        String: "needs" [685,692]
                        STRING [693,709]
                            String: "check-last-run" [693,709]
                    FIELD [710,767]
                        String: "if" [710,714]
                        STRING [715,767]
                            String: "needs.check-last-run.outputs.same-commit != 'true'" [715,767]
                    FIELD [768,803]
                        String: "runs-on" [768,777]
                        STRING [778,803]
                            String: "om-ci-16vcpu-ubuntu2204" [778,803]
                    FIELD [804,6036]
                        String: "steps" [804,811]
                        ARRAY [812,6036]
                            OBJECT [813,894]
                                FIELD [814,851]
                                    String: "name" [814,820]
                                    STRING [821,851]
                                        String: "Permission to home directory" [821,851]
                                FIELD [852,893]
                                    String: "run" [852,857]
                                    STRING [858,893]
                                        String: "sudo chown -R $USER:$USER $HOME\n" [858,893]
                            OBJECT [895,925]
                                FIELD [896,924]
                                    String: "uses" [896,902]
                                    STRING [903,924]
                                        String: "actions/checkout@v4" [903,924]
                            OBJECT [926,1120]
                                FIELD [927,955]
                                    String: "name" [927,933]
                                    STRING [934,955]
                                        String: "Checkout Infra Repo" [934,955]
                                FIELD [956,984]
                                    String: "uses" [956,962]
                                    STRING [963,984]
                                        String: "actions/checkout@v4" [963,984]
                                FIELD [985,1119]
                                    String: "with" [985,991]
                                    OBJECT [992,1119]
                                        FIELD [993,1033]
                                            String: "repository" [993,1005]
                                            STRING [1006,1033]
                                                String: "${{ secrets.INFRA_REPO }}" [1006,1033]
                                        FIELD [1034,1046]
                                            String: "ref" [1034,1039]
                                            STRING [1040,1046]
                                                String: "main" [1040,1046]
                                        FIELD [1047,1094]
                                            String: "token" [1047,1054]
                                            STRING [1055,1094]
                                                String: "${{ secrets.INFRA_BOT_COMMIT_TOKEN }}" [1055,1094]
                                        FIELD [1095,1118]
                                            String: "path" [1095,1101]
                                            STRING [1102,1118]
                                                String: "infrastructure" [1102,1118]
                            OBJECT [1121,1211]
                                FIELD [1122,1144]
                                    String: "name" [1122,1128]
                                    STRING [1129,1144]
                                        String: "Set up Python" [1129,1144]
                                FIELD [1145,1177]
                                    String: "uses" [1145,1151]
                                    STRING [1152,1177]
                                        String: "actions/setup-python@v3" [1152,1177]
                                FIELD [1178,1210]
                                    String: "with" [1178,1184]
                                    OBJECT [1185,1210]
                                        FIELD [1186,1209]
                                            String: "python-version" [1186,1202]
                                            STRING [1203,1209]
                                                String: "3.11" [1203,1209]
                            OBJECT [1212,1296]
                                FIELD [1213,1242]
                                    String: "name" [1213,1219]
                                    STRING [1220,1242]
                                        String: "Set up Docker Buildx" [1220,1242]
                                FIELD [1243,1256]
                                    String: "id" [1243,1247]
                                    STRING [1248,1256]
                                        String: "buildx" [1248,1256]
                                FIELD [1257,1295]
                                    String: "uses" [1257,1263]
                                    STRING [1264,1295]
                                        String: "docker/setup-buildx-action@v3" [1264,1295]
                            OBJECT [1297,1402]
                                FIELD [1298,1324]
                                    String: "name" [1298,1304]
                                    STRING [1305,1324]
                                        String: "Install Azure CLI" [1305,1324]
                                FIELD [1325,1401]
                                    String: "run" [1325,1330]
                                    STRING [1331,1401]
                                        String: "curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash\naz version\n" [1331,1401]
                            OBJECT [1403,1518]
                                FIELD [1404,1431]
                                    String: "name" [1404,1410]
                                    STRING [1411,1431]
                                        String: "Login to Azure CLI" [1411,1431]
                                FIELD [1432,1455]
                                    String: "uses" [1432,1438]
                                    STRING [1439,1455]
                                        String: "azure/login@v1" [1439,1455]
                                FIELD [1456,1517]
                                    String: "with" [1456,1462]
                                    OBJECT [1463,1517]
                                        FIELD [1464,1516]
                                            String: "creds" [1464,1471]
                                            STRING [1472,1516]
                                                String: "${{ secrets.AZURE_CREDENTIALS_GITHUB_CI }}" [1472,1516]
                            OBJECT [1519,1728]
                                FIELD [1520,1562]
                                    String: "name" [1520,1526]
                                    STRING [1527,1562]
                                        String: "Login to Azure Container Registry" [1527,1562]
                                FIELD [1563,1593]
                                    String: "uses" [1563,1569]
                                    STRING [1570,1593]
                                        String: "azure/docker-login@v1" [1570,1593]
                                FIELD [1594,1727]
                                    String: "with" [1594,1600]
                                    OBJECT [1601,1727]
                                        FIELD [1602,1644]
                                            String: "login-server" [1602,1616]
                                            STRING [1617,1644]
                                                String: "${{ secrets.ACR_SERVER }}" [1617,1644]
                                        FIELD [1645,1685]
                                            String: "username" [1645,1655]
                                            STRING [1656,1685]
                                                String: "${{ secrets.ACR_USERNAME }}" [1656,1685]
                                        FIELD [1686,1726]
                                            String: "password" [1686,1696]
                                            STRING [1697,1726]
                                                String: "${{ secrets.ACR_PASSWORD }}" [1697,1726]
                            OBJECT [1729,1871]
                                FIELD [1730,1763]
                                    String: "name" [1730,1736]
                                    STRING [1737,1763]
                                        String: "Set Grid package version" [1737,1763]
                                FIELD [1764,1775]
                                    String: "id" [1764,1768]
                                    STRING [1769,1775]
                                        String: "grid" [1769,1775]
                                FIELD [1776,1790]
                                    String: "shell" [1776,1783]
                                    STRING [1784,1790]
                                        String: "bash" [1784,1790]
                                FIELD [1791,1870]
                                    String: "run" [1791,1796]
                                    STRING [1797,1870]
                                        String: "echo \"GRID_VERSION=$(python packages/grid/VERSION)\" >> $GITHUB_OUTPUT" [1797,1870]
                            OBJECT [1872,2307]
                                FIELD [1873,1929]
                                    String: "name" [1873,1879]
                                    STRING [1880,1929]
                                        String: "Build and push `grid-backend` image to registry" [1880,1929]
                                FIELD [1930,1966]
                                    String: "uses" [1930,1936]
                                    STRING [1937,1966]
                                        String: "docker/build-push-action@v5" [1937,1966]
                                FIELD [1967,2306]
                                    String: "with" [1967,1973]
                                    OBJECT [1974,2306]
                                        FIELD [1975,1997]
                                            String: "context" [1975,1984]
                                            STRING [1985,1997]
                                                String: "./packages" [1985,1997]
                                        FIELD [1998,2049]
                                            String: "file" [1998,2004]
                                            STRING [2005,2049]
                                                String: "./packages/grid/backend/backend.dockerfile" [2005,2049]
                                        FIELD [2050,2061]
                                            String: "push" [2050,2056]
                                            TRUE [2057,2061]
                                        FIELD [2062,2080]
                                            String: "target" [2062,2070]
                                            STRING [2071,2080]
                                                String: "backend" [2071,2080]
                                        FIELD [2081,2305]
                                            String: "tags" [2081,2087]
                                            STRING [2088,2305]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-backend:${{ steps.grid.outputs.GRID_VERSION }}\n" [2088,2305]
                            OBJECT [2308,2775]
                                FIELD [2309,2366]
                                    String: "name" [2309,2315]
                                    STRING [2316,2366]
                                        String: "Build and push `grid-frontend` image to registry" [2316,2366]
                                FIELD [2367,2403]
                                    String: "uses" [2367,2373]
                                    STRING [2374,2403]
                                        String: "docker/build-push-action@v5" [2374,2403]
                                FIELD [2404,2774]
                                    String: "with" [2404,2410]
                                    OBJECT [2411,2774]
                                        FIELD [2412,2448]
                                            String: "context" [2412,2421]
                                            STRING [2422,2448]
                                                String: "./packages/grid/frontend" [2422,2448]
                                        FIELD [2449,2502]
                                            String: "file" [2449,2455]
                                            STRING [2456,2502]
                                                String: "./packages/grid/frontend/frontend.dockerfile" [2456,2502]
                                        FIELD [2503,2514]
                                            String: "push" [2503,2509]
                                            TRUE [2510,2514]
                                        FIELD [2515,2742]
                                            String: "tags" [2515,2521]
                                            STRING [2522,2742]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-frontend:${{ steps.grid.outputs.GRID_VERSION }}\n" [2522,2742]
                                        FIELD [2743,2773]
                                            String: "target" [2743,2751]
                                            STRING [2752,2773]
                                                String: "grid-ui-development" [2752,2773]
                            OBJECT [2776,3207]
                                FIELD [2777,2835]
                                    String: "name" [2777,2783]
                                    STRING [2784,2835]
                                        String: "Build and push `grid-headscale` image to registry" [2784,2835]
                                FIELD [2836,2872]
                                    String: "uses" [2836,2842]
                                    STRING [2843,2872]
                                        String: "docker/build-push-action@v5" [2843,2872]
                                FIELD [2873,3206]
                                    String: "with" [2873,2879]
                                    OBJECT [2880,3206]
                                        FIELD [2881,2912]
                                            String: "context" [2881,2890]
                                            STRING [2891,2912]
                                                String: "./packages/grid/vpn" [2891,2912]
                                        FIELD [2913,2962]
                                            String: "file" [2913,2919]
                                            STRING [2920,2962]
                                                String: "./packages/grid/vpn/headscale.dockerfile" [2920,2962]
                                        FIELD [2963,2974]
                                            String: "push" [2963,2969]
                                            TRUE [2970,2974]
                                        FIELD [2975,3205]
                                            String: "tags" [2975,2981]
                                            STRING [2982,3205]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-headscale:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-headscale:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-headscale:${{ steps.grid.outputs.GRID_VERSION }}\n" [2982,3205]
                            OBJECT [3208,3639]
                                FIELD [3209,3267]
                                    String: "name" [3209,3215]
                                    STRING [3216,3267]
                                        String: "Build and push `grid-tailscale` image to registry" [3216,3267]
                                FIELD [3268,3304]
                                    String: "uses" [3268,3274]
                                    STRING [3275,3304]
                                        String: "docker/build-push-action@v5" [3275,3304]
                                FIELD [3305,3638]
                                    String: "with" [3305,3311]
                                    OBJECT [3312,3638]
                                        FIELD [3313,3344]
                                            String: "context" [3313,3322]
                                            STRING [3323,3344]
                                                String: "./packages/grid/vpn" [3323,3344]
                                        FIELD [3345,3394]
                                            String: "file" [3345,3351]
                                            STRING [3352,3394]
                                                String: "./packages/grid/vpn/tailscale.dockerfile" [3352,3394]
                                        FIELD [3395,3406]
                                            String: "push" [3395,3401]
                                            TRUE [3402,3406]
                                        FIELD [3407,3637]
                                            String: "tags" [3407,3413]
                                            STRING [3414,3637]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-tailscale:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-tailscale:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-tailscale:${{ steps.grid.outputs.GRID_VERSION }}\n" [3414,3637]
                            OBJECT [3640,4082]
                                FIELD [3641,3702]
                                    String: "name" [3641,3647]
                                    STRING [3648,3702]
                                        String: "Build and push `grid-vpn-iptables` image to registry" [3648,3702]
                                FIELD [3703,3739]
                                    String: "uses" [3703,3709]
                                    STRING [3710,3739]
                                        String: "docker/build-push-action@v5" [3710,3739]
                                FIELD [3740,4081]
                                    String: "with" [3740,3746]
                                    OBJECT [3747,4081]
                                        FIELD [3748,3779]
                                            String: "context" [3748,3757]
                                            STRING [3758,3779]
                                                String: "./packages/grid/vpn" [3758,3779]
                                        FIELD [3780,3828]
                                            String: "file" [3780,3786]
                                            STRING [3787,3828]
                                                String: "./packages/grid/vpn/iptables.dockerfile" [3787,3828]
                                        FIELD [3829,3840]
                                            String: "push" [3829,3835]
                                            TRUE [3836,3840]
                                        FIELD [3841,4080]
                                            String: "tags" [3841,3847]
                                            STRING [3848,4080]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-vpn-iptables:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-vpn-iptables:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-vpn-iptables:${{ steps.grid.outputs.GRID_VERSION }}\n" [3848,4080]
                            OBJECT [4083,4957]
                                FIELD [4084,4125]
                                    String: "name" [4084,4090]
                                    STRING [4091,4125]
                                        String: "Build Helm Chart & Copy to infra" [4091,4125]
                                FIELD [4126,4208]
                                    String: "if" [4126,4130]
                                    STRING [4131,4208]
                                        String: "github.ref == 'refs/heads/dev' || github.event.inputs.deploy-helm == 'true'" [4131,4208]
                                FIELD [4209,4223]
                                    String: "shell" [4209,4216]
                                    STRING [4217,4223]
                                        String: "bash" [4217,4223]
                                FIELD [4224,4956]
                                    String: "run" [4224,4229]
                                    STRING [4230,4956]
                                        String: "K3D_VERSION=v5.6.0\nDEVSPACE_VERSION=v6.3.3\n\n# install k3d\nwget https://github.com/k3d-io/k3d/releases/download/${K3D_VERSION}/k3d-linux-amd64\nmv k3d-linux-amd64 k3d\nchmod +x k3d\nexport PATH=`pwd`:$PATH\nk3d version\n\n# Install devspace\ncurl -sSL https://github.com/loft-sh/devspace/releases/download/${DEVSPACE_VERSION}/devspace-linux-amd64 -o ./devspace\nchmod +x devspace\ndevspace version\n\nexport CONTAINER_REGISTRY=${{ secrets.ACR_SERVER }}\nexport VERSION=dev-${{github.sha}}\ntox -e syft.build.helm\n\nrm -rf infrastructure/gitops/environments/dev/\nmkdir -p infrastructure/gitops/environments/dev/\ncp -R packages/grid/helm/syft/. packages/grid/helm/manifests.yaml infrastructure/gitops/environments/dev/\n" [4230,4956]
                            OBJECT [4958,5316]
                                FIELD [4959,5003]
                                    String: "name" [4959,4965]
                                    STRING [4966,5003]
                                        String: "Commit & push changes to Infra Repo" [4966,5003]
                                FIELD [5004,5086]
                                    String: "if" [5004,5008]
                                    STRING [5009,5086]
                                        String: "github.ref == 'refs/heads/dev' || github.event.inputs.deploy-helm == 'true'" [5009,5086]
                                FIELD [5087,5120]
                                    String: "uses" [5087,5093]
                                    STRING [5094,5120]
                                        String: "EndBug/add-and-commit@v9" [5094,5120]
                                FIELD [5121,5315]
                                    String: "with" [5121,5127]
                                    OBJECT [5128,5315]
                                        FIELD [5129,5171]
                                            String: "author_name" [5129,5142]
                                            STRING [5143,5171]
                                                String: "${{ secrets.OM_BOT_NAME }}" [5143,5171]
                                        FIELD [5172,5216]
                                            String: "author_email" [5172,5186]
                                            STRING [5187,5216]
                                                String: "${{ secrets.OM_BOT_EMAIL }}" [5187,5216]
                                        FIELD [5217,5257]
                                            String: "message" [5217,5226]
                                            STRING [5227,5257]
                                                String: "[env] Update dev helm charts" [5227,5257]
                                        FIELD [5258,5267]
                                            String: "add" [5258,5263]
                                            STRING [5264,5267]
                                                String: "." [5264,5267]
                                        FIELD [5268,5288]
                                            String: "push" [5268,5274]
                                            STRING [5275,5288]
                                                String: "origin main" [5275,5288]
                                        FIELD [5289,5314]
                                            String: "cwd" [5289,5294]
                                            STRING [5295,5314]
                                                String: "./infrastructure/" [5295,5314]
                            OBJECT [5317,5923]
                                FIELD [5318,5359]
                                    String: "name" [5318,5324]
                                    STRING [5325,5359]
                                        String: "Cleanup Azure Container Registry" [5325,5359]
                                FIELD [5360,5922]
                                    String: "run" [5360,5365]
                                    STRING [5366,5922]
                                        String: "ACR_REGISTRY_NAME=${{ secrets.ACR_REGISTRY_NAME }}\n\necho \">> Fetching repo list..\"\nREPO_LIST=$(az acr repository list -n $ACR_REGISTRY_NAME -o tsv)\n\nKEEP_PREV_VERSIONS=5\nTAIL_FROM_LINE=$(($KEEP_PREV_VERSIONS + 1))\n\nfor repo in $REPO_LIST\ndo\n    echo \"Cleaning up '$repo'\"\n    az acr repository show-tags --name $ACR_REGISTRY_NAME --repository $repo --orderby time_desc --output tsv \\\n      | grep dev- \\\n      | tail -n +$TAIL_FROM_LINE \\\n      | xargs -r -I% az acr repository untag --name $ACR_REGISTRY_NAME --image $repo:%\ndone\n" [5366,5922]
                            OBJECT [5924,6035]
                                FIELD [5925,5966]
                                    String: "name" [5925,5931]
                                    STRING [5932,5966]
                                        String: "Logout and cleanup Azure account" [5932,5966]
                                FIELD [5967,5982]
                                    String: "if" [5967,5971]
                                    STRING [5972,5982]
                                        String: "always()" [5972,5982]
                                FIELD [5983,6034]
                                    String: "run" [5983,5988]
                                    STRING [5989,6034]
                                        String: "az logout\naz cache purge\naz account clear" [5989,6034]