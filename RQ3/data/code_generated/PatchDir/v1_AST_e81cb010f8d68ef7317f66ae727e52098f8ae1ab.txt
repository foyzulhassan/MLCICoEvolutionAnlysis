OBJECT [0,18668]
    FIELD [1,35]
        String: "name" [1,7]
        STRING [8,35]
            String: "Self-hosted runner (push)" [8,35]
    FIELD [36,282]
        String: "on" [36,40]
        OBJECT [41,282]
            FIELD [42,149]
                String: "workflow_run" [42,56]
                OBJECT [57,149]
                    FIELD [58,106]
                        String: "workflows" [58,69]
                        ARRAY [70,106]
                            STRING [71,105]
                                String: "Self-hosted runner (push-caller)" [71,105]
                    FIELD [107,126]
                        String: "branches" [107,117]
                        ARRAY [118,126]
                            STRING [119,125]
                                String: "main" [119,125]
                    FIELD [127,148]
                        String: "types" [127,134]
                        ARRAY [135,148]
                            STRING [136,147]
                                String: "completed" [136,147]
            FIELD [150,254]
                String: "push" [150,156]
                OBJECT [157,254]
                    FIELD [158,184]
                        String: "branches" [158,168]
                        ARRAY [169,184]
                            STRING [170,176]
                                String: "ci_*" [170,176]
                            STRING [177,183]
                                String: "ci-*" [177,183]
                    FIELD [185,253]
                        String: "paths" [185,192]
                        ARRAY [193,253]
                            STRING [194,202]
                                String: "src/**" [194,202]
                            STRING [203,213]
                                String: "tests/**" [203,213]
                            STRING [214,226]
                                String: ".github/**" [214,226]
                            STRING [227,241]
                                String: "templates/**" [227,241]
                            STRING [242,252]
                                String: "utils/**" [242,252]
            FIELD [255,281]
                String: "repository_dispatch" [255,276]
                NULL [277,281]
    FIELD [283,458]
        String: "env" [283,288]
        OBJECT [289,458]
            FIELD [290,312]
                String: "HF_HOME" [290,299]
                STRING [300,312]
                    String: "/mnt/cache" [300,312]
            FIELD [313,338]
                String: "TRANSFORMERS_IS_CI" [313,333]
                TRUE [334,338]
            FIELD [339,358]
                String: "OMP_NUM_THREADS" [339,356]
                NUMBER [357,358]
                    Number: 8 [357,358]
            FIELD [359,378]
                String: "MKL_NUM_THREADS" [359,376]
                NUMBER [377,378]
                    Number: 8 [377,378]
            FIELD [379,398]
                String: "PYTEST_TIMEOUT" [379,395]
                NUMBER [396,398]
                    Number: 60 [396,398]
            FIELD [399,431]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [399,426]
                TRUE [427,431]
            FIELD [432,457]
                String: "RUN_PT_TF_CROSS_TESTS" [432,455]
                NUMBER [456,457]
                    Number: 1 [456,457]
    FIELD [459,18667]
        String: "jobs" [459,465]
        OBJECT [466,18667]
            FIELD [467,840]
                String: "check_runner_status" [467,488]
                OBJECT [489,840]
                    FIELD [490,518]
                        String: "name" [490,496]
                        STRING [497,518]
                            String: "Check Runner Status" [497,518]
                    FIELD [519,544]
                        String: "runs-on" [519,528]
                        STRING [529,544]
                            String: "ubuntu-latest" [529,544]
                    FIELD [545,839]
                        String: "steps" [545,552]
                        ARRAY [553,839]
                            OBJECT [554,640]
                                FIELD [555,585]
                                    String: "name" [555,561]
                                    STRING [562,585]
                                        String: "Checkout transformers" [562,585]
                                FIELD [586,614]
                                    String: "uses" [586,592]
                                    STRING [593,614]
                                        String: "actions/checkout@v2" [593,614]
                                FIELD [615,639]
                                    String: "with" [615,621]
                                    OBJECT [622,639]
                                        FIELD [623,638]
                                            String: "fetch-depth" [623,636]
                                            NUMBER [637,638]
                                                Number: 2 [637,638]
                            OBJECT [641,838]
                                FIELD [642,670]
                                    String: "name" [642,648]
                                    STRING [649,670]
                                        String: "Check Runner Status" [649,670]
                                FIELD [671,837]
                                    String: "run" [671,676]
                                    STRING [677,837]
                                        String: "python utils/check_self_hosted_runner.py --target_runners single-gpu-ci-runner-docker,multi-gpu-ci-runner-docker --token ${{ secrets.ACCESS_REPO_INFO_TOKEN }}" [677,837]
            FIELD [841,1267]
                String: "check_runners" [841,856]
                OBJECT [857,1267]
                    FIELD [858,880]
                        String: "name" [858,864]
                        STRING [865,880]
                            String: "Check Runners" [865,880]
                    FIELD [881,910]
                        String: "needs" [881,888]
                        STRING [889,910]
                            String: "check_runner_status" [889,910]
                    FIELD [911,976]
                        String: "strategy" [911,921]
                        OBJECT [922,976]
                            FIELD [923,975]
                                String: "matrix" [923,931]
                                OBJECT [932,975]
                                    FIELD [933,974]
                                        String: "machine_type" [933,947]
                                        ARRAY [948,974]
                                            STRING [949,961]
                                                String: "single-gpu" [949,961]
                                            STRING [962,973]
                                                String: "multi-gpu" [962,973]
                    FIELD [977,1044]
                        String: "runs-on" [977,986]
                        ARRAY [987,1044]
                            STRING [988,1001]
                                String: "self-hosted" [988,1001]
                            STRING [1002,1014]
                                String: "docker-gpu" [1002,1014]
                            STRING [1015,1043]
                                String: "${{ matrix.machine_type }}" [1015,1043]
                    FIELD [1045,1213]
                        String: "container" [1045,1056]
                        OBJECT [1057,1213]
                            FIELD [1058,1115]
                                String: "image" [1058,1065]
                                STRING [1066,1115]
                                    String: "huggingface/transformers-all-latest-gpu-push-ci" [1066,1115]
                            FIELD [1116,1212]
                                String: "options" [1116,1125]
                                STRING [1126,1212]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1126,1212]
                    FIELD [1214,1266]
                        String: "steps" [1214,1221]
                        ARRAY [1222,1266]
                            OBJECT [1223,1265]
                                FIELD [1224,1243]
                                    String: "name" [1224,1230]
                                    STRING [1231,1243]
                                        String: "NVIDIA-SMI" [1231,1243]
                                FIELD [1244,1264]
                                    String: "run" [1244,1249]
                                    STRING [1250,1264]
                                        String: "nvidia-smi\n" [1250,1264]
            FIELD [1268,4061]
                String: "setup" [1268,1275]
                OBJECT [1276,4061]
                    FIELD [1277,1291]
                        String: "name" [1277,1283]
                        STRING [1284,1291]
                            String: "Setup" [1284,1291]
                    FIELD [1292,1315]
                        String: "needs" [1292,1299]
                        STRING [1300,1315]
                            String: "check_runners" [1300,1315]
                    FIELD [1316,1381]
                        String: "strategy" [1316,1326]
                        OBJECT [1327,1381]
                            FIELD [1328,1380]
                                String: "matrix" [1328,1336]
                                OBJECT [1337,1380]
                                    FIELD [1338,1379]
                                        String: "machine_type" [1338,1352]
                                        ARRAY [1353,1379]
                                            STRING [1354,1366]
                                                String: "single-gpu" [1354,1366]
                                            STRING [1367,1378]
                                                String: "multi-gpu" [1367,1378]
                    FIELD [1382,1449]
                        String: "runs-on" [1382,1391]
                        ARRAY [1392,1449]
                            STRING [1393,1406]
                                String: "self-hosted" [1393,1406]
                            STRING [1407,1419]
                                String: "docker-gpu" [1407,1419]
                            STRING [1420,1448]
                                String: "${{ matrix.machine_type }}" [1420,1448]
                    FIELD [1450,1618]
                        String: "container" [1450,1461]
                        OBJECT [1462,1618]
                            FIELD [1463,1520]
                                String: "image" [1463,1470]
                                STRING [1471,1520]
                                    String: "huggingface/transformers-all-latest-gpu-push-ci" [1471,1520]
                            FIELD [1521,1617]
                                String: "options" [1521,1530]
                                STRING [1531,1617]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1531,1617]
                    FIELD [1619,1734]
                        String: "outputs" [1619,1628]
                        OBJECT [1629,1734]
                            FIELD [1630,1679]
                                String: "matrix" [1630,1638]
                                STRING [1639,1679]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [1639,1679]
                            FIELD [1680,1733]
                                String: "test_map" [1680,1690]
                                STRING [1691,1733]
                                    String: "${{ steps.set-matrix.outputs.test_map }}" [1691,1733]
                    FIELD [1735,4060]
                        String: "steps" [1735,1742]
                        ARRAY [1743,4060]
                            OBJECT [1744,2461]
                                FIELD [1745,1790]
                                    String: "name" [1745,1751]
                                    STRING [1752,1790]
                                        String: "Prepare custom environment variables" [1752,1790]
                                FIELD [1791,1805]
                                    String: "shell" [1791,1798]
                                    STRING [1799,1805]
                                        String: "bash" [1799,1805]
                                FIELD [1806,2460]
                                    String: "run" [1806,1811]
                                    STRING [1812,2460]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [1812,2460]
                            OBJECT [2462,2597]
                                FIELD [2463,2499]
                                    String: "name" [2463,2469]
                                    STRING [2470,2499]
                                        String: "print environment variables" [2470,2499]
                                FIELD [2500,2596]
                                    String: "run" [2500,2505]
                                    STRING [2506,2596]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [2506,2596]
                            OBJECT [2598,2919]
                                FIELD [2599,2648]
                                    String: "name" [2599,2605]
                                    STRING [2606,2648]
                                        String: "Update clone using environment variables" [2606,2648]
                                FIELD [2649,2684]
                                    String: "working-directory" [2649,2668]
                                    STRING [2669,2684]
                                        String: "/transformers" [2669,2684]
                                FIELD [2685,2918]
                                    String: "run" [2685,2690]
                                    STRING [2691,2918]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [2691,2918]
                            OBJECT [2920,3058]
                                FIELD [2921,2937]
                                    String: "name" [2921,2927]
                                    STRING [2928,2937]
                                        String: "Cleanup" [2928,2937]
                                FIELD [2938,2973]
                                    String: "working-directory" [2938,2957]
                                    STRING [2958,2973]
                                        String: "/transformers" [2958,2973]
                                FIELD [2974,3057]
                                    String: "run" [2974,2979]
                                    STRING [2980,3057]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [2980,3057]
                            OBJECT [3059,3254]
                                FIELD [3060,3091]
                                    String: "name" [3060,3066]
                                    STRING [3067,3091]
                                        String: "Fetch the tests to run" [3067,3091]
                                FIELD [3092,3127]
                                    String: "working-directory" [3092,3111]
                                    STRING [3112,3127]
                                        String: "/transformers" [3112,3127]
                                FIELD [3128,3253]
                                    String: "run" [3128,3133]
                                    STRING [3134,3253]
                                        String: "pip install --upgrade git-python\npython3 utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [3134,3253]
                            OBJECT [3255,3397]
                                FIELD [3256,3285]
                                    String: "name" [3256,3262]
                                    STRING [3263,3285]
                                        String: "Report fetched tests" [3263,3285]
                                FIELD [3286,3321]
                                    String: "uses" [3286,3292]
                                    STRING [3293,3321]
                                        String: "actions/upload-artifact@v2" [3293,3321]
                                FIELD [3322,3396]
                                    String: "with" [3322,3328]
                                    OBJECT [3329,3396]
                                        FIELD [3330,3351]
                                            String: "name" [3330,3336]
                                            STRING [3337,3351]
                                                String: "test_fetched" [3337,3351]
                                        FIELD [3352,3395]
                                            String: "path" [3352,3358]
                                            STRING [3359,3395]
                                                String: "/transformers/test_preparation.txt" [3359,3395]
                            OBJECT [3398,4059]
                                FIELD [3399,3416]
                                    String: "id" [3399,3403]
                                    STRING [3404,3416]
                                        String: "set-matrix" [3404,3416]
                                FIELD [3417,3452]
                                    String: "name" [3417,3423]
                                    STRING [3424,3452]
                                        String: "Organize tests into models" [3424,3452]
                                FIELD [3453,3488]
                                    String: "working-directory" [3453,3472]
                                    STRING [3473,3488]
                                        String: "/transformers" [3473,3488]
                                FIELD [3489,4058]
                                    String: "run" [3489,3494]
                                    STRING [3495,4058]
                                        String: "if [ -f test_map.json ]; then\n    keys=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); d = list(test_map.keys()); print(d)')\n    test_map=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); print(test_map)')\nelse\n    keys=$(python3 -c 'keys = [\"dummy\"]; print(keys)')\n    test_map=$(python3 -c 'test_map = {\"dummy\": []}; print(test_map)')\nfi\necho $keys\necho $test_map\necho \"::set-output name=matrix::$keys\"\necho \"::set-output name=test_map::$test_map\"\n" [3495,4058]
            FIELD [4062,6990]
                String: "run_tests_single_gpu" [4062,4084]
                OBJECT [4085,6990]
                    FIELD [4086,4106]
                        String: "name" [4086,4092]
                        STRING [4093,4106]
                            String: "Model tests" [4093,4106]
                    FIELD [4107,4122]
                        String: "needs" [4107,4114]
                        STRING [4115,4122]
                            String: "setup" [4115,4122]
                    FIELD [4123,4193]
                        String: "if" [4123,4127]
                        STRING [4128,4193]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [4128,4193]
                    FIELD [4194,4321]
                        String: "strategy" [4194,4204]
                        OBJECT [4205,4321]
                            FIELD [4206,4223]
                                String: "fail-fast" [4206,4217]
                                FALSE [4218,4223]
                            FIELD [4224,4320]
                                String: "matrix" [4224,4232]
                                OBJECT [4233,4320]
                                    FIELD [4234,4289]
                                        String: "folders" [4234,4243]
                                        STRING [4244,4289]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [4244,4289]
                                    FIELD [4290,4319]
                                        String: "machine_type" [4290,4304]
                                        ARRAY [4305,4319]
                                            STRING [4306,4318]
                                                String: "single-gpu" [4306,4318]
                    FIELD [4322,4389]
                        String: "runs-on" [4322,4331]
                        ARRAY [4332,4389]
                            STRING [4333,4346]
                                String: "self-hosted" [4333,4346]
                            STRING [4347,4359]
                                String: "docker-gpu" [4347,4359]
                            STRING [4360,4388]
                                String: "${{ matrix.machine_type }}" [4360,4388]
                    FIELD [4390,4558]
                        String: "container" [4390,4401]
                        OBJECT [4402,4558]
                            FIELD [4403,4460]
                                String: "image" [4403,4410]
                                STRING [4411,4460]
                                    String: "huggingface/transformers-all-latest-gpu-push-ci" [4411,4460]
                            FIELD [4461,4557]
                                String: "options" [4461,4470]
                                STRING [4471,4557]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [4471,4557]
                    FIELD [4559,6989]
                        String: "steps" [4559,4566]
                        ARRAY [4567,6989]
                            OBJECT [4568,5285]
                                FIELD [4569,4614]
                                    String: "name" [4569,4575]
                                    STRING [4576,4614]
                                        String: "Prepare custom environment variables" [4576,4614]
                                FIELD [4615,4629]
                                    String: "shell" [4615,4622]
                                    STRING [4623,4629]
                                        String: "bash" [4623,4629]
                                FIELD [4630,5284]
                                    String: "run" [4630,4635]
                                    STRING [4636,5284]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [4636,5284]
                            OBJECT [5286,5421]
                                FIELD [5287,5323]
                                    String: "name" [5287,5293]
                                    STRING [5294,5323]
                                        String: "print environment variables" [5294,5323]
                                FIELD [5324,5420]
                                    String: "run" [5324,5329]
                                    STRING [5330,5420]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [5330,5420]
                            OBJECT [5422,5743]
                                FIELD [5423,5472]
                                    String: "name" [5423,5429]
                                    STRING [5430,5472]
                                        String: "Update clone using environment variables" [5430,5472]
                                FIELD [5473,5508]
                                    String: "working-directory" [5473,5492]
                                    STRING [5493,5508]
                                        String: "/transformers" [5493,5508]
                                FIELD [5509,5742]
                                    String: "run" [5509,5514]
                                    STRING [5515,5742]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [5515,5742]
                            OBJECT [5744,6090]
                                FIELD [5745,5787]
                                    String: "name" [5745,5751]
                                    STRING [5752,5787]
                                        String: "Echo folder ${{ matrix.folders }}" [5752,5787]
                                FIELD [5788,5802]
                                    String: "shell" [5788,5795]
                                    STRING [5796,5802]
                                        String: "bash" [5796,5802]
                                FIELD [5803,6089]
                                    String: "run" [5803,5808]
                                    STRING [5809,6089]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [5809,6089]
                            OBJECT [6091,6133]
                                FIELD [6092,6111]
                                    String: "name" [6092,6098]
                                    STRING [6099,6111]
                                        String: "NVIDIA-SMI" [6099,6111]
                                FIELD [6112,6132]
                                    String: "run" [6112,6117]
                                    STRING [6118,6132]
                                        String: "nvidia-smi\n" [6118,6132]
                            OBJECT [6134,6229]
                                FIELD [6135,6155]
                                    String: "name" [6135,6141]
                                    STRING [6142,6155]
                                        String: "Environment" [6142,6155]
                                FIELD [6156,6191]
                                    String: "working-directory" [6156,6175]
                                    STRING [6176,6191]
                                        String: "/transformers" [6176,6191]
                                FIELD [6192,6228]
                                    String: "run" [6192,6197]
                                    STRING [6198,6228]
                                        String: "python3 utils/print_env.py\n" [6198,6228]
                            OBJECT [6230,6503]
                                FIELD [6231,6278]
                                    String: "name" [6231,6237]
                                    STRING [6238,6278]
                                        String: "Run all non-slow selected tests on GPU" [6238,6278]
                                FIELD [6279,6314]
                                    String: "working-directory" [6279,6298]
                                    STRING [6299,6314]
                                        String: "/transformers" [6299,6314]
                                FIELD [6315,6502]
                                    String: "run" [6315,6320]
                                    STRING [6321,6502]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [6321,6502]
                            OBJECT [6504,6697]
                                FIELD [6505,6535]
                                    String: "name" [6505,6511]
                                    STRING [6512,6535]
                                        String: "Failure short reports" [6512,6535]
                                FIELD [6536,6559]
                                    String: "if" [6536,6540]
                                    STRING [6541,6559]
                                        String: "${{ failure() }}" [6541,6559]
                                FIELD [6560,6584]
                                    String: "continue-on-error" [6560,6579]
                                    TRUE [6580,6584]
                                FIELD [6585,6696]
                                    String: "run" [6585,6590]
                                    STRING [6591,6696]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [6591,6696]
                            OBJECT [6698,6988]
                                FIELD [6699,6736]
                                    String: "name" [6699,6705]
                                    STRING [6706,6736]
                                        String: "Test suite reports artifacts" [6706,6736]
                                FIELD [6737,6759]
                                    String: "if" [6737,6741]
                                    STRING [6742,6759]
                                        String: "${{ always() }}" [6742,6759]
                                FIELD [6760,6795]
                                    String: "uses" [6760,6766]
                                    STRING [6767,6795]
                                        String: "actions/upload-artifact@v2" [6767,6795]
                                FIELD [6796,6987]
                                    String: "with" [6796,6802]
                                    OBJECT [6803,6987]
                                        FIELD [6804,6896]
                                            String: "name" [6804,6810]
                                            STRING [6811,6896]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [6811,6896]
                                        FIELD [6897,6986]
                                            String: "path" [6897,6903]
                                            STRING [6904,6986]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [6904,6986]
            FIELD [6991,9955]
                String: "run_tests_multi_gpu" [6991,7012]
                OBJECT [7013,9955]
                    FIELD [7014,7034]
                        String: "name" [7014,7020]
                        STRING [7021,7034]
                            String: "Model tests" [7021,7034]
                    FIELD [7035,7050]
                        String: "needs" [7035,7042]
                        STRING [7043,7050]
                            String: "setup" [7043,7050]
                    FIELD [7051,7121]
                        String: "if" [7051,7055]
                        STRING [7056,7121]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [7056,7121]
                    FIELD [7122,7248]
                        String: "strategy" [7122,7132]
                        OBJECT [7133,7248]
                            FIELD [7134,7151]
                                String: "fail-fast" [7134,7145]
                                FALSE [7146,7151]
                            FIELD [7152,7247]
                                String: "matrix" [7152,7160]
                                OBJECT [7161,7247]
                                    FIELD [7162,7217]
                                        String: "folders" [7162,7171]
                                        STRING [7172,7217]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [7172,7217]
                                    FIELD [7218,7246]
                                        String: "machine_type" [7218,7232]
                                        ARRAY [7233,7246]
                                            STRING [7234,7245]
                                                String: "multi-gpu" [7234,7245]
                    FIELD [7249,7316]
                        String: "runs-on" [7249,7258]
                        ARRAY [7259,7316]
                            STRING [7260,7273]
                                String: "self-hosted" [7260,7273]
                            STRING [7274,7286]
                                String: "docker-gpu" [7274,7286]
                            STRING [7287,7315]
                                String: "${{ matrix.machine_type }}" [7287,7315]
                    FIELD [7317,7487]
                        String: "container" [7317,7328]
                        OBJECT [7329,7487]
                            FIELD [7330,7387]
                                String: "image" [7330,7337]
                                STRING [7338,7387]
                                    String: "huggingface/transformers-all-latest-gpu-push-ci" [7338,7387]
                            FIELD [7388,7486]
                                String: "options" [7388,7397]
                                STRING [7398,7486]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [7398,7486]
                    FIELD [7488,9954]
                        String: "steps" [7488,7495]
                        ARRAY [7496,9954]
                            OBJECT [7497,8214]
                                FIELD [7498,7543]
                                    String: "name" [7498,7504]
                                    STRING [7505,7543]
                                        String: "Prepare custom environment variables" [7505,7543]
                                FIELD [7544,7558]
                                    String: "shell" [7544,7551]
                                    STRING [7552,7558]
                                        String: "bash" [7552,7558]
                                FIELD [7559,8213]
                                    String: "run" [7559,7564]
                                    STRING [7565,8213]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [7565,8213]
                            OBJECT [8215,8350]
                                FIELD [8216,8252]
                                    String: "name" [8216,8222]
                                    STRING [8223,8252]
                                        String: "print environment variables" [8223,8252]
                                FIELD [8253,8349]
                                    String: "run" [8253,8258]
                                    STRING [8259,8349]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [8259,8349]
                            OBJECT [8351,8672]
                                FIELD [8352,8401]
                                    String: "name" [8352,8358]
                                    STRING [8359,8401]
                                        String: "Update clone using environment variables" [8359,8401]
                                FIELD [8402,8437]
                                    String: "working-directory" [8402,8421]
                                    STRING [8422,8437]
                                        String: "/transformers" [8422,8437]
                                FIELD [8438,8671]
                                    String: "run" [8438,8443]
                                    STRING [8444,8671]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [8444,8671]
                            OBJECT [8673,9019]
                                FIELD [8674,8716]
                                    String: "name" [8674,8680]
                                    STRING [8681,8716]
                                        String: "Echo folder ${{ matrix.folders }}" [8681,8716]
                                FIELD [8717,8731]
                                    String: "shell" [8717,8724]
                                    STRING [8725,8731]
                                        String: "bash" [8725,8731]
                                FIELD [8732,9018]
                                    String: "run" [8732,8737]
                                    STRING [8738,9018]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [8738,9018]
                            OBJECT [9020,9062]
                                FIELD [9021,9040]
                                    String: "name" [9021,9027]
                                    STRING [9028,9040]
                                        String: "NVIDIA-SMI" [9028,9040]
                                FIELD [9041,9061]
                                    String: "run" [9041,9046]
                                    STRING [9047,9061]
                                        String: "nvidia-smi\n" [9047,9061]
                            OBJECT [9063,9158]
                                FIELD [9064,9084]
                                    String: "name" [9064,9070]
                                    STRING [9071,9084]
                                        String: "Environment" [9071,9084]
                                FIELD [9085,9120]
                                    String: "working-directory" [9085,9104]
                                    STRING [9105,9120]
                                        String: "/transformers" [9105,9120]
                                FIELD [9121,9157]
                                    String: "run" [9121,9126]
                                    STRING [9127,9157]
                                        String: "python3 utils/print_env.py\n" [9127,9157]
                            OBJECT [9159,9468]
                                FIELD [9160,9207]
                                    String: "name" [9160,9166]
                                    STRING [9167,9207]
                                        String: "Run all non-slow selected tests on GPU" [9167,9207]
                                FIELD [9208,9243]
                                    String: "env" [9208,9213]
                                    OBJECT [9214,9243]
                                        FIELD [9215,9242]
                                            String: "MKL_SERVICE_FORCE_INTEL" [9215,9240]
                                            NUMBER [9241,9242]
                                                Number: 1 [9241,9242]
                                FIELD [9244,9279]
                                    String: "working-directory" [9244,9263]
                                    STRING [9264,9279]
                                        String: "/transformers" [9264,9279]
                                FIELD [9280,9467]
                                    String: "run" [9280,9285]
                                    STRING [9286,9467]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [9286,9467]
                            OBJECT [9469,9662]
                                FIELD [9470,9500]
                                    String: "name" [9470,9476]
                                    STRING [9477,9500]
                                        String: "Failure short reports" [9477,9500]
                                FIELD [9501,9524]
                                    String: "if" [9501,9505]
                                    STRING [9506,9524]
                                        String: "${{ failure() }}" [9506,9524]
                                FIELD [9525,9549]
                                    String: "continue-on-error" [9525,9544]
                                    TRUE [9545,9549]
                                FIELD [9550,9661]
                                    String: "run" [9550,9555]
                                    STRING [9556,9661]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [9556,9661]
                            OBJECT [9663,9953]
                                FIELD [9664,9701]
                                    String: "name" [9664,9670]
                                    STRING [9671,9701]
                                        String: "Test suite reports artifacts" [9671,9701]
                                FIELD [9702,9724]
                                    String: "if" [9702,9706]
                                    STRING [9707,9724]
                                        String: "${{ always() }}" [9707,9724]
                                FIELD [9725,9760]
                                    String: "uses" [9725,9731]
                                    STRING [9732,9760]
                                        String: "actions/upload-artifact@v2" [9732,9760]
                                FIELD [9761,9952]
                                    String: "with" [9761,9767]
                                    OBJECT [9768,9952]
                                        FIELD [9769,9861]
                                            String: "name" [9769,9775]
                                            STRING [9776,9861]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [9776,9861]
                                        FIELD [9862,9951]
                                            String: "path" [9862,9868]
                                            STRING [9869,9951]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [9869,9951]
            FIELD [9956,13018]
                String: "run_tests_torch_cuda_extensions_single_gpu" [9956,10000]
                OBJECT [10001,13018]
                    FIELD [10002,10037]
                        String: "name" [10002,10008]
                        STRING [10009,10037]
                            String: "Torch CUDA extension tests" [10009,10037]
                    FIELD [10038,10053]
                        String: "needs" [10038,10045]
                        STRING [10046,10053]
                            String: "setup" [10046,10053]
                    FIELD [10054,10182]
                        String: "if" [10054,10058]
                        STRING [10059,10182]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [10059,10182]
                    FIELD [10183,10254]
                        String: "strategy" [10183,10193]
                        OBJECT [10194,10254]
                            FIELD [10195,10212]
                                String: "fail-fast" [10195,10206]
                                FALSE [10207,10212]
                            FIELD [10213,10253]
                                String: "matrix" [10213,10221]
                                OBJECT [10222,10253]
                                    FIELD [10223,10252]
                                        String: "machine_type" [10223,10237]
                                        ARRAY [10238,10252]
                                            STRING [10239,10251]
                                                String: "single-gpu" [10239,10251]
                    FIELD [10255,10322]
                        String: "runs-on" [10255,10264]
                        ARRAY [10265,10322]
                            STRING [10266,10279]
                                String: "self-hosted" [10266,10279]
                            STRING [10280,10292]
                                String: "docker-gpu" [10280,10292]
                            STRING [10293,10321]
                                String: "${{ matrix.machine_type }}" [10293,10321]
                    FIELD [10323,10505]
                        String: "container" [10323,10334]
                        OBJECT [10335,10505]
                            FIELD [10336,10407]
                                String: "image" [10336,10343]
                                STRING [10344,10407]
                                    String: "huggingface/transformers-pytorch-deepspeed-latest-gpu-push-ci" [10344,10407]
                            FIELD [10408,10504]
                                String: "options" [10408,10417]
                                STRING [10418,10504]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [10418,10504]
                    FIELD [10506,13017]
                        String: "steps" [10506,10513]
                        ARRAY [10514,13017]
                            OBJECT [10515,11232]
                                FIELD [10516,10561]
                                    String: "name" [10516,10522]
                                    STRING [10523,10561]
                                        String: "Prepare custom environment variables" [10523,10561]
                                FIELD [10562,10576]
                                    String: "shell" [10562,10569]
                                    STRING [10570,10576]
                                        String: "bash" [10570,10576]
                                FIELD [10577,11231]
                                    String: "run" [10577,10582]
                                    STRING [10583,11231]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [10583,11231]
                            OBJECT [11233,11368]
                                FIELD [11234,11270]
                                    String: "name" [11234,11240]
                                    STRING [11241,11270]
                                        String: "print environment variables" [11241,11270]
                                FIELD [11271,11367]
                                    String: "run" [11271,11276]
                                    STRING [11277,11367]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [11277,11367]
                            OBJECT [11369,11700]
                                FIELD [11370,11419]
                                    String: "name" [11370,11376]
                                    STRING [11377,11419]
                                        String: "Update clone using environment variables" [11377,11419]
                                FIELD [11420,11465]
                                    String: "working-directory" [11420,11439]
                                    STRING [11440,11465]
                                        String: "/workspace/transformers" [11440,11465]
                                FIELD [11466,11699]
                                    String: "run" [11466,11471]
                                    STRING [11472,11699]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [11472,11699]
                            OBJECT [11701,11795]
                                FIELD [11702,11741]
                                    String: "name" [11702,11708]
                                    STRING [11709,11741]
                                        String: "Remove cached torch extensions" [11709,11741]
                                FIELD [11742,11794]
                                    String: "run" [11742,11747]
                                    STRING [11748,11794]
                                        String: "rm -rf /github/home/.cache/torch_extensions/" [11748,11794]
                            OBJECT [11796,12119]
                                FIELD [11797,11833]
                                    String: "name" [11797,11803]
                                    STRING [11804,11833]
                                        String: "Pre build DeepSpeed *again*" [11804,11833]
                                FIELD [11834,11866]
                                    String: "working-directory" [11834,11853]
                                    STRING [11854,11866]
                                        String: "/workspace" [11854,11866]
                                FIELD [11867,12118]
                                    String: "run" [11867,11872]
                                    STRING [11873,12118]
                                        String: "python3 -m pip uninstall -y deepspeed\nDS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 DS_BUILD_AIO=1 DS_BUILD_UTILS=1 python3 -m pip install deepspeed --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [11873,12118]
                            OBJECT [12120,12162]
                                FIELD [12121,12140]
                                    String: "name" [12121,12127]
                                    STRING [12128,12140]
                                        String: "NVIDIA-SMI" [12128,12140]
                                FIELD [12141,12161]
                                    String: "run" [12141,12146]
                                    STRING [12147,12161]
                                        String: "nvidia-smi\n" [12147,12161]
                            OBJECT [12163,12267]
                                FIELD [12164,12184]
                                    String: "name" [12164,12170]
                                    STRING [12171,12184]
                                        String: "Environment" [12171,12184]
                                FIELD [12185,12230]
                                    String: "working-directory" [12185,12204]
                                    STRING [12205,12230]
                                        String: "/workspace/transformers" [12205,12230]
                                FIELD [12231,12266]
                                    String: "run" [12231,12236]
                                    STRING [12237,12266]
                                        String: "python utils/print_env.py\n" [12237,12266]
                            OBJECT [12268,12519]
                                FIELD [12269,12316]
                                    String: "name" [12269,12275]
                                    STRING [12276,12316]
                                        String: "Run all non-slow selected tests on GPU" [12276,12316]
                                FIELD [12317,12362]
                                    String: "working-directory" [12317,12336]
                                    STRING [12337,12362]
                                        String: "/workspace/transformers" [12337,12362]
                                FIELD [12363,12518]
                                    String: "run" [12363,12368]
                                    STRING [12369,12518]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [12369,12518]
                            OBJECT [12520,12723]
                                FIELD [12521,12551]
                                    String: "name" [12521,12527]
                                    STRING [12528,12551]
                                        String: "Failure short reports" [12528,12551]
                                FIELD [12552,12575]
                                    String: "if" [12552,12556]
                                    STRING [12557,12575]
                                        String: "${{ failure() }}" [12557,12575]
                                FIELD [12576,12600]
                                    String: "continue-on-error" [12576,12595]
                                    TRUE [12596,12600]
                                FIELD [12601,12722]
                                    String: "run" [12601,12606]
                                    STRING [12607,12722]
                                        String: "cat /workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [12607,12722]
                            OBJECT [12724,13016]
                                FIELD [12725,12762]
                                    String: "name" [12725,12731]
                                    STRING [12732,12762]
                                        String: "Test suite reports artifacts" [12732,12762]
                                FIELD [12763,12785]
                                    String: "if" [12763,12767]
                                    STRING [12768,12785]
                                        String: "${{ always() }}" [12768,12785]
                                FIELD [12786,12821]
                                    String: "uses" [12786,12792]
                                    STRING [12793,12821]
                                        String: "actions/upload-artifact@v2" [12793,12821]
                                FIELD [12822,13015]
                                    String: "with" [12822,12828]
                                    OBJECT [12829,13015]
                                        FIELD [12830,12914]
                                            String: "name" [12830,12836]
                                            STRING [12837,12914]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [12837,12914]
                                        FIELD [12915,13014]
                                            String: "path" [12915,12921]
                                            STRING [12922,13014]
                                                String: "/workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [12922,13014]
            FIELD [13019,16081]
                String: "run_tests_torch_cuda_extensions_multi_gpu" [13019,13062]
                OBJECT [13063,16081]
                    FIELD [13064,13099]
                        String: "name" [13064,13070]
                        STRING [13071,13099]
                            String: "Torch CUDA extension tests" [13071,13099]
                    FIELD [13100,13115]
                        String: "needs" [13100,13107]
                        STRING [13108,13115]
                            String: "setup" [13108,13115]
                    FIELD [13116,13244]
                        String: "if" [13116,13120]
                        STRING [13121,13244]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [13121,13244]
                    FIELD [13245,13315]
                        String: "strategy" [13245,13255]
                        OBJECT [13256,13315]
                            FIELD [13257,13274]
                                String: "fail-fast" [13257,13268]
                                FALSE [13269,13274]
                            FIELD [13275,13314]
                                String: "matrix" [13275,13283]
                                OBJECT [13284,13314]
                                    FIELD [13285,13313]
                                        String: "machine_type" [13285,13299]
                                        ARRAY [13300,13313]
                                            STRING [13301,13312]
                                                String: "multi-gpu" [13301,13312]
                    FIELD [13316,13383]
                        String: "runs-on" [13316,13325]
                        ARRAY [13326,13383]
                            STRING [13327,13340]
                                String: "self-hosted" [13327,13340]
                            STRING [13341,13353]
                                String: "docker-gpu" [13341,13353]
                            STRING [13354,13382]
                                String: "${{ matrix.machine_type }}" [13354,13382]
                    FIELD [13384,13568]
                        String: "container" [13384,13395]
                        OBJECT [13396,13568]
                            FIELD [13397,13468]
                                String: "image" [13397,13404]
                                STRING [13405,13468]
                                    String: "huggingface/transformers-pytorch-deepspeed-latest-gpu-push-ci" [13405,13468]
                            FIELD [13469,13567]
                                String: "options" [13469,13478]
                                STRING [13479,13567]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [13479,13567]
                    FIELD [13569,16080]
                        String: "steps" [13569,13576]
                        ARRAY [13577,16080]
                            OBJECT [13578,14295]
                                FIELD [13579,13624]
                                    String: "name" [13579,13585]
                                    STRING [13586,13624]
                                        String: "Prepare custom environment variables" [13586,13624]
                                FIELD [13625,13639]
                                    String: "shell" [13625,13632]
                                    STRING [13633,13639]
                                        String: "bash" [13633,13639]
                                FIELD [13640,14294]
                                    String: "run" [13640,13645]
                                    STRING [13646,14294]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [13646,14294]
                            OBJECT [14296,14431]
                                FIELD [14297,14333]
                                    String: "name" [14297,14303]
                                    STRING [14304,14333]
                                        String: "print environment variables" [14304,14333]
                                FIELD [14334,14430]
                                    String: "run" [14334,14339]
                                    STRING [14340,14430]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [14340,14430]
                            OBJECT [14432,14763]
                                FIELD [14433,14482]
                                    String: "name" [14433,14439]
                                    STRING [14440,14482]
                                        String: "Update clone using environment variables" [14440,14482]
                                FIELD [14483,14528]
                                    String: "working-directory" [14483,14502]
                                    STRING [14503,14528]
                                        String: "/workspace/transformers" [14503,14528]
                                FIELD [14529,14762]
                                    String: "run" [14529,14534]
                                    STRING [14535,14762]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [14535,14762]
                            OBJECT [14764,14858]
                                FIELD [14765,14804]
                                    String: "name" [14765,14771]
                                    STRING [14772,14804]
                                        String: "Remove cached torch extensions" [14772,14804]
                                FIELD [14805,14857]
                                    String: "run" [14805,14810]
                                    STRING [14811,14857]
                                        String: "rm -rf /github/home/.cache/torch_extensions/" [14811,14857]
                            OBJECT [14859,15182]
                                FIELD [14860,14896]
                                    String: "name" [14860,14866]
                                    STRING [14867,14896]
                                        String: "Pre build DeepSpeed *again*" [14867,14896]
                                FIELD [14897,14929]
                                    String: "working-directory" [14897,14916]
                                    STRING [14917,14929]
                                        String: "/workspace" [14917,14929]
                                FIELD [14930,15181]
                                    String: "run" [14930,14935]
                                    STRING [14936,15181]
                                        String: "python3 -m pip uninstall -y deepspeed\nDS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 DS_BUILD_AIO=1 DS_BUILD_UTILS=1 python3 -m pip install deepspeed --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [14936,15181]
                            OBJECT [15183,15225]
                                FIELD [15184,15203]
                                    String: "name" [15184,15190]
                                    STRING [15191,15203]
                                        String: "NVIDIA-SMI" [15191,15203]
                                FIELD [15204,15224]
                                    String: "run" [15204,15209]
                                    STRING [15210,15224]
                                        String: "nvidia-smi\n" [15210,15224]
                            OBJECT [15226,15330]
                                FIELD [15227,15247]
                                    String: "name" [15227,15233]
                                    STRING [15234,15247]
                                        String: "Environment" [15234,15247]
                                FIELD [15248,15293]
                                    String: "working-directory" [15248,15267]
                                    STRING [15268,15293]
                                        String: "/workspace/transformers" [15268,15293]
                                FIELD [15294,15329]
                                    String: "run" [15294,15299]
                                    STRING [15300,15329]
                                        String: "python utils/print_env.py\n" [15300,15329]
                            OBJECT [15331,15582]
                                FIELD [15332,15379]
                                    String: "name" [15332,15338]
                                    STRING [15339,15379]
                                        String: "Run all non-slow selected tests on GPU" [15339,15379]
                                FIELD [15380,15425]
                                    String: "working-directory" [15380,15399]
                                    STRING [15400,15425]
                                        String: "/workspace/transformers" [15400,15425]
                                FIELD [15426,15581]
                                    String: "run" [15426,15431]
                                    STRING [15432,15581]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [15432,15581]
                            OBJECT [15583,15786]
                                FIELD [15584,15614]
                                    String: "name" [15584,15590]
                                    STRING [15591,15614]
                                        String: "Failure short reports" [15591,15614]
                                FIELD [15615,15638]
                                    String: "if" [15615,15619]
                                    STRING [15620,15638]
                                        String: "${{ failure() }}" [15620,15638]
                                FIELD [15639,15663]
                                    String: "continue-on-error" [15639,15658]
                                    TRUE [15659,15663]
                                FIELD [15664,15785]
                                    String: "run" [15664,15669]
                                    STRING [15670,15785]
                                        String: "cat /workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [15670,15785]
                            OBJECT [15787,16079]
                                FIELD [15788,15825]
                                    String: "name" [15788,15794]
                                    STRING [15795,15825]
                                        String: "Test suite reports artifacts" [15795,15825]
                                FIELD [15826,15848]
                                    String: "if" [15826,15830]
                                    STRING [15831,15848]
                                        String: "${{ always() }}" [15831,15848]
                                FIELD [15849,15884]
                                    String: "uses" [15849,15855]
                                    STRING [15856,15884]
                                        String: "actions/upload-artifact@v2" [15856,15884]
                                FIELD [15885,16078]
                                    String: "with" [15885,15891]
                                    OBJECT [15892,16078]
                                        FIELD [15893,15977]
                                            String: "name" [15893,15899]
                                            STRING [15900,15977]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [15900,15977]
                                        FIELD [15978,16077]
                                            String: "path" [15978,15984]
                                            STRING [15985,16077]
                                                String: "/workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [15985,16077]
            FIELD [16082,18666]
                String: "send_results" [16082,16096]
                OBJECT [16097,18666]
                    FIELD [16098,16130]
                        String: "name" [16098,16104]
                        STRING [16105,16130]
                            String: "Send results to webhook" [16105,16130]
                    FIELD [16131,16156]
                        String: "runs-on" [16131,16140]
                        STRING [16141,16156]
                            String: "ubuntu-latest" [16141,16156]
                    FIELD [16157,16172]
                        String: "if" [16157,16161]
                        STRING [16162,16172]
                            String: "always()" [16162,16172]
                    FIELD [16173,16362]
                        String: "needs" [16173,16180]
                        ARRAY [16181,16362]
                            STRING [16182,16203]
                                String: "check_runner_status" [16182,16203]
                            STRING [16204,16219]
                                String: "check_runners" [16204,16219]
                            STRING [16220,16227]
                                String: "setup" [16220,16227]
                            STRING [16228,16250]
                                String: "run_tests_single_gpu" [16228,16250]
                            STRING [16251,16272]
                                String: "run_tests_multi_gpu" [16251,16272]
                            STRING [16273,16317]
                                String: "run_tests_torch_cuda_extensions_single_gpu" [16273,16317]
                            STRING [16318,16361]
                                String: "run_tests_torch_cuda_extensions_multi_gpu" [16318,16361]
                    FIELD [16363,18665]
                        String: "steps" [16363,16370]
                        ARRAY [16371,18665]
                            OBJECT [16372,16609]
                                FIELD [16373,16404]
                                    String: "name" [16373,16379]
                                    STRING [16380,16404]
                                        String: "Preliminary job status" [16380,16404]
                                FIELD [16405,16419]
                                    String: "shell" [16405,16412]
                                    STRING [16413,16419]
                                        String: "bash" [16413,16419]
                                FIELD [16420,16608]
                                    String: "run" [16420,16425]
                                    STRING [16426,16608]
                                        String: "echo \"Runner availability: ${{ needs.check_runner_status.result }}\"\necho \"Setup status: ${{ needs.setup.result }}\"\necho \"Runner status: ${{ needs.check_runners.result }}\"\n" [16426,16608]
                            OBJECT [16610,17327]
                                FIELD [16611,16656]
                                    String: "name" [16611,16617]
                                    STRING [16618,16656]
                                        String: "Prepare custom environment variables" [16618,16656]
                                FIELD [16657,16671]
                                    String: "shell" [16657,16664]
                                    STRING [16665,16671]
                                        String: "bash" [16665,16671]
                                FIELD [16672,17326]
                                    String: "run" [16672,16677]
                                    STRING [16678,17326]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [16678,17326]
                            OBJECT [17328,17463]
                                FIELD [17329,17365]
                                    String: "name" [17329,17335]
                                    STRING [17336,17365]
                                        String: "print environment variables" [17336,17365]
                                FIELD [17366,17462]
                                    String: "run" [17366,17371]
                                    STRING [17372,17462]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [17372,17462]
                            OBJECT [17464,17520]
                                FIELD [17465,17493]
                                    String: "uses" [17465,17471]
                                    STRING [17472,17493]
                                        String: "actions/checkout@v2" [17472,17493]
                                FIELD [17494,17519]
                                    String: "with" [17494,17500]
                                    OBJECT [17501,17519]
                                        FIELD [17502,17518]
                                            String: "fetch-depth" [17502,17515]
                                            NUMBER [17516,17518]
                                                Number: 20 [17516,17518]
                            OBJECT [17521,17806]
                                FIELD [17522,17571]
                                    String: "name" [17522,17528]
                                    STRING [17529,17571]
                                        String: "Update clone using environment variables" [17529,17571]
                                FIELD [17572,17805]
                                    String: "run" [17572,17577]
                                    STRING [17578,17805]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [17578,17805]
                            OBJECT [17807,17846]
                                FIELD [17808,17845]
                                    String: "uses" [17808,17814]
                                    STRING [17815,17845]
                                        String: "actions/download-artifact@v2" [17815,17845]
                            OBJECT [17847,18664]
                                FIELD [17848,17878]
                                    String: "name" [17848,17854]
                                    STRING [17855,17878]
                                        String: "Send message to Slack" [17855,17878]
                                FIELD [17879,18557]
                                    String: "env" [17879,17884]
                                    OBJECT [17885,18557]
                                        FIELD [17886,17942]
                                            String: "CI_SLACK_BOT_TOKEN" [17886,17906]
                                            STRING [17907,17942]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [17907,17942]
                                        FIELD [17943,18001]
                                            String: "CI_SLACK_CHANNEL_ID" [17943,17964]
                                            STRING [17965,18001]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [17965,18001]
                                        FIELD [18002,18072]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [18002,18029]
                                            STRING [18030,18072]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [18030,18072]
                                        FIELD [18073,18149]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [18073,18103]
                                            STRING [18104,18149]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [18104,18149]
                                        FIELD [18150,18215]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [18150,18178]
                                            STRING [18179,18215]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [18179,18215]
                                        FIELD [18216,18233]
                                            String: "CI_EVENT" [18216,18226]
                                            STRING [18227,18233]
                                                String: "push" [18227,18233]
                                        FIELD [18234,18291]
                                            String: "CI_TITLE_PUSH" [18234,18249]
                                            STRING [18250,18291]
                                                String: "${{ github.event.head_commit.message }}" [18250,18291]
                                        FIELD [18292,18370]
                                            String: "CI_TITLE_WORKFLOW_RUN" [18292,18315]
                                            STRING [18316,18370]
                                                String: "${{ github.event.workflow_run.head_commit.message }}" [18316,18370]
                                        FIELD [18371,18399]
                                            String: "CI_SHA" [18371,18379]
                                            STRING [18380,18399]
                                                String: "${{ env.CI_SHA }}" [18380,18399]
                                        FIELD [18400,18457]
                                            String: "RUNNER_STATUS" [18400,18415]
                                            STRING [18416,18457]
                                                String: "${{ needs.check_runner_status.result }}" [18416,18457]
                                        FIELD [18458,18513]
                                            String: "RUNNER_ENV_STATUS" [18458,18477]
                                            STRING [18478,18513]
                                                String: "${{ needs.check_runners.result }}" [18478,18513]
                                        FIELD [18514,18556]
                                            String: "SETUP_STATUS" [18514,18528]
                                            STRING [18529,18556]
                                                String: "${{ needs.setup.result }}" [18529,18556]
                                FIELD [18558,18663]
                                    String: "run" [18558,18563]
                                    STRING [18564,18663]
                                        String: "pip install slack_sdk\npython utils/notification_service.py \"${{ needs.setup.outputs.matrix }}\"" [18564,18663]