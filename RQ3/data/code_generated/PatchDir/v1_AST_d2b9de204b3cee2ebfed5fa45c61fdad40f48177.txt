OBJECT [0,4984]
    FIELD [1,31]
        String: "name" [1,7]
        STRING [8,31]
            String: "CD - Kubernetes - Dev" [8,31]
    FIELD [32,277]
        String: "on" [32,36]
        OBJECT [37,277]
            FIELD [38,73]
                String: "schedule" [38,48]
                ARRAY [49,73]
                    OBJECT [50,72]
                        FIELD [51,71]
                            String: "cron" [51,57]
                            STRING [58,71]
                                String: "0 */3 * * *" [58,71]
            FIELD [74,276]
                String: "workflow_dispatch" [74,93]
                OBJECT [94,276]
                    FIELD [95,275]
                        String: "inputs" [95,103]
                        OBJECT [104,275]
                            FIELD [105,190]
                                String: "check-cache" [105,118]
                                OBJECT [119,190]
                                    FIELD [120,136]
                                        String: "type" [120,126]
                                        STRING [127,136]
                                            String: "boolean" [127,136]
                                    FIELD [137,173]
                                        String: "description" [137,150]
                                        STRING [151,173]
                                            String: "Check workflow cache" [151,173]
                                    FIELD [174,189]
                                        String: "default" [174,183]
                                        FALSE [184,189]
                            FIELD [191,274]
                                String: "deploy-helm" [191,204]
                                OBJECT [205,274]
                                    FIELD [206,222]
                                        String: "type" [206,212]
                                        STRING [213,222]
                                            String: "boolean" [213,222]
                                    FIELD [223,257]
                                        String: "description" [223,236]
                                        STRING [237,257]
                                            String: "Deploy Helm Charts" [237,257]
                                    FIELD [258,273]
                                        String: "default" [258,267]
                                        FALSE [268,273]
    FIELD [278,4983]
        String: "jobs" [278,284]
        OBJECT [285,4983]
            FIELD [286,814]
                String: "check-last-run" [286,302]
                OBJECT [303,814]
                    FIELD [304,329]
                        String: "runs-on" [304,313]
                        STRING [314,329]
                            String: "ubuntu-latest" [314,329]
                    FIELD [330,394]
                        String: "outputs" [330,339]
                        OBJECT [340,394]
                            FIELD [341,393]
                                String: "same-commit" [341,354]
                                STRING [355,393]
                                    String: "${{ steps.cache.outputs.cache-hit }}" [355,393]
                    FIELD [395,813]
                        String: "steps" [395,402]
                        ARRAY [403,813]
                            OBJECT [404,647]
                                FIELD [405,435]
                                    String: "name" [405,411]
                                    STRING [412,435]
                                        String: "Check for new changes" [412,435]
                                FIELD [436,519]
                                    String: "if" [436,440]
                                    STRING [441,519]
                                        String: "github.event_name == 'schedule' || github.event.inputs.check-cache == 'true'" [441,519]
                                FIELD [520,532]
                                    String: "id" [520,524]
                                    STRING [525,532]
                                        String: "cache" [525,532]
                                FIELD [533,558]
                                    String: "uses" [533,539]
                                    STRING [540,558]
                                        String: "actions/cache@v3" [540,558]
                                FIELD [559,646]
                                    String: "with" [559,565]
                                    OBJECT [566,646]
                                        FIELD [567,592]
                                            String: "path" [567,573]
                                            STRING [574,592]
                                                String: "k8s_dev_hash.txt" [574,592]
                                        FIELD [593,626]
                                            String: "key" [593,598]
                                            STRING [599,626]
                                                String: "k8s-dev-${{ github.sha }}" [599,626]
                                        FIELD [627,645]
                                            String: "lookup-only" [627,640]
                                            TRUE [641,645]
                            OBJECT [648,812]
                                FIELD [649,673]
                                    String: "name" [649,655]
                                    STRING [656,673]
                                        String: "Save Commit SHA" [656,673]
                                FIELD [674,757]
                                    String: "if" [674,678]
                                    STRING [679,757]
                                        String: "github.event_name == 'schedule' || github.event.inputs.check-cache == 'true'" [679,757]
                                FIELD [758,811]
                                    String: "run" [758,763]
                                    STRING [764,811]
                                        String: "echo \"${{ github.sha }}\" > k8s_dev_hash.txt" [764,811]
            FIELD [815,4982]
                String: "deploy-syft-dev" [815,832]
                OBJECT [833,4982]
                    FIELD [834,858]
                        String: "needs" [834,841]
                        STRING [842,858]
                            String: "check-last-run" [842,858]
                    FIELD [859,916]
                        String: "if" [859,863]
                        STRING [864,916]
                            String: "needs.check-last-run.outputs.same-commit != 'true'" [864,916]
                    FIELD [917,942]
                        String: "runs-on" [917,926]
                        STRING [927,942]
                            String: "ubuntu-latest" [927,942]
                    FIELD [943,4981]
                        String: "steps" [943,950]
                        ARRAY [951,4981]
                            OBJECT [952,1033]
                                FIELD [953,990]
                                    String: "name" [953,959]
                                    STRING [960,990]
                                        String: "Permission to home directory" [960,990]
                                FIELD [991,1032]
                                    String: "run" [991,996]
                                    STRING [997,1032]
                                        String: "sudo chown -R $USER:$USER $HOME\n" [997,1032]
                            OBJECT [1034,1064]
                                FIELD [1035,1063]
                                    String: "uses" [1035,1041]
                                    STRING [1042,1063]
                                        String: "actions/checkout@v4" [1042,1063]
                            OBJECT [1065,1259]
                                FIELD [1066,1094]
                                    String: "name" [1066,1072]
                                    STRING [1073,1094]
                                        String: "Checkout Infra Repo" [1073,1094]
                                FIELD [1095,1123]
                                    String: "uses" [1095,1101]
                                    STRING [1102,1123]
                                        String: "actions/checkout@v4" [1102,1123]
                                FIELD [1124,1258]
                                    String: "with" [1124,1130]
                                    OBJECT [1131,1258]
                                        FIELD [1132,1172]
                                            String: "repository" [1132,1144]
                                            STRING [1145,1172]
                                                String: "${{ secrets.INFRA_REPO }}" [1145,1172]
                                        FIELD [1173,1185]
                                            String: "ref" [1173,1178]
                                            STRING [1179,1185]
                                                String: "main" [1179,1185]
                                        FIELD [1186,1233]
                                            String: "token" [1186,1193]
                                            STRING [1194,1233]
                                                String: "${{ secrets.INFRA_BOT_COMMIT_TOKEN }}" [1194,1233]
                                        FIELD [1234,1257]
                                            String: "path" [1234,1240]
                                            STRING [1241,1257]
                                                String: "infrastructure" [1241,1257]
                            OBJECT [1260,1350]
                                FIELD [1261,1283]
                                    String: "name" [1261,1267]
                                    STRING [1268,1283]
                                        String: "Set up Python" [1268,1283]
                                FIELD [1284,1316]
                                    String: "uses" [1284,1290]
                                    STRING [1291,1316]
                                        String: "actions/setup-python@v3" [1291,1316]
                                FIELD [1317,1349]
                                    String: "with" [1317,1323]
                                    OBJECT [1324,1349]
                                        FIELD [1325,1348]
                                            String: "python-version" [1325,1341]
                                            STRING [1342,1348]
                                                String: "3.11" [1342,1348]
                            OBJECT [1351,1435]
                                FIELD [1352,1381]
                                    String: "name" [1352,1358]
                                    STRING [1359,1381]
                                        String: "Set up Docker Buildx" [1359,1381]
                                FIELD [1382,1395]
                                    String: "id" [1382,1386]
                                    STRING [1387,1395]
                                        String: "buildx" [1387,1395]
                                FIELD [1396,1434]
                                    String: "uses" [1396,1402]
                                    STRING [1403,1434]
                                        String: "docker/setup-buildx-action@v3" [1403,1434]
                            OBJECT [1436,1541]
                                FIELD [1437,1463]
                                    String: "name" [1437,1443]
                                    STRING [1444,1463]
                                        String: "Install Azure CLI" [1444,1463]
                                FIELD [1464,1540]
                                    String: "run" [1464,1469]
                                    STRING [1470,1540]
                                        String: "curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash\naz version\n" [1470,1540]
                            OBJECT [1542,1657]
                                FIELD [1543,1570]
                                    String: "name" [1543,1549]
                                    STRING [1550,1570]
                                        String: "Login to Azure CLI" [1550,1570]
                                FIELD [1571,1594]
                                    String: "uses" [1571,1577]
                                    STRING [1578,1594]
                                        String: "azure/login@v1" [1578,1594]
                                FIELD [1595,1656]
                                    String: "with" [1595,1601]
                                    OBJECT [1602,1656]
                                        FIELD [1603,1655]
                                            String: "creds" [1603,1610]
                                            STRING [1611,1655]
                                                String: "${{ secrets.AZURE_CREDENTIALS_GITHUB_CI }}" [1611,1655]
                            OBJECT [1658,1867]
                                FIELD [1659,1701]
                                    String: "name" [1659,1665]
                                    STRING [1666,1701]
                                        String: "Login to Azure Container Registry" [1666,1701]
                                FIELD [1702,1732]
                                    String: "uses" [1702,1708]
                                    STRING [1709,1732]
                                        String: "azure/docker-login@v1" [1709,1732]
                                FIELD [1733,1866]
                                    String: "with" [1733,1739]
                                    OBJECT [1740,1866]
                                        FIELD [1741,1783]
                                            String: "login-server" [1741,1755]
                                            STRING [1756,1783]
                                                String: "${{ secrets.ACR_SERVER }}" [1756,1783]
                                        FIELD [1784,1824]
                                            String: "username" [1784,1794]
                                            STRING [1795,1824]
                                                String: "${{ secrets.ACR_USERNAME }}" [1795,1824]
                                        FIELD [1825,1865]
                                            String: "password" [1825,1835]
                                            STRING [1836,1865]
                                                String: "${{ secrets.ACR_PASSWORD }}" [1836,1865]
                            OBJECT [1868,2010]
                                FIELD [1869,1902]
                                    String: "name" [1869,1875]
                                    STRING [1876,1902]
                                        String: "Set Grid package version" [1876,1902]
                                FIELD [1903,1914]
                                    String: "id" [1903,1907]
                                    STRING [1908,1914]
                                        String: "grid" [1908,1914]
                                FIELD [1915,1929]
                                    String: "shell" [1915,1922]
                                    STRING [1923,1929]
                                        String: "bash" [1923,1929]
                                FIELD [1930,2009]
                                    String: "run" [1930,1935]
                                    STRING [1936,2009]
                                        String: "echo \"GRID_VERSION=$(python packages/grid/VERSION)\" >> $GITHUB_OUTPUT" [1936,2009]
                            OBJECT [2011,2446]
                                FIELD [2012,2068]
                                    String: "name" [2012,2018]
                                    STRING [2019,2068]
                                        String: "Build and push `grid-backend` image to registry" [2019,2068]
                                FIELD [2069,2105]
                                    String: "uses" [2069,2075]
                                    STRING [2076,2105]
                                        String: "docker/build-push-action@v5" [2076,2105]
                                FIELD [2106,2445]
                                    String: "with" [2106,2112]
                                    OBJECT [2113,2445]
                                        FIELD [2114,2136]
                                            String: "context" [2114,2123]
                                            STRING [2124,2136]
                                                String: "./packages" [2124,2136]
                                        FIELD [2137,2188]
                                            String: "file" [2137,2143]
                                            STRING [2144,2188]
                                                String: "./packages/grid/backend/backend.dockerfile" [2144,2188]
                                        FIELD [2189,2200]
                                            String: "push" [2189,2195]
                                            TRUE [2196,2200]
                                        FIELD [2201,2219]
                                            String: "target" [2201,2209]
                                            STRING [2210,2219]
                                                String: "backend" [2210,2219]
                                        FIELD [2220,2444]
                                            String: "tags" [2220,2226]
                                            STRING [2227,2444]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-backend:${{ steps.grid.outputs.GRID_VERSION }}\n" [2227,2444]
                            OBJECT [2447,2914]
                                FIELD [2448,2505]
                                    String: "name" [2448,2454]
                                    STRING [2455,2505]
                                        String: "Build and push `grid-frontend` image to registry" [2455,2505]
                                FIELD [2506,2542]
                                    String: "uses" [2506,2512]
                                    STRING [2513,2542]
                                        String: "docker/build-push-action@v5" [2513,2542]
                                FIELD [2543,2913]
                                    String: "with" [2543,2549]
                                    OBJECT [2550,2913]
                                        FIELD [2551,2587]
                                            String: "context" [2551,2560]
                                            STRING [2561,2587]
                                                String: "./packages/grid/frontend" [2561,2587]
                                        FIELD [2588,2641]
                                            String: "file" [2588,2594]
                                            STRING [2595,2641]
                                                String: "./packages/grid/frontend/frontend.dockerfile" [2595,2641]
                                        FIELD [2642,2653]
                                            String: "push" [2642,2648]
                                            TRUE [2649,2653]
                                        FIELD [2654,2881]
                                            String: "tags" [2654,2660]
                                            STRING [2661,2881]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-frontend:${{ steps.grid.outputs.GRID_VERSION }}\n" [2661,2881]
                                        FIELD [2882,2912]
                                            String: "target" [2882,2890]
                                            STRING [2891,2912]
                                                String: "grid-ui-development" [2891,2912]
                            OBJECT [2915,3902]
                                FIELD [2916,2957]
                                    String: "name" [2916,2922]
                                    STRING [2923,2957]
                                        String: "Build Helm Chart & Copy to infra" [2923,2957]
                                FIELD [2958,3040]
                                    String: "if" [2958,2962]
                                    STRING [2963,3040]
                                        String: "github.ref == 'refs/heads/dev' || github.event.inputs.deploy-helm == 'true'" [2963,3040]
                                FIELD [3041,3055]
                                    String: "shell" [3041,3048]
                                    STRING [3049,3055]
                                        String: "bash" [3049,3055]
                                FIELD [3056,3901]
                                    String: "run" [3056,3061]
                                    STRING [3062,3901]
                                        String: "K3D_VERSION=v5.6.0\nDEVSPACE_VERSION=v6.3.3\n\n# install k3d\nwget https://github.com/k3d-io/k3d/releases/download/${K3D_VERSION}/k3d-linux-amd64\nmv k3d-linux-amd64 k3d\nchmod +x k3d\nexport PATH=`pwd`:$PATH\nk3d version\n\n# Install devspace\ncurl -sSL https://github.com/loft-sh/devspace/releases/download/${DEVSPACE_VERSION}/devspace-linux-amd64 -o ./devspace\nchmod +x devspace\ndevspace version\n\n# Install helm\ncurl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash\nhelm version\n\nexport CONTAINER_REGISTRY=${{ secrets.ACR_SERVER }}\nexport VERSION=dev-${{github.sha}}\ntox -e syft.build.helm\n\nrm -rf infrastructure/gitops/environments/dev/\nmkdir -p infrastructure/gitops/environments/dev/\ncp -R packages/grid/helm/syft/. packages/grid/helm/manifests.yaml infrastructure/gitops/environments/dev/\n" [3062,3901]
                            OBJECT [3903,4261]
                                FIELD [3904,3948]
                                    String: "name" [3904,3910]
                                    STRING [3911,3948]
                                        String: "Commit & push changes to Infra Repo" [3911,3948]
                                FIELD [3949,4031]
                                    String: "if" [3949,3953]
                                    STRING [3954,4031]
                                        String: "github.ref == 'refs/heads/dev' || github.event.inputs.deploy-helm == 'true'" [3954,4031]
                                FIELD [4032,4065]
                                    String: "uses" [4032,4038]
                                    STRING [4039,4065]
                                        String: "EndBug/add-and-commit@v9" [4039,4065]
                                FIELD [4066,4260]
                                    String: "with" [4066,4072]
                                    OBJECT [4073,4260]
                                        FIELD [4074,4116]
                                            String: "author_name" [4074,4087]
                                            STRING [4088,4116]
                                                String: "${{ secrets.OM_BOT_NAME }}" [4088,4116]
                                        FIELD [4117,4161]
                                            String: "author_email" [4117,4131]
                                            STRING [4132,4161]
                                                String: "${{ secrets.OM_BOT_EMAIL }}" [4132,4161]
                                        FIELD [4162,4202]
                                            String: "message" [4162,4171]
                                            STRING [4172,4202]
                                                String: "[env] Update dev helm charts" [4172,4202]
                                        FIELD [4203,4212]
                                            String: "add" [4203,4208]
                                            STRING [4209,4212]
                                                String: "." [4209,4212]
                                        FIELD [4213,4233]
                                            String: "push" [4213,4219]
                                            STRING [4220,4233]
                                                String: "origin main" [4220,4233]
                                        FIELD [4234,4259]
                                            String: "cwd" [4234,4239]
                                            STRING [4240,4259]
                                                String: "./infrastructure/" [4240,4259]
                            OBJECT [4262,4868]
                                FIELD [4263,4304]
                                    String: "name" [4263,4269]
                                    STRING [4270,4304]
                                        String: "Cleanup Azure Container Registry" [4270,4304]
                                FIELD [4305,4867]
                                    String: "run" [4305,4310]
                                    STRING [4311,4867]
                                        String: "ACR_REGISTRY_NAME=${{ secrets.ACR_REGISTRY_NAME }}\n\necho \">> Fetching repo list..\"\nREPO_LIST=$(az acr repository list -n $ACR_REGISTRY_NAME -o tsv)\n\nKEEP_PREV_VERSIONS=5\nTAIL_FROM_LINE=$(($KEEP_PREV_VERSIONS + 1))\n\nfor repo in $REPO_LIST\ndo\n    echo \"Cleaning up '$repo'\"\n    az acr repository show-tags --name $ACR_REGISTRY_NAME --repository $repo --orderby time_desc --output tsv \\\n      | grep dev- \\\n      | tail -n +$TAIL_FROM_LINE \\\n      | xargs -r -I% az acr repository untag --name $ACR_REGISTRY_NAME --image $repo:%\ndone\n" [4311,4867]
                            OBJECT [4869,4980]
                                FIELD [4870,4911]
                                    String: "name" [4870,4876]
                                    STRING [4877,4911]
                                        String: "Logout and cleanup Azure account" [4877,4911]
                                FIELD [4912,4927]
                                    String: "if" [4912,4916]
                                    STRING [4917,4927]
                                        String: "always()" [4917,4927]
                                FIELD [4928,4979]
                                    String: "run" [4928,4933]
                                    STRING [4934,4979]
                                        String: "az logout\naz cache purge\naz account clear" [4934,4979]