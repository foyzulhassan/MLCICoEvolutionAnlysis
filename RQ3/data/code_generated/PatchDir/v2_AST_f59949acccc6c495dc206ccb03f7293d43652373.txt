OBJECT [0,1919]
    FIELD [1,42]
        String: "name" [1,7]
        STRING [8,42]
            String: "DFFML: Build: Images: Containers" [8,42]
    FIELD [43,101]
        String: "on" [43,47]
        OBJECT [48,101]
            FIELD [49,100]
                String: "push" [49,55]
                OBJECT [56,100]
                    FIELD [57,76]
                        String: "branches" [57,67]
                        ARRAY [68,76]
                            STRING [69,75]
                                String: "main" [69,75]
                    FIELD [77,99]
                        String: "paths" [77,84]
                        ARRAY [85,99]
                            STRING [86,98]
                                String: "Dockerfile" [86,98]
    FIELD [102,1918]
        String: "jobs" [102,108]
        OBJECT [109,1918]
            FIELD [110,1717]
                String: "manifest" [110,120]
                OBJECT [121,1717]
                    FIELD [122,147]
                        String: "runs-on" [122,131]
                        STRING [132,147]
                            String: "ubuntu-latest" [132,147]
                    FIELD [148,227]
                        String: "outputs" [148,157]
                        OBJECT [158,227]
                            FIELD [159,226]
                                String: "manifest" [159,169]
                                STRING [170,226]
                                    String: "${{ steps.create-manifest-instance.outputs.manifest }}" [170,226]
                    FIELD [228,1716]
                        String: "steps" [228,235]
                        ARRAY [236,1716]
                            OBJECT [237,328]
                                FIELD [238,264]
                                    String: "name" [238,244]
                                    STRING [245,264]
                                        String: "Set up Python 3.9" [245,264]
                                FIELD [265,297]
                                    String: "uses" [265,271]
                                    STRING [272,297]
                                        String: "actions/setup-python@v2" [272,297]
                                FIELD [298,327]
                                    String: "with" [298,304]
                                    OBJECT [305,327]
                                        FIELD [306,326]
                                            String: "python-version" [306,322]
                                            NUMBER [323,326]
                                                Number: 3.9 [323,326]
                            OBJECT [329,1715]
                                FIELD [330,378]
                                    String: "name" [330,336]
                                    STRING [337,378]
                                        String: "Build manifest from changed dockerfiles" [337,378]
                                FIELD [379,410]
                                    String: "id" [379,383]
                                    STRING [384,410]
                                        String: "create-manifest-instance" [384,410]
                                FIELD [411,624]
                                    String: "env" [411,416]
                                    OBJECT [417,624]
                                        FIELD [418,439]
                                            String: "PREFIX" [418,426]
                                            STRING [427,439]
                                                String: "Dockerfile" [427,439]
                                        FIELD [440,485]
                                            String: "OWNER_REPOSITORY" [440,458]
                                            STRING [459,485]
                                                String: "${{ github.repository }}" [459,485]
                                        FIELD [486,519]
                                            String: "BRANCH" [486,494]
                                            STRING [495,519]
                                                String: "${{ github.ref_name }}" [495,519]
                                        FIELD [520,583]
                                            String: "COMPARE_URL" [520,533]
                                            STRING [534,583]
                                                String: "${{ github.event.push.repository.compare_url }}" [534,583]
                                        FIELD [584,623]
                                            String: "GH_ACCESS_TOKEN" [584,601]
                                            STRING [602,623]
                                                String: "${{ github.token }}" [602,623]
                                FIELD [625,648]
                                    String: "shell" [625,632]
                                    STRING [633,648]
                                        String: "python -u {0}" [633,648]
                                FIELD [649,1714]
                                    String: "run" [649,654]
                                    STRING [655,1714]
                                        String: "import os\nimport json\nimport pathlib\nimport urllib.request\n\nowner, repository = os.environ[\"OWNER_REPOSITORY\"].split(\"/\", maxsplit=1)\n\nwith urllib.request.urlopen(\n    urllib.request.Request(\n        os.environ[\"COMPARE_URL\"],\n        headers={\n            \"Authorization\": \"bearer \" + os.environ[\"GH_ACCESS_TOKEN\"],\n        },\n    )\n) as response:\n    response_json = json.load(response)\n\n# Build the most recent commit\ncommit = response_json[\"commits\"][-1][\"sha\"]\n\nmanifest = list([\n    {\n        \"image_name\": pathlib.Path(compare_file[\"filename\"]).stem,\n        \"dockerfile\": compare_file[\"filename\"],\n        \"owner\": owner,\n        \"repository\": repository,\n        \"branch\": os.environ[\"BRANCH\"],\n        \"commit\": commit,\n    }\n    for compare_file in response_json[\"files\"]\n    if compare_file[\"filename\"].startswith(os.environ[\"PREFIX\"])\n])\n\nprint(json.dumps(manifest, sort_keys=True, indent=4))\nprint(\"::set-output name=matrix::\" + json.dumps({\"include\": manifest}))\n" [655,1714]
            FIELD [1718,1917]
                String: "build" [1718,1725]
                OBJECT [1726,1917]
                    FIELD [1727,1745]
                        String: "needs" [1727,1734]
                        STRING [1735,1745]
                            String: "manifest" [1735,1745]
                    FIELD [1746,1802]
                        String: "uses" [1746,1752]
                        STRING [1753,1802]
                            String: "./.github/workflows/build_images_containers.yml" [1753,1802]
                    FIELD [1803,1864]
                        String: "with" [1803,1809]
                        OBJECT [1810,1864]
                            FIELD [1811,1863]
                                String: "manifests" [1811,1822]
                                STRING [1823,1863]
                                    String: "${{ needs.manifest.outputs.manifest }}" [1823,1863]
                    FIELD [1865,1916]
                        String: "secrets" [1865,1874]
                        OBJECT [1875,1916]
                            FIELD [1876,1915]
                                String: "GH_ACCESS_TOKEN" [1876,1893]
                                STRING [1894,1915]
                                    String: "${{ github.token }}" [1894,1915]