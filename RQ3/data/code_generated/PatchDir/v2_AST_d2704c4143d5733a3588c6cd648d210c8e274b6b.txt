OBJECT [0,11033]
    FIELD [1,40]
        String: "name" [1,7]
        STRING [8,40]
            String: "Self-hosted runner (scheduled)" [8,40]
    FIELD [41,108]
        String: "on" [41,45]
        OBJECT [46,108]
            FIELD [47,73]
                String: "repository_dispatch" [47,68]
                NULL [69,73]
            FIELD [74,107]
                String: "schedule" [74,84]
                ARRAY [85,107]
                    OBJECT [86,106]
                        FIELD [87,105]
                            String: "cron" [87,93]
                            STRING [94,105]
                                String: "0 2 * * *" [94,105]
    FIELD [109,333]
        String: "env" [109,114]
        OBJECT [115,333]
            FIELD [116,138]
                String: "HF_HOME" [116,125]
                STRING [126,138]
                    String: "/mnt/cache" [126,138]
            FIELD [139,164]
                String: "TRANSFORMERS_IS_CI" [139,159]
                TRUE [160,164]
            FIELD [165,184]
                String: "OMP_NUM_THREADS" [165,182]
                NUMBER [183,184]
                    Number: 8 [183,184]
            FIELD [185,204]
                String: "MKL_NUM_THREADS" [185,202]
                NUMBER [203,204]
                    Number: 8 [203,204]
            FIELD [205,220]
                String: "RUN_SLOW" [205,215]
                TRUE [216,220]
            FIELD [221,273]
                String: "SIGOPT_API_TOKEN" [221,239]
                STRING [240,273]
                    String: "${{ secrets.SIGOPT_API_TOKEN }}" [240,273]
            FIELD [274,306]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [274,301]
                TRUE [302,306]
            FIELD [307,332]
                String: "RUN_PT_TF_CROSS_TESTS" [307,330]
                NUMBER [331,332]
                    Number: 1 [331,332]
    FIELD [334,11032]
        String: "jobs" [334,340]
        OBJECT [341,11032]
            FIELD [342,1464]
                String: "setup" [342,349]
                OBJECT [350,1464]
                    FIELD [351,365]
                        String: "name" [351,357]
                        STRING [358,365]
                            String: "Setup" [358,365]
                    FIELD [366,431]
                        String: "strategy" [366,376]
                        OBJECT [377,431]
                            FIELD [378,430]
                                String: "matrix" [378,386]
                                OBJECT [387,430]
                                    FIELD [388,429]
                                        String: "machine_type" [388,402]
                                        ARRAY [403,429]
                                            STRING [404,416]
                                                String: "single-gpu" [404,416]
                                            STRING [417,428]
                                                String: "multi-gpu" [417,428]
                    FIELD [432,499]
                        String: "runs-on" [432,441]
                        STRING [442,499]
                            String: "${{ format('{0}-{1}', matrix.machine_type, 'docker') }}" [442,499]
                    FIELD [500,660]
                        String: "container" [500,511]
                        OBJECT [512,660]
                            FIELD [513,562]
                                String: "image" [513,520]
                                STRING [521,562]
                                    String: "huggingface/transformers-all-latest-gpu" [521,562]
                            FIELD [563,659]
                                String: "options" [563,572]
                                STRING [573,659]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [573,659]
                    FIELD [661,722]
                        String: "outputs" [661,670]
                        OBJECT [671,722]
                            FIELD [672,721]
                                String: "matrix" [672,680]
                                STRING [681,721]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [681,721]
                    FIELD [723,1463]
                        String: "steps" [723,730]
                        ARRAY [731,1463]
                            OBJECT [732,845]
                                FIELD [733,754]
                                    String: "name" [733,739]
                                    STRING [740,754]
                                        String: "Update clone" [740,754]
                                FIELD [755,790]
                                    String: "working-directory" [755,774]
                                    STRING [775,790]
                                        String: "/transformers" [775,790]
                                FIELD [791,844]
                                    String: "run" [791,796]
                                    STRING [797,844]
                                        String: "git fetch && git checkout ${{ github.sha }}\n" [797,844]
                            OBJECT [846,984]
                                FIELD [847,863]
                                    String: "name" [847,853]
                                    STRING [854,863]
                                        String: "Cleanup" [854,863]
                                FIELD [864,899]
                                    String: "working-directory" [864,883]
                                    STRING [884,899]
                                        String: "/transformers" [884,899]
                                FIELD [900,983]
                                    String: "run" [900,905]
                                    STRING [906,983]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [906,983]
                            OBJECT [985,1419]
                                FIELD [986,1003]
                                    String: "id" [986,990]
                                    STRING [991,1003]
                                        String: "set-matrix" [991,1003]
                                FIELD [1004,1036]
                                    String: "name" [1004,1010]
                                    STRING [1011,1036]
                                        String: "Identify models to test" [1011,1036]
                                FIELD [1037,1078]
                                    String: "working-directory" [1037,1056]
                                    STRING [1057,1078]
                                        String: "/transformers/tests" [1057,1078]
                                FIELD [1079,1418]
                                    String: "run" [1079,1084]
                                    STRING [1085,1418]
                                        String: "echo \"::set-output name=matrix::$(python3 -c 'import os; tests = os.getcwd(); model_tests = os.listdir(os.path.join(tests, \"models\")); d1 = sorted(list(filter(os.path.isdir, os.listdir(tests)))); d2 = sorted(list(filter(os.path.isdir, [f\"models/{x}\" for x in model_tests]))); d1.remove(\"models\"); d = d2 + d1; print(d)')\"\n" [1085,1418]
                            OBJECT [1420,1462]
                                FIELD [1421,1440]
                                    String: "name" [1421,1427]
                                    STRING [1428,1440]
                                        String: "NVIDIA-SMI" [1428,1440]
                                FIELD [1441,1461]
                                    String: "run" [1441,1446]
                                    STRING [1447,1461]
                                        String: "nvidia-smi\n" [1447,1461]
            FIELD [1465,3103]
                String: "run_tests_single_gpu" [1465,1487]
                OBJECT [1488,3103]
                    FIELD [1489,1509]
                        String: "name" [1489,1495]
                        STRING [1496,1509]
                            String: "Model tests" [1496,1509]
                    FIELD [1510,1637]
                        String: "strategy" [1510,1520]
                        OBJECT [1521,1637]
                            FIELD [1522,1539]
                                String: "fail-fast" [1522,1533]
                                FALSE [1534,1539]
                            FIELD [1540,1636]
                                String: "matrix" [1540,1548]
                                OBJECT [1549,1636]
                                    FIELD [1550,1605]
                                        String: "folders" [1550,1559]
                                        STRING [1560,1605]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [1560,1605]
                                    FIELD [1606,1635]
                                        String: "machine_type" [1606,1620]
                                        ARRAY [1621,1635]
                                            STRING [1622,1634]
                                                String: "single-gpu" [1622,1634]
                    FIELD [1638,1705]
                        String: "runs-on" [1638,1647]
                        STRING [1648,1705]
                            String: "${{ format('{0}-{1}', matrix.machine_type, 'docker') }}" [1648,1705]
                    FIELD [1706,1866]
                        String: "container" [1706,1717]
                        OBJECT [1718,1866]
                            FIELD [1719,1768]
                                String: "image" [1719,1726]
                                STRING [1727,1768]
                                    String: "huggingface/transformers-all-latest-gpu" [1727,1768]
                            FIELD [1769,1865]
                                String: "options" [1769,1778]
                                STRING [1779,1865]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1779,1865]
                    FIELD [1867,1882]
                        String: "needs" [1867,1874]
                        STRING [1875,1882]
                            String: "setup" [1875,1882]
                    FIELD [1883,3102]
                        String: "steps" [1883,1890]
                        ARRAY [1891,3102]
                            OBJECT [1892,2166]
                                FIELD [1893,1935]
                                    String: "name" [1893,1899]
                                    STRING [1900,1935]
                                        String: "Echo folder ${{ matrix.folders }}" [1900,1935]
                                FIELD [1936,1950]
                                    String: "shell" [1936,1943]
                                    STRING [1944,1950]
                                        String: "bash" [1944,1950]
                                FIELD [1951,2165]
                                    String: "run" [1951,1956]
                                    STRING [1957,2165]
                                        String: "echo \"${{ matrix.folders }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [1957,2165]
                            OBJECT [2167,2278]
                                FIELD [2168,2189]
                                    String: "name" [2168,2174]
                                    STRING [2175,2189]
                                        String: "Update clone" [2175,2189]
                                FIELD [2190,2225]
                                    String: "working-directory" [2190,2209]
                                    STRING [2210,2225]
                                        String: "/transformers" [2210,2225]
                                FIELD [2226,2277]
                                    String: "run" [2226,2231]
                                    STRING [2232,2277]
                                        String: "git fetch && git checkout ${{ github.sha }}" [2232,2277]
                            OBJECT [2279,2321]
                                FIELD [2280,2299]
                                    String: "name" [2280,2286]
                                    STRING [2287,2299]
                                        String: "NVIDIA-SMI" [2287,2299]
                                FIELD [2300,2320]
                                    String: "run" [2300,2305]
                                    STRING [2306,2320]
                                        String: "nvidia-smi\n" [2306,2320]
                            OBJECT [2322,2417]
                                FIELD [2323,2343]
                                    String: "name" [2323,2329]
                                    STRING [2330,2343]
                                        String: "Environment" [2330,2343]
                                FIELD [2344,2379]
                                    String: "working-directory" [2344,2363]
                                    STRING [2364,2379]
                                        String: "/transformers" [2364,2379]
                                FIELD [2380,2416]
                                    String: "run" [2380,2385]
                                    STRING [2386,2416]
                                        String: "python3 utils/print_env.py\n" [2386,2416]
                            OBJECT [2418,2616]
                                FIELD [2419,2448]
                                    String: "name" [2419,2425]
                                    STRING [2426,2448]
                                        String: "Run all tests on GPU" [2426,2448]
                                FIELD [2449,2484]
                                    String: "working-directory" [2449,2468]
                                    STRING [2469,2484]
                                        String: "/transformers" [2469,2484]
                                FIELD [2485,2615]
                                    String: "run" [2485,2490]
                                    STRING [2491,2615]
                                        String: "python3 -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} tests/${{ matrix.folders }}" [2491,2615]
                            OBJECT [2617,2810]
                                FIELD [2618,2648]
                                    String: "name" [2618,2624]
                                    STRING [2625,2648]
                                        String: "Failure short reports" [2625,2648]
                                FIELD [2649,2672]
                                    String: "if" [2649,2653]
                                    STRING [2654,2672]
                                        String: "${{ failure() }}" [2654,2672]
                                FIELD [2673,2697]
                                    String: "continue-on-error" [2673,2692]
                                    TRUE [2693,2697]
                                FIELD [2698,2809]
                                    String: "run" [2698,2703]
                                    STRING [2704,2809]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [2704,2809]
                            OBJECT [2811,3101]
                                FIELD [2812,2849]
                                    String: "name" [2812,2818]
                                    STRING [2819,2849]
                                        String: "Test suite reports artifacts" [2819,2849]
                                FIELD [2850,2872]
                                    String: "if" [2850,2854]
                                    STRING [2855,2872]
                                        String: "${{ always() }}" [2855,2872]
                                FIELD [2873,2908]
                                    String: "uses" [2873,2879]
                                    STRING [2880,2908]
                                        String: "actions/upload-artifact@v2" [2880,2908]
                                FIELD [2909,3100]
                                    String: "with" [2909,2915]
                                    OBJECT [2916,3100]
                                        FIELD [2917,3009]
                                            String: "name" [2917,2923]
                                            STRING [2924,3009]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [2924,3009]
                                        FIELD [3010,3099]
                                            String: "path" [3010,3016]
                                            STRING [3017,3099]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [3017,3099]
            FIELD [3104,4742]
                String: "run_tests_multi_gpu" [3104,3125]
                OBJECT [3126,4742]
                    FIELD [3127,3147]
                        String: "name" [3127,3133]
                        STRING [3134,3147]
                            String: "Model tests" [3134,3147]
                    FIELD [3148,3274]
                        String: "strategy" [3148,3158]
                        OBJECT [3159,3274]
                            FIELD [3160,3177]
                                String: "fail-fast" [3160,3171]
                                FALSE [3172,3177]
                            FIELD [3178,3273]
                                String: "matrix" [3178,3186]
                                OBJECT [3187,3273]
                                    FIELD [3188,3243]
                                        String: "folders" [3188,3197]
                                        STRING [3198,3243]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [3198,3243]
                                    FIELD [3244,3272]
                                        String: "machine_type" [3244,3258]
                                        ARRAY [3259,3272]
                                            STRING [3260,3271]
                                                String: "multi-gpu" [3260,3271]
                    FIELD [3275,3342]
                        String: "runs-on" [3275,3284]
                        STRING [3285,3342]
                            String: "${{ format('{0}-{1}', matrix.machine_type, 'docker') }}" [3285,3342]
                    FIELD [3343,3505]
                        String: "container" [3343,3354]
                        OBJECT [3355,3505]
                            FIELD [3356,3405]
                                String: "image" [3356,3363]
                                STRING [3364,3405]
                                    String: "huggingface/transformers-all-latest-gpu" [3364,3405]
                            FIELD [3406,3504]
                                String: "options" [3406,3415]
                                STRING [3416,3504]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [3416,3504]
                    FIELD [3506,3521]
                        String: "needs" [3506,3513]
                        STRING [3514,3521]
                            String: "setup" [3514,3521]
                    FIELD [3522,4741]
                        String: "steps" [3522,3529]
                        ARRAY [3530,4741]
                            OBJECT [3531,3805]
                                FIELD [3532,3574]
                                    String: "name" [3532,3538]
                                    STRING [3539,3574]
                                        String: "Echo folder ${{ matrix.folders }}" [3539,3574]
                                FIELD [3575,3589]
                                    String: "shell" [3575,3582]
                                    STRING [3583,3589]
                                        String: "bash" [3583,3589]
                                FIELD [3590,3804]
                                    String: "run" [3590,3595]
                                    STRING [3596,3804]
                                        String: "echo \"${{ matrix.folders }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [3596,3804]
                            OBJECT [3806,3917]
                                FIELD [3807,3828]
                                    String: "name" [3807,3813]
                                    STRING [3814,3828]
                                        String: "Update clone" [3814,3828]
                                FIELD [3829,3864]
                                    String: "working-directory" [3829,3848]
                                    STRING [3849,3864]
                                        String: "/transformers" [3849,3864]
                                FIELD [3865,3916]
                                    String: "run" [3865,3870]
                                    STRING [3871,3916]
                                        String: "git fetch && git checkout ${{ github.sha }}" [3871,3916]
                            OBJECT [3918,3960]
                                FIELD [3919,3938]
                                    String: "name" [3919,3925]
                                    STRING [3926,3938]
                                        String: "NVIDIA-SMI" [3926,3938]
                                FIELD [3939,3959]
                                    String: "run" [3939,3944]
                                    STRING [3945,3959]
                                        String: "nvidia-smi\n" [3945,3959]
                            OBJECT [3961,4056]
                                FIELD [3962,3982]
                                    String: "name" [3962,3968]
                                    STRING [3969,3982]
                                        String: "Environment" [3969,3982]
                                FIELD [3983,4018]
                                    String: "working-directory" [3983,4002]
                                    STRING [4003,4018]
                                        String: "/transformers" [4003,4018]
                                FIELD [4019,4055]
                                    String: "run" [4019,4024]
                                    STRING [4025,4055]
                                        String: "python3 utils/print_env.py\n" [4025,4055]
                            OBJECT [4057,4255]
                                FIELD [4058,4087]
                                    String: "name" [4058,4064]
                                    STRING [4065,4087]
                                        String: "Run all tests on GPU" [4065,4087]
                                FIELD [4088,4123]
                                    String: "working-directory" [4088,4107]
                                    STRING [4108,4123]
                                        String: "/transformers" [4108,4123]
                                FIELD [4124,4254]
                                    String: "run" [4124,4129]
                                    STRING [4130,4254]
                                        String: "python3 -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} tests/${{ matrix.folders }}" [4130,4254]
                            OBJECT [4256,4449]
                                FIELD [4257,4287]
                                    String: "name" [4257,4263]
                                    STRING [4264,4287]
                                        String: "Failure short reports" [4264,4287]
                                FIELD [4288,4311]
                                    String: "if" [4288,4292]
                                    STRING [4293,4311]
                                        String: "${{ failure() }}" [4293,4311]
                                FIELD [4312,4336]
                                    String: "continue-on-error" [4312,4331]
                                    TRUE [4332,4336]
                                FIELD [4337,4448]
                                    String: "run" [4337,4342]
                                    STRING [4343,4448]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [4343,4448]
                            OBJECT [4450,4740]
                                FIELD [4451,4488]
                                    String: "name" [4451,4457]
                                    STRING [4458,4488]
                                        String: "Test suite reports artifacts" [4458,4488]
                                FIELD [4489,4511]
                                    String: "if" [4489,4493]
                                    STRING [4494,4511]
                                        String: "${{ always() }}" [4494,4511]
                                FIELD [4512,4547]
                                    String: "uses" [4512,4518]
                                    STRING [4519,4547]
                                        String: "actions/upload-artifact@v2" [4519,4547]
                                FIELD [4548,4739]
                                    String: "with" [4548,4554]
                                    OBJECT [4555,4739]
                                        FIELD [4556,4648]
                                            String: "name" [4556,4562]
                                            STRING [4563,4648]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [4563,4648]
                                        FIELD [4649,4738]
                                            String: "path" [4649,4655]
                                            STRING [4656,4738]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [4656,4738]
            FIELD [4743,5807]
                String: "run_examples_gpu" [4743,4761]
                OBJECT [4762,5807]
                    FIELD [4763,4790]
                        String: "name" [4763,4769]
                        STRING [4770,4790]
                            String: "Examples directory" [4770,4790]
                    FIELD [4791,4836]
                        String: "runs-on" [4791,4800]
                        ARRAY [4801,4836]
                            STRING [4802,4815]
                                String: "self-hosted" [4802,4815]
                            STRING [4816,4835]
                                String: "single-gpu-docker" [4816,4835]
                    FIELD [4837,4997]
                        String: "container" [4837,4848]
                        OBJECT [4849,4997]
                            FIELD [4850,4899]
                                String: "image" [4850,4857]
                                STRING [4858,4899]
                                    String: "huggingface/transformers-all-latest-gpu" [4858,4899]
                            FIELD [4900,4996]
                                String: "options" [4900,4909]
                                STRING [4910,4996]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [4910,4996]
                    FIELD [4998,5013]
                        String: "needs" [4998,5005]
                        STRING [5006,5013]
                            String: "setup" [5006,5013]
                    FIELD [5014,5806]
                        String: "steps" [5014,5021]
                        ARRAY [5022,5806]
                            OBJECT [5023,5134]
                                FIELD [5024,5045]
                                    String: "name" [5024,5030]
                                    STRING [5031,5045]
                                        String: "Update clone" [5031,5045]
                                FIELD [5046,5081]
                                    String: "working-directory" [5046,5065]
                                    STRING [5066,5081]
                                        String: "/transformers" [5066,5081]
                                FIELD [5082,5133]
                                    String: "run" [5082,5087]
                                    STRING [5088,5133]
                                        String: "git fetch && git checkout ${{ github.sha }}" [5088,5133]
                            OBJECT [5135,5177]
                                FIELD [5136,5155]
                                    String: "name" [5136,5142]
                                    STRING [5143,5155]
                                        String: "NVIDIA-SMI" [5143,5155]
                                FIELD [5156,5176]
                                    String: "run" [5156,5161]
                                    STRING [5162,5176]
                                        String: "nvidia-smi\n" [5162,5176]
                            OBJECT [5178,5273]
                                FIELD [5179,5199]
                                    String: "name" [5179,5185]
                                    STRING [5186,5199]
                                        String: "Environment" [5186,5199]
                                FIELD [5200,5235]
                                    String: "working-directory" [5200,5219]
                                    STRING [5220,5235]
                                        String: "/transformers" [5220,5235]
                                FIELD [5236,5272]
                                    String: "run" [5236,5241]
                                    STRING [5242,5272]
                                        String: "python3 utils/print_env.py\n" [5242,5272]
                            OBJECT [5274,5479]
                                FIELD [5275,5309]
                                    String: "name" [5275,5281]
                                    STRING [5282,5309]
                                        String: "Run examples tests on GPU" [5282,5309]
                                FIELD [5310,5345]
                                    String: "working-directory" [5310,5329]
                                    STRING [5330,5345]
                                        String: "/transformers" [5330,5345]
                                FIELD [5346,5478]
                                    String: "run" [5346,5351]
                                    STRING [5352,5478]
                                        String: "pip install -r examples/pytorch/_tests_requirements.txt\npython3 -m pytest -v --make-reports=examples_gpu examples/pytorch\n" [5352,5478]
                            OBJECT [5480,5627]
                                FIELD [5481,5511]
                                    String: "name" [5481,5487]
                                    STRING [5488,5511]
                                        String: "Failure short reports" [5488,5511]
                                FIELD [5512,5535]
                                    String: "if" [5512,5516]
                                    STRING [5517,5535]
                                        String: "${{ failure() }}" [5517,5535]
                                FIELD [5536,5560]
                                    String: "continue-on-error" [5536,5555]
                                    TRUE [5556,5560]
                                FIELD [5561,5626]
                                    String: "run" [5561,5566]
                                    STRING [5567,5626]
                                        String: "cat /transformers/reports/examples_gpu/failures_short.txt" [5567,5626]
                            OBJECT [5628,5805]
                                FIELD [5629,5666]
                                    String: "name" [5629,5635]
                                    STRING [5636,5666]
                                        String: "Test suite reports artifacts" [5636,5666]
                                FIELD [5667,5689]
                                    String: "if" [5667,5671]
                                    STRING [5672,5689]
                                        String: "${{ always() }}" [5672,5689]
                                FIELD [5690,5725]
                                    String: "uses" [5690,5696]
                                    STRING [5697,5725]
                                        String: "actions/upload-artifact@v2" [5697,5725]
                                FIELD [5726,5804]
                                    String: "with" [5726,5732]
                                    OBJECT [5733,5804]
                                        FIELD [5734,5759]
                                            String: "name" [5734,5740]
                                            STRING [5741,5759]
                                                String: "run_examples_gpu" [5741,5759]
                                        FIELD [5760,5803]
                                            String: "path" [5760,5766]
                                            STRING [5767,5803]
                                                String: "/transformers/reports/examples_gpu" [5767,5803]
            FIELD [5808,7150]
                String: "run_pipelines_torch_gpu" [5808,5833]
                OBJECT [5834,7150]
                    FIELD [5835,5861]
                        String: "name" [5835,5841]
                        STRING [5842,5861]
                            String: "PyTorch pipelines" [5842,5861]
                    FIELD [5862,5945]
                        String: "strategy" [5862,5872]
                        OBJECT [5873,5945]
                            FIELD [5874,5891]
                                String: "fail-fast" [5874,5885]
                                FALSE [5886,5891]
                            FIELD [5892,5944]
                                String: "matrix" [5892,5900]
                                OBJECT [5901,5944]
                                    FIELD [5902,5943]
                                        String: "machine_type" [5902,5916]
                                        ARRAY [5917,5943]
                                            STRING [5918,5930]
                                                String: "single-gpu" [5918,5930]
                                            STRING [5931,5942]
                                                String: "multi-gpu" [5931,5942]
                    FIELD [5946,6013]
                        String: "runs-on" [5946,5955]
                        STRING [5956,6013]
                            String: "${{ format('{0}-{1}', matrix.machine_type, 'docker') }}" [5956,6013]
                    FIELD [6014,6173]
                        String: "container" [6014,6025]
                        OBJECT [6026,6173]
                            FIELD [6027,6073]
                                String: "image" [6027,6034]
                                STRING [6035,6073]
                                    String: "huggingface/transformers-pytorch-gpu" [6035,6073]
                            FIELD [6074,6172]
                                String: "options" [6074,6083]
                                STRING [6084,6172]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [6084,6172]
                    FIELD [6174,6189]
                        String: "needs" [6174,6181]
                        STRING [6182,6189]
                            String: "setup" [6182,6189]
                    FIELD [6190,7149]
                        String: "steps" [6190,6197]
                        ARRAY [6198,7149]
                            OBJECT [6199,6310]
                                FIELD [6200,6221]
                                    String: "name" [6200,6206]
                                    STRING [6207,6221]
                                        String: "Update clone" [6207,6221]
                                FIELD [6222,6257]
                                    String: "working-directory" [6222,6241]
                                    STRING [6242,6257]
                                        String: "/transformers" [6242,6257]
                                FIELD [6258,6309]
                                    String: "run" [6258,6263]
                                    STRING [6264,6309]
                                        String: "git fetch && git checkout ${{ github.sha }}" [6264,6309]
                            OBJECT [6311,6353]
                                FIELD [6312,6331]
                                    String: "name" [6312,6318]
                                    STRING [6319,6331]
                                        String: "NVIDIA-SMI" [6319,6331]
                                FIELD [6332,6352]
                                    String: "run" [6332,6337]
                                    STRING [6338,6352]
                                        String: "nvidia-smi\n" [6338,6352]
                            OBJECT [6354,6449]
                                FIELD [6355,6375]
                                    String: "name" [6355,6361]
                                    STRING [6362,6375]
                                        String: "Environment" [6362,6375]
                                FIELD [6376,6411]
                                    String: "working-directory" [6376,6395]
                                    STRING [6396,6411]
                                        String: "/transformers" [6396,6411]
                                FIELD [6412,6448]
                                    String: "run" [6412,6417]
                                    STRING [6418,6448]
                                        String: "python3 utils/print_env.py\n" [6418,6448]
                            OBJECT [6450,6705]
                                FIELD [6451,6489]
                                    String: "name" [6451,6457]
                                    STRING [6458,6489]
                                        String: "Run all pipeline tests on GPU" [6458,6489]
                                FIELD [6490,6525]
                                    String: "working-directory" [6490,6509]
                                    STRING [6510,6525]
                                        String: "/transformers" [6510,6525]
                                FIELD [6526,6559]
                                    String: "env" [6526,6531]
                                    OBJECT [6532,6559]
                                        FIELD [6533,6558]
                                            String: "RUN_PIPELINE_TESTS" [6533,6553]
                                            TRUE [6554,6558]
                                FIELD [6560,6704]
                                    String: "run" [6560,6565]
                                    STRING [6566,6704]
                                        String: "python3 -m pytest -n 1 -v --dist=loadfile -m is_pipeline_test --make-reports=${{ matrix.machine_type }}_tests_torch_pipeline_gpu tests\n" [6566,6704]
                            OBJECT [6706,6892]
                                FIELD [6707,6737]
                                    String: "name" [6707,6713]
                                    STRING [6714,6737]
                                        String: "Failure short reports" [6714,6737]
                                FIELD [6738,6761]
                                    String: "if" [6738,6742]
                                    STRING [6743,6761]
                                        String: "${{ failure() }}" [6743,6761]
                                FIELD [6762,6786]
                                    String: "continue-on-error" [6762,6781]
                                    TRUE [6782,6786]
                                FIELD [6787,6891]
                                    String: "run" [6787,6792]
                                    STRING [6793,6891]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_torch_pipeline_gpu/failures_short.txt" [6793,6891]
                            OBJECT [6893,7148]
                                FIELD [6894,6931]
                                    String: "name" [6894,6900]
                                    STRING [6901,6931]
                                        String: "Test suite reports artifacts" [6901,6931]
                                FIELD [6932,6954]
                                    String: "if" [6932,6936]
                                    STRING [6937,6954]
                                        String: "${{ always() }}" [6937,6954]
                                FIELD [6955,6990]
                                    String: "uses" [6955,6961]
                                    STRING [6962,6990]
                                        String: "actions/upload-artifact@v2" [6962,6990]
                                FIELD [6991,7147]
                                    String: "with" [6991,6997]
                                    OBJECT [6998,7147]
                                        FIELD [6999,7063]
                                            String: "name" [6999,7005]
                                            STRING [7006,7063]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_pipeline_gpu" [7006,7063]
                                        FIELD [7064,7146]
                                            String: "path" [7064,7070]
                                            STRING [7071,7146]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_torch_pipeline_gpu" [7071,7146]
            FIELD [7151,8462]
                String: "run_pipelines_tf_gpu" [7151,7173]
                OBJECT [7174,8462]
                    FIELD [7175,7204]
                        String: "name" [7175,7181]
                        STRING [7182,7204]
                            String: "TensorFlow pipelines" [7182,7204]
                    FIELD [7205,7288]
                        String: "strategy" [7205,7215]
                        OBJECT [7216,7288]
                            FIELD [7217,7234]
                                String: "fail-fast" [7217,7228]
                                FALSE [7229,7234]
                            FIELD [7235,7287]
                                String: "matrix" [7235,7243]
                                OBJECT [7244,7287]
                                    FIELD [7245,7286]
                                        String: "machine_type" [7245,7259]
                                        ARRAY [7260,7286]
                                            STRING [7261,7273]
                                                String: "single-gpu" [7261,7273]
                                            STRING [7274,7285]
                                                String: "multi-gpu" [7274,7285]
                    FIELD [7289,7356]
                        String: "runs-on" [7289,7298]
                        STRING [7299,7356]
                            String: "${{ format('{0}-{1}', matrix.machine_type, 'docker') }}" [7299,7356]
                    FIELD [7357,7519]
                        String: "container" [7357,7368]
                        OBJECT [7369,7519]
                            FIELD [7370,7419]
                                String: "image" [7370,7377]
                                STRING [7378,7419]
                                    String: "huggingface/transformers-tensorflow-gpu" [7378,7419]
                            FIELD [7420,7518]
                                String: "options" [7420,7429]
                                STRING [7430,7518]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [7430,7518]
                    FIELD [7520,7535]
                        String: "needs" [7520,7527]
                        STRING [7528,7535]
                            String: "setup" [7528,7535]
                    FIELD [7536,8461]
                        String: "steps" [7536,7543]
                        ARRAY [7544,8461]
                            OBJECT [7545,7658]
                                FIELD [7546,7567]
                                    String: "name" [7546,7552]
                                    STRING [7553,7567]
                                        String: "Update clone" [7553,7567]
                                FIELD [7568,7603]
                                    String: "working-directory" [7568,7587]
                                    STRING [7588,7603]
                                        String: "/transformers" [7588,7603]
                                FIELD [7604,7657]
                                    String: "run" [7604,7609]
                                    STRING [7610,7657]
                                        String: "git fetch && git checkout ${{ github.sha }}\n" [7610,7657]
                            OBJECT [7659,7701]
                                FIELD [7660,7679]
                                    String: "name" [7660,7666]
                                    STRING [7667,7679]
                                        String: "NVIDIA-SMI" [7667,7679]
                                FIELD [7680,7700]
                                    String: "run" [7680,7685]
                                    STRING [7686,7700]
                                        String: "nvidia-smi\n" [7686,7700]
                            OBJECT [7702,7797]
                                FIELD [7703,7723]
                                    String: "name" [7703,7709]
                                    STRING [7710,7723]
                                        String: "Environment" [7710,7723]
                                FIELD [7724,7759]
                                    String: "working-directory" [7724,7743]
                                    STRING [7744,7759]
                                        String: "/transformers" [7744,7759]
                                FIELD [7760,7796]
                                    String: "run" [7760,7765]
                                    STRING [7766,7796]
                                        String: "python3 utils/print_env.py\n" [7766,7796]
                            OBJECT [7798,8050]
                                FIELD [7799,7837]
                                    String: "name" [7799,7805]
                                    STRING [7806,7837]
                                        String: "Run all pipeline tests on GPU" [7806,7837]
                                FIELD [7838,7873]
                                    String: "working-directory" [7838,7857]
                                    STRING [7858,7873]
                                        String: "/transformers" [7858,7873]
                                FIELD [7874,7907]
                                    String: "env" [7874,7879]
                                    OBJECT [7880,7907]
                                        FIELD [7881,7906]
                                            String: "RUN_PIPELINE_TESTS" [7881,7901]
                                            TRUE [7902,7906]
                                FIELD [7908,8049]
                                    String: "run" [7908,7913]
                                    STRING [7914,8049]
                                        String: "python3 -m pytest -n 1 -v --dist=loadfile -m is_pipeline_test --make-reports=${{ matrix.machine_type }}_tests_tf_pipeline_gpu tests\n" [7914,8049]
                            OBJECT [8051,8210]
                                FIELD [8052,8082]
                                    String: "name" [8052,8058]
                                    STRING [8059,8082]
                                        String: "Failure short reports" [8059,8082]
                                FIELD [8083,8105]
                                    String: "if" [8083,8087]
                                    STRING [8088,8105]
                                        String: "${{ always() }}" [8088,8105]
                                FIELD [8106,8209]
                                    String: "run" [8106,8111]
                                    STRING [8112,8209]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_tf_pipeline_gpu/failures_short.txt\n" [8112,8209]
                            OBJECT [8211,8460]
                                FIELD [8212,8249]
                                    String: "name" [8212,8218]
                                    STRING [8219,8249]
                                        String: "Test suite reports artifacts" [8219,8249]
                                FIELD [8250,8272]
                                    String: "if" [8250,8254]
                                    STRING [8255,8272]
                                        String: "${{ always() }}" [8255,8272]
                                FIELD [8273,8308]
                                    String: "uses" [8273,8279]
                                    STRING [8280,8308]
                                        String: "actions/upload-artifact@v2" [8280,8308]
                                FIELD [8309,8459]
                                    String: "with" [8309,8315]
                                    OBJECT [8316,8459]
                                        FIELD [8317,8378]
                                            String: "name" [8317,8323]
                                            STRING [8324,8378]
                                                String: "${{ matrix.machine_type }}_run_tests_tf_pipeline_gpu" [8324,8378]
                                        FIELD [8379,8458]
                                            String: "path" [8379,8385]
                                            STRING [8386,8458]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_tf_pipeline_gpu" [8386,8458]
            FIELD [8463,10179]
                String: "run_all_tests_torch_cuda_extensions_gpu" [8463,8504]
                OBJECT [8505,10179]
                    FIELD [8506,8541]
                        String: "name" [8506,8512]
                        STRING [8513,8541]
                            String: "Torch CUDA extension tests" [8513,8541]
                    FIELD [8542,8625]
                        String: "strategy" [8542,8552]
                        OBJECT [8553,8625]
                            FIELD [8554,8571]
                                String: "fail-fast" [8554,8565]
                                FALSE [8566,8571]
                            FIELD [8572,8624]
                                String: "matrix" [8572,8580]
                                OBJECT [8581,8624]
                                    FIELD [8582,8623]
                                        String: "machine_type" [8582,8596]
                                        ARRAY [8597,8623]
                                            STRING [8598,8610]
                                                String: "single-gpu" [8598,8610]
                                            STRING [8611,8622]
                                                String: "multi-gpu" [8611,8622]
                    FIELD [8626,8693]
                        String: "runs-on" [8626,8635]
                        STRING [8636,8693]
                            String: "${{ format('{0}-{1}', matrix.machine_type, 'docker') }}" [8636,8693]
                    FIELD [8694,8709]
                        String: "needs" [8694,8701]
                        STRING [8702,8709]
                            String: "setup" [8702,8709]
                    FIELD [8710,8886]
                        String: "container" [8710,8721]
                        OBJECT [8722,8886]
                            FIELD [8723,8786]
                                String: "image" [8723,8730]
                                STRING [8731,8786]
                                    String: "huggingface/transformers-pytorch-deepspeed-latest-gpu" [8731,8786]
                            FIELD [8787,8885]
                                String: "options" [8787,8796]
                                STRING [8797,8885]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [8797,8885]
                    FIELD [8887,10178]
                        String: "steps" [8887,8894]
                        ARRAY [8895,10178]
                            OBJECT [8896,9017]
                                FIELD [8897,8918]
                                    String: "name" [8897,8903]
                                    STRING [8904,8918]
                                        String: "Update clone" [8904,8918]
                                FIELD [8919,8964]
                                    String: "working-directory" [8919,8938]
                                    STRING [8939,8964]
                                        String: "/workspace/transformers" [8939,8964]
                                FIELD [8965,9016]
                                    String: "run" [8965,8970]
                                    STRING [8971,9016]
                                        String: "git fetch && git checkout ${{ github.sha }}" [8971,9016]
                            OBJECT [9018,9319]
                                FIELD [9019,9055]
                                    String: "name" [9019,9025]
                                    STRING [9026,9055]
                                        String: "Pre build DeepSpeed *again*" [9026,9055]
                                FIELD [9056,9088]
                                    String: "working-directory" [9056,9075]
                                    STRING [9076,9088]
                                        String: "/workspace" [9076,9088]
                                FIELD [9089,9318]
                                    String: "run" [9089,9094]
                                    STRING [9095,9318]
                                        String: "python3 -m pip uninstall -y deepspeed\nDS_BUILD_CPU_ADAM=1 DS_BUILD_AIO=1 DS_BUILD_UTILS=1 python3 -m pip install deepspeed --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [9095,9318]
                            OBJECT [9320,9362]
                                FIELD [9321,9340]
                                    String: "name" [9321,9327]
                                    STRING [9328,9340]
                                        String: "NVIDIA-SMI" [9328,9340]
                                FIELD [9341,9361]
                                    String: "run" [9341,9346]
                                    STRING [9347,9361]
                                        String: "nvidia-smi\n" [9347,9361]
                            OBJECT [9363,9467]
                                FIELD [9364,9384]
                                    String: "name" [9364,9370]
                                    STRING [9371,9384]
                                        String: "Environment" [9371,9384]
                                FIELD [9385,9430]
                                    String: "working-directory" [9385,9404]
                                    STRING [9405,9430]
                                        String: "/workspace/transformers" [9405,9430]
                                FIELD [9431,9466]
                                    String: "run" [9431,9436]
                                    STRING [9437,9466]
                                        String: "python utils/print_env.py\n" [9437,9466]
                            OBJECT [9468,9680]
                                FIELD [9469,9498]
                                    String: "name" [9469,9475]
                                    STRING [9476,9498]
                                        String: "Run all tests on GPU" [9476,9498]
                                FIELD [9499,9544]
                                    String: "working-directory" [9499,9518]
                                    STRING [9519,9544]
                                        String: "/workspace/transformers" [9519,9544]
                                FIELD [9545,9679]
                                    String: "run" [9545,9550]
                                    STRING [9551,9679]
                                        String: "python -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [9551,9679]
                            OBJECT [9681,9884]
                                FIELD [9682,9712]
                                    String: "name" [9682,9688]
                                    STRING [9689,9712]
                                        String: "Failure short reports" [9689,9712]
                                FIELD [9713,9736]
                                    String: "if" [9713,9717]
                                    STRING [9718,9736]
                                        String: "${{ failure() }}" [9718,9736]
                                FIELD [9737,9761]
                                    String: "continue-on-error" [9737,9756]
                                    TRUE [9757,9761]
                                FIELD [9762,9883]
                                    String: "run" [9762,9767]
                                    STRING [9768,9883]
                                        String: "cat /workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [9768,9883]
                            OBJECT [9885,10177]
                                FIELD [9886,9923]
                                    String: "name" [9886,9892]
                                    STRING [9893,9923]
                                        String: "Test suite reports artifacts" [9893,9923]
                                FIELD [9924,9946]
                                    String: "if" [9924,9928]
                                    STRING [9929,9946]
                                        String: "${{ always() }}" [9929,9946]
                                FIELD [9947,9982]
                                    String: "uses" [9947,9953]
                                    STRING [9954,9982]
                                        String: "actions/upload-artifact@v2" [9954,9982]
                                FIELD [9983,10176]
                                    String: "with" [9983,9989]
                                    OBJECT [9990,10176]
                                        FIELD [9991,10075]
                                            String: "name" [9991,9997]
                                            STRING [9998,10075]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [9998,10075]
                                        FIELD [10076,10175]
                                            String: "path" [10076,10082]
                                            STRING [10083,10175]
                                                String: "/workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [10083,10175]
            FIELD [10180,11031]
                String: "send_results" [10180,10194]
                OBJECT [10195,11031]
                    FIELD [10196,10228]
                        String: "name" [10196,10202]
                        STRING [10203,10228]
                            String: "Send results to webhook" [10203,10228]
                    FIELD [10229,10254]
                        String: "runs-on" [10229,10238]
                        STRING [10239,10254]
                            String: "ubuntu-latest" [10239,10254]
                    FIELD [10255,10270]
                        String: "if" [10255,10259]
                        STRING [10260,10270]
                            String: "always()" [10260,10270]
                    FIELD [10271,10443]
                        String: "needs" [10271,10278]
                        ARRAY [10279,10443]
                            STRING [10280,10287]
                                String: "setup" [10280,10287]
                            STRING [10288,10310]
                                String: "run_tests_single_gpu" [10288,10310]
                            STRING [10311,10332]
                                String: "run_tests_multi_gpu" [10311,10332]
                            STRING [10333,10351]
                                String: "run_examples_gpu" [10333,10351]
                            STRING [10352,10374]
                                String: "run_pipelines_tf_gpu" [10352,10374]
                            STRING [10375,10400]
                                String: "run_pipelines_torch_gpu" [10375,10400]
                            STRING [10401,10442]
                                String: "run_all_tests_torch_cuda_extensions_gpu" [10401,10442]
                    FIELD [10444,11030]
                        String: "steps" [10444,10451]
                        ARRAY [10452,11030]
                            OBJECT [10453,10483]
                                FIELD [10454,10482]
                                    String: "uses" [10454,10460]
                                    STRING [10461,10482]
                                        String: "actions/checkout@v2" [10461,10482]
                            OBJECT [10484,10523]
                                FIELD [10485,10522]
                                    String: "uses" [10485,10491]
                                    STRING [10492,10522]
                                        String: "actions/download-artifact@v2" [10492,10522]
                            OBJECT [10524,11029]
                                FIELD [10525,10555]
                                    String: "name" [10525,10531]
                                    STRING [10532,10555]
                                        String: "Send message to Slack" [10532,10555]
                                FIELD [10556,10922]
                                    String: "env" [10556,10561]
                                    OBJECT [10562,10922]
                                        FIELD [10563,10619]
                                            String: "CI_SLACK_BOT_TOKEN" [10563,10583]
                                            STRING [10584,10619]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [10584,10619]
                                        FIELD [10620,10678]
                                            String: "CI_SLACK_CHANNEL_ID" [10620,10641]
                                            STRING [10642,10678]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [10642,10678]
                                        FIELD [10679,10749]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [10679,10706]
                                            STRING [10707,10749]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [10707,10749]
                                        FIELD [10750,10826]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [10750,10780]
                                            STRING [10781,10826]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [10781,10826]
                                        FIELD [10827,10898]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [10827,10855]
                                            STRING [10856,10898]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [10856,10898]
                                        FIELD [10899,10921]
                                            String: "CI_EVENT" [10899,10909]
                                            STRING [10910,10921]
                                                String: "scheduled" [10910,10921]
                                FIELD [10923,11028]
                                    String: "run" [10923,10928]
                                    STRING [10929,11028]
                                        String: "pip install slack_sdk\npython utils/notification_service.py \"${{ needs.setup.outputs.matrix }}\"" [10929,11028]