OBJECT [0,1551]
    FIELD [1,16]
        String: "name" [1,7]
        STRING [8,16]
            String: "Docker" [8,16]
    FIELD [17,88]
        String: "on" [17,21]
        OBJECT [22,88]
            FIELD [23,53]
                String: "push" [23,29]
                OBJECT [30,53]
                    FIELD [31,52]
                        String: "branches" [31,41]
                        ARRAY [42,52]
                            STRING [43,51]
                                String: "master" [43,51]
            FIELD [54,87]
                String: "release" [54,63]
                OBJECT [64,87]
                    FIELD [65,86]
                        String: "types" [65,72]
                        ARRAY [73,86]
                            STRING [74,85]
                                String: "published" [74,85]
    FIELD [89,1550]
        String: "jobs" [89,95]
        OBJECT [96,1550]
            FIELD [97,1549]
                String: "build" [97,104]
                OBJECT [105,1549]
                    FIELD [106,131]
                        String: "runs-on" [106,115]
                        STRING [116,131]
                            String: "ubuntu-latest" [116,131]
                    FIELD [132,178]
                        String: "if" [132,136]
                        STRING [137,178]
                            String: "github.repository == 'allenai/allennlp'" [137,178]
                    FIELD [179,1548]
                        String: "steps" [179,186]
                        ARRAY [187,1548]
                            OBJECT [188,218]
                                FIELD [189,217]
                                    String: "uses" [189,195]
                                    STRING [196,217]
                                        String: "actions/checkout@v2" [196,217]
                            OBJECT [219,961]
                                FIELD [220,246]
                                    String: "name" [220,226]
                                    STRING [227,246]
                                        String: "Setup environment" [227,246]
                                FIELD [247,960]
                                    String: "run" [247,252]
                                    STRING [253,960]
                                        String: "if [[ $GITHUB_EVENT_NAME == 'release' ]]; then\n    TAG=${GITHUB_REF/refs\\/tags\\//};\n    VERSION=$(echo $TAG | sed 's/^v//g');\n    echo \"Preparing environment for release $TAG\";\n    echo \"::set-env name=DOCKER_REPO::allennlp/allennlp\";\n    echo \"::set-env name=DOCKER_TAG::$TAG\";\n    echo \"::set-env name=BUILD_ARG_NAME::VERSION\";\n    echo \"::set-env name=BUILD_ARG_VALUE::$VERSION\";\nelse\n    echo \"Preparing environment for commit $GITHUB_SHA\";\n    echo \"::set-env name=DOCKER_REPO::allennlp/commit\";\n    echo \"::set-env name=DOCKER_TAG::$GITHUB_SHA\";\n    echo \"::set-env name=BUILD_ARG_NAME::SOURCE_COMMIT\";\n    echo \"::set-env name=BUILD_ARG_VALUE::$GITHUB_SHA\";\nfi\n" [253,960]
                            OBJECT [962,1312]
                                FIELD [963,983]
                                    String: "name" [963,969]
                                    STRING [970,983]
                                        String: "Build image" [970,983]
                                FIELD [984,1311]
                                    String: "run" [984,989]
                                    STRING [990,1311]
                                        String: "# Create a small context for the Docker with only the files that we need.\ntar -czvf context.tar.gz Dockerfile.pip scripts/ai2_internal/resumable_train.sh\ndocker build \\\n    --pull \\\n    --build-arg $BUILD_ARG_NAME=$BUILD_ARG_VALUE \\\n    -f Dockerfile.pip \\\n    -t $DOCKER_REPO:$DOCKER_TAG - < context.tar.gz\n" [990,1311]
                            OBJECT [1313,1398]
                                FIELD [1314,1333]
                                    String: "name" [1314,1320]
                                    STRING [1321,1333]
                                        String: "Test image" [1321,1333]
                                FIELD [1334,1397]
                                    String: "run" [1334,1339]
                                    STRING [1340,1397]
                                        String: "docker run --rm $DOCKER_REPO:$DOCKER_TAG test-install\n" [1340,1397]
                            OBJECT [1399,1547]
                                FIELD [1400,1419]
                                    String: "name" [1400,1406]
                                    STRING [1407,1419]
                                        String: "Push image" [1407,1419]
                                FIELD [1420,1546]
                                    String: "run" [1420,1425]
                                    STRING [1426,1546]
                                        String: "docker login -u ${{ secrets.DOCKER_USERNAME }} -p ${{ secrets.DOCKER_PASSWORD }}\ndocker push $DOCKER_REPO:$DOCKER_TAG" [1426,1546]