OBJECT [0,5612]
    FIELD [1,24]
        String: "name" [1,7]
        STRING [8,24]
            String: "OctoBot-Docker" [8,24]
    FIELD [25,101]
        String: "on" [25,29]
        OBJECT [30,101]
            FIELD [31,80]
                String: "push" [31,37]
                OBJECT [38,80]
                    FIELD [39,66]
                        String: "branches" [39,49]
                        ARRAY [50,66]
                            STRING [51,59]
                                String: "master" [51,59]
                            STRING [60,65]
                                String: "dev" [60,65]
                    FIELD [67,79]
                        String: "tags" [67,73]
                        ARRAY [74,79]
                            STRING [75,78]
                                String: "*" [75,78]
            FIELD [81,100]
                String: "pull_request" [81,95]
                NULL [96,100]
    FIELD [102,5611]
        String: "jobs" [102,108]
        OBJECT [109,5611]
            FIELD [110,374]
                String: "lint" [110,116]
                OBJECT [117,374]
                    FIELD [118,156]
                        String: "name" [118,124]
                        STRING [125,156]
                            String: "ubuntu-latest - Docker - lint" [125,156]
                    FIELD [157,182]
                        String: "runs-on" [157,166]
                        STRING [167,182]
                            String: "ubuntu-latest" [167,182]
                    FIELD [183,373]
                        String: "steps" [183,190]
                        ARRAY [191,373]
                            OBJECT [192,222]
                                FIELD [193,221]
                                    String: "uses" [193,199]
                                    STRING [200,221]
                                        String: "actions/checkout@v2" [200,221]
                            OBJECT [223,372]
                                FIELD [224,245]
                                    String: "name" [224,230]
                                    STRING [231,245]
                                        String: "Run hadolint" [231,245]
                                FIELD [246,283]
                                    String: "uses" [246,252]
                                    STRING [253,283]
                                        String: "reviewdog/action-hadolint@v1" [253,283]
                                FIELD [284,371]
                                    String: "with" [284,290]
                                    OBJECT [291,371]
                                        FIELD [292,336]
                                            String: "github_token" [292,306]
                                            STRING [307,336]
                                                String: "${{ secrets.github_token }}" [307,336]
                                        FIELD [337,370]
                                            String: "hadolint_ignore" [337,354]
                                            STRING [355,370]
                                                String: "DL3013 DL3008" [355,370]
            FIELD [375,2875]
                String: "build_and_test" [375,391]
                OBJECT [392,2875]
                    FIELD [393,407]
                        String: "needs" [393,400]
                        STRING [401,407]
                            String: "lint" [401,407]
                    FIELD [408,456]
                        String: "name" [408,414]
                        STRING [415,456]
                            String: "ubuntu-latest - Docker - build and test" [415,456]
                    FIELD [457,482]
                        String: "runs-on" [457,466]
                        STRING [467,482]
                            String: "ubuntu-latest" [467,482]
                    FIELD [483,2874]
                        String: "steps" [483,490]
                        ARRAY [491,2874]
                            OBJECT [492,522]
                                FIELD [493,521]
                                    String: "uses" [493,499]
                                    STRING [500,521]
                                        String: "actions/checkout@v2" [500,521]
                            OBJECT [523,1041]
                                FIELD [524,558]
                                    String: "name" [524,530]
                                    STRING [531,558]
                                        String: "Set Environment Variables" [531,558]
                                FIELD [559,1040]
                                    String: "run" [559,564]
                                    STRING [565,1040]
                                        String: "OWNER=\"$(echo \"${{ github.repository_owner }}\" | tr '[:upper:]' '[:lower:]' | tr -d '-')\"\nIMG=octobot\necho \"VERSION=${GITHUB_REF##*/}\" >> $GITHUB_ENV\necho \"IMAGE=${OWNER}/${IMG}\" >> $GITHUB_ENV\necho \"LATEST=latest\" >> $GITHUB_ENV\necho \"TEST=test\" >> $GITHUB_ENV\necho \"STABLE=stable\" >> $GITHUB_ENV\necho \"CONTAINER_NAME=octobot\" >> $GITHUB_ENV\necho \"CHECK_TENTACLE_CONTAINER_TIME=10\" >> $GITHUB_ENV\necho \"WAIT_CONTAINER_TIME=80\" >> $GITHUB_ENV\n" [565,1040]
                            OBJECT [1042,1400]
                                FIELD [1043,1070]
                                    String: "name" [1043,1049]
                                    STRING [1050,1070]
                                        String: "Wait for tentacles" [1050,1070]
                                FIELD [1071,1144]
                                    String: "if" [1071,1075]
                                    STRING [1076,1144]
                                        String: "github.event_name == 'push' && startsWith(github.ref, 'refs/tags')" [1076,1144]
                                FIELD [1145,1195]
                                    String: "uses" [1145,1151]
                                    STRING [1152,1195]
                                        String: "fountainhead/action-wait-for-check@v1.0.0" [1152,1195]
                                FIELD [1196,1217]
                                    String: "id" [1196,1200]
                                    STRING [1201,1217]
                                        String: "wait-for-build" [1201,1217]
                                FIELD [1218,1399]
                                    String: "with" [1218,1224]
                                    OBJECT [1225,1399]
                                        FIELD [1226,1263]
                                            String: "token" [1226,1233]
                                            STRING [1234,1263]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [1234,1263]
                                        FIELD [1264,1323]
                                            String: "checkName" [1264,1275]
                                            STRING [1276,1323]
                                                String: "ubuntu-latest - Python 3.8 - upload tentacles" [1276,1323]
                                        FIELD [1324,1349]
                                            String: "ref" [1324,1329]
                                            STRING [1330,1349]
                                                String: "${{ github.ref }}" [1330,1349]
                                        FIELD [1350,1376]
                                            String: "repo" [1350,1356]
                                            STRING [1357,1376]
                                                String: "OctoBot-Tentacles" [1357,1376]
                                        FIELD [1377,1398]
                                            String: "timeoutSeconds" [1377,1393]
                                            NUMBER [1394,1398]
                                                Number: 3600 [1394,1398]
                            OBJECT [1401,1591]
                                FIELD [1402,1445]
                                    String: "name" [1402,1408]
                                    STRING [1409,1445]
                                        String: "Trigger fail when Tentacles failed" [1409,1445]
                                FIELD [1446,1575]
                                    String: "if" [1446,1450]
                                    STRING [1451,1575]
                                        String: "github.event_name == 'push' && startsWith(github.ref, 'refs/tags') && steps.wait-for-build.outputs.conclusion == 'failure'" [1451,1575]
                                FIELD [1576,1590]
                                    String: "run" [1576,1581]
                                    STRING [1582,1590]
                                        String: "exit 1" [1582,1590]
                            OBJECT [1592,1829]
                                FIELD [1593,1614]
                                    String: "name" [1593,1599]
                                    STRING [1600,1614]
                                        String: "Docker build" [1600,1614]
                                FIELD [1615,1828]
                                    String: "run" [1615,1620]
                                    STRING [1621,1828]
                                        String: "docker build -f ./Dockerfile -t ${{ env.IMAGE }}:${{ env.LATEST }} .\ndocker build -f ./tests/Dockerfile --build-arg OCTOBOT_IMAGE=${{ env.IMAGE }}:${{ env.LATEST }} -t ${{ env.IMAGE }}:${{ env.TEST }} .\n" [1621,1828]
                            OBJECT [1830,1995]
                                FIELD [1831,1859]
                                    String: "name" [1831,1837]
                                    STRING [1838,1859]
                                        String: "run tests in docker" [1838,1859]
                                FIELD [1860,1994]
                                    String: "run" [1860,1865]
                                    STRING [1866,1994]
                                        String: "docker run -i -e TENTACLES_PACKAGES_SOURCE=dev -e TENTACLES_URL_TAG=${GITHUB_HEAD_REF////_} ${{ env.IMAGE }}:${{ env.TEST }}\n" [1866,1994]
                            OBJECT [1996,2873]
                                FIELD [1997,2038]
                                    String: "name" [1997,2003]
                                    STRING [2004,2038]
                                        String: "run and check health after start" [2004,2038]
                                FIELD [2039,2872]
                                    String: "run" [2039,2044]
                                    STRING [2045,2872]
                                        String: "echo Start OctoBot docker with branche_name tentacles package\ndocker run -id -e TENTACLES_PACKAGES_SOURCE=dev -e TENTACLES_URL_TAG=${GITHUB_HEAD_REF////_} --name ${{ env.CONTAINER_NAME }} ${{ env.IMAGE }}:${{ env.LATEST }}\nsleep ${{ env.CHECK_TENTACLE_CONTAINER_TIME }}\nif docker logs ${{ env.CONTAINER_NAME }} | grep \"octobot_tentacles_manager.api.util.tentacles_management Can't find tentacle archive at:\" ; then\n    docker rm -f ${{ env.CONTAINER_NAME }}\n    echo Restarting docker with latest tentacle package...\n    docker run -id -e TENTACLES_URL_TAG=${{ env.LATEST }} --name ${{ env.CONTAINER_NAME }} ${{ env.IMAGE }}:${{ env.LATEST }}\nfi\nsleep ${{ env.WAIT_CONTAINER_TIME }}\ndocker logs ${{ env.CONTAINER_NAME }}\ndocker inspect ${{ env.CONTAINER_NAME }} | jq '.[].State.Health.Status' | grep \"healthy\"\n" [2045,2872]
            FIELD [2876,5335]
                String: "push" [2876,2882]
                OBJECT [2883,5335]
                    FIELD [2884,2908]
                        String: "needs" [2884,2891]
                        STRING [2892,2908]
                            String: "build_and_test" [2892,2908]
                    FIELD [2909,2947]
                        String: "name" [2909,2915]
                        STRING [2916,2947]
                            String: "ubuntu-latest - Docker - push" [2916,2947]
                    FIELD [2948,2973]
                        String: "runs-on" [2948,2957]
                        STRING [2958,2973]
                            String: "ubuntu-latest" [2958,2973]
                    FIELD [2974,5334]
                        String: "steps" [2974,2981]
                        ARRAY [2982,5334]
                            OBJECT [2983,3013]
                                FIELD [2984,3012]
                                    String: "uses" [2984,2990]
                                    STRING [2991,3012]
                                        String: "actions/checkout@v2" [2991,3012]
                            OBJECT [3014,3343]
                                FIELD [3015,3049]
                                    String: "name" [3015,3021]
                                    STRING [3022,3049]
                                        String: "Set Environment Variables" [3022,3049]
                                FIELD [3050,3342]
                                    String: "run" [3050,3055]
                                    STRING [3056,3342]
                                        String: "OWNER=\"$(echo \"${{ github.repository_owner }}\" | tr '[:upper:]' '[:lower:]' | tr -d '-')\"\nIMG=octobot\necho \"VERSION=${GITHUB_REF##*/}\" >> $GITHUB_ENV\necho \"IMAGE=${OWNER}/${IMG}\" >> $GITHUB_ENV\necho \"LATEST=latest\" >> $GITHUB_ENV\necho \"STABLE=stable\" >> $GITHUB_ENV\n" [3056,3342]
                            OBJECT [3344,3403]
                                FIELD [3345,3365]
                                    String: "name" [3345,3351]
                                    STRING [3352,3365]
                                        String: "Set up QEMU" [3352,3365]
                                FIELD [3366,3402]
                                    String: "uses" [3366,3372]
                                    STRING [3373,3402]
                                        String: "docker/setup-qemu-action@v1" [3373,3402]
                            OBJECT [3404,3474]
                                FIELD [3405,3434]
                                    String: "name" [3405,3411]
                                    STRING [3412,3434]
                                        String: "Set up Docker Buildx" [3412,3434]
                                FIELD [3435,3473]
                                    String: "uses" [3435,3441]
                                    STRING [3442,3473]
                                        String: "docker/setup-buildx-action@v1" [3442,3473]
                            OBJECT [3475,3662]
                                FIELD [3476,3504]
                                    String: "name" [3476,3482]
                                    STRING [3483,3504]
                                        String: "Cache Docker layers" [3483,3504]
                                FIELD [3505,3530]
                                    String: "uses" [3505,3511]
                                    STRING [3512,3530]
                                        String: "actions/cache@v2" [3512,3530]
                                FIELD [3531,3661]
                                    String: "with" [3531,3537]
                                    OBJECT [3538,3661]
                                        FIELD [3539,3566]
                                            String: "path" [3539,3545]
                                            STRING [3546,3566]
                                                String: "/tmp/.buildx-cache" [3546,3566]
                                        FIELD [3567,3616]
                                            String: "key" [3567,3572]
                                            STRING [3573,3616]
                                                String: "${{ runner.os }}-buildx-${{ github.sha }}" [3573,3616]
                                        FIELD [3617,3660]
                                            String: "restore-keys" [3617,3631]
                                            STRING [3632,3660]
                                                String: "${{ runner.os }}-buildx-\n" [3632,3660]
                            OBJECT [3663,3824]
                                FIELD [3664,3691]
                                    String: "name" [3664,3670]
                                    STRING [3671,3691]
                                        String: "Login to DockerHub" [3671,3691]
                                FIELD [3692,3723]
                                    String: "uses" [3692,3698]
                                    STRING [3699,3723]
                                        String: "docker/login-action@v1" [3699,3723]
                                FIELD [3724,3823]
                                    String: "with" [3724,3730]
                                    OBJECT [3731,3823]
                                        FIELD [3732,3778]
                                            String: "username" [3732,3742]
                                            STRING [3743,3778]
                                                String: "${{ secrets.DOCKERHUB_USERNAME }}" [3743,3778]
                                        FIELD [3779,3822]
                                            String: "password" [3779,3789]
                                            STRING [3790,3822]
                                                String: "${{ secrets.DOCKERHUB_TOKEN }}" [3790,3822]
                            OBJECT [3825,4082]
                                FIELD [3826,3859]
                                    String: "name" [3826,3832]
                                    STRING [3833,3859]
                                        String: "Wait for main build done" [3833,3859]
                                FIELD [3860,3894]
                                    String: "if" [3860,3864]
                                    STRING [3865,3894]
                                        String: "github.event_name == 'push'" [3865,3894]
                                FIELD [3895,3945]
                                    String: "uses" [3895,3901]
                                    STRING [3902,3945]
                                        String: "fountainhead/action-wait-for-check@v1.0.0" [3902,3945]
                                FIELD [3946,3967]
                                    String: "id" [3946,3950]
                                    STRING [3951,3967]
                                        String: "wait-for-build" [3951,3967]
                                FIELD [3968,4081]
                                    String: "with" [3968,3974]
                                    OBJECT [3975,4081]
                                        FIELD [3976,4013]
                                            String: "token" [3976,3983]
                                            STRING [3984,4013]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [3984,4013]
                                        FIELD [4014,4032]
                                            String: "checkName" [4014,4025]
                                            STRING [4026,4032]
                                                String: "Done" [4026,4032]
                                        FIELD [4033,4058]
                                            String: "ref" [4033,4038]
                                            STRING [4039,4058]
                                                String: "${{ github.sha }}" [4039,4058]
                                        FIELD [4059,4080]
                                            String: "timeoutSeconds" [4059,4075]
                                            NUMBER [4076,4080]
                                                Number: 3600 [4076,4080]
                            OBJECT [4083,4229]
                                FIELD [4084,4122]
                                    String: "name" [4084,4090]
                                    STRING [4091,4122]
                                        String: "Trigger fail when Main failed" [4091,4122]
                                FIELD [4123,4213]
                                    String: "if" [4123,4127]
                                    STRING [4128,4213]
                                        String: "github.event_name == 'push' && steps.wait-for-build.outputs.conclusion == 'failure'" [4128,4213]
                                FIELD [4214,4228]
                                    String: "run" [4214,4219]
                                    STRING [4220,4228]
                                        String: "exit 1" [4220,4228]
                            OBJECT [4230,4733]
                                FIELD [4231,4261]
                                    String: "name" [4231,4237]
                                    STRING [4238,4261]
                                        String: "Build and push latest" [4238,4261]
                                FIELD [4262,4370]
                                    String: "if" [4262,4266]
                                    STRING [4267,4370]
                                        String: "github.event_name == 'push' && !startsWith(github.ref, 'refs/tags') && github.ref == 'refs/heads/dev'" [4267,4370]
                                FIELD [4371,4407]
                                    String: "uses" [4371,4377]
                                    STRING [4378,4407]
                                        String: "docker/build-push-action@v2" [4378,4407]
                                FIELD [4408,4732]
                                    String: "with" [4408,4414]
                                    OBJECT [4415,4732]
                                        FIELD [4416,4429]
                                            String: "context" [4416,4425]
                                            STRING [4426,4429]
                                                String: "." [4426,4429]
                                        FIELD [4430,4474]
                                            String: "builder" [4430,4439]
                                            STRING [4440,4474]
                                                String: "${{ steps.buildx.outputs.name }}" [4440,4474]
                                        FIELD [4475,4525]
                                            String: "platforms" [4475,4486]
                                            STRING [4487,4525]
                                                String: "linux/amd64,linux/arm/v7,linux/arm64" [4487,4525]
                                        FIELD [4526,4537]
                                            String: "push" [4526,4532]
                                            TRUE [4533,4537]
                                        FIELD [4538,4581]
                                            String: "tags" [4538,4544]
                                            STRING [4545,4581]
                                                String: "${{ env.IMAGE }}:${{ env.LATEST }}" [4545,4581]
                                        FIELD [4582,4634]
                                            String: "build-args" [4582,4594]
                                            STRING [4595,4634]
                                                String: "TENTACLES_URL_TAG=${{ env.LATEST }}\n" [4595,4634]
                                        FIELD [4635,4683]
                                            String: "cache-from" [4635,4647]
                                            STRING [4648,4683]
                                                String: "type=local,src=/tmp/.buildx-cache" [4648,4683]
                                        FIELD [4684,4731]
                                            String: "cache-to" [4684,4694]
                                            STRING [4695,4731]
                                                String: "type=local,dest=/tmp/.buildx-cache" [4695,4731]
                            OBJECT [4734,5246]
                                FIELD [4735,4765]
                                    String: "name" [4735,4741]
                                    STRING [4742,4765]
                                        String: "Build and push on tag" [4742,4765]
                                FIELD [4766,4839]
                                    String: "if" [4766,4770]
                                    STRING [4771,4839]
                                        String: "github.event_name == 'push' && startsWith(github.ref, 'refs/tags')" [4771,4839]
                                FIELD [4840,4876]
                                    String: "uses" [4840,4846]
                                    STRING [4847,4876]
                                        String: "docker/build-push-action@v2" [4847,4876]
                                FIELD [4877,5245]
                                    String: "with" [4877,4883]
                                    OBJECT [4884,5245]
                                        FIELD [4885,4898]
                                            String: "context" [4885,4894]
                                            STRING [4895,4898]
                                                String: "." [4895,4898]
                                        FIELD [4899,4920]
                                            String: "file" [4899,4905]
                                            STRING [4906,4920]
                                                String: "./Dockerfile" [4906,4920]
                                        FIELD [4921,4965]
                                            String: "builder" [4921,4930]
                                            STRING [4931,4965]
                                                String: "${{ steps.buildx.outputs.name }}" [4931,4965]
                                        FIELD [4966,5016]
                                            String: "platforms" [4966,4977]
                                            STRING [4978,5016]
                                                String: "linux/amd64,linux/arm/v7,linux/arm64" [4978,5016]
                                        FIELD [5017,5028]
                                            String: "push" [5017,5023]
                                            TRUE [5024,5028]
                                        FIELD [5029,5147]
                                            String: "tags" [5029,5035]
                                            STRING [5036,5147]
                                                String: "${{ env.IMAGE }}:${{ env.LATEST }}\n${{ env.IMAGE }}:${{ env.STABLE }}\n${{ env.IMAGE }}:${{ env.VERSION }}\n" [5036,5147]
                                        FIELD [5148,5196]
                                            String: "cache-from" [5148,5160]
                                            STRING [5161,5196]
                                                String: "type=local,src=/tmp/.buildx-cache" [5161,5196]
                                        FIELD [5197,5244]
                                            String: "cache-to" [5197,5207]
                                            STRING [5208,5244]
                                                String: "type=local,dest=/tmp/.buildx-cache" [5208,5244]
                            OBJECT [5247,5333]
                                FIELD [5248,5269]
                                    String: "name" [5248,5254]
                                    STRING [5255,5269]
                                        String: "Image digest" [5255,5269]
                                FIELD [5270,5332]
                                    String: "run" [5270,5275]
                                    STRING [5276,5332]
                                        String: "echo ${{ steps.docker_build_and_psuh.outputs.digest }}" [5276,5332]
            FIELD [5336,5610]
                String: "notify" [5336,5344]
                OBJECT [5345,5610]
                    FIELD [5346,5361]
                        String: "name" [5346,5352]
                        STRING [5353,5361]
                            String: "Notify" [5353,5361]
                    FIELD [5362,5387]
                        String: "runs-on" [5362,5371]
                        STRING [5372,5387]
                            String: "ubuntu-latest" [5372,5387]
                    FIELD [5388,5428]
                        String: "needs" [5388,5395]
                        ARRAY [5396,5428]
                            STRING [5397,5403]
                                String: "lint" [5397,5403]
                            STRING [5404,5420]
                                String: "build_and_test" [5404,5420]
                            STRING [5421,5427]
                                String: "push" [5421,5427]
                    FIELD [5429,5452]
                        String: "if" [5429,5433]
                        STRING [5434,5452]
                            String: "${{ failure() }}" [5434,5452]
                    FIELD [5453,5609]
                        String: "steps" [5453,5460]
                        ARRAY [5461,5609]
                            OBJECT [5462,5608]
                                FIELD [5463,5486]
                                    String: "name" [5463,5469]
                                    STRING [5470,5486]
                                        String: "Notify discord" [5470,5486]
                                FIELD [5487,5529]
                                    String: "uses" [5487,5493]
                                    STRING [5494,5529]
                                        String: "sarisia/actions-status-discord@v1" [5494,5529]
                                FIELD [5530,5607]
                                    String: "with" [5530,5536]
                                    OBJECT [5537,5607]
                                        FIELD [5538,5556]
                                            String: "status" [5538,5546]
                                            STRING [5547,5556]
                                                String: "Failure" [5547,5556]
                                        FIELD [5557,5606]
                                            String: "webhook" [5557,5566]
                                            STRING [5567,5606]
                                                String: "${{ secrets.DISCORD_GITHUB_WEBHOOK }}" [5567,5606]