OBJECT [0,9311]
    FIELD [1,41]
        String: "name" [1,7]
        STRING [8,41]
            String: "Self-hosted runner (nightly-ci)" [8,41]
    FIELD [42,96]
        String: "on" [42,46]
        OBJECT [47,96]
            FIELD [48,74]
                String: "repository_dispatch" [48,69]
                NULL [70,74]
            FIELD [75,95]
                String: "workflow_call" [75,90]
                NULL [91,95]
    FIELD [97,405]
        String: "env" [97,102]
        OBJECT [103,405]
            FIELD [104,126]
                String: "HF_HOME" [104,113]
                STRING [114,126]
                    String: "/mnt/cache" [114,126]
            FIELD [127,152]
                String: "TRANSFORMERS_IS_CI" [127,147]
                TRUE [148,152]
            FIELD [153,172]
                String: "OMP_NUM_THREADS" [153,170]
                NUMBER [171,172]
                    Number: 8 [171,172]
            FIELD [173,192]
                String: "MKL_NUM_THREADS" [173,190]
                NUMBER [191,192]
                    Number: 8 [191,192]
            FIELD [193,208]
                String: "RUN_SLOW" [193,203]
                TRUE [204,208]
            FIELD [209,263]
                String: "HF_HUB_READ_TOKEN" [209,228]
                STRING [229,263]
                    String: "${{ secrets.HF_HUB_READ_TOKEN }}" [229,263]
            FIELD [264,316]
                String: "SIGOPT_API_TOKEN" [264,282]
                STRING [283,316]
                    String: "${{ secrets.SIGOPT_API_TOKEN }}" [283,316]
            FIELD [317,349]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [317,344]
                TRUE [345,349]
            FIELD [350,375]
                String: "RUN_PT_TF_CROSS_TESTS" [350,373]
                NUMBER [374,375]
                    Number: 1 [374,375]
            FIELD [376,404]
                String: "CUDA_VISIBLE_DEVICES" [376,398]
                STRING [399,404]
                    String: "0,1" [399,404]
    FIELD [406,9310]
        String: "jobs" [406,412]
        OBJECT [413,9310]
            FIELD [414,1660]
                String: "setup" [414,421]
                OBJECT [422,1660]
                    FIELD [423,437]
                        String: "name" [423,429]
                        STRING [430,437]
                            String: "Setup" [430,437]
                    FIELD [438,503]
                        String: "strategy" [438,448]
                        OBJECT [449,503]
                            FIELD [450,502]
                                String: "matrix" [450,458]
                                OBJECT [459,502]
                                    FIELD [460,501]
                                        String: "machine_type" [460,474]
                                        ARRAY [475,501]
                                            STRING [476,488]
                                                String: "single-gpu" [476,488]
                                            STRING [489,500]
                                                String: "multi-gpu" [489,500]
                    FIELD [504,572]
                        String: "runs-on" [504,513]
                        ARRAY [514,572]
                            STRING [515,543]
                                String: "${{ matrix.machine_type }}" [515,543]
                            STRING [544,556]
                                String: "nvidia-gpu" [544,556]
                            STRING [557,561]
                                String: "t4" [557,561]
                            STRING [562,571]
                                String: "past-ci" [562,571]
                    FIELD [573,747]
                        String: "container" [573,584]
                        OBJECT [585,747]
                            FIELD [586,649]
                                String: "image" [586,593]
                                STRING [594,649]
                                    String: "huggingface/transformers-all-latest-torch-nightly-gpu" [594,649]
                            FIELD [650,746]
                                String: "options" [650,659]
                                STRING [660,746]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [660,746]
                    FIELD [748,809]
                        String: "outputs" [748,757]
                        OBJECT [758,809]
                            FIELD [759,808]
                                String: "matrix" [759,767]
                                STRING [768,808]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [768,808]
                    FIELD [810,1659]
                        String: "steps" [810,817]
                        ARRAY [818,1659]
                            OBJECT [819,932]
                                FIELD [820,841]
                                    String: "name" [820,826]
                                    STRING [827,841]
                                        String: "Update clone" [827,841]
                                FIELD [842,877]
                                    String: "working-directory" [842,861]
                                    STRING [862,877]
                                        String: "/transformers" [862,877]
                                FIELD [878,931]
                                    String: "run" [878,883]
                                    STRING [884,931]
                                        String: "git fetch && git checkout ${{ github.sha }}\n" [884,931]
                            OBJECT [933,1071]
                                FIELD [934,950]
                                    String: "name" [934,940]
                                    STRING [941,950]
                                        String: "Cleanup" [941,950]
                                FIELD [951,986]
                                    String: "working-directory" [951,970]
                                    STRING [971,986]
                                        String: "/transformers" [971,986]
                                FIELD [987,1070]
                                    String: "run" [987,992]
                                    STRING [993,1070]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [993,1070]
                            OBJECT [1072,1181]
                                FIELD [1073,1125]
                                    String: "name" [1073,1079]
                                    STRING [1080,1125]
                                        String: "Show installed libraries and their versions" [1080,1125]
                                FIELD [1126,1161]
                                    String: "working-directory" [1126,1145]
                                    STRING [1146,1161]
                                        String: "/transformers" [1146,1161]
                                FIELD [1162,1180]
                                    String: "run" [1162,1167]
                                    STRING [1168,1180]
                                        String: "pip freeze" [1168,1180]
                            OBJECT [1182,1615]
                                FIELD [1183,1200]
                                    String: "id" [1183,1187]
                                    STRING [1188,1200]
                                        String: "set-matrix" [1188,1200]
                                FIELD [1201,1233]
                                    String: "name" [1201,1207]
                                    STRING [1208,1233]
                                        String: "Identify models to test" [1208,1233]
                                FIELD [1234,1275]
                                    String: "working-directory" [1234,1253]
                                    STRING [1254,1275]
                                        String: "/transformers/tests" [1254,1275]
                                FIELD [1276,1614]
                                    String: "run" [1276,1281]
                                    STRING [1282,1614]
                                        String: "echo \"matrix=$(python3 -c 'import os; tests = os.getcwd(); model_tests = os.listdir(os.path.join(tests, \"models\")); d1 = sorted(list(filter(os.path.isdir, os.listdir(tests)))); d2 = sorted(list(filter(os.path.isdir, [f\"models/{x}\" for x in model_tests]))); d1.remove(\"models\"); d = d2 + d1; print(d)')\" >> $GITHUB_OUTPUT\n" [1282,1614]
                            OBJECT [1616,1658]
                                FIELD [1617,1636]
                                    String: "name" [1617,1623]
                                    STRING [1624,1636]
                                        String: "NVIDIA-SMI" [1624,1636]
                                FIELD [1637,1657]
                                    String: "run" [1637,1642]
                                    STRING [1643,1657]
                                        String: "nvidia-smi\n" [1643,1657]
            FIELD [1661,3757]
                String: "run_tests_single_gpu" [1661,1683]
                OBJECT [1684,3757]
                    FIELD [1685,1705]
                        String: "name" [1685,1691]
                        STRING [1692,1705]
                            String: "Model tests" [1692,1705]
                    FIELD [1706,1833]
                        String: "strategy" [1706,1716]
                        OBJECT [1717,1833]
                            FIELD [1718,1735]
                                String: "fail-fast" [1718,1729]
                                FALSE [1730,1735]
                            FIELD [1736,1832]
                                String: "matrix" [1736,1744]
                                OBJECT [1745,1832]
                                    FIELD [1746,1801]
                                        String: "folders" [1746,1755]
                                        STRING [1756,1801]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [1756,1801]
                                    FIELD [1802,1831]
                                        String: "machine_type" [1802,1816]
                                        ARRAY [1817,1831]
                                            STRING [1818,1830]
                                                String: "single-gpu" [1818,1830]
                    FIELD [1834,1902]
                        String: "runs-on" [1834,1843]
                        ARRAY [1844,1902]
                            STRING [1845,1873]
                                String: "${{ matrix.machine_type }}" [1845,1873]
                            STRING [1874,1886]
                                String: "nvidia-gpu" [1874,1886]
                            STRING [1887,1891]
                                String: "t4" [1887,1891]
                            STRING [1892,1901]
                                String: "past-ci" [1892,1901]
                    FIELD [1903,2077]
                        String: "container" [1903,1914]
                        OBJECT [1915,2077]
                            FIELD [1916,1979]
                                String: "image" [1916,1923]
                                STRING [1924,1979]
                                    String: "huggingface/transformers-all-latest-torch-nightly-gpu" [1924,1979]
                            FIELD [1980,2076]
                                String: "options" [1980,1989]
                                STRING [1990,2076]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1990,2076]
                    FIELD [2078,2093]
                        String: "needs" [2078,2085]
                        STRING [2086,2093]
                            String: "setup" [2086,2093]
                    FIELD [2094,3756]
                        String: "steps" [2094,2101]
                        ARRAY [2102,3756]
                            OBJECT [2103,2377]
                                FIELD [2104,2146]
                                    String: "name" [2104,2110]
                                    STRING [2111,2146]
                                        String: "Echo folder ${{ matrix.folders }}" [2111,2146]
                                FIELD [2147,2161]
                                    String: "shell" [2147,2154]
                                    STRING [2155,2161]
                                        String: "bash" [2155,2161]
                                FIELD [2162,2376]
                                    String: "run" [2162,2167]
                                    STRING [2168,2376]
                                        String: "echo \"${{ matrix.folders }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [2168,2376]
                            OBJECT [2378,2489]
                                FIELD [2379,2400]
                                    String: "name" [2379,2385]
                                    STRING [2386,2400]
                                        String: "Update clone" [2386,2400]
                                FIELD [2401,2436]
                                    String: "working-directory" [2401,2420]
                                    STRING [2421,2436]
                                        String: "/transformers" [2421,2436]
                                FIELD [2437,2488]
                                    String: "run" [2437,2442]
                                    STRING [2443,2488]
                                        String: "git fetch && git checkout ${{ github.sha }}" [2443,2488]
                            OBJECT [2490,2705]
                                FIELD [2491,2588]
                                    String: "name" [2491,2497]
                                    STRING [2498,2588]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [2498,2588]
                                FIELD [2589,2624]
                                    String: "working-directory" [2589,2608]
                                    STRING [2609,2624]
                                        String: "/transformers" [2609,2624]
                                FIELD [2625,2704]
                                    String: "run" [2625,2630]
                                    STRING [2631,2704]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [2631,2704]
                            OBJECT [2706,2748]
                                FIELD [2707,2726]
                                    String: "name" [2707,2713]
                                    STRING [2714,2726]
                                        String: "NVIDIA-SMI" [2714,2726]
                                FIELD [2727,2747]
                                    String: "run" [2727,2732]
                                    STRING [2733,2747]
                                        String: "nvidia-smi\n" [2733,2747]
                            OBJECT [2749,2844]
                                FIELD [2750,2770]
                                    String: "name" [2750,2756]
                                    STRING [2757,2770]
                                        String: "Environment" [2757,2770]
                                FIELD [2771,2806]
                                    String: "working-directory" [2771,2790]
                                    STRING [2791,2806]
                                        String: "/transformers" [2791,2806]
                                FIELD [2807,2843]
                                    String: "run" [2807,2812]
                                    STRING [2813,2843]
                                        String: "python3 utils/print_env.py\n" [2813,2843]
                            OBJECT [2845,2954]
                                FIELD [2846,2898]
                                    String: "name" [2846,2852]
                                    STRING [2853,2898]
                                        String: "Show installed libraries and their versions" [2853,2898]
                                FIELD [2899,2934]
                                    String: "working-directory" [2899,2918]
                                    STRING [2919,2934]
                                        String: "/transformers" [2919,2934]
                                FIELD [2935,2953]
                                    String: "run" [2935,2940]
                                    STRING [2941,2953]
                                        String: "pip freeze" [2941,2953]
                            OBJECT [2955,3153]
                                FIELD [2956,2985]
                                    String: "name" [2956,2962]
                                    STRING [2963,2985]
                                        String: "Run all tests on GPU" [2963,2985]
                                FIELD [2986,3021]
                                    String: "working-directory" [2986,3005]
                                    STRING [3006,3021]
                                        String: "/transformers" [3006,3021]
                                FIELD [3022,3152]
                                    String: "run" [3022,3027]
                                    STRING [3028,3152]
                                        String: "python3 -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} tests/${{ matrix.folders }}" [3028,3152]
                            OBJECT [3154,3347]
                                FIELD [3155,3185]
                                    String: "name" [3155,3161]
                                    STRING [3162,3185]
                                        String: "Failure short reports" [3162,3185]
                                FIELD [3186,3209]
                                    String: "if" [3186,3190]
                                    STRING [3191,3209]
                                        String: "${{ failure() }}" [3191,3209]
                                FIELD [3210,3234]
                                    String: "continue-on-error" [3210,3229]
                                    TRUE [3230,3234]
                                FIELD [3235,3346]
                                    String: "run" [3235,3240]
                                    STRING [3241,3346]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [3241,3346]
                            OBJECT [3348,3755]
                                FIELD [3349,3487]
                                    String: "name" [3349,3355]
                                    STRING [3356,3487]
                                        String: "Test suite reports artifacts: ${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports_postfix_nightly" [3356,3487]
                                FIELD [3488,3510]
                                    String: "if" [3488,3492]
                                    STRING [3493,3510]
                                        String: "${{ always() }}" [3493,3510]
                                FIELD [3511,3546]
                                    String: "uses" [3511,3517]
                                    STRING [3518,3546]
                                        String: "actions/upload-artifact@v3" [3518,3546]
                                FIELD [3547,3754]
                                    String: "with" [3547,3553]
                                    OBJECT [3554,3754]
                                        FIELD [3555,3663]
                                            String: "name" [3555,3561]
                                            STRING [3562,3663]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports_postfix_nightly" [3562,3663]
                                        FIELD [3664,3753]
                                            String: "path" [3664,3670]
                                            STRING [3671,3753]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [3671,3753]
            FIELD [3758,5854]
                String: "run_tests_multi_gpu" [3758,3779]
                OBJECT [3780,5854]
                    FIELD [3781,3801]
                        String: "name" [3781,3787]
                        STRING [3788,3801]
                            String: "Model tests" [3788,3801]
                    FIELD [3802,3928]
                        String: "strategy" [3802,3812]
                        OBJECT [3813,3928]
                            FIELD [3814,3831]
                                String: "fail-fast" [3814,3825]
                                FALSE [3826,3831]
                            FIELD [3832,3927]
                                String: "matrix" [3832,3840]
                                OBJECT [3841,3927]
                                    FIELD [3842,3897]
                                        String: "folders" [3842,3851]
                                        STRING [3852,3897]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [3852,3897]
                                    FIELD [3898,3926]
                                        String: "machine_type" [3898,3912]
                                        ARRAY [3913,3926]
                                            STRING [3914,3925]
                                                String: "multi-gpu" [3914,3925]
                    FIELD [3929,3997]
                        String: "runs-on" [3929,3938]
                        ARRAY [3939,3997]
                            STRING [3940,3968]
                                String: "${{ matrix.machine_type }}" [3940,3968]
                            STRING [3969,3981]
                                String: "nvidia-gpu" [3969,3981]
                            STRING [3982,3986]
                                String: "t4" [3982,3986]
                            STRING [3987,3996]
                                String: "past-ci" [3987,3996]
                    FIELD [3998,4174]
                        String: "container" [3998,4009]
                        OBJECT [4010,4174]
                            FIELD [4011,4074]
                                String: "image" [4011,4018]
                                STRING [4019,4074]
                                    String: "huggingface/transformers-all-latest-torch-nightly-gpu" [4019,4074]
                            FIELD [4075,4173]
                                String: "options" [4075,4084]
                                STRING [4085,4173]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [4085,4173]
                    FIELD [4175,4190]
                        String: "needs" [4175,4182]
                        STRING [4183,4190]
                            String: "setup" [4183,4190]
                    FIELD [4191,5853]
                        String: "steps" [4191,4198]
                        ARRAY [4199,5853]
                            OBJECT [4200,4474]
                                FIELD [4201,4243]
                                    String: "name" [4201,4207]
                                    STRING [4208,4243]
                                        String: "Echo folder ${{ matrix.folders }}" [4208,4243]
                                FIELD [4244,4258]
                                    String: "shell" [4244,4251]
                                    STRING [4252,4258]
                                        String: "bash" [4252,4258]
                                FIELD [4259,4473]
                                    String: "run" [4259,4264]
                                    STRING [4265,4473]
                                        String: "echo \"${{ matrix.folders }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [4265,4473]
                            OBJECT [4475,4586]
                                FIELD [4476,4497]
                                    String: "name" [4476,4482]
                                    STRING [4483,4497]
                                        String: "Update clone" [4483,4497]
                                FIELD [4498,4533]
                                    String: "working-directory" [4498,4517]
                                    STRING [4518,4533]
                                        String: "/transformers" [4518,4533]
                                FIELD [4534,4585]
                                    String: "run" [4534,4539]
                                    STRING [4540,4585]
                                        String: "git fetch && git checkout ${{ github.sha }}" [4540,4585]
                            OBJECT [4587,4802]
                                FIELD [4588,4685]
                                    String: "name" [4588,4594]
                                    STRING [4595,4685]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [4595,4685]
                                FIELD [4686,4721]
                                    String: "working-directory" [4686,4705]
                                    STRING [4706,4721]
                                        String: "/transformers" [4706,4721]
                                FIELD [4722,4801]
                                    String: "run" [4722,4727]
                                    STRING [4728,4801]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [4728,4801]
                            OBJECT [4803,4845]
                                FIELD [4804,4823]
                                    String: "name" [4804,4810]
                                    STRING [4811,4823]
                                        String: "NVIDIA-SMI" [4811,4823]
                                FIELD [4824,4844]
                                    String: "run" [4824,4829]
                                    STRING [4830,4844]
                                        String: "nvidia-smi\n" [4830,4844]
                            OBJECT [4846,4941]
                                FIELD [4847,4867]
                                    String: "name" [4847,4853]
                                    STRING [4854,4867]
                                        String: "Environment" [4854,4867]
                                FIELD [4868,4903]
                                    String: "working-directory" [4868,4887]
                                    STRING [4888,4903]
                                        String: "/transformers" [4888,4903]
                                FIELD [4904,4940]
                                    String: "run" [4904,4909]
                                    STRING [4910,4940]
                                        String: "python3 utils/print_env.py\n" [4910,4940]
                            OBJECT [4942,5051]
                                FIELD [4943,4995]
                                    String: "name" [4943,4949]
                                    STRING [4950,4995]
                                        String: "Show installed libraries and their versions" [4950,4995]
                                FIELD [4996,5031]
                                    String: "working-directory" [4996,5015]
                                    STRING [5016,5031]
                                        String: "/transformers" [5016,5031]
                                FIELD [5032,5050]
                                    String: "run" [5032,5037]
                                    STRING [5038,5050]
                                        String: "pip freeze" [5038,5050]
                            OBJECT [5052,5250]
                                FIELD [5053,5082]
                                    String: "name" [5053,5059]
                                    STRING [5060,5082]
                                        String: "Run all tests on GPU" [5060,5082]
                                FIELD [5083,5118]
                                    String: "working-directory" [5083,5102]
                                    STRING [5103,5118]
                                        String: "/transformers" [5103,5118]
                                FIELD [5119,5249]
                                    String: "run" [5119,5124]
                                    STRING [5125,5249]
                                        String: "python3 -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} tests/${{ matrix.folders }}" [5125,5249]
                            OBJECT [5251,5444]
                                FIELD [5252,5282]
                                    String: "name" [5252,5258]
                                    STRING [5259,5282]
                                        String: "Failure short reports" [5259,5282]
                                FIELD [5283,5306]
                                    String: "if" [5283,5287]
                                    STRING [5288,5306]
                                        String: "${{ failure() }}" [5288,5306]
                                FIELD [5307,5331]
                                    String: "continue-on-error" [5307,5326]
                                    TRUE [5327,5331]
                                FIELD [5332,5443]
                                    String: "run" [5332,5337]
                                    STRING [5338,5443]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [5338,5443]
                            OBJECT [5445,5852]
                                FIELD [5446,5584]
                                    String: "name" [5446,5452]
                                    STRING [5453,5584]
                                        String: "Test suite reports artifacts: ${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports_postfix_nightly" [5453,5584]
                                FIELD [5585,5607]
                                    String: "if" [5585,5589]
                                    STRING [5590,5607]
                                        String: "${{ always() }}" [5590,5607]
                                FIELD [5608,5643]
                                    String: "uses" [5608,5614]
                                    STRING [5615,5643]
                                        String: "actions/upload-artifact@v3" [5615,5643]
                                FIELD [5644,5851]
                                    String: "with" [5644,5650]
                                    OBJECT [5651,5851]
                                        FIELD [5652,5760]
                                            String: "name" [5652,5658]
                                            STRING [5659,5760]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports_postfix_nightly" [5659,5760]
                                        FIELD [5761,5850]
                                            String: "path" [5761,5767]
                                            STRING [5768,5850]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [5768,5850]
            FIELD [5855,8205]
                String: "run_all_tests_torch_cuda_extensions_gpu" [5855,5896]
                OBJECT [5897,8205]
                    FIELD [5898,5933]
                        String: "name" [5898,5904]
                        STRING [5905,5933]
                            String: "Torch CUDA extension tests" [5905,5933]
                    FIELD [5934,6017]
                        String: "strategy" [5934,5944]
                        OBJECT [5945,6017]
                            FIELD [5946,5963]
                                String: "fail-fast" [5946,5957]
                                FALSE [5958,5963]
                            FIELD [5964,6016]
                                String: "matrix" [5964,5972]
                                OBJECT [5973,6016]
                                    FIELD [5974,6015]
                                        String: "machine_type" [5974,5988]
                                        ARRAY [5989,6015]
                                            STRING [5990,6002]
                                                String: "single-gpu" [5990,6002]
                                            STRING [6003,6014]
                                                String: "multi-gpu" [6003,6014]
                    FIELD [6018,6086]
                        String: "runs-on" [6018,6027]
                        ARRAY [6028,6086]
                            STRING [6029,6057]
                                String: "${{ matrix.machine_type }}" [6029,6057]
                            STRING [6058,6070]
                                String: "nvidia-gpu" [6058,6070]
                            STRING [6071,6075]
                                String: "t4" [6071,6075]
                            STRING [6076,6085]
                                String: "past-ci" [6076,6085]
                    FIELD [6087,6102]
                        String: "needs" [6087,6094]
                        STRING [6095,6102]
                            String: "setup" [6095,6102]
                    FIELD [6103,6280]
                        String: "container" [6103,6114]
                        OBJECT [6115,6280]
                            FIELD [6116,6180]
                                String: "image" [6116,6123]
                                STRING [6124,6180]
                                    String: "huggingface/transformers-pytorch-deepspeed-nightly-gpu" [6124,6180]
                            FIELD [6181,6279]
                                String: "options" [6181,6190]
                                STRING [6191,6279]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [6191,6279]
                    FIELD [6281,8204]
                        String: "steps" [6281,6288]
                        ARRAY [6289,8204]
                            OBJECT [6290,6411]
                                FIELD [6291,6312]
                                    String: "name" [6291,6297]
                                    STRING [6298,6312]
                                        String: "Update clone" [6298,6312]
                                FIELD [6313,6358]
                                    String: "working-directory" [6313,6332]
                                    STRING [6333,6358]
                                        String: "/workspace/transformers" [6333,6358]
                                FIELD [6359,6410]
                                    String: "run" [6359,6364]
                                    STRING [6365,6410]
                                        String: "git fetch && git checkout ${{ github.sha }}" [6365,6410]
                            OBJECT [6412,6637]
                                FIELD [6413,6510]
                                    String: "name" [6413,6419]
                                    STRING [6420,6510]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [6420,6510]
                                FIELD [6511,6556]
                                    String: "working-directory" [6511,6530]
                                    STRING [6531,6556]
                                        String: "/workspace/transformers" [6531,6556]
                                FIELD [6557,6636]
                                    String: "run" [6557,6562]
                                    STRING [6563,6636]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [6563,6636]
                            OBJECT [6638,6732]
                                FIELD [6639,6678]
                                    String: "name" [6639,6645]
                                    STRING [6646,6678]
                                        String: "Remove cached torch extensions" [6646,6678]
                                FIELD [6679,6731]
                                    String: "run" [6679,6684]
                                    STRING [6685,6731]
                                        String: "rm -rf /github/home/.cache/torch_extensions/" [6685,6731]
                            OBJECT [6733,7116]
                                FIELD [6734,6770]
                                    String: "name" [6734,6740]
                                    STRING [6741,6770]
                                        String: "Pre build DeepSpeed *again*" [6741,6770]
                                FIELD [6771,6803]
                                    String: "working-directory" [6771,6790]
                                    STRING [6791,6803]
                                        String: "/workspace" [6791,6803]
                                FIELD [6804,7115]
                                    String: "run" [6804,6809]
                                    STRING [6810,7115]
                                        String: "python3 -m pip uninstall -y deepspeed\nrm -rf DeepSpeed\ngit clone https://github.com/microsoft/DeepSpeed && cd DeepSpeed && rm -rf build\nDS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 python3 -m pip install . --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [6810,7115]
                            OBJECT [7117,7159]
                                FIELD [7118,7137]
                                    String: "name" [7118,7124]
                                    STRING [7125,7137]
                                        String: "NVIDIA-SMI" [7125,7137]
                                FIELD [7138,7158]
                                    String: "run" [7138,7143]
                                    STRING [7144,7158]
                                        String: "nvidia-smi\n" [7144,7158]
                            OBJECT [7160,7264]
                                FIELD [7161,7181]
                                    String: "name" [7161,7167]
                                    STRING [7168,7181]
                                        String: "Environment" [7168,7181]
                                FIELD [7182,7227]
                                    String: "working-directory" [7182,7201]
                                    STRING [7202,7227]
                                        String: "/workspace/transformers" [7202,7227]
                                FIELD [7228,7263]
                                    String: "run" [7228,7233]
                                    STRING [7234,7263]
                                        String: "python utils/print_env.py\n" [7234,7263]
                            OBJECT [7265,7384]
                                FIELD [7266,7318]
                                    String: "name" [7266,7272]
                                    STRING [7273,7318]
                                        String: "Show installed libraries and their versions" [7273,7318]
                                FIELD [7319,7364]
                                    String: "working-directory" [7319,7338]
                                    STRING [7339,7364]
                                        String: "/workspace/transformers" [7339,7364]
                                FIELD [7365,7383]
                                    String: "run" [7365,7370]
                                    STRING [7371,7383]
                                        String: "pip freeze" [7371,7383]
                            OBJECT [7385,7597]
                                FIELD [7386,7415]
                                    String: "name" [7386,7392]
                                    STRING [7393,7415]
                                        String: "Run all tests on GPU" [7393,7415]
                                FIELD [7416,7461]
                                    String: "working-directory" [7416,7435]
                                    STRING [7436,7461]
                                        String: "/workspace/transformers" [7436,7461]
                                FIELD [7462,7596]
                                    String: "run" [7462,7467]
                                    STRING [7468,7596]
                                        String: "python -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [7468,7596]
                            OBJECT [7598,7801]
                                FIELD [7599,7629]
                                    String: "name" [7599,7605]
                                    STRING [7606,7629]
                                        String: "Failure short reports" [7606,7629]
                                FIELD [7630,7653]
                                    String: "if" [7630,7634]
                                    STRING [7635,7653]
                                        String: "${{ failure() }}" [7635,7653]
                                FIELD [7654,7678]
                                    String: "continue-on-error" [7654,7673]
                                    TRUE [7674,7678]
                                FIELD [7679,7800]
                                    String: "run" [7679,7684]
                                    STRING [7685,7800]
                                        String: "cat /workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [7685,7800]
                            OBJECT [7802,8203]
                                FIELD [7803,7933]
                                    String: "name" [7803,7809]
                                    STRING [7810,7933]
                                        String: "Test suite reports artifacts: ${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports_postfix_nightly" [7810,7933]
                                FIELD [7934,7956]
                                    String: "if" [7934,7938]
                                    STRING [7939,7956]
                                        String: "${{ always() }}" [7939,7956]
                                FIELD [7957,7992]
                                    String: "uses" [7957,7963]
                                    STRING [7964,7992]
                                        String: "actions/upload-artifact@v3" [7964,7992]
                                FIELD [7993,8202]
                                    String: "with" [7993,7999]
                                    OBJECT [8000,8202]
                                        FIELD [8001,8101]
                                            String: "name" [8001,8007]
                                            STRING [8008,8101]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports_postfix_nightly" [8008,8101]
                                        FIELD [8102,8201]
                                            String: "path" [8102,8108]
                                            STRING [8109,8201]
                                                String: "/workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [8109,8201]
            FIELD [8206,9309]
                String: "send_results" [8206,8220]
                OBJECT [8221,9309]
                    FIELD [8222,8254]
                        String: "name" [8222,8228]
                        STRING [8229,8254]
                            String: "Send results to webhook" [8229,8254]
                    FIELD [8255,8279]
                        String: "runs-on" [8255,8264]
                        STRING [8265,8279]
                            String: "ubuntu-22.04" [8265,8279]
                    FIELD [8280,8295]
                        String: "if" [8280,8284]
                        STRING [8285,8295]
                            String: "always()" [8285,8295]
                    FIELD [8296,8400]
                        String: "needs" [8296,8303]
                        ARRAY [8304,8400]
                            STRING [8305,8312]
                                String: "setup" [8305,8312]
                            STRING [8313,8335]
                                String: "run_tests_single_gpu" [8313,8335]
                            STRING [8336,8357]
                                String: "run_tests_multi_gpu" [8336,8357]
                            STRING [8358,8399]
                                String: "run_all_tests_torch_cuda_extensions_gpu" [8358,8399]
                    FIELD [8401,9308]
                        String: "steps" [8401,8408]
                        ARRAY [8409,9308]
                            OBJECT [8410,8517]
                                FIELD [8411,8442]
                                    String: "name" [8411,8417]
                                    STRING [8418,8442]
                                        String: "Preliminary job status" [8418,8442]
                                FIELD [8443,8457]
                                    String: "shell" [8443,8450]
                                    STRING [8451,8457]
                                        String: "bash" [8451,8457]
                                FIELD [8458,8516]
                                    String: "run" [8458,8463]
                                    STRING [8464,8516]
                                        String: "echo \"Setup status: ${{ needs.setup.result }}\"\n" [8464,8516]
                            OBJECT [8518,8548]
                                FIELD [8519,8547]
                                    String: "uses" [8519,8525]
                                    STRING [8526,8547]
                                        String: "actions/checkout@v3" [8526,8547]
                            OBJECT [8549,8588]
                                FIELD [8550,8587]
                                    String: "uses" [8550,8556]
                                    STRING [8557,8587]
                                        String: "actions/download-artifact@v3" [8557,8587]
                            OBJECT [8589,9231]
                                FIELD [8590,8620]
                                    String: "name" [8590,8596]
                                    STRING [8597,8620]
                                        String: "Send message to Slack" [8597,8620]
                                FIELD [8621,9102]
                                    String: "env" [8621,8626]
                                    OBJECT [8627,9102]
                                        FIELD [8628,8684]
                                            String: "CI_SLACK_BOT_TOKEN" [8628,8648]
                                            STRING [8649,8684]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [8649,8684]
                                        FIELD [8685,8743]
                                            String: "CI_SLACK_CHANNEL_ID" [8685,8706]
                                            STRING [8707,8743]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [8707,8743]
                                        FIELD [8744,8814]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [8744,8771]
                                            STRING [8772,8814]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [8772,8814]
                                        FIELD [8815,8891]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [8815,8845]
                                            STRING [8846,8891]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [8846,8891]
                                        FIELD [8892,8969]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [8892,8920]
                                            STRING [8921,8969]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_PAST_FUTURE }}" [8921,8969]
                                        FIELD [8970,9034]
                                            String: "ACCESS_REPO_INFO_TOKEN" [8970,8994]
                                            STRING [8995,9034]
                                                String: "${{ secrets.ACCESS_REPO_INFO_TOKEN }}" [8995,9034]
                                        FIELD [9035,9058]
                                            String: "CI_EVENT" [9035,9045]
                                            STRING [9046,9058]
                                                String: "Nightly CI" [9046,9058]
                                        FIELD [9059,9101]
                                            String: "SETUP_STATUS" [9059,9073]
                                            STRING [9074,9101]
                                                String: "${{ needs.setup.result }}" [9074,9101]
                                FIELD [9103,9230]
                                    String: "run" [9103,9108]
                                    STRING [9109,9230]
                                        String: "pip install slack_sdk\npip show slack_sdk\npython utils/notification_service.py \"${{ needs.setup.outputs.matrix }}\"\n" [9109,9230]
                            OBJECT [9232,9307]
                                FIELD [9233,9270]
                                    String: "uses" [9233,9239]
                                    STRING [9240,9270]
                                        String: "geekyeggo/delete-artifact@v2" [9240,9270]
                                FIELD [9271,9306]
                                    String: "with" [9271,9277]
                                    OBJECT [9278,9306]
                                        FIELD [9279,9305]
                                            String: "name" [9279,9285]
                                            STRING [9286,9305]
                                                String: "single-*\nmulti-*" [9286,9305]