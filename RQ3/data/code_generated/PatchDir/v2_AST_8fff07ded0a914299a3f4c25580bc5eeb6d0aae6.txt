OBJECT [0,4281]
    FIELD [1,20]
        String: "name" [1,7]
        STRING [8,20]
            String: "PR slow CI" [8,20]
    FIELD [21,123]
        String: "on" [21,25]
        OBJECT [26,123]
            FIELD [27,122]
                String: "pull_request" [27,41]
                OBJECT [42,122]
                    FIELD [43,121]
                        String: "paths" [43,50]
                        ARRAY [51,121]
                            STRING [52,93]
                                String: "src/transformers/models/*/modeling_*.py" [52,93]
                            STRING [94,120]
                                String: "tests/models/*/test_*.py" [94,120]
    FIELD [124,238]
        String: "concurrency" [124,137]
        OBJECT [138,238]
            FIELD [139,211]
                String: "group" [139,146]
                STRING [147,211]
                    String: "${{ github.workflow }}-${{ github.head_ref || github.run_id }}" [147,211]
            FIELD [212,237]
                String: "cancel-in-progress" [212,232]
                TRUE [233,237]
    FIELD [239,547]
        String: "env" [239,244]
        OBJECT [245,547]
            FIELD [246,268]
                String: "HF_HOME" [246,255]
                STRING [256,268]
                    String: "/mnt/cache" [256,268]
            FIELD [269,294]
                String: "TRANSFORMERS_IS_CI" [269,289]
                TRUE [290,294]
            FIELD [295,314]
                String: "OMP_NUM_THREADS" [295,312]
                NUMBER [313,314]
                    Number: 8 [313,314]
            FIELD [315,334]
                String: "MKL_NUM_THREADS" [315,332]
                NUMBER [333,334]
                    Number: 8 [333,334]
            FIELD [335,350]
                String: "RUN_SLOW" [335,345]
                TRUE [346,350]
            FIELD [351,405]
                String: "HF_HUB_READ_TOKEN" [351,370]
                STRING [371,405]
                    String: "${{ secrets.HF_HUB_READ_TOKEN }}" [371,405]
            FIELD [406,458]
                String: "SIGOPT_API_TOKEN" [406,424]
                STRING [425,458]
                    String: "${{ secrets.SIGOPT_API_TOKEN }}" [425,458]
            FIELD [459,491]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [459,486]
                TRUE [487,491]
            FIELD [492,517]
                String: "RUN_PT_TF_CROSS_TESTS" [492,515]
                NUMBER [516,517]
                    Number: 1 [516,517]
            FIELD [518,546]
                String: "CUDA_VISIBLE_DEVICES" [518,540]
                STRING [541,546]
                    String: "0,1" [541,546]
    FIELD [548,4280]
        String: "jobs" [548,554]
        OBJECT [555,4280]
            FIELD [556,1427]
                String: "find_models_to_run" [556,576]
                OBJECT [577,1427]
                    FIELD [578,602]
                        String: "runs-on" [578,587]
                        STRING [588,602]
                            String: "ubuntu-22.04" [588,602]
                    FIELD [603,641]
                        String: "name" [603,609]
                        STRING [610,641]
                            String: "Find models to run slow tests" [610,641]
                    FIELD [642,717]
                        String: "if" [642,646]
                        STRING [647,717]
                            String: "${{ contains(github.event.pull_request.labels.*.name, 'run-slow') }}" [647,717]
                    FIELD [718,782]
                        String: "outputs" [718,727]
                        OBJECT [728,782]
                            FIELD [729,781]
                                String: "models" [729,737]
                                STRING [738,781]
                                    String: "${{ steps.models_to_run.outputs.models }}" [738,781]
                    FIELD [783,1426]
                        String: "steps" [783,790]
                        ARRAY [791,1426]
                            OBJECT [792,899]
                                FIELD [793,821]
                                    String: "uses" [793,799]
                                    STRING [800,821]
                                        String: "actions/checkout@v4" [800,821]
                                FIELD [822,898]
                                    String: "with" [822,828]
                                    OBJECT [829,898]
                                        FIELD [830,847]
                                            String: "fetch-depth" [830,843]
                                            STRING [844,847]
                                                String: "0" [844,847]
                                        FIELD [848,897]
                                            String: "ref" [848,853]
                                            STRING [854,897]
                                                String: "${{ github.event.pull_request.head.sha }}" [854,897]
                            OBJECT [900,1005]
                                FIELD [901,928]
                                    String: "name" [901,907]
                                    STRING [908,928]
                                        String: "Get commit message" [908,928]
                                FIELD [929,1004]
                                    String: "run" [929,934]
                                    STRING [935,1004]
                                        String: "echo \"commit_message=$(git show -s --format=%s)\" >> $GITHUB_ENV\n" [935,1004]
                            OBJECT [1006,1278]
                                FIELD [1007,1044]
                                    String: "name" [1007,1013]
                                    STRING [1014,1044]
                                        String: "Get models to run slow tests" [1014,1044]
                                FIELD [1045,1277]
                                    String: "run" [1045,1050]
                                    STRING [1051,1277]
                                        String: "echo \"${{ env.commit_message }}\"\npython -m pip install GitPython\npython utils/pr_slow_ci_models.py --commit_message \"${{ env.commit_message }}\" | tee output.txt\necho \"models=$(tail -n 1 output.txt)\" >> $GITHUB_ENV\n" [1051,1277]
                            OBJECT [1279,1425]
                                FIELD [1280,1313]
                                    String: "name" [1280,1286]
                                    STRING [1287,1313]
                                        String: "Models to run slow tests" [1287,1313]
                                FIELD [1314,1334]
                                    String: "id" [1314,1318]
                                    STRING [1319,1334]
                                        String: "models_to_run" [1319,1334]
                                FIELD [1335,1424]
                                    String: "run" [1335,1340]
                                    STRING [1341,1424]
                                        String: "echo \"${{ env.models }}\"\necho \"models=${{ env.models }}\" >> $GITHUB_OUTPUT\n" [1341,1424]
            FIELD [1428,4279]
                String: "run_models_gpu" [1428,1444]
                OBJECT [1445,4279]
                    FIELD [1446,1482]
                        String: "name" [1446,1452]
                        STRING [1453,1482]
                            String: "Run all tests for the model" [1453,1482]
                    FIELD [1483,1544]
                        String: "if" [1483,1487]
                        STRING [1488,1544]
                            String: "${{ needs.find_models_to_run.outputs.models != '[]' }}" [1488,1544]
                    FIELD [1545,1573]
                        String: "needs" [1545,1552]
                        STRING [1553,1573]
                            String: "find_models_to_run" [1553,1573]
                    FIELD [1574,1726]
                        String: "strategy" [1574,1584]
                        OBJECT [1585,1726]
                            FIELD [1586,1603]
                                String: "fail-fast" [1586,1597]
                                FALSE [1598,1603]
                            FIELD [1604,1725]
                                String: "matrix" [1604,1612]
                                OBJECT [1613,1725]
                                    FIELD [1614,1682]
                                        String: "folders" [1614,1623]
                                        STRING [1624,1682]
                                            String: "${{ fromJson(needs.find_models_to_run.outputs.models) }}" [1624,1682]
                                    FIELD [1683,1724]
                                        String: "machine_type" [1683,1697]
                                        ARRAY [1698,1724]
                                            STRING [1699,1711]
                                                String: "single-gpu" [1699,1711]
                                            STRING [1712,1723]
                                                String: "multi-gpu" [1712,1723]
                    FIELD [1727,1790]
                        String: "runs-on" [1727,1736]
                        ARRAY [1737,1790]
                            STRING [1738,1766]
                                String: "${{ matrix.machine_type }}" [1738,1766]
                            STRING [1767,1779]
                                String: "nvidia-gpu" [1767,1779]
                            STRING [1780,1784]
                                String: "t4" [1780,1784]
                            STRING [1785,1789]
                                String: "ci" [1785,1789]
                    FIELD [1791,1953]
                        String: "container" [1791,1802]
                        OBJECT [1803,1953]
                            FIELD [1804,1853]
                                String: "image" [1804,1811]
                                STRING [1812,1853]
                                    String: "huggingface/transformers-all-latest-gpu" [1812,1853]
                            FIELD [1854,1952]
                                String: "options" [1854,1863]
                                STRING [1864,1952]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1864,1952]
                    FIELD [1954,4278]
                        String: "steps" [1954,1961]
                        ARRAY [1962,4278]
                            OBJECT [1963,2056]
                                FIELD [1964,1999]
                                    String: "name" [1964,1970]
                                    STRING [1971,1999]
                                        String: "Echo input and matrix info" [1971,1999]
                                FIELD [2000,2014]
                                    String: "shell" [2000,2007]
                                    STRING [2008,2014]
                                        String: "bash" [2008,2014]
                                FIELD [2015,2055]
                                    String: "run" [2015,2020]
                                    STRING [2021,2055]
                                        String: "echo \"${{ matrix.folders }}\"\n" [2021,2055]
                            OBJECT [2057,2331]
                                FIELD [2058,2100]
                                    String: "name" [2058,2064]
                                    STRING [2065,2100]
                                        String: "Echo folder ${{ matrix.folders }}" [2065,2100]
                                FIELD [2101,2115]
                                    String: "shell" [2101,2108]
                                    STRING [2109,2115]
                                        String: "bash" [2109,2115]
                                FIELD [2116,2330]
                                    String: "run" [2116,2121]
                                    STRING [2122,2330]
                                        String: "echo \"${{ matrix.folders }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [2122,2330]
                            OBJECT [2332,2597]
                                FIELD [2333,2354]
                                    String: "name" [2333,2339]
                                    STRING [2340,2354]
                                        String: "Update clone" [2340,2354]
                                FIELD [2355,2390]
                                    String: "working-directory" [2355,2374]
                                    STRING [2375,2390]
                                        String: "/transformers" [2375,2390]
                                FIELD [2391,2596]
                                    String: "run" [2391,2396]
                                    STRING [2397,2596]
                                        String: "git fetch && git fetch origin pull/${{ github.event.pull_request.number }}/head:pull/${{ github.event.pull_request.number }}/merge && git checkout pull/${{ github.event.pull_request.number }}/merge" [2397,2596]
                            OBJECT [2598,2813]
                                FIELD [2599,2696]
                                    String: "name" [2599,2605]
                                    STRING [2606,2696]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [2606,2696]
                                FIELD [2697,2732]
                                    String: "working-directory" [2697,2716]
                                    STRING [2717,2732]
                                        String: "/transformers" [2717,2732]
                                FIELD [2733,2812]
                                    String: "run" [2733,2738]
                                    STRING [2739,2812]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [2739,2812]
                            OBJECT [2814,2856]
                                FIELD [2815,2834]
                                    String: "name" [2815,2821]
                                    STRING [2822,2834]
                                        String: "NVIDIA-SMI" [2822,2834]
                                FIELD [2835,2855]
                                    String: "run" [2835,2840]
                                    STRING [2841,2855]
                                        String: "nvidia-smi\n" [2841,2855]
                            OBJECT [2857,2952]
                                FIELD [2858,2878]
                                    String: "name" [2858,2864]
                                    STRING [2865,2878]
                                        String: "Environment" [2865,2878]
                                FIELD [2879,2914]
                                    String: "working-directory" [2879,2898]
                                    STRING [2899,2914]
                                        String: "/transformers" [2899,2914]
                                FIELD [2915,2951]
                                    String: "run" [2915,2920]
                                    STRING [2921,2951]
                                        String: "python3 utils/print_env.py\n" [2921,2951]
                            OBJECT [2953,3062]
                                FIELD [2954,3006]
                                    String: "name" [2954,2960]
                                    STRING [2961,3006]
                                        String: "Show installed libraries and their versions" [2961,3006]
                                FIELD [3007,3042]
                                    String: "working-directory" [3007,3026]
                                    STRING [3027,3042]
                                        String: "/transformers" [3027,3042]
                                FIELD [3043,3061]
                                    String: "run" [3043,3048]
                                    STRING [3049,3061]
                                        String: "pip freeze" [3049,3061]
                            OBJECT [3063,3285]
                                FIELD [3064,3093]
                                    String: "name" [3064,3070]
                                    STRING [3071,3093]
                                        String: "Run all tests on GPU" [3071,3093]
                                FIELD [3094,3129]
                                    String: "working-directory" [3094,3113]
                                    STRING [3114,3129]
                                        String: "/transformers" [3114,3129]
                                FIELD [3130,3284]
                                    String: "run" [3130,3135]
                                    STRING [3136,3284]
                                        String: "python3 -m pytest -v -rsfE --make-reports=${{ matrix.machine_type }}_run_models_gpu_${{ matrix.folders }}_test_reports tests/${{ matrix.folders }}" [3136,3284]
                            OBJECT [3286,3497]
                                FIELD [3287,3317]
                                    String: "name" [3287,3293]
                                    STRING [3294,3317]
                                        String: "Failure short reports" [3294,3317]
                                FIELD [3318,3341]
                                    String: "if" [3318,3322]
                                    STRING [3323,3341]
                                        String: "${{ failure() }}" [3323,3341]
                                FIELD [3342,3366]
                                    String: "continue-on-error" [3342,3361]
                                    TRUE [3362,3366]
                                FIELD [3367,3496]
                                    String: "run" [3367,3372]
                                    STRING [3373,3496]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_run_models_gpu_${{ matrix.folders }}_test_reports/failures_short.txt" [3373,3496]
                            OBJECT [3498,3889]
                                FIELD [3499,3541]
                                    String: "name" [3499,3505]
                                    STRING [3506,3541]
                                        String: "Make sure report directory exists" [3506,3541]
                                FIELD [3542,3556]
                                    String: "shell" [3542,3549]
                                    STRING [3550,3556]
                                        String: "bash" [3550,3556]
                                FIELD [3557,3888]
                                    String: "run" [3557,3562]
                                    STRING [3563,3888]
                                        String: "mkdir -p /transformers/reports/${{ matrix.machine_type }}_run_models_gpu_${{ matrix.folders }}_test_reports\necho \"hello\" > /transformers/reports/${{ matrix.machine_type }}_run_models_gpu_${{ matrix.folders }}_test_reports/hello.txt\necho \"${{ matrix.machine_type }}_run_models_gpu_${{ matrix.folders }}_test_reports\"\n" [3563,3888]
                            OBJECT [3890,4277]
                                FIELD [3891,4010]
                                    String: "name" [3891,3897]
                                    STRING [3898,4010]
                                        String: "Test suite reports artifacts: ${{ matrix.machine_type }}_run_models_gpu_${{ env.matrix_folders }}_test_reports" [3898,4010]
                                FIELD [4011,4033]
                                    String: "if" [4011,4015]
                                    STRING [4016,4033]
                                        String: "${{ always() }}" [4016,4033]
                                FIELD [4034,4069]
                                    String: "uses" [4034,4040]
                                    STRING [4041,4069]
                                        String: "actions/upload-artifact@v4" [4041,4069]
                                FIELD [4070,4276]
                                    String: "with" [4070,4076]
                                    OBJECT [4077,4276]
                                        FIELD [4078,4167]
                                            String: "name" [4078,4084]
                                            STRING [4085,4167]
                                                String: "${{ matrix.machine_type }}_run_models_gpu_${{ env.matrix_folders }}_test_reports" [4085,4167]
                                        FIELD [4168,4275]
                                            String: "path" [4168,4174]
                                            STRING [4175,4275]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_run_models_gpu_${{ matrix.folders }}_test_reports" [4175,4275]