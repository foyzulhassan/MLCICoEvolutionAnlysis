OBJECT [0,5008]
    FIELD [1,31]
        String: "name" [1,7]
        STRING [8,31]
            String: "CD - Kubernetes - Dev" [8,31]
    FIELD [32,277]
        String: "on" [32,36]
        OBJECT [37,277]
            FIELD [38,73]
                String: "schedule" [38,48]
                ARRAY [49,73]
                    OBJECT [50,72]
                        FIELD [51,71]
                            String: "cron" [51,57]
                            STRING [58,71]
                                String: "0 */3 * * *" [58,71]
            FIELD [74,276]
                String: "workflow_dispatch" [74,93]
                OBJECT [94,276]
                    FIELD [95,275]
                        String: "inputs" [95,103]
                        OBJECT [104,275]
                            FIELD [105,190]
                                String: "check-cache" [105,118]
                                OBJECT [119,190]
                                    FIELD [120,136]
                                        String: "type" [120,126]
                                        STRING [127,136]
                                            String: "boolean" [127,136]
                                    FIELD [137,173]
                                        String: "description" [137,150]
                                        STRING [151,173]
                                            String: "Check workflow cache" [151,173]
                                    FIELD [174,189]
                                        String: "default" [174,183]
                                        FALSE [184,189]
                            FIELD [191,274]
                                String: "deploy-helm" [191,204]
                                OBJECT [205,274]
                                    FIELD [206,222]
                                        String: "type" [206,212]
                                        STRING [213,222]
                                            String: "boolean" [213,222]
                                    FIELD [223,257]
                                        String: "description" [223,236]
                                        STRING [237,257]
                                            String: "Deploy Helm Charts" [237,257]
                                    FIELD [258,273]
                                        String: "default" [258,267]
                                        FALSE [268,273]
    FIELD [278,5007]
        String: "jobs" [278,284]
        OBJECT [285,5007]
            FIELD [286,830]
                String: "check-last-run" [286,302]
                OBJECT [303,830]
                    FIELD [304,337]
                        String: "runs-on" [304,313]
                        ARRAY [314,337]
                            STRING [315,328]
                                String: "self-hosted" [315,328]
                            STRING [329,336]
                                String: "Linux" [329,336]
                    FIELD [338,402]
                        String: "outputs" [338,347]
                        OBJECT [348,402]
                            FIELD [349,401]
                                String: "same-commit" [349,362]
                                STRING [363,401]
                                    String: "${{ steps.cache.outputs.cache-hit }}" [363,401]
                    FIELD [403,829]
                        String: "steps" [403,410]
                        ARRAY [411,829]
                            OBJECT [412,659]
                                FIELD [413,443]
                                    String: "name" [413,419]
                                    STRING [420,443]
                                        String: "Check for new changes" [420,443]
                                FIELD [444,527]
                                    String: "if" [444,448]
                                    STRING [449,527]
                                        String: "github.event_name == 'schedule' || github.event.inputs.check-cache == 'true'" [449,527]
                                FIELD [528,540]
                                    String: "id" [528,532]
                                    STRING [533,540]
                                        String: "cache" [533,540]
                                FIELD [541,566]
                                    String: "uses" [541,547]
                                    STRING [548,566]
                                        String: "actions/cache@v3" [548,566]
                                FIELD [567,658]
                                    String: "with" [567,573]
                                    OBJECT [574,658]
                                        FIELD [575,604]
                                            String: "path" [575,581]
                                            STRING [582,604]
                                                String: "scripts/k8s_dev_hash" [582,604]
                                        FIELD [605,638]
                                            String: "key" [605,610]
                                            STRING [611,638]
                                                String: "k8s-dev-${{ github.sha }}" [611,638]
                                        FIELD [639,657]
                                            String: "lookup-only" [639,652]
                                            TRUE [653,657]
                            OBJECT [660,828]
                                FIELD [661,685]
                                    String: "name" [661,667]
                                    STRING [668,685]
                                        String: "Save Commit SHA" [668,685]
                                FIELD [686,769]
                                    String: "if" [686,690]
                                    STRING [691,769]
                                        String: "github.event_name == 'schedule' || github.event.inputs.check-cache == 'true'" [691,769]
                                FIELD [770,827]
                                    String: "run" [770,775]
                                    STRING [776,827]
                                        String: "echo \"${{ github.sha }}\" > scripts/k8s_dev_hash" [776,827]
            FIELD [831,5006]
                String: "deploy-syft-dev" [831,848]
                OBJECT [849,5006]
                    FIELD [850,874]
                        String: "needs" [850,857]
                        STRING [858,874]
                            String: "check-last-run" [858,874]
                    FIELD [875,932]
                        String: "if" [875,879]
                        STRING [880,932]
                            String: "needs.check-last-run.outputs.same-commit != 'true'" [880,932]
                    FIELD [933,966]
                        String: "runs-on" [933,942]
                        ARRAY [943,966]
                            STRING [944,957]
                                String: "self-hosted" [944,957]
                            STRING [958,965]
                                String: "Linux" [958,965]
                    FIELD [967,5005]
                        String: "steps" [967,974]
                        ARRAY [975,5005]
                            OBJECT [976,1057]
                                FIELD [977,1014]
                                    String: "name" [977,983]
                                    STRING [984,1014]
                                        String: "Permission to home directory" [984,1014]
                                FIELD [1015,1056]
                                    String: "run" [1015,1020]
                                    STRING [1021,1056]
                                        String: "sudo chown -R $USER:$USER $HOME\n" [1021,1056]
                            OBJECT [1058,1088]
                                FIELD [1059,1087]
                                    String: "uses" [1059,1065]
                                    STRING [1066,1087]
                                        String: "actions/checkout@v4" [1066,1087]
                            OBJECT [1089,1283]
                                FIELD [1090,1118]
                                    String: "name" [1090,1096]
                                    STRING [1097,1118]
                                        String: "Checkout Infra Repo" [1097,1118]
                                FIELD [1119,1147]
                                    String: "uses" [1119,1125]
                                    STRING [1126,1147]
                                        String: "actions/checkout@v4" [1126,1147]
                                FIELD [1148,1282]
                                    String: "with" [1148,1154]
                                    OBJECT [1155,1282]
                                        FIELD [1156,1196]
                                            String: "repository" [1156,1168]
                                            STRING [1169,1196]
                                                String: "${{ secrets.INFRA_REPO }}" [1169,1196]
                                        FIELD [1197,1209]
                                            String: "ref" [1197,1202]
                                            STRING [1203,1209]
                                                String: "main" [1203,1209]
                                        FIELD [1210,1257]
                                            String: "token" [1210,1217]
                                            STRING [1218,1257]
                                                String: "${{ secrets.INFRA_BOT_COMMIT_TOKEN }}" [1218,1257]
                                        FIELD [1258,1281]
                                            String: "path" [1258,1264]
                                            STRING [1265,1281]
                                                String: "infrastructure" [1265,1281]
                            OBJECT [1284,1374]
                                FIELD [1285,1307]
                                    String: "name" [1285,1291]
                                    STRING [1292,1307]
                                        String: "Set up Python" [1292,1307]
                                FIELD [1308,1340]
                                    String: "uses" [1308,1314]
                                    STRING [1315,1340]
                                        String: "actions/setup-python@v3" [1315,1340]
                                FIELD [1341,1373]
                                    String: "with" [1341,1347]
                                    OBJECT [1348,1373]
                                        FIELD [1349,1372]
                                            String: "python-version" [1349,1365]
                                            STRING [1366,1372]
                                                String: "3.11" [1366,1372]
                            OBJECT [1375,1459]
                                FIELD [1376,1405]
                                    String: "name" [1376,1382]
                                    STRING [1383,1405]
                                        String: "Set up Docker Buildx" [1383,1405]
                                FIELD [1406,1419]
                                    String: "id" [1406,1410]
                                    STRING [1411,1419]
                                        String: "buildx" [1411,1419]
                                FIELD [1420,1458]
                                    String: "uses" [1420,1426]
                                    STRING [1427,1458]
                                        String: "docker/setup-buildx-action@v3" [1427,1458]
                            OBJECT [1460,1565]
                                FIELD [1461,1487]
                                    String: "name" [1461,1467]
                                    STRING [1468,1487]
                                        String: "Install Azure CLI" [1468,1487]
                                FIELD [1488,1564]
                                    String: "run" [1488,1493]
                                    STRING [1494,1564]
                                        String: "curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash\naz version\n" [1494,1564]
                            OBJECT [1566,1681]
                                FIELD [1567,1594]
                                    String: "name" [1567,1573]
                                    STRING [1574,1594]
                                        String: "Login to Azure CLI" [1574,1594]
                                FIELD [1595,1618]
                                    String: "uses" [1595,1601]
                                    STRING [1602,1618]
                                        String: "azure/login@v1" [1602,1618]
                                FIELD [1619,1680]
                                    String: "with" [1619,1625]
                                    OBJECT [1626,1680]
                                        FIELD [1627,1679]
                                            String: "creds" [1627,1634]
                                            STRING [1635,1679]
                                                String: "${{ secrets.AZURE_CREDENTIALS_GITHUB_CI }}" [1635,1679]
                            OBJECT [1682,1891]
                                FIELD [1683,1725]
                                    String: "name" [1683,1689]
                                    STRING [1690,1725]
                                        String: "Login to Azure Container Registry" [1690,1725]
                                FIELD [1726,1756]
                                    String: "uses" [1726,1732]
                                    STRING [1733,1756]
                                        String: "azure/docker-login@v1" [1733,1756]
                                FIELD [1757,1890]
                                    String: "with" [1757,1763]
                                    OBJECT [1764,1890]
                                        FIELD [1765,1807]
                                            String: "login-server" [1765,1779]
                                            STRING [1780,1807]
                                                String: "${{ secrets.ACR_SERVER }}" [1780,1807]
                                        FIELD [1808,1848]
                                            String: "username" [1808,1818]
                                            STRING [1819,1848]
                                                String: "${{ secrets.ACR_USERNAME }}" [1819,1848]
                                        FIELD [1849,1889]
                                            String: "password" [1849,1859]
                                            STRING [1860,1889]
                                                String: "${{ secrets.ACR_PASSWORD }}" [1860,1889]
                            OBJECT [1892,2034]
                                FIELD [1893,1926]
                                    String: "name" [1893,1899]
                                    STRING [1900,1926]
                                        String: "Set Grid package version" [1900,1926]
                                FIELD [1927,1938]
                                    String: "id" [1927,1931]
                                    STRING [1932,1938]
                                        String: "grid" [1932,1938]
                                FIELD [1939,1953]
                                    String: "shell" [1939,1946]
                                    STRING [1947,1953]
                                        String: "bash" [1947,1953]
                                FIELD [1954,2033]
                                    String: "run" [1954,1959]
                                    STRING [1960,2033]
                                        String: "echo \"GRID_VERSION=$(python packages/grid/VERSION)\" >> $GITHUB_OUTPUT" [1960,2033]
                            OBJECT [2035,2470]
                                FIELD [2036,2092]
                                    String: "name" [2036,2042]
                                    STRING [2043,2092]
                                        String: "Build and push `grid-backend` image to registry" [2043,2092]
                                FIELD [2093,2129]
                                    String: "uses" [2093,2099]
                                    STRING [2100,2129]
                                        String: "docker/build-push-action@v5" [2100,2129]
                                FIELD [2130,2469]
                                    String: "with" [2130,2136]
                                    OBJECT [2137,2469]
                                        FIELD [2138,2160]
                                            String: "context" [2138,2147]
                                            STRING [2148,2160]
                                                String: "./packages" [2148,2160]
                                        FIELD [2161,2212]
                                            String: "file" [2161,2167]
                                            STRING [2168,2212]
                                                String: "./packages/grid/backend/backend.dockerfile" [2168,2212]
                                        FIELD [2213,2224]
                                            String: "push" [2213,2219]
                                            TRUE [2220,2224]
                                        FIELD [2225,2243]
                                            String: "target" [2225,2233]
                                            STRING [2234,2243]
                                                String: "backend" [2234,2243]
                                        FIELD [2244,2468]
                                            String: "tags" [2244,2250]
                                            STRING [2251,2468]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-backend:${{ steps.grid.outputs.GRID_VERSION }}\n" [2251,2468]
                            OBJECT [2471,2938]
                                FIELD [2472,2529]
                                    String: "name" [2472,2478]
                                    STRING [2479,2529]
                                        String: "Build and push `grid-frontend` image to registry" [2479,2529]
                                FIELD [2530,2566]
                                    String: "uses" [2530,2536]
                                    STRING [2537,2566]
                                        String: "docker/build-push-action@v5" [2537,2566]
                                FIELD [2567,2937]
                                    String: "with" [2567,2573]
                                    OBJECT [2574,2937]
                                        FIELD [2575,2611]
                                            String: "context" [2575,2584]
                                            STRING [2585,2611]
                                                String: "./packages/grid/frontend" [2585,2611]
                                        FIELD [2612,2665]
                                            String: "file" [2612,2618]
                                            STRING [2619,2665]
                                                String: "./packages/grid/frontend/frontend.dockerfile" [2619,2665]
                                        FIELD [2666,2677]
                                            String: "push" [2666,2672]
                                            TRUE [2673,2677]
                                        FIELD [2678,2905]
                                            String: "tags" [2678,2684]
                                            STRING [2685,2905]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-frontend:${{ steps.grid.outputs.GRID_VERSION }}\n" [2685,2905]
                                        FIELD [2906,2936]
                                            String: "target" [2906,2914]
                                            STRING [2915,2936]
                                                String: "grid-ui-development" [2915,2936]
                            OBJECT [2939,3926]
                                FIELD [2940,2981]
                                    String: "name" [2940,2946]
                                    STRING [2947,2981]
                                        String: "Build Helm Chart & Copy to infra" [2947,2981]
                                FIELD [2982,3064]
                                    String: "if" [2982,2986]
                                    STRING [2987,3064]
                                        String: "github.ref == 'refs/heads/dev' || github.event.inputs.deploy-helm == 'true'" [2987,3064]
                                FIELD [3065,3079]
                                    String: "shell" [3065,3072]
                                    STRING [3073,3079]
                                        String: "bash" [3073,3079]
                                FIELD [3080,3925]
                                    String: "run" [3080,3085]
                                    STRING [3086,3925]
                                        String: "K3D_VERSION=v5.6.0\nDEVSPACE_VERSION=v6.3.3\n\n# install k3d\nwget https://github.com/k3d-io/k3d/releases/download/${K3D_VERSION}/k3d-linux-amd64\nmv k3d-linux-amd64 k3d\nchmod +x k3d\nexport PATH=`pwd`:$PATH\nk3d version\n\n# Install devspace\ncurl -sSL https://github.com/loft-sh/devspace/releases/download/${DEVSPACE_VERSION}/devspace-linux-amd64 -o ./devspace\nchmod +x devspace\ndevspace version\n\n# Install helm\ncurl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash\nhelm version\n\nexport CONTAINER_REGISTRY=${{ secrets.ACR_SERVER }}\nexport VERSION=dev-${{github.sha}}\ntox -e syft.build.helm\n\nrm -rf infrastructure/gitops/environments/dev/\nmkdir -p infrastructure/gitops/environments/dev/\ncp -R packages/grid/helm/syft/. packages/grid/helm/manifests.yaml infrastructure/gitops/environments/dev/\n" [3086,3925]
                            OBJECT [3927,4285]
                                FIELD [3928,3972]
                                    String: "name" [3928,3934]
                                    STRING [3935,3972]
                                        String: "Commit & push changes to Infra Repo" [3935,3972]
                                FIELD [3973,4055]
                                    String: "if" [3973,3977]
                                    STRING [3978,4055]
                                        String: "github.ref == 'refs/heads/dev' || github.event.inputs.deploy-helm == 'true'" [3978,4055]
                                FIELD [4056,4089]
                                    String: "uses" [4056,4062]
                                    STRING [4063,4089]
                                        String: "EndBug/add-and-commit@v9" [4063,4089]
                                FIELD [4090,4284]
                                    String: "with" [4090,4096]
                                    OBJECT [4097,4284]
                                        FIELD [4098,4140]
                                            String: "author_name" [4098,4111]
                                            STRING [4112,4140]
                                                String: "${{ secrets.OM_BOT_NAME }}" [4112,4140]
                                        FIELD [4141,4185]
                                            String: "author_email" [4141,4155]
                                            STRING [4156,4185]
                                                String: "${{ secrets.OM_BOT_EMAIL }}" [4156,4185]
                                        FIELD [4186,4226]
                                            String: "message" [4186,4195]
                                            STRING [4196,4226]
                                                String: "[env] Update dev helm charts" [4196,4226]
                                        FIELD [4227,4236]
                                            String: "add" [4227,4232]
                                            STRING [4233,4236]
                                                String: "." [4233,4236]
                                        FIELD [4237,4257]
                                            String: "push" [4237,4243]
                                            STRING [4244,4257]
                                                String: "origin main" [4244,4257]
                                        FIELD [4258,4283]
                                            String: "cwd" [4258,4263]
                                            STRING [4264,4283]
                                                String: "./infrastructure/" [4264,4283]
                            OBJECT [4286,4892]
                                FIELD [4287,4328]
                                    String: "name" [4287,4293]
                                    STRING [4294,4328]
                                        String: "Cleanup Azure Container Registry" [4294,4328]
                                FIELD [4329,4891]
                                    String: "run" [4329,4334]
                                    STRING [4335,4891]
                                        String: "ACR_REGISTRY_NAME=${{ secrets.ACR_REGISTRY_NAME }}\n\necho \">> Fetching repo list..\"\nREPO_LIST=$(az acr repository list -n $ACR_REGISTRY_NAME -o tsv)\n\nKEEP_PREV_VERSIONS=5\nTAIL_FROM_LINE=$(($KEEP_PREV_VERSIONS + 1))\n\nfor repo in $REPO_LIST\ndo\n    echo \"Cleaning up '$repo'\"\n    az acr repository show-tags --name $ACR_REGISTRY_NAME --repository $repo --orderby time_desc --output tsv \\\n      | grep dev- \\\n      | tail -n +$TAIL_FROM_LINE \\\n      | xargs -r -I% az acr repository untag --name $ACR_REGISTRY_NAME --image $repo:%\ndone\n" [4335,4891]
                            OBJECT [4893,5004]
                                FIELD [4894,4935]
                                    String: "name" [4894,4900]
                                    STRING [4901,4935]
                                        String: "Logout and cleanup Azure account" [4901,4935]
                                FIELD [4936,4951]
                                    String: "if" [4936,4940]
                                    STRING [4941,4951]
                                        String: "always()" [4941,4951]
                                FIELD [4952,5003]
                                    String: "run" [4952,4957]
                                    STRING [4958,5003]
                                        String: "az logout\naz cache purge\naz account clear" [4958,5003]