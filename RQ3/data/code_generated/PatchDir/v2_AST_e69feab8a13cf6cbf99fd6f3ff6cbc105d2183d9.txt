OBJECT [0,19291]
    FIELD [1,35]
        String: "name" [1,7]
        STRING [8,35]
            String: "Self-hosted runner (push)" [8,35]
    FIELD [36,282]
        String: "on" [36,40]
        OBJECT [41,282]
            FIELD [42,149]
                String: "workflow_run" [42,56]
                OBJECT [57,149]
                    FIELD [58,106]
                        String: "workflows" [58,69]
                        ARRAY [70,106]
                            STRING [71,105]
                                String: "Self-hosted runner (push-caller)" [71,105]
                    FIELD [107,126]
                        String: "branches" [107,117]
                        ARRAY [118,126]
                            STRING [119,125]
                                String: "main" [119,125]
                    FIELD [127,148]
                        String: "types" [127,134]
                        ARRAY [135,148]
                            STRING [136,147]
                                String: "completed" [136,147]
            FIELD [150,254]
                String: "push" [150,156]
                OBJECT [157,254]
                    FIELD [158,184]
                        String: "branches" [158,168]
                        ARRAY [169,184]
                            STRING [170,176]
                                String: "ci_*" [170,176]
                            STRING [177,183]
                                String: "ci-*" [177,183]
                    FIELD [185,253]
                        String: "paths" [185,192]
                        ARRAY [193,253]
                            STRING [194,202]
                                String: "src/**" [194,202]
                            STRING [203,213]
                                String: "tests/**" [203,213]
                            STRING [214,226]
                                String: ".github/**" [214,226]
                            STRING [227,241]
                                String: "templates/**" [227,241]
                            STRING [242,252]
                                String: "utils/**" [242,252]
            FIELD [255,281]
                String: "repository_dispatch" [255,276]
                NULL [277,281]
    FIELD [283,458]
        String: "env" [283,288]
        OBJECT [289,458]
            FIELD [290,312]
                String: "HF_HOME" [290,299]
                STRING [300,312]
                    String: "/mnt/cache" [300,312]
            FIELD [313,338]
                String: "TRANSFORMERS_IS_CI" [313,333]
                TRUE [334,338]
            FIELD [339,358]
                String: "OMP_NUM_THREADS" [339,356]
                NUMBER [357,358]
                    Number: 8 [357,358]
            FIELD [359,378]
                String: "MKL_NUM_THREADS" [359,376]
                NUMBER [377,378]
                    Number: 8 [377,378]
            FIELD [379,398]
                String: "PYTEST_TIMEOUT" [379,395]
                NUMBER [396,398]
                    Number: 60 [396,398]
            FIELD [399,431]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [399,426]
                TRUE [427,431]
            FIELD [432,457]
                String: "RUN_PT_TF_CROSS_TESTS" [432,455]
                NUMBER [456,457]
                    Number: 1 [456,457]
    FIELD [459,19290]
        String: "jobs" [459,465]
        OBJECT [466,19290]
            FIELD [467,840]
                String: "check_runner_status" [467,488]
                OBJECT [489,840]
                    FIELD [490,518]
                        String: "name" [490,496]
                        STRING [497,518]
                            String: "Check Runner Status" [497,518]
                    FIELD [519,544]
                        String: "runs-on" [519,528]
                        STRING [529,544]
                            String: "ubuntu-latest" [529,544]
                    FIELD [545,839]
                        String: "steps" [545,552]
                        ARRAY [553,839]
                            OBJECT [554,640]
                                FIELD [555,585]
                                    String: "name" [555,561]
                                    STRING [562,585]
                                        String: "Checkout transformers" [562,585]
                                FIELD [586,614]
                                    String: "uses" [586,592]
                                    STRING [593,614]
                                        String: "actions/checkout@v3" [593,614]
                                FIELD [615,639]
                                    String: "with" [615,621]
                                    OBJECT [622,639]
                                        FIELD [623,638]
                                            String: "fetch-depth" [623,636]
                                            NUMBER [637,638]
                                                Number: 2 [637,638]
                            OBJECT [641,838]
                                FIELD [642,670]
                                    String: "name" [642,648]
                                    STRING [649,670]
                                        String: "Check Runner Status" [649,670]
                                FIELD [671,837]
                                    String: "run" [671,676]
                                    STRING [677,837]
                                        String: "python utils/check_self_hosted_runner.py --target_runners single-gpu-ci-runner-docker,multi-gpu-ci-runner-docker --token ${{ secrets.ACCESS_REPO_INFO_TOKEN }}" [677,837]
            FIELD [841,1267]
                String: "check_runners" [841,856]
                OBJECT [857,1267]
                    FIELD [858,880]
                        String: "name" [858,864]
                        STRING [865,880]
                            String: "Check Runners" [865,880]
                    FIELD [881,910]
                        String: "needs" [881,888]
                        STRING [889,910]
                            String: "check_runner_status" [889,910]
                    FIELD [911,976]
                        String: "strategy" [911,921]
                        OBJECT [922,976]
                            FIELD [923,975]
                                String: "matrix" [923,931]
                                OBJECT [932,975]
                                    FIELD [933,974]
                                        String: "machine_type" [933,947]
                                        ARRAY [948,974]
                                            STRING [949,961]
                                                String: "single-gpu" [949,961]
                                            STRING [962,973]
                                                String: "multi-gpu" [962,973]
                    FIELD [977,1044]
                        String: "runs-on" [977,986]
                        ARRAY [987,1044]
                            STRING [988,1001]
                                String: "self-hosted" [988,1001]
                            STRING [1002,1014]
                                String: "docker-gpu" [1002,1014]
                            STRING [1015,1043]
                                String: "${{ matrix.machine_type }}" [1015,1043]
                    FIELD [1045,1213]
                        String: "container" [1045,1056]
                        OBJECT [1057,1213]
                            FIELD [1058,1115]
                                String: "image" [1058,1065]
                                STRING [1066,1115]
                                    String: "huggingface/transformers-all-latest-gpu-push-ci" [1066,1115]
                            FIELD [1116,1212]
                                String: "options" [1116,1125]
                                STRING [1126,1212]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1126,1212]
                    FIELD [1214,1266]
                        String: "steps" [1214,1221]
                        ARRAY [1222,1266]
                            OBJECT [1223,1265]
                                FIELD [1224,1243]
                                    String: "name" [1224,1230]
                                    STRING [1231,1243]
                                        String: "NVIDIA-SMI" [1231,1243]
                                FIELD [1244,1264]
                                    String: "run" [1244,1249]
                                    STRING [1250,1264]
                                        String: "nvidia-smi\n" [1250,1264]
            FIELD [1268,4169]
                String: "setup" [1268,1275]
                OBJECT [1276,4169]
                    FIELD [1277,1291]
                        String: "name" [1277,1283]
                        STRING [1284,1291]
                            String: "Setup" [1284,1291]
                    FIELD [1292,1315]
                        String: "needs" [1292,1299]
                        STRING [1300,1315]
                            String: "check_runners" [1300,1315]
                    FIELD [1316,1381]
                        String: "strategy" [1316,1326]
                        OBJECT [1327,1381]
                            FIELD [1328,1380]
                                String: "matrix" [1328,1336]
                                OBJECT [1337,1380]
                                    FIELD [1338,1379]
                                        String: "machine_type" [1338,1352]
                                        ARRAY [1353,1379]
                                            STRING [1354,1366]
                                                String: "single-gpu" [1354,1366]
                                            STRING [1367,1378]
                                                String: "multi-gpu" [1367,1378]
                    FIELD [1382,1449]
                        String: "runs-on" [1382,1391]
                        ARRAY [1392,1449]
                            STRING [1393,1406]
                                String: "self-hosted" [1393,1406]
                            STRING [1407,1419]
                                String: "docker-gpu" [1407,1419]
                            STRING [1420,1448]
                                String: "${{ matrix.machine_type }}" [1420,1448]
                    FIELD [1450,1618]
                        String: "container" [1450,1461]
                        OBJECT [1462,1618]
                            FIELD [1463,1520]
                                String: "image" [1463,1470]
                                STRING [1471,1520]
                                    String: "huggingface/transformers-all-latest-gpu-push-ci" [1471,1520]
                            FIELD [1521,1617]
                                String: "options" [1521,1530]
                                STRING [1531,1617]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1531,1617]
                    FIELD [1619,1734]
                        String: "outputs" [1619,1628]
                        OBJECT [1629,1734]
                            FIELD [1630,1679]
                                String: "matrix" [1630,1638]
                                STRING [1639,1679]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [1639,1679]
                            FIELD [1680,1733]
                                String: "test_map" [1680,1690]
                                STRING [1691,1733]
                                    String: "${{ steps.set-matrix.outputs.test_map }}" [1691,1733]
                    FIELD [1735,4168]
                        String: "steps" [1735,1742]
                        ARRAY [1743,4168]
                            OBJECT [1744,2461]
                                FIELD [1745,1790]
                                    String: "name" [1745,1751]
                                    STRING [1752,1790]
                                        String: "Prepare custom environment variables" [1752,1790]
                                FIELD [1791,1805]
                                    String: "shell" [1791,1798]
                                    STRING [1799,1805]
                                        String: "bash" [1799,1805]
                                FIELD [1806,2460]
                                    String: "run" [1806,1811]
                                    STRING [1812,2460]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [1812,2460]
                            OBJECT [2462,2597]
                                FIELD [2463,2499]
                                    String: "name" [2463,2469]
                                    STRING [2470,2499]
                                        String: "print environment variables" [2470,2499]
                                FIELD [2500,2596]
                                    String: "run" [2500,2505]
                                    STRING [2506,2596]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [2506,2596]
                            OBJECT [2598,2919]
                                FIELD [2599,2648]
                                    String: "name" [2599,2605]
                                    STRING [2606,2648]
                                        String: "Update clone using environment variables" [2606,2648]
                                FIELD [2649,2684]
                                    String: "working-directory" [2649,2668]
                                    STRING [2669,2684]
                                        String: "/transformers" [2669,2684]
                                FIELD [2685,2918]
                                    String: "run" [2685,2690]
                                    STRING [2691,2918]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [2691,2918]
                            OBJECT [2920,3058]
                                FIELD [2921,2937]
                                    String: "name" [2921,2927]
                                    STRING [2928,2937]
                                        String: "Cleanup" [2928,2937]
                                FIELD [2938,2973]
                                    String: "working-directory" [2938,2957]
                                    STRING [2958,2973]
                                        String: "/transformers" [2958,2973]
                                FIELD [2974,3057]
                                    String: "run" [2974,2979]
                                    STRING [2980,3057]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [2980,3057]
                            OBJECT [3059,3168]
                                FIELD [3060,3112]
                                    String: "name" [3060,3066]
                                    STRING [3067,3112]
                                        String: "Show installed libraries and their versions" [3067,3112]
                                FIELD [3113,3148]
                                    String: "working-directory" [3113,3132]
                                    STRING [3133,3148]
                                        String: "/transformers" [3133,3148]
                                FIELD [3149,3167]
                                    String: "run" [3149,3154]
                                    STRING [3155,3167]
                                        String: "pip freeze" [3155,3167]
                            OBJECT [3169,3364]
                                FIELD [3170,3201]
                                    String: "name" [3170,3176]
                                    STRING [3177,3201]
                                        String: "Fetch the tests to run" [3177,3201]
                                FIELD [3202,3237]
                                    String: "working-directory" [3202,3221]
                                    STRING [3222,3237]
                                        String: "/transformers" [3222,3237]
                                FIELD [3238,3363]
                                    String: "run" [3238,3243]
                                    STRING [3244,3363]
                                        String: "pip install --upgrade git-python\npython3 utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [3244,3363]
                            OBJECT [3365,3507]
                                FIELD [3366,3395]
                                    String: "name" [3366,3372]
                                    STRING [3373,3395]
                                        String: "Report fetched tests" [3373,3395]
                                FIELD [3396,3431]
                                    String: "uses" [3396,3402]
                                    STRING [3403,3431]
                                        String: "actions/upload-artifact@v3" [3403,3431]
                                FIELD [3432,3506]
                                    String: "with" [3432,3438]
                                    OBJECT [3439,3506]
                                        FIELD [3440,3461]
                                            String: "name" [3440,3446]
                                            STRING [3447,3461]
                                                String: "test_fetched" [3447,3461]
                                        FIELD [3462,3505]
                                            String: "path" [3462,3468]
                                            STRING [3469,3505]
                                                String: "/transformers/test_preparation.txt" [3469,3505]
                            OBJECT [3508,4167]
                                FIELD [3509,3526]
                                    String: "id" [3509,3513]
                                    STRING [3514,3526]
                                        String: "set-matrix" [3514,3526]
                                FIELD [3527,3562]
                                    String: "name" [3527,3533]
                                    STRING [3534,3562]
                                        String: "Organize tests into models" [3534,3562]
                                FIELD [3563,3598]
                                    String: "working-directory" [3563,3582]
                                    STRING [3583,3598]
                                        String: "/transformers" [3583,3598]
                                FIELD [3599,4166]
                                    String: "run" [3599,3604]
                                    STRING [3605,4166]
                                        String: "if [ -f test_map.json ]; then\n    keys=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); d = list(test_map.keys()); print(d)')\n    test_map=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); print(test_map)')\nelse\n    keys=$(python3 -c 'keys = [\"dummy\"]; print(keys)')\n    test_map=$(python3 -c 'test_map = {\"dummy\": []}; print(test_map)')\nfi\necho $keys\necho $test_map\necho \"matrix=$keys\" >> $GITHUB_OUTPUT\necho \"test_map=$test_map\" >> $GITHUB_OUTPUT\n" [3605,4166]
            FIELD [4170,7208]
                String: "run_tests_single_gpu" [4170,4192]
                OBJECT [4193,7208]
                    FIELD [4194,4214]
                        String: "name" [4194,4200]
                        STRING [4201,4214]
                            String: "Model tests" [4201,4214]
                    FIELD [4215,4230]
                        String: "needs" [4215,4222]
                        STRING [4223,4230]
                            String: "setup" [4223,4230]
                    FIELD [4231,4301]
                        String: "if" [4231,4235]
                        STRING [4236,4301]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [4236,4301]
                    FIELD [4302,4429]
                        String: "strategy" [4302,4312]
                        OBJECT [4313,4429]
                            FIELD [4314,4331]
                                String: "fail-fast" [4314,4325]
                                FALSE [4326,4331]
                            FIELD [4332,4428]
                                String: "matrix" [4332,4340]
                                OBJECT [4341,4428]
                                    FIELD [4342,4397]
                                        String: "folders" [4342,4351]
                                        STRING [4352,4397]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [4352,4397]
                                    FIELD [4398,4427]
                                        String: "machine_type" [4398,4412]
                                        ARRAY [4413,4427]
                                            STRING [4414,4426]
                                                String: "single-gpu" [4414,4426]
                    FIELD [4430,4497]
                        String: "runs-on" [4430,4439]
                        ARRAY [4440,4497]
                            STRING [4441,4454]
                                String: "self-hosted" [4441,4454]
                            STRING [4455,4467]
                                String: "docker-gpu" [4455,4467]
                            STRING [4468,4496]
                                String: "${{ matrix.machine_type }}" [4468,4496]
                    FIELD [4498,4666]
                        String: "container" [4498,4509]
                        OBJECT [4510,4666]
                            FIELD [4511,4568]
                                String: "image" [4511,4518]
                                STRING [4519,4568]
                                    String: "huggingface/transformers-all-latest-gpu-push-ci" [4519,4568]
                            FIELD [4569,4665]
                                String: "options" [4569,4578]
                                STRING [4579,4665]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [4579,4665]
                    FIELD [4667,7207]
                        String: "steps" [4667,4674]
                        ARRAY [4675,7207]
                            OBJECT [4676,5393]
                                FIELD [4677,4722]
                                    String: "name" [4677,4683]
                                    STRING [4684,4722]
                                        String: "Prepare custom environment variables" [4684,4722]
                                FIELD [4723,4737]
                                    String: "shell" [4723,4730]
                                    STRING [4731,4737]
                                        String: "bash" [4731,4737]
                                FIELD [4738,5392]
                                    String: "run" [4738,4743]
                                    STRING [4744,5392]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [4744,5392]
                            OBJECT [5394,5529]
                                FIELD [5395,5431]
                                    String: "name" [5395,5401]
                                    STRING [5402,5431]
                                        String: "print environment variables" [5402,5431]
                                FIELD [5432,5528]
                                    String: "run" [5432,5437]
                                    STRING [5438,5528]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [5438,5528]
                            OBJECT [5530,5851]
                                FIELD [5531,5580]
                                    String: "name" [5531,5537]
                                    STRING [5538,5580]
                                        String: "Update clone using environment variables" [5538,5580]
                                FIELD [5581,5616]
                                    String: "working-directory" [5581,5600]
                                    STRING [5601,5616]
                                        String: "/transformers" [5601,5616]
                                FIELD [5617,5850]
                                    String: "run" [5617,5622]
                                    STRING [5623,5850]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [5623,5850]
                            OBJECT [5852,6198]
                                FIELD [5853,5895]
                                    String: "name" [5853,5859]
                                    STRING [5860,5895]
                                        String: "Echo folder ${{ matrix.folders }}" [5860,5895]
                                FIELD [5896,5910]
                                    String: "shell" [5896,5903]
                                    STRING [5904,5910]
                                        String: "bash" [5904,5910]
                                FIELD [5911,6197]
                                    String: "run" [5911,5916]
                                    STRING [5917,6197]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [5917,6197]
                            OBJECT [6199,6241]
                                FIELD [6200,6219]
                                    String: "name" [6200,6206]
                                    STRING [6207,6219]
                                        String: "NVIDIA-SMI" [6207,6219]
                                FIELD [6220,6240]
                                    String: "run" [6220,6225]
                                    STRING [6226,6240]
                                        String: "nvidia-smi\n" [6226,6240]
                            OBJECT [6242,6337]
                                FIELD [6243,6263]
                                    String: "name" [6243,6249]
                                    STRING [6250,6263]
                                        String: "Environment" [6250,6263]
                                FIELD [6264,6299]
                                    String: "working-directory" [6264,6283]
                                    STRING [6284,6299]
                                        String: "/transformers" [6284,6299]
                                FIELD [6300,6336]
                                    String: "run" [6300,6305]
                                    STRING [6306,6336]
                                        String: "python3 utils/print_env.py\n" [6306,6336]
                            OBJECT [6338,6447]
                                FIELD [6339,6391]
                                    String: "name" [6339,6345]
                                    STRING [6346,6391]
                                        String: "Show installed libraries and their versions" [6346,6391]
                                FIELD [6392,6427]
                                    String: "working-directory" [6392,6411]
                                    STRING [6412,6427]
                                        String: "/transformers" [6412,6427]
                                FIELD [6428,6446]
                                    String: "run" [6428,6433]
                                    STRING [6434,6446]
                                        String: "pip freeze" [6434,6446]
                            OBJECT [6448,6721]
                                FIELD [6449,6496]
                                    String: "name" [6449,6455]
                                    STRING [6456,6496]
                                        String: "Run all non-slow selected tests on GPU" [6456,6496]
                                FIELD [6497,6532]
                                    String: "working-directory" [6497,6516]
                                    STRING [6517,6532]
                                        String: "/transformers" [6517,6532]
                                FIELD [6533,6720]
                                    String: "run" [6533,6538]
                                    STRING [6539,6720]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [6539,6720]
                            OBJECT [6722,6915]
                                FIELD [6723,6753]
                                    String: "name" [6723,6729]
                                    STRING [6730,6753]
                                        String: "Failure short reports" [6730,6753]
                                FIELD [6754,6777]
                                    String: "if" [6754,6758]
                                    STRING [6759,6777]
                                        String: "${{ failure() }}" [6759,6777]
                                FIELD [6778,6802]
                                    String: "continue-on-error" [6778,6797]
                                    TRUE [6798,6802]
                                FIELD [6803,6914]
                                    String: "run" [6803,6808]
                                    STRING [6809,6914]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [6809,6914]
                            OBJECT [6916,7206]
                                FIELD [6917,6954]
                                    String: "name" [6917,6923]
                                    STRING [6924,6954]
                                        String: "Test suite reports artifacts" [6924,6954]
                                FIELD [6955,6977]
                                    String: "if" [6955,6959]
                                    STRING [6960,6977]
                                        String: "${{ always() }}" [6960,6977]
                                FIELD [6978,7013]
                                    String: "uses" [6978,6984]
                                    STRING [6985,7013]
                                        String: "actions/upload-artifact@v3" [6985,7013]
                                FIELD [7014,7205]
                                    String: "with" [7014,7020]
                                    OBJECT [7021,7205]
                                        FIELD [7022,7114]
                                            String: "name" [7022,7028]
                                            STRING [7029,7114]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [7029,7114]
                                        FIELD [7115,7204]
                                            String: "path" [7115,7121]
                                            STRING [7122,7204]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [7122,7204]
            FIELD [7209,10283]
                String: "run_tests_multi_gpu" [7209,7230]
                OBJECT [7231,10283]
                    FIELD [7232,7252]
                        String: "name" [7232,7238]
                        STRING [7239,7252]
                            String: "Model tests" [7239,7252]
                    FIELD [7253,7268]
                        String: "needs" [7253,7260]
                        STRING [7261,7268]
                            String: "setup" [7261,7268]
                    FIELD [7269,7339]
                        String: "if" [7269,7273]
                        STRING [7274,7339]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [7274,7339]
                    FIELD [7340,7466]
                        String: "strategy" [7340,7350]
                        OBJECT [7351,7466]
                            FIELD [7352,7369]
                                String: "fail-fast" [7352,7363]
                                FALSE [7364,7369]
                            FIELD [7370,7465]
                                String: "matrix" [7370,7378]
                                OBJECT [7379,7465]
                                    FIELD [7380,7435]
                                        String: "folders" [7380,7389]
                                        STRING [7390,7435]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [7390,7435]
                                    FIELD [7436,7464]
                                        String: "machine_type" [7436,7450]
                                        ARRAY [7451,7464]
                                            STRING [7452,7463]
                                                String: "multi-gpu" [7452,7463]
                    FIELD [7467,7534]
                        String: "runs-on" [7467,7476]
                        ARRAY [7477,7534]
                            STRING [7478,7491]
                                String: "self-hosted" [7478,7491]
                            STRING [7492,7504]
                                String: "docker-gpu" [7492,7504]
                            STRING [7505,7533]
                                String: "${{ matrix.machine_type }}" [7505,7533]
                    FIELD [7535,7705]
                        String: "container" [7535,7546]
                        OBJECT [7547,7705]
                            FIELD [7548,7605]
                                String: "image" [7548,7555]
                                STRING [7556,7605]
                                    String: "huggingface/transformers-all-latest-gpu-push-ci" [7556,7605]
                            FIELD [7606,7704]
                                String: "options" [7606,7615]
                                STRING [7616,7704]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [7616,7704]
                    FIELD [7706,10282]
                        String: "steps" [7706,7713]
                        ARRAY [7714,10282]
                            OBJECT [7715,8432]
                                FIELD [7716,7761]
                                    String: "name" [7716,7722]
                                    STRING [7723,7761]
                                        String: "Prepare custom environment variables" [7723,7761]
                                FIELD [7762,7776]
                                    String: "shell" [7762,7769]
                                    STRING [7770,7776]
                                        String: "bash" [7770,7776]
                                FIELD [7777,8431]
                                    String: "run" [7777,7782]
                                    STRING [7783,8431]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [7783,8431]
                            OBJECT [8433,8568]
                                FIELD [8434,8470]
                                    String: "name" [8434,8440]
                                    STRING [8441,8470]
                                        String: "print environment variables" [8441,8470]
                                FIELD [8471,8567]
                                    String: "run" [8471,8476]
                                    STRING [8477,8567]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [8477,8567]
                            OBJECT [8569,8890]
                                FIELD [8570,8619]
                                    String: "name" [8570,8576]
                                    STRING [8577,8619]
                                        String: "Update clone using environment variables" [8577,8619]
                                FIELD [8620,8655]
                                    String: "working-directory" [8620,8639]
                                    STRING [8640,8655]
                                        String: "/transformers" [8640,8655]
                                FIELD [8656,8889]
                                    String: "run" [8656,8661]
                                    STRING [8662,8889]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [8662,8889]
                            OBJECT [8891,9237]
                                FIELD [8892,8934]
                                    String: "name" [8892,8898]
                                    STRING [8899,8934]
                                        String: "Echo folder ${{ matrix.folders }}" [8899,8934]
                                FIELD [8935,8949]
                                    String: "shell" [8935,8942]
                                    STRING [8943,8949]
                                        String: "bash" [8943,8949]
                                FIELD [8950,9236]
                                    String: "run" [8950,8955]
                                    STRING [8956,9236]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [8956,9236]
                            OBJECT [9238,9280]
                                FIELD [9239,9258]
                                    String: "name" [9239,9245]
                                    STRING [9246,9258]
                                        String: "NVIDIA-SMI" [9246,9258]
                                FIELD [9259,9279]
                                    String: "run" [9259,9264]
                                    STRING [9265,9279]
                                        String: "nvidia-smi\n" [9265,9279]
                            OBJECT [9281,9376]
                                FIELD [9282,9302]
                                    String: "name" [9282,9288]
                                    STRING [9289,9302]
                                        String: "Environment" [9289,9302]
                                FIELD [9303,9338]
                                    String: "working-directory" [9303,9322]
                                    STRING [9323,9338]
                                        String: "/transformers" [9323,9338]
                                FIELD [9339,9375]
                                    String: "run" [9339,9344]
                                    STRING [9345,9375]
                                        String: "python3 utils/print_env.py\n" [9345,9375]
                            OBJECT [9377,9486]
                                FIELD [9378,9430]
                                    String: "name" [9378,9384]
                                    STRING [9385,9430]
                                        String: "Show installed libraries and their versions" [9385,9430]
                                FIELD [9431,9466]
                                    String: "working-directory" [9431,9450]
                                    STRING [9451,9466]
                                        String: "/transformers" [9451,9466]
                                FIELD [9467,9485]
                                    String: "run" [9467,9472]
                                    STRING [9473,9485]
                                        String: "pip freeze" [9473,9485]
                            OBJECT [9487,9796]
                                FIELD [9488,9535]
                                    String: "name" [9488,9494]
                                    STRING [9495,9535]
                                        String: "Run all non-slow selected tests on GPU" [9495,9535]
                                FIELD [9536,9571]
                                    String: "env" [9536,9541]
                                    OBJECT [9542,9571]
                                        FIELD [9543,9570]
                                            String: "MKL_SERVICE_FORCE_INTEL" [9543,9568]
                                            NUMBER [9569,9570]
                                                Number: 1 [9569,9570]
                                FIELD [9572,9607]
                                    String: "working-directory" [9572,9591]
                                    STRING [9592,9607]
                                        String: "/transformers" [9592,9607]
                                FIELD [9608,9795]
                                    String: "run" [9608,9613]
                                    STRING [9614,9795]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [9614,9795]
                            OBJECT [9797,9990]
                                FIELD [9798,9828]
                                    String: "name" [9798,9804]
                                    STRING [9805,9828]
                                        String: "Failure short reports" [9805,9828]
                                FIELD [9829,9852]
                                    String: "if" [9829,9833]
                                    STRING [9834,9852]
                                        String: "${{ failure() }}" [9834,9852]
                                FIELD [9853,9877]
                                    String: "continue-on-error" [9853,9872]
                                    TRUE [9873,9877]
                                FIELD [9878,9989]
                                    String: "run" [9878,9883]
                                    STRING [9884,9989]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [9884,9989]
                            OBJECT [9991,10281]
                                FIELD [9992,10029]
                                    String: "name" [9992,9998]
                                    STRING [9999,10029]
                                        String: "Test suite reports artifacts" [9999,10029]
                                FIELD [10030,10052]
                                    String: "if" [10030,10034]
                                    STRING [10035,10052]
                                        String: "${{ always() }}" [10035,10052]
                                FIELD [10053,10088]
                                    String: "uses" [10053,10059]
                                    STRING [10060,10088]
                                        String: "actions/upload-artifact@v3" [10060,10088]
                                FIELD [10089,10280]
                                    String: "with" [10089,10095]
                                    OBJECT [10096,10280]
                                        FIELD [10097,10189]
                                            String: "name" [10097,10103]
                                            STRING [10104,10189]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [10104,10189]
                                        FIELD [10190,10279]
                                            String: "path" [10190,10196]
                                            STRING [10197,10279]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [10197,10279]
            FIELD [10284,13451]
                String: "run_tests_torch_cuda_extensions_single_gpu" [10284,10328]
                OBJECT [10329,13451]
                    FIELD [10330,10365]
                        String: "name" [10330,10336]
                        STRING [10337,10365]
                            String: "Torch CUDA extension tests" [10337,10365]
                    FIELD [10366,10381]
                        String: "needs" [10366,10373]
                        STRING [10374,10381]
                            String: "setup" [10374,10381]
                    FIELD [10382,10510]
                        String: "if" [10382,10386]
                        STRING [10387,10510]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [10387,10510]
                    FIELD [10511,10582]
                        String: "strategy" [10511,10521]
                        OBJECT [10522,10582]
                            FIELD [10523,10540]
                                String: "fail-fast" [10523,10534]
                                FALSE [10535,10540]
                            FIELD [10541,10581]
                                String: "matrix" [10541,10549]
                                OBJECT [10550,10581]
                                    FIELD [10551,10580]
                                        String: "machine_type" [10551,10565]
                                        ARRAY [10566,10580]
                                            STRING [10567,10579]
                                                String: "single-gpu" [10567,10579]
                    FIELD [10583,10650]
                        String: "runs-on" [10583,10592]
                        ARRAY [10593,10650]
                            STRING [10594,10607]
                                String: "self-hosted" [10594,10607]
                            STRING [10608,10620]
                                String: "docker-gpu" [10608,10620]
                            STRING [10621,10649]
                                String: "${{ matrix.machine_type }}" [10621,10649]
                    FIELD [10651,10833]
                        String: "container" [10651,10662]
                        OBJECT [10663,10833]
                            FIELD [10664,10735]
                                String: "image" [10664,10671]
                                STRING [10672,10735]
                                    String: "huggingface/transformers-pytorch-deepspeed-latest-gpu-push-ci" [10672,10735]
                            FIELD [10736,10832]
                                String: "options" [10736,10745]
                                STRING [10746,10832]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [10746,10832]
                    FIELD [10834,13450]
                        String: "steps" [10834,10841]
                        ARRAY [10842,13450]
                            OBJECT [10843,11560]
                                FIELD [10844,10889]
                                    String: "name" [10844,10850]
                                    STRING [10851,10889]
                                        String: "Prepare custom environment variables" [10851,10889]
                                FIELD [10890,10904]
                                    String: "shell" [10890,10897]
                                    STRING [10898,10904]
                                        String: "bash" [10898,10904]
                                FIELD [10905,11559]
                                    String: "run" [10905,10910]
                                    STRING [10911,11559]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [10911,11559]
                            OBJECT [11561,11696]
                                FIELD [11562,11598]
                                    String: "name" [11562,11568]
                                    STRING [11569,11598]
                                        String: "print environment variables" [11569,11598]
                                FIELD [11599,11695]
                                    String: "run" [11599,11604]
                                    STRING [11605,11695]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [11605,11695]
                            OBJECT [11697,12028]
                                FIELD [11698,11747]
                                    String: "name" [11698,11704]
                                    STRING [11705,11747]
                                        String: "Update clone using environment variables" [11705,11747]
                                FIELD [11748,11793]
                                    String: "working-directory" [11748,11767]
                                    STRING [11768,11793]
                                        String: "/workspace/transformers" [11768,11793]
                                FIELD [11794,12027]
                                    String: "run" [11794,11799]
                                    STRING [11800,12027]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [11800,12027]
                            OBJECT [12029,12123]
                                FIELD [12030,12069]
                                    String: "name" [12030,12036]
                                    STRING [12037,12069]
                                        String: "Remove cached torch extensions" [12037,12069]
                                FIELD [12070,12122]
                                    String: "run" [12070,12075]
                                    STRING [12076,12122]
                                        String: "rm -rf /github/home/.cache/torch_extensions/" [12076,12122]
                            OBJECT [12124,12432]
                                FIELD [12125,12161]
                                    String: "name" [12125,12131]
                                    STRING [12132,12161]
                                        String: "Pre build DeepSpeed *again*" [12132,12161]
                                FIELD [12162,12194]
                                    String: "working-directory" [12162,12181]
                                    STRING [12182,12194]
                                        String: "/workspace" [12182,12194]
                                FIELD [12195,12431]
                                    String: "run" [12195,12200]
                                    STRING [12201,12431]
                                        String: "python3 -m pip uninstall -y deepspeed\nDS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 DS_BUILD_UTILS=1 python3 -m pip install deepspeed --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [12201,12431]
                            OBJECT [12433,12475]
                                FIELD [12434,12453]
                                    String: "name" [12434,12440]
                                    STRING [12441,12453]
                                        String: "NVIDIA-SMI" [12441,12453]
                                FIELD [12454,12474]
                                    String: "run" [12454,12459]
                                    STRING [12460,12474]
                                        String: "nvidia-smi\n" [12460,12474]
                            OBJECT [12476,12580]
                                FIELD [12477,12497]
                                    String: "name" [12477,12483]
                                    STRING [12484,12497]
                                        String: "Environment" [12484,12497]
                                FIELD [12498,12543]
                                    String: "working-directory" [12498,12517]
                                    STRING [12518,12543]
                                        String: "/workspace/transformers" [12518,12543]
                                FIELD [12544,12579]
                                    String: "run" [12544,12549]
                                    STRING [12550,12579]
                                        String: "python utils/print_env.py\n" [12550,12579]
                            OBJECT [12581,12700]
                                FIELD [12582,12634]
                                    String: "name" [12582,12588]
                                    STRING [12589,12634]
                                        String: "Show installed libraries and their versions" [12589,12634]
                                FIELD [12635,12680]
                                    String: "working-directory" [12635,12654]
                                    STRING [12655,12680]
                                        String: "/workspace/transformers" [12655,12680]
                                FIELD [12681,12699]
                                    String: "run" [12681,12686]
                                    STRING [12687,12699]
                                        String: "pip freeze" [12687,12699]
                            OBJECT [12701,12952]
                                FIELD [12702,12749]
                                    String: "name" [12702,12708]
                                    STRING [12709,12749]
                                        String: "Run all non-slow selected tests on GPU" [12709,12749]
                                FIELD [12750,12795]
                                    String: "working-directory" [12750,12769]
                                    STRING [12770,12795]
                                        String: "/workspace/transformers" [12770,12795]
                                FIELD [12796,12951]
                                    String: "run" [12796,12801]
                                    STRING [12802,12951]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [12802,12951]
                            OBJECT [12953,13156]
                                FIELD [12954,12984]
                                    String: "name" [12954,12960]
                                    STRING [12961,12984]
                                        String: "Failure short reports" [12961,12984]
                                FIELD [12985,13008]
                                    String: "if" [12985,12989]
                                    STRING [12990,13008]
                                        String: "${{ failure() }}" [12990,13008]
                                FIELD [13009,13033]
                                    String: "continue-on-error" [13009,13028]
                                    TRUE [13029,13033]
                                FIELD [13034,13155]
                                    String: "run" [13034,13039]
                                    STRING [13040,13155]
                                        String: "cat /workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [13040,13155]
                            OBJECT [13157,13449]
                                FIELD [13158,13195]
                                    String: "name" [13158,13164]
                                    STRING [13165,13195]
                                        String: "Test suite reports artifacts" [13165,13195]
                                FIELD [13196,13218]
                                    String: "if" [13196,13200]
                                    STRING [13201,13218]
                                        String: "${{ always() }}" [13201,13218]
                                FIELD [13219,13254]
                                    String: "uses" [13219,13225]
                                    STRING [13226,13254]
                                        String: "actions/upload-artifact@v3" [13226,13254]
                                FIELD [13255,13448]
                                    String: "with" [13255,13261]
                                    OBJECT [13262,13448]
                                        FIELD [13263,13347]
                                            String: "name" [13263,13269]
                                            STRING [13270,13347]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [13270,13347]
                                        FIELD [13348,13447]
                                            String: "path" [13348,13354]
                                            STRING [13355,13447]
                                                String: "/workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [13355,13447]
            FIELD [13452,16619]
                String: "run_tests_torch_cuda_extensions_multi_gpu" [13452,13495]
                OBJECT [13496,16619]
                    FIELD [13497,13532]
                        String: "name" [13497,13503]
                        STRING [13504,13532]
                            String: "Torch CUDA extension tests" [13504,13532]
                    FIELD [13533,13548]
                        String: "needs" [13533,13540]
                        STRING [13541,13548]
                            String: "setup" [13541,13548]
                    FIELD [13549,13677]
                        String: "if" [13549,13553]
                        STRING [13554,13677]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [13554,13677]
                    FIELD [13678,13748]
                        String: "strategy" [13678,13688]
                        OBJECT [13689,13748]
                            FIELD [13690,13707]
                                String: "fail-fast" [13690,13701]
                                FALSE [13702,13707]
                            FIELD [13708,13747]
                                String: "matrix" [13708,13716]
                                OBJECT [13717,13747]
                                    FIELD [13718,13746]
                                        String: "machine_type" [13718,13732]
                                        ARRAY [13733,13746]
                                            STRING [13734,13745]
                                                String: "multi-gpu" [13734,13745]
                    FIELD [13749,13816]
                        String: "runs-on" [13749,13758]
                        ARRAY [13759,13816]
                            STRING [13760,13773]
                                String: "self-hosted" [13760,13773]
                            STRING [13774,13786]
                                String: "docker-gpu" [13774,13786]
                            STRING [13787,13815]
                                String: "${{ matrix.machine_type }}" [13787,13815]
                    FIELD [13817,14001]
                        String: "container" [13817,13828]
                        OBJECT [13829,14001]
                            FIELD [13830,13901]
                                String: "image" [13830,13837]
                                STRING [13838,13901]
                                    String: "huggingface/transformers-pytorch-deepspeed-latest-gpu-push-ci" [13838,13901]
                            FIELD [13902,14000]
                                String: "options" [13902,13911]
                                STRING [13912,14000]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [13912,14000]
                    FIELD [14002,16618]
                        String: "steps" [14002,14009]
                        ARRAY [14010,16618]
                            OBJECT [14011,14728]
                                FIELD [14012,14057]
                                    String: "name" [14012,14018]
                                    STRING [14019,14057]
                                        String: "Prepare custom environment variables" [14019,14057]
                                FIELD [14058,14072]
                                    String: "shell" [14058,14065]
                                    STRING [14066,14072]
                                        String: "bash" [14066,14072]
                                FIELD [14073,14727]
                                    String: "run" [14073,14078]
                                    STRING [14079,14727]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [14079,14727]
                            OBJECT [14729,14864]
                                FIELD [14730,14766]
                                    String: "name" [14730,14736]
                                    STRING [14737,14766]
                                        String: "print environment variables" [14737,14766]
                                FIELD [14767,14863]
                                    String: "run" [14767,14772]
                                    STRING [14773,14863]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [14773,14863]
                            OBJECT [14865,15196]
                                FIELD [14866,14915]
                                    String: "name" [14866,14872]
                                    STRING [14873,14915]
                                        String: "Update clone using environment variables" [14873,14915]
                                FIELD [14916,14961]
                                    String: "working-directory" [14916,14935]
                                    STRING [14936,14961]
                                        String: "/workspace/transformers" [14936,14961]
                                FIELD [14962,15195]
                                    String: "run" [14962,14967]
                                    STRING [14968,15195]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [14968,15195]
                            OBJECT [15197,15291]
                                FIELD [15198,15237]
                                    String: "name" [15198,15204]
                                    STRING [15205,15237]
                                        String: "Remove cached torch extensions" [15205,15237]
                                FIELD [15238,15290]
                                    String: "run" [15238,15243]
                                    STRING [15244,15290]
                                        String: "rm -rf /github/home/.cache/torch_extensions/" [15244,15290]
                            OBJECT [15292,15600]
                                FIELD [15293,15329]
                                    String: "name" [15293,15299]
                                    STRING [15300,15329]
                                        String: "Pre build DeepSpeed *again*" [15300,15329]
                                FIELD [15330,15362]
                                    String: "working-directory" [15330,15349]
                                    STRING [15350,15362]
                                        String: "/workspace" [15350,15362]
                                FIELD [15363,15599]
                                    String: "run" [15363,15368]
                                    STRING [15369,15599]
                                        String: "python3 -m pip uninstall -y deepspeed\nDS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 DS_BUILD_UTILS=1 python3 -m pip install deepspeed --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [15369,15599]
                            OBJECT [15601,15643]
                                FIELD [15602,15621]
                                    String: "name" [15602,15608]
                                    STRING [15609,15621]
                                        String: "NVIDIA-SMI" [15609,15621]
                                FIELD [15622,15642]
                                    String: "run" [15622,15627]
                                    STRING [15628,15642]
                                        String: "nvidia-smi\n" [15628,15642]
                            OBJECT [15644,15748]
                                FIELD [15645,15665]
                                    String: "name" [15645,15651]
                                    STRING [15652,15665]
                                        String: "Environment" [15652,15665]
                                FIELD [15666,15711]
                                    String: "working-directory" [15666,15685]
                                    STRING [15686,15711]
                                        String: "/workspace/transformers" [15686,15711]
                                FIELD [15712,15747]
                                    String: "run" [15712,15717]
                                    STRING [15718,15747]
                                        String: "python utils/print_env.py\n" [15718,15747]
                            OBJECT [15749,15868]
                                FIELD [15750,15802]
                                    String: "name" [15750,15756]
                                    STRING [15757,15802]
                                        String: "Show installed libraries and their versions" [15757,15802]
                                FIELD [15803,15848]
                                    String: "working-directory" [15803,15822]
                                    STRING [15823,15848]
                                        String: "/workspace/transformers" [15823,15848]
                                FIELD [15849,15867]
                                    String: "run" [15849,15854]
                                    STRING [15855,15867]
                                        String: "pip freeze" [15855,15867]
                            OBJECT [15869,16120]
                                FIELD [15870,15917]
                                    String: "name" [15870,15876]
                                    STRING [15877,15917]
                                        String: "Run all non-slow selected tests on GPU" [15877,15917]
                                FIELD [15918,15963]
                                    String: "working-directory" [15918,15937]
                                    STRING [15938,15963]
                                        String: "/workspace/transformers" [15938,15963]
                                FIELD [15964,16119]
                                    String: "run" [15964,15969]
                                    STRING [15970,16119]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [15970,16119]
                            OBJECT [16121,16324]
                                FIELD [16122,16152]
                                    String: "name" [16122,16128]
                                    STRING [16129,16152]
                                        String: "Failure short reports" [16129,16152]
                                FIELD [16153,16176]
                                    String: "if" [16153,16157]
                                    STRING [16158,16176]
                                        String: "${{ failure() }}" [16158,16176]
                                FIELD [16177,16201]
                                    String: "continue-on-error" [16177,16196]
                                    TRUE [16197,16201]
                                FIELD [16202,16323]
                                    String: "run" [16202,16207]
                                    STRING [16208,16323]
                                        String: "cat /workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [16208,16323]
                            OBJECT [16325,16617]
                                FIELD [16326,16363]
                                    String: "name" [16326,16332]
                                    STRING [16333,16363]
                                        String: "Test suite reports artifacts" [16333,16363]
                                FIELD [16364,16386]
                                    String: "if" [16364,16368]
                                    STRING [16369,16386]
                                        String: "${{ always() }}" [16369,16386]
                                FIELD [16387,16422]
                                    String: "uses" [16387,16393]
                                    STRING [16394,16422]
                                        String: "actions/upload-artifact@v3" [16394,16422]
                                FIELD [16423,16616]
                                    String: "with" [16423,16429]
                                    OBJECT [16430,16616]
                                        FIELD [16431,16515]
                                            String: "name" [16431,16437]
                                            STRING [16438,16515]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [16438,16515]
                                        FIELD [16516,16615]
                                            String: "path" [16516,16522]
                                            STRING [16523,16615]
                                                String: "/workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [16523,16615]
            FIELD [16620,19289]
                String: "send_results" [16620,16634]
                OBJECT [16635,19289]
                    FIELD [16636,16668]
                        String: "name" [16636,16642]
                        STRING [16643,16668]
                            String: "Send results to webhook" [16643,16668]
                    FIELD [16669,16694]
                        String: "runs-on" [16669,16678]
                        STRING [16679,16694]
                            String: "ubuntu-latest" [16679,16694]
                    FIELD [16695,16710]
                        String: "if" [16695,16699]
                        STRING [16700,16710]
                            String: "always()" [16700,16710]
                    FIELD [16711,16900]
                        String: "needs" [16711,16718]
                        ARRAY [16719,16900]
                            STRING [16720,16741]
                                String: "check_runner_status" [16720,16741]
                            STRING [16742,16757]
                                String: "check_runners" [16742,16757]
                            STRING [16758,16765]
                                String: "setup" [16758,16765]
                            STRING [16766,16788]
                                String: "run_tests_single_gpu" [16766,16788]
                            STRING [16789,16810]
                                String: "run_tests_multi_gpu" [16789,16810]
                            STRING [16811,16855]
                                String: "run_tests_torch_cuda_extensions_single_gpu" [16811,16855]
                            STRING [16856,16899]
                                String: "run_tests_torch_cuda_extensions_multi_gpu" [16856,16899]
                    FIELD [16901,19288]
                        String: "steps" [16901,16908]
                        ARRAY [16909,19288]
                            OBJECT [16910,17147]
                                FIELD [16911,16942]
                                    String: "name" [16911,16917]
                                    STRING [16918,16942]
                                        String: "Preliminary job status" [16918,16942]
                                FIELD [16943,16957]
                                    String: "shell" [16943,16950]
                                    STRING [16951,16957]
                                        String: "bash" [16951,16957]
                                FIELD [16958,17146]
                                    String: "run" [16958,16963]
                                    STRING [16964,17146]
                                        String: "echo \"Runner availability: ${{ needs.check_runner_status.result }}\"\necho \"Setup status: ${{ needs.setup.result }}\"\necho \"Runner status: ${{ needs.check_runners.result }}\"\n" [16964,17146]
                            OBJECT [17148,17865]
                                FIELD [17149,17194]
                                    String: "name" [17149,17155]
                                    STRING [17156,17194]
                                        String: "Prepare custom environment variables" [17156,17194]
                                FIELD [17195,17209]
                                    String: "shell" [17195,17202]
                                    STRING [17203,17209]
                                        String: "bash" [17203,17209]
                                FIELD [17210,17864]
                                    String: "run" [17210,17215]
                                    STRING [17216,17864]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [17216,17864]
                            OBJECT [17866,18001]
                                FIELD [17867,17903]
                                    String: "name" [17867,17873]
                                    STRING [17874,17903]
                                        String: "print environment variables" [17874,17903]
                                FIELD [17904,18000]
                                    String: "run" [17904,17909]
                                    STRING [17910,18000]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [17910,18000]
                            OBJECT [18002,18058]
                                FIELD [18003,18031]
                                    String: "uses" [18003,18009]
                                    STRING [18010,18031]
                                        String: "actions/checkout@v3" [18010,18031]
                                FIELD [18032,18057]
                                    String: "with" [18032,18038]
                                    OBJECT [18039,18057]
                                        FIELD [18040,18056]
                                            String: "fetch-depth" [18040,18053]
                                            NUMBER [18054,18056]
                                                Number: 20 [18054,18056]
                            OBJECT [18059,18344]
                                FIELD [18060,18109]
                                    String: "name" [18060,18066]
                                    STRING [18067,18109]
                                        String: "Update clone using environment variables" [18067,18109]
                                FIELD [18110,18343]
                                    String: "run" [18110,18115]
                                    STRING [18116,18343]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [18116,18343]
                            OBJECT [18345,18384]
                                FIELD [18346,18383]
                                    String: "uses" [18346,18352]
                                    STRING [18353,18383]
                                        String: "actions/download-artifact@v3" [18353,18383]
                            OBJECT [18385,19287]
                                FIELD [18386,18416]
                                    String: "name" [18386,18392]
                                    STRING [18393,18416]
                                        String: "Send message to Slack" [18393,18416]
                                FIELD [18417,19160]
                                    String: "env" [18417,18422]
                                    OBJECT [18423,19160]
                                        FIELD [18424,18480]
                                            String: "CI_SLACK_BOT_TOKEN" [18424,18444]
                                            STRING [18445,18480]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [18445,18480]
                                        FIELD [18481,18539]
                                            String: "CI_SLACK_CHANNEL_ID" [18481,18502]
                                            STRING [18503,18539]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [18503,18539]
                                        FIELD [18540,18610]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [18540,18567]
                                            STRING [18568,18610]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [18568,18610]
                                        FIELD [18611,18687]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [18611,18641]
                                            STRING [18642,18687]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [18642,18687]
                                        FIELD [18688,18753]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [18688,18716]
                                            STRING [18717,18753]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [18717,18753]
                                        FIELD [18754,18818]
                                            String: "ACCESS_REPO_INFO_TOKEN" [18754,18778]
                                            STRING [18779,18818]
                                                String: "${{ secrets.ACCESS_REPO_INFO_TOKEN }}" [18779,18818]
                                        FIELD [18819,18836]
                                            String: "CI_EVENT" [18819,18829]
                                            STRING [18830,18836]
                                                String: "push" [18830,18836]
                                        FIELD [18837,18894]
                                            String: "CI_TITLE_PUSH" [18837,18852]
                                            STRING [18853,18894]
                                                String: "${{ github.event.head_commit.message }}" [18853,18894]
                                        FIELD [18895,18973]
                                            String: "CI_TITLE_WORKFLOW_RUN" [18895,18918]
                                            STRING [18919,18973]
                                                String: "${{ github.event.workflow_run.head_commit.message }}" [18919,18973]
                                        FIELD [18974,19002]
                                            String: "CI_SHA" [18974,18982]
                                            STRING [18983,19002]
                                                String: "${{ env.CI_SHA }}" [18983,19002]
                                        FIELD [19003,19060]
                                            String: "RUNNER_STATUS" [19003,19018]
                                            STRING [19019,19060]
                                                String: "${{ needs.check_runner_status.result }}" [19019,19060]
                                        FIELD [19061,19116]
                                            String: "RUNNER_ENV_STATUS" [19061,19080]
                                            STRING [19081,19116]
                                                String: "${{ needs.check_runners.result }}" [19081,19116]
                                        FIELD [19117,19159]
                                            String: "SETUP_STATUS" [19117,19131]
                                            STRING [19132,19159]
                                                String: "${{ needs.setup.result }}" [19132,19159]
                                FIELD [19161,19286]
                                    String: "run" [19161,19166]
                                    STRING [19167,19286]
                                        String: "pip install slack_sdk\npip show slack_sdk\npython utils/notification_service.py \"${{ needs.setup.outputs.matrix }}\"" [19167,19286]