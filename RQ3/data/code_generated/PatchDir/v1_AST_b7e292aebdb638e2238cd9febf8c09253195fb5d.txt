OBJECT [0,8915]
    FIELD [1,35]
        String: "name" [1,7]
        STRING [8,35]
            String: "Self-hosted runner (push)" [8,35]
    FIELD [36,183]
        String: "on" [36,40]
        OBJECT [41,183]
            FIELD [42,155]
                String: "push" [42,48]
                OBJECT [49,155]
                    FIELD [50,85]
                        String: "branches" [50,60]
                        ARRAY [61,85]
                            STRING [62,70]
                                String: "master" [62,70]
                            STRING [71,77]
                                String: "ci_*" [71,77]
                            STRING [78,84]
                                String: "ci-*" [78,84]
                    FIELD [86,154]
                        String: "paths" [86,93]
                        ARRAY [94,154]
                            STRING [95,103]
                                String: "src/**" [95,103]
                            STRING [104,114]
                                String: "tests/**" [104,114]
                            STRING [115,127]
                                String: ".github/**" [115,127]
                            STRING [128,142]
                                String: "templates/**" [128,142]
                            STRING [143,153]
                                String: "utils/**" [143,153]
            FIELD [156,182]
                String: "repository_dispatch" [156,177]
                NULL [178,182]
    FIELD [184,300]
        String: "env" [184,189]
        OBJECT [190,300]
            FIELD [191,213]
                String: "HF_HOME" [191,200]
                STRING [201,213]
                    String: "/mnt/cache" [201,213]
            FIELD [214,239]
                String: "TRANSFORMERS_IS_CI" [214,234]
                TRUE [235,239]
            FIELD [240,259]
                String: "OMP_NUM_THREADS" [240,257]
                NUMBER [258,259]
                    Number: 8 [258,259]
            FIELD [260,279]
                String: "MKL_NUM_THREADS" [260,277]
                NUMBER [278,279]
                    Number: 8 [278,279]
            FIELD [280,299]
                String: "PYTEST_TIMEOUT" [280,296]
                NUMBER [297,299]
                    Number: 60 [297,299]
    FIELD [301,8914]
        String: "jobs" [301,307]
        OBJECT [308,8914]
            FIELD [309,1899]
                String: "run_tests_torch_gpu" [309,330]
                OBJECT [331,1899]
                    FIELD [332,383]
                        String: "runs-on" [332,341]
                        ARRAY [342,383]
                            STRING [343,356]
                                String: "self-hosted" [343,356]
                            STRING [357,369]
                                String: "docker-gpu" [357,369]
                            STRING [370,382]
                                String: "single-gpu" [370,382]
                    FIELD [384,550]
                        String: "container" [384,395]
                        OBJECT [396,550]
                            FIELD [397,452]
                                String: "image" [397,404]
                                STRING [405,452]
                                    String: "pytorch/pytorch:1.9.0-cuda11.1-cudnn8-runtime" [405,452]
                            FIELD [453,549]
                                String: "options" [453,462]
                                STRING [463,549]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [463,549]
                    FIELD [551,1898]
                        String: "steps" [551,558]
                        ARRAY [559,1898]
                            OBJECT [560,971]
                                FIELD [561,590]
                                    String: "name" [561,567]
                                    STRING [568,590]
                                        String: "Install dependencies" [568,590]
                                FIELD [591,970]
                                    String: "run" [591,596]
                                    STRING [597,970]
                                        String: "apt -y update && apt install -y software-properties-common && apt -y update && add-apt-repository -y ppa:git-core/ppa && apt -y update && apt install -y git\napt install -y libsndfile1-dev espeak-ng\npip install --upgrade pip\npip install .[sklearn,testing,onnxruntime,sentencepiece,torch-speech,vision,timm]\npip install https://github.com/kpu/kenlm/archive/master.zip\n" [597,970]
                            OBJECT [972,1052]
                                FIELD [973,997]
                                    String: "name" [973,979]
                                    STRING [980,997]
                                        String: "Launcher docker" [980,997]
                                FIELD [998,1026]
                                    String: "uses" [998,1004]
                                    STRING [1005,1026]
                                        String: "actions/checkout@v2" [1005,1026]
                                FIELD [1027,1051]
                                    String: "with" [1027,1033]
                                    OBJECT [1034,1051]
                                        FIELD [1035,1050]
                                            String: "fetch-depth" [1035,1048]
                                            NUMBER [1049,1050]
                                                Number: 2 [1049,1050]
                            OBJECT [1053,1095]
                                FIELD [1054,1073]
                                    String: "name" [1054,1060]
                                    STRING [1061,1073]
                                        String: "NVIDIA-SMI" [1061,1073]
                                FIELD [1074,1094]
                                    String: "run" [1074,1079]
                                    STRING [1080,1094]
                                        String: "nvidia-smi\n" [1080,1094]
                            OBJECT [1096,1179]
                                FIELD [1097,1146]
                                    String: "name" [1097,1103]
                                    STRING [1104,1146]
                                        String: "Are GPUs recognized by our DL frameworks" [1104,1146]
                                FIELD [1147,1178]
                                    String: "run" [1147,1152]
                                    STRING [1153,1178]
                                        String: "utils/print_env_pt.py\n" [1153,1178]
                            OBJECT [1180,1304]
                                FIELD [1181,1212]
                                    String: "name" [1181,1187]
                                    STRING [1188,1212]
                                        String: "Fetch the tests to run" [1188,1212]
                                FIELD [1213,1303]
                                    String: "run" [1213,1218]
                                    STRING [1219,1303]
                                        String: "python utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [1219,1303]
                            OBJECT [1305,1433]
                                FIELD [1306,1335]
                                    String: "name" [1306,1312]
                                    STRING [1313,1335]
                                        String: "Report fetched tests" [1313,1335]
                                FIELD [1336,1371]
                                    String: "uses" [1336,1342]
                                    STRING [1343,1371]
                                        String: "actions/upload-artifact@v2" [1343,1371]
                                FIELD [1372,1432]
                                    String: "with" [1372,1378]
                                    OBJECT [1379,1432]
                                        FIELD [1380,1401]
                                            String: "name" [1380,1386]
                                            STRING [1387,1401]
                                                String: "test_fetched" [1387,1401]
                                        FIELD [1402,1431]
                                            String: "path" [1402,1408]
                                            STRING [1409,1431]
                                                String: "test_preparation.txt" [1409,1431]
                            OBJECT [1434,1614]
                                FIELD [1435,1473]
                                    String: "name" [1435,1441]
                                    STRING [1442,1473]
                                        String: "Run all non-slow tests on GPU" [1442,1473]
                                FIELD [1474,1613]
                                    String: "run" [1474,1479]
                                    STRING [1480,1613]
                                        String: "if [ -f test_list.txt ]; then\n  python -m pytest -n 2 --dist=loadfile -v --make-reports=tests_torch_gpu $(cat test_list.txt)\nfi\n" [1480,1613]
                            OBJECT [1615,1726]
                                FIELD [1616,1646]
                                    String: "name" [1616,1622]
                                    STRING [1623,1646]
                                        String: "Failure short reports" [1623,1646]
                                FIELD [1647,1670]
                                    String: "if" [1647,1651]
                                    STRING [1652,1670]
                                        String: "${{ failure() }}" [1652,1670]
                                FIELD [1671,1725]
                                    String: "run" [1671,1676]
                                    STRING [1677,1725]
                                        String: "cat reports/tests_torch_gpu_failures_short.txt" [1677,1725]
                            OBJECT [1727,1897]
                                FIELD [1728,1765]
                                    String: "name" [1728,1734]
                                    STRING [1735,1765]
                                        String: "Test suite reports artifacts" [1735,1765]
                                FIELD [1766,1788]
                                    String: "if" [1766,1770]
                                    STRING [1771,1788]
                                        String: "${{ always() }}" [1771,1788]
                                FIELD [1789,1824]
                                    String: "uses" [1789,1795]
                                    STRING [1796,1824]
                                        String: "actions/upload-artifact@v2" [1796,1824]
                                FIELD [1825,1896]
                                    String: "with" [1825,1831]
                                    OBJECT [1832,1896]
                                        FIELD [1833,1878]
                                            String: "name" [1833,1839]
                                            STRING [1840,1878]
                                                String: "run_all_tests_torch_gpu_test_reports" [1840,1878]
                                        FIELD [1879,1895]
                                            String: "path" [1879,1885]
                                            STRING [1886,1895]
                                                String: "reports" [1886,1895]
            FIELD [1900,3733]
                String: "run_tests_flax_gpu" [1900,1920]
                OBJECT [1921,3733]
                    FIELD [1922,1978]
                        String: "runs-on" [1922,1931]
                        ARRAY [1932,1978]
                            STRING [1933,1946]
                                String: "self-hosted" [1933,1946]
                            STRING [1947,1964]
                                String: "docker-gpu-test" [1947,1964]
                            STRING [1965,1977]
                                String: "single-gpu" [1965,1977]
                    FIELD [1979,2131]
                        String: "container" [1979,1990]
                        OBJECT [1991,2131]
                            FIELD [1992,2033]
                                String: "image" [1992,1999]
                                STRING [2000,2033]
                                    String: "tensorflow/tensorflow:2.4.1-gpu" [2000,2033]
                            FIELD [2034,2130]
                                String: "options" [2034,2043]
                                STRING [2044,2130]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [2044,2130]
                    FIELD [2132,3732]
                        String: "steps" [2132,2139]
                        ARRAY [2140,3732]
                            OBJECT [2141,2612]
                                FIELD [2142,2171]
                                    String: "name" [2142,2148]
                                    STRING [2149,2171]
                                        String: "Install dependencies" [2149,2171]
                                FIELD [2172,2611]
                                    String: "run" [2172,2177]
                                    STRING [2178,2611]
                                        String: "apt -y update && apt install -y software-properties-common && apt -y update && add-apt-repository -y ppa:git-core/ppa && apt -y update && apt install -y git espeak-ng\npip install --upgrade \"jax[cuda111]\" -f https://storage.googleapis.com/jax-releases/jax_releases.html\npip install --upgrade pip\npip install .[sklearn,testing,sentencepiece,flax,flax-speech,vision]\npip install https://github.com/kpu/kenlm/archive/master.zip\n" [2178,2611]
                            OBJECT [2613,2693]
                                FIELD [2614,2638]
                                    String: "name" [2614,2620]
                                    STRING [2621,2638]
                                        String: "Launcher docker" [2621,2638]
                                FIELD [2639,2667]
                                    String: "uses" [2639,2645]
                                    STRING [2646,2667]
                                        String: "actions/checkout@v2" [2646,2667]
                                FIELD [2668,2692]
                                    String: "with" [2668,2674]
                                    OBJECT [2675,2692]
                                        FIELD [2676,2691]
                                            String: "fetch-depth" [2676,2689]
                                            NUMBER [2690,2691]
                                                Number: 2 [2690,2691]
                            OBJECT [2694,2761]
                                FIELD [2695,2714]
                                    String: "name" [2695,2701]
                                    STRING [2702,2714]
                                        String: "NVIDIA-SMI" [2702,2714]
                                FIELD [2715,2739]
                                    String: "continue-on-error" [2715,2734]
                                    TRUE [2735,2739]
                                FIELD [2740,2760]
                                    String: "run" [2740,2745]
                                    STRING [2746,2760]
                                        String: "nvidia-smi\n" [2746,2760]
                            OBJECT [2762,3016]
                                FIELD [2763,2812]
                                    String: "name" [2763,2769]
                                    STRING [2770,2812]
                                        String: "Are GPUs recognized by our DL frameworks" [2770,2812]
                                FIELD [2813,3015]
                                    String: "run" [2813,2818]
                                    STRING [2819,3015]
                                        String: "python -c \"from jax.lib import xla_bridge; print('GPU available:', xla_bridge.get_backend().platform)\"\npython -c \"import jax; print('Number of GPUs available:', len(jax.local_devices()))\"\n" [2819,3015]
                            OBJECT [3017,3141]
                                FIELD [3018,3049]
                                    String: "name" [3018,3024]
                                    STRING [3025,3049]
                                        String: "Fetch the tests to run" [3025,3049]
                                FIELD [3050,3140]
                                    String: "run" [3050,3055]
                                    STRING [3056,3140]
                                        String: "python utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [3056,3140]
                            OBJECT [3142,3270]
                                FIELD [3143,3172]
                                    String: "name" [3143,3149]
                                    STRING [3150,3172]
                                        String: "Report fetched tests" [3150,3172]
                                FIELD [3173,3208]
                                    String: "uses" [3173,3179]
                                    STRING [3180,3208]
                                        String: "actions/upload-artifact@v2" [3180,3208]
                                FIELD [3209,3269]
                                    String: "with" [3209,3215]
                                    OBJECT [3216,3269]
                                        FIELD [3217,3238]
                                            String: "name" [3217,3223]
                                            STRING [3224,3238]
                                                String: "test_fetched" [3224,3238]
                                        FIELD [3239,3268]
                                            String: "path" [3239,3245]
                                            STRING [3246,3268]
                                                String: "test_preparation.txt" [3246,3268]
                            OBJECT [3271,3450]
                                FIELD [3272,3310]
                                    String: "name" [3272,3278]
                                    STRING [3279,3310]
                                        String: "Run all non-slow tests on GPU" [3279,3310]
                                FIELD [3311,3449]
                                    String: "run" [3311,3316]
                                    STRING [3317,3449]
                                        String: "if [ -f test_list.txt ]; then\n  python -m pytest -n 2 --dist=loadfile -v --make-reports=tests_flax_gpu $(cat test_list.txt)\nfi\n" [3317,3449]
                            OBJECT [3451,3561]
                                FIELD [3452,3482]
                                    String: "name" [3452,3458]
                                    STRING [3459,3482]
                                        String: "Failure short reports" [3459,3482]
                                FIELD [3483,3506]
                                    String: "if" [3483,3487]
                                    STRING [3488,3506]
                                        String: "${{ failure() }}" [3488,3506]
                                FIELD [3507,3560]
                                    String: "run" [3507,3512]
                                    STRING [3513,3560]
                                        String: "cat reports/tests_flax_gpu_failures_short.txt" [3513,3560]
                            OBJECT [3562,3731]
                                FIELD [3563,3600]
                                    String: "name" [3563,3569]
                                    STRING [3570,3600]
                                        String: "Test suite reports artifacts" [3570,3600]
                                FIELD [3601,3623]
                                    String: "if" [3601,3605]
                                    STRING [3606,3623]
                                        String: "${{ always() }}" [3606,3623]
                                FIELD [3624,3659]
                                    String: "uses" [3624,3630]
                                    STRING [3631,3659]
                                        String: "actions/upload-artifact@v2" [3631,3659]
                                FIELD [3660,3730]
                                    String: "with" [3660,3666]
                                    OBJECT [3667,3730]
                                        FIELD [3668,3712]
                                            String: "name" [3668,3674]
                                            STRING [3675,3712]
                                                String: "run_all_tests_flax_gpu_test_reports" [3675,3712]
                                        FIELD [3713,3729]
                                            String: "path" [3713,3719]
                                            STRING [3720,3729]
                                                String: "reports" [3720,3729]
            FIELD [3734,5420]
                String: "run_tests_torch_multi_gpu" [3734,3761]
                OBJECT [3762,5420]
                    FIELD [3763,3813]
                        String: "runs-on" [3763,3772]
                        ARRAY [3773,3813]
                            STRING [3774,3787]
                                String: "self-hosted" [3774,3787]
                            STRING [3788,3800]
                                String: "docker-gpu" [3788,3800]
                            STRING [3801,3812]
                                String: "multi-gpu" [3801,3812]
                    FIELD [3814,3982]
                        String: "container" [3814,3825]
                        OBJECT [3826,3982]
                            FIELD [3827,3882]
                                String: "image" [3827,3834]
                                STRING [3835,3882]
                                    String: "pytorch/pytorch:1.9.0-cuda11.1-cudnn8-runtime" [3835,3882]
                            FIELD [3883,3981]
                                String: "options" [3883,3892]
                                STRING [3893,3981]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [3893,3981]
                    FIELD [3983,5419]
                        String: "steps" [3983,3990]
                        ARRAY [3991,5419]
                            OBJECT [3992,4413]
                                FIELD [3993,4022]
                                    String: "name" [3993,3999]
                                    STRING [4000,4022]
                                        String: "Install dependencies" [4000,4022]
                                FIELD [4023,4412]
                                    String: "run" [4023,4028]
                                    STRING [4029,4412]
                                        String: "apt -y update && apt install -y software-properties-common && apt -y update && add-apt-repository -y ppa:git-core/ppa && apt -y update && apt install -y git espeak-ng\napt install -y libsndfile1-dev espeak-ng\npip install --upgrade pip\npip install .[sklearn,testing,onnxruntime,sentencepiece,torch-speech,vision,timm]\npip install https://github.com/kpu/kenlm/archive/master.zip\n" [4029,4412]
                            OBJECT [4414,4494]
                                FIELD [4415,4439]
                                    String: "name" [4415,4421]
                                    STRING [4422,4439]
                                        String: "Launcher docker" [4422,4439]
                                FIELD [4440,4468]
                                    String: "uses" [4440,4446]
                                    STRING [4447,4468]
                                        String: "actions/checkout@v2" [4447,4468]
                                FIELD [4469,4493]
                                    String: "with" [4469,4475]
                                    OBJECT [4476,4493]
                                        FIELD [4477,4492]
                                            String: "fetch-depth" [4477,4490]
                                            NUMBER [4491,4492]
                                                Number: 2 [4491,4492]
                            OBJECT [4495,4562]
                                FIELD [4496,4515]
                                    String: "name" [4496,4502]
                                    STRING [4503,4515]
                                        String: "NVIDIA-SMI" [4503,4515]
                                FIELD [4516,4540]
                                    String: "continue-on-error" [4516,4535]
                                    TRUE [4536,4540]
                                FIELD [4541,4561]
                                    String: "run" [4541,4546]
                                    STRING [4547,4561]
                                        String: "nvidia-smi\n" [4547,4561]
                            OBJECT [4563,4646]
                                FIELD [4564,4613]
                                    String: "name" [4564,4570]
                                    STRING [4571,4613]
                                        String: "Are GPUs recognized by our DL frameworks" [4571,4613]
                                FIELD [4614,4645]
                                    String: "run" [4614,4619]
                                    STRING [4620,4645]
                                        String: "utils/print_env_pt.py\n" [4620,4645]
                            OBJECT [4647,4771]
                                FIELD [4648,4679]
                                    String: "name" [4648,4654]
                                    STRING [4655,4679]
                                        String: "Fetch the tests to run" [4655,4679]
                                FIELD [4680,4770]
                                    String: "run" [4680,4685]
                                    STRING [4686,4770]
                                        String: "python utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [4686,4770]
                            OBJECT [4772,4900]
                                FIELD [4773,4802]
                                    String: "name" [4773,4779]
                                    STRING [4780,4802]
                                        String: "Report fetched tests" [4780,4802]
                                FIELD [4803,4838]
                                    String: "uses" [4803,4809]
                                    STRING [4810,4838]
                                        String: "actions/upload-artifact@v2" [4810,4838]
                                FIELD [4839,4899]
                                    String: "with" [4839,4845]
                                    OBJECT [4846,4899]
                                        FIELD [4847,4868]
                                            String: "name" [4847,4853]
                                            STRING [4854,4868]
                                                String: "test_fetched" [4854,4868]
                                        FIELD [4869,4898]
                                            String: "path" [4869,4875]
                                            STRING [4876,4898]
                                                String: "test_preparation.txt" [4876,4898]
                            OBJECT [4901,5123]
                                FIELD [4902,4940]
                                    String: "name" [4902,4908]
                                    STRING [4909,4940]
                                        String: "Run all non-slow tests on GPU" [4909,4940]
                                FIELD [4941,4976]
                                    String: "env" [4941,4946]
                                    OBJECT [4947,4976]
                                        FIELD [4948,4975]
                                            String: "MKL_SERVICE_FORCE_INTEL" [4948,4973]
                                            NUMBER [4974,4975]
                                                Number: 1 [4974,4975]
                                FIELD [4977,5122]
                                    String: "run" [4977,4982]
                                    STRING [4983,5122]
                                        String: "if [ -f test_list.txt ]; then\n  python -m pytest -n 2 --dist=loadfile -v --make-reports=tests_torch_multi_gpu $(cat test_list.txt)\nfi\n" [4983,5122]
                            OBJECT [5124,5241]
                                FIELD [5125,5155]
                                    String: "name" [5125,5131]
                                    STRING [5132,5155]
                                        String: "Failure short reports" [5132,5155]
                                FIELD [5156,5179]
                                    String: "if" [5156,5160]
                                    STRING [5161,5179]
                                        String: "${{ failure() }}" [5161,5179]
                                FIELD [5180,5240]
                                    String: "run" [5180,5185]
                                    STRING [5186,5240]
                                        String: "cat reports/tests_torch_multi_gpu_failures_short.txt" [5186,5240]
                            OBJECT [5242,5418]
                                FIELD [5243,5280]
                                    String: "name" [5243,5249]
                                    STRING [5250,5280]
                                        String: "Test suite reports artifacts" [5250,5280]
                                FIELD [5281,5303]
                                    String: "if" [5281,5285]
                                    STRING [5286,5303]
                                        String: "${{ always() }}" [5286,5303]
                                FIELD [5304,5339]
                                    String: "uses" [5304,5310]
                                    STRING [5311,5339]
                                        String: "actions/upload-artifact@v2" [5311,5339]
                                FIELD [5340,5417]
                                    String: "with" [5340,5346]
                                    OBJECT [5347,5417]
                                        FIELD [5348,5399]
                                            String: "name" [5348,5354]
                                            STRING [5355,5399]
                                                String: "run_all_tests_torch_multi_gpu_test_reports" [5355,5399]
                                        FIELD [5400,5416]
                                            String: "path" [5400,5406]
                                            STRING [5407,5416]
                                                String: "reports" [5407,5416]
            FIELD [5421,6824]
                String: "run_tests_torch_cuda_extensions_gpu" [5421,5458]
                OBJECT [5459,6824]
                    FIELD [5460,5511]
                        String: "runs-on" [5460,5469]
                        ARRAY [5470,5511]
                            STRING [5471,5484]
                                String: "self-hosted" [5471,5484]
                            STRING [5485,5497]
                                String: "docker-gpu" [5485,5497]
                            STRING [5498,5510]
                                String: "single-gpu" [5498,5510]
                    FIELD [5512,5665]
                        String: "container" [5512,5523]
                        OBJECT [5524,5665]
                            FIELD [5525,5567]
                                String: "image" [5525,5532]
                                STRING [5533,5567]
                                    String: "nvcr.io/nvidia/pytorch:21.03-py3" [5533,5567]
                            FIELD [5568,5664]
                                String: "options" [5568,5577]
                                STRING [5578,5664]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [5578,5664]
                    FIELD [5666,6823]
                        String: "steps" [5666,5673]
                        ARRAY [5674,6823]
                            OBJECT [5675,5755]
                                FIELD [5676,5700]
                                    String: "name" [5676,5682]
                                    STRING [5683,5700]
                                        String: "Launcher docker" [5683,5700]
                                FIELD [5701,5729]
                                    String: "uses" [5701,5707]
                                    STRING [5708,5729]
                                        String: "actions/checkout@v2" [5708,5729]
                                FIELD [5730,5754]
                                    String: "with" [5730,5736]
                                    OBJECT [5737,5754]
                                        FIELD [5738,5753]
                                            String: "fetch-depth" [5738,5751]
                                            NUMBER [5752,5753]
                                                Number: 2 [5752,5753]
                            OBJECT [5756,5798]
                                FIELD [5757,5776]
                                    String: "name" [5757,5763]
                                    STRING [5764,5776]
                                        String: "NVIDIA-SMI" [5764,5776]
                                FIELD [5777,5797]
                                    String: "run" [5777,5782]
                                    STRING [5783,5797]
                                        String: "nvidia-smi\n" [5783,5797]
                            OBJECT [5799,5944]
                                FIELD [5800,5829]
                                    String: "name" [5800,5806]
                                    STRING [5807,5829]
                                        String: "Install dependencies" [5807,5829]
                                FIELD [5830,5943]
                                    String: "run" [5830,5835]
                                    STRING [5836,5943]
                                        String: "apt -y update && apt install -y libaio-dev\npip install --upgrade pip\npip install .[testing,deepspeed]\n" [5836,5943]
                            OBJECT [5945,6028]
                                FIELD [5946,5995]
                                    String: "name" [5946,5952]
                                    STRING [5953,5995]
                                        String: "Are GPUs recognized by our DL frameworks" [5953,5995]
                                FIELD [5996,6027]
                                    String: "run" [5996,6001]
                                    STRING [6002,6027]
                                        String: "utils/print_env_pt.py\n" [6002,6027]
                            OBJECT [6029,6194]
                                FIELD [6030,6061]
                                    String: "name" [6030,6036]
                                    STRING [6037,6061]
                                        String: "Fetch the tests to run" [6037,6061]
                                FIELD [6062,6193]
                                    String: "run" [6062,6067]
                                    STRING [6068,6193]
                                        String: "python utils/tests_fetcher.py --diff_with_last_commit --filters tests/deepspeed tests/extended | tee test_preparation.txt\n" [6068,6193]
                            OBJECT [6195,6323]
                                FIELD [6196,6225]
                                    String: "name" [6196,6202]
                                    STRING [6203,6225]
                                        String: "Report fetched tests" [6203,6225]
                                FIELD [6226,6261]
                                    String: "uses" [6226,6232]
                                    STRING [6233,6261]
                                        String: "actions/upload-artifact@v2" [6233,6261]
                                FIELD [6262,6322]
                                    String: "with" [6262,6268]
                                    OBJECT [6269,6322]
                                        FIELD [6270,6291]
                                            String: "name" [6270,6276]
                                            STRING [6277,6291]
                                                String: "test_fetched" [6277,6291]
                                        FIELD [6292,6321]
                                            String: "path" [6292,6298]
                                            STRING [6299,6321]
                                                String: "test_preparation.txt" [6299,6321]
                            OBJECT [6324,6511]
                                FIELD [6325,6354]
                                    String: "name" [6325,6331]
                                    STRING [6332,6354]
                                        String: "Run all tests on GPU" [6332,6354]
                                FIELD [6355,6510]
                                    String: "run" [6355,6360]
                                    STRING [6361,6510]
                                        String: "if [ -f test_list.txt ]; then\n  python -m pytest -n 1 --dist=loadfile -v --make-reports=tests_torch_cuda_extensions_gpu $(cat test_list.txt)\nfi\n" [6361,6510]
                            OBJECT [6512,6639]
                                FIELD [6513,6543]
                                    String: "name" [6513,6519]
                                    STRING [6520,6543]
                                        String: "Failure short reports" [6520,6543]
                                FIELD [6544,6567]
                                    String: "if" [6544,6548]
                                    STRING [6549,6567]
                                        String: "${{ failure() }}" [6549,6567]
                                FIELD [6568,6638]
                                    String: "run" [6568,6573]
                                    STRING [6574,6638]
                                        String: "cat reports/tests_torch_cuda_extensions_gpu_failures_short.txt" [6574,6638]
                            OBJECT [6640,6822]
                                FIELD [6641,6678]
                                    String: "name" [6641,6647]
                                    STRING [6648,6678]
                                        String: "Test suite reports artifacts" [6648,6678]
                                FIELD [6679,6701]
                                    String: "if" [6679,6683]
                                    STRING [6684,6701]
                                        String: "${{ always() }}" [6684,6701]
                                FIELD [6702,6737]
                                    String: "uses" [6702,6708]
                                    STRING [6709,6737]
                                        String: "actions/upload-artifact@v2" [6709,6737]
                                FIELD [6738,6821]
                                    String: "with" [6738,6744]
                                    OBJECT [6745,6821]
                                        FIELD [6746,6803]
                                            String: "name" [6746,6752]
                                            STRING [6753,6803]
                                                String: "run_tests_torch_cuda_extensions_gpu_test_reports" [6753,6803]
                                        FIELD [6804,6820]
                                            String: "path" [6804,6810]
                                            STRING [6811,6820]
                                                String: "reports" [6811,6820]
            FIELD [6825,8357]
                String: "run_tests_torch_cuda_extensions_multi_gpu" [6825,6868]
                OBJECT [6869,8357]
                    FIELD [6870,6920]
                        String: "runs-on" [6870,6879]
                        ARRAY [6880,6920]
                            STRING [6881,6894]
                                String: "self-hosted" [6881,6894]
                            STRING [6895,6907]
                                String: "docker-gpu" [6895,6907]
                            STRING [6908,6919]
                                String: "multi-gpu" [6908,6919]
                    FIELD [6921,7074]
                        String: "container" [6921,6932]
                        OBJECT [6933,7074]
                            FIELD [6934,6976]
                                String: "image" [6934,6941]
                                STRING [6942,6976]
                                    String: "nvcr.io/nvidia/pytorch:21.03-py3" [6942,6976]
                            FIELD [6977,7073]
                                String: "options" [6977,6986]
                                STRING [6987,7073]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [6987,7073]
                    FIELD [7075,8356]
                        String: "steps" [7075,7082]
                        ARRAY [7083,8356]
                            OBJECT [7084,7164]
                                FIELD [7085,7109]
                                    String: "name" [7085,7091]
                                    STRING [7092,7109]
                                        String: "Launcher docker" [7092,7109]
                                FIELD [7110,7138]
                                    String: "uses" [7110,7116]
                                    STRING [7117,7138]
                                        String: "actions/checkout@v2" [7117,7138]
                                FIELD [7139,7163]
                                    String: "with" [7139,7145]
                                    OBJECT [7146,7163]
                                        FIELD [7147,7162]
                                            String: "fetch-depth" [7147,7160]
                                            NUMBER [7161,7162]
                                                Number: 2 [7161,7162]
                            OBJECT [7165,7232]
                                FIELD [7166,7185]
                                    String: "name" [7166,7172]
                                    STRING [7173,7185]
                                        String: "NVIDIA-SMI" [7173,7185]
                                FIELD [7186,7210]
                                    String: "continue-on-error" [7186,7205]
                                    TRUE [7206,7210]
                                FIELD [7211,7231]
                                    String: "run" [7211,7216]
                                    STRING [7217,7231]
                                        String: "nvidia-smi\n" [7217,7231]
                            OBJECT [7233,7459]
                                FIELD [7234,7263]
                                    String: "name" [7234,7240]
                                    STRING [7241,7263]
                                        String: "Install dependencies" [7241,7263]
                                FIELD [7264,7458]
                                    String: "run" [7264,7269]
                                    STRING [7270,7458]
                                        String: "apt -y update && apt install -y libaio-dev\npip install --upgrade pip\nrm -rf ~/.cache/torch_extensions/ # shared between conflicting builds\npip install .[testing,deepspeed,fairscale]\n" [7270,7458]
                            OBJECT [7460,7543]
                                FIELD [7461,7510]
                                    String: "name" [7461,7467]
                                    STRING [7468,7510]
                                        String: "Are GPUs recognized by our DL frameworks" [7468,7510]
                                FIELD [7511,7542]
                                    String: "run" [7511,7516]
                                    STRING [7517,7542]
                                        String: "utils/print_env_pt.py\n" [7517,7542]
                            OBJECT [7544,7709]
                                FIELD [7545,7576]
                                    String: "name" [7545,7551]
                                    STRING [7552,7576]
                                        String: "Fetch the tests to run" [7552,7576]
                                FIELD [7577,7708]
                                    String: "run" [7577,7582]
                                    STRING [7583,7708]
                                        String: "python utils/tests_fetcher.py --diff_with_last_commit --filters tests/deepspeed tests/extended | tee test_preparation.txt\n" [7583,7708]
                            OBJECT [7710,7838]
                                FIELD [7711,7740]
                                    String: "name" [7711,7717]
                                    STRING [7718,7740]
                                        String: "Report fetched tests" [7718,7740]
                                FIELD [7741,7776]
                                    String: "uses" [7741,7747]
                                    STRING [7748,7776]
                                        String: "actions/upload-artifact@v2" [7748,7776]
                                FIELD [7777,7837]
                                    String: "with" [7777,7783]
                                    OBJECT [7784,7837]
                                        FIELD [7785,7806]
                                            String: "name" [7785,7791]
                                            STRING [7792,7806]
                                                String: "test_fetched" [7792,7806]
                                        FIELD [7807,7836]
                                            String: "path" [7807,7813]
                                            STRING [7814,7836]
                                                String: "test_preparation.txt" [7814,7836]
                            OBJECT [7839,8032]
                                FIELD [7840,7869]
                                    String: "name" [7840,7846]
                                    STRING [7847,7869]
                                        String: "Run all tests on GPU" [7847,7869]
                                FIELD [7870,8031]
                                    String: "run" [7870,7875]
                                    STRING [7876,8031]
                                        String: "if [ -f test_list.txt ]; then\n  python -m pytest -n 1 --dist=loadfile -v --make-reports=tests_torch_cuda_extensions_multi_gpu $(cat test_list.txt)\nfi\n" [7876,8031]
                            OBJECT [8033,8166]
                                FIELD [8034,8064]
                                    String: "name" [8034,8040]
                                    STRING [8041,8064]
                                        String: "Failure short reports" [8041,8064]
                                FIELD [8065,8088]
                                    String: "if" [8065,8069]
                                    STRING [8070,8088]
                                        String: "${{ failure() }}" [8070,8088]
                                FIELD [8089,8165]
                                    String: "run" [8089,8094]
                                    STRING [8095,8165]
                                        String: "cat reports/tests_torch_cuda_extensions_multi_gpu_failures_short.txt" [8095,8165]
                            OBJECT [8167,8355]
                                FIELD [8168,8205]
                                    String: "name" [8168,8174]
                                    STRING [8175,8205]
                                        String: "Test suite reports artifacts" [8175,8205]
                                FIELD [8206,8228]
                                    String: "if" [8206,8210]
                                    STRING [8211,8228]
                                        String: "${{ always() }}" [8211,8228]
                                FIELD [8229,8264]
                                    String: "uses" [8229,8235]
                                    STRING [8236,8264]
                                        String: "actions/upload-artifact@v2" [8236,8264]
                                FIELD [8265,8354]
                                    String: "with" [8265,8271]
                                    OBJECT [8272,8354]
                                        FIELD [8273,8336]
                                            String: "name" [8273,8279]
                                            STRING [8280,8336]
                                                String: "run_tests_torch_cuda_extensions_multi_gpu_test_reports" [8280,8336]
                                        FIELD [8337,8353]
                                            String: "path" [8337,8343]
                                            STRING [8344,8353]
                                                String: "reports" [8344,8353]
            FIELD [8358,8913]
                String: "send_results" [8358,8372]
                OBJECT [8373,8913]
                    FIELD [8374,8406]
                        String: "name" [8374,8380]
                        STRING [8381,8406]
                            String: "Send results to webhook" [8381,8406]
                    FIELD [8407,8432]
                        String: "runs-on" [8407,8416]
                        STRING [8417,8432]
                            String: "ubuntu-latest" [8417,8432]
                    FIELD [8433,8448]
                        String: "if" [8433,8437]
                        STRING [8438,8448]
                            String: "always()" [8438,8448]
                    FIELD [8449,8590]
                        String: "needs" [8449,8456]
                        ARRAY [8457,8590]
                            STRING [8458,8479]
                                String: "run_tests_torch_gpu" [8458,8479]
                            STRING [8480,8507]
                                String: "run_tests_torch_multi_gpu" [8480,8507]
                            STRING [8508,8545]
                                String: "run_tests_torch_cuda_extensions_gpu" [8508,8545]
                            STRING [8546,8589]
                                String: "run_tests_torch_cuda_extensions_multi_gpu" [8546,8589]
                    FIELD [8591,8912]
                        String: "steps" [8591,8598]
                        ARRAY [8599,8912]
                            OBJECT [8600,8630]
                                FIELD [8601,8629]
                                    String: "uses" [8601,8607]
                                    STRING [8608,8629]
                                        String: "actions/checkout@v2" [8608,8629]
                            OBJECT [8631,8670]
                                FIELD [8632,8669]
                                    String: "uses" [8632,8638]
                                    STRING [8639,8669]
                                        String: "actions/download-artifact@v2" [8639,8669]
                            OBJECT [8671,8911]
                                FIELD [8672,8702]
                                    String: "name" [8672,8678]
                                    STRING [8679,8702]
                                        String: "Send message to Slack" [8679,8702]
                                FIELD [8703,8826]
                                    String: "env" [8703,8708]
                                    OBJECT [8709,8826]
                                        FIELD [8710,8766]
                                            String: "CI_SLACK_BOT_TOKEN" [8710,8730]
                                            STRING [8731,8766]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [8731,8766]
                                        FIELD [8767,8825]
                                            String: "CI_SLACK_CHANNEL_ID" [8767,8788]
                                            STRING [8789,8825]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [8789,8825]
                                FIELD [8827,8910]
                                    String: "run" [8827,8832]
                                    STRING [8833,8910]
                                        String: "pip install slack_sdk\npython utils/notification_service_deprecated.py push" [8833,8910]