OBJECT [0,3700]
    FIELD [1,21]
        String: "name" [1,7]
        STRING [8,21]
            String: "master only" [8,21]
    FIELD [22,75]
        String: "on" [22,26]
        OBJECT [27,75]
            FIELD [28,74]
                String: "push" [28,34]
                OBJECT [35,74]
                    FIELD [36,55]
                        String: "branches" [36,46]
                        STRING [47,55]
                            String: "master" [47,55]
                    FIELD [56,73]
                        String: "tags" [56,62]
                        ARRAY [63,73]
                            STRING [64,72]
                                String: "v*.*.*" [64,72]
    FIELD [76,3699]
        String: "jobs" [76,82]
        OBJECT [83,3699]
            FIELD [84,2524]
                String: "build-docker-images" [84,105]
                OBJECT [106,2524]
                    FIELD [107,132]
                        String: "runs-on" [107,116]
                        ARRAY [117,132]
                            STRING [118,131]
                                String: "self-hosted" [118,131]
                    FIELD [133,215]
                        String: "strategy" [133,143]
                        OBJECT [144,215]
                            FIELD [145,214]
                                String: "matrix" [145,153]
                                OBJECT [154,214]
                                    FIELD [155,213]
                                        String: "component" [155,166]
                                        ARRAY [167,213]
                                            STRING [168,174]
                                                String: "core" [168,174]
                                            STRING [175,184]
                                                String: "serving" [175,184]
                                            STRING [185,197]
                                                String: "jobservice" [185,197]
                                            STRING [198,207]
                                                String: "jupyter" [198,207]
                                            STRING [208,212]
                                                String: "ci" [208,212]
                    FIELD [216,291]
                        String: "env" [216,221]
                        OBJECT [222,291]
                            FIELD [223,290]
                                String: "MAVEN_CACHE" [223,236]
                                STRING [237,290]
                                    String: "gs://feast-templocation-kf-feast/.m2.2020-08-19.tar" [237,290]
                    FIELD [292,2523]
                        String: "steps" [292,299]
                        ARRAY [300,2523]
                            OBJECT [301,331]
                                FIELD [302,330]
                                    String: "uses" [302,308]
                                    STRING [309,330]
                                        String: "actions/checkout@v2" [309,330]
                            OBJECT [332,460]
                                FIELD [333,396]
                                    String: "uses" [333,339]
                                    STRING [340,396]
                                        String: "GoogleCloudPlatform/github-actions/setup-gcloud@master" [340,396]
                                FIELD [397,459]
                                    String: "with" [397,403]
                                    OBJECT [404,459]
                                        FIELD [405,424]
                                            String: "version" [405,414]
                                            STRING [415,424]
                                                String: "290.0.1" [415,424]
                                        FIELD [425,458]
                                            String: "export_default_credentials" [425,453]
                                            TRUE [454,458]
                            OBJECT [461,507]
                                FIELD [462,506]
                                    String: "run" [462,467]
                                    STRING [468,506]
                                        String: "gcloud auth configure-docker --quiet" [468,506]
                            OBJECT [508,631]
                                FIELD [509,530]
                                    String: "name" [509,515]
                                    STRING [516,530]
                                        String: "Get m2 cache" [516,530]
                                FIELD [531,630]
                                    String: "run" [531,536]
                                    STRING [537,630]
                                        String: "infra/scripts/download-maven-cache.sh \\\n--archive-uri ${MAVEN_CACHE} \\\n--output-dir .\n" [537,630]
                            OBJECT [632,724]
                                FIELD [633,653]
                                    String: "name" [633,639]
                                    STRING [640,653]
                                        String: "Get version" [640,653]
                                FIELD [654,723]
                                    String: "run" [654,659]
                                    STRING [660,723]
                                        String: "echo \"RELEASE_VERSION=${GITHUB_REF#refs/*/}\" >> $GITHUB_ENV" [660,723]
                            OBJECT [725,872]
                                FIELD [726,746]
                                    String: "name" [726,732]
                                    STRING [733,746]
                                        String: "Build image" [733,746]
                                FIELD [747,871]
                                    String: "run" [747,752]
                                    STRING [753,871]
                                        String: "make build-${{ matrix.component }}-docker REGISTRY=gcr.io/kf-feast VERSION=${GITHUB_SHA} REVISION=${RELEASE_VERSION}" [753,871]
                            OBJECT [873,1018]
                                FIELD [874,893]
                                    String: "name" [874,880]
                                    STRING [881,893]
                                        String: "Push image" [881,893]
                                FIELD [894,1017]
                                    String: "run" [894,899]
                                    STRING [900,1017]
                                        String: "make push-${{ matrix.component }}-docker REGISTRY=gcr.io/kf-feast VERSION=${GITHUB_SHA} REVISION=${RELEASE_VERSION}" [900,1017]
                            OBJECT [1019,1319]
                                FIELD [1020,1058]
                                    String: "name" [1020,1026]
                                    STRING [1027,1058]
                                        String: "Push development Docker image" [1027,1058]
                                FIELD [1059,1318]
                                    String: "run" [1059,1064]
                                    STRING [1065,1318]
                                        String: "if [ ${GITHUB_REF#refs/*/} == \"master\" ]; then\n  docker tag gcr.io/kf-feast/feast-${{ matrix.component }}:${GITHUB_SHA} gcr.io/kf-feast/feast-${{ matrix.component }}:develop\n  docker push gcr.io/kf-feast/feast-${{ matrix.component }}:develop\nfi\n" [1065,1318]
                            OBJECT [1320,2522]
                                FIELD [1321,1357]
                                    String: "name" [1321,1327]
                                    STRING [1328,1357]
                                        String: "Push versioned Docker image" [1328,1357]
                                FIELD [1358,2521]
                                    String: "run" [1358,1363]
                                    STRING [1364,2521]
                                        String: "source infra/scripts/setup-common-functions.sh\n# Build and push semver tagged commits\n# Regular expression should match MAJOR.MINOR.PATCH[-PRERELEASE[.IDENTIFIER]]\n# eg. v0.7.1 v0.7.2-alpha v0.7.2-rc.1\nSEMVER_REGEX='^v[0-9]+\\.[0-9]+\\.[0-9]+(-([0-9A-Za-z-]+(\\.[0-9A-Za-z-]+)*))?$'\nif echo \"${RELEASE_VERSION}\" | grep -P \"$SEMVER_REGEX\" &>/dev/null ; then\n  VERSION_WITHOUT_PREFIX=${RELEASE_VERSION:1}\n\n  docker tag gcr.io/kf-feast/feast-${{ matrix.component }}:${GITHUB_SHA} gcr.io/kf-feast/feast-${{ matrix.component }}:${VERSION_WITHOUT_PREFIX}\n  docker push gcr.io/kf-feast/feast-${{ matrix.component }}:${VERSION_WITHOUT_PREFIX}\n\n  # Also update \"latest\" image if tagged commit is pushed to stable branch\n  HIGHEST_SEMVER_TAG=$(get_tag_release -m)\n  echo \"Only push to latest tag if tag is the highest semver version $HIGHEST_SEMVER_TAG\"\n\n  if [ \"${VERSION_WITHOUT_PREFIX}\" = \"${HIGHEST_SEMVER_TAG:1}\" ]\n  then\n    docker tag gcr.io/kf-feast/feast-${{ matrix.component }}:${GITHUB_SHA} gcr.io/kf-feast/feast-${{ matrix.component }}:latest\n    docker push gcr.io/kf-feast/feast-${{ matrix.component }}:latest\n  fi\nfi\n" [1364,2521]
            FIELD [2525,3698]
                String: "publish-ingestion-jar" [2525,2548]
                OBJECT [2549,3698]
                    FIELD [2550,2575]
                        String: "runs-on" [2550,2559]
                        ARRAY [2560,2575]
                            STRING [2561,2574]
                                String: "self-hosted" [2561,2574]
                    FIELD [2576,2613]
                        String: "env" [2576,2581]
                        OBJECT [2582,2613]
                            FIELD [2583,2612]
                                String: "PUBLISH_BUCKET" [2583,2599]
                                STRING [2600,2612]
                                    String: "feast-jobs" [2600,2612]
                    FIELD [2614,3697]
                        String: "steps" [2614,2621]
                        ARRAY [2622,3697]
                            OBJECT [2623,2653]
                                FIELD [2624,2652]
                                    String: "uses" [2624,2630]
                                    STRING [2631,2652]
                                        String: "actions/checkout@v2" [2631,2652]
                            OBJECT [2654,2782]
                                FIELD [2655,2718]
                                    String: "uses" [2655,2661]
                                    STRING [2662,2718]
                                        String: "GoogleCloudPlatform/github-actions/setup-gcloud@master" [2662,2718]
                                FIELD [2719,2781]
                                    String: "with" [2719,2725]
                                    OBJECT [2726,2781]
                                        FIELD [2727,2746]
                                            String: "version" [2727,2736]
                                            STRING [2737,2746]
                                                String: "290.0.1" [2737,2746]
                                        FIELD [2747,2780]
                                            String: "export_default_credentials" [2747,2775]
                                            TRUE [2776,2780]
                            OBJECT [2783,2844]
                                FIELD [2784,2814]
                                    String: "uses" [2784,2790]
                                    STRING [2791,2814]
                                        String: "actions/setup-java@v1" [2791,2814]
                                FIELD [2815,2843]
                                    String: "with" [2815,2821]
                                    OBJECT [2822,2843]
                                        FIELD [2823,2842]
                                            String: "java-version" [2823,2837]
                                            STRING [2838,2842]
                                                String: "11" [2838,2842]
                            OBJECT [2845,2913]
                                FIELD [2846,2879]
                                    String: "uses" [2846,2852]
                                    STRING [2853,2879]
                                        String: "stCarolas/setup-maven@v3" [2853,2879]
                                FIELD [2880,2912]
                                    String: "with" [2880,2886]
                                    OBJECT [2887,2912]
                                        FIELD [2888,2911]
                                            String: "maven-version" [2888,2903]
                                            STRING [2904,2911]
                                                String: "3.6.3" [2904,2911]
                            OBJECT [2914,3185]
                                FIELD [2915,2964]
                                    String: "name" [2915,2921]
                                    STRING [2922,2964]
                                        String: "Publish develop version of ingestion job" [2922,2964]
                                FIELD [2965,3184]
                                    String: "run" [2965,2970]
                                    STRING [2971,3184]
                                        String: "if [ ${GITHUB_REF#refs/*/} == \"master\" ]; then\n  make build-java-no-tests REVISION=develop\n  gsutil cp ./spark/ingestion/target/feast-ingestion-spark-develop.jar gs://${PUBLISH_BUCKET}/spark/ingestion/\nfi\n" [2971,3184]
                            OBJECT [3186,3278]
                                FIELD [3187,3207]
                                    String: "name" [3187,3193]
                                    STRING [3194,3207]
                                        String: "Get version" [3194,3207]
                                FIELD [3208,3277]
                                    String: "run" [3208,3213]
                                    STRING [3214,3277]
                                        String: "echo \"RELEASE_VERSION=${GITHUB_REF#refs/*/}\" >> $GITHUB_ENV" [3214,3277]
                            OBJECT [3279,3696]
                                FIELD [3280,3328]
                                    String: "name" [3280,3286]
                                    STRING [3287,3328]
                                        String: "Publish tagged version of ingestion job" [3287,3328]
                                FIELD [3329,3695]
                                    String: "run" [3329,3334]
                                    STRING [3335,3695]
                                        String: "SEMVER_REGEX='^v[0-9]+\\.[0-9]+\\.[0-9]+(-([0-9A-Za-z-]+(\\.[0-9A-Za-z-]+)*))?$'\nif echo \"${RELEASE_VERSION}\" | grep -P \"$SEMVER_REGEX\" &>/dev/null ; then\n  VERSION=${RELEASE_VERSION:1}\n  make build-java-no-tests REVISION=${VERSION}\n  gsutil cp ./spark/ingestion/target/feast-ingestion-spark-${VERSION}.jar gs://${PUBLISH_BUCKET}/spark/ingestion/\nfi" [3335,3695]