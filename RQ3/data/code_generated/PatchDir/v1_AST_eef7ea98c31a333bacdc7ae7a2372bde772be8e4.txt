OBJECT [0,2317]
    FIELD [1,18]
        String: "name" [1,7]
        STRING [8,18]
            String: "Doctests" [8,18]
    FIELD [19,120]
        String: "on" [19,23]
        OBJECT [24,120]
            FIELD [25,57]
                String: "push" [25,31]
                OBJECT [32,57]
                    FIELD [33,56]
                        String: "branches" [33,43]
                        ARRAY [44,56]
                            STRING [45,55]
                                String: "doctest*" [45,55]
            FIELD [58,84]
                String: "repository_dispatch" [58,79]
                NULL [80,84]
            FIELD [85,119]
                String: "schedule" [85,95]
                ARRAY [96,119]
                    OBJECT [97,118]
                        FIELD [98,117]
                            String: "cron" [98,104]
                            STRING [105,117]
                                String: "17 2 * * *" [105,117]
    FIELD [121,321]
        String: "env" [121,126]
        OBJECT [127,321]
            FIELD [128,150]
                String: "HF_HOME" [128,137]
                STRING [138,150]
                    String: "/mnt/cache" [138,150]
            FIELD [151,176]
                String: "TRANSFORMERS_IS_CI" [151,171]
                TRUE [172,176]
            FIELD [177,192]
                String: "RUN_SLOW" [177,187]
                TRUE [188,192]
            FIELD [193,213]
                String: "OMP_NUM_THREADS" [193,210]
                NUMBER [211,213]
                    Number: 16 [211,213]
            FIELD [214,234]
                String: "MKL_NUM_THREADS" [214,231]
                NUMBER [232,234]
                    Number: 16 [232,234]
            FIELD [235,287]
                String: "SIGOPT_API_TOKEN" [235,253]
                STRING [254,287]
                    String: "${{ secrets.SIGOPT_API_TOKEN }}" [254,287]
            FIELD [288,320]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [288,315]
                TRUE [316,320]
    FIELD [322,2316]
        String: "jobs" [322,328]
        OBJECT [329,2316]
            FIELD [330,1718]
                String: "run_doctests" [330,344]
                OBJECT [345,1718]
                    FIELD [346,393]
                        String: "runs-on" [346,355]
                        ARRAY [356,393]
                            STRING [357,369]
                                String: "single-gpu" [357,369]
                            STRING [370,382]
                                String: "nvidia-gpu" [370,382]
                            STRING [383,387]
                                String: "t4" [383,387]
                            STRING [388,392]
                                String: "ci" [388,392]
                    FIELD [394,554]
                        String: "container" [394,405]
                        OBJECT [406,554]
                            FIELD [407,456]
                                String: "image" [407,414]
                                STRING [415,456]
                                    String: "huggingface/transformers-all-latest-gpu" [415,456]
                            FIELD [457,553]
                                String: "options" [457,466]
                                STRING [467,553]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [467,553]
                    FIELD [555,1717]
                        String: "steps" [555,562]
                        ARRAY [563,1717]
                            OBJECT [564,684]
                                FIELD [565,634]
                                    String: "name" [565,571]
                                    STRING [572,634]
                                        String: "uninstall transformers (installed during docker image build)" [572,634]
                                FIELD [635,683]
                                    String: "run" [635,640]
                                    STRING [641,683]
                                        String: "python3 -m pip uninstall -y transformers" [641,683]
                            OBJECT [685,715]
                                FIELD [686,714]
                                    String: "uses" [686,692]
                                    STRING [693,714]
                                        String: "actions/checkout@v3" [693,714]
                            OBJECT [716,758]
                                FIELD [717,736]
                                    String: "name" [717,723]
                                    STRING [724,736]
                                        String: "NVIDIA-SMI" [724,736]
                                FIELD [737,757]
                                    String: "run" [737,742]
                                    STRING [743,757]
                                        String: "nvidia-smi\n" [743,757]
                            OBJECT [759,845]
                                FIELD [760,802]
                                    String: "name" [760,766]
                                    STRING [767,802]
                                        String: "Install transformers in edit mode" [767,802]
                                FIELD [803,844]
                                    String: "run" [803,808]
                                    STRING [809,844]
                                        String: "python3 -m pip install -e .[flax]" [809,844]
                            OBJECT [846,908]
                                FIELD [847,870]
                                    String: "name" [847,853]
                                    STRING [854,870]
                                        String: "GPU visibility" [854,870]
                                FIELD [871,907]
                                    String: "run" [871,876]
                                    STRING [877,907]
                                        String: "python3 utils/print_env.py\n" [877,907]
                            OBJECT [909,982]
                                FIELD [910,962]
                                    String: "name" [910,916]
                                    STRING [917,962]
                                        String: "Show installed libraries and their versions" [917,962]
                                FIELD [963,981]
                                    String: "run" [963,968]
                                    STRING [969,981]
                                        String: "pip freeze" [969,981]
                            OBJECT [983,1225]
                                FIELD [984,1010]
                                    String: "name" [984,990]
                                    STRING [991,1010]
                                        String: "Get doctest files" [991,1010]
                                FIELD [1011,1224]
                                    String: "run" [1011,1016]
                                    STRING [1017,1224]
                                        String: "$(python3 -c 'from utils.tests_fetcher import get_all_doctest_files; to_test = get_all_doctest_files(); to_test = \" \".join(to_test); fp = open(\"doc_tests.txt\", \"w\"); fp.write(to_test); fp.close()')\n" [1017,1224]
                            OBJECT [1226,1406]
                                FIELD [1227,1248]
                                    String: "name" [1227,1233]
                                    STRING [1234,1248]
                                        String: "Run doctests" [1234,1248]
                                FIELD [1249,1405]
                                    String: "run" [1249,1254]
                                    STRING [1255,1405]
                                        String: "python3 -m pytest -v --make-reports doc_tests_gpu --doctest-modules $(cat doc_tests.txt) -sv --doctest-continue-on-failure --doctest-glob=\"*.md\"\n" [1255,1405]
                            OBJECT [1407,1541]
                                FIELD [1408,1438]
                                    String: "name" [1408,1414]
                                    STRING [1415,1438]
                                        String: "Failure short reports" [1415,1438]
                                FIELD [1439,1462]
                                    String: "if" [1439,1443]
                                    STRING [1444,1462]
                                        String: "${{ failure() }}" [1444,1462]
                                FIELD [1463,1487]
                                    String: "continue-on-error" [1463,1482]
                                    TRUE [1483,1487]
                                FIELD [1488,1540]
                                    String: "run" [1488,1493]
                                    STRING [1494,1540]
                                        String: "cat reports/doc_tests_gpu/failures_short.txt" [1494,1540]
                            OBJECT [1542,1716]
                                FIELD [1543,1580]
                                    String: "name" [1543,1549]
                                    STRING [1550,1580]
                                        String: "Test suite reports artifacts" [1550,1580]
                                FIELD [1581,1603]
                                    String: "if" [1581,1585]
                                    STRING [1586,1603]
                                        String: "${{ always() }}" [1586,1603]
                                FIELD [1604,1639]
                                    String: "uses" [1604,1610]
                                    STRING [1611,1639]
                                        String: "actions/upload-artifact@v3" [1611,1639]
                                FIELD [1640,1715]
                                    String: "with" [1640,1646]
                                    OBJECT [1647,1715]
                                        FIELD [1648,1683]
                                            String: "name" [1648,1654]
                                            STRING [1655,1683]
                                                String: "doc_tests_gpu_test_reports" [1655,1683]
                                        FIELD [1684,1714]
                                            String: "path" [1684,1690]
                                            STRING [1691,1714]
                                                String: "reports/doc_tests_gpu" [1691,1714]
            FIELD [1719,2315]
                String: "send_results" [1719,1733]
                OBJECT [1734,2315]
                    FIELD [1735,1767]
                        String: "name" [1735,1741]
                        STRING [1742,1767]
                            String: "Send results to webhook" [1742,1767]
                    FIELD [1768,1793]
                        String: "runs-on" [1768,1777]
                        STRING [1778,1793]
                            String: "ubuntu-latest" [1778,1793]
                    FIELD [1794,1809]
                        String: "if" [1794,1798]
                        STRING [1799,1809]
                            String: "always()" [1799,1809]
                    FIELD [1810,1834]
                        String: "needs" [1810,1817]
                        ARRAY [1818,1834]
                            STRING [1819,1833]
                                String: "run_doctests" [1819,1833]
                    FIELD [1835,2314]
                        String: "steps" [1835,1842]
                        ARRAY [1843,2314]
                            OBJECT [1844,1874]
                                FIELD [1845,1873]
                                    String: "uses" [1845,1851]
                                    STRING [1852,1873]
                                        String: "actions/checkout@v3" [1852,1873]
                            OBJECT [1875,1914]
                                FIELD [1876,1913]
                                    String: "uses" [1876,1882]
                                    STRING [1883,1913]
                                        String: "actions/download-artifact@v3" [1883,1913]
                            OBJECT [1915,2313]
                                FIELD [1916,1946]
                                    String: "name" [1916,1922]
                                    STRING [1923,1946]
                                        String: "Send message to Slack" [1923,1946]
                                FIELD [1947,2234]
                                    String: "env" [1947,1952]
                                    OBJECT [1953,2234]
                                        FIELD [1954,2010]
                                            String: "CI_SLACK_BOT_TOKEN" [1954,1974]
                                            STRING [1975,2010]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [1975,2010]
                                        FIELD [2011,2080]
                                            String: "CI_SLACK_CHANNEL_ID" [2011,2032]
                                            STRING [2033,2080]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY_DOCS }}" [2033,2080]
                                        FIELD [2081,2156]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [2081,2108]
                                            STRING [2109,2156]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY_DOCS }}" [2109,2156]
                                        FIELD [2157,2233]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [2157,2187]
                                            STRING [2188,2233]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [2188,2233]
                                FIELD [2235,2312]
                                    String: "run" [2235,2240]
                                    STRING [2241,2312]
                                        String: "pip install slack_sdk\npython utils/notification_service_doc_tests.py" [2241,2312]