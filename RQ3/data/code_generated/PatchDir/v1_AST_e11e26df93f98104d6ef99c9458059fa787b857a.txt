OBJECT [0,11136]
    FIELD [1,38]
        String: "name" [1,7]
        STRING [8,38]
            String: "Self-hosted runner (past-ci)" [8,38]
    FIELD [39,222]
        String: "on" [39,43]
        OBJECT [44,222]
            FIELD [45,221]
                String: "workflow_call" [45,60]
                OBJECT [61,221]
                    FIELD [62,220]
                        String: "inputs" [62,70]
                        OBJECT [71,220]
                            FIELD [72,117]
                                String: "framework" [72,83]
                                OBJECT [84,117]
                                    FIELD [85,100]
                                        String: "required" [85,95]
                                        TRUE [96,100]
                                    FIELD [101,116]
                                        String: "type" [101,107]
                                        STRING [108,116]
                                            String: "string" [108,116]
                            FIELD [118,161]
                                String: "version" [118,127]
                                OBJECT [128,161]
                                    FIELD [129,144]
                                        String: "required" [129,139]
                                        TRUE [140,144]
                                    FIELD [145,160]
                                        String: "type" [145,151]
                                        STRING [152,160]
                                            String: "string" [152,160]
                            FIELD [162,219]
                                String: "sha" [162,167]
                                OBJECT [168,219]
                                    FIELD [169,185]
                                        String: "default" [169,178]
                                        STRING [179,185]
                                            String: "main" [179,185]
                                    FIELD [186,202]
                                        String: "required" [186,196]
                                        FALSE [197,202]
                                    FIELD [203,218]
                                        String: "type" [203,209]
                                        STRING [210,218]
                                            String: "string" [210,218]
    FIELD [223,476]
        String: "env" [223,228]
        OBJECT [229,476]
            FIELD [230,252]
                String: "HF_HOME" [230,239]
                STRING [240,252]
                    String: "/mnt/cache" [240,252]
            FIELD [253,278]
                String: "TRANSFORMERS_IS_CI" [253,273]
                TRUE [274,278]
            FIELD [279,298]
                String: "OMP_NUM_THREADS" [279,296]
                NUMBER [297,298]
                    Number: 8 [297,298]
            FIELD [299,318]
                String: "MKL_NUM_THREADS" [299,316]
                NUMBER [317,318]
                    Number: 8 [317,318]
            FIELD [319,334]
                String: "RUN_SLOW" [319,329]
                TRUE [330,334]
            FIELD [335,387]
                String: "SIGOPT_API_TOKEN" [335,353]
                STRING [354,387]
                    String: "${{ secrets.SIGOPT_API_TOKEN }}" [354,387]
            FIELD [388,420]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [388,415]
                TRUE [416,420]
            FIELD [421,446]
                String: "RUN_PT_TF_CROSS_TESTS" [421,444]
                NUMBER [445,446]
                    Number: 1 [445,446]
            FIELD [447,475]
                String: "CUDA_VISIBLE_DEVICES" [447,469]
                STRING [470,475]
                    String: "0,1" [470,475]
    FIELD [477,11135]
        String: "jobs" [477,483]
        OBJECT [484,11135]
            FIELD [485,1716]
                String: "setup" [485,492]
                OBJECT [493,1716]
                    FIELD [494,508]
                        String: "name" [494,500]
                        STRING [501,508]
                            String: "Setup" [501,508]
                    FIELD [509,574]
                        String: "strategy" [509,519]
                        OBJECT [520,574]
                            FIELD [521,573]
                                String: "matrix" [521,529]
                                OBJECT [530,573]
                                    FIELD [531,572]
                                        String: "machine_type" [531,545]
                                        ARRAY [546,572]
                                            STRING [547,559]
                                                String: "single-gpu" [547,559]
                                            STRING [560,571]
                                                String: "multi-gpu" [560,571]
                    FIELD [575,643]
                        String: "runs-on" [575,584]
                        ARRAY [585,643]
                            STRING [586,614]
                                String: "${{ matrix.machine_type }}" [586,614]
                            STRING [615,627]
                                String: "nvidia-gpu" [615,627]
                            STRING [628,632]
                                String: "t4" [628,632]
                            STRING [633,642]
                                String: "past-ci" [633,642]
                    FIELD [644,844]
                        String: "container" [644,655]
                        OBJECT [656,844]
                            FIELD [657,746]
                                String: "image" [657,664]
                                STRING [665,746]
                                    String: "huggingface/transformers-${{ inputs.framework }}-past-${{ inputs.version }}-gpu" [665,746]
                            FIELD [747,843]
                                String: "options" [747,756]
                                STRING [757,843]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [757,843]
                    FIELD [845,906]
                        String: "outputs" [845,854]
                        OBJECT [855,906]
                            FIELD [856,905]
                                String: "matrix" [856,864]
                                STRING [865,905]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [865,905]
                    FIELD [907,1715]
                        String: "steps" [907,914]
                        ARRAY [915,1715]
                            OBJECT [916,1027]
                                FIELD [917,938]
                                    String: "name" [917,923]
                                    STRING [924,938]
                                        String: "Update clone" [924,938]
                                FIELD [939,974]
                                    String: "working-directory" [939,958]
                                    STRING [959,974]
                                        String: "/transformers" [959,974]
                                FIELD [975,1026]
                                    String: "run" [975,980]
                                    STRING [981,1026]
                                        String: "git fetch && git checkout ${{ inputs.sha }}" [981,1026]
                            OBJECT [1028,1166]
                                FIELD [1029,1045]
                                    String: "name" [1029,1035]
                                    STRING [1036,1045]
                                        String: "Cleanup" [1036,1045]
                                FIELD [1046,1081]
                                    String: "working-directory" [1046,1065]
                                    STRING [1066,1081]
                                        String: "/transformers" [1066,1081]
                                FIELD [1082,1165]
                                    String: "run" [1082,1087]
                                    STRING [1088,1165]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [1088,1165]
                            OBJECT [1167,1276]
                                FIELD [1168,1220]
                                    String: "name" [1168,1174]
                                    STRING [1175,1220]
                                        String: "Show installed libraries and their versions" [1175,1220]
                                FIELD [1221,1256]
                                    String: "working-directory" [1221,1240]
                                    STRING [1241,1256]
                                        String: "/transformers" [1241,1256]
                                FIELD [1257,1275]
                                    String: "run" [1257,1262]
                                    STRING [1263,1275]
                                        String: "pip freeze" [1263,1275]
                            OBJECT [1277,1714]
                                FIELD [1278,1295]
                                    String: "id" [1278,1282]
                                    STRING [1283,1295]
                                        String: "set-matrix" [1283,1295]
                                FIELD [1296,1331]
                                    String: "working-directory" [1296,1315]
                                    STRING [1316,1331]
                                        String: "/transformers" [1316,1331]
                                FIELD [1332,1364]
                                    String: "name" [1332,1338]
                                    STRING [1339,1364]
                                        String: "Identify models to test" [1339,1364]
                                FIELD [1365,1713]
                                    String: "run" [1365,1370]
                                    STRING [1371,1713]
                                        String: "cd tests\necho \"matrix=$(python3 -c 'import os; tests = os.getcwd(); model_tests = os.listdir(os.path.join(tests, \"models\")); d1 = sorted(list(filter(os.path.isdir, os.listdir(tests)))); d2 = sorted(list(filter(os.path.isdir, [f\"models/{x}\" for x in model_tests]))); d1.remove(\"models\"); d = d2 + d1; print(d)')\" >> $GITHUB_OUTPUT\n" [1371,1713]
            FIELD [1717,4427]
                String: "run_tests_single_gpu" [1717,1739]
                OBJECT [1740,4427]
                    FIELD [1741,1761]
                        String: "name" [1741,1747]
                        STRING [1748,1761]
                            String: "Model tests" [1748,1761]
                    FIELD [1762,1889]
                        String: "strategy" [1762,1772]
                        OBJECT [1773,1889]
                            FIELD [1774,1791]
                                String: "fail-fast" [1774,1785]
                                FALSE [1786,1791]
                            FIELD [1792,1888]
                                String: "matrix" [1792,1800]
                                OBJECT [1801,1888]
                                    FIELD [1802,1857]
                                        String: "folders" [1802,1811]
                                        STRING [1812,1857]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [1812,1857]
                                    FIELD [1858,1887]
                                        String: "machine_type" [1858,1872]
                                        ARRAY [1873,1887]
                                            STRING [1874,1886]
                                                String: "single-gpu" [1874,1886]
                    FIELD [1890,1958]
                        String: "runs-on" [1890,1899]
                        ARRAY [1900,1958]
                            STRING [1901,1929]
                                String: "${{ matrix.machine_type }}" [1901,1929]
                            STRING [1930,1942]
                                String: "nvidia-gpu" [1930,1942]
                            STRING [1943,1947]
                                String: "t4" [1943,1947]
                            STRING [1948,1957]
                                String: "past-ci" [1948,1957]
                    FIELD [1959,2159]
                        String: "container" [1959,1970]
                        OBJECT [1971,2159]
                            FIELD [1972,2061]
                                String: "image" [1972,1979]
                                STRING [1980,2061]
                                    String: "huggingface/transformers-${{ inputs.framework }}-past-${{ inputs.version }}-gpu" [1980,2061]
                            FIELD [2062,2158]
                                String: "options" [2062,2071]
                                STRING [2072,2158]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [2072,2158]
                    FIELD [2160,2175]
                        String: "needs" [2160,2167]
                        STRING [2168,2175]
                            String: "setup" [2168,2175]
                    FIELD [2176,4426]
                        String: "steps" [2176,2183]
                        ARRAY [2184,4426]
                            OBJECT [2185,2296]
                                FIELD [2186,2207]
                                    String: "name" [2186,2192]
                                    STRING [2193,2207]
                                        String: "Update clone" [2193,2207]
                                FIELD [2208,2243]
                                    String: "working-directory" [2208,2227]
                                    STRING [2228,2243]
                                        String: "/transformers" [2228,2243]
                                FIELD [2244,2295]
                                    String: "run" [2244,2249]
                                    STRING [2250,2295]
                                        String: "git fetch && git checkout ${{ inputs.sha }}" [2250,2295]
                            OBJECT [2297,2512]
                                FIELD [2298,2395]
                                    String: "name" [2298,2304]
                                    STRING [2305,2395]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [2305,2395]
                                FIELD [2396,2431]
                                    String: "working-directory" [2396,2415]
                                    STRING [2416,2431]
                                        String: "/transformers" [2416,2431]
                                FIELD [2432,2511]
                                    String: "run" [2432,2437]
                                    STRING [2438,2511]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [2438,2511]
                            OBJECT [2513,2623]
                                FIELD [2514,2543]
                                    String: "name" [2514,2520]
                                    STRING [2521,2543]
                                        String: "Update some packages" [2521,2543]
                                FIELD [2544,2579]
                                    String: "working-directory" [2544,2563]
                                    STRING [2564,2579]
                                        String: "/transformers" [2564,2579]
                                FIELD [2580,2622]
                                    String: "run" [2580,2585]
                                    STRING [2586,2622]
                                        String: "python3 -m pip install -U datasets" [2586,2622]
                            OBJECT [2624,2898]
                                FIELD [2625,2667]
                                    String: "name" [2625,2631]
                                    STRING [2632,2667]
                                        String: "Echo folder ${{ matrix.folders }}" [2632,2667]
                                FIELD [2668,2682]
                                    String: "shell" [2668,2675]
                                    STRING [2676,2682]
                                        String: "bash" [2676,2682]
                                FIELD [2683,2897]
                                    String: "run" [2683,2688]
                                    STRING [2689,2897]
                                        String: "echo \"${{ matrix.folders }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [2689,2897]
                            OBJECT [2899,2941]
                                FIELD [2900,2919]
                                    String: "name" [2900,2906]
                                    STRING [2907,2919]
                                        String: "NVIDIA-SMI" [2907,2919]
                                FIELD [2920,2940]
                                    String: "run" [2920,2925]
                                    STRING [2926,2940]
                                        String: "nvidia-smi\n" [2926,2940]
                            OBJECT [2942,3147]
                                FIELD [2943,2959]
                                    String: "name" [2943,2949]
                                    STRING [2950,2959]
                                        String: "Install" [2950,2959]
                                FIELD [2960,2996]
                                    String: "if" [2960,2964]
                                    STRING [2965,2996]
                                        String: "inputs.framework == 'pytorch'" [2965,2996]
                                FIELD [2997,3032]
                                    String: "working-directory" [2997,3016]
                                    STRING [3017,3032]
                                        String: "/transformers" [3017,3032]
                                FIELD [3033,3146]
                                    String: "run" [3033,3038]
                                    STRING [3039,3146]
                                        String: "python3 -m pip install --no-cache-dir git+https://github.com/huggingface/accelerate@main#egg=accelerate\n" [3039,3146]
                            OBJECT [3148,3243]
                                FIELD [3149,3169]
                                    String: "name" [3149,3155]
                                    STRING [3156,3169]
                                        String: "Environment" [3156,3169]
                                FIELD [3170,3205]
                                    String: "working-directory" [3170,3189]
                                    STRING [3190,3205]
                                        String: "/transformers" [3190,3205]
                                FIELD [3206,3242]
                                    String: "run" [3206,3211]
                                    STRING [3212,3242]
                                        String: "python3 utils/print_env.py\n" [3212,3242]
                            OBJECT [3244,3353]
                                FIELD [3245,3297]
                                    String: "name" [3245,3251]
                                    STRING [3252,3297]
                                        String: "Show installed libraries and their versions" [3252,3297]
                                FIELD [3298,3333]
                                    String: "working-directory" [3298,3317]
                                    STRING [3318,3333]
                                        String: "/transformers" [3318,3333]
                                FIELD [3334,3352]
                                    String: "run" [3334,3339]
                                    STRING [3340,3352]
                                        String: "pip freeze" [3340,3352]
                            OBJECT [3354,3552]
                                FIELD [3355,3384]
                                    String: "name" [3355,3361]
                                    STRING [3362,3384]
                                        String: "Run all tests on GPU" [3362,3384]
                                FIELD [3385,3420]
                                    String: "working-directory" [3385,3404]
                                    STRING [3405,3420]
                                        String: "/transformers" [3405,3420]
                                FIELD [3421,3551]
                                    String: "run" [3421,3426]
                                    STRING [3427,3551]
                                        String: "python3 -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} tests/${{ matrix.folders }}" [3427,3551]
                            OBJECT [3553,3746]
                                FIELD [3554,3584]
                                    String: "name" [3554,3560]
                                    STRING [3561,3584]
                                        String: "Failure short reports" [3561,3584]
                                FIELD [3585,3608]
                                    String: "if" [3585,3589]
                                    STRING [3590,3608]
                                        String: "${{ failure() }}" [3590,3608]
                                FIELD [3609,3633]
                                    String: "continue-on-error" [3609,3628]
                                    TRUE [3629,3633]
                                FIELD [3634,3745]
                                    String: "run" [3634,3639]
                                    STRING [3640,3745]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [3640,3745]
                            OBJECT [3747,4080]
                                FIELD [3748,3770]
                                    String: "name" [3748,3754]
                                    STRING [3755,3770]
                                        String: "Save job name" [3755,3770]
                                FIELD [3771,3793]
                                    String: "if" [3771,3775]
                                    STRING [3776,3793]
                                        String: "${{ always() }}" [3776,3793]
                                FIELD [3794,3808]
                                    String: "shell" [3794,3801]
                                    STRING [3802,3808]
                                        String: "bash" [3802,3808]
                                FIELD [3809,4079]
                                    String: "run" [3809,3814]
                                    STRING [3815,4079]
                                        String: "matrix_folders=${matrix_folders/'models_'/'models/'}\njob_name=\"Model tests ($matrix_folders, ${{ matrix.machine_type }})\"\necho \"$job_name\"\necho \"$job_name\" > /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/job_name.txt\n" [3815,4079]
                            OBJECT [4081,4425]
                                FIELD [4082,4119]
                                    String: "name" [4082,4088]
                                    STRING [4089,4119]
                                        String: "Test suite reports artifacts" [4089,4119]
                                FIELD [4120,4142]
                                    String: "if" [4120,4124]
                                    STRING [4125,4142]
                                        String: "${{ always() }}" [4125,4142]
                                FIELD [4143,4178]
                                    String: "uses" [4143,4149]
                                    STRING [4150,4178]
                                        String: "actions/upload-artifact@v3" [4150,4178]
                                FIELD [4179,4424]
                                    String: "with" [4179,4185]
                                    OBJECT [4186,4424]
                                        FIELD [4187,4333]
                                            String: "name" [4187,4193]
                                            STRING [4194,4333]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports_postfix_${{ inputs.framework }}-${{ inputs.version }}" [4194,4333]
                                        FIELD [4334,4423]
                                            String: "path" [4334,4340]
                                            STRING [4341,4423]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [4341,4423]
            FIELD [4428,7138]
                String: "run_tests_multi_gpu" [4428,4449]
                OBJECT [4450,7138]
                    FIELD [4451,4471]
                        String: "name" [4451,4457]
                        STRING [4458,4471]
                            String: "Model tests" [4458,4471]
                    FIELD [4472,4598]
                        String: "strategy" [4472,4482]
                        OBJECT [4483,4598]
                            FIELD [4484,4501]
                                String: "fail-fast" [4484,4495]
                                FALSE [4496,4501]
                            FIELD [4502,4597]
                                String: "matrix" [4502,4510]
                                OBJECT [4511,4597]
                                    FIELD [4512,4567]
                                        String: "folders" [4512,4521]
                                        STRING [4522,4567]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [4522,4567]
                                    FIELD [4568,4596]
                                        String: "machine_type" [4568,4582]
                                        ARRAY [4583,4596]
                                            STRING [4584,4595]
                                                String: "multi-gpu" [4584,4595]
                    FIELD [4599,4667]
                        String: "runs-on" [4599,4608]
                        ARRAY [4609,4667]
                            STRING [4610,4638]
                                String: "${{ matrix.machine_type }}" [4610,4638]
                            STRING [4639,4651]
                                String: "nvidia-gpu" [4639,4651]
                            STRING [4652,4656]
                                String: "t4" [4652,4656]
                            STRING [4657,4666]
                                String: "past-ci" [4657,4666]
                    FIELD [4668,4870]
                        String: "container" [4668,4679]
                        OBJECT [4680,4870]
                            FIELD [4681,4770]
                                String: "image" [4681,4688]
                                STRING [4689,4770]
                                    String: "huggingface/transformers-${{ inputs.framework }}-past-${{ inputs.version }}-gpu" [4689,4770]
                            FIELD [4771,4869]
                                String: "options" [4771,4780]
                                STRING [4781,4869]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [4781,4869]
                    FIELD [4871,4886]
                        String: "needs" [4871,4878]
                        STRING [4879,4886]
                            String: "setup" [4879,4886]
                    FIELD [4887,7137]
                        String: "steps" [4887,4894]
                        ARRAY [4895,7137]
                            OBJECT [4896,5007]
                                FIELD [4897,4918]
                                    String: "name" [4897,4903]
                                    STRING [4904,4918]
                                        String: "Update clone" [4904,4918]
                                FIELD [4919,4954]
                                    String: "working-directory" [4919,4938]
                                    STRING [4939,4954]
                                        String: "/transformers" [4939,4954]
                                FIELD [4955,5006]
                                    String: "run" [4955,4960]
                                    STRING [4961,5006]
                                        String: "git fetch && git checkout ${{ inputs.sha }}" [4961,5006]
                            OBJECT [5008,5223]
                                FIELD [5009,5106]
                                    String: "name" [5009,5015]
                                    STRING [5016,5106]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [5016,5106]
                                FIELD [5107,5142]
                                    String: "working-directory" [5107,5126]
                                    STRING [5127,5142]
                                        String: "/transformers" [5127,5142]
                                FIELD [5143,5222]
                                    String: "run" [5143,5148]
                                    STRING [5149,5222]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [5149,5222]
                            OBJECT [5224,5334]
                                FIELD [5225,5254]
                                    String: "name" [5225,5231]
                                    STRING [5232,5254]
                                        String: "Update some packages" [5232,5254]
                                FIELD [5255,5290]
                                    String: "working-directory" [5255,5274]
                                    STRING [5275,5290]
                                        String: "/transformers" [5275,5290]
                                FIELD [5291,5333]
                                    String: "run" [5291,5296]
                                    STRING [5297,5333]
                                        String: "python3 -m pip install -U datasets" [5297,5333]
                            OBJECT [5335,5609]
                                FIELD [5336,5378]
                                    String: "name" [5336,5342]
                                    STRING [5343,5378]
                                        String: "Echo folder ${{ matrix.folders }}" [5343,5378]
                                FIELD [5379,5393]
                                    String: "shell" [5379,5386]
                                    STRING [5387,5393]
                                        String: "bash" [5387,5393]
                                FIELD [5394,5608]
                                    String: "run" [5394,5399]
                                    STRING [5400,5608]
                                        String: "echo \"${{ matrix.folders }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [5400,5608]
                            OBJECT [5610,5652]
                                FIELD [5611,5630]
                                    String: "name" [5611,5617]
                                    STRING [5618,5630]
                                        String: "NVIDIA-SMI" [5618,5630]
                                FIELD [5631,5651]
                                    String: "run" [5631,5636]
                                    STRING [5637,5651]
                                        String: "nvidia-smi\n" [5637,5651]
                            OBJECT [5653,5858]
                                FIELD [5654,5670]
                                    String: "name" [5654,5660]
                                    STRING [5661,5670]
                                        String: "Install" [5661,5670]
                                FIELD [5671,5707]
                                    String: "if" [5671,5675]
                                    STRING [5676,5707]
                                        String: "inputs.framework == 'pytorch'" [5676,5707]
                                FIELD [5708,5743]
                                    String: "working-directory" [5708,5727]
                                    STRING [5728,5743]
                                        String: "/transformers" [5728,5743]
                                FIELD [5744,5857]
                                    String: "run" [5744,5749]
                                    STRING [5750,5857]
                                        String: "python3 -m pip install --no-cache-dir git+https://github.com/huggingface/accelerate@main#egg=accelerate\n" [5750,5857]
                            OBJECT [5859,5954]
                                FIELD [5860,5880]
                                    String: "name" [5860,5866]
                                    STRING [5867,5880]
                                        String: "Environment" [5867,5880]
                                FIELD [5881,5916]
                                    String: "working-directory" [5881,5900]
                                    STRING [5901,5916]
                                        String: "/transformers" [5901,5916]
                                FIELD [5917,5953]
                                    String: "run" [5917,5922]
                                    STRING [5923,5953]
                                        String: "python3 utils/print_env.py\n" [5923,5953]
                            OBJECT [5955,6064]
                                FIELD [5956,6008]
                                    String: "name" [5956,5962]
                                    STRING [5963,6008]
                                        String: "Show installed libraries and their versions" [5963,6008]
                                FIELD [6009,6044]
                                    String: "working-directory" [6009,6028]
                                    STRING [6029,6044]
                                        String: "/transformers" [6029,6044]
                                FIELD [6045,6063]
                                    String: "run" [6045,6050]
                                    STRING [6051,6063]
                                        String: "pip freeze" [6051,6063]
                            OBJECT [6065,6263]
                                FIELD [6066,6095]
                                    String: "name" [6066,6072]
                                    STRING [6073,6095]
                                        String: "Run all tests on GPU" [6073,6095]
                                FIELD [6096,6131]
                                    String: "working-directory" [6096,6115]
                                    STRING [6116,6131]
                                        String: "/transformers" [6116,6131]
                                FIELD [6132,6262]
                                    String: "run" [6132,6137]
                                    STRING [6138,6262]
                                        String: "python3 -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} tests/${{ matrix.folders }}" [6138,6262]
                            OBJECT [6264,6457]
                                FIELD [6265,6295]
                                    String: "name" [6265,6271]
                                    STRING [6272,6295]
                                        String: "Failure short reports" [6272,6295]
                                FIELD [6296,6319]
                                    String: "if" [6296,6300]
                                    STRING [6301,6319]
                                        String: "${{ failure() }}" [6301,6319]
                                FIELD [6320,6344]
                                    String: "continue-on-error" [6320,6339]
                                    TRUE [6340,6344]
                                FIELD [6345,6456]
                                    String: "run" [6345,6350]
                                    STRING [6351,6456]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [6351,6456]
                            OBJECT [6458,6791]
                                FIELD [6459,6481]
                                    String: "name" [6459,6465]
                                    STRING [6466,6481]
                                        String: "Save job name" [6466,6481]
                                FIELD [6482,6504]
                                    String: "if" [6482,6486]
                                    STRING [6487,6504]
                                        String: "${{ always() }}" [6487,6504]
                                FIELD [6505,6519]
                                    String: "shell" [6505,6512]
                                    STRING [6513,6519]
                                        String: "bash" [6513,6519]
                                FIELD [6520,6790]
                                    String: "run" [6520,6525]
                                    STRING [6526,6790]
                                        String: "matrix_folders=${matrix_folders/'models_'/'models/'}\njob_name=\"Model tests ($matrix_folders, ${{ matrix.machine_type }})\"\necho \"$job_name\"\necho \"$job_name\" > /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/job_name.txt\n" [6526,6790]
                            OBJECT [6792,7136]
                                FIELD [6793,6830]
                                    String: "name" [6793,6799]
                                    STRING [6800,6830]
                                        String: "Test suite reports artifacts" [6800,6830]
                                FIELD [6831,6853]
                                    String: "if" [6831,6835]
                                    STRING [6836,6853]
                                        String: "${{ always() }}" [6836,6853]
                                FIELD [6854,6889]
                                    String: "uses" [6854,6860]
                                    STRING [6861,6889]
                                        String: "actions/upload-artifact@v3" [6861,6889]
                                FIELD [6890,7135]
                                    String: "with" [6890,6896]
                                    OBJECT [6897,7135]
                                        FIELD [6898,7044]
                                            String: "name" [6898,6904]
                                            STRING [6905,7044]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports_postfix_${{ inputs.framework }}-${{ inputs.version }}" [6905,7044]
                                        FIELD [7045,7134]
                                            String: "path" [7045,7051]
                                            STRING [7052,7134]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [7052,7134]
            FIELD [7139,9716]
                String: "run_all_tests_torch_cuda_extensions_gpu" [7139,7180]
                OBJECT [7181,9716]
                    FIELD [7182,7217]
                        String: "name" [7182,7188]
                        STRING [7189,7217]
                            String: "Torch CUDA extension tests" [7189,7217]
                    FIELD [7218,7254]
                        String: "if" [7218,7222]
                        STRING [7223,7254]
                            String: "inputs.framework == 'pytorch'" [7223,7254]
                    FIELD [7255,7338]
                        String: "strategy" [7255,7265]
                        OBJECT [7266,7338]
                            FIELD [7267,7284]
                                String: "fail-fast" [7267,7278]
                                FALSE [7279,7284]
                            FIELD [7285,7337]
                                String: "matrix" [7285,7293]
                                OBJECT [7294,7337]
                                    FIELD [7295,7336]
                                        String: "machine_type" [7295,7309]
                                        ARRAY [7310,7336]
                                            STRING [7311,7323]
                                                String: "single-gpu" [7311,7323]
                                            STRING [7324,7335]
                                                String: "multi-gpu" [7324,7335]
                    FIELD [7339,7407]
                        String: "runs-on" [7339,7348]
                        ARRAY [7349,7407]
                            STRING [7350,7378]
                                String: "${{ matrix.machine_type }}" [7350,7378]
                            STRING [7379,7391]
                                String: "nvidia-gpu" [7379,7391]
                            STRING [7392,7396]
                                String: "t4" [7392,7396]
                            STRING [7397,7406]
                                String: "past-ci" [7397,7406]
                    FIELD [7408,7423]
                        String: "needs" [7408,7415]
                        STRING [7416,7423]
                            String: "setup" [7416,7423]
                    FIELD [7424,7626]
                        String: "container" [7424,7435]
                        OBJECT [7436,7626]
                            FIELD [7437,7526]
                                String: "image" [7437,7444]
                                STRING [7445,7526]
                                    String: "huggingface/transformers-${{ inputs.framework }}-past-${{ inputs.version }}-gpu" [7445,7526]
                            FIELD [7527,7625]
                                String: "options" [7527,7536]
                                STRING [7537,7625]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [7537,7625]
                    FIELD [7627,9715]
                        String: "steps" [7627,7634]
                        ARRAY [7635,9715]
                            OBJECT [7636,7747]
                                FIELD [7637,7658]
                                    String: "name" [7637,7643]
                                    STRING [7644,7658]
                                        String: "Update clone" [7644,7658]
                                FIELD [7659,7694]
                                    String: "working-directory" [7659,7678]
                                    STRING [7679,7694]
                                        String: "/transformers" [7679,7694]
                                FIELD [7695,7746]
                                    String: "run" [7695,7700]
                                    STRING [7701,7746]
                                        String: "git fetch && git checkout ${{ github.sha }}" [7701,7746]
                            OBJECT [7748,7963]
                                FIELD [7749,7846]
                                    String: "name" [7749,7755]
                                    STRING [7756,7846]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [7756,7846]
                                FIELD [7847,7882]
                                    String: "working-directory" [7847,7866]
                                    STRING [7867,7882]
                                        String: "/transformers" [7867,7882]
                                FIELD [7883,7962]
                                    String: "run" [7883,7888]
                                    STRING [7889,7962]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [7889,7962]
                            OBJECT [7964,8074]
                                FIELD [7965,7994]
                                    String: "name" [7965,7971]
                                    STRING [7972,7994]
                                        String: "Update some packages" [7972,7994]
                                FIELD [7995,8030]
                                    String: "working-directory" [7995,8014]
                                    STRING [8015,8030]
                                        String: "/transformers" [8015,8030]
                                FIELD [8031,8073]
                                    String: "run" [8031,8036]
                                    STRING [8037,8073]
                                        String: "python3 -m pip install -U datasets" [8037,8073]
                            OBJECT [8075,8243]
                                FIELD [8076,8092]
                                    String: "name" [8076,8082]
                                    STRING [8083,8092]
                                        String: "Install" [8083,8092]
                                FIELD [8093,8128]
                                    String: "working-directory" [8093,8112]
                                    STRING [8113,8128]
                                        String: "/transformers" [8113,8128]
                                FIELD [8129,8242]
                                    String: "run" [8129,8134]
                                    STRING [8135,8242]
                                        String: "python3 -m pip install --no-cache-dir git+https://github.com/huggingface/accelerate@main#egg=accelerate\n" [8135,8242]
                            OBJECT [8244,8338]
                                FIELD [8245,8284]
                                    String: "name" [8245,8251]
                                    STRING [8252,8284]
                                        String: "Remove cached torch extensions" [8252,8284]
                                FIELD [8285,8337]
                                    String: "run" [8285,8290]
                                    STRING [8291,8337]
                                        String: "rm -rf /github/home/.cache/torch_extensions/" [8291,8337]
                            OBJECT [8339,8730]
                                FIELD [8340,8376]
                                    String: "name" [8340,8346]
                                    STRING [8347,8376]
                                        String: "Pre build DeepSpeed *again*" [8347,8376]
                                FIELD [8377,8400]
                                    String: "working-directory" [8377,8396]
                                    STRING [8397,8400]
                                        String: "/" [8397,8400]
                                FIELD [8401,8729]
                                    String: "run" [8401,8406]
                                    STRING [8407,8729]
                                        String: "python3 -m pip uninstall -y deepspeed\nrm -rf DeepSpeed\ngit clone https://github.com/microsoft/DeepSpeed && cd DeepSpeed && rm -rf build\nDS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 DS_BUILD_UTILS=1 python3 -m pip install . --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [8407,8729]
                            OBJECT [8731,8773]
                                FIELD [8732,8751]
                                    String: "name" [8732,8738]
                                    STRING [8739,8751]
                                        String: "NVIDIA-SMI" [8739,8751]
                                FIELD [8752,8772]
                                    String: "run" [8752,8757]
                                    STRING [8758,8772]
                                        String: "nvidia-smi\n" [8758,8772]
                            OBJECT [8774,8869]
                                FIELD [8775,8795]
                                    String: "name" [8775,8781]
                                    STRING [8782,8795]
                                        String: "Environment" [8782,8795]
                                FIELD [8796,8831]
                                    String: "working-directory" [8796,8815]
                                    STRING [8816,8831]
                                        String: "/transformers" [8816,8831]
                                FIELD [8832,8868]
                                    String: "run" [8832,8837]
                                    STRING [8838,8868]
                                        String: "python3 utils/print_env.py\n" [8838,8868]
                            OBJECT [8870,8979]
                                FIELD [8871,8923]
                                    String: "name" [8871,8877]
                                    STRING [8878,8923]
                                        String: "Show installed libraries and their versions" [8878,8923]
                                FIELD [8924,8959]
                                    String: "working-directory" [8924,8943]
                                    STRING [8944,8959]
                                        String: "/transformers" [8944,8959]
                                FIELD [8960,8978]
                                    String: "run" [8960,8965]
                                    STRING [8966,8978]
                                        String: "pip freeze" [8966,8978]
                            OBJECT [8980,9183]
                                FIELD [8981,9010]
                                    String: "name" [8981,8987]
                                    STRING [8988,9010]
                                        String: "Run all tests on GPU" [8988,9010]
                                FIELD [9011,9046]
                                    String: "working-directory" [9011,9030]
                                    STRING [9031,9046]
                                        String: "/transformers" [9031,9046]
                                FIELD [9047,9182]
                                    String: "run" [9047,9052]
                                    STRING [9053,9182]
                                        String: "python3 -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [9053,9182]
                            OBJECT [9184,9377]
                                FIELD [9185,9215]
                                    String: "name" [9185,9191]
                                    STRING [9192,9215]
                                        String: "Failure short reports" [9192,9215]
                                FIELD [9216,9239]
                                    String: "if" [9216,9220]
                                    STRING [9221,9239]
                                        String: "${{ failure() }}" [9221,9239]
                                FIELD [9240,9264]
                                    String: "continue-on-error" [9240,9259]
                                    TRUE [9260,9264]
                                FIELD [9265,9376]
                                    String: "run" [9265,9270]
                                    STRING [9271,9376]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [9271,9376]
                            OBJECT [9378,9714]
                                FIELD [9379,9416]
                                    String: "name" [9379,9385]
                                    STRING [9386,9416]
                                        String: "Test suite reports artifacts" [9386,9416]
                                FIELD [9417,9439]
                                    String: "if" [9417,9421]
                                    STRING [9422,9439]
                                        String: "${{ always() }}" [9422,9439]
                                FIELD [9440,9475]
                                    String: "uses" [9440,9446]
                                    STRING [9447,9475]
                                        String: "actions/upload-artifact@v3" [9447,9475]
                                FIELD [9476,9713]
                                    String: "with" [9476,9482]
                                    OBJECT [9483,9713]
                                        FIELD [9484,9622]
                                            String: "name" [9484,9490]
                                            STRING [9491,9622]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports_postfix_${{ inputs.framework }}-${{ inputs.version }}" [9491,9622]
                                        FIELD [9623,9712]
                                            String: "path" [9623,9629]
                                            STRING [9630,9712]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [9630,9712]
            FIELD [9717,11134]
                String: "send_results" [9717,9731]
                OBJECT [9732,11134]
                    FIELD [9733,9765]
                        String: "name" [9733,9739]
                        STRING [9740,9765]
                            String: "Send results to webhook" [9740,9765]
                    FIELD [9766,9790]
                        String: "runs-on" [9766,9775]
                        STRING [9776,9790]
                            String: "ubuntu-22.04" [9776,9790]
                    FIELD [9791,9806]
                        String: "if" [9791,9795]
                        STRING [9796,9806]
                            String: "always()" [9796,9806]
                    FIELD [9807,9911]
                        String: "needs" [9807,9814]
                        ARRAY [9815,9911]
                            STRING [9816,9823]
                                String: "setup" [9816,9823]
                            STRING [9824,9846]
                                String: "run_tests_single_gpu" [9824,9846]
                            STRING [9847,9868]
                                String: "run_tests_multi_gpu" [9847,9868]
                            STRING [9869,9910]
                                String: "run_all_tests_torch_cuda_extensions_gpu" [9869,9910]
                    FIELD [9912,11133]
                        String: "steps" [9912,9919]
                        ARRAY [9920,11133]
                            OBJECT [9921,10028]
                                FIELD [9922,9953]
                                    String: "name" [9922,9928]
                                    STRING [9929,9953]
                                        String: "Preliminary job status" [9929,9953]
                                FIELD [9954,9968]
                                    String: "shell" [9954,9961]
                                    STRING [9962,9968]
                                        String: "bash" [9962,9968]
                                FIELD [9969,10027]
                                    String: "run" [9969,9974]
                                    STRING [9975,10027]
                                        String: "echo \"Setup status: ${{ needs.setup.result }}\"\n" [9975,10027]
                            OBJECT [10029,10059]
                                FIELD [10030,10058]
                                    String: "uses" [10030,10036]
                                    STRING [10037,10058]
                                        String: "actions/checkout@v3" [10037,10058]
                            OBJECT [10060,10099]
                                FIELD [10061,10098]
                                    String: "uses" [10061,10067]
                                    STRING [10068,10098]
                                        String: "actions/download-artifact@v3" [10068,10098]
                            OBJECT [10100,10161]
                                FIELD [10101,10126]
                                    String: "name" [10101,10107]
                                    STRING [10108,10126]
                                        String: "Create directory" [10108,10126]
                                FIELD [10127,10160]
                                    String: "run" [10127,10132]
                                    STRING [10133,10160]
                                        String: "mkdir test_failure_tables" [10133,10160]
                            OBJECT [10162,10849]
                                FIELD [10163,10193]
                                    String: "name" [10163,10169]
                                    STRING [10170,10193]
                                        String: "Send message to Slack" [10170,10193]
                                FIELD [10194,10720]
                                    String: "env" [10194,10199]
                                    OBJECT [10200,10720]
                                        FIELD [10201,10257]
                                            String: "CI_SLACK_BOT_TOKEN" [10201,10221]
                                            STRING [10222,10257]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [10222,10257]
                                        FIELD [10258,10316]
                                            String: "CI_SLACK_CHANNEL_ID" [10258,10279]
                                            STRING [10280,10316]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [10280,10316]
                                        FIELD [10317,10387]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [10317,10344]
                                            STRING [10345,10387]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [10345,10387]
                                        FIELD [10388,10464]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [10388,10418]
                                            STRING [10419,10464]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [10419,10464]
                                        FIELD [10465,10542]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [10465,10493]
                                            STRING [10494,10542]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_PAST_FUTURE }}" [10494,10542]
                                        FIELD [10543,10607]
                                            String: "ACCESS_REPO_INFO_TOKEN" [10543,10567]
                                            STRING [10568,10607]
                                                String: "${{ secrets.ACCESS_REPO_INFO_TOKEN }}" [10568,10607]
                                        FIELD [10608,10676]
                                            String: "CI_EVENT" [10608,10618]
                                            STRING [10619,10676]
                                                String: "Past CI - ${{ inputs.framework }}-${{ inputs.version }}" [10619,10676]
                                        FIELD [10677,10719]
                                            String: "SETUP_STATUS" [10677,10691]
                                            STRING [10692,10719]
                                                String: "${{ needs.setup.result }}" [10692,10719]
                                FIELD [10721,10848]
                                    String: "run" [10721,10726]
                                    STRING [10727,10848]
                                        String: "pip install slack_sdk\npip show slack_sdk\npython utils/notification_service.py \"${{ needs.setup.outputs.matrix }}\"\n" [10727,10848]
                            OBJECT [10850,11056]
                                FIELD [10851,10883]
                                    String: "name" [10851,10857]
                                    STRING [10858,10883]
                                        String: "Failure table artifacts" [10858,10883]
                                FIELD [10884,10906]
                                    String: "if" [10884,10888]
                                    STRING [10889,10906]
                                        String: "${{ always() }}" [10889,10906]
                                FIELD [10907,10942]
                                    String: "uses" [10907,10913]
                                    STRING [10914,10942]
                                        String: "actions/upload-artifact@v3" [10914,10942]
                                FIELD [10943,11055]
                                    String: "with" [10943,10949]
                                    OBJECT [10950,11055]
                                        FIELD [10951,11025]
                                            String: "name" [10951,10957]
                                            STRING [10958,11025]
                                                String: "test_failure_tables_${{ inputs.framework }}-${{ inputs.version }}" [10958,11025]
                                        FIELD [11026,11054]
                                            String: "path" [11026,11032]
                                            STRING [11033,11054]
                                                String: "test_failure_tables" [11033,11054]
                            OBJECT [11057,11132]
                                FIELD [11058,11095]
                                    String: "uses" [11058,11064]
                                    STRING [11065,11095]
                                        String: "geekyeggo/delete-artifact@v2" [11065,11095]
                                FIELD [11096,11131]
                                    String: "with" [11096,11102]
                                    OBJECT [11103,11131]
                                        FIELD [11104,11130]
                                            String: "name" [11104,11110]
                                            STRING [11111,11130]
                                                String: "single-*\nmulti-*" [11111,11130]