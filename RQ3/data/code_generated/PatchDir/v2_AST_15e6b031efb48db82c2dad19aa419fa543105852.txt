OBJECT [0,1504]
    FIELD [1,16]
        String: "name" [1,7]
        STRING [8,16]
            String: "Docker" [8,16]
    FIELD [17,88]
        String: "on" [17,21]
        OBJECT [22,88]
            FIELD [23,53]
                String: "push" [23,29]
                OBJECT [30,53]
                    FIELD [31,52]
                        String: "branches" [31,41]
                        ARRAY [42,52]
                            STRING [43,51]
                                String: "master" [43,51]
            FIELD [54,87]
                String: "release" [54,63]
                OBJECT [64,87]
                    FIELD [65,86]
                        String: "types" [65,72]
                        ARRAY [73,86]
                            STRING [74,85]
                                String: "published" [74,85]
    FIELD [89,1503]
        String: "jobs" [89,95]
        OBJECT [96,1503]
            FIELD [97,1502]
                String: "build" [97,104]
                OBJECT [105,1502]
                    FIELD [106,131]
                        String: "runs-on" [106,115]
                        STRING [116,131]
                            String: "ubuntu-latest" [116,131]
                    FIELD [132,1501]
                        String: "steps" [132,139]
                        ARRAY [140,1501]
                            OBJECT [141,171]
                                FIELD [142,170]
                                    String: "uses" [142,148]
                                    STRING [149,170]
                                        String: "actions/checkout@v2" [149,170]
                            OBJECT [172,914]
                                FIELD [173,199]
                                    String: "name" [173,179]
                                    STRING [180,199]
                                        String: "Setup environment" [180,199]
                                FIELD [200,913]
                                    String: "run" [200,205]
                                    STRING [206,913]
                                        String: "if [[ $GITHUB_EVENT_NAME == 'release' ]]; then\n    TAG=${GITHUB_REF/refs\\/tags\\//};\n    VERSION=$(echo $TAG | sed 's/^v//g');\n    echo \"Preparing environment for release $TAG\";\n    echo \"::set-env name=DOCKER_REPO::allennlp/allennlp\";\n    echo \"::set-env name=DOCKER_TAG::$TAG\";\n    echo \"::set-env name=BUILD_ARG_NAME::VERSION\";\n    echo \"::set-env name=BUILD_ARG_VALUE::$VERSION\";\nelse\n    echo \"Preparing environment for commit $GITHUB_SHA\";\n    echo \"::set-env name=DOCKER_REPO::allennlp/commit\";\n    echo \"::set-env name=DOCKER_TAG::$GITHUB_SHA\";\n    echo \"::set-env name=BUILD_ARG_NAME::SOURCE_COMMIT\";\n    echo \"::set-env name=BUILD_ARG_VALUE::$GITHUB_SHA\";\nfi\n" [206,913]
                            OBJECT [915,1265]
                                FIELD [916,936]
                                    String: "name" [916,922]
                                    STRING [923,936]
                                        String: "Build image" [923,936]
                                FIELD [937,1264]
                                    String: "run" [937,942]
                                    STRING [943,1264]
                                        String: "# Create a small context for the Docker with only the files that we need.\ntar -czvf context.tar.gz Dockerfile.pip scripts/ai2_internal/resumable_train.sh\ndocker build \\\n    --pull \\\n    --build-arg $BUILD_ARG_NAME=$BUILD_ARG_VALUE \\\n    -f Dockerfile.pip \\\n    -t $DOCKER_REPO:$DOCKER_TAG - < context.tar.gz\n" [943,1264]
                            OBJECT [1266,1351]
                                FIELD [1267,1286]
                                    String: "name" [1267,1273]
                                    STRING [1274,1286]
                                        String: "Test image" [1274,1286]
                                FIELD [1287,1350]
                                    String: "run" [1287,1292]
                                    STRING [1293,1350]
                                        String: "docker run --rm $DOCKER_REPO:$DOCKER_TAG test-install\n" [1293,1350]
                            OBJECT [1352,1500]
                                FIELD [1353,1372]
                                    String: "name" [1353,1359]
                                    STRING [1360,1372]
                                        String: "Push image" [1360,1372]
                                FIELD [1373,1499]
                                    String: "run" [1373,1378]
                                    STRING [1379,1499]
                                        String: "docker login -u ${{ secrets.DOCKER_USERNAME }} -p ${{ secrets.DOCKER_PASSWORD }}\ndocker push $DOCKER_REPO:$DOCKER_TAG" [1379,1499]