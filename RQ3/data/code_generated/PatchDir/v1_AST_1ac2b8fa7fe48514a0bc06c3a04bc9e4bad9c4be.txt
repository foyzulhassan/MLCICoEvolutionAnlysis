OBJECT [0,10118]
    FIELD [1,35]
        String: "name" [1,7]
        STRING [8,35]
            String: "Self-hosted runner (push)" [8,35]
    FIELD [36,181]
        String: "on" [36,40]
        OBJECT [41,181]
            FIELD [42,153]
                String: "push" [42,48]
                OBJECT [49,153]
                    FIELD [50,83]
                        String: "branches" [50,60]
                        ARRAY [61,83]
                            STRING [62,68]
                                String: "main" [62,68]
                            STRING [69,75]
                                String: "ci_*" [69,75]
                            STRING [76,82]
                                String: "ci-*" [76,82]
                    FIELD [84,152]
                        String: "paths" [84,91]
                        ARRAY [92,152]
                            STRING [93,101]
                                String: "src/**" [93,101]
                            STRING [102,112]
                                String: "tests/**" [102,112]
                            STRING [113,125]
                                String: ".github/**" [113,125]
                            STRING [126,140]
                                String: "templates/**" [126,140]
                            STRING [141,151]
                                String: "utils/**" [141,151]
            FIELD [154,180]
                String: "repository_dispatch" [154,175]
                NULL [176,180]
    FIELD [182,357]
        String: "env" [182,187]
        OBJECT [188,357]
            FIELD [189,211]
                String: "HF_HOME" [189,198]
                STRING [199,211]
                    String: "/mnt/cache" [199,211]
            FIELD [212,237]
                String: "TRANSFORMERS_IS_CI" [212,232]
                TRUE [233,237]
            FIELD [238,257]
                String: "OMP_NUM_THREADS" [238,255]
                NUMBER [256,257]
                    Number: 8 [256,257]
            FIELD [258,277]
                String: "MKL_NUM_THREADS" [258,275]
                NUMBER [276,277]
                    Number: 8 [276,277]
            FIELD [278,297]
                String: "PYTEST_TIMEOUT" [278,294]
                NUMBER [295,297]
                    Number: 60 [295,297]
            FIELD [298,330]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [298,325]
                TRUE [326,330]
            FIELD [331,356]
                String: "RUN_PT_TF_CROSS_TESTS" [331,354]
                NUMBER [355,356]
                    Number: 1 [355,356]
    FIELD [358,10117]
        String: "jobs" [358,364]
        OBJECT [365,10117]
            FIELD [366,1646]
                String: "setup" [366,373]
                OBJECT [374,1646]
                    FIELD [375,389]
                        String: "name" [375,381]
                        STRING [382,389]
                            String: "Setup" [382,389]
                    FIELD [390,415]
                        String: "runs-on" [390,399]
                        STRING [400,415]
                            String: "ubuntu-latest" [400,415]
                    FIELD [416,531]
                        String: "outputs" [416,425]
                        OBJECT [426,531]
                            FIELD [427,476]
                                String: "matrix" [427,435]
                                STRING [436,476]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [436,476]
                            FIELD [477,530]
                                String: "test_map" [477,487]
                                STRING [488,530]
                                    String: "${{ steps.set-matrix.outputs.test_map }}" [488,530]
                    FIELD [532,1645]
                        String: "steps" [532,539]
                        ARRAY [540,1645]
                            OBJECT [541,627]
                                FIELD [542,572]
                                    String: "name" [542,548]
                                    STRING [549,572]
                                        String: "Checkout transformers" [549,572]
                                FIELD [573,601]
                                    String: "uses" [573,579]
                                    STRING [580,601]
                                        String: "actions/checkout@v2" [580,601]
                                FIELD [602,626]
                                    String: "with" [602,608]
                                    OBJECT [609,626]
                                        FIELD [610,625]
                                            String: "fetch-depth" [610,623]
                                            NUMBER [624,625]
                                                Number: 2 [624,625]
                            OBJECT [628,730]
                                FIELD [629,645]
                                    String: "name" [629,635]
                                    STRING [636,645]
                                        String: "Cleanup" [636,645]
                                FIELD [646,729]
                                    String: "run" [646,651]
                                    STRING [652,729]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [652,729]
                            OBJECT [731,889]
                                FIELD [732,763]
                                    String: "name" [732,738]
                                    STRING [739,763]
                                        String: "Fetch the tests to run" [739,763]
                                FIELD [764,888]
                                    String: "run" [764,769]
                                    STRING [770,888]
                                        String: "pip install --upgrade git-python\npython utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [770,888]
                            OBJECT [890,1018]
                                FIELD [891,920]
                                    String: "name" [891,897]
                                    STRING [898,920]
                                        String: "Report fetched tests" [898,920]
                                FIELD [921,956]
                                    String: "uses" [921,927]
                                    STRING [928,956]
                                        String: "actions/upload-artifact@v2" [928,956]
                                FIELD [957,1017]
                                    String: "with" [957,963]
                                    OBJECT [964,1017]
                                        FIELD [965,986]
                                            String: "name" [965,971]
                                            STRING [972,986]
                                                String: "test_fetched" [972,986]
                                        FIELD [987,1016]
                                            String: "path" [987,993]
                                            STRING [994,1016]
                                                String: "test_preparation.txt" [994,1016]
                            OBJECT [1019,1644]
                                FIELD [1020,1037]
                                    String: "id" [1020,1024]
                                    STRING [1025,1037]
                                        String: "set-matrix" [1025,1037]
                                FIELD [1038,1073]
                                    String: "name" [1038,1044]
                                    STRING [1045,1073]
                                        String: "Organize tests into models" [1045,1073]
                                FIELD [1074,1643]
                                    String: "run" [1074,1079]
                                    STRING [1080,1643]
                                        String: "if [ -f test_map.json ]; then\n    keys=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); d = list(test_map.keys()); print(d)')\n    test_map=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); print(test_map)')\nelse\n    keys=$(python3 -c 'keys = [\"dummy\"]; print(keys)')\n    test_map=$(python3 -c 'test_map = {\"dummy\": []}; print(test_map)')\nfi\necho $keys\necho $test_map\necho \"::set-output name=matrix::$keys\"\necho \"::set-output name=test_map::$test_map\"\n" [1080,1643]
            FIELD [1647,3812]
                String: "run_tests_single_gpu" [1647,1669]
                OBJECT [1670,3812]
                    FIELD [1671,1691]
                        String: "name" [1671,1677]
                        STRING [1678,1691]
                            String: "Model tests" [1678,1691]
                    FIELD [1692,1707]
                        String: "needs" [1692,1699]
                        STRING [1700,1707]
                            String: "setup" [1700,1707]
                    FIELD [1708,1778]
                        String: "if" [1708,1712]
                        STRING [1713,1778]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [1713,1778]
                    FIELD [1779,1906]
                        String: "strategy" [1779,1789]
                        OBJECT [1790,1906]
                            FIELD [1791,1808]
                                String: "fail-fast" [1791,1802]
                                FALSE [1803,1808]
                            FIELD [1809,1905]
                                String: "matrix" [1809,1817]
                                OBJECT [1818,1905]
                                    FIELD [1819,1874]
                                        String: "folders" [1819,1828]
                                        STRING [1829,1874]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [1829,1874]
                                    FIELD [1875,1904]
                                        String: "machine_type" [1875,1889]
                                        ARRAY [1890,1904]
                                            STRING [1891,1903]
                                                String: "single-gpu" [1891,1903]
                    FIELD [1907,1974]
                        String: "runs-on" [1907,1916]
                        ARRAY [1917,1974]
                            STRING [1918,1931]
                                String: "self-hosted" [1918,1931]
                            STRING [1932,1944]
                                String: "docker-gpu" [1932,1944]
                            STRING [1945,1973]
                                String: "${{ matrix.machine_type }}" [1945,1973]
                    FIELD [1975,2135]
                        String: "container" [1975,1986]
                        OBJECT [1987,2135]
                            FIELD [1988,2037]
                                String: "image" [1988,1995]
                                STRING [1996,2037]
                                    String: "huggingface/transformers-all-latest-gpu" [1996,2037]
                            FIELD [2038,2134]
                                String: "options" [2038,2047]
                                STRING [2048,2134]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [2048,2134]
                    FIELD [2136,3811]
                        String: "steps" [2136,2143]
                        ARRAY [2144,3811]
                            OBJECT [2145,2187]
                                FIELD [2146,2165]
                                    String: "name" [2146,2152]
                                    STRING [2153,2165]
                                        String: "NVIDIA-SMI" [2153,2165]
                                FIELD [2166,2186]
                                    String: "run" [2166,2171]
                                    STRING [2172,2186]
                                        String: "nvidia-smi\n" [2172,2186]
                            OBJECT [2188,2592]
                                FIELD [2189,2238]
                                    String: "name" [2189,2195]
                                    STRING [2196,2238]
                                        String: "Are GPUs recognized by our DL frameworks" [2196,2238]
                                FIELD [2239,2274]
                                    String: "working-directory" [2239,2258]
                                    STRING [2259,2274]
                                        String: "/transformers" [2259,2274]
                                FIELD [2275,2591]
                                    String: "run" [2275,2280]
                                    STRING [2281,2591]
                                        String: "utils/print_env_pt.py\nTF_CPP_MIN_LOG_LEVEL=3 python3 -c \"import tensorflow as tf; print('TF GPUs available:', bool(tf.config.list_physical_devices('GPU')))\"\nTF_CPP_MIN_LOG_LEVEL=3 python3 -c \"import tensorflow as tf; print('Number of TF GPUs available:', len(tf.config.list_physical_devices('GPU')))\"\n" [2281,2591]
                            OBJECT [2593,2939]
                                FIELD [2594,2636]
                                    String: "name" [2594,2600]
                                    STRING [2601,2636]
                                        String: "Echo folder ${{ matrix.folders }}" [2601,2636]
                                FIELD [2637,2651]
                                    String: "shell" [2637,2644]
                                    STRING [2645,2651]
                                        String: "bash" [2645,2651]
                                FIELD [2652,2938]
                                    String: "run" [2652,2657]
                                    STRING [2658,2938]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [2658,2938]
                            OBJECT [2940,3051]
                                FIELD [2941,2962]
                                    String: "name" [2941,2947]
                                    STRING [2948,2962]
                                        String: "Update clone" [2948,2962]
                                FIELD [2963,2998]
                                    String: "working-directory" [2963,2982]
                                    STRING [2983,2998]
                                        String: "/transformers" [2983,2998]
                                FIELD [2999,3050]
                                    String: "run" [2999,3004]
                                    STRING [3005,3050]
                                        String: "git fetch && git checkout ${{ github.sha }}" [3005,3050]
                            OBJECT [3052,3325]
                                FIELD [3053,3100]
                                    String: "name" [3053,3059]
                                    STRING [3060,3100]
                                        String: "Run all non-slow selected tests on GPU" [3060,3100]
                                FIELD [3101,3136]
                                    String: "working-directory" [3101,3120]
                                    STRING [3121,3136]
                                        String: "/transformers" [3121,3136]
                                FIELD [3137,3324]
                                    String: "run" [3137,3142]
                                    STRING [3143,3324]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [3143,3324]
                            OBJECT [3326,3519]
                                FIELD [3327,3357]
                                    String: "name" [3327,3333]
                                    STRING [3334,3357]
                                        String: "Failure short reports" [3334,3357]
                                FIELD [3358,3381]
                                    String: "if" [3358,3362]
                                    STRING [3363,3381]
                                        String: "${{ failure() }}" [3363,3381]
                                FIELD [3382,3406]
                                    String: "continue-on-error" [3382,3401]
                                    TRUE [3402,3406]
                                FIELD [3407,3518]
                                    String: "run" [3407,3412]
                                    STRING [3413,3518]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [3413,3518]
                            OBJECT [3520,3810]
                                FIELD [3521,3558]
                                    String: "name" [3521,3527]
                                    STRING [3528,3558]
                                        String: "Test suite reports artifacts" [3528,3558]
                                FIELD [3559,3581]
                                    String: "if" [3559,3563]
                                    STRING [3564,3581]
                                        String: "${{ always() }}" [3564,3581]
                                FIELD [3582,3617]
                                    String: "uses" [3582,3588]
                                    STRING [3589,3617]
                                        String: "actions/upload-artifact@v2" [3589,3617]
                                FIELD [3618,3809]
                                    String: "with" [3618,3624]
                                    OBJECT [3625,3809]
                                        FIELD [3626,3718]
                                            String: "name" [3626,3632]
                                            STRING [3633,3718]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [3633,3718]
                                        FIELD [3719,3808]
                                            String: "path" [3719,3725]
                                            STRING [3726,3808]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [3726,3808]
            FIELD [3813,6014]
                String: "run_tests_multi_gpu" [3813,3834]
                OBJECT [3835,6014]
                    FIELD [3836,3856]
                        String: "name" [3836,3842]
                        STRING [3843,3856]
                            String: "Model tests" [3843,3856]
                    FIELD [3857,3872]
                        String: "needs" [3857,3864]
                        STRING [3865,3872]
                            String: "setup" [3865,3872]
                    FIELD [3873,3943]
                        String: "if" [3873,3877]
                        STRING [3878,3943]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [3878,3943]
                    FIELD [3944,4070]
                        String: "strategy" [3944,3954]
                        OBJECT [3955,4070]
                            FIELD [3956,3973]
                                String: "fail-fast" [3956,3967]
                                FALSE [3968,3973]
                            FIELD [3974,4069]
                                String: "matrix" [3974,3982]
                                OBJECT [3983,4069]
                                    FIELD [3984,4039]
                                        String: "folders" [3984,3993]
                                        STRING [3994,4039]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [3994,4039]
                                    FIELD [4040,4068]
                                        String: "machine_type" [4040,4054]
                                        ARRAY [4055,4068]
                                            STRING [4056,4067]
                                                String: "multi-gpu" [4056,4067]
                    FIELD [4071,4138]
                        String: "runs-on" [4071,4080]
                        ARRAY [4081,4138]
                            STRING [4082,4095]
                                String: "self-hosted" [4082,4095]
                            STRING [4096,4108]
                                String: "docker-gpu" [4096,4108]
                            STRING [4109,4137]
                                String: "${{ matrix.machine_type }}" [4109,4137]
                    FIELD [4139,4301]
                        String: "container" [4139,4150]
                        OBJECT [4151,4301]
                            FIELD [4152,4201]
                                String: "image" [4152,4159]
                                STRING [4160,4201]
                                    String: "huggingface/transformers-all-latest-gpu" [4160,4201]
                            FIELD [4202,4300]
                                String: "options" [4202,4211]
                                STRING [4212,4300]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [4212,4300]
                    FIELD [4302,6013]
                        String: "steps" [4302,4309]
                        ARRAY [4310,6013]
                            OBJECT [4311,4353]
                                FIELD [4312,4331]
                                    String: "name" [4312,4318]
                                    STRING [4319,4331]
                                        String: "NVIDIA-SMI" [4319,4331]
                                FIELD [4332,4352]
                                    String: "run" [4332,4337]
                                    STRING [4338,4352]
                                        String: "nvidia-smi\n" [4338,4352]
                            OBJECT [4354,4758]
                                FIELD [4355,4404]
                                    String: "name" [4355,4361]
                                    STRING [4362,4404]
                                        String: "Are GPUs recognized by our DL frameworks" [4362,4404]
                                FIELD [4405,4440]
                                    String: "working-directory" [4405,4424]
                                    STRING [4425,4440]
                                        String: "/transformers" [4425,4440]
                                FIELD [4441,4757]
                                    String: "run" [4441,4446]
                                    STRING [4447,4757]
                                        String: "utils/print_env_pt.py\nTF_CPP_MIN_LOG_LEVEL=3 python3 -c \"import tensorflow as tf; print('TF GPUs available:', bool(tf.config.list_physical_devices('GPU')))\"\nTF_CPP_MIN_LOG_LEVEL=3 python3 -c \"import tensorflow as tf; print('Number of TF GPUs available:', len(tf.config.list_physical_devices('GPU')))\"\n" [4447,4757]
                            OBJECT [4759,5105]
                                FIELD [4760,4802]
                                    String: "name" [4760,4766]
                                    STRING [4767,4802]
                                        String: "Echo folder ${{ matrix.folders }}" [4767,4802]
                                FIELD [4803,4817]
                                    String: "shell" [4803,4810]
                                    STRING [4811,4817]
                                        String: "bash" [4811,4817]
                                FIELD [4818,5104]
                                    String: "run" [4818,4823]
                                    STRING [4824,5104]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [4824,5104]
                            OBJECT [5106,5217]
                                FIELD [5107,5128]
                                    String: "name" [5107,5113]
                                    STRING [5114,5128]
                                        String: "Update clone" [5114,5128]
                                FIELD [5129,5164]
                                    String: "working-directory" [5129,5148]
                                    STRING [5149,5164]
                                        String: "/transformers" [5149,5164]
                                FIELD [5165,5216]
                                    String: "run" [5165,5170]
                                    STRING [5171,5216]
                                        String: "git fetch && git checkout ${{ github.sha }}" [5171,5216]
                            OBJECT [5218,5527]
                                FIELD [5219,5266]
                                    String: "name" [5219,5225]
                                    STRING [5226,5266]
                                        String: "Run all non-slow selected tests on GPU" [5226,5266]
                                FIELD [5267,5302]
                                    String: "env" [5267,5272]
                                    OBJECT [5273,5302]
                                        FIELD [5274,5301]
                                            String: "MKL_SERVICE_FORCE_INTEL" [5274,5299]
                                            NUMBER [5300,5301]
                                                Number: 1 [5300,5301]
                                FIELD [5303,5338]
                                    String: "working-directory" [5303,5322]
                                    STRING [5323,5338]
                                        String: "/transformers" [5323,5338]
                                FIELD [5339,5526]
                                    String: "run" [5339,5344]
                                    STRING [5345,5526]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [5345,5526]
                            OBJECT [5528,5721]
                                FIELD [5529,5559]
                                    String: "name" [5529,5535]
                                    STRING [5536,5559]
                                        String: "Failure short reports" [5536,5559]
                                FIELD [5560,5583]
                                    String: "if" [5560,5564]
                                    STRING [5565,5583]
                                        String: "${{ failure() }}" [5565,5583]
                                FIELD [5584,5608]
                                    String: "continue-on-error" [5584,5603]
                                    TRUE [5604,5608]
                                FIELD [5609,5720]
                                    String: "run" [5609,5614]
                                    STRING [5615,5720]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [5615,5720]
                            OBJECT [5722,6012]
                                FIELD [5723,5760]
                                    String: "name" [5723,5729]
                                    STRING [5730,5760]
                                        String: "Test suite reports artifacts" [5730,5760]
                                FIELD [5761,5783]
                                    String: "if" [5761,5765]
                                    STRING [5766,5783]
                                        String: "${{ always() }}" [5766,5783]
                                FIELD [5784,5819]
                                    String: "uses" [5784,5790]
                                    STRING [5791,5819]
                                        String: "actions/upload-artifact@v2" [5791,5819]
                                FIELD [5820,6011]
                                    String: "with" [5820,5826]
                                    OBJECT [5827,6011]
                                        FIELD [5828,5920]
                                            String: "name" [5828,5834]
                                            STRING [5835,5920]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [5835,5920]
                                        FIELD [5921,6010]
                                            String: "path" [5921,5927]
                                            STRING [5928,6010]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [5928,6010]
            FIELD [6015,7561]
                String: "run_tests_torch_cuda_extensions_single_gpu" [6015,6059]
                OBJECT [6060,7561]
                    FIELD [6061,6096]
                        String: "name" [6061,6067]
                        STRING [6068,6096]
                            String: "Torch CUDA extension tests" [6068,6096]
                    FIELD [6097,6112]
                        String: "needs" [6097,6104]
                        STRING [6105,6112]
                            String: "setup" [6105,6112]
                    FIELD [6113,6241]
                        String: "if" [6113,6117]
                        STRING [6118,6241]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [6118,6241]
                    FIELD [6242,6313]
                        String: "strategy" [6242,6252]
                        OBJECT [6253,6313]
                            FIELD [6254,6271]
                                String: "fail-fast" [6254,6265]
                                FALSE [6266,6271]
                            FIELD [6272,6312]
                                String: "matrix" [6272,6280]
                                OBJECT [6281,6312]
                                    FIELD [6282,6311]
                                        String: "machine_type" [6282,6296]
                                        ARRAY [6297,6311]
                                            STRING [6298,6310]
                                                String: "single-gpu" [6298,6310]
                    FIELD [6314,6381]
                        String: "runs-on" [6314,6323]
                        ARRAY [6324,6381]
                            STRING [6325,6338]
                                String: "self-hosted" [6325,6338]
                            STRING [6339,6351]
                                String: "docker-gpu" [6339,6351]
                            STRING [6352,6380]
                                String: "${{ matrix.machine_type }}" [6352,6380]
                    FIELD [6382,6535]
                        String: "container" [6382,6393]
                        OBJECT [6394,6535]
                            FIELD [6395,6437]
                                String: "image" [6395,6402]
                                STRING [6403,6437]
                                    String: "nvcr.io/nvidia/pytorch:21.03-py3" [6403,6437]
                            FIELD [6438,6534]
                                String: "options" [6438,6447]
                                STRING [6448,6534]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [6448,6534]
                    FIELD [6536,7560]
                        String: "steps" [6536,6543]
                        ARRAY [6544,7560]
                            OBJECT [6545,6631]
                                FIELD [6546,6576]
                                    String: "name" [6546,6552]
                                    STRING [6553,6576]
                                        String: "Checkout transformers" [6553,6576]
                                FIELD [6577,6605]
                                    String: "uses" [6577,6583]
                                    STRING [6584,6605]
                                        String: "actions/checkout@v2" [6584,6605]
                                FIELD [6606,6630]
                                    String: "with" [6606,6612]
                                    OBJECT [6613,6630]
                                        FIELD [6614,6629]
                                            String: "fetch-depth" [6614,6627]
                                            NUMBER [6628,6629]
                                                Number: 2 [6628,6629]
                            OBJECT [6632,6674]
                                FIELD [6633,6652]
                                    String: "name" [6633,6639]
                                    STRING [6640,6652]
                                        String: "NVIDIA-SMI" [6640,6652]
                                FIELD [6653,6673]
                                    String: "run" [6653,6658]
                                    STRING [6659,6673]
                                        String: "nvidia-smi\n" [6659,6673]
                            OBJECT [6675,6820]
                                FIELD [6676,6705]
                                    String: "name" [6676,6682]
                                    STRING [6683,6705]
                                        String: "Install dependencies" [6683,6705]
                                FIELD [6706,6819]
                                    String: "run" [6706,6711]
                                    STRING [6712,6819]
                                        String: "apt -y update && apt install -y libaio-dev\npip install --upgrade pip\npip install .[deepspeed-testing]\n" [6712,6819]
                            OBJECT [6821,6904]
                                FIELD [6822,6871]
                                    String: "name" [6822,6828]
                                    STRING [6829,6871]
                                        String: "Are GPUs recognized by our DL frameworks" [6829,6871]
                                FIELD [6872,6903]
                                    String: "run" [6872,6877]
                                    STRING [6878,6903]
                                        String: "utils/print_env_pt.py\n" [6878,6903]
                            OBJECT [6905,7110]
                                FIELD [6906,6953]
                                    String: "name" [6906,6912]
                                    STRING [6913,6953]
                                        String: "Run all non-slow selected tests on GPU" [6913,6953]
                                FIELD [6954,7109]
                                    String: "run" [6954,6959]
                                    STRING [6960,7109]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [6960,7109]
                            OBJECT [7111,7290]
                                FIELD [7112,7142]
                                    String: "name" [7112,7118]
                                    STRING [7119,7142]
                                        String: "Failure short reports" [7119,7142]
                                FIELD [7143,7166]
                                    String: "if" [7143,7147]
                                    STRING [7148,7166]
                                        String: "${{ failure() }}" [7148,7166]
                                FIELD [7167,7191]
                                    String: "continue-on-error" [7167,7186]
                                    TRUE [7187,7191]
                                FIELD [7192,7289]
                                    String: "run" [7192,7197]
                                    STRING [7198,7289]
                                        String: "cat reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [7198,7289]
                            OBJECT [7291,7559]
                                FIELD [7292,7329]
                                    String: "name" [7292,7298]
                                    STRING [7299,7329]
                                        String: "Test suite reports artifacts" [7299,7329]
                                FIELD [7330,7352]
                                    String: "if" [7330,7334]
                                    STRING [7335,7352]
                                        String: "${{ always() }}" [7335,7352]
                                FIELD [7353,7388]
                                    String: "uses" [7353,7359]
                                    STRING [7360,7388]
                                        String: "actions/upload-artifact@v2" [7360,7388]
                                FIELD [7389,7558]
                                    String: "with" [7389,7395]
                                    OBJECT [7396,7558]
                                        FIELD [7397,7481]
                                            String: "name" [7397,7403]
                                            STRING [7404,7481]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [7404,7481]
                                        FIELD [7482,7557]
                                            String: "path" [7482,7488]
                                            STRING [7489,7557]
                                                String: "reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [7489,7557]
            FIELD [7562,9189]
                String: "run_tests_torch_cuda_extensions_multi_gpu" [7562,7605]
                OBJECT [7606,9189]
                    FIELD [7607,7642]
                        String: "name" [7607,7613]
                        STRING [7614,7642]
                            String: "Torch CUDA extension tests" [7614,7642]
                    FIELD [7643,7658]
                        String: "needs" [7643,7650]
                        STRING [7651,7658]
                            String: "setup" [7651,7658]
                    FIELD [7659,7787]
                        String: "if" [7659,7663]
                        STRING [7664,7787]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [7664,7787]
                    FIELD [7788,7858]
                        String: "strategy" [7788,7798]
                        OBJECT [7799,7858]
                            FIELD [7800,7817]
                                String: "fail-fast" [7800,7811]
                                FALSE [7812,7817]
                            FIELD [7818,7857]
                                String: "matrix" [7818,7826]
                                OBJECT [7827,7857]
                                    FIELD [7828,7856]
                                        String: "machine_type" [7828,7842]
                                        ARRAY [7843,7856]
                                            STRING [7844,7855]
                                                String: "multi-gpu" [7844,7855]
                    FIELD [7859,7926]
                        String: "runs-on" [7859,7868]
                        ARRAY [7869,7926]
                            STRING [7870,7883]
                                String: "self-hosted" [7870,7883]
                            STRING [7884,7896]
                                String: "docker-gpu" [7884,7896]
                            STRING [7897,7925]
                                String: "${{ matrix.machine_type }}" [7897,7925]
                    FIELD [7927,8082]
                        String: "container" [7927,7938]
                        OBJECT [7939,8082]
                            FIELD [7940,7982]
                                String: "image" [7940,7947]
                                STRING [7948,7982]
                                    String: "nvcr.io/nvidia/pytorch:21.03-py3" [7948,7982]
                            FIELD [7983,8081]
                                String: "options" [7983,7992]
                                STRING [7993,8081]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [7993,8081]
                    FIELD [8083,9188]
                        String: "steps" [8083,8090]
                        ARRAY [8091,9188]
                            OBJECT [8092,8178]
                                FIELD [8093,8123]
                                    String: "name" [8093,8099]
                                    STRING [8100,8123]
                                        String: "Checkout transformers" [8100,8123]
                                FIELD [8124,8152]
                                    String: "uses" [8124,8130]
                                    STRING [8131,8152]
                                        String: "actions/checkout@v2" [8131,8152]
                                FIELD [8153,8177]
                                    String: "with" [8153,8159]
                                    OBJECT [8160,8177]
                                        FIELD [8161,8176]
                                            String: "fetch-depth" [8161,8174]
                                            NUMBER [8175,8176]
                                                Number: 2 [8175,8176]
                            OBJECT [8179,8221]
                                FIELD [8180,8199]
                                    String: "name" [8180,8186]
                                    STRING [8187,8199]
                                        String: "NVIDIA-SMI" [8187,8199]
                                FIELD [8200,8220]
                                    String: "run" [8200,8205]
                                    STRING [8206,8220]
                                        String: "nvidia-smi\n" [8206,8220]
                            OBJECT [8222,8448]
                                FIELD [8223,8252]
                                    String: "name" [8223,8229]
                                    STRING [8230,8252]
                                        String: "Install dependencies" [8230,8252]
                                FIELD [8253,8447]
                                    String: "run" [8253,8258]
                                    STRING [8259,8447]
                                        String: "apt -y update && apt install -y libaio-dev\npip install --upgrade pip\nrm -rf ~/.cache/torch_extensions/ # shared between conflicting builds\npip install .[testing,deepspeed,fairscale]\n" [8259,8447]
                            OBJECT [8449,8532]
                                FIELD [8450,8499]
                                    String: "name" [8450,8456]
                                    STRING [8457,8499]
                                        String: "Are GPUs recognized by our DL frameworks" [8457,8499]
                                FIELD [8500,8531]
                                    String: "run" [8500,8505]
                                    STRING [8506,8531]
                                        String: "utils/print_env_pt.py\n" [8506,8531]
                            OBJECT [8533,8738]
                                FIELD [8534,8581]
                                    String: "name" [8534,8540]
                                    STRING [8541,8581]
                                        String: "Run all non-slow selected tests on GPU" [8541,8581]
                                FIELD [8582,8737]
                                    String: "run" [8582,8587]
                                    STRING [8588,8737]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [8588,8737]
                            OBJECT [8739,8918]
                                FIELD [8740,8770]
                                    String: "name" [8740,8746]
                                    STRING [8747,8770]
                                        String: "Failure short reports" [8747,8770]
                                FIELD [8771,8794]
                                    String: "if" [8771,8775]
                                    STRING [8776,8794]
                                        String: "${{ failure() }}" [8776,8794]
                                FIELD [8795,8819]
                                    String: "continue-on-error" [8795,8814]
                                    TRUE [8815,8819]
                                FIELD [8820,8917]
                                    String: "run" [8820,8825]
                                    STRING [8826,8917]
                                        String: "cat reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [8826,8917]
                            OBJECT [8919,9187]
                                FIELD [8920,8957]
                                    String: "name" [8920,8926]
                                    STRING [8927,8957]
                                        String: "Test suite reports artifacts" [8927,8957]
                                FIELD [8958,8980]
                                    String: "if" [8958,8962]
                                    STRING [8963,8980]
                                        String: "${{ always() }}" [8963,8980]
                                FIELD [8981,9016]
                                    String: "uses" [8981,8987]
                                    STRING [8988,9016]
                                        String: "actions/upload-artifact@v2" [8988,9016]
                                FIELD [9017,9186]
                                    String: "with" [9017,9023]
                                    OBJECT [9024,9186]
                                        FIELD [9025,9109]
                                            String: "name" [9025,9031]
                                            STRING [9032,9109]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [9032,9109]
                                        FIELD [9110,9185]
                                            String: "path" [9110,9116]
                                            STRING [9117,9185]
                                                String: "reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [9117,9185]
            FIELD [9190,10116]
                String: "send_results" [9190,9204]
                OBJECT [9205,10116]
                    FIELD [9206,9238]
                        String: "name" [9206,9212]
                        STRING [9213,9238]
                            String: "Send results to webhook" [9213,9238]
                    FIELD [9239,9264]
                        String: "runs-on" [9239,9248]
                        STRING [9249,9264]
                            String: "ubuntu-latest" [9249,9264]
                    FIELD [9265,9280]
                        String: "if" [9265,9269]
                        STRING [9270,9280]
                            String: "always()" [9270,9280]
                    FIELD [9281,9432]
                        String: "needs" [9281,9288]
                        ARRAY [9289,9432]
                            STRING [9290,9297]
                                String: "setup" [9290,9297]
                            STRING [9298,9320]
                                String: "run_tests_single_gpu" [9298,9320]
                            STRING [9321,9342]
                                String: "run_tests_multi_gpu" [9321,9342]
                            STRING [9343,9387]
                                String: "run_tests_torch_cuda_extensions_single_gpu" [9343,9387]
                            STRING [9388,9431]
                                String: "run_tests_torch_cuda_extensions_multi_gpu" [9388,9431]
                    FIELD [9433,10115]
                        String: "steps" [9433,9440]
                        ARRAY [9441,10115]
                            OBJECT [9442,9472]
                                FIELD [9443,9471]
                                    String: "uses" [9443,9449]
                                    STRING [9450,9471]
                                        String: "actions/checkout@v2" [9450,9471]
                            OBJECT [9473,9512]
                                FIELD [9474,9511]
                                    String: "uses" [9474,9480]
                                    STRING [9481,9511]
                                        String: "actions/download-artifact@v2" [9481,9511]
                            OBJECT [9513,10114]
                                FIELD [9514,9544]
                                    String: "name" [9514,9520]
                                    STRING [9521,9544]
                                        String: "Send message to Slack" [9521,9544]
                                FIELD [9545,10007]
                                    String: "env" [9545,9550]
                                    OBJECT [9551,10007]
                                        FIELD [9552,9608]
                                            String: "CI_SLACK_BOT_TOKEN" [9552,9572]
                                            STRING [9573,9608]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [9573,9608]
                                        FIELD [9609,9667]
                                            String: "CI_SLACK_CHANNEL_ID" [9609,9630]
                                            STRING [9631,9667]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [9631,9667]
                                        FIELD [9668,9738]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [9668,9695]
                                            STRING [9696,9738]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [9696,9738]
                                        FIELD [9739,9815]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [9739,9769]
                                            STRING [9770,9815]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [9770,9815]
                                        FIELD [9816,9881]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [9816,9844]
                                            STRING [9845,9881]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [9845,9881]
                                        FIELD [9882,9899]
                                            String: "CI_EVENT" [9882,9892]
                                            STRING [9893,9899]
                                                String: "push" [9893,9899]
                                        FIELD [9900,9952]
                                            String: "CI_TITLE" [9900,9910]
                                            STRING [9911,9952]
                                                String: "${{ github.event.head_commit.message }}" [9911,9952]
                                        FIELD [9953,10006]
                                            String: "CI_COMMIT_URL" [9953,9968]
                                            STRING [9969,10006]
                                                String: "${{ github.event.head_commit.url }}" [9969,10006]
                                FIELD [10008,10113]
                                    String: "run" [10008,10013]
                                    STRING [10014,10113]
                                        String: "pip install slack_sdk\npython utils/notification_service.py \"${{ needs.setup.outputs.matrix }}\"" [10014,10113]