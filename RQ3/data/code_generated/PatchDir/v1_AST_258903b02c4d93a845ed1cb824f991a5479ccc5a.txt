OBJECT [0,6145]
    FIELD [1,20]
        String: "name" [1,7]
        STRING [8,20]
            String: "Autoformat" [8,20]
    FIELD [21,74]
        String: "on" [21,25]
        OBJECT [26,74]
            FIELD [27,73]
                String: "issue_comment" [27,42]
                OBJECT [43,73]
                    FIELD [44,72]
                        String: "types" [44,51]
                        ARRAY [52,72]
                            STRING [53,62]
                                String: "created" [53,62]
                            STRING [63,71]
                                String: "edited" [63,71]
    FIELD [75,147]
        String: "defaults" [75,85]
        OBJECT [86,147]
            FIELD [87,146]
                String: "run" [87,92]
                OBJECT [93,146]
                    FIELD [94,145]
                        String: "shell" [94,101]
                        STRING [102,145]
                            String: "bash --noprofile --norc -exo pipefail {0}" [102,145]
    FIELD [148,6144]
        String: "jobs" [148,154]
        OBJECT [155,6144]
            FIELD [156,1281]
                String: "check-comment" [156,171]
                OBJECT [172,1281]
                    FIELD [173,198]
                        String: "runs-on" [173,182]
                        STRING [183,198]
                            String: "ubuntu-latest" [183,198]
                    FIELD [199,358]
                        String: "if" [199,203]
                        STRING [204,358]
                            String: "${{ github.event.issue.pull_request && contains(github.event.comment.body, '@mlflow-automation') && contains(github.event.comment.body, 'autoformat') }}" [204,358]
                    FIELD [359,747]
                        String: "outputs" [359,368]
                        OBJECT [369,747]
                            FIELD [370,460]
                                String: "should_autoformat" [370,389]
                                STRING [390,460]
                                    String: "${{ fromJSON(steps.create-status.outputs.result).shouldAutoformat }}" [390,460]
                            FIELD [461,538]
                                String: "repository" [461,473]
                                STRING [474,538]
                                    String: "${{ fromJSON(steps.create-status.outputs.result).repository }}" [474,538]
                            FIELD [539,602]
                                String: "ref" [539,544]
                                STRING [545,602]
                                    String: "${{ fromJSON(steps.create-status.outputs.result).ref }}" [545,602]
                            FIELD [603,666]
                                String: "sha" [603,608]
                                STRING [609,666]
                                    String: "${{ fromJSON(steps.create-status.outputs.result).sha }}" [609,666]
                            FIELD [667,746]
                                String: "pull_number" [667,680]
                                STRING [681,746]
                                    String: "${{ fromJSON(steps.create-status.outputs.result).pull_number }}" [681,746]
                    FIELD [748,1280]
                        String: "steps" [748,755]
                        ARRAY [756,1280]
                            OBJECT [757,787]
                                FIELD [758,786]
                                    String: "uses" [758,764]
                                    STRING [765,786]
                                        String: "actions/checkout@v3" [765,786]
                            OBJECT [788,1279]
                                FIELD [789,811]
                                    String: "name" [789,795]
                                    STRING [796,811]
                                        String: "Create status" [796,811]
                                FIELD [812,832]
                                    String: "id" [812,816]
                                    STRING [817,832]
                                        String: "create-status" [817,832]
                                FIELD [833,866]
                                    String: "uses" [833,839]
                                    STRING [840,866]
                                        String: "actions/github-script@v4" [840,866]
                                FIELD [867,1278]
                                    String: "with" [867,873]
                                    OBJECT [874,1278]
                                        FIELD [875,919]
                                            String: "github-token" [875,889]
                                            STRING [890,919]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [890,919]
                                        FIELD [920,1277]
                                            String: "script" [920,928]
                                            STRING [929,1277]
                                                String: "const autoformat = require('./.github/workflows/autoformat.js');\nconst shouldAutoformat = autoformat.shouldAutoformat(context.payload.comment);\nif (shouldAutoformat) {\n  await autoformat.createStatus(context, github, core);\n}\nconst pullInfo = await autoformat.getPullInformation(context, github);\nreturn { ...pullInfo, shouldAutoformat };\n" [929,1277]
            FIELD [1282,2260]
                String: "check-diff" [1282,1294]
                OBJECT [1295,2260]
                    FIELD [1296,1321]
                        String: "runs-on" [1296,1305]
                        STRING [1306,1321]
                            String: "ubuntu-latest" [1306,1321]
                    FIELD [1322,1345]
                        String: "needs" [1322,1329]
                        STRING [1330,1345]
                            String: "check-comment" [1330,1345]
                    FIELD [1346,1415]
                        String: "if" [1346,1350]
                        STRING [1351,1415]
                            String: "${{ needs.check-comment.outputs.should_autoformat == 'true' }}" [1351,1415]
                    FIELD [1416,1543]
                        String: "outputs" [1416,1425]
                        OBJECT [1426,1543]
                            FIELD [1427,1484]
                                String: "py_changed" [1427,1439]
                                STRING [1440,1484]
                                    String: "${{ steps.check-diff.outputs.py_changed }}" [1440,1484]
                            FIELD [1485,1542]
                                String: "ui_changed" [1485,1497]
                                STRING [1498,1542]
                                    String: "${{ steps.check-diff.outputs.ui_changed }}" [1498,1542]
                    FIELD [1544,2259]
                        String: "steps" [1544,1551]
                        ARRAY [1552,2259]
                            OBJECT [1553,1583]
                                FIELD [1554,1582]
                                    String: "uses" [1554,1560]
                                    STRING [1561,1582]
                                        String: "actions/checkout@v3" [1561,1582]
                            OBJECT [1584,1650]
                                FIELD [1585,1617]
                                    String: "uses" [1585,1591]
                                    STRING [1592,1617]
                                        String: "actions/setup-python@v3" [1592,1617]
                                FIELD [1618,1649]
                                    String: "with" [1618,1624]
                                    OBJECT [1625,1649]
                                        FIELD [1626,1648]
                                            String: "python-version" [1626,1642]
                                            STRING [1643,1648]
                                                String: "3.7" [1643,1648]
                            OBJECT [1651,1683]
                                FIELD [1652,1682]
                                    String: "run" [1652,1657]
                                    STRING [1658,1682]
                                        String: "pip install requests\n" [1658,1682]
                            OBJECT [1684,2258]
                                FIELD [1685,1704]
                                    String: "name" [1685,1691]
                                    STRING [1692,1704]
                                        String: "Check diff" [1692,1704]
                                FIELD [1705,1722]
                                    String: "id" [1705,1709]
                                    STRING [1710,1722]
                                        String: "check-diff" [1710,1722]
                                FIELD [1723,2257]
                                    String: "run" [1723,1728]
                                    STRING [1729,2257]
                                        String: "repository=\"${{ github.repository }}\"\npull_number=\"${{ needs.check-comment.outputs.pull_number }}\"\nchanged_files=\"$(python dev/list_changed_files.py --repository $repository --pr-num $pull_number)\"\npy_changed=$([[ -z $(echo \"$changed_files\" | grep '\\.py$') ]] && echo \"false\" || echo \"true\")\nui_changed=$([[ -z $(echo \"$changed_files\" | grep '^mlflow/server/js') ]] && echo \"false\" || echo \"true\")\necho \"::set-output name=py_changed::$py_changed\"\necho \"::set-output name=ui_changed::$ui_changed\"\n" [1729,2257]
            FIELD [2261,3241]
                String: "python" [2261,2269]
                OBJECT [2270,3241]
                    FIELD [2271,2296]
                        String: "runs-on" [2271,2280]
                        STRING [2281,2296]
                            String: "ubuntu-latest" [2281,2296]
                    FIELD [2297,2335]
                        String: "needs" [2297,2304]
                        ARRAY [2305,2335]
                            STRING [2306,2321]
                                String: "check-comment" [2306,2321]
                            STRING [2322,2334]
                                String: "check-diff" [2322,2334]
                    FIELD [2336,2395]
                        String: "if" [2336,2340]
                        STRING [2341,2395]
                            String: "${{ needs.check-diff.outputs.py_changed == 'true' }}" [2341,2395]
                    FIELD [2396,2461]
                        String: "outputs" [2396,2405]
                        OBJECT [2406,2461]
                            FIELD [2407,2460]
                                String: "has_diff" [2407,2417]
                                STRING [2418,2460]
                                    String: "${{ steps.check-diff.outputs.has_diff }}" [2418,2460]
                    FIELD [2462,3240]
                        String: "steps" [2462,2469]
                        ARRAY [2470,3240]
                            OBJECT [2471,2618]
                                FIELD [2472,2500]
                                    String: "uses" [2472,2478]
                                    STRING [2479,2500]
                                        String: "actions/checkout@v3" [2479,2500]
                                FIELD [2501,2617]
                                    String: "with" [2501,2507]
                                    OBJECT [2508,2617]
                                        FIELD [2509,2569]
                                            String: "repository" [2509,2521]
                                            STRING [2522,2569]
                                                String: "${{ needs.check-comment.outputs.repository }}" [2522,2569]
                                        FIELD [2570,2616]
                                            String: "ref" [2570,2575]
                                            STRING [2576,2616]
                                                String: "${{ needs.check-comment.outputs.ref }}" [2576,2616]
                            OBJECT [2619,2685]
                                FIELD [2620,2652]
                                    String: "uses" [2620,2626]
                                    STRING [2627,2652]
                                        String: "actions/setup-python@v3" [2627,2652]
                                FIELD [2653,2684]
                                    String: "with" [2653,2659]
                                    OBJECT [2660,2684]
                                        FIELD [2661,2683]
                                            String: "python-version" [2661,2677]
                                            STRING [2678,2683]
                                                String: "3.7" [2678,2683]
                            OBJECT [2686,2777]
                                FIELD [2687,2716]
                                    String: "name" [2687,2693]
                                    STRING [2694,2716]
                                        String: "Install dependencies" [2694,2716]
                                FIELD [2717,2776]
                                    String: "run" [2717,2722]
                                    STRING [2723,2776]
                                        String: "pip install -r requirements/lint-requirements.txt\n" [2723,2776]
                            OBJECT [2778,2816]
                                FIELD [2779,2797]
                                    String: "name" [2779,2785]
                                    STRING [2786,2797]
                                        String: "Run black" [2786,2797]
                                FIELD [2798,2815]
                                    String: "run" [2798,2803]
                                    STRING [2804,2815]
                                        String: "black .\n" [2804,2815]
                            OBJECT [2817,3024]
                                FIELD [2818,2837]
                                    String: "name" [2818,2824]
                                    STRING [2825,2837]
                                        String: "Check diff" [2825,2837]
                                FIELD [2838,2855]
                                    String: "id" [2838,2842]
                                    STRING [2843,2855]
                                        String: "check-diff" [2843,2855]
                                FIELD [2856,3023]
                                    String: "run" [2856,2861]
                                    STRING [2862,3023]
                                        String: "git diff --output=python.diff\nhas_diff=$([[ -z \"$(cat python.diff)\" ]] && echo \"false\" || echo \"true\")\necho \"::set-output name=has_diff::$has_diff\"\n" [2862,3023]
                            OBJECT [3025,3239]
                                FIELD [3026,3061]
                                    String: "uses" [3026,3032]
                                    STRING [3033,3061]
                                        String: "actions/upload-artifact@v3" [3033,3061]
                                FIELD [3062,3119]
                                    String: "if" [3062,3066]
                                    STRING [3067,3119]
                                        String: "${{ steps.check-diff.outputs.has_diff == 'true' }}" [3067,3119]
                                FIELD [3120,3238]
                                    String: "with" [3120,3126]
                                    OBJECT [3127,3238]
                                        FIELD [3128,3169]
                                            String: "name" [3128,3134]
                                            STRING [3135,3169]
                                                String: "python.${{ github.run_id }}.diff" [3135,3169]
                                        FIELD [3170,3190]
                                            String: "path" [3170,3176]
                                            STRING [3177,3190]
                                                String: "python.diff" [3177,3190]
                                        FIELD [3191,3218]
                                            String: "if-no-files-found" [3191,3210]
                                            STRING [3211,3218]
                                                String: "error" [3211,3218]
                                        FIELD [3219,3237]
                                            String: "retention-days" [3219,3235]
                                            NUMBER [3236,3237]
                                                Number: 1 [3236,3237]
            FIELD [3242,4262]
                String: "ui" [3242,3246]
                OBJECT [3247,4262]
                    FIELD [3248,3273]
                        String: "runs-on" [3248,3257]
                        STRING [3258,3273]
                            String: "ubuntu-latest" [3258,3273]
                    FIELD [3274,3312]
                        String: "needs" [3274,3281]
                        ARRAY [3282,3312]
                            STRING [3283,3298]
                                String: "check-comment" [3283,3298]
                            STRING [3299,3311]
                                String: "check-diff" [3299,3311]
                    FIELD [3313,3372]
                        String: "if" [3313,3317]
                        STRING [3318,3372]
                            String: "${{ needs.check-diff.outputs.ui_changed == 'true' }}" [3318,3372]
                    FIELD [3373,3438]
                        String: "outputs" [3373,3382]
                        OBJECT [3383,3438]
                            FIELD [3384,3437]
                                String: "has_diff" [3384,3394]
                                STRING [3395,3437]
                                    String: "${{ steps.check-diff.outputs.has_diff }}" [3395,3437]
                    FIELD [3439,3498]
                        String: "defaults" [3439,3449]
                        OBJECT [3450,3498]
                            FIELD [3451,3497]
                                String: "run" [3451,3456]
                                OBJECT [3457,3497]
                                    FIELD [3458,3496]
                                        String: "working-directory" [3458,3477]
                                        STRING [3478,3496]
                                            String: "mlflow/server/js" [3478,3496]
                    FIELD [3499,4261]
                        String: "steps" [3499,3506]
                        ARRAY [3507,4261]
                            OBJECT [3508,3655]
                                FIELD [3509,3537]
                                    String: "uses" [3509,3515]
                                    STRING [3516,3537]
                                        String: "actions/checkout@v3" [3516,3537]
                                FIELD [3538,3654]
                                    String: "with" [3538,3544]
                                    OBJECT [3545,3654]
                                        FIELD [3546,3606]
                                            String: "repository" [3546,3558]
                                            STRING [3559,3606]
                                                String: "${{ needs.check-comment.outputs.repository }}" [3559,3606]
                                        FIELD [3607,3653]
                                            String: "ref" [3607,3612]
                                            STRING [3613,3653]
                                                String: "${{ needs.check-comment.outputs.ref }}" [3613,3653]
                            OBJECT [3656,3717]
                                FIELD [3657,3687]
                                    String: "uses" [3657,3663]
                                    STRING [3664,3687]
                                        String: "actions/setup-node@v1" [3664,3687]
                                FIELD [3688,3716]
                                    String: "with" [3688,3694]
                                    OBJECT [3695,3716]
                                        FIELD [3696,3715]
                                            String: "node-version" [3696,3710]
                                            STRING [3711,3715]
                                                String: "16" [3711,3715]
                            OBJECT [3718,3772]
                                FIELD [3719,3748]
                                    String: "name" [3719,3725]
                                    STRING [3726,3748]
                                        String: "Install dependencies" [3726,3748]
                                FIELD [3749,3771]
                                    String: "run" [3749,3754]
                                    STRING [3755,3771]
                                        String: "yarn install\n" [3755,3771]
                            OBJECT [3773,3802]
                                FIELD [3774,3801]
                                    String: "run" [3774,3779]
                                    STRING [3780,3801]
                                        String: "yarn run lint:fix\n" [3780,3801]
                            OBJECT [3803,3836]
                                FIELD [3804,3835]
                                    String: "run" [3804,3809]
                                    STRING [3810,3835]
                                        String: "yarn run extract-i18n\n" [3810,3835]
                            OBJECT [3837,4036]
                                FIELD [3838,3857]
                                    String: "name" [3838,3844]
                                    STRING [3845,3857]
                                        String: "Check diff" [3845,3857]
                                FIELD [3858,3875]
                                    String: "id" [3858,3862]
                                    STRING [3863,3875]
                                        String: "check-diff" [3863,3875]
                                FIELD [3876,4035]
                                    String: "run" [3876,3881]
                                    STRING [3882,4035]
                                        String: "git diff --output=ui.diff\nhas_diff=$([[ -z \"$(cat ui.diff)\" ]] && echo \"false\" || echo \"true\")\necho \"::set-output name=has_diff::$has_diff\"\n" [3882,4035]
                            OBJECT [4037,4260]
                                FIELD [4038,4073]
                                    String: "uses" [4038,4044]
                                    STRING [4045,4073]
                                        String: "actions/upload-artifact@v3" [4045,4073]
                                FIELD [4074,4131]
                                    String: "if" [4074,4078]
                                    STRING [4079,4131]
                                        String: "${{ steps.check-diff.outputs.has_diff == 'true' }}" [4079,4131]
                                FIELD [4132,4259]
                                    String: "with" [4132,4138]
                                    OBJECT [4139,4259]
                                        FIELD [4140,4177]
                                            String: "name" [4140,4146]
                                            STRING [4147,4177]
                                                String: "ui.${{ github.run_id }}.diff" [4147,4177]
                                        FIELD [4178,4211]
                                            String: "path" [4178,4184]
                                            STRING [4185,4211]
                                                String: "mlflow/server/js/ui.diff" [4185,4211]
                                        FIELD [4212,4239]
                                            String: "if-no-files-found" [4212,4231]
                                            STRING [4232,4239]
                                                String: "error" [4232,4239]
                                        FIELD [4240,4258]
                                            String: "retention-days" [4240,4256]
                                            NUMBER [4257,4258]
                                                Number: 1 [4257,4258]
            FIELD [4263,5566]
                String: "apply-patches" [4263,4278]
                OBJECT [4279,5566]
                    FIELD [4280,4305]
                        String: "runs-on" [4280,4289]
                        STRING [4290,4305]
                            String: "ubuntu-latest" [4290,4305]
                    FIELD [4306,4358]
                        String: "needs" [4306,4313]
                        ARRAY [4314,4358]
                            STRING [4315,4330]
                                String: "check-comment" [4315,4330]
                            STRING [4331,4343]
                                String: "check-diff" [4331,4343]
                            STRING [4344,4352]
                                String: "python" [4344,4352]
                            STRING [4353,4357]
                                String: "ui" [4353,4357]
                    FIELD [4359,4532]
                        String: "if" [4359,4363]
                        STRING [4364,4532]
                            String: "always() &&\n(needs.python.result == 'success' && needs.python.outputs.has_diff == 'true') ||\n(needs.ui.result == 'success' && needs.ui.outputs.has_diff == 'true')\n" [4364,4532]
                    FIELD [4533,5565]
                        String: "steps" [4533,4540]
                        ARRAY [4541,5565]
                            OBJECT [4542,4738]
                                FIELD [4543,4571]
                                    String: "uses" [4543,4549]
                                    STRING [4550,4571]
                                        String: "actions/checkout@v3" [4550,4571]
                                FIELD [4572,4737]
                                    String: "with" [4572,4578]
                                    OBJECT [4579,4737]
                                        FIELD [4580,4640]
                                            String: "repository" [4580,4592]
                                            STRING [4593,4640]
                                                String: "${{ needs.check-comment.outputs.repository }}" [4593,4640]
                                        FIELD [4641,4687]
                                            String: "ref" [4641,4646]
                                            STRING [4647,4687]
                                                String: "${{ needs.check-comment.outputs.ref }}" [4647,4687]
                                        FIELD [4688,4736]
                                            String: "token" [4688,4695]
                                            STRING [4696,4736]
                                                String: "${{ secrets.MLFLOW_AUTOMATION_TOKEN }}" [4696,4736]
                            OBJECT [4739,4941]
                                FIELD [4740,4777]
                                    String: "uses" [4740,4746]
                                    STRING [4747,4777]
                                        String: "actions/download-artifact@v3" [4747,4777]
                                FIELD [4778,4867]
                                    String: "if" [4778,4782]
                                    STRING [4783,4867]
                                        String: "${{ needs.python.result == 'success' && needs.python.outputs.has_diff == 'true' }}" [4783,4867]
                                FIELD [4868,4940]
                                    String: "with" [4868,4874]
                                    OBJECT [4875,4940]
                                        FIELD [4876,4917]
                                            String: "name" [4876,4882]
                                            STRING [4883,4917]
                                                String: "python.${{ github.run_id }}.diff" [4883,4917]
                                        FIELD [4918,4939]
                                            String: "path" [4918,4924]
                                            STRING [4925,4939]
                                                String: "/tmp/patches" [4925,4939]
                            OBJECT [4942,5132]
                                FIELD [4943,4980]
                                    String: "uses" [4943,4949]
                                    STRING [4950,4980]
                                        String: "actions/download-artifact@v3" [4950,4980]
                                FIELD [4981,5062]
                                    String: "if" [4981,4985]
                                    STRING [4986,5062]
                                        String: "${{ needs.ui.result == 'success' && needs.ui.outputs.has_diff == 'true' }}" [4986,5062]
                                FIELD [5063,5131]
                                    String: "with" [5063,5069]
                                    OBJECT [5070,5131]
                                        FIELD [5071,5108]
                                            String: "name" [5071,5077]
                                            STRING [5078,5108]
                                                String: "ui.${{ github.run_id }}.diff" [5078,5108]
                                        FIELD [5109,5130]
                                            String: "path" [5109,5115]
                                            STRING [5116,5130]
                                                String: "/tmp/patches" [5116,5130]
                            OBJECT [5133,5258]
                                FIELD [5134,5156]
                                    String: "name" [5134,5140]
                                    STRING [5141,5156]
                                        String: "Apply patches" [5141,5156]
                                FIELD [5157,5257]
                                    String: "run" [5157,5162]
                                    STRING [5163,5257]
                                        String: "find /tmp/patches -maxdepth 1 -type f -name '*.diff' | xargs git apply --verbose\ngit diff\n" [5163,5257]
                            OBJECT [5259,5564]
                                FIELD [5260,5283]
                                    String: "name" [5260,5266]
                                    STRING [5267,5283]
                                        String: "Commit changes" [5267,5283]
                                FIELD [5284,5563]
                                    String: "run" [5284,5289]
                                    STRING [5290,5563]
                                        String: "git config --global user.name 'mlflow-automation'\ngit config --global user.email 'mlflow-automation@users.noreply.github.com'\nrun_url=\"https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}\"\ngit commit -sam \"Autoformat: $run_url\"\ngit push\n" [5290,5563]
            FIELD [5567,6143]
                String: "update-status" [5567,5582]
                OBJECT [5583,6143]
                    FIELD [5584,5609]
                        String: "runs-on" [5584,5593]
                        STRING [5594,5609]
                            String: "ubuntu-latest" [5594,5609]
                    FIELD [5610,5678]
                        String: "needs" [5610,5617]
                        ARRAY [5618,5678]
                            STRING [5619,5634]
                                String: "check-comment" [5619,5634]
                            STRING [5635,5647]
                                String: "check-diff" [5635,5647]
                            STRING [5648,5656]
                                String: "python" [5648,5656]
                            STRING [5657,5661]
                                String: "ui" [5657,5661]
                            STRING [5662,5677]
                                String: "apply-patches" [5662,5677]
                    FIELD [5679,5760]
                        String: "if" [5679,5683]
                        STRING [5684,5760]
                            String: "${{ always() && needs.check-comment.outputs.should_autoformat == 'true' }}" [5684,5760]
                    FIELD [5761,6142]
                        String: "steps" [5761,5768]
                        ARRAY [5769,6142]
                            OBJECT [5770,5800]
                                FIELD [5771,5799]
                                    String: "uses" [5771,5777]
                                    STRING [5778,5799]
                                        String: "actions/checkout@v3" [5778,5799]
                            OBJECT [5801,6141]
                                FIELD [5802,5824]
                                    String: "name" [5802,5808]
                                    STRING [5809,5824]
                                        String: "Update status" [5809,5824]
                                FIELD [5825,5858]
                                    String: "uses" [5825,5831]
                                    STRING [5832,5858]
                                        String: "actions/github-script@v4" [5832,5858]
                                FIELD [5859,6140]
                                    String: "with" [5859,5865]
                                    OBJECT [5866,6140]
                                        FIELD [5867,5911]
                                            String: "github-token" [5867,5881]
                                            STRING [5882,5911]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [5882,5911]
                                        FIELD [5912,6139]
                                            String: "script" [5912,5920]
                                            STRING [5921,6139]
                                                String: "const needs = ${{ toJson(needs) }};\nconst sha = '${{ needs.check-comment.outputs.sha }}'\nconst autoformat = require('./.github/workflows/autoformat.js');\nawait autoformat.updateStatus(context, github, sha, needs);" [5921,6139]