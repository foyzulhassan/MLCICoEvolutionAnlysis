OBJECT [0,2311]
    FIELD [1,18]
        String: "name" [1,7]
        STRING [8,18]
            String: "Doctests" [8,18]
    FIELD [19,120]
        String: "on" [19,23]
        OBJECT [24,120]
            FIELD [25,57]
                String: "push" [25,31]
                OBJECT [32,57]
                    FIELD [33,56]
                        String: "branches" [33,43]
                        ARRAY [44,56]
                            STRING [45,55]
                                String: "doctest*" [45,55]
            FIELD [58,84]
                String: "repository_dispatch" [58,79]
                NULL [80,84]
            FIELD [85,119]
                String: "schedule" [85,95]
                ARRAY [96,119]
                    OBJECT [97,118]
                        FIELD [98,117]
                            String: "cron" [98,104]
                            STRING [105,117]
                                String: "17 2 * * *" [105,117]
    FIELD [121,321]
        String: "env" [121,126]
        OBJECT [127,321]
            FIELD [128,150]
                String: "HF_HOME" [128,137]
                STRING [138,150]
                    String: "/mnt/cache" [138,150]
            FIELD [151,176]
                String: "TRANSFORMERS_IS_CI" [151,171]
                TRUE [172,176]
            FIELD [177,192]
                String: "RUN_SLOW" [177,187]
                TRUE [188,192]
            FIELD [193,213]
                String: "OMP_NUM_THREADS" [193,210]
                NUMBER [211,213]
                    Number: 16 [211,213]
            FIELD [214,234]
                String: "MKL_NUM_THREADS" [214,231]
                NUMBER [232,234]
                    Number: 16 [232,234]
            FIELD [235,287]
                String: "SIGOPT_API_TOKEN" [235,253]
                STRING [254,287]
                    String: "${{ secrets.SIGOPT_API_TOKEN }}" [254,287]
            FIELD [288,320]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [288,315]
                TRUE [316,320]
    FIELD [322,2310]
        String: "jobs" [322,328]
        OBJECT [329,2310]
            FIELD [330,1712]
                String: "run_doctests" [330,344]
                OBJECT [345,1712]
                    FIELD [346,387]
                        String: "runs-on" [346,355]
                        ARRAY [356,387]
                            STRING [357,370]
                                String: "self-hosted" [357,370]
                            STRING [371,386]
                                String: "doc-tests-gpu" [371,386]
                    FIELD [388,548]
                        String: "container" [388,399]
                        OBJECT [400,548]
                            FIELD [401,450]
                                String: "image" [401,408]
                                STRING [409,450]
                                    String: "huggingface/transformers-all-latest-gpu" [409,450]
                            FIELD [451,547]
                                String: "options" [451,460]
                                STRING [461,547]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [461,547]
                    FIELD [549,1711]
                        String: "steps" [549,556]
                        ARRAY [557,1711]
                            OBJECT [558,678]
                                FIELD [559,628]
                                    String: "name" [559,565]
                                    STRING [566,628]
                                        String: "uninstall transformers (installed during docker image build)" [566,628]
                                FIELD [629,677]
                                    String: "run" [629,634]
                                    STRING [635,677]
                                        String: "python3 -m pip uninstall -y transformers" [635,677]
                            OBJECT [679,709]
                                FIELD [680,708]
                                    String: "uses" [680,686]
                                    STRING [687,708]
                                        String: "actions/checkout@v3" [687,708]
                            OBJECT [710,752]
                                FIELD [711,730]
                                    String: "name" [711,717]
                                    STRING [718,730]
                                        String: "NVIDIA-SMI" [718,730]
                                FIELD [731,751]
                                    String: "run" [731,736]
                                    STRING [737,751]
                                        String: "nvidia-smi\n" [737,751]
                            OBJECT [753,839]
                                FIELD [754,796]
                                    String: "name" [754,760]
                                    STRING [761,796]
                                        String: "Install transformers in edit mode" [761,796]
                                FIELD [797,838]
                                    String: "run" [797,802]
                                    STRING [803,838]
                                        String: "python3 -m pip install -e .[flax]" [803,838]
                            OBJECT [840,902]
                                FIELD [841,864]
                                    String: "name" [841,847]
                                    STRING [848,864]
                                        String: "GPU visibility" [848,864]
                                FIELD [865,901]
                                    String: "run" [865,870]
                                    STRING [871,901]
                                        String: "python3 utils/print_env.py\n" [871,901]
                            OBJECT [903,976]
                                FIELD [904,956]
                                    String: "name" [904,910]
                                    STRING [911,956]
                                        String: "Show installed libraries and their versions" [911,956]
                                FIELD [957,975]
                                    String: "run" [957,962]
                                    STRING [963,975]
                                        String: "pip freeze" [963,975]
                            OBJECT [977,1219]
                                FIELD [978,1004]
                                    String: "name" [978,984]
                                    STRING [985,1004]
                                        String: "Get doctest files" [985,1004]
                                FIELD [1005,1218]
                                    String: "run" [1005,1010]
                                    STRING [1011,1218]
                                        String: "$(python3 -c 'from utils.tests_fetcher import get_all_doctest_files; to_test = get_all_doctest_files(); to_test = \" \".join(to_test); fp = open(\"doc_tests.txt\", \"w\"); fp.write(to_test); fp.close()')\n" [1011,1218]
                            OBJECT [1220,1400]
                                FIELD [1221,1242]
                                    String: "name" [1221,1227]
                                    STRING [1228,1242]
                                        String: "Run doctests" [1228,1242]
                                FIELD [1243,1399]
                                    String: "run" [1243,1248]
                                    STRING [1249,1399]
                                        String: "python3 -m pytest -v --make-reports doc_tests_gpu --doctest-modules $(cat doc_tests.txt) -sv --doctest-continue-on-failure --doctest-glob=\"*.md\"\n" [1249,1399]
                            OBJECT [1401,1535]
                                FIELD [1402,1432]
                                    String: "name" [1402,1408]
                                    STRING [1409,1432]
                                        String: "Failure short reports" [1409,1432]
                                FIELD [1433,1456]
                                    String: "if" [1433,1437]
                                    STRING [1438,1456]
                                        String: "${{ failure() }}" [1438,1456]
                                FIELD [1457,1481]
                                    String: "continue-on-error" [1457,1476]
                                    TRUE [1477,1481]
                                FIELD [1482,1534]
                                    String: "run" [1482,1487]
                                    STRING [1488,1534]
                                        String: "cat reports/doc_tests_gpu/failures_short.txt" [1488,1534]
                            OBJECT [1536,1710]
                                FIELD [1537,1574]
                                    String: "name" [1537,1543]
                                    STRING [1544,1574]
                                        String: "Test suite reports artifacts" [1544,1574]
                                FIELD [1575,1597]
                                    String: "if" [1575,1579]
                                    STRING [1580,1597]
                                        String: "${{ always() }}" [1580,1597]
                                FIELD [1598,1633]
                                    String: "uses" [1598,1604]
                                    STRING [1605,1633]
                                        String: "actions/upload-artifact@v3" [1605,1633]
                                FIELD [1634,1709]
                                    String: "with" [1634,1640]
                                    OBJECT [1641,1709]
                                        FIELD [1642,1677]
                                            String: "name" [1642,1648]
                                            STRING [1649,1677]
                                                String: "doc_tests_gpu_test_reports" [1649,1677]
                                        FIELD [1678,1708]
                                            String: "path" [1678,1684]
                                            STRING [1685,1708]
                                                String: "reports/doc_tests_gpu" [1685,1708]
            FIELD [1713,2309]
                String: "send_results" [1713,1727]
                OBJECT [1728,2309]
                    FIELD [1729,1761]
                        String: "name" [1729,1735]
                        STRING [1736,1761]
                            String: "Send results to webhook" [1736,1761]
                    FIELD [1762,1787]
                        String: "runs-on" [1762,1771]
                        STRING [1772,1787]
                            String: "ubuntu-latest" [1772,1787]
                    FIELD [1788,1803]
                        String: "if" [1788,1792]
                        STRING [1793,1803]
                            String: "always()" [1793,1803]
                    FIELD [1804,1828]
                        String: "needs" [1804,1811]
                        ARRAY [1812,1828]
                            STRING [1813,1827]
                                String: "run_doctests" [1813,1827]
                    FIELD [1829,2308]
                        String: "steps" [1829,1836]
                        ARRAY [1837,2308]
                            OBJECT [1838,1868]
                                FIELD [1839,1867]
                                    String: "uses" [1839,1845]
                                    STRING [1846,1867]
                                        String: "actions/checkout@v3" [1846,1867]
                            OBJECT [1869,1908]
                                FIELD [1870,1907]
                                    String: "uses" [1870,1876]
                                    STRING [1877,1907]
                                        String: "actions/download-artifact@v3" [1877,1907]
                            OBJECT [1909,2307]
                                FIELD [1910,1940]
                                    String: "name" [1910,1916]
                                    STRING [1917,1940]
                                        String: "Send message to Slack" [1917,1940]
                                FIELD [1941,2228]
                                    String: "env" [1941,1946]
                                    OBJECT [1947,2228]
                                        FIELD [1948,2004]
                                            String: "CI_SLACK_BOT_TOKEN" [1948,1968]
                                            STRING [1969,2004]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [1969,2004]
                                        FIELD [2005,2074]
                                            String: "CI_SLACK_CHANNEL_ID" [2005,2026]
                                            STRING [2027,2074]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY_DOCS }}" [2027,2074]
                                        FIELD [2075,2150]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [2075,2102]
                                            STRING [2103,2150]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY_DOCS }}" [2103,2150]
                                        FIELD [2151,2227]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [2151,2181]
                                            STRING [2182,2227]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [2182,2227]
                                FIELD [2229,2306]
                                    String: "run" [2229,2234]
                                    STRING [2235,2306]
                                        String: "pip install slack_sdk\npython utils/notification_service_doc_tests.py" [2235,2306]