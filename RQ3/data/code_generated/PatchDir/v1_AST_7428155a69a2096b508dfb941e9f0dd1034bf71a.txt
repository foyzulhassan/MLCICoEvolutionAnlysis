OBJECT [0,17643]
    FIELD [1,12]
        String: "name" [1,7]
        STRING [8,12]
            String: "CI" [8,12]
    FIELD [13,105]
        String: "concurrency" [13,26]
        OBJECT [27,105]
            FIELD [28,78]
                String: "group" [28,35]
                STRING [36,78]
                    String: "${{ github.workflow }}-${{ github.ref }}" [36,78]
            FIELD [79,104]
                String: "cancel-in-progress" [79,99]
                TRUE [100,104]
    FIELD [106,256]
        String: "on" [106,110]
        OBJECT [111,256]
            FIELD [112,148]
                String: "pull_request" [112,126]
                OBJECT [127,148]
                    FIELD [128,147]
                        String: "branches" [128,138]
                        ARRAY [139,147]
                            STRING [140,146]
                                String: "main" [140,146]
            FIELD [149,177]
                String: "push" [149,155]
                OBJECT [156,177]
                    FIELD [157,176]
                        String: "branches" [157,167]
                        ARRAY [168,176]
                            STRING [169,175]
                                String: "main" [169,175]
            FIELD [178,211]
                String: "release" [178,187]
                OBJECT [188,211]
                    FIELD [189,210]
                        String: "types" [189,196]
                        ARRAY [197,210]
                            STRING [198,209]
                                String: "published" [198,209]
            FIELD [212,255]
                String: "schedule" [212,222]
                ARRAY [223,255]
                    OBJECT [224,254]
                        FIELD [225,253]
                            String: "cron" [225,231]
                            STRING [232,253]
                                String: "37 11 * * 1,2,3,4,5" [232,253]
    FIELD [257,395]
        String: "env" [257,262]
        OBJECT [263,395]
            FIELD [264,287]
                String: "TORCH_VERSION" [264,279]
                STRING [280,287]
                    String: "1.9.0" [280,287]
            FIELD [288,319]
                String: "TORCH_VISION_VERSION" [288,310]
                STRING [311,319]
                    String: "0.10.0" [311,319]
            FIELD [320,339]
                String: "CACHE_PREFIX" [320,334]
                STRING [335,339]
                    String: "v0" [335,339]
            FIELD [340,372]
                String: "TOKENIZERS_PARALLELISM" [340,364]
                STRING [365,372]
                    String: "false" [365,372]
            FIELD [373,394]
                String: "OMP_NUM_THREADS" [373,390]
                STRING [391,394]
                    String: "1" [391,394]
    FIELD [396,17642]
        String: "jobs" [396,402]
        OBJECT [403,17642]
            FIELD [404,1148]
                String: "changelog" [404,415]
                OBJECT [416,1148]
                    FIELD [417,435]
                        String: "name" [417,423]
                        STRING [424,435]
                            String: "CHANGELOG" [424,435]
                    FIELD [436,461]
                        String: "runs-on" [436,445]
                        STRING [446,461]
                            String: "ubuntu-latest" [446,461]
                    FIELD [462,504]
                        String: "if" [462,466]
                        STRING [467,504]
                            String: "github.event_name == 'pull_request'" [467,504]
                    FIELD [505,1147]
                        String: "steps" [505,512]
                        ARRAY [513,1147]
                            OBJECT [514,544]
                                FIELD [515,543]
                                    String: "uses" [515,521]
                                    STRING [522,543]
                                        String: "actions/checkout@v1" [522,543]
                            OBJECT [545,791]
                                FIELD [546,589]
                                    String: "name" [546,552]
                                    STRING [553,589]
                                        String: "Check if source files have changed" [553,589]
                                FIELD [590,790]
                                    String: "run" [590,595]
                                    STRING [596,790]
                                        String: "git diff --name-only $(git merge-base origin/main HEAD) | grep '^allennlp/.*\\.py$' && echo \"source_files_changed=true\" >> $GITHUB_ENV || echo \"source_files_changed=false\" >> $GITHUB_ENV\n" [596,790]
                            OBJECT [792,1146]
                                FIELD [793,839]
                                    String: "name" [793,799]
                                    STRING [800,839]
                                        String: "Check that CHANGELOG has been updated" [800,839]
                                FIELD [840,881]
                                    String: "if" [840,844]
                                    STRING [845,881]
                                        String: "env.source_files_changed == 'true'" [845,881]
                                FIELD [882,1145]
                                    String: "run" [882,887]
                                    STRING [888,1145]
                                        String: "# If this step fails, this means you haven't updated the CHANGELOG.md\n# file with notes on your contribution.\ngit diff --name-only $(git merge-base origin/main HEAD) | grep '^CHANGELOG.md$' && echo \"Thanks for helping keep our CHANGELOG up-to-date!\"\n" [888,1145]
            FIELD [1149,1517]
                String: "style" [1149,1156]
                OBJECT [1157,1517]
                    FIELD [1158,1172]
                        String: "name" [1158,1164]
                        STRING [1165,1172]
                            String: "Style" [1165,1172]
                    FIELD [1173,1198]
                        String: "runs-on" [1173,1182]
                        STRING [1183,1198]
                            String: "ubuntu-latest" [1183,1198]
                    FIELD [1199,1516]
                        String: "steps" [1199,1206]
                        ARRAY [1207,1516]
                            OBJECT [1208,1238]
                                FIELD [1209,1237]
                                    String: "uses" [1209,1215]
                                    STRING [1216,1237]
                                        String: "actions/checkout@v2" [1216,1237]
                            OBJECT [1239,1325]
                                FIELD [1240,1261]
                                    String: "name" [1240,1246]
                                    STRING [1247,1261]
                                        String: "Setup Python" [1247,1261]
                                FIELD [1262,1294]
                                    String: "uses" [1262,1268]
                                    STRING [1269,1294]
                                        String: "actions/setup-python@v2" [1269,1294]
                                FIELD [1295,1324]
                                    String: "with" [1295,1301]
                                    OBJECT [1302,1324]
                                        FIELD [1303,1323]
                                            String: "python-version" [1303,1319]
                                            NUMBER [1320,1323]
                                                Number: 3.8 [1320,1323]
                            OBJECT [1326,1425]
                                FIELD [1327,1356]
                                    String: "name" [1327,1333]
                                    STRING [1334,1356]
                                        String: "Install requirements" [1334,1356]
                                FIELD [1357,1424]
                                    String: "run" [1357,1362]
                                    STRING [1363,1424]
                                        String: "grep -E '^black' dev-requirements.txt | xargs pip install\n" [1363,1424]
                            OBJECT [1426,1468]
                                FIELD [1427,1446]
                                    String: "name" [1427,1433]
                                    STRING [1434,1446]
                                        String: "Debug info" [1434,1446]
                                FIELD [1447,1467]
                                    String: "run" [1447,1452]
                                    STRING [1453,1467]
                                        String: "pip freeze\n" [1453,1467]
                            OBJECT [1469,1515]
                                FIELD [1470,1488]
                                    String: "name" [1470,1476]
                                    STRING [1477,1488]
                                        String: "Run black" [1477,1488]
                                FIELD [1489,1514]
                                    String: "run" [1489,1494]
                                    STRING [1495,1514]
                                        String: "black --check .\n" [1495,1514]
            FIELD [1518,5016]
                String: "checks" [1518,1526]
                OBJECT [1527,5016]
                    FIELD [1528,1560]
                        String: "name" [1528,1534]
                        STRING [1535,1560]
                            String: "${{ matrix.task.name }}" [1535,1560]
                    FIELD [1561,1599]
                        String: "runs-on" [1561,1570]
                        STRING [1571,1599]
                            String: "${{ matrix.task.runs_on }}" [1571,1599]
                    FIELD [1600,1620]
                        String: "timeout-minutes" [1600,1617]
                        NUMBER [1618,1620]
                            Number: 20 [1618,1620]
                    FIELD [1621,2211]
                        String: "strategy" [1621,1631]
                        OBJECT [1632,2211]
                            FIELD [1633,1650]
                                String: "fail-fast" [1633,1644]
                                FALSE [1645,1650]
                            FIELD [1651,2210]
                                String: "matrix" [1651,1659]
                                OBJECT [1660,2210]
                                    FIELD [1661,2209]
                                        String: "task" [1661,1667]
                                        ARRAY [1668,2209]
                                            OBJECT [1669,1795]
                                                FIELD [1670,1683]
                                                    String: "name" [1670,1676]
                                                    STRING [1677,1683]
                                                        String: "Lint" [1677,1683]
                                                FIELD [1684,1709]
                                                    String: "runs_on" [1684,1693]
                                                    STRING [1694,1709]
                                                        String: "ubuntu-latest" [1694,1709]
                                                FIELD [1710,1733]
                                                    String: "coverage_report" [1710,1727]
                                                    FALSE [1728,1733]
                                                FIELD [1734,1756]
                                                    String: "torch_platform" [1734,1750]
                                                    STRING [1751,1756]
                                                        String: "cpu" [1751,1756]
                                                FIELD [1757,1794]
                                                    String: "run" [1757,1762]
                                                    STRING [1763,1794]
                                                        String: "make flake8\nmake typecheck\n" [1763,1794]
                                            OBJECT [1796,1906]
                                                FIELD [1797,1815]
                                                    String: "name" [1797,1803]
                                                    STRING [1804,1815]
                                                        String: "CPU Tests" [1804,1815]
                                                FIELD [1816,1841]
                                                    String: "runs_on" [1816,1825]
                                                    STRING [1826,1841]
                                                        String: "ubuntu-latest" [1826,1841]
                                                FIELD [1842,1864]
                                                    String: "coverage_report" [1842,1859]
                                                    TRUE [1860,1864]
                                                FIELD [1865,1887]
                                                    String: "torch_platform" [1865,1881]
                                                    STRING [1882,1887]
                                                        String: "cpu" [1882,1887]
                                                FIELD [1888,1905]
                                                    String: "run" [1888,1893]
                                                    STRING [1894,1905]
                                                        String: "make test" [1894,1905]
                                            OBJECT [1907,2030]
                                                FIELD [1908,1926]
                                                    String: "name" [1908,1914]
                                                    STRING [1915,1926]
                                                        String: "GPU Tests" [1915,1926]
                                                FIELD [1927,1958]
                                                    String: "runs_on" [1927,1936]
                                                    ARRAY [1937,1958]
                                                        STRING [1938,1951]
                                                            String: "self-hosted" [1938,1951]
                                                        STRING [1952,1957]
                                                            String: "GPU" [1952,1957]
                                                FIELD [1959,1981]
                                                    String: "coverage_report" [1959,1976]
                                                    TRUE [1977,1981]
                                                FIELD [1982,2006]
                                                    String: "torch_platform" [1982,1998]
                                                    STRING [1999,2006]
                                                        String: "cu111" [1999,2006]
                                                FIELD [2007,2029]
                                                    String: "run" [2007,2012]
                                                    STRING [2013,2029]
                                                        String: "make gpu-tests" [2013,2029]
                                            OBJECT [2031,2208]
                                                FIELD [2032,2052]
                                                    String: "name" [2032,2038]
                                                    STRING [2039,2052]
                                                        String: "Model Tests" [2039,2052]
                                                FIELD [2053,2078]
                                                    String: "runs_on" [2053,2062]
                                                    STRING [2063,2078]
                                                        String: "ubuntu-latest" [2063,2078]
                                                FIELD [2079,2101]
                                                    String: "coverage_report" [2079,2096]
                                                    TRUE [2097,2101]
                                                FIELD [2102,2124]
                                                    String: "torch_platform" [2102,2118]
                                                    STRING [2119,2124]
                                                        String: "cpu" [2119,2124]
                                                FIELD [2125,2207]
                                                    String: "run" [2125,2130]
                                                    STRING [2131,2207]
                                                        String: "cd allennlp-models\nmake test-with-cov COV=allennlp\nmv coverage.xml ../\n" [2131,2207]
                    FIELD [2212,5015]
                        String: "steps" [2212,2219]
                        ARRAY [2220,5015]
                            OBJECT [2221,2251]
                                FIELD [2222,2250]
                                    String: "uses" [2222,2228]
                                    STRING [2229,2250]
                                        String: "actions/checkout@v2" [2229,2250]
                            OBJECT [2252,2374]
                                FIELD [2253,2274]
                                    String: "name" [2253,2259]
                                    STRING [2260,2274]
                                        String: "Setup Python" [2260,2274]
                                FIELD [2275,2307]
                                    String: "uses" [2275,2281]
                                    STRING [2282,2307]
                                        String: "actions/setup-python@v2" [2282,2307]
                                FIELD [2308,2343]
                                    String: "env" [2308,2313]
                                    OBJECT [2314,2343]
                                        FIELD [2315,2342]
                                            String: "ACTIONS_STEP_DEBUG" [2315,2335]
                                            STRING [2336,2342]
                                                String: "true" [2336,2342]
                                FIELD [2344,2373]
                                    String: "with" [2344,2350]
                                    OBJECT [2351,2373]
                                        FIELD [2352,2372]
                                            String: "python-version" [2352,2368]
                                            NUMBER [2369,2372]
                                                Number: 3.8 [2369,2372]
                            OBJECT [2375,2471]
                                FIELD [2376,2406]
                                    String: "name" [2376,2382]
                                    STRING [2383,2406]
                                        String: "Install prerequisites" [2383,2406]
                                FIELD [2407,2470]
                                    String: "run" [2407,2412]
                                    STRING [2413,2470]
                                        String: "pip install --upgrade pip setuptools wheel virtualenv\n" [2413,2470]
                            OBJECT [2472,2809]
                                FIELD [2473,2501]
                                    String: "name" [2473,2479]
                                    STRING [2480,2501]
                                        String: "Set build variables" [2480,2501]
                                FIELD [2502,2516]
                                    String: "shell" [2502,2509]
                                    STRING [2510,2516]
                                        String: "bash" [2510,2516]
                                FIELD [2517,2808]
                                    String: "run" [2517,2522]
                                    STRING [2523,2808]
                                        String: "# Get the exact Python version to use in the cache key.\necho \"PYTHON_VERSION=$(python --version)\" >> $GITHUB_ENV\necho \"RUNNER_ARCH=$(uname -m)\" >> $GITHUB_ENV\n# Use week number in cache key so we can refresh the cache weekly.\necho \"WEEK_NUMBER=$(date +%V)\" >> $GITHUB_ENV\n" [2523,2808]
                            OBJECT [2810,3277]
                                FIELD [2811,2836]
                                    String: "uses" [2811,2817]
                                    STRING [2818,2836]
                                        String: "actions/cache@v2" [2818,2836]
                                FIELD [2837,2860]
                                    String: "id" [2837,2841]
                                    STRING [2842,2860]
                                        String: "virtualenv-cache" [2842,2860]
                                FIELD [2861,3276]
                                    String: "with" [2861,2867]
                                    OBJECT [2868,3276]
                                        FIELD [2869,2883]
                                            String: "path" [2869,2875]
                                            STRING [2876,2883]
                                                String: ".venv" [2876,2883]
                                        FIELD [2884,3108]
                                            String: "key" [2884,2889]
                                            STRING [2890,3108]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-${{ matrix.task.torch_platform }}-${{ hashFiles('setup.py') }}-${{ hashFiles('dev-requirements.txt') }}" [2890,3108]
                                        FIELD [3109,3275]
                                            String: "restore-keys" [3109,3123]
                                            STRING [3124,3275]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-${{ matrix.task.torch_platform }}-\n" [3124,3275]
                            OBJECT [3278,3713]
                                FIELD [3279,3328]
                                    String: "name" [3279,3285]
                                    STRING [3286,3328]
                                        String: "Setup virtual environment (no cache hit)" [3286,3328]
                                FIELD [3329,3386]
                                    String: "if" [3329,3333]
                                    STRING [3334,3386]
                                        String: "steps.virtualenv-cache.outputs.cache-hit != 'true'" [3334,3386]
                                FIELD [3387,3712]
                                    String: "run" [3387,3392]
                                    STRING [3393,3712]
                                        String: "test -d .venv || virtualenv -p $(which python) --copies --reset-app-data .venv\n. .venv/bin/activate\nmake install TORCH_VERSION=\"torch==${TORCH_VERSION}+${{ matrix.task.torch_platform }} torchvision==${TORCH_VISION_VERSION}+${{ matrix.task.torch_platform }} -f https://download.pytorch.org/whl/torch_stable.html\"\n" [3393,3712]
                            OBJECT [3714,3901]
                                FIELD [3715,3761]
                                    String: "name" [3715,3721]
                                    STRING [3722,3761]
                                        String: "Setup virtual environment (cache hit)" [3722,3761]
                                FIELD [3762,3819]
                                    String: "if" [3762,3766]
                                    STRING [3767,3819]
                                        String: "steps.virtualenv-cache.outputs.cache-hit == 'true'" [3767,3819]
                                FIELD [3820,3900]
                                    String: "run" [3820,3825]
                                    STRING [3826,3900]
                                        String: ". .venv/bin/activate\npip install --no-deps -e .\nmake download-extras\n" [3826,3900]
                            OBJECT [3902,4207]
                                FIELD [3903,3940]
                                    String: "name" [3903,3909]
                                    STRING [3910,3940]
                                        String: "Pull and install models repo" [3910,3940]
                                FIELD [3941,3981]
                                    String: "if" [3941,3945]
                                    STRING [3946,3981]
                                        String: "matrix.task.name == 'Model Tests'" [3946,3981]
                                FIELD [3982,4020]
                                    String: "env" [3982,3987]
                                    OBJECT [3988,4020]
                                        FIELD [3989,4019]
                                            String: "ALLENNLP_VERSION_OVERRIDE" [3989,4016]
                                            STRING [4017,4019]
                                                String: "" [4017,4019]
                                FIELD [4021,4206]
                                    String: "run" [4021,4026]
                                    STRING [4027,4206]
                                        String: ". .venv/bin/activate\ngit clone https://github.com/allenai/allennlp-models.git\ncd allennlp-models\npip install --upgrade --upgrade-strategy eager -e . -r dev-requirements.txt\n" [4027,4206]
                            OBJECT [4208,4286]
                                FIELD [4209,4228]
                                    String: "name" [4209,4215]
                                    STRING [4216,4228]
                                        String: "Debug info" [4216,4228]
                                FIELD [4229,4285]
                                    String: "run" [4229,4234]
                                    STRING [4235,4285]
                                        String: ". .venv/bin/activate\nwhich python\npip freeze\n" [4235,4285]
                            OBJECT [4287,4391]
                                FIELD [4288,4320]
                                    String: "name" [4288,4294]
                                    STRING [4295,4320]
                                        String: "Ensure torch up-to-date" [4295,4320]
                                FIELD [4321,4390]
                                    String: "run" [4321,4326]
                                    STRING [4327,4390]
                                        String: ". .venv/bin/activate\npython scripts/check_torch_version.py\n" [4327,4390]
                            OBJECT [4392,4481]
                                FIELD [4393,4425]
                                    String: "name" [4393,4399]
                                    STRING [4400,4425]
                                        String: "${{ matrix.task.name }}" [4400,4425]
                                FIELD [4426,4480]
                                    String: "run" [4426,4431]
                                    STRING [4432,4480]
                                        String: ". .venv/bin/activate\n${{ matrix.task.run }}\n" [4432,4480]
                            OBJECT [4482,4603]
                                FIELD [4483,4515]
                                    String: "name" [4483,4489]
                                    STRING [4490,4515]
                                        String: "Prepare coverage report" [4490,4515]
                                FIELD [4516,4550]
                                    String: "if" [4516,4520]
                                    STRING [4521,4550]
                                        String: "matrix.task.coverage_report" [4521,4550]
                                FIELD [4551,4602]
                                    String: "run" [4551,4556]
                                    STRING [4557,4602]
                                        String: "mkdir coverage\nmv coverage.xml coverage/\n" [4557,4602]
                            OBJECT [4604,4777]
                                FIELD [4605,4634]
                                    String: "name" [4605,4611]
                                    STRING [4612,4634]
                                        String: "Save coverage report" [4612,4634]
                                FIELD [4635,4669]
                                    String: "if" [4635,4639]
                                    STRING [4640,4669]
                                        String: "matrix.task.coverage_report" [4640,4669]
                                FIELD [4670,4705]
                                    String: "uses" [4670,4676]
                                    STRING [4677,4705]
                                        String: "actions/upload-artifact@v1" [4677,4705]
                                FIELD [4706,4776]
                                    String: "with" [4706,4712]
                                    OBJECT [4713,4776]
                                        FIELD [4714,4755]
                                            String: "name" [4714,4720]
                                            STRING [4721,4755]
                                                String: "${{ matrix.task.name }}-coverage" [4721,4755]
                                        FIELD [4756,4775]
                                            String: "path" [4756,4762]
                                            STRING [4763,4775]
                                                String: "./coverage" [4763,4775]
                            OBJECT [4778,5014]
                                FIELD [4779,4796]
                                    String: "name" [4779,4785]
                                    STRING [4786,4796]
                                        String: "Clean up" [4786,4796]
                                FIELD [4797,4812]
                                    String: "if" [4797,4801]
                                    STRING [4802,4812]
                                        String: "always()" [4802,4812]
                                FIELD [4813,5013]
                                    String: "run" [4813,4818]
                                    STRING [4819,5013]
                                        String: "# Could run into issues with the cache if we don't uninstall the editable.\n# See https://github.com/pypa/pip/issues/4537.\n. .venv/bin/activate\npip uninstall --yes allennlp allennlp-models\n" [4819,5013]
            FIELD [5017,5976]
                String: "upload_coverage" [5017,5034]
                OBJECT [5035,5976]
                    FIELD [5036,5067]
                        String: "name" [5036,5042]
                        STRING [5043,5067]
                            String: "Upload Coverage Report" [5043,5067]
                    FIELD [5068,5087]
                        String: "timeout-minutes" [5068,5085]
                        NUMBER [5086,5087]
                            Number: 5 [5086,5087]
                    FIELD [5088,5206]
                        String: "if" [5088,5092]
                        STRING [5093,5206]
                            String: "github.repository == 'allenai/allennlp' && (github.event_name == 'push' || github.event_name == 'pull_request')" [5093,5206]
                    FIELD [5207,5232]
                        String: "runs-on" [5207,5216]
                        STRING [5217,5232]
                            String: "ubuntu-latest" [5217,5232]
                    FIELD [5233,5251]
                        String: "needs" [5233,5240]
                        ARRAY [5241,5251]
                            STRING [5242,5250]
                                String: "checks" [5242,5250]
                    FIELD [5252,5975]
                        String: "steps" [5252,5259]
                        ARRAY [5260,5975]
                            OBJECT [5261,5291]
                                FIELD [5262,5290]
                                    String: "uses" [5262,5268]
                                    STRING [5269,5290]
                                        String: "actions/checkout@v2" [5269,5290]
                            OBJECT [5292,5445]
                                FIELD [5293,5341]
                                    String: "name" [5293,5299]
                                    STRING [5300,5341]
                                        String: "Download coverage report from CPU tests" [5300,5341]
                                FIELD [5342,5379]
                                    String: "uses" [5342,5348]
                                    STRING [5349,5379]
                                        String: "actions/download-artifact@v1" [5349,5379]
                                FIELD [5380,5444]
                                    String: "with" [5380,5386]
                                    OBJECT [5387,5444]
                                        FIELD [5388,5415]
                                            String: "name" [5388,5394]
                                            STRING [5395,5415]
                                                String: "CPU Tests-coverage" [5395,5415]
                                        FIELD [5416,5443]
                                            String: "path" [5416,5422]
                                            STRING [5423,5443]
                                                String: "coverage/cpu_tests" [5423,5443]
                            OBJECT [5446,5599]
                                FIELD [5447,5495]
                                    String: "name" [5447,5453]
                                    STRING [5454,5495]
                                        String: "Download coverage report from GPU Tests" [5454,5495]
                                FIELD [5496,5533]
                                    String: "uses" [5496,5502]
                                    STRING [5503,5533]
                                        String: "actions/download-artifact@v1" [5503,5533]
                                FIELD [5534,5598]
                                    String: "with" [5534,5540]
                                    OBJECT [5541,5598]
                                        FIELD [5542,5569]
                                            String: "name" [5542,5548]
                                            STRING [5549,5569]
                                                String: "GPU Tests-coverage" [5549,5569]
                                        FIELD [5570,5597]
                                            String: "path" [5570,5576]
                                            STRING [5577,5597]
                                                String: "coverage/gpu_tests" [5577,5597]
                            OBJECT [5600,5759]
                                FIELD [5601,5651]
                                    String: "name" [5601,5607]
                                    STRING [5608,5651]
                                        String: "Download coverage report from model tests" [5608,5651]
                                FIELD [5652,5689]
                                    String: "uses" [5652,5658]
                                    STRING [5659,5689]
                                        String: "actions/download-artifact@v1" [5659,5689]
                                FIELD [5690,5758]
                                    String: "with" [5690,5696]
                                    OBJECT [5697,5758]
                                        FIELD [5698,5727]
                                            String: "name" [5698,5704]
                                            STRING [5705,5727]
                                                String: "Model Tests-coverage" [5705,5727]
                                        FIELD [5728,5757]
                                            String: "path" [5728,5734]
                                            STRING [5735,5757]
                                                String: "coverage/model_tests" [5735,5757]
                            OBJECT [5760,5974]
                                FIELD [5761,5796]
                                    String: "name" [5761,5767]
                                    STRING [5768,5796]
                                        String: "Upload coverage to Codecov" [5768,5796]
                                FIELD [5797,5831]
                                    String: "uses" [5797,5803]
                                    STRING [5804,5831]
                                        String: "codecov/codecov-action@v1" [5804,5831]
                                FIELD [5832,5973]
                                    String: "with" [5832,5838]
                                    OBJECT [5839,5973]
                                        FIELD [5840,5947]
                                            String: "files" [5840,5847]
                                            STRING [5848,5947]
                                                String: "coverage/cpu_tests/coverage.xml,coverage/gpu_tests/coverage.xml,coverage/model_tests/coverage.xml" [5848,5947]
                                        FIELD [5948,5972]
                                            String: "fail_ci_if_error" [5948,5966]
                                            FALSE [5967,5972]
            FIELD [5977,8988]
                String: "build_package" [5977,5992]
                OBJECT [5993,8988]
                    FIELD [5994,6016]
                        String: "name" [5994,6000]
                        STRING [6001,6016]
                            String: "Build Package" [6001,6016]
                    FIELD [6017,6037]
                        String: "timeout-minutes" [6017,6034]
                        NUMBER [6035,6037]
                            Number: 18 [6035,6037]
                    FIELD [6038,6063]
                        String: "runs-on" [6038,6047]
                        STRING [6048,6063]
                            String: "ubuntu-latest" [6048,6063]
                    FIELD [6064,8987]
                        String: "steps" [6064,6071]
                        ARRAY [6072,8987]
                            OBJECT [6073,6103]
                                FIELD [6074,6102]
                                    String: "uses" [6074,6080]
                                    STRING [6081,6102]
                                        String: "actions/checkout@v2" [6081,6102]
                            OBJECT [6104,6226]
                                FIELD [6105,6126]
                                    String: "name" [6105,6111]
                                    STRING [6112,6126]
                                        String: "Setup Python" [6112,6126]
                                FIELD [6127,6159]
                                    String: "uses" [6127,6133]
                                    STRING [6134,6159]
                                        String: "actions/setup-python@v2" [6134,6159]
                                FIELD [6160,6195]
                                    String: "env" [6160,6165]
                                    OBJECT [6166,6195]
                                        FIELD [6167,6194]
                                            String: "ACTIONS_STEP_DEBUG" [6167,6187]
                                            STRING [6188,6194]
                                                String: "true" [6188,6194]
                                FIELD [6196,6225]
                                    String: "with" [6196,6202]
                                    OBJECT [6203,6225]
                                        FIELD [6204,6224]
                                            String: "python-version" [6204,6220]
                                            NUMBER [6221,6224]
                                                Number: 3.8 [6221,6224]
                            OBJECT [6227,6323]
                                FIELD [6228,6258]
                                    String: "name" [6228,6234]
                                    STRING [6235,6258]
                                        String: "Install prerequisites" [6235,6258]
                                FIELD [6259,6322]
                                    String: "run" [6259,6264]
                                    STRING [6265,6322]
                                        String: "pip install --upgrade pip setuptools wheel virtualenv\n" [6265,6322]
                            OBJECT [6324,6536]
                                FIELD [6325,6353]
                                    String: "name" [6325,6331]
                                    STRING [6332,6353]
                                        String: "Set build variables" [6332,6353]
                                FIELD [6354,6368]
                                    String: "shell" [6354,6361]
                                    STRING [6362,6368]
                                        String: "bash" [6362,6368]
                                FIELD [6369,6535]
                                    String: "run" [6369,6374]
                                    STRING [6375,6535]
                                        String: "echo \"PYTHON_VERSION=$(python --version)\" >> $GITHUB_ENV\necho \"RUNNER_ARCH=$(uname -m)\" >> $GITHUB_ENV\necho \"WEEK_NUMBER=$(date +%V)\" >> $GITHUB_ENV\n" [6375,6535]
                            OBJECT [6537,6944]
                                FIELD [6538,6563]
                                    String: "uses" [6538,6544]
                                    STRING [6545,6563]
                                        String: "actions/cache@v2" [6545,6563]
                                FIELD [6564,6587]
                                    String: "id" [6564,6568]
                                    STRING [6569,6587]
                                        String: "virtualenv-cache" [6569,6587]
                                FIELD [6588,6943]
                                    String: "with" [6588,6594]
                                    OBJECT [6595,6943]
                                        FIELD [6596,6610]
                                            String: "path" [6596,6602]
                                            STRING [6603,6610]
                                                String: ".venv" [6603,6610]
                                        FIELD [6611,6805]
                                            String: "key" [6611,6616]
                                            STRING [6617,6805]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-cpu-${{ hashFiles('setup.py') }}-${{ hashFiles('dev-requirements.txt') }}" [6617,6805]
                                        FIELD [6806,6942]
                                            String: "restore-keys" [6806,6820]
                                            STRING [6821,6942]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-cpu-\n" [6821,6942]
                            OBJECT [6945,7320]
                                FIELD [6946,6995]
                                    String: "name" [6946,6952]
                                    STRING [6953,6995]
                                        String: "Setup virtual environment (no cache hit)" [6953,6995]
                                FIELD [6996,7053]
                                    String: "if" [6996,7000]
                                    STRING [7001,7053]
                                        String: "steps.virtualenv-cache.outputs.cache-hit != 'true'" [7001,7053]
                                FIELD [7054,7319]
                                    String: "run" [7054,7059]
                                    STRING [7060,7319]
                                        String: "test -d .venv || virtualenv -p $(which python) --copies --reset-app-data .venv\n. .venv/bin/activate\nmake install TORCH_VERSION=\"torch==${TORCH_VERSION}+cpu torchvision==${TORCH_VISION_VERSION}+cpu -f https://download.pytorch.org/whl/torch_stable.html\"\n" [7060,7319]
                            OBJECT [7321,7508]
                                FIELD [7322,7368]
                                    String: "name" [7322,7328]
                                    STRING [7329,7368]
                                        String: "Setup virtual environment (cache hit)" [7329,7368]
                                FIELD [7369,7426]
                                    String: "if" [7369,7373]
                                    STRING [7374,7426]
                                        String: "steps.virtualenv-cache.outputs.cache-hit == 'true'" [7374,7426]
                                FIELD [7427,7507]
                                    String: "run" [7427,7432]
                                    STRING [7433,7507]
                                        String: ". .venv/bin/activate\npip install --no-deps -e .\nmake download-extras\n" [7433,7507]
                            OBJECT [7509,7587]
                                FIELD [7510,7529]
                                    String: "name" [7510,7516]
                                    STRING [7517,7529]
                                        String: "Debug info" [7517,7529]
                                FIELD [7530,7586]
                                    String: "run" [7530,7535]
                                    STRING [7536,7586]
                                        String: ". .venv/bin/activate\nwhich python\npip freeze\n" [7536,7586]
                            OBJECT [7588,8247]
                                FIELD [7589,7627]
                                    String: "name" [7589,7595]
                                    STRING [7596,7627]
                                        String: "Check and set nightly version" [7596,7627]
                                FIELD [7628,7666]
                                    String: "if" [7628,7632]
                                    STRING [7633,7666]
                                        String: "github.event_name == 'schedule'" [7633,7666]
                                FIELD [7667,8246]
                                    String: "run" [7667,7672]
                                    STRING [7673,8246]
                                        String: "# Verify that current version is ahead of the last release.\n. .venv/bin/activate\nLATEST=$(scripts/get_version.py latest)\nCURRENT=$(scripts/get_version.py current)\nif [ \"$CURRENT\" == \"$LATEST\" ]; then\n    echo \"Current version needs to be ahead of latest release in order to build nightly release\";\n    exit 1;\nfi\n# This is somewhat bizarre, but you can't set env variables to bash\n# commands in the action workflow - so we have to use this odd way of\n# exporting a variable instead.\necho \"ALLENNLP_VERSION_SUFFIX=dev$(date -u +%Y%m%d)\" >> $GITHUB_ENV\n" [7673,8246]
                            OBJECT [8248,8624]
                                FIELD [8249,8293]
                                    String: "name" [8249,8255]
                                    STRING [8256,8293]
                                        String: "Check version and release tag match" [8256,8293]
                                FIELD [8294,8331]
                                    String: "if" [8294,8298]
                                    STRING [8299,8331]
                                        String: "github.event_name == 'release'" [8299,8331]
                                FIELD [8332,8623]
                                    String: "run" [8332,8337]
                                    STRING [8338,8623]
                                        String: "# Remove 'refs/tags/' to get the actual tag from the release.\n. .venv/bin/activate\nTAG=${GITHUB_REF#refs/tags/};\nVERSION=$(scripts/get_version.py current)\nif [ \"$TAG\" != \"$VERSION\" ]; then\n    echo \"Bad tag or version. Tag $TAG does not match $VERSION\";\n    exit 1;\nfi\n" [8338,8623]
                            OBJECT [8625,8779]
                                FIELD [8626,8653]
                                    String: "name" [8626,8632]
                                    STRING [8633,8653]
                                        String: "Build core package" [8633,8653]
                                FIELD [8654,8778]
                                    String: "run" [8654,8659]
                                    STRING [8660,8778]
                                        String: "# Just print out the version for debugging.\n. .venv/bin/activate\nmake version\npython setup.py bdist_wheel sdist\n" [8660,8778]
                            OBJECT [8780,8889]
                                FIELD [8781,8807]
                                    String: "name" [8781,8787]
                                    STRING [8788,8807]
                                        String: "Save core package" [8788,8807]
                                FIELD [8808,8843]
                                    String: "uses" [8808,8814]
                                    STRING [8815,8843]
                                        String: "actions/upload-artifact@v1" [8815,8843]
                                FIELD [8844,8888]
                                    String: "with" [8844,8850]
                                    OBJECT [8851,8888]
                                        FIELD [8852,8873]
                                            String: "name" [8852,8858]
                                            STRING [8859,8873]
                                                String: "core-package" [8859,8873]
                                        FIELD [8874,8887]
                                            String: "path" [8874,8880]
                                            STRING [8881,8887]
                                                String: "dist" [8881,8887]
                            OBJECT [8890,8986]
                                FIELD [8891,8908]
                                    String: "name" [8891,8897]
                                    STRING [8898,8908]
                                        String: "Clean up" [8898,8908]
                                FIELD [8909,8924]
                                    String: "if" [8909,8913]
                                    STRING [8914,8924]
                                        String: "always()" [8914,8924]
                                FIELD [8925,8985]
                                    String: "run" [8925,8930]
                                    STRING [8931,8985]
                                        String: ". .venv/bin/activate\npip uninstall --yes allennlp\n" [8931,8985]
            FIELD [8989,9634]
                String: "test_package" [8989,9003]
                OBJECT [9004,9634]
                    FIELD [9005,9026]
                        String: "name" [9005,9011]
                        STRING [9012,9026]
                            String: "Test Package" [9012,9026]
                    FIELD [9027,9047]
                        String: "timeout-minutes" [9027,9044]
                        NUMBER [9045,9047]
                            Number: 10 [9045,9047]
                    FIELD [9048,9073]
                        String: "needs" [9048,9055]
                        ARRAY [9056,9073]
                            STRING [9057,9072]
                                String: "build_package" [9057,9072]
                    FIELD [9074,9099]
                        String: "runs-on" [9074,9083]
                        STRING [9084,9099]
                            String: "ubuntu-latest" [9084,9099]
                    FIELD [9100,9146]
                        String: "strategy" [9100,9110]
                        OBJECT [9111,9146]
                            FIELD [9112,9145]
                                String: "matrix" [9112,9120]
                                OBJECT [9121,9145]
                                    FIELD [9122,9144]
                                        String: "python" [9122,9130]
                                        ARRAY [9131,9144]
                                            STRING [9132,9137]
                                                String: "3.7" [9132,9137]
                                            STRING [9138,9143]
                                                String: "3.8" [9138,9143]
                    FIELD [9147,9633]
                        String: "steps" [9147,9154]
                        ARRAY [9155,9633]
                            OBJECT [9156,9261]
                                FIELD [9157,9178]
                                    String: "name" [9157,9163]
                                    STRING [9164,9178]
                                        String: "Setup Python" [9164,9178]
                                FIELD [9179,9211]
                                    String: "uses" [9179,9185]
                                    STRING [9186,9211]
                                        String: "actions/setup-python@v1" [9186,9211]
                                FIELD [9212,9260]
                                    String: "with" [9212,9218]
                                    OBJECT [9219,9260]
                                        FIELD [9220,9259]
                                            String: "python-version" [9220,9236]
                                            STRING [9237,9259]
                                                String: "${{ matrix.python }}" [9237,9259]
                            OBJECT [9262,9346]
                                FIELD [9263,9292]
                                    String: "name" [9263,9269]
                                    STRING [9270,9292]
                                        String: "Install requirements" [9270,9292]
                                FIELD [9293,9345]
                                    String: "run" [9293,9298]
                                    STRING [9299,9345]
                                        String: "pip install --upgrade pip setuptools wheel\n" [9299,9345]
                            OBJECT [9347,9462]
                                FIELD [9348,9378]
                                    String: "name" [9348,9354]
                                    STRING [9355,9378]
                                        String: "Download core package" [9355,9378]
                                FIELD [9379,9416]
                                    String: "uses" [9379,9385]
                                    STRING [9386,9416]
                                        String: "actions/download-artifact@v1" [9386,9416]
                                FIELD [9417,9461]
                                    String: "with" [9417,9423]
                                    OBJECT [9424,9461]
                                        FIELD [9425,9446]
                                            String: "name" [9425,9431]
                                            STRING [9432,9446]
                                                String: "core-package" [9432,9446]
                                        FIELD [9447,9460]
                                            String: "path" [9447,9453]
                                            STRING [9454,9460]
                                                String: "dist" [9454,9460]
                            OBJECT [9463,9533]
                                FIELD [9464,9493]
                                    String: "name" [9464,9470]
                                    STRING [9471,9493]
                                        String: "Install core package" [9471,9493]
                                FIELD [9494,9532]
                                    String: "run" [9494,9499]
                                    STRING [9500,9532]
                                        String: "pip install $(ls dist/*.whl)\n" [9500,9532]
                            OBJECT [9534,9576]
                                FIELD [9535,9554]
                                    String: "name" [9535,9541]
                                    STRING [9542,9554]
                                        String: "Pip freeze" [9542,9554]
                                FIELD [9555,9575]
                                    String: "run" [9555,9560]
                                    STRING [9561,9575]
                                        String: "pip freeze\n" [9561,9575]
                            OBJECT [9577,9632]
                                FIELD [9578,9599]
                                    String: "name" [9578,9584]
                                    STRING [9585,9599]
                                        String: "Test install" [9585,9599]
                                FIELD [9600,9631]
                                    String: "run" [9600,9605]
                                    STRING [9606,9631]
                                        String: "allennlp test-install\n" [9606,9631]
            FIELD [9635,12174]
                String: "docker" [9635,9643]
                OBJECT [9644,12174]
                    FIELD [9645,9686]
                        String: "name" [9645,9651]
                        STRING [9652,9686]
                            String: "Docker (CUDA ${{ matrix.cuda }})" [9652,9686]
                    FIELD [9687,9707]
                        String: "timeout-minutes" [9687,9704]
                        NUMBER [9705,9707]
                            Number: 18 [9705,9707]
                    FIELD [9708,9754]
                        String: "if" [9708,9712]
                        STRING [9713,9754]
                            String: "github.repository == 'allenai/allennlp'" [9713,9754]
                    FIELD [9755,9797]
                        String: "runs-on" [9755,9764]
                        ARRAY [9765,9797]
                            STRING [9766,9779]
                                String: "self-hosted" [9766,9779]
                            STRING [9780,9796]
                                String: "Docker-enabled" [9780,9796]
                    FIELD [9798,9851]
                        String: "strategy" [9798,9808]
                        OBJECT [9809,9851]
                            FIELD [9810,9850]
                                String: "matrix" [9810,9818]
                                OBJECT [9819,9850]
                                    FIELD [9820,9849]
                                        String: "cuda" [9820,9826]
                                        ARRAY [9827,9849]
                                            STRING [9828,9834]
                                                String: "10.1" [9828,9834]
                                            STRING [9835,9841]
                                                String: "10.2" [9835,9841]
                                            STRING [9842,9848]
                                                String: "11.1" [9842,9848]
                    FIELD [9852,12173]
                        String: "steps" [9852,9859]
                        ARRAY [9860,12173]
                            OBJECT [9861,9891]
                                FIELD [9862,9890]
                                    String: "uses" [9862,9868]
                                    STRING [9869,9890]
                                        String: "actions/checkout@v2" [9869,9890]
                            OBJECT [9892,10850]
                                FIELD [9893,9919]
                                    String: "name" [9893,9899]
                                    STRING [9900,9919]
                                        String: "Set torch version" [9900,9919]
                                FIELD [9920,9955]
                                    String: "env" [9920,9925]
                                    OBJECT [9926,9955]
                                        FIELD [9927,9954]
                                            String: "CUDA" [9927,9933]
                                            STRING [9934,9954]
                                                String: "${{ matrix.cuda }}" [9934,9954]
                                FIELD [9956,10849]
                                    String: "run" [9956,9961]
                                    STRING [9962,10849]
                                        String: "# Check the install instructions on https://pytorch.org/ to keep these up-to-date.\nif [[ $CUDA == '10.1' ]]; then\n    # NOTE: We need to use an older version of torch to support CUDA 10.1\n    echo \"DOCKER_TORCH_VERSION='torch==1.8.0+cu101 torchvision==0.9.0+cu101 -f https://download.pytorch.org/whl/torch_stable.html'\" >> $GITHUB_ENV;\nelif [[ $CUDA == '10.2' ]]; then\n    # NOTE: 10.2 is still the default but that could change in the next release.\n    echo \"DOCKER_TORCH_VERSION='torch==${{ env.TORCH_VERSION }} torchvision==${{ env.TORCH_VISION_VERSION }}'\" >> $GITHUB_ENV;\nelif [[ $CUDA == '11.1' ]]; then\n    echo \"DOCKER_TORCH_VERSION='torch==${{ env.TORCH_VERSION }}+cu111 torchvision==${{ env.TORCH_VISION_VERSION }}+cu111 -f https://download.pytorch.org/whl/torch_stable.html'\" >> $GITHUB_ENV;\nelse\n    echo \"Unhandled CUDA version $CUDA\";\n    exit 1;\nfi\n" [9962,10849]
                            OBJECT [10851,11172]
                                FIELD [10852,10875]
                                    String: "name" [10852,10858]
                                    STRING [10859,10875]
                                        String: "Set image name" [10859,10875]
                                FIELD [10876,10911]
                                    String: "env" [10876,10881]
                                    OBJECT [10882,10911]
                                        FIELD [10883,10910]
                                            String: "CUDA" [10883,10889]
                                            STRING [10890,10910]
                                                String: "${{ matrix.cuda }}" [10890,10910]
                                FIELD [10912,11171]
                                    String: "run" [10912,10917]
                                    STRING [10918,11171]
                                        String: "if [[ $GITHUB_EVENT_NAME == 'release' ]]; then\n    echo \"DOCKER_IMAGE_NAME=allennlp/allennlp:${GITHUB_REF#refs/tags/}-cuda${CUDA}\" >> $GITHUB_ENV;\nelse\n    echo \"DOCKER_IMAGE_NAME=allennlp/commit:${GITHUB_SHA}-cuda${CUDA}\" >> $GITHUB_ENV;\nfi\n" [10918,11171]
                            OBJECT [11173,11311]
                                FIELD [11174,11194]
                                    String: "name" [11174,11180]
                                    STRING [11181,11194]
                                        String: "Build image" [11181,11194]
                                FIELD [11195,11310]
                                    String: "run" [11195,11200]
                                    STRING [11201,11310]
                                        String: "make docker-image DOCKER_IMAGE_NAME=\"$DOCKER_IMAGE_NAME\" DOCKER_TORCH_VERSION=\"$DOCKER_TORCH_VERSION\"\n" [11201,11310]
                            OBJECT [11312,11431]
                                FIELD [11313,11332]
                                    String: "name" [11313,11319]
                                    STRING [11320,11332]
                                        String: "Test image" [11320,11332]
                                FIELD [11333,11430]
                                    String: "run" [11333,11338]
                                    STRING [11339,11430]
                                        String: "make docker-run DOCKER_GPUS='' DOCKER_IMAGE_NAME=$DOCKER_IMAGE_NAME ARGS='test-install'\n" [11339,11430]
                            OBJECT [11432,11629]
                                FIELD [11433,11468]
                                    String: "name" [11433,11439]
                                    STRING [11440,11468]
                                        String: "Authenticate to Docker Hub" [11440,11468]
                                FIELD [11469,11537]
                                    String: "if" [11469,11473]
                                    STRING [11474,11537]
                                        String: "github.event_name == 'release' || github.event_name == 'push'" [11474,11537]
                                FIELD [11538,11628]
                                    String: "run" [11538,11543]
                                    STRING [11544,11628]
                                        String: "docker login -u ${{ secrets.DOCKER_USERNAME }} -p ${{ secrets.DOCKER_PASSWORD }}\n" [11544,11628]
                            OBJECT [11630,11763]
                                FIELD [11631,11652]
                                    String: "name" [11631,11637]
                                    STRING [11638,11652]
                                        String: "Upload image" [11638,11652]
                                FIELD [11653,11721]
                                    String: "if" [11653,11657]
                                    STRING [11658,11721]
                                        String: "github.event_name == 'release' || github.event_name == 'push'" [11658,11721]
                                FIELD [11722,11762]
                                    String: "run" [11722,11727]
                                    STRING [11728,11762]
                                        String: "docker push $DOCKER_IMAGE_NAME\n" [11728,11762]
                            OBJECT [11764,11975]
                                FIELD [11765,11801]
                                    String: "name" [11765,11771]
                                    STRING [11772,11801]
                                        String: "Upload default commit image" [11772,11801]
                                FIELD [11802,11861]
                                    String: "if" [11802,11806]
                                    STRING [11807,11861]
                                        String: "github.event_name == 'push' && matrix.cuda == '10.2'" [11807,11861]
                                FIELD [11862,11974]
                                    String: "run" [11862,11867]
                                    STRING [11868,11974]
                                        String: "docker tag $DOCKER_IMAGE_NAME allennlp/commit:${GITHUB_SHA}\ndocker push allennlp/commit:${GITHUB_SHA}\n" [11868,11974]
                            OBJECT [11976,12172]
                                FIELD [11977,12005]
                                    String: "name" [11977,11983]
                                    STRING [11984,12005]
                                        String: "Upload latest image" [11984,12005]
                                FIELD [12006,12068]
                                    String: "if" [12006,12010]
                                    STRING [12011,12068]
                                        String: "github.event_name == 'release' && matrix.cuda == '10.2'" [12011,12068]
                                FIELD [12069,12171]
                                    String: "run" [12069,12074]
                                    STRING [12075,12171]
                                        String: "docker tag $DOCKER_IMAGE_NAME allennlp/allennlp:latest\ndocker push allennlp/allennlp:latest\n" [12075,12171]
            FIELD [12175,16937]
                String: "docs" [12175,12181]
                OBJECT [12182,16937]
                    FIELD [12183,12196]
                        String: "name" [12183,12189]
                        STRING [12190,12196]
                            String: "Docs" [12190,12196]
                    FIELD [12197,12217]
                        String: "timeout-minutes" [12197,12214]
                        NUMBER [12215,12217]
                            Number: 15 [12215,12217]
                    FIELD [12218,12264]
                        String: "if" [12218,12222]
                        STRING [12223,12264]
                            String: "github.repository == 'allenai/allennlp'" [12223,12264]
                    FIELD [12265,12290]
                        String: "runs-on" [12265,12274]
                        STRING [12275,12290]
                            String: "ubuntu-latest" [12275,12290]
                    FIELD [12291,16936]
                        String: "steps" [12291,12298]
                        ARRAY [12299,16936]
                            OBJECT [12300,12330]
                                FIELD [12301,12329]
                                    String: "uses" [12301,12307]
                                    STRING [12308,12329]
                                        String: "actions/checkout@v1" [12308,12329]
                            OBJECT [12331,12527]
                                FIELD [12332,12360]
                                    String: "name" [12332,12338]
                                    STRING [12339,12360]
                                        String: "Setup SSH Client 🔑" [12339,12360]
                                FIELD [12361,12429]
                                    String: "if" [12361,12365]
                                    STRING [12366,12429]
                                        String: "github.event_name == 'release' || github.event_name == 'push'" [12366,12429]
                                FIELD [12430,12466]
                                    String: "uses" [12430,12436]
                                    STRING [12437,12466]
                                        String: "webfactory/ssh-agent@v0.4.1" [12437,12466]
                                FIELD [12467,12526]
                                    String: "with" [12467,12473]
                                    OBJECT [12474,12526]
                                        FIELD [12475,12525]
                                            String: "ssh-private-key" [12475,12492]
                                            STRING [12493,12525]
                                                String: "${{ secrets.DOCS_DEPLOY_KEY }}" [12493,12525]
                            OBJECT [12528,12650]
                                FIELD [12529,12550]
                                    String: "name" [12529,12535]
                                    STRING [12536,12550]
                                        String: "Setup Python" [12536,12550]
                                FIELD [12551,12583]
                                    String: "uses" [12551,12557]
                                    STRING [12558,12583]
                                        String: "actions/setup-python@v2" [12558,12583]
                                FIELD [12584,12619]
                                    String: "env" [12584,12589]
                                    OBJECT [12590,12619]
                                        FIELD [12591,12618]
                                            String: "ACTIONS_STEP_DEBUG" [12591,12611]
                                            STRING [12612,12618]
                                                String: "true" [12612,12618]
                                FIELD [12620,12649]
                                    String: "with" [12620,12626]
                                    OBJECT [12627,12649]
                                        FIELD [12628,12648]
                                            String: "python-version" [12628,12644]
                                            NUMBER [12645,12648]
                                                Number: 3.8 [12645,12648]
                            OBJECT [12651,12747]
                                FIELD [12652,12682]
                                    String: "name" [12652,12658]
                                    STRING [12659,12682]
                                        String: "Install prerequisites" [12659,12682]
                                FIELD [12683,12746]
                                    String: "run" [12683,12688]
                                    STRING [12689,12746]
                                        String: "pip install --upgrade pip setuptools wheel virtualenv\n" [12689,12746]
                            OBJECT [12748,12960]
                                FIELD [12749,12777]
                                    String: "name" [12749,12755]
                                    STRING [12756,12777]
                                        String: "Set build variables" [12756,12777]
                                FIELD [12778,12792]
                                    String: "shell" [12778,12785]
                                    STRING [12786,12792]
                                        String: "bash" [12786,12792]
                                FIELD [12793,12959]
                                    String: "run" [12793,12798]
                                    STRING [12799,12959]
                                        String: "echo \"PYTHON_VERSION=$(python --version)\" >> $GITHUB_ENV\necho \"RUNNER_ARCH=$(uname -m)\" >> $GITHUB_ENV\necho \"WEEK_NUMBER=$(date +%V)\" >> $GITHUB_ENV\n" [12799,12959]
                            OBJECT [12961,13368]
                                FIELD [12962,12987]
                                    String: "uses" [12962,12968]
                                    STRING [12969,12987]
                                        String: "actions/cache@v2" [12969,12987]
                                FIELD [12988,13011]
                                    String: "id" [12988,12992]
                                    STRING [12993,13011]
                                        String: "virtualenv-cache" [12993,13011]
                                FIELD [13012,13367]
                                    String: "with" [13012,13018]
                                    OBJECT [13019,13367]
                                        FIELD [13020,13034]
                                            String: "path" [13020,13026]
                                            STRING [13027,13034]
                                                String: ".venv" [13027,13034]
                                        FIELD [13035,13229]
                                            String: "key" [13035,13040]
                                            STRING [13041,13229]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-cpu-${{ hashFiles('setup.py') }}-${{ hashFiles('dev-requirements.txt') }}" [13041,13229]
                                        FIELD [13230,13366]
                                            String: "restore-keys" [13230,13244]
                                            STRING [13245,13366]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-cpu-\n" [13245,13366]
                            OBJECT [13369,13744]
                                FIELD [13370,13419]
                                    String: "name" [13370,13376]
                                    STRING [13377,13419]
                                        String: "Setup virtual environment (no cache hit)" [13377,13419]
                                FIELD [13420,13477]
                                    String: "if" [13420,13424]
                                    STRING [13425,13477]
                                        String: "steps.virtualenv-cache.outputs.cache-hit != 'true'" [13425,13477]
                                FIELD [13478,13743]
                                    String: "run" [13478,13483]
                                    STRING [13484,13743]
                                        String: "test -d .venv || virtualenv -p $(which python) --copies --reset-app-data .venv\n. .venv/bin/activate\nmake install TORCH_VERSION=\"torch==${TORCH_VERSION}+cpu torchvision==${TORCH_VISION_VERSION}+cpu -f https://download.pytorch.org/whl/torch_stable.html\"\n" [13484,13743]
                            OBJECT [13745,13932]
                                FIELD [13746,13792]
                                    String: "name" [13746,13752]
                                    STRING [13753,13792]
                                        String: "Setup virtual environment (cache hit)" [13753,13792]
                                FIELD [13793,13850]
                                    String: "if" [13793,13797]
                                    STRING [13798,13850]
                                        String: "steps.virtualenv-cache.outputs.cache-hit == 'true'" [13798,13850]
                                FIELD [13851,13931]
                                    String: "run" [13851,13856]
                                    STRING [13857,13931]
                                        String: ". .venv/bin/activate\npip install --no-deps -e .\nmake download-extras\n" [13857,13931]
                            OBJECT [13933,14011]
                                FIELD [13934,13953]
                                    String: "name" [13934,13940]
                                    STRING [13941,13953]
                                        String: "Debug info" [13941,13953]
                                FIELD [13954,14010]
                                    String: "run" [13954,13959]
                                    STRING [13960,14010]
                                        String: ". .venv/bin/activate\nwhich python\npip freeze\n" [13960,14010]
                            OBJECT [14012,14449]
                                FIELD [14013,14041]
                                    String: "name" [14013,14019]
                                    STRING [14020,14041]
                                        String: "Prepare environment" [14020,14041]
                                FIELD [14042,14448]
                                    String: "run" [14042,14047]
                                    STRING [14048,14448]
                                        String: "if [[ $GITHUB_EVENT_NAME == 'release' ]]; then\n    echo \"DOCS_FOLDER=${GITHUB_REF#refs/tags/}\" >> $GITHUB_ENV;\n    echo \"BASE_SOURCE_LINK=https://github.com/allenai/allennlp/blob/${GITHUB_REF#refs/tags/}/allennlp/\" >> $GITHUB_ENV;\nelse\n    echo \"DOCS_FOLDER=main\" >> $GITHUB_ENV;\n    echo \"BASE_SOURCE_LINK=https://github.com/allenai/allennlp/blob/main/allennlp/\" >> $GITHUB_ENV;\nfi\n" [14048,14448]
                            OBJECT [14450,14527]
                                FIELD [14451,14470]
                                    String: "name" [14451,14457]
                                    STRING [14458,14470]
                                        String: "Build docs" [14458,14470]
                                FIELD [14471,14526]
                                    String: "run" [14471,14476]
                                    STRING [14477,14526]
                                        String: ". .venv/bin/activate\n./scripts/build_docs.sh\n" [14477,14526]
                            OBJECT [14528,14585]
                                FIELD [14529,14551]
                                    String: "name" [14529,14535]
                                    STRING [14536,14551]
                                        String: "Print the ref" [14536,14551]
                                FIELD [14552,14584]
                                    String: "run" [14552,14557]
                                    STRING [14558,14584]
                                        String: "echo ${{ github.ref }}\n" [14558,14584]
                            OBJECT [14586,14871]
                                FIELD [14587,14609]
                                    String: "name" [14587,14593]
                                    STRING [14594,14609]
                                        String: "Configure Git" [14594,14609]
                                FIELD [14610,14715]
                                    String: "if" [14610,14614]
                                    STRING [14615,14715]
                                        String: "github.event_name == 'release' || (github.event_name == 'push' && github.ref == 'refs/heads/main')" [14615,14715]
                                FIELD [14716,14870]
                                    String: "run" [14716,14721]
                                    STRING [14722,14870]
                                        String: "git config --global user.email \"ai2service@allenai.org\"\ngit config --global user.name \"ai2service\"\ngit config --global push.default simple\n" [14722,14870]
                            OBJECT [14872,15339]
                                FIELD [14873,14892]
                                    String: "name" [14873,14879]
                                    STRING [14880,14892]
                                        String: "Stage docs" [14880,14892]
                                FIELD [14893,14998]
                                    String: "if" [14893,14897]
                                    STRING [14898,14998]
                                        String: "github.event_name == 'release' || (github.event_name == 'push' && github.ref == 'refs/heads/main')" [14898,14998]
                                FIELD [14999,15338]
                                    String: "run" [14999,15004]
                                    STRING [15005,15338]
                                        String: "echo \"Staging docs to $DOCS_FOLDER\"\n\n# Checkout allennlp-docs to /allennlp-docs\ngit clone git@github.com:allenai/allennlp-docs.git ~/allennlp-docs\n\n# Copy the generated docs to the checked out docs repo\nrm -rf ~/allennlp-docs/$DOCS_FOLDER/\nmkdir -p ~/allennlp-docs/$DOCS_FOLDER\ncp -r site/* ~/allennlp-docs/$DOCS_FOLDER\n" [15005,15338]
                            OBJECT [15340,16236]
                                FIELD [15341,15366]
                                    String: "name" [15341,15347]
                                    STRING [15348,15366]
                                        String: "Update shortcuts" [15348,15366]
                                FIELD [15367,15404]
                                    String: "if" [15367,15371]
                                    STRING [15372,15404]
                                        String: "github.event_name == 'release'" [15372,15404]
                                FIELD [15405,16235]
                                    String: "run" [15405,15410]
                                    STRING [15411,16235]
                                        String: "# Fail immediately if any step fails.\nset -e\n. .venv/bin/activate\n\nLATEST=$(./scripts/get_version.py latest)\nSTABLE=$(./scripts/get_version.py stable)\n\ncd ~/allennlp-docs/\n\necho \"Updating latest/index.html to point to $LATEST\"\nmkdir -p latest\ncat >latest/index.html << EOL\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"Refresh\" content=\"0; url=/${LATEST}/\" />\n  </head>\n  <body>\n    <p>Please follow <a href=\"/${LATEST}/\">this link</a>.</p>\n  </body>\n</html>\nEOL\n\necho \"Updating stable/index.html to point to $STABLE\"\nmkdir -p stable\ncat >stable/index.html << EOL\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"Refresh\" content=\"0; url=/${STABLE}/\" />\n  </head>\n  <body>\n    <p>Please follow <a href=\"/${STABLE}/\">this link</a>.</p>\n  </body>\n</html>\nEOL\n" [15411,16235]
                            OBJECT [16237,16495]
                                FIELD [16238,16258]
                                    String: "name" [16238,16244]
                                    STRING [16245,16258]
                                        String: "Deploy docs" [16245,16258]
                                FIELD [16259,16364]
                                    String: "if" [16259,16263]
                                    STRING [16264,16364]
                                        String: "github.event_name == 'release' || (github.event_name == 'push' && github.ref == 'refs/heads/main')" [16264,16364]
                                FIELD [16365,16494]
                                    String: "run" [16365,16370]
                                    STRING [16371,16494]
                                        String: "# And push them up to GitHub\ncd ~/allennlp-docs/\ngit add -A\ngit commit -m \"automated update of the docs\"\ngit push\n" [16371,16494]
                            OBJECT [16496,16838]
                                FIELD [16497,16534]
                                    String: "name" [16497,16503]
                                    STRING [16504,16534]
                                        String: "Re-write docs commit history" [16504,16534]
                                FIELD [16535,16572]
                                    String: "if" [16535,16539]
                                    STRING [16540,16572]
                                        String: "github.event_name == 'release'" [16540,16572]
                                FIELD [16573,16837]
                                    String: "run" [16573,16578]
                                    STRING [16579,16837]
                                        String: "cd ~/allennlp-docs/\ngit checkout --orphan latest_branch\ngit add -A\ngit commit -m \"Re-write commit history\"\ngit branch -D master  # remove old master branch\ngit branch -m master  # rename clean new branch to master branch\ngit push -f origin master\n" [16579,16837]
                            OBJECT [16839,16935]
                                FIELD [16840,16857]
                                    String: "name" [16840,16846]
                                    STRING [16847,16857]
                                        String: "Clean up" [16847,16857]
                                FIELD [16858,16873]
                                    String: "if" [16858,16862]
                                    STRING [16863,16873]
                                        String: "always()" [16863,16873]
                                FIELD [16874,16934]
                                    String: "run" [16874,16879]
                                    STRING [16880,16934]
                                        String: ". .venv/bin/activate\npip uninstall --yes allennlp\n" [16880,16934]
            FIELD [16938,17641]
                String: "publish" [16938,16947]
                OBJECT [16948,17641]
                    FIELD [16949,16962]
                        String: "name" [16949,16955]
                        STRING [16956,16962]
                            String: "PyPI" [16956,16962]
                    FIELD [16963,16983]
                        String: "timeout-minutes" [16963,16980]
                        NUMBER [16981,16983]
                            Number: 10 [16981,16983]
                    FIELD [16984,17057]
                        String: "needs" [16984,16991]
                        ARRAY [16992,17057]
                            STRING [16993,17000]
                                String: "style" [16993,17000]
                            STRING [17001,17009]
                                String: "checks" [17001,17009]
                            STRING [17010,17025]
                                String: "build_package" [17010,17025]
                            STRING [17026,17040]
                                String: "test_package" [17026,17040]
                            STRING [17041,17049]
                                String: "docker" [17041,17049]
                            STRING [17050,17056]
                                String: "docs" [17050,17056]
                    FIELD [17058,17175]
                        String: "if" [17058,17062]
                        STRING [17063,17175]
                            String: "github.repository == 'allenai/allennlp' && (github.event_name == 'release' || github.event_name == 'schedule')" [17063,17175]
                    FIELD [17176,17201]
                        String: "runs-on" [17176,17185]
                        STRING [17186,17201]
                            String: "ubuntu-latest" [17186,17201]
                    FIELD [17202,17640]
                        String: "steps" [17202,17209]
                        ARRAY [17210,17640]
                            OBJECT [17211,17241]
                                FIELD [17212,17240]
                                    String: "uses" [17212,17218]
                                    STRING [17219,17240]
                                        String: "actions/checkout@v2" [17219,17240]
                            OBJECT [17242,17328]
                                FIELD [17243,17264]
                                    String: "name" [17243,17249]
                                    STRING [17250,17264]
                                        String: "Setup Python" [17250,17264]
                                FIELD [17265,17297]
                                    String: "uses" [17265,17271]
                                    STRING [17272,17297]
                                        String: "actions/setup-python@v1" [17272,17297]
                                FIELD [17298,17327]
                                    String: "with" [17298,17304]
                                    OBJECT [17305,17327]
                                        FIELD [17306,17326]
                                            String: "python-version" [17306,17322]
                                            NUMBER [17323,17326]
                                                Number: 3.7 [17323,17326]
                            OBJECT [17329,17419]
                                FIELD [17330,17359]
                                    String: "name" [17330,17336]
                                    STRING [17337,17359]
                                        String: "Install requirements" [17337,17359]
                                FIELD [17360,17418]
                                    String: "run" [17360,17365]
                                    STRING [17366,17418]
                                        String: "pip install --upgrade pip setuptools wheel twine\n" [17366,17418]
                            OBJECT [17420,17535]
                                FIELD [17421,17451]
                                    String: "name" [17421,17427]
                                    STRING [17428,17451]
                                        String: "Download core package" [17428,17451]
                                FIELD [17452,17489]
                                    String: "uses" [17452,17458]
                                    STRING [17459,17489]
                                        String: "actions/download-artifact@v1" [17459,17489]
                                FIELD [17490,17534]
                                    String: "with" [17490,17496]
                                    OBJECT [17497,17534]
                                        FIELD [17498,17519]
                                            String: "name" [17498,17504]
                                            STRING [17505,17519]
                                                String: "core-package" [17505,17519]
                                        FIELD [17520,17533]
                                            String: "path" [17520,17526]
                                            STRING [17527,17533]
                                                String: "dist" [17527,17533]
                            OBJECT [17536,17639]
                                FIELD [17537,17566]
                                    String: "name" [17537,17543]
                                    STRING [17544,17566]
                                        String: "Publish core package" [17544,17566]
                                FIELD [17567,17638]
                                    String: "run" [17567,17572]
                                    STRING [17573,17638]
                                        String: "twine upload -u allennlp -p ${{ secrets.PYPI_PASSWORD }} dist/*" [17573,17638]