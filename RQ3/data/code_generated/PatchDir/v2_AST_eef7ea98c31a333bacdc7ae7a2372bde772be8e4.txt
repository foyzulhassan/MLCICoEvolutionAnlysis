OBJECT [0,2325]
    FIELD [1,18]
        String: "name" [1,7]
        STRING [8,18]
            String: "Doctests" [8,18]
    FIELD [19,120]
        String: "on" [19,23]
        OBJECT [24,120]
            FIELD [25,57]
                String: "push" [25,31]
                OBJECT [32,57]
                    FIELD [33,56]
                        String: "branches" [33,43]
                        ARRAY [44,56]
                            STRING [45,55]
                                String: "doctest*" [45,55]
            FIELD [58,84]
                String: "repository_dispatch" [58,79]
                NULL [80,84]
            FIELD [85,119]
                String: "schedule" [85,95]
                ARRAY [96,119]
                    OBJECT [97,118]
                        FIELD [98,117]
                            String: "cron" [98,104]
                            STRING [105,117]
                                String: "17 2 * * *" [105,117]
    FIELD [121,321]
        String: "env" [121,126]
        OBJECT [127,321]
            FIELD [128,150]
                String: "HF_HOME" [128,137]
                STRING [138,150]
                    String: "/mnt/cache" [138,150]
            FIELD [151,176]
                String: "TRANSFORMERS_IS_CI" [151,171]
                TRUE [172,176]
            FIELD [177,192]
                String: "RUN_SLOW" [177,187]
                TRUE [188,192]
            FIELD [193,213]
                String: "OMP_NUM_THREADS" [193,210]
                NUMBER [211,213]
                    Number: 16 [211,213]
            FIELD [214,234]
                String: "MKL_NUM_THREADS" [214,231]
                NUMBER [232,234]
                    Number: 16 [232,234]
            FIELD [235,287]
                String: "SIGOPT_API_TOKEN" [235,253]
                STRING [254,287]
                    String: "${{ secrets.SIGOPT_API_TOKEN }}" [254,287]
            FIELD [288,320]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [288,315]
                TRUE [316,320]
    FIELD [322,2324]
        String: "jobs" [322,328]
        OBJECT [329,2324]
            FIELD [330,1726]
                String: "run_doctests" [330,344]
                OBJECT [345,1726]
                    FIELD [346,401]
                        String: "runs-on" [346,355]
                        ARRAY [356,401]
                            STRING [357,369]
                                String: "single-gpu" [357,369]
                            STRING [370,382]
                                String: "nvidia-gpu" [370,382]
                            STRING [383,387]
                                String: "t4" [383,387]
                            STRING [388,400]
                                String: "doctest-ci" [388,400]
                    FIELD [402,562]
                        String: "container" [402,413]
                        OBJECT [414,562]
                            FIELD [415,464]
                                String: "image" [415,422]
                                STRING [423,464]
                                    String: "huggingface/transformers-all-latest-gpu" [423,464]
                            FIELD [465,561]
                                String: "options" [465,474]
                                STRING [475,561]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [475,561]
                    FIELD [563,1725]
                        String: "steps" [563,570]
                        ARRAY [571,1725]
                            OBJECT [572,692]
                                FIELD [573,642]
                                    String: "name" [573,579]
                                    STRING [580,642]
                                        String: "uninstall transformers (installed during docker image build)" [580,642]
                                FIELD [643,691]
                                    String: "run" [643,648]
                                    STRING [649,691]
                                        String: "python3 -m pip uninstall -y transformers" [649,691]
                            OBJECT [693,723]
                                FIELD [694,722]
                                    String: "uses" [694,700]
                                    STRING [701,722]
                                        String: "actions/checkout@v3" [701,722]
                            OBJECT [724,766]
                                FIELD [725,744]
                                    String: "name" [725,731]
                                    STRING [732,744]
                                        String: "NVIDIA-SMI" [732,744]
                                FIELD [745,765]
                                    String: "run" [745,750]
                                    STRING [751,765]
                                        String: "nvidia-smi\n" [751,765]
                            OBJECT [767,853]
                                FIELD [768,810]
                                    String: "name" [768,774]
                                    STRING [775,810]
                                        String: "Install transformers in edit mode" [775,810]
                                FIELD [811,852]
                                    String: "run" [811,816]
                                    STRING [817,852]
                                        String: "python3 -m pip install -e .[flax]" [817,852]
                            OBJECT [854,916]
                                FIELD [855,878]
                                    String: "name" [855,861]
                                    STRING [862,878]
                                        String: "GPU visibility" [862,878]
                                FIELD [879,915]
                                    String: "run" [879,884]
                                    STRING [885,915]
                                        String: "python3 utils/print_env.py\n" [885,915]
                            OBJECT [917,990]
                                FIELD [918,970]
                                    String: "name" [918,924]
                                    STRING [925,970]
                                        String: "Show installed libraries and their versions" [925,970]
                                FIELD [971,989]
                                    String: "run" [971,976]
                                    STRING [977,989]
                                        String: "pip freeze" [977,989]
                            OBJECT [991,1233]
                                FIELD [992,1018]
                                    String: "name" [992,998]
                                    STRING [999,1018]
                                        String: "Get doctest files" [999,1018]
                                FIELD [1019,1232]
                                    String: "run" [1019,1024]
                                    STRING [1025,1232]
                                        String: "$(python3 -c 'from utils.tests_fetcher import get_all_doctest_files; to_test = get_all_doctest_files(); to_test = \" \".join(to_test); fp = open(\"doc_tests.txt\", \"w\"); fp.write(to_test); fp.close()')\n" [1025,1232]
                            OBJECT [1234,1414]
                                FIELD [1235,1256]
                                    String: "name" [1235,1241]
                                    STRING [1242,1256]
                                        String: "Run doctests" [1242,1256]
                                FIELD [1257,1413]
                                    String: "run" [1257,1262]
                                    STRING [1263,1413]
                                        String: "python3 -m pytest -v --make-reports doc_tests_gpu --doctest-modules $(cat doc_tests.txt) -sv --doctest-continue-on-failure --doctest-glob=\"*.md\"\n" [1263,1413]
                            OBJECT [1415,1549]
                                FIELD [1416,1446]
                                    String: "name" [1416,1422]
                                    STRING [1423,1446]
                                        String: "Failure short reports" [1423,1446]
                                FIELD [1447,1470]
                                    String: "if" [1447,1451]
                                    STRING [1452,1470]
                                        String: "${{ failure() }}" [1452,1470]
                                FIELD [1471,1495]
                                    String: "continue-on-error" [1471,1490]
                                    TRUE [1491,1495]
                                FIELD [1496,1548]
                                    String: "run" [1496,1501]
                                    STRING [1502,1548]
                                        String: "cat reports/doc_tests_gpu/failures_short.txt" [1502,1548]
                            OBJECT [1550,1724]
                                FIELD [1551,1588]
                                    String: "name" [1551,1557]
                                    STRING [1558,1588]
                                        String: "Test suite reports artifacts" [1558,1588]
                                FIELD [1589,1611]
                                    String: "if" [1589,1593]
                                    STRING [1594,1611]
                                        String: "${{ always() }}" [1594,1611]
                                FIELD [1612,1647]
                                    String: "uses" [1612,1618]
                                    STRING [1619,1647]
                                        String: "actions/upload-artifact@v3" [1619,1647]
                                FIELD [1648,1723]
                                    String: "with" [1648,1654]
                                    OBJECT [1655,1723]
                                        FIELD [1656,1691]
                                            String: "name" [1656,1662]
                                            STRING [1663,1691]
                                                String: "doc_tests_gpu_test_reports" [1663,1691]
                                        FIELD [1692,1722]
                                            String: "path" [1692,1698]
                                            STRING [1699,1722]
                                                String: "reports/doc_tests_gpu" [1699,1722]
            FIELD [1727,2323]
                String: "send_results" [1727,1741]
                OBJECT [1742,2323]
                    FIELD [1743,1775]
                        String: "name" [1743,1749]
                        STRING [1750,1775]
                            String: "Send results to webhook" [1750,1775]
                    FIELD [1776,1801]
                        String: "runs-on" [1776,1785]
                        STRING [1786,1801]
                            String: "ubuntu-latest" [1786,1801]
                    FIELD [1802,1817]
                        String: "if" [1802,1806]
                        STRING [1807,1817]
                            String: "always()" [1807,1817]
                    FIELD [1818,1842]
                        String: "needs" [1818,1825]
                        ARRAY [1826,1842]
                            STRING [1827,1841]
                                String: "run_doctests" [1827,1841]
                    FIELD [1843,2322]
                        String: "steps" [1843,1850]
                        ARRAY [1851,2322]
                            OBJECT [1852,1882]
                                FIELD [1853,1881]
                                    String: "uses" [1853,1859]
                                    STRING [1860,1881]
                                        String: "actions/checkout@v3" [1860,1881]
                            OBJECT [1883,1922]
                                FIELD [1884,1921]
                                    String: "uses" [1884,1890]
                                    STRING [1891,1921]
                                        String: "actions/download-artifact@v3" [1891,1921]
                            OBJECT [1923,2321]
                                FIELD [1924,1954]
                                    String: "name" [1924,1930]
                                    STRING [1931,1954]
                                        String: "Send message to Slack" [1931,1954]
                                FIELD [1955,2242]
                                    String: "env" [1955,1960]
                                    OBJECT [1961,2242]
                                        FIELD [1962,2018]
                                            String: "CI_SLACK_BOT_TOKEN" [1962,1982]
                                            STRING [1983,2018]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [1983,2018]
                                        FIELD [2019,2088]
                                            String: "CI_SLACK_CHANNEL_ID" [2019,2040]
                                            STRING [2041,2088]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY_DOCS }}" [2041,2088]
                                        FIELD [2089,2164]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [2089,2116]
                                            STRING [2117,2164]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY_DOCS }}" [2117,2164]
                                        FIELD [2165,2241]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [2165,2195]
                                            STRING [2196,2241]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [2196,2241]
                                FIELD [2243,2320]
                                    String: "run" [2243,2248]
                                    STRING [2249,2320]
                                        String: "pip install slack_sdk\npython utils/notification_service_doc_tests.py" [2249,2320]