OBJECT [0,11194]
    FIELD [1,35]
        String: "name" [1,7]
        STRING [8,35]
            String: "Self-hosted runner (push)" [8,35]
    FIELD [36,183]
        String: "on" [36,40]
        OBJECT [41,183]
            FIELD [42,155]
                String: "push" [42,48]
                OBJECT [49,155]
                    FIELD [50,85]
                        String: "branches" [50,60]
                        ARRAY [61,85]
                            STRING [62,70]
                                String: "master" [62,70]
                            STRING [71,77]
                                String: "ci_*" [71,77]
                            STRING [78,84]
                                String: "ci-*" [78,84]
                    FIELD [86,154]
                        String: "paths" [86,93]
                        ARRAY [94,154]
                            STRING [95,103]
                                String: "src/**" [95,103]
                            STRING [104,114]
                                String: "tests/**" [104,114]
                            STRING [115,127]
                                String: ".github/**" [115,127]
                            STRING [128,142]
                                String: "templates/**" [128,142]
                            STRING [143,153]
                                String: "utils/**" [143,153]
            FIELD [156,182]
                String: "repository_dispatch" [156,177]
                NULL [178,182]
    FIELD [184,300]
        String: "env" [184,189]
        OBJECT [190,300]
            FIELD [191,213]
                String: "HF_HOME" [191,200]
                STRING [201,213]
                    String: "/mnt/cache" [201,213]
            FIELD [214,239]
                String: "TRANSFORMERS_IS_CI" [214,234]
                TRUE [235,239]
            FIELD [240,259]
                String: "OMP_NUM_THREADS" [240,257]
                NUMBER [258,259]
                    Number: 8 [258,259]
            FIELD [260,279]
                String: "MKL_NUM_THREADS" [260,277]
                NUMBER [278,279]
                    Number: 8 [278,279]
            FIELD [280,299]
                String: "PYTEST_TIMEOUT" [280,296]
                NUMBER [297,299]
                    Number: 60 [297,299]
    FIELD [301,11193]
        String: "jobs" [301,307]
        OBJECT [308,11193]
            FIELD [309,2134]
                String: "run_tests_torch_gpu" [309,330]
                OBJECT [331,2134]
                    FIELD [332,383]
                        String: "runs-on" [332,341]
                        ARRAY [342,383]
                            STRING [343,356]
                                String: "self-hosted" [343,356]
                            STRING [357,369]
                                String: "docker-gpu" [357,369]
                            STRING [370,382]
                                String: "single-gpu" [370,382]
                    FIELD [384,550]
                        String: "container" [384,395]
                        OBJECT [396,550]
                            FIELD [397,452]
                                String: "image" [397,404]
                                STRING [405,452]
                                    String: "pytorch/pytorch:1.9.0-cuda11.1-cudnn8-runtime" [405,452]
                            FIELD [453,549]
                                String: "options" [453,462]
                                STRING [463,549]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [463,549]
                    FIELD [551,2133]
                        String: "steps" [551,558]
                        ARRAY [559,2133]
                            OBJECT [560,900]
                                FIELD [561,590]
                                    String: "name" [561,567]
                                    STRING [568,590]
                                        String: "Install dependencies" [568,590]
                                FIELD [591,899]
                                    String: "run" [591,596]
                                    STRING [597,899]
                                        String: "apt -y update && apt install -y software-properties-common && apt -y update && add-apt-repository -y ppa:git-core/ppa && apt -y update && apt install -y git\napt install -y libsndfile1-dev\npip install --upgrade pip\npip install .[sklearn,testing,onnxruntime,sentencepiece,torch-speech,vision,timm]\n" [597,899]
                            OBJECT [901,981]
                                FIELD [902,926]
                                    String: "name" [902,908]
                                    STRING [909,926]
                                        String: "Launcher docker" [909,926]
                                FIELD [927,955]
                                    String: "uses" [927,933]
                                    STRING [934,955]
                                        String: "actions/checkout@v2" [934,955]
                                FIELD [956,980]
                                    String: "with" [956,962]
                                    OBJECT [963,980]
                                        FIELD [964,979]
                                            String: "fetch-depth" [964,977]
                                            NUMBER [978,979]
                                                Number: 2 [978,979]
                            OBJECT [982,1024]
                                FIELD [983,1002]
                                    String: "name" [983,989]
                                    STRING [990,1002]
                                        String: "NVIDIA-SMI" [990,1002]
                                FIELD [1003,1023]
                                    String: "run" [1003,1008]
                                    STRING [1009,1023]
                                        String: "nvidia-smi\n" [1009,1023]
                            OBJECT [1025,1414]
                                FIELD [1026,1075]
                                    String: "name" [1026,1032]
                                    STRING [1033,1075]
                                        String: "Are GPUs recognized by our DL frameworks" [1033,1075]
                                FIELD [1076,1413]
                                    String: "run" [1076,1081]
                                    STRING [1082,1413]
                                        String: "python -c \"import torch; print('Cuda available:', torch.cuda.is_available())\"\npython -c \"import torch; print('Cuda version:', torch.version.cuda)\"\npython -c \"import torch; print('CuDNN version:', torch.backends.cudnn.version())\"\npython -c \"import torch; print('Number of GPUs available:', torch.cuda.device_count())\"\n" [1082,1413]
                            OBJECT [1415,1539]
                                FIELD [1416,1447]
                                    String: "name" [1416,1422]
                                    STRING [1423,1447]
                                        String: "Fetch the tests to run" [1423,1447]
                                FIELD [1448,1538]
                                    String: "run" [1448,1453]
                                    STRING [1454,1538]
                                        String: "python utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [1454,1538]
                            OBJECT [1540,1668]
                                FIELD [1541,1570]
                                    String: "name" [1541,1547]
                                    STRING [1548,1570]
                                        String: "Report fetched tests" [1548,1570]
                                FIELD [1571,1606]
                                    String: "uses" [1571,1577]
                                    STRING [1578,1606]
                                        String: "actions/upload-artifact@v2" [1578,1606]
                                FIELD [1607,1667]
                                    String: "with" [1607,1613]
                                    OBJECT [1614,1667]
                                        FIELD [1615,1636]
                                            String: "name" [1615,1621]
                                            STRING [1622,1636]
                                                String: "test_fetched" [1622,1636]
                                        FIELD [1637,1666]
                                            String: "path" [1637,1643]
                                            STRING [1644,1666]
                                                String: "test_preparation.txt" [1644,1666]
                            OBJECT [1669,1849]
                                FIELD [1670,1708]
                                    String: "name" [1670,1676]
                                    STRING [1677,1708]
                                        String: "Run all non-slow tests on GPU" [1677,1708]
                                FIELD [1709,1848]
                                    String: "run" [1709,1714]
                                    STRING [1715,1848]
                                        String: "if [ -f test_list.txt ]; then\n  python -m pytest -n 2 --dist=loadfile -v --make-reports=tests_torch_gpu $(cat test_list.txt)\nfi\n" [1715,1848]
                            OBJECT [1850,1961]
                                FIELD [1851,1881]
                                    String: "name" [1851,1857]
                                    STRING [1858,1881]
                                        String: "Failure short reports" [1858,1881]
                                FIELD [1882,1905]
                                    String: "if" [1882,1886]
                                    STRING [1887,1905]
                                        String: "${{ failure() }}" [1887,1905]
                                FIELD [1906,1960]
                                    String: "run" [1906,1911]
                                    STRING [1912,1960]
                                        String: "cat reports/tests_torch_gpu_failures_short.txt" [1912,1960]
                            OBJECT [1962,2132]
                                FIELD [1963,2000]
                                    String: "name" [1963,1969]
                                    STRING [1970,2000]
                                        String: "Test suite reports artifacts" [1970,2000]
                                FIELD [2001,2023]
                                    String: "if" [2001,2005]
                                    STRING [2006,2023]
                                        String: "${{ always() }}" [2006,2023]
                                FIELD [2024,2059]
                                    String: "uses" [2024,2030]
                                    STRING [2031,2059]
                                        String: "actions/upload-artifact@v2" [2031,2059]
                                FIELD [2060,2131]
                                    String: "with" [2060,2066]
                                    OBJECT [2067,2131]
                                        FIELD [2068,2113]
                                            String: "name" [2068,2074]
                                            STRING [2075,2113]
                                                String: "run_all_tests_torch_gpu_test_reports" [2075,2113]
                                        FIELD [2114,2130]
                                            String: "path" [2114,2120]
                                            STRING [2121,2130]
                                                String: "reports" [2121,2130]
            FIELD [2135,3684]
                String: "run_tests_flax_gpu" [2135,2155]
                OBJECT [2156,3684]
                    FIELD [2157,2208]
                        String: "runs-on" [2157,2166]
                        ARRAY [2167,2208]
                            STRING [2168,2181]
                                String: "self-hosted" [2168,2181]
                            STRING [2182,2194]
                                String: "docker-gpu" [2182,2194]
                            STRING [2195,2207]
                                String: "single-gpu" [2195,2207]
                    FIELD [2209,2361]
                        String: "container" [2209,2220]
                        OBJECT [2221,2361]
                            FIELD [2222,2263]
                                String: "image" [2222,2229]
                                STRING [2230,2263]
                                    String: "tensorflow/tensorflow:2.4.1-gpu" [2230,2263]
                            FIELD [2264,2360]
                                String: "options" [2264,2273]
                                STRING [2274,2360]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [2274,2360]
                    FIELD [2362,3683]
                        String: "steps" [2362,2369]
                        ARRAY [2370,3683]
                            OBJECT [2371,2771]
                                FIELD [2372,2401]
                                    String: "name" [2372,2378]
                                    STRING [2379,2401]
                                        String: "Install dependencies" [2379,2401]
                                FIELD [2402,2770]
                                    String: "run" [2402,2407]
                                    STRING [2408,2770]
                                        String: "apt -y update && apt install -y software-properties-common && apt -y update && add-apt-repository -y ppa:git-core/ppa && apt -y update && apt install -y git\npip install --upgrade \"jax[cuda111]\" -f https://storage.googleapis.com/jax-releases/jax_releases.html\npip install --upgrade pip\npip install .[sklearn,testing,sentencepiece,flax,flax-speech,vision]\n" [2408,2770]
                            OBJECT [2772,2852]
                                FIELD [2773,2797]
                                    String: "name" [2773,2779]
                                    STRING [2780,2797]
                                        String: "Launcher docker" [2780,2797]
                                FIELD [2798,2826]
                                    String: "uses" [2798,2804]
                                    STRING [2805,2826]
                                        String: "actions/checkout@v2" [2805,2826]
                                FIELD [2827,2851]
                                    String: "with" [2827,2833]
                                    OBJECT [2834,2851]
                                        FIELD [2835,2850]
                                            String: "fetch-depth" [2835,2848]
                                            NUMBER [2849,2850]
                                                Number: 2 [2849,2850]
                            OBJECT [2853,2895]
                                FIELD [2854,2873]
                                    String: "name" [2854,2860]
                                    STRING [2861,2873]
                                        String: "NVIDIA-SMI" [2861,2873]
                                FIELD [2874,2894]
                                    String: "run" [2874,2879]
                                    STRING [2880,2894]
                                        String: "nvidia-smi\n" [2880,2894]
                            OBJECT [2896,3150]
                                FIELD [2897,2946]
                                    String: "name" [2897,2903]
                                    STRING [2904,2946]
                                        String: "Are GPUs recognized by our DL frameworks" [2904,2946]
                                FIELD [2947,3149]
                                    String: "run" [2947,2952]
                                    STRING [2953,3149]
                                        String: "python -c \"from jax.lib import xla_bridge; print('GPU available:', xla_bridge.get_backend().platform)\"\npython -c \"import jax; print('Number of GPUs available:', len(jax.local_devices()))\"\n" [2953,3149]
                            OBJECT [3151,3279]
                                FIELD [3152,3181]
                                    String: "name" [3152,3158]
                                    STRING [3159,3181]
                                        String: "Report fetched tests" [3159,3181]
                                FIELD [3182,3217]
                                    String: "uses" [3182,3188]
                                    STRING [3189,3217]
                                        String: "actions/upload-artifact@v2" [3189,3217]
                                FIELD [3218,3278]
                                    String: "with" [3218,3224]
                                    OBJECT [3225,3278]
                                        FIELD [3226,3247]
                                            String: "name" [3226,3232]
                                            STRING [3233,3247]
                                                String: "test_fetched" [3233,3247]
                                        FIELD [3248,3277]
                                            String: "path" [3248,3254]
                                            STRING [3255,3277]
                                                String: "test_preparation.txt" [3255,3277]
                            OBJECT [3280,3401]
                                FIELD [3281,3319]
                                    String: "name" [3281,3287]
                                    STRING [3288,3319]
                                        String: "Run all non-slow tests on GPU" [3288,3319]
                                FIELD [3320,3400]
                                    String: "run" [3320,3325]
                                    STRING [3326,3400]
                                        String: "python -m pytest -n 2 --dist=loadfile -v --make-reports=tests_flax_gpu\n" [3326,3400]
                            OBJECT [3402,3512]
                                FIELD [3403,3433]
                                    String: "name" [3403,3409]
                                    STRING [3410,3433]
                                        String: "Failure short reports" [3410,3433]
                                FIELD [3434,3457]
                                    String: "if" [3434,3438]
                                    STRING [3439,3457]
                                        String: "${{ failure() }}" [3439,3457]
                                FIELD [3458,3511]
                                    String: "run" [3458,3463]
                                    STRING [3464,3511]
                                        String: "cat reports/tests_flax_gpu_failures_short.txt" [3464,3511]
                            OBJECT [3513,3682]
                                FIELD [3514,3551]
                                    String: "name" [3514,3520]
                                    STRING [3521,3551]
                                        String: "Test suite reports artifacts" [3521,3551]
                                FIELD [3552,3574]
                                    String: "if" [3552,3556]
                                    STRING [3557,3574]
                                        String: "${{ always() }}" [3557,3574]
                                FIELD [3575,3610]
                                    String: "uses" [3575,3581]
                                    STRING [3582,3610]
                                        String: "actions/upload-artifact@v2" [3582,3610]
                                FIELD [3611,3681]
                                    String: "with" [3611,3617]
                                    OBJECT [3618,3681]
                                        FIELD [3619,3663]
                                            String: "name" [3619,3625]
                                            STRING [3626,3663]
                                                String: "run_all_tests_flax_gpu_test_reports" [3626,3663]
                                        FIELD [3664,3680]
                                            String: "path" [3664,3670]
                                            STRING [3671,3680]
                                                String: "reports" [3671,3680]
            FIELD [3685,5596]
                String: "run_tests_torch_multi_gpu" [3685,3712]
                OBJECT [3713,5596]
                    FIELD [3714,3764]
                        String: "runs-on" [3714,3723]
                        ARRAY [3724,3764]
                            STRING [3725,3738]
                                String: "self-hosted" [3725,3738]
                            STRING [3739,3751]
                                String: "docker-gpu" [3739,3751]
                            STRING [3752,3763]
                                String: "multi-gpu" [3752,3763]
                    FIELD [3765,3933]
                        String: "container" [3765,3776]
                        OBJECT [3777,3933]
                            FIELD [3778,3833]
                                String: "image" [3778,3785]
                                STRING [3786,3833]
                                    String: "pytorch/pytorch:1.9.0-cuda11.1-cudnn8-runtime" [3786,3833]
                            FIELD [3834,3932]
                                String: "options" [3834,3843]
                                STRING [3844,3932]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [3844,3932]
                    FIELD [3934,5595]
                        String: "steps" [3934,3941]
                        ARRAY [3942,5595]
                            OBJECT [3943,4283]
                                FIELD [3944,3973]
                                    String: "name" [3944,3950]
                                    STRING [3951,3973]
                                        String: "Install dependencies" [3951,3973]
                                FIELD [3974,4282]
                                    String: "run" [3974,3979]
                                    STRING [3980,4282]
                                        String: "apt -y update && apt install -y software-properties-common && apt -y update && add-apt-repository -y ppa:git-core/ppa && apt -y update && apt install -y git\napt install -y libsndfile1-dev\npip install --upgrade pip\npip install .[sklearn,testing,onnxruntime,sentencepiece,torch-speech,vision,timm]\n" [3980,4282]
                            OBJECT [4284,4364]
                                FIELD [4285,4309]
                                    String: "name" [4285,4291]
                                    STRING [4292,4309]
                                        String: "Launcher docker" [4292,4309]
                                FIELD [4310,4338]
                                    String: "uses" [4310,4316]
                                    STRING [4317,4338]
                                        String: "actions/checkout@v2" [4317,4338]
                                FIELD [4339,4363]
                                    String: "with" [4339,4345]
                                    OBJECT [4346,4363]
                                        FIELD [4347,4362]
                                            String: "fetch-depth" [4347,4360]
                                            NUMBER [4361,4362]
                                                Number: 2 [4361,4362]
                            OBJECT [4365,4432]
                                FIELD [4366,4385]
                                    String: "name" [4366,4372]
                                    STRING [4373,4385]
                                        String: "NVIDIA-SMI" [4373,4385]
                                FIELD [4386,4410]
                                    String: "continue-on-error" [4386,4405]
                                    TRUE [4406,4410]
                                FIELD [4411,4431]
                                    String: "run" [4411,4416]
                                    STRING [4417,4431]
                                        String: "nvidia-smi\n" [4417,4431]
                            OBJECT [4433,4822]
                                FIELD [4434,4483]
                                    String: "name" [4434,4440]
                                    STRING [4441,4483]
                                        String: "Are GPUs recognized by our DL frameworks" [4441,4483]
                                FIELD [4484,4821]
                                    String: "run" [4484,4489]
                                    STRING [4490,4821]
                                        String: "python -c \"import torch; print('Cuda available:', torch.cuda.is_available())\"\npython -c \"import torch; print('Cuda version:', torch.version.cuda)\"\npython -c \"import torch; print('CuDNN version:', torch.backends.cudnn.version())\"\npython -c \"import torch; print('Number of GPUs available:', torch.cuda.device_count())\"\n" [4490,4821]
                            OBJECT [4823,4947]
                                FIELD [4824,4855]
                                    String: "name" [4824,4830]
                                    STRING [4831,4855]
                                        String: "Fetch the tests to run" [4831,4855]
                                FIELD [4856,4946]
                                    String: "run" [4856,4861]
                                    STRING [4862,4946]
                                        String: "python utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [4862,4946]
                            OBJECT [4948,5076]
                                FIELD [4949,4978]
                                    String: "name" [4949,4955]
                                    STRING [4956,4978]
                                        String: "Report fetched tests" [4956,4978]
                                FIELD [4979,5014]
                                    String: "uses" [4979,4985]
                                    STRING [4986,5014]
                                        String: "actions/upload-artifact@v2" [4986,5014]
                                FIELD [5015,5075]
                                    String: "with" [5015,5021]
                                    OBJECT [5022,5075]
                                        FIELD [5023,5044]
                                            String: "name" [5023,5029]
                                            STRING [5030,5044]
                                                String: "test_fetched" [5030,5044]
                                        FIELD [5045,5074]
                                            String: "path" [5045,5051]
                                            STRING [5052,5074]
                                                String: "test_preparation.txt" [5052,5074]
                            OBJECT [5077,5299]
                                FIELD [5078,5116]
                                    String: "name" [5078,5084]
                                    STRING [5085,5116]
                                        String: "Run all non-slow tests on GPU" [5085,5116]
                                FIELD [5117,5152]
                                    String: "env" [5117,5122]
                                    OBJECT [5123,5152]
                                        FIELD [5124,5151]
                                            String: "MKL_SERVICE_FORCE_INTEL" [5124,5149]
                                            NUMBER [5150,5151]
                                                Number: 1 [5150,5151]
                                FIELD [5153,5298]
                                    String: "run" [5153,5158]
                                    STRING [5159,5298]
                                        String: "if [ -f test_list.txt ]; then\n  python -m pytest -n 2 --dist=loadfile -v --make-reports=tests_torch_multi_gpu $(cat test_list.txt)\nfi\n" [5159,5298]
                            OBJECT [5300,5417]
                                FIELD [5301,5331]
                                    String: "name" [5301,5307]
                                    STRING [5308,5331]
                                        String: "Failure short reports" [5308,5331]
                                FIELD [5332,5355]
                                    String: "if" [5332,5336]
                                    STRING [5337,5355]
                                        String: "${{ failure() }}" [5337,5355]
                                FIELD [5356,5416]
                                    String: "run" [5356,5361]
                                    STRING [5362,5416]
                                        String: "cat reports/tests_torch_multi_gpu_failures_short.txt" [5362,5416]
                            OBJECT [5418,5594]
                                FIELD [5419,5456]
                                    String: "name" [5419,5425]
                                    STRING [5426,5456]
                                        String: "Test suite reports artifacts" [5426,5456]
                                FIELD [5457,5479]
                                    String: "if" [5457,5461]
                                    STRING [5462,5479]
                                        String: "${{ always() }}" [5462,5479]
                                FIELD [5480,5515]
                                    String: "uses" [5480,5486]
                                    STRING [5487,5515]
                                        String: "actions/upload-artifact@v2" [5487,5515]
                                FIELD [5516,5593]
                                    String: "with" [5516,5522]
                                    OBJECT [5523,5593]
                                        FIELD [5524,5575]
                                            String: "name" [5524,5530]
                                            STRING [5531,5575]
                                                String: "run_all_tests_torch_multi_gpu_test_reports" [5531,5575]
                                        FIELD [5576,5592]
                                            String: "path" [5576,5582]
                                            STRING [5583,5592]
                                                String: "reports" [5583,5592]
            FIELD [5597,7169]
                String: "run_tests_flax_multi_gpu" [5597,5623]
                OBJECT [5624,7169]
                    FIELD [5625,5675]
                        String: "runs-on" [5625,5634]
                        ARRAY [5635,5675]
                            STRING [5636,5649]
                                String: "self-hosted" [5636,5649]
                            STRING [5650,5662]
                                String: "docker-gpu" [5650,5662]
                            STRING [5663,5674]
                                String: "multi-gpu" [5663,5674]
                    FIELD [5676,5828]
                        String: "container" [5676,5687]
                        OBJECT [5688,5828]
                            FIELD [5689,5730]
                                String: "image" [5689,5696]
                                STRING [5697,5730]
                                    String: "tensorflow/tensorflow:2.4.1-gpu" [5697,5730]
                            FIELD [5731,5827]
                                String: "options" [5731,5740]
                                STRING [5741,5827]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [5741,5827]
                    FIELD [5829,7168]
                        String: "steps" [5829,5836]
                        ARRAY [5837,7168]
                            OBJECT [5838,6238]
                                FIELD [5839,5868]
                                    String: "name" [5839,5845]
                                    STRING [5846,5868]
                                        String: "Install dependencies" [5846,5868]
                                FIELD [5869,6237]
                                    String: "run" [5869,5874]
                                    STRING [5875,6237]
                                        String: "apt -y update && apt install -y software-properties-common && apt -y update && add-apt-repository -y ppa:git-core/ppa && apt -y update && apt install -y git\npip install --upgrade \"jax[cuda111]\" -f https://storage.googleapis.com/jax-releases/jax_releases.html\npip install --upgrade pip\npip install .[sklearn,testing,sentencepiece,flax,flax-speech,vision]\n" [5875,6237]
                            OBJECT [6239,6319]
                                FIELD [6240,6264]
                                    String: "name" [6240,6246]
                                    STRING [6247,6264]
                                        String: "Launcher docker" [6247,6264]
                                FIELD [6265,6293]
                                    String: "uses" [6265,6271]
                                    STRING [6272,6293]
                                        String: "actions/checkout@v2" [6272,6293]
                                FIELD [6294,6318]
                                    String: "with" [6294,6300]
                                    OBJECT [6301,6318]
                                        FIELD [6302,6317]
                                            String: "fetch-depth" [6302,6315]
                                            NUMBER [6316,6317]
                                                Number: 2 [6316,6317]
                            OBJECT [6320,6362]
                                FIELD [6321,6340]
                                    String: "name" [6321,6327]
                                    STRING [6328,6340]
                                        String: "NVIDIA-SMI" [6328,6340]
                                FIELD [6341,6361]
                                    String: "run" [6341,6346]
                                    STRING [6347,6361]
                                        String: "nvidia-smi\n" [6347,6361]
                            OBJECT [6363,6617]
                                FIELD [6364,6413]
                                    String: "name" [6364,6370]
                                    STRING [6371,6413]
                                        String: "Are GPUs recognized by our DL frameworks" [6371,6413]
                                FIELD [6414,6616]
                                    String: "run" [6414,6419]
                                    STRING [6420,6616]
                                        String: "python -c \"from jax.lib import xla_bridge; print('GPU available:', xla_bridge.get_backend().platform)\"\npython -c \"import jax; print('Number of GPUs available:', len(jax.local_devices()))\"\n" [6420,6616]
                            OBJECT [6618,6746]
                                FIELD [6619,6648]
                                    String: "name" [6619,6625]
                                    STRING [6626,6648]
                                        String: "Report fetched tests" [6626,6648]
                                FIELD [6649,6684]
                                    String: "uses" [6649,6655]
                                    STRING [6656,6684]
                                        String: "actions/upload-artifact@v2" [6656,6684]
                                FIELD [6685,6745]
                                    String: "with" [6685,6691]
                                    OBJECT [6692,6745]
                                        FIELD [6693,6714]
                                            String: "name" [6693,6699]
                                            STRING [6700,6714]
                                                String: "test_fetched" [6700,6714]
                                        FIELD [6715,6744]
                                            String: "path" [6715,6721]
                                            STRING [6722,6744]
                                                String: "test_preparation.txt" [6722,6744]
                            OBJECT [6747,6874]
                                FIELD [6748,6786]
                                    String: "name" [6748,6754]
                                    STRING [6755,6786]
                                        String: "Run all non-slow tests on GPU" [6755,6786]
                                FIELD [6787,6873]
                                    String: "run" [6787,6792]
                                    STRING [6793,6873]
                                        String: "python -m pytest -n 2 --dist=loadfile -v --make-reports=tests_flax_multi_gpu\n" [6793,6873]
                            OBJECT [6875,6991]
                                FIELD [6876,6906]
                                    String: "name" [6876,6882]
                                    STRING [6883,6906]
                                        String: "Failure short reports" [6883,6906]
                                FIELD [6907,6930]
                                    String: "if" [6907,6911]
                                    STRING [6912,6930]
                                        String: "${{ failure() }}" [6912,6930]
                                FIELD [6931,6990]
                                    String: "run" [6931,6936]
                                    STRING [6937,6990]
                                        String: "cat reports/tests_flax_multi_gpu_failures_short.txt" [6937,6990]
                            OBJECT [6992,7167]
                                FIELD [6993,7030]
                                    String: "name" [6993,6999]
                                    STRING [7000,7030]
                                        String: "Test suite reports artifacts" [7000,7030]
                                FIELD [7031,7053]
                                    String: "if" [7031,7035]
                                    STRING [7036,7053]
                                        String: "${{ always() }}" [7036,7053]
                                FIELD [7054,7089]
                                    String: "uses" [7054,7060]
                                    STRING [7061,7089]
                                        String: "actions/upload-artifact@v2" [7061,7089]
                                FIELD [7090,7166]
                                    String: "with" [7090,7096]
                                    OBJECT [7097,7166]
                                        FIELD [7098,7148]
                                            String: "name" [7098,7104]
                                            STRING [7105,7148]
                                                String: "run_all_tests_flax_multi_gpu_test_reports" [7105,7148]
                                        FIELD [7149,7165]
                                            String: "path" [7149,7155]
                                            STRING [7156,7165]
                                                String: "reports" [7156,7165]
            FIELD [7170,8879]
                String: "run_tests_torch_cuda_extensions_gpu" [7170,7207]
                OBJECT [7208,8879]
                    FIELD [7209,7260]
                        String: "runs-on" [7209,7218]
                        ARRAY [7219,7260]
                            STRING [7220,7233]
                                String: "self-hosted" [7220,7233]
                            STRING [7234,7246]
                                String: "docker-gpu" [7234,7246]
                            STRING [7247,7259]
                                String: "single-gpu" [7247,7259]
                    FIELD [7261,7414]
                        String: "container" [7261,7272]
                        OBJECT [7273,7414]
                            FIELD [7274,7316]
                                String: "image" [7274,7281]
                                STRING [7282,7316]
                                    String: "nvcr.io/nvidia/pytorch:21.03-py3" [7282,7316]
                            FIELD [7317,7413]
                                String: "options" [7317,7326]
                                STRING [7327,7413]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [7327,7413]
                    FIELD [7415,8878]
                        String: "steps" [7415,7422]
                        ARRAY [7423,8878]
                            OBJECT [7424,7504]
                                FIELD [7425,7449]
                                    String: "name" [7425,7431]
                                    STRING [7432,7449]
                                        String: "Launcher docker" [7432,7449]
                                FIELD [7450,7478]
                                    String: "uses" [7450,7456]
                                    STRING [7457,7478]
                                        String: "actions/checkout@v2" [7457,7478]
                                FIELD [7479,7503]
                                    String: "with" [7479,7485]
                                    OBJECT [7486,7503]
                                        FIELD [7487,7502]
                                            String: "fetch-depth" [7487,7500]
                                            NUMBER [7501,7502]
                                                Number: 2 [7501,7502]
                            OBJECT [7505,7547]
                                FIELD [7506,7525]
                                    String: "name" [7506,7512]
                                    STRING [7513,7525]
                                        String: "NVIDIA-SMI" [7513,7525]
                                FIELD [7526,7546]
                                    String: "run" [7526,7531]
                                    STRING [7532,7546]
                                        String: "nvidia-smi\n" [7532,7546]
                            OBJECT [7548,7693]
                                FIELD [7549,7578]
                                    String: "name" [7549,7555]
                                    STRING [7556,7578]
                                        String: "Install dependencies" [7556,7578]
                                FIELD [7579,7692]
                                    String: "run" [7579,7584]
                                    STRING [7585,7692]
                                        String: "apt -y update && apt install -y libaio-dev\npip install --upgrade pip\npip install .[testing,deepspeed]\n" [7585,7692]
                            OBJECT [7694,8083]
                                FIELD [7695,7744]
                                    String: "name" [7695,7701]
                                    STRING [7702,7744]
                                        String: "Are GPUs recognized by our DL frameworks" [7702,7744]
                                FIELD [7745,8082]
                                    String: "run" [7745,7750]
                                    STRING [7751,8082]
                                        String: "python -c \"import torch; print('Cuda available:', torch.cuda.is_available())\"\npython -c \"import torch; print('Cuda version:', torch.version.cuda)\"\npython -c \"import torch; print('CuDNN version:', torch.backends.cudnn.version())\"\npython -c \"import torch; print('Number of GPUs available:', torch.cuda.device_count())\"\n" [7751,8082]
                            OBJECT [8084,8249]
                                FIELD [8085,8116]
                                    String: "name" [8085,8091]
                                    STRING [8092,8116]
                                        String: "Fetch the tests to run" [8092,8116]
                                FIELD [8117,8248]
                                    String: "run" [8117,8122]
                                    STRING [8123,8248]
                                        String: "python utils/tests_fetcher.py --diff_with_last_commit --filters tests/deepspeed tests/extended | tee test_preparation.txt\n" [8123,8248]
                            OBJECT [8250,8378]
                                FIELD [8251,8280]
                                    String: "name" [8251,8257]
                                    STRING [8258,8280]
                                        String: "Report fetched tests" [8258,8280]
                                FIELD [8281,8316]
                                    String: "uses" [8281,8287]
                                    STRING [8288,8316]
                                        String: "actions/upload-artifact@v2" [8288,8316]
                                FIELD [8317,8377]
                                    String: "with" [8317,8323]
                                    OBJECT [8324,8377]
                                        FIELD [8325,8346]
                                            String: "name" [8325,8331]
                                            STRING [8332,8346]
                                                String: "test_fetched" [8332,8346]
                                        FIELD [8347,8376]
                                            String: "path" [8347,8353]
                                            STRING [8354,8376]
                                                String: "test_preparation.txt" [8354,8376]
                            OBJECT [8379,8566]
                                FIELD [8380,8409]
                                    String: "name" [8380,8386]
                                    STRING [8387,8409]
                                        String: "Run all tests on GPU" [8387,8409]
                                FIELD [8410,8565]
                                    String: "run" [8410,8415]
                                    STRING [8416,8565]
                                        String: "if [ -f test_list.txt ]; then\n  python -m pytest -n 1 --dist=loadfile -v --make-reports=tests_torch_cuda_extensions_gpu $(cat test_list.txt)\nfi\n" [8416,8565]
                            OBJECT [8567,8694]
                                FIELD [8568,8598]
                                    String: "name" [8568,8574]
                                    STRING [8575,8598]
                                        String: "Failure short reports" [8575,8598]
                                FIELD [8599,8622]
                                    String: "if" [8599,8603]
                                    STRING [8604,8622]
                                        String: "${{ failure() }}" [8604,8622]
                                FIELD [8623,8693]
                                    String: "run" [8623,8628]
                                    STRING [8629,8693]
                                        String: "cat reports/tests_torch_cuda_extensions_gpu_failures_short.txt" [8629,8693]
                            OBJECT [8695,8877]
                                FIELD [8696,8733]
                                    String: "name" [8696,8702]
                                    STRING [8703,8733]
                                        String: "Test suite reports artifacts" [8703,8733]
                                FIELD [8734,8756]
                                    String: "if" [8734,8738]
                                    STRING [8739,8756]
                                        String: "${{ always() }}" [8739,8756]
                                FIELD [8757,8792]
                                    String: "uses" [8757,8763]
                                    STRING [8764,8792]
                                        String: "actions/upload-artifact@v2" [8764,8792]
                                FIELD [8793,8876]
                                    String: "with" [8793,8799]
                                    OBJECT [8800,8876]
                                        FIELD [8801,8858]
                                            String: "name" [8801,8807]
                                            STRING [8808,8858]
                                                String: "run_tests_torch_cuda_extensions_gpu_test_reports" [8808,8858]
                                        FIELD [8859,8875]
                                            String: "path" [8859,8865]
                                            STRING [8866,8875]
                                                String: "reports" [8866,8875]
            FIELD [8880,10647]
                String: "run_tests_torch_cuda_extensions_multi_gpu" [8880,8923]
                OBJECT [8924,10647]
                    FIELD [8925,8975]
                        String: "runs-on" [8925,8934]
                        ARRAY [8935,8975]
                            STRING [8936,8949]
                                String: "self-hosted" [8936,8949]
                            STRING [8950,8962]
                                String: "docker-gpu" [8950,8962]
                            STRING [8963,8974]
                                String: "multi-gpu" [8963,8974]
                    FIELD [8976,9129]
                        String: "container" [8976,8987]
                        OBJECT [8988,9129]
                            FIELD [8989,9031]
                                String: "image" [8989,8996]
                                STRING [8997,9031]
                                    String: "nvcr.io/nvidia/pytorch:21.03-py3" [8997,9031]
                            FIELD [9032,9128]
                                String: "options" [9032,9041]
                                STRING [9042,9128]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [9042,9128]
                    FIELD [9130,10646]
                        String: "steps" [9130,9137]
                        ARRAY [9138,10646]
                            OBJECT [9139,9219]
                                FIELD [9140,9164]
                                    String: "name" [9140,9146]
                                    STRING [9147,9164]
                                        String: "Launcher docker" [9147,9164]
                                FIELD [9165,9193]
                                    String: "uses" [9165,9171]
                                    STRING [9172,9193]
                                        String: "actions/checkout@v2" [9172,9193]
                                FIELD [9194,9218]
                                    String: "with" [9194,9200]
                                    OBJECT [9201,9218]
                                        FIELD [9202,9217]
                                            String: "fetch-depth" [9202,9215]
                                            NUMBER [9216,9217]
                                                Number: 2 [9216,9217]
                            OBJECT [9220,9287]
                                FIELD [9221,9240]
                                    String: "name" [9221,9227]
                                    STRING [9228,9240]
                                        String: "NVIDIA-SMI" [9228,9240]
                                FIELD [9241,9265]
                                    String: "continue-on-error" [9241,9260]
                                    TRUE [9261,9265]
                                FIELD [9266,9286]
                                    String: "run" [9266,9271]
                                    STRING [9272,9286]
                                        String: "nvidia-smi\n" [9272,9286]
                            OBJECT [9288,9443]
                                FIELD [9289,9318]
                                    String: "name" [9289,9295]
                                    STRING [9296,9318]
                                        String: "Install dependencies" [9296,9318]
                                FIELD [9319,9442]
                                    String: "run" [9319,9324]
                                    STRING [9325,9442]
                                        String: "apt -y update && apt install -y libaio-dev\npip install --upgrade pip\npip install .[testing,deepspeed,fairscale]\n" [9325,9442]
                            OBJECT [9444,9833]
                                FIELD [9445,9494]
                                    String: "name" [9445,9451]
                                    STRING [9452,9494]
                                        String: "Are GPUs recognized by our DL frameworks" [9452,9494]
                                FIELD [9495,9832]
                                    String: "run" [9495,9500]
                                    STRING [9501,9832]
                                        String: "python -c \"import torch; print('Cuda available:', torch.cuda.is_available())\"\npython -c \"import torch; print('Cuda version:', torch.version.cuda)\"\npython -c \"import torch; print('CuDNN version:', torch.backends.cudnn.version())\"\npython -c \"import torch; print('Number of GPUs available:', torch.cuda.device_count())\"\n" [9501,9832]
                            OBJECT [9834,9999]
                                FIELD [9835,9866]
                                    String: "name" [9835,9841]
                                    STRING [9842,9866]
                                        String: "Fetch the tests to run" [9842,9866]
                                FIELD [9867,9998]
                                    String: "run" [9867,9872]
                                    STRING [9873,9998]
                                        String: "python utils/tests_fetcher.py --diff_with_last_commit --filters tests/deepspeed tests/extended | tee test_preparation.txt\n" [9873,9998]
                            OBJECT [10000,10128]
                                FIELD [10001,10030]
                                    String: "name" [10001,10007]
                                    STRING [10008,10030]
                                        String: "Report fetched tests" [10008,10030]
                                FIELD [10031,10066]
                                    String: "uses" [10031,10037]
                                    STRING [10038,10066]
                                        String: "actions/upload-artifact@v2" [10038,10066]
                                FIELD [10067,10127]
                                    String: "with" [10067,10073]
                                    OBJECT [10074,10127]
                                        FIELD [10075,10096]
                                            String: "name" [10075,10081]
                                            STRING [10082,10096]
                                                String: "test_fetched" [10082,10096]
                                        FIELD [10097,10126]
                                            String: "path" [10097,10103]
                                            STRING [10104,10126]
                                                String: "test_preparation.txt" [10104,10126]
                            OBJECT [10129,10322]
                                FIELD [10130,10159]
                                    String: "name" [10130,10136]
                                    STRING [10137,10159]
                                        String: "Run all tests on GPU" [10137,10159]
                                FIELD [10160,10321]
                                    String: "run" [10160,10165]
                                    STRING [10166,10321]
                                        String: "if [ -f test_list.txt ]; then\n  python -m pytest -n 1 --dist=loadfile -v --make-reports=tests_torch_cuda_extensions_multi_gpu $(cat test_list.txt)\nfi\n" [10166,10321]
                            OBJECT [10323,10456]
                                FIELD [10324,10354]
                                    String: "name" [10324,10330]
                                    STRING [10331,10354]
                                        String: "Failure short reports" [10331,10354]
                                FIELD [10355,10378]
                                    String: "if" [10355,10359]
                                    STRING [10360,10378]
                                        String: "${{ failure() }}" [10360,10378]
                                FIELD [10379,10455]
                                    String: "run" [10379,10384]
                                    STRING [10385,10455]
                                        String: "cat reports/tests_torch_cuda_extensions_multi_gpu_failures_short.txt" [10385,10455]
                            OBJECT [10457,10645]
                                FIELD [10458,10495]
                                    String: "name" [10458,10464]
                                    STRING [10465,10495]
                                        String: "Test suite reports artifacts" [10465,10495]
                                FIELD [10496,10518]
                                    String: "if" [10496,10500]
                                    STRING [10501,10518]
                                        String: "${{ always() }}" [10501,10518]
                                FIELD [10519,10554]
                                    String: "uses" [10519,10525]
                                    STRING [10526,10554]
                                        String: "actions/upload-artifact@v2" [10526,10554]
                                FIELD [10555,10644]
                                    String: "with" [10555,10561]
                                    OBJECT [10562,10644]
                                        FIELD [10563,10626]
                                            String: "name" [10563,10569]
                                            STRING [10570,10626]
                                                String: "run_tests_torch_cuda_extensions_multi_gpu_test_reports" [10570,10626]
                                        FIELD [10627,10643]
                                            String: "path" [10627,10633]
                                            STRING [10634,10643]
                                                String: "reports" [10634,10643]
            FIELD [10648,11192]
                String: "send_results" [10648,10662]
                OBJECT [10663,11192]
                    FIELD [10664,10696]
                        String: "name" [10664,10670]
                        STRING [10671,10696]
                            String: "Send results to webhook" [10671,10696]
                    FIELD [10697,10722]
                        String: "runs-on" [10697,10706]
                        STRING [10707,10722]
                            String: "ubuntu-latest" [10707,10722]
                    FIELD [10723,10738]
                        String: "if" [10723,10727]
                        STRING [10728,10738]
                            String: "always()" [10728,10738]
                    FIELD [10739,10880]
                        String: "needs" [10739,10746]
                        ARRAY [10747,10880]
                            STRING [10748,10769]
                                String: "run_tests_torch_gpu" [10748,10769]
                            STRING [10770,10797]
                                String: "run_tests_torch_multi_gpu" [10770,10797]
                            STRING [10798,10835]
                                String: "run_tests_torch_cuda_extensions_gpu" [10798,10835]
                            STRING [10836,10879]
                                String: "run_tests_torch_cuda_extensions_multi_gpu" [10836,10879]
                    FIELD [10881,11191]
                        String: "steps" [10881,10888]
                        ARRAY [10889,11191]
                            OBJECT [10890,10920]
                                FIELD [10891,10919]
                                    String: "uses" [10891,10897]
                                    STRING [10898,10919]
                                        String: "actions/checkout@v2" [10898,10919]
                            OBJECT [10921,10960]
                                FIELD [10922,10959]
                                    String: "uses" [10922,10928]
                                    STRING [10929,10959]
                                        String: "actions/download-artifact@v2" [10929,10959]
                            OBJECT [10961,11190]
                                FIELD [10962,10992]
                                    String: "name" [10962,10968]
                                    STRING [10969,10992]
                                        String: "Send message to Slack" [10969,10992]
                                FIELD [10993,11116]
                                    String: "env" [10993,10998]
                                    OBJECT [10999,11116]
                                        FIELD [11000,11056]
                                            String: "CI_SLACK_BOT_TOKEN" [11000,11020]
                                            STRING [11021,11056]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [11021,11056]
                                        FIELD [11057,11115]
                                            String: "CI_SLACK_CHANNEL_ID" [11057,11078]
                                            STRING [11079,11115]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [11079,11115]
                                FIELD [11117,11189]
                                    String: "run" [11117,11122]
                                    STRING [11123,11189]
                                        String: "pip install slack_sdk\npython utils/notification_service.py push" [11123,11189]