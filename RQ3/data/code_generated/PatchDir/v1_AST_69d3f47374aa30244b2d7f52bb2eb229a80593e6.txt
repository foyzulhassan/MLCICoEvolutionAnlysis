OBJECT [0,3663]
    FIELD [1,21]
        String: "name" [1,7]
        STRING [8,21]
            String: "master only" [8,21]
    FIELD [22,75]
        String: "on" [22,26]
        OBJECT [27,75]
            FIELD [28,74]
                String: "push" [28,34]
                OBJECT [35,74]
                    FIELD [36,55]
                        String: "branches" [36,46]
                        STRING [47,55]
                            String: "master" [47,55]
                    FIELD [56,73]
                        String: "tags" [56,62]
                        ARRAY [63,73]
                            STRING [64,72]
                                String: "v*.*.*" [64,72]
    FIELD [76,3662]
        String: "jobs" [76,82]
        OBJECT [83,3662]
            FIELD [84,2490]
                String: "build-docker-images" [84,105]
                OBJECT [106,2490]
                    FIELD [107,132]
                        String: "runs-on" [107,116]
                        ARRAY [117,132]
                            STRING [118,131]
                                String: "self-hosted" [118,131]
                    FIELD [133,218]
                        String: "strategy" [133,143]
                        OBJECT [144,218]
                            FIELD [145,217]
                                String: "matrix" [145,153]
                                OBJECT [154,217]
                                    FIELD [155,216]
                                        String: "component" [155,166]
                                        ARRAY [167,216]
                                            STRING [168,174]
                                                String: "core" [168,174]
                                            STRING [175,184]
                                                String: "serving" [175,184]
                                            STRING [185,200]
                                                String: "jobcontroller" [185,200]
                                            STRING [201,210]
                                                String: "jupyter" [201,210]
                                            STRING [211,215]
                                                String: "ci" [211,215]
                    FIELD [219,316]
                        String: "env" [219,224]
                        OBJECT [225,316]
                            FIELD [226,293]
                                String: "MAVEN_CACHE" [226,239]
                                STRING [240,293]
                                    String: "gs://feast-templocation-kf-feast/.m2.2020-08-19.tar" [240,293]
                            FIELD [294,315]
                                String: "DOCKER_BUILDKIT" [294,311]
                                STRING [312,315]
                                    String: "1" [312,315]
                    FIELD [317,2489]
                        String: "steps" [317,324]
                        ARRAY [325,2489]
                            OBJECT [326,356]
                                FIELD [327,355]
                                    String: "uses" [327,333]
                                    STRING [334,355]
                                        String: "actions/checkout@v2" [334,355]
                            OBJECT [357,485]
                                FIELD [358,421]
                                    String: "uses" [358,364]
                                    STRING [365,421]
                                        String: "GoogleCloudPlatform/github-actions/setup-gcloud@master" [365,421]
                                FIELD [422,484]
                                    String: "with" [422,428]
                                    OBJECT [429,484]
                                        FIELD [430,449]
                                            String: "version" [430,439]
                                            STRING [440,449]
                                                String: "290.0.1" [440,449]
                                        FIELD [450,483]
                                            String: "export_default_credentials" [450,478]
                                            TRUE [479,483]
                            OBJECT [486,532]
                                FIELD [487,531]
                                    String: "run" [487,492]
                                    STRING [493,531]
                                        String: "gcloud auth configure-docker --quiet" [493,531]
                            OBJECT [533,656]
                                FIELD [534,555]
                                    String: "name" [534,540]
                                    STRING [541,555]
                                        String: "Get m2 cache" [541,555]
                                FIELD [556,655]
                                    String: "run" [556,561]
                                    STRING [562,655]
                                        String: "infra/scripts/download-maven-cache.sh \\\n--archive-uri ${MAVEN_CACHE} \\\n--output-dir .\n" [562,655]
                            OBJECT [657,776]
                                FIELD [658,678]
                                    String: "name" [658,664]
                                    STRING [665,678]
                                        String: "Build image" [665,678]
                                FIELD [679,775]
                                    String: "run" [679,684]
                                    STRING [685,775]
                                        String: "make build-${{ matrix.component }}-docker REGISTRY=gcr.io/kf-feast VERSION=${GITHUB_SHA}" [685,775]
                            OBJECT [777,894]
                                FIELD [778,797]
                                    String: "name" [778,784]
                                    STRING [785,797]
                                        String: "Push image" [785,797]
                                FIELD [798,893]
                                    String: "run" [798,803]
                                    STRING [804,893]
                                        String: "make push-${{ matrix.component }}-docker REGISTRY=gcr.io/kf-feast VERSION=${GITHUB_SHA}" [804,893]
                            OBJECT [895,1195]
                                FIELD [896,934]
                                    String: "name" [896,902]
                                    STRING [903,934]
                                        String: "Push development Docker image" [903,934]
                                FIELD [935,1194]
                                    String: "run" [935,940]
                                    STRING [941,1194]
                                        String: "if [ ${GITHUB_REF#refs/*/} == \"master\" ]; then\n  docker tag gcr.io/kf-feast/feast-${{ matrix.component }}:${GITHUB_SHA} gcr.io/kf-feast/feast-${{ matrix.component }}:develop\n  docker push gcr.io/kf-feast/feast-${{ matrix.component }}:develop\nfi\n" [941,1194]
                            OBJECT [1196,1285]
                                FIELD [1197,1217]
                                    String: "name" [1197,1203]
                                    STRING [1204,1217]
                                        String: "Get version" [1204,1217]
                                FIELD [1218,1284]
                                    String: "run" [1218,1223]
                                    STRING [1224,1284]
                                        String: "echo ::set-env name=RELEASE_VERSION::${GITHUB_REF#refs/*/}" [1224,1284]
                            OBJECT [1286,2488]
                                FIELD [1287,1323]
                                    String: "name" [1287,1293]
                                    STRING [1294,1323]
                                        String: "Push versioned Docker image" [1294,1323]
                                FIELD [1324,2487]
                                    String: "run" [1324,1329]
                                    STRING [1330,2487]
                                        String: "source infra/scripts/setup-common-functions.sh\n# Build and push semver tagged commits\n# Regular expression should match MAJOR.MINOR.PATCH[-PRERELEASE[.IDENTIFIER]]\n# eg. v0.7.1 v0.7.2-alpha v0.7.2-rc.1\nSEMVER_REGEX='^v[0-9]+\\.[0-9]+\\.[0-9]+(-([0-9A-Za-z-]+(\\.[0-9A-Za-z-]+)*))?$'\nif echo \"${RELEASE_VERSION}\" | grep -P \"$SEMVER_REGEX\" &>/dev/null ; then\n  VERSION_WITHOUT_PREFIX=${RELEASE_VERSION:1}\n\n  docker tag gcr.io/kf-feast/feast-${{ matrix.component }}:${GITHUB_SHA} gcr.io/kf-feast/feast-${{ matrix.component }}:${VERSION_WITHOUT_PREFIX}\n  docker push gcr.io/kf-feast/feast-${{ matrix.component }}:${VERSION_WITHOUT_PREFIX}\n\n  # Also update \"latest\" image if tagged commit is pushed to stable branch\n  HIGHEST_SEMVER_TAG=$(get_tag_release -m)\n  echo \"Only push to latest tag if tag is the highest semver version $HIGHEST_SEMVER_TAG\"\n\n  if [ \"${VERSION_WITHOUT_PREFIX}\" = \"${HIGHEST_SEMVER_TAG:1}\" ]\n  then\n    docker tag gcr.io/kf-feast/feast-${{ matrix.component }}:${GITHUB_SHA} gcr.io/kf-feast/feast-${{ matrix.component }}:latest\n    docker push gcr.io/kf-feast/feast-${{ matrix.component }}:latest\n  fi\nfi\n" [1330,2487]
            FIELD [2491,3661]
                String: "publish-ingestion-jar" [2491,2514]
                OBJECT [2515,3661]
                    FIELD [2516,2541]
                        String: "runs-on" [2516,2525]
                        ARRAY [2526,2541]
                            STRING [2527,2540]
                                String: "self-hosted" [2527,2540]
                    FIELD [2542,2579]
                        String: "env" [2542,2547]
                        OBJECT [2548,2579]
                            FIELD [2549,2578]
                                String: "PUBLISH_BUCKET" [2549,2565]
                                STRING [2566,2578]
                                    String: "feast-jobs" [2566,2578]
                    FIELD [2580,3660]
                        String: "steps" [2580,2587]
                        ARRAY [2588,3660]
                            OBJECT [2589,2619]
                                FIELD [2590,2618]
                                    String: "uses" [2590,2596]
                                    STRING [2597,2618]
                                        String: "actions/checkout@v2" [2597,2618]
                            OBJECT [2620,2748]
                                FIELD [2621,2684]
                                    String: "uses" [2621,2627]
                                    STRING [2628,2684]
                                        String: "GoogleCloudPlatform/github-actions/setup-gcloud@master" [2628,2684]
                                FIELD [2685,2747]
                                    String: "with" [2685,2691]
                                    OBJECT [2692,2747]
                                        FIELD [2693,2712]
                                            String: "version" [2693,2702]
                                            STRING [2703,2712]
                                                String: "290.0.1" [2703,2712]
                                        FIELD [2713,2746]
                                            String: "export_default_credentials" [2713,2741]
                                            TRUE [2742,2746]
                            OBJECT [2749,2810]
                                FIELD [2750,2780]
                                    String: "uses" [2750,2756]
                                    STRING [2757,2780]
                                        String: "actions/setup-java@v1" [2757,2780]
                                FIELD [2781,2809]
                                    String: "with" [2781,2787]
                                    OBJECT [2788,2809]
                                        FIELD [2789,2808]
                                            String: "java-version" [2789,2803]
                                            STRING [2804,2808]
                                                String: "11" [2804,2808]
                            OBJECT [2811,2879]
                                FIELD [2812,2845]
                                    String: "uses" [2812,2818]
                                    STRING [2819,2845]
                                        String: "stCarolas/setup-maven@v3" [2819,2845]
                                FIELD [2846,2878]
                                    String: "with" [2846,2852]
                                    OBJECT [2853,2878]
                                        FIELD [2854,2877]
                                            String: "maven-version" [2854,2869]
                                            STRING [2870,2877]
                                                String: "3.6.3" [2870,2877]
                            OBJECT [2880,3151]
                                FIELD [2881,2930]
                                    String: "name" [2881,2887]
                                    STRING [2888,2930]
                                        String: "Publish develop version of ingestion job" [2888,2930]
                                FIELD [2931,3150]
                                    String: "run" [2931,2936]
                                    STRING [2937,3150]
                                        String: "if [ ${GITHUB_REF#refs/*/} == \"master\" ]; then\n  make build-java-no-tests REVISION=develop\n  gsutil cp ./spark/ingestion/target/feast-ingestion-spark-develop.jar gs://${PUBLISH_BUCKET}/spark/ingestion/\nfi\n" [2937,3150]
                            OBJECT [3152,3241]
                                FIELD [3153,3173]
                                    String: "name" [3153,3159]
                                    STRING [3160,3173]
                                        String: "Get version" [3160,3173]
                                FIELD [3174,3240]
                                    String: "run" [3174,3179]
                                    STRING [3180,3240]
                                        String: "echo ::set-env name=RELEASE_VERSION::${GITHUB_REF#refs/*/}" [3180,3240]
                            OBJECT [3242,3659]
                                FIELD [3243,3291]
                                    String: "name" [3243,3249]
                                    STRING [3250,3291]
                                        String: "Publish tagged version of ingestion job" [3250,3291]
                                FIELD [3292,3658]
                                    String: "run" [3292,3297]
                                    STRING [3298,3658]
                                        String: "SEMVER_REGEX='^v[0-9]+\\.[0-9]+\\.[0-9]+(-([0-9A-Za-z-]+(\\.[0-9A-Za-z-]+)*))?$'\nif echo \"${RELEASE_VERSION}\" | grep -P \"$SEMVER_REGEX\" &>/dev/null ; then\n  VERSION=${RELEASE_VERSION:1}\n  make build-java-no-tests REVISION=${VERSION}\n  gsutil cp ./spark/ingestion/target/feast-ingestion-spark-${VERSION}.jar gs://${PUBLISH_BUCKET}/spark/ingestion/\nfi" [3298,3658]