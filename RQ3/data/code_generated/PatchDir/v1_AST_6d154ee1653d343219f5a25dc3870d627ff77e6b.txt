OBJECT [0,5663]
    FIELD [1,24]
        String: "name" [1,7]
        STRING [8,24]
            String: "OctoBot-Docker" [8,24]
    FIELD [25,101]
        String: "on" [25,29]
        OBJECT [30,101]
            FIELD [31,80]
                String: "push" [31,37]
                OBJECT [38,80]
                    FIELD [39,66]
                        String: "branches" [39,49]
                        ARRAY [50,66]
                            STRING [51,59]
                                String: "master" [51,59]
                            STRING [60,65]
                                String: "dev" [60,65]
                    FIELD [67,79]
                        String: "tags" [67,73]
                        ARRAY [74,79]
                            STRING [75,78]
                                String: "*" [75,78]
            FIELD [81,100]
                String: "pull_request" [81,95]
                NULL [96,100]
    FIELD [102,5662]
        String: "jobs" [102,108]
        OBJECT [109,5662]
            FIELD [110,374]
                String: "lint" [110,116]
                OBJECT [117,374]
                    FIELD [118,156]
                        String: "name" [118,124]
                        STRING [125,156]
                            String: "ubuntu-latest - Docker - lint" [125,156]
                    FIELD [157,182]
                        String: "runs-on" [157,166]
                        STRING [167,182]
                            String: "ubuntu-latest" [167,182]
                    FIELD [183,373]
                        String: "steps" [183,190]
                        ARRAY [191,373]
                            OBJECT [192,222]
                                FIELD [193,221]
                                    String: "uses" [193,199]
                                    STRING [200,221]
                                        String: "actions/checkout@v2" [200,221]
                            OBJECT [223,372]
                                FIELD [224,245]
                                    String: "name" [224,230]
                                    STRING [231,245]
                                        String: "Run hadolint" [231,245]
                                FIELD [246,283]
                                    String: "uses" [246,252]
                                    STRING [253,283]
                                        String: "reviewdog/action-hadolint@v1" [253,283]
                                FIELD [284,371]
                                    String: "with" [284,290]
                                    OBJECT [291,371]
                                        FIELD [292,336]
                                            String: "github_token" [292,306]
                                            STRING [307,336]
                                                String: "${{ secrets.github_token }}" [307,336]
                                        FIELD [337,370]
                                            String: "hadolint_ignore" [337,354]
                                            STRING [355,370]
                                                String: "DL3013 DL3008" [355,370]
            FIELD [375,5392]
                String: "build_test_push" [375,392]
                OBJECT [393,5392]
                    FIELD [394,408]
                        String: "needs" [394,401]
                        STRING [402,408]
                            String: "lint" [402,408]
                    FIELD [409,462]
                        String: "name" [409,415]
                        STRING [416,462]
                            String: "ubuntu-latest - Docker - build & test & push" [416,462]
                    FIELD [463,488]
                        String: "runs-on" [463,472]
                        STRING [473,488]
                            String: "ubuntu-latest" [473,488]
                    FIELD [489,5391]
                        String: "steps" [489,496]
                        ARRAY [497,5391]
                            OBJECT [498,528]
                                FIELD [499,527]
                                    String: "uses" [499,505]
                                    STRING [506,527]
                                        String: "actions/checkout@v2" [506,527]
                            OBJECT [529,1047]
                                FIELD [530,564]
                                    String: "name" [530,536]
                                    STRING [537,564]
                                        String: "Set Environment Variables" [537,564]
                                FIELD [565,1046]
                                    String: "run" [565,570]
                                    STRING [571,1046]
                                        String: "OWNER=\"$(echo \"${{ github.repository_owner }}\" | tr '[:upper:]' '[:lower:]' | tr -d '-')\"\nIMG=octobot\necho \"VERSION=${GITHUB_REF##*/}\" >> $GITHUB_ENV\necho \"IMAGE=${OWNER}/${IMG}\" >> $GITHUB_ENV\necho \"LATEST=latest\" >> $GITHUB_ENV\necho \"STABLE=stable\" >> $GITHUB_ENV\necho \"TEST=test\" >> $GITHUB_ENV\necho \"CONTAINER_NAME=octobot\" >> $GITHUB_ENV\necho \"CHECK_TENTACLE_CONTAINER_TIME=10\" >> $GITHUB_ENV\necho \"WAIT_CONTAINER_TIME=80\" >> $GITHUB_ENV\n" [571,1046]
                            OBJECT [1048,1410]
                                FIELD [1049,1076]
                                    String: "name" [1049,1055]
                                    STRING [1056,1076]
                                        String: "Wait for tentacles" [1056,1076]
                                FIELD [1077,1150]
                                    String: "if" [1077,1081]
                                    STRING [1082,1150]
                                        String: "github.event_name == 'push' && startsWith(github.ref, 'refs/tags')" [1082,1150]
                                FIELD [1151,1201]
                                    String: "uses" [1151,1157]
                                    STRING [1158,1201]
                                        String: "fountainhead/action-wait-for-check@v1.0.0" [1158,1201]
                                FIELD [1202,1227]
                                    String: "id" [1202,1206]
                                    STRING [1207,1227]
                                        String: "wait-for-tentacles" [1207,1227]
                                FIELD [1228,1409]
                                    String: "with" [1228,1234]
                                    OBJECT [1235,1409]
                                        FIELD [1236,1273]
                                            String: "token" [1236,1243]
                                            STRING [1244,1273]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [1244,1273]
                                        FIELD [1274,1333]
                                            String: "checkName" [1274,1285]
                                            STRING [1286,1333]
                                                String: "ubuntu-latest - Python 3.8 - upload tentacles" [1286,1333]
                                        FIELD [1334,1359]
                                            String: "ref" [1334,1339]
                                            STRING [1340,1359]
                                                String: "${{ github.ref }}" [1340,1359]
                                        FIELD [1360,1386]
                                            String: "repo" [1360,1366]
                                            STRING [1367,1386]
                                                String: "OctoBot-Tentacles" [1367,1386]
                                        FIELD [1387,1408]
                                            String: "timeoutSeconds" [1387,1403]
                                            NUMBER [1404,1408]
                                                Number: 3600 [1404,1408]
                            OBJECT [1411,1605]
                                FIELD [1412,1455]
                                    String: "name" [1412,1418]
                                    STRING [1419,1455]
                                        String: "Trigger fail when Tentacles failed" [1419,1455]
                                FIELD [1456,1589]
                                    String: "if" [1456,1460]
                                    STRING [1461,1589]
                                        String: "github.event_name == 'push' && startsWith(github.ref, 'refs/tags') && steps.wait-for-tentacles.outputs.conclusion == 'failure'" [1461,1589]
                                FIELD [1590,1604]
                                    String: "run" [1590,1595]
                                    STRING [1596,1604]
                                        String: "exit 1" [1596,1604]
                            OBJECT [1606,1665]
                                FIELD [1607,1627]
                                    String: "name" [1607,1613]
                                    STRING [1614,1627]
                                        String: "Set up QEMU" [1614,1627]
                                FIELD [1628,1664]
                                    String: "uses" [1628,1634]
                                    STRING [1635,1664]
                                        String: "docker/setup-qemu-action@v1" [1635,1664]
                            OBJECT [1666,1736]
                                FIELD [1667,1696]
                                    String: "name" [1667,1673]
                                    STRING [1674,1696]
                                        String: "Set up Docker Buildx" [1674,1696]
                                FIELD [1697,1735]
                                    String: "uses" [1697,1703]
                                    STRING [1704,1735]
                                        String: "docker/setup-buildx-action@v1" [1704,1735]
                            OBJECT [1737,1924]
                                FIELD [1738,1766]
                                    String: "name" [1738,1744]
                                    STRING [1745,1766]
                                        String: "Cache Docker layers" [1745,1766]
                                FIELD [1767,1792]
                                    String: "uses" [1767,1773]
                                    STRING [1774,1792]
                                        String: "actions/cache@v2" [1774,1792]
                                FIELD [1793,1923]
                                    String: "with" [1793,1799]
                                    OBJECT [1800,1923]
                                        FIELD [1801,1828]
                                            String: "path" [1801,1807]
                                            STRING [1808,1828]
                                                String: "/tmp/.buildx-cache" [1808,1828]
                                        FIELD [1829,1878]
                                            String: "key" [1829,1834]
                                            STRING [1835,1878]
                                                String: "${{ runner.os }}-buildx-${{ github.sha }}" [1835,1878]
                                        FIELD [1879,1922]
                                            String: "restore-keys" [1879,1893]
                                            STRING [1894,1922]
                                                String: "${{ runner.os }}-buildx-\n" [1894,1922]
                            OBJECT [1925,2121]
                                FIELD [1926,1953]
                                    String: "name" [1926,1932]
                                    STRING [1933,1953]
                                        String: "Login to DockerHub" [1933,1953]
                                FIELD [1954,1988]
                                    String: "if" [1954,1958]
                                    STRING [1959,1988]
                                        String: "github.event_name == 'push'" [1959,1988]
                                FIELD [1989,2020]
                                    String: "uses" [1989,1995]
                                    STRING [1996,2020]
                                        String: "docker/login-action@v1" [1996,2020]
                                FIELD [2021,2120]
                                    String: "with" [2021,2027]
                                    OBJECT [2028,2120]
                                        FIELD [2029,2075]
                                            String: "username" [2029,2039]
                                            STRING [2040,2075]
                                                String: "${{ secrets.DOCKERHUB_USERNAME }}" [2040,2075]
                                        FIELD [2076,2119]
                                            String: "password" [2076,2086]
                                            STRING [2087,2119]
                                                String: "${{ secrets.DOCKERHUB_TOKEN }}" [2087,2119]
                            OBJECT [2122,2384]
                                FIELD [2123,2156]
                                    String: "name" [2123,2129]
                                    STRING [2130,2156]
                                        String: "Wait for main build done" [2130,2156]
                                FIELD [2157,2191]
                                    String: "if" [2157,2161]
                                    STRING [2162,2191]
                                        String: "github.event_name == 'push'" [2162,2191]
                                FIELD [2192,2242]
                                    String: "uses" [2192,2198]
                                    STRING [2199,2242]
                                        String: "fountainhead/action-wait-for-check@v1.0.0" [2199,2242]
                                FIELD [2243,2269]
                                    String: "id" [2243,2247]
                                    STRING [2248,2269]
                                        String: "wait-for-main-build" [2248,2269]
                                FIELD [2270,2383]
                                    String: "with" [2270,2276]
                                    OBJECT [2277,2383]
                                        FIELD [2278,2315]
                                            String: "token" [2278,2285]
                                            STRING [2286,2315]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [2286,2315]
                                        FIELD [2316,2334]
                                            String: "checkName" [2316,2327]
                                            STRING [2328,2334]
                                                String: "Done" [2328,2334]
                                        FIELD [2335,2360]
                                            String: "ref" [2335,2340]
                                            STRING [2341,2360]
                                                String: "${{ github.sha }}" [2341,2360]
                                        FIELD [2361,2382]
                                            String: "timeoutSeconds" [2361,2377]
                                            NUMBER [2378,2382]
                                                Number: 3600 [2378,2382]
                            OBJECT [2385,2536]
                                FIELD [2386,2424]
                                    String: "name" [2386,2392]
                                    STRING [2393,2424]
                                        String: "Trigger fail when Main failed" [2393,2424]
                                FIELD [2425,2520]
                                    String: "if" [2425,2429]
                                    STRING [2430,2520]
                                        String: "github.event_name == 'push' && steps.wait-for-main-build.outputs.conclusion == 'failure'" [2430,2520]
                                FIELD [2521,2535]
                                    String: "run" [2521,2526]
                                    STRING [2527,2535]
                                        String: "exit 1" [2527,2535]
                            OBJECT [2537,2954]
                                FIELD [2538,2568]
                                    String: "name" [2538,2544]
                                    STRING [2545,2568]
                                        String: "Build and push latest" [2545,2568]
                                FIELD [2569,2603]
                                    String: "if" [2569,2573]
                                    STRING [2574,2603]
                                        String: "github.event_name != 'push'" [2574,2603]
                                FIELD [2604,2640]
                                    String: "uses" [2604,2610]
                                    STRING [2611,2640]
                                        String: "docker/build-push-action@v2" [2611,2640]
                                FIELD [2641,2953]
                                    String: "with" [2641,2647]
                                    OBJECT [2648,2953]
                                        FIELD [2649,2662]
                                            String: "context" [2649,2658]
                                            STRING [2659,2662]
                                                String: "." [2659,2662]
                                        FIELD [2663,2707]
                                            String: "builder" [2663,2672]
                                            STRING [2673,2707]
                                                String: "${{ steps.buildx.outputs.name }}" [2673,2707]
                                        FIELD [2708,2733]
                                            String: "platforms" [2708,2719]
                                            STRING [2720,2733]
                                                String: "linux/amd64" [2720,2733]
                                        FIELD [2734,2745]
                                            String: "load" [2734,2740]
                                            TRUE [2741,2745]
                                        FIELD [2746,2758]
                                            String: "push" [2746,2752]
                                            FALSE [2753,2758]
                                        FIELD [2759,2802]
                                            String: "tags" [2759,2765]
                                            STRING [2766,2802]
                                                String: "${{ env.IMAGE }}:${{ env.LATEST }}" [2766,2802]
                                        FIELD [2803,2855]
                                            String: "build-args" [2803,2815]
                                            STRING [2816,2855]
                                                String: "TENTACLES_URL_TAG=${{ env.LATEST }}\n" [2816,2855]
                                        FIELD [2856,2904]
                                            String: "cache-from" [2856,2868]
                                            STRING [2869,2904]
                                                String: "type=local,src=/tmp/.buildx-cache" [2869,2904]
                                        FIELD [2905,2952]
                                            String: "cache-to" [2905,2915]
                                            STRING [2916,2952]
                                                String: "type=local,dest=/tmp/.buildx-cache" [2916,2952]
                            OBJECT [2955,3172]
                                FIELD [2956,2992]
                                    String: "name" [2956,2962]
                                    STRING [2963,2992]
                                        String: "Docker build test container" [2963,2992]
                                FIELD [2993,3027]
                                    String: "if" [2993,2997]
                                    STRING [2998,3027]
                                        String: "github.event_name != 'push'" [2998,3027]
                                FIELD [3028,3171]
                                    String: "run" [3028,3033]
                                    STRING [3034,3171]
                                        String: "docker build -f ./tests/Dockerfile --build-arg OCTOBOT_IMAGE=${{ env.IMAGE }}:${{ env.LATEST }} -t ${{ env.IMAGE }}:${{ env.TEST }} .\n" [3034,3171]
                            OBJECT [3173,3373]
                                FIELD [3174,3202]
                                    String: "name" [3174,3180]
                                    STRING [3181,3202]
                                        String: "run tests in docker" [3181,3202]
                                FIELD [3203,3237]
                                    String: "if" [3203,3207]
                                    STRING [3208,3237]
                                        String: "github.event_name != 'push'" [3208,3237]
                                FIELD [3238,3372]
                                    String: "run" [3238,3243]
                                    STRING [3244,3372]
                                        String: "docker run -i -e TENTACLES_PACKAGES_SOURCE=dev -e TENTACLES_URL_TAG=${GITHUB_HEAD_REF////_} ${{ env.IMAGE }}:${{ env.TEST }}\n" [3244,3372]
                            OBJECT [3374,4286]
                                FIELD [3375,3416]
                                    String: "name" [3375,3381]
                                    STRING [3382,3416]
                                        String: "run and check health after start" [3382,3416]
                                FIELD [3417,3451]
                                    String: "if" [3417,3421]
                                    STRING [3422,3451]
                                        String: "github.event_name != 'push'" [3422,3451]
                                FIELD [3452,4285]
                                    String: "run" [3452,3457]
                                    STRING [3458,4285]
                                        String: "echo Start OctoBot docker with branche_name tentacles package\ndocker run -id -e TENTACLES_PACKAGES_SOURCE=dev -e TENTACLES_URL_TAG=${GITHUB_HEAD_REF////_} --name ${{ env.CONTAINER_NAME }} ${{ env.IMAGE }}:${{ env.LATEST }}\nsleep ${{ env.CHECK_TENTACLE_CONTAINER_TIME }}\nif docker logs ${{ env.CONTAINER_NAME }} | grep \"octobot_tentacles_manager.api.util.tentacles_management Can't find tentacle archive at:\" ; then\n    docker rm -f ${{ env.CONTAINER_NAME }}\n    echo Restarting docker with latest tentacle package...\n    docker run -id -e TENTACLES_URL_TAG=${{ env.LATEST }} --name ${{ env.CONTAINER_NAME }} ${{ env.IMAGE }}:${{ env.LATEST }}\nfi\nsleep ${{ env.WAIT_CONTAINER_TIME }}\ndocker logs ${{ env.CONTAINER_NAME }}\ndocker inspect ${{ env.CONTAINER_NAME }} | jq '.[].State.Health.Status' | grep \"healthy\"\n" [3458,4285]
                            OBJECT [4287,4790]
                                FIELD [4288,4318]
                                    String: "name" [4288,4294]
                                    STRING [4295,4318]
                                        String: "Build and push latest" [4295,4318]
                                FIELD [4319,4427]
                                    String: "if" [4319,4323]
                                    STRING [4324,4427]
                                        String: "github.event_name == 'push' && !startsWith(github.ref, 'refs/tags') && github.ref == 'refs/heads/dev'" [4324,4427]
                                FIELD [4428,4464]
                                    String: "uses" [4428,4434]
                                    STRING [4435,4464]
                                        String: "docker/build-push-action@v2" [4435,4464]
                                FIELD [4465,4789]
                                    String: "with" [4465,4471]
                                    OBJECT [4472,4789]
                                        FIELD [4473,4486]
                                            String: "context" [4473,4482]
                                            STRING [4483,4486]
                                                String: "." [4483,4486]
                                        FIELD [4487,4531]
                                            String: "builder" [4487,4496]
                                            STRING [4497,4531]
                                                String: "${{ steps.buildx.outputs.name }}" [4497,4531]
                                        FIELD [4532,4582]
                                            String: "platforms" [4532,4543]
                                            STRING [4544,4582]
                                                String: "linux/amd64,linux/arm/v7,linux/arm64" [4544,4582]
                                        FIELD [4583,4594]
                                            String: "push" [4583,4589]
                                            TRUE [4590,4594]
                                        FIELD [4595,4638]
                                            String: "tags" [4595,4601]
                                            STRING [4602,4638]
                                                String: "${{ env.IMAGE }}:${{ env.LATEST }}" [4602,4638]
                                        FIELD [4639,4691]
                                            String: "build-args" [4639,4651]
                                            STRING [4652,4691]
                                                String: "TENTACLES_URL_TAG=${{ env.LATEST }}\n" [4652,4691]
                                        FIELD [4692,4740]
                                            String: "cache-from" [4692,4704]
                                            STRING [4705,4740]
                                                String: "type=local,src=/tmp/.buildx-cache" [4705,4740]
                                        FIELD [4741,4788]
                                            String: "cache-to" [4741,4751]
                                            STRING [4752,4788]
                                                String: "type=local,dest=/tmp/.buildx-cache" [4752,4788]
                            OBJECT [4791,5303]
                                FIELD [4792,4822]
                                    String: "name" [4792,4798]
                                    STRING [4799,4822]
                                        String: "Build and push on tag" [4799,4822]
                                FIELD [4823,4896]
                                    String: "if" [4823,4827]
                                    STRING [4828,4896]
                                        String: "github.event_name == 'push' && startsWith(github.ref, 'refs/tags')" [4828,4896]
                                FIELD [4897,4933]
                                    String: "uses" [4897,4903]
                                    STRING [4904,4933]
                                        String: "docker/build-push-action@v2" [4904,4933]
                                FIELD [4934,5302]
                                    String: "with" [4934,4940]
                                    OBJECT [4941,5302]
                                        FIELD [4942,4955]
                                            String: "context" [4942,4951]
                                            STRING [4952,4955]
                                                String: "." [4952,4955]
                                        FIELD [4956,4977]
                                            String: "file" [4956,4962]
                                            STRING [4963,4977]
                                                String: "./Dockerfile" [4963,4977]
                                        FIELD [4978,5022]
                                            String: "builder" [4978,4987]
                                            STRING [4988,5022]
                                                String: "${{ steps.buildx.outputs.name }}" [4988,5022]
                                        FIELD [5023,5073]
                                            String: "platforms" [5023,5034]
                                            STRING [5035,5073]
                                                String: "linux/amd64,linux/arm/v7,linux/arm64" [5035,5073]
                                        FIELD [5074,5085]
                                            String: "push" [5074,5080]
                                            TRUE [5081,5085]
                                        FIELD [5086,5204]
                                            String: "tags" [5086,5092]
                                            STRING [5093,5204]
                                                String: "${{ env.IMAGE }}:${{ env.LATEST }}\n${{ env.IMAGE }}:${{ env.STABLE }}\n${{ env.IMAGE }}:${{ env.VERSION }}\n" [5093,5204]
                                        FIELD [5205,5253]
                                            String: "cache-from" [5205,5217]
                                            STRING [5218,5253]
                                                String: "type=local,src=/tmp/.buildx-cache" [5218,5253]
                                        FIELD [5254,5301]
                                            String: "cache-to" [5254,5264]
                                            STRING [5265,5301]
                                                String: "type=local,dest=/tmp/.buildx-cache" [5265,5301]
                            OBJECT [5304,5390]
                                FIELD [5305,5326]
                                    String: "name" [5305,5311]
                                    STRING [5312,5326]
                                        String: "Image digest" [5312,5326]
                                FIELD [5327,5389]
                                    String: "run" [5327,5332]
                                    STRING [5333,5389]
                                        String: "echo ${{ steps.docker_build_and_psuh.outputs.digest }}" [5333,5389]
            FIELD [5393,5661]
                String: "notify" [5393,5401]
                OBJECT [5402,5661]
                    FIELD [5403,5418]
                        String: "name" [5403,5409]
                        STRING [5410,5418]
                            String: "Notify" [5410,5418]
                    FIELD [5419,5444]
                        String: "runs-on" [5419,5428]
                        STRING [5429,5444]
                            String: "ubuntu-latest" [5429,5444]
                    FIELD [5445,5479]
                        String: "needs" [5445,5452]
                        ARRAY [5453,5479]
                            STRING [5454,5460]
                                String: "lint" [5454,5460]
                            STRING [5461,5478]
                                String: "build_test_push" [5461,5478]
                    FIELD [5480,5503]
                        String: "if" [5480,5484]
                        STRING [5485,5503]
                            String: "${{ failure() }}" [5485,5503]
                    FIELD [5504,5660]
                        String: "steps" [5504,5511]
                        ARRAY [5512,5660]
                            OBJECT [5513,5659]
                                FIELD [5514,5537]
                                    String: "name" [5514,5520]
                                    STRING [5521,5537]
                                        String: "Notify discord" [5521,5537]
                                FIELD [5538,5580]
                                    String: "uses" [5538,5544]
                                    STRING [5545,5580]
                                        String: "sarisia/actions-status-discord@v1" [5545,5580]
                                FIELD [5581,5658]
                                    String: "with" [5581,5587]
                                    OBJECT [5588,5658]
                                        FIELD [5589,5607]
                                            String: "status" [5589,5597]
                                            STRING [5598,5607]
                                                String: "Failure" [5598,5607]
                                        FIELD [5608,5657]
                                            String: "webhook" [5608,5617]
                                            STRING [5618,5657]
                                                String: "${{ secrets.DISCORD_GITHUB_WEBHOOK }}" [5618,5657]