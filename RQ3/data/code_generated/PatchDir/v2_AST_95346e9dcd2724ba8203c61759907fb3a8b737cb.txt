OBJECT [0,9016]
    FIELD [1,41]
        String: "name" [1,7]
        STRING [8,41]
            String: "Self-hosted runner (nightly-ci)" [8,41]
    FIELD [42,96]
        String: "on" [42,46]
        OBJECT [47,96]
            FIELD [48,74]
                String: "repository_dispatch" [48,69]
                NULL [70,74]
            FIELD [75,95]
                String: "workflow_call" [75,90]
                NULL [91,95]
    FIELD [97,405]
        String: "env" [97,102]
        OBJECT [103,405]
            FIELD [104,126]
                String: "HF_HOME" [104,113]
                STRING [114,126]
                    String: "/mnt/cache" [114,126]
            FIELD [127,152]
                String: "TRANSFORMERS_IS_CI" [127,147]
                TRUE [148,152]
            FIELD [153,172]
                String: "OMP_NUM_THREADS" [153,170]
                NUMBER [171,172]
                    Number: 8 [171,172]
            FIELD [173,192]
                String: "MKL_NUM_THREADS" [173,190]
                NUMBER [191,192]
                    Number: 8 [191,192]
            FIELD [193,208]
                String: "RUN_SLOW" [193,203]
                TRUE [204,208]
            FIELD [209,263]
                String: "HF_HUB_READ_TOKEN" [209,228]
                STRING [229,263]
                    String: "${{ secrets.HF_HUB_READ_TOKEN }}" [229,263]
            FIELD [264,316]
                String: "SIGOPT_API_TOKEN" [264,282]
                STRING [283,316]
                    String: "${{ secrets.SIGOPT_API_TOKEN }}" [283,316]
            FIELD [317,349]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [317,344]
                TRUE [345,349]
            FIELD [350,375]
                String: "RUN_PT_TF_CROSS_TESTS" [350,373]
                NUMBER [374,375]
                    Number: 1 [374,375]
            FIELD [376,404]
                String: "CUDA_VISIBLE_DEVICES" [376,398]
                STRING [399,404]
                    String: "0,1" [399,404]
    FIELD [406,9015]
        String: "jobs" [406,412]
        OBJECT [413,9015]
            FIELD [414,1660]
                String: "setup" [414,421]
                OBJECT [422,1660]
                    FIELD [423,437]
                        String: "name" [423,429]
                        STRING [430,437]
                            String: "Setup" [430,437]
                    FIELD [438,503]
                        String: "strategy" [438,448]
                        OBJECT [449,503]
                            FIELD [450,502]
                                String: "matrix" [450,458]
                                OBJECT [459,502]
                                    FIELD [460,501]
                                        String: "machine_type" [460,474]
                                        ARRAY [475,501]
                                            STRING [476,488]
                                                String: "single-gpu" [476,488]
                                            STRING [489,500]
                                                String: "multi-gpu" [489,500]
                    FIELD [504,572]
                        String: "runs-on" [504,513]
                        ARRAY [514,572]
                            STRING [515,543]
                                String: "${{ matrix.machine_type }}" [515,543]
                            STRING [544,556]
                                String: "nvidia-gpu" [544,556]
                            STRING [557,561]
                                String: "t4" [557,561]
                            STRING [562,571]
                                String: "past-ci" [562,571]
                    FIELD [573,747]
                        String: "container" [573,584]
                        OBJECT [585,747]
                            FIELD [586,649]
                                String: "image" [586,593]
                                STRING [594,649]
                                    String: "huggingface/transformers-all-latest-torch-nightly-gpu" [594,649]
                            FIELD [650,746]
                                String: "options" [650,659]
                                STRING [660,746]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [660,746]
                    FIELD [748,809]
                        String: "outputs" [748,757]
                        OBJECT [758,809]
                            FIELD [759,808]
                                String: "matrix" [759,767]
                                STRING [768,808]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [768,808]
                    FIELD [810,1659]
                        String: "steps" [810,817]
                        ARRAY [818,1659]
                            OBJECT [819,932]
                                FIELD [820,841]
                                    String: "name" [820,826]
                                    STRING [827,841]
                                        String: "Update clone" [827,841]
                                FIELD [842,877]
                                    String: "working-directory" [842,861]
                                    STRING [862,877]
                                        String: "/transformers" [862,877]
                                FIELD [878,931]
                                    String: "run" [878,883]
                                    STRING [884,931]
                                        String: "git fetch && git checkout ${{ github.sha }}\n" [884,931]
                            OBJECT [933,1071]
                                FIELD [934,950]
                                    String: "name" [934,940]
                                    STRING [941,950]
                                        String: "Cleanup" [941,950]
                                FIELD [951,986]
                                    String: "working-directory" [951,970]
                                    STRING [971,986]
                                        String: "/transformers" [971,986]
                                FIELD [987,1070]
                                    String: "run" [987,992]
                                    STRING [993,1070]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [993,1070]
                            OBJECT [1072,1181]
                                FIELD [1073,1125]
                                    String: "name" [1073,1079]
                                    STRING [1080,1125]
                                        String: "Show installed libraries and their versions" [1080,1125]
                                FIELD [1126,1161]
                                    String: "working-directory" [1126,1145]
                                    STRING [1146,1161]
                                        String: "/transformers" [1146,1161]
                                FIELD [1162,1180]
                                    String: "run" [1162,1167]
                                    STRING [1168,1180]
                                        String: "pip freeze" [1168,1180]
                            OBJECT [1182,1615]
                                FIELD [1183,1200]
                                    String: "id" [1183,1187]
                                    STRING [1188,1200]
                                        String: "set-matrix" [1188,1200]
                                FIELD [1201,1233]
                                    String: "name" [1201,1207]
                                    STRING [1208,1233]
                                        String: "Identify models to test" [1208,1233]
                                FIELD [1234,1275]
                                    String: "working-directory" [1234,1253]
                                    STRING [1254,1275]
                                        String: "/transformers/tests" [1254,1275]
                                FIELD [1276,1614]
                                    String: "run" [1276,1281]
                                    STRING [1282,1614]
                                        String: "echo \"matrix=$(python3 -c 'import os; tests = os.getcwd(); model_tests = os.listdir(os.path.join(tests, \"models\")); d1 = sorted(list(filter(os.path.isdir, os.listdir(tests)))); d2 = sorted(list(filter(os.path.isdir, [f\"models/{x}\" for x in model_tests]))); d1.remove(\"models\"); d = d2 + d1; print(d)')\" >> $GITHUB_OUTPUT\n" [1282,1614]
                            OBJECT [1616,1658]
                                FIELD [1617,1636]
                                    String: "name" [1617,1623]
                                    STRING [1624,1636]
                                        String: "NVIDIA-SMI" [1624,1636]
                                FIELD [1637,1657]
                                    String: "run" [1637,1642]
                                    STRING [1643,1657]
                                        String: "nvidia-smi\n" [1643,1657]
            FIELD [1661,3656]
                String: "run_tests_single_gpu" [1661,1683]
                OBJECT [1684,3656]
                    FIELD [1685,1705]
                        String: "name" [1685,1691]
                        STRING [1692,1705]
                            String: "Model tests" [1692,1705]
                    FIELD [1706,1833]
                        String: "strategy" [1706,1716]
                        OBJECT [1717,1833]
                            FIELD [1718,1735]
                                String: "fail-fast" [1718,1729]
                                FALSE [1730,1735]
                            FIELD [1736,1832]
                                String: "matrix" [1736,1744]
                                OBJECT [1745,1832]
                                    FIELD [1746,1801]
                                        String: "folders" [1746,1755]
                                        STRING [1756,1801]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [1756,1801]
                                    FIELD [1802,1831]
                                        String: "machine_type" [1802,1816]
                                        ARRAY [1817,1831]
                                            STRING [1818,1830]
                                                String: "single-gpu" [1818,1830]
                    FIELD [1834,1902]
                        String: "runs-on" [1834,1843]
                        ARRAY [1844,1902]
                            STRING [1845,1873]
                                String: "${{ matrix.machine_type }}" [1845,1873]
                            STRING [1874,1886]
                                String: "nvidia-gpu" [1874,1886]
                            STRING [1887,1891]
                                String: "t4" [1887,1891]
                            STRING [1892,1901]
                                String: "past-ci" [1892,1901]
                    FIELD [1903,2077]
                        String: "container" [1903,1914]
                        OBJECT [1915,2077]
                            FIELD [1916,1979]
                                String: "image" [1916,1923]
                                STRING [1924,1979]
                                    String: "huggingface/transformers-all-latest-torch-nightly-gpu" [1924,1979]
                            FIELD [1980,2076]
                                String: "options" [1980,1989]
                                STRING [1990,2076]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1990,2076]
                    FIELD [2078,2093]
                        String: "needs" [2078,2085]
                        STRING [2086,2093]
                            String: "setup" [2086,2093]
                    FIELD [2094,3655]
                        String: "steps" [2094,2101]
                        ARRAY [2102,3655]
                            OBJECT [2103,2377]
                                FIELD [2104,2146]
                                    String: "name" [2104,2110]
                                    STRING [2111,2146]
                                        String: "Echo folder ${{ matrix.folders }}" [2111,2146]
                                FIELD [2147,2161]
                                    String: "shell" [2147,2154]
                                    STRING [2155,2161]
                                        String: "bash" [2155,2161]
                                FIELD [2162,2376]
                                    String: "run" [2162,2167]
                                    STRING [2168,2376]
                                        String: "echo \"${{ matrix.folders }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [2168,2376]
                            OBJECT [2378,2489]
                                FIELD [2379,2400]
                                    String: "name" [2379,2385]
                                    STRING [2386,2400]
                                        String: "Update clone" [2386,2400]
                                FIELD [2401,2436]
                                    String: "working-directory" [2401,2420]
                                    STRING [2421,2436]
                                        String: "/transformers" [2421,2436]
                                FIELD [2437,2488]
                                    String: "run" [2437,2442]
                                    STRING [2443,2488]
                                        String: "git fetch && git checkout ${{ github.sha }}" [2443,2488]
                            OBJECT [2490,2705]
                                FIELD [2491,2588]
                                    String: "name" [2491,2497]
                                    STRING [2498,2588]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [2498,2588]
                                FIELD [2589,2624]
                                    String: "working-directory" [2589,2608]
                                    STRING [2609,2624]
                                        String: "/transformers" [2609,2624]
                                FIELD [2625,2704]
                                    String: "run" [2625,2630]
                                    STRING [2631,2704]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [2631,2704]
                            OBJECT [2706,2748]
                                FIELD [2707,2726]
                                    String: "name" [2707,2713]
                                    STRING [2714,2726]
                                        String: "NVIDIA-SMI" [2714,2726]
                                FIELD [2727,2747]
                                    String: "run" [2727,2732]
                                    STRING [2733,2747]
                                        String: "nvidia-smi\n" [2733,2747]
                            OBJECT [2749,2844]
                                FIELD [2750,2770]
                                    String: "name" [2750,2756]
                                    STRING [2757,2770]
                                        String: "Environment" [2757,2770]
                                FIELD [2771,2806]
                                    String: "working-directory" [2771,2790]
                                    STRING [2791,2806]
                                        String: "/transformers" [2791,2806]
                                FIELD [2807,2843]
                                    String: "run" [2807,2812]
                                    STRING [2813,2843]
                                        String: "python3 utils/print_env.py\n" [2813,2843]
                            OBJECT [2845,2954]
                                FIELD [2846,2898]
                                    String: "name" [2846,2852]
                                    STRING [2853,2898]
                                        String: "Show installed libraries and their versions" [2853,2898]
                                FIELD [2899,2934]
                                    String: "working-directory" [2899,2918]
                                    STRING [2919,2934]
                                        String: "/transformers" [2919,2934]
                                FIELD [2935,2953]
                                    String: "run" [2935,2940]
                                    STRING [2941,2953]
                                        String: "pip freeze" [2941,2953]
                            OBJECT [2955,3153]
                                FIELD [2956,2985]
                                    String: "name" [2956,2962]
                                    STRING [2963,2985]
                                        String: "Run all tests on GPU" [2963,2985]
                                FIELD [2986,3021]
                                    String: "working-directory" [2986,3005]
                                    STRING [3006,3021]
                                        String: "/transformers" [3006,3021]
                                FIELD [3022,3152]
                                    String: "run" [3022,3027]
                                    STRING [3028,3152]
                                        String: "python3 -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} tests/${{ matrix.folders }}" [3028,3152]
                            OBJECT [3154,3347]
                                FIELD [3155,3185]
                                    String: "name" [3155,3161]
                                    STRING [3162,3185]
                                        String: "Failure short reports" [3162,3185]
                                FIELD [3186,3209]
                                    String: "if" [3186,3190]
                                    STRING [3191,3209]
                                        String: "${{ failure() }}" [3191,3209]
                                FIELD [3210,3234]
                                    String: "continue-on-error" [3210,3229]
                                    TRUE [3230,3234]
                                FIELD [3235,3346]
                                    String: "run" [3235,3240]
                                    STRING [3241,3346]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [3241,3346]
                            OBJECT [3348,3654]
                                FIELD [3349,3386]
                                    String: "name" [3349,3355]
                                    STRING [3356,3386]
                                        String: "Test suite reports artifacts" [3356,3386]
                                FIELD [3387,3409]
                                    String: "if" [3387,3391]
                                    STRING [3392,3409]
                                        String: "${{ always() }}" [3392,3409]
                                FIELD [3410,3445]
                                    String: "uses" [3410,3416]
                                    STRING [3417,3445]
                                        String: "actions/upload-artifact@v3" [3417,3445]
                                FIELD [3446,3653]
                                    String: "with" [3446,3452]
                                    OBJECT [3453,3653]
                                        FIELD [3454,3562]
                                            String: "name" [3454,3460]
                                            STRING [3461,3562]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports_postfix_nightly" [3461,3562]
                                        FIELD [3563,3652]
                                            String: "path" [3563,3569]
                                            STRING [3570,3652]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [3570,3652]
            FIELD [3657,5652]
                String: "run_tests_multi_gpu" [3657,3678]
                OBJECT [3679,5652]
                    FIELD [3680,3700]
                        String: "name" [3680,3686]
                        STRING [3687,3700]
                            String: "Model tests" [3687,3700]
                    FIELD [3701,3827]
                        String: "strategy" [3701,3711]
                        OBJECT [3712,3827]
                            FIELD [3713,3730]
                                String: "fail-fast" [3713,3724]
                                FALSE [3725,3730]
                            FIELD [3731,3826]
                                String: "matrix" [3731,3739]
                                OBJECT [3740,3826]
                                    FIELD [3741,3796]
                                        String: "folders" [3741,3750]
                                        STRING [3751,3796]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [3751,3796]
                                    FIELD [3797,3825]
                                        String: "machine_type" [3797,3811]
                                        ARRAY [3812,3825]
                                            STRING [3813,3824]
                                                String: "multi-gpu" [3813,3824]
                    FIELD [3828,3896]
                        String: "runs-on" [3828,3837]
                        ARRAY [3838,3896]
                            STRING [3839,3867]
                                String: "${{ matrix.machine_type }}" [3839,3867]
                            STRING [3868,3880]
                                String: "nvidia-gpu" [3868,3880]
                            STRING [3881,3885]
                                String: "t4" [3881,3885]
                            STRING [3886,3895]
                                String: "past-ci" [3886,3895]
                    FIELD [3897,4073]
                        String: "container" [3897,3908]
                        OBJECT [3909,4073]
                            FIELD [3910,3973]
                                String: "image" [3910,3917]
                                STRING [3918,3973]
                                    String: "huggingface/transformers-all-latest-torch-nightly-gpu" [3918,3973]
                            FIELD [3974,4072]
                                String: "options" [3974,3983]
                                STRING [3984,4072]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [3984,4072]
                    FIELD [4074,4089]
                        String: "needs" [4074,4081]
                        STRING [4082,4089]
                            String: "setup" [4082,4089]
                    FIELD [4090,5651]
                        String: "steps" [4090,4097]
                        ARRAY [4098,5651]
                            OBJECT [4099,4373]
                                FIELD [4100,4142]
                                    String: "name" [4100,4106]
                                    STRING [4107,4142]
                                        String: "Echo folder ${{ matrix.folders }}" [4107,4142]
                                FIELD [4143,4157]
                                    String: "shell" [4143,4150]
                                    STRING [4151,4157]
                                        String: "bash" [4151,4157]
                                FIELD [4158,4372]
                                    String: "run" [4158,4163]
                                    STRING [4164,4372]
                                        String: "echo \"${{ matrix.folders }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [4164,4372]
                            OBJECT [4374,4485]
                                FIELD [4375,4396]
                                    String: "name" [4375,4381]
                                    STRING [4382,4396]
                                        String: "Update clone" [4382,4396]
                                FIELD [4397,4432]
                                    String: "working-directory" [4397,4416]
                                    STRING [4417,4432]
                                        String: "/transformers" [4417,4432]
                                FIELD [4433,4484]
                                    String: "run" [4433,4438]
                                    STRING [4439,4484]
                                        String: "git fetch && git checkout ${{ github.sha }}" [4439,4484]
                            OBJECT [4486,4701]
                                FIELD [4487,4584]
                                    String: "name" [4487,4493]
                                    STRING [4494,4584]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [4494,4584]
                                FIELD [4585,4620]
                                    String: "working-directory" [4585,4604]
                                    STRING [4605,4620]
                                        String: "/transformers" [4605,4620]
                                FIELD [4621,4700]
                                    String: "run" [4621,4626]
                                    STRING [4627,4700]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [4627,4700]
                            OBJECT [4702,4744]
                                FIELD [4703,4722]
                                    String: "name" [4703,4709]
                                    STRING [4710,4722]
                                        String: "NVIDIA-SMI" [4710,4722]
                                FIELD [4723,4743]
                                    String: "run" [4723,4728]
                                    STRING [4729,4743]
                                        String: "nvidia-smi\n" [4729,4743]
                            OBJECT [4745,4840]
                                FIELD [4746,4766]
                                    String: "name" [4746,4752]
                                    STRING [4753,4766]
                                        String: "Environment" [4753,4766]
                                FIELD [4767,4802]
                                    String: "working-directory" [4767,4786]
                                    STRING [4787,4802]
                                        String: "/transformers" [4787,4802]
                                FIELD [4803,4839]
                                    String: "run" [4803,4808]
                                    STRING [4809,4839]
                                        String: "python3 utils/print_env.py\n" [4809,4839]
                            OBJECT [4841,4950]
                                FIELD [4842,4894]
                                    String: "name" [4842,4848]
                                    STRING [4849,4894]
                                        String: "Show installed libraries and their versions" [4849,4894]
                                FIELD [4895,4930]
                                    String: "working-directory" [4895,4914]
                                    STRING [4915,4930]
                                        String: "/transformers" [4915,4930]
                                FIELD [4931,4949]
                                    String: "run" [4931,4936]
                                    STRING [4937,4949]
                                        String: "pip freeze" [4937,4949]
                            OBJECT [4951,5149]
                                FIELD [4952,4981]
                                    String: "name" [4952,4958]
                                    STRING [4959,4981]
                                        String: "Run all tests on GPU" [4959,4981]
                                FIELD [4982,5017]
                                    String: "working-directory" [4982,5001]
                                    STRING [5002,5017]
                                        String: "/transformers" [5002,5017]
                                FIELD [5018,5148]
                                    String: "run" [5018,5023]
                                    STRING [5024,5148]
                                        String: "python3 -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} tests/${{ matrix.folders }}" [5024,5148]
                            OBJECT [5150,5343]
                                FIELD [5151,5181]
                                    String: "name" [5151,5157]
                                    STRING [5158,5181]
                                        String: "Failure short reports" [5158,5181]
                                FIELD [5182,5205]
                                    String: "if" [5182,5186]
                                    STRING [5187,5205]
                                        String: "${{ failure() }}" [5187,5205]
                                FIELD [5206,5230]
                                    String: "continue-on-error" [5206,5225]
                                    TRUE [5226,5230]
                                FIELD [5231,5342]
                                    String: "run" [5231,5236]
                                    STRING [5237,5342]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [5237,5342]
                            OBJECT [5344,5650]
                                FIELD [5345,5382]
                                    String: "name" [5345,5351]
                                    STRING [5352,5382]
                                        String: "Test suite reports artifacts" [5352,5382]
                                FIELD [5383,5405]
                                    String: "if" [5383,5387]
                                    STRING [5388,5405]
                                        String: "${{ always() }}" [5388,5405]
                                FIELD [5406,5441]
                                    String: "uses" [5406,5412]
                                    STRING [5413,5441]
                                        String: "actions/upload-artifact@v3" [5413,5441]
                                FIELD [5442,5649]
                                    String: "with" [5442,5448]
                                    OBJECT [5449,5649]
                                        FIELD [5450,5558]
                                            String: "name" [5450,5456]
                                            STRING [5457,5558]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports_postfix_nightly" [5457,5558]
                                        FIELD [5559,5648]
                                            String: "path" [5559,5565]
                                            STRING [5566,5648]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [5566,5648]
            FIELD [5653,7910]
                String: "run_all_tests_torch_cuda_extensions_gpu" [5653,5694]
                OBJECT [5695,7910]
                    FIELD [5696,5731]
                        String: "name" [5696,5702]
                        STRING [5703,5731]
                            String: "Torch CUDA extension tests" [5703,5731]
                    FIELD [5732,5815]
                        String: "strategy" [5732,5742]
                        OBJECT [5743,5815]
                            FIELD [5744,5761]
                                String: "fail-fast" [5744,5755]
                                FALSE [5756,5761]
                            FIELD [5762,5814]
                                String: "matrix" [5762,5770]
                                OBJECT [5771,5814]
                                    FIELD [5772,5813]
                                        String: "machine_type" [5772,5786]
                                        ARRAY [5787,5813]
                                            STRING [5788,5800]
                                                String: "single-gpu" [5788,5800]
                                            STRING [5801,5812]
                                                String: "multi-gpu" [5801,5812]
                    FIELD [5816,5884]
                        String: "runs-on" [5816,5825]
                        ARRAY [5826,5884]
                            STRING [5827,5855]
                                String: "${{ matrix.machine_type }}" [5827,5855]
                            STRING [5856,5868]
                                String: "nvidia-gpu" [5856,5868]
                            STRING [5869,5873]
                                String: "t4" [5869,5873]
                            STRING [5874,5883]
                                String: "past-ci" [5874,5883]
                    FIELD [5885,5900]
                        String: "needs" [5885,5892]
                        STRING [5893,5900]
                            String: "setup" [5893,5900]
                    FIELD [5901,6078]
                        String: "container" [5901,5912]
                        OBJECT [5913,6078]
                            FIELD [5914,5978]
                                String: "image" [5914,5921]
                                STRING [5922,5978]
                                    String: "huggingface/transformers-pytorch-deepspeed-nightly-gpu" [5922,5978]
                            FIELD [5979,6077]
                                String: "options" [5979,5988]
                                STRING [5989,6077]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [5989,6077]
                    FIELD [6079,7909]
                        String: "steps" [6079,6086]
                        ARRAY [6087,7909]
                            OBJECT [6088,6209]
                                FIELD [6089,6110]
                                    String: "name" [6089,6095]
                                    STRING [6096,6110]
                                        String: "Update clone" [6096,6110]
                                FIELD [6111,6156]
                                    String: "working-directory" [6111,6130]
                                    STRING [6131,6156]
                                        String: "/workspace/transformers" [6131,6156]
                                FIELD [6157,6208]
                                    String: "run" [6157,6162]
                                    STRING [6163,6208]
                                        String: "git fetch && git checkout ${{ github.sha }}" [6163,6208]
                            OBJECT [6210,6435]
                                FIELD [6211,6308]
                                    String: "name" [6211,6217]
                                    STRING [6218,6308]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [6218,6308]
                                FIELD [6309,6354]
                                    String: "working-directory" [6309,6328]
                                    STRING [6329,6354]
                                        String: "/workspace/transformers" [6329,6354]
                                FIELD [6355,6434]
                                    String: "run" [6355,6360]
                                    STRING [6361,6434]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [6361,6434]
                            OBJECT [6436,6530]
                                FIELD [6437,6476]
                                    String: "name" [6437,6443]
                                    STRING [6444,6476]
                                        String: "Remove cached torch extensions" [6444,6476]
                                FIELD [6477,6529]
                                    String: "run" [6477,6482]
                                    STRING [6483,6529]
                                        String: "rm -rf /github/home/.cache/torch_extensions/" [6483,6529]
                            OBJECT [6531,6914]
                                FIELD [6532,6568]
                                    String: "name" [6532,6538]
                                    STRING [6539,6568]
                                        String: "Pre build DeepSpeed *again*" [6539,6568]
                                FIELD [6569,6601]
                                    String: "working-directory" [6569,6588]
                                    STRING [6589,6601]
                                        String: "/workspace" [6589,6601]
                                FIELD [6602,6913]
                                    String: "run" [6602,6607]
                                    STRING [6608,6913]
                                        String: "python3 -m pip uninstall -y deepspeed\nrm -rf DeepSpeed\ngit clone https://github.com/microsoft/DeepSpeed && cd DeepSpeed && rm -rf build\nDS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 python3 -m pip install . --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [6608,6913]
                            OBJECT [6915,6957]
                                FIELD [6916,6935]
                                    String: "name" [6916,6922]
                                    STRING [6923,6935]
                                        String: "NVIDIA-SMI" [6923,6935]
                                FIELD [6936,6956]
                                    String: "run" [6936,6941]
                                    STRING [6942,6956]
                                        String: "nvidia-smi\n" [6942,6956]
                            OBJECT [6958,7062]
                                FIELD [6959,6979]
                                    String: "name" [6959,6965]
                                    STRING [6966,6979]
                                        String: "Environment" [6966,6979]
                                FIELD [6980,7025]
                                    String: "working-directory" [6980,6999]
                                    STRING [7000,7025]
                                        String: "/workspace/transformers" [7000,7025]
                                FIELD [7026,7061]
                                    String: "run" [7026,7031]
                                    STRING [7032,7061]
                                        String: "python utils/print_env.py\n" [7032,7061]
                            OBJECT [7063,7182]
                                FIELD [7064,7116]
                                    String: "name" [7064,7070]
                                    STRING [7071,7116]
                                        String: "Show installed libraries and their versions" [7071,7116]
                                FIELD [7117,7162]
                                    String: "working-directory" [7117,7136]
                                    STRING [7137,7162]
                                        String: "/workspace/transformers" [7137,7162]
                                FIELD [7163,7181]
                                    String: "run" [7163,7168]
                                    STRING [7169,7181]
                                        String: "pip freeze" [7169,7181]
                            OBJECT [7183,7395]
                                FIELD [7184,7213]
                                    String: "name" [7184,7190]
                                    STRING [7191,7213]
                                        String: "Run all tests on GPU" [7191,7213]
                                FIELD [7214,7259]
                                    String: "working-directory" [7214,7233]
                                    STRING [7234,7259]
                                        String: "/workspace/transformers" [7234,7259]
                                FIELD [7260,7394]
                                    String: "run" [7260,7265]
                                    STRING [7266,7394]
                                        String: "python -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [7266,7394]
                            OBJECT [7396,7599]
                                FIELD [7397,7427]
                                    String: "name" [7397,7403]
                                    STRING [7404,7427]
                                        String: "Failure short reports" [7404,7427]
                                FIELD [7428,7451]
                                    String: "if" [7428,7432]
                                    STRING [7433,7451]
                                        String: "${{ failure() }}" [7433,7451]
                                FIELD [7452,7476]
                                    String: "continue-on-error" [7452,7471]
                                    TRUE [7472,7476]
                                FIELD [7477,7598]
                                    String: "run" [7477,7482]
                                    STRING [7483,7598]
                                        String: "cat /workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [7483,7598]
                            OBJECT [7600,7908]
                                FIELD [7601,7638]
                                    String: "name" [7601,7607]
                                    STRING [7608,7638]
                                        String: "Test suite reports artifacts" [7608,7638]
                                FIELD [7639,7661]
                                    String: "if" [7639,7643]
                                    STRING [7644,7661]
                                        String: "${{ always() }}" [7644,7661]
                                FIELD [7662,7697]
                                    String: "uses" [7662,7668]
                                    STRING [7669,7697]
                                        String: "actions/upload-artifact@v3" [7669,7697]
                                FIELD [7698,7907]
                                    String: "with" [7698,7704]
                                    OBJECT [7705,7907]
                                        FIELD [7706,7806]
                                            String: "name" [7706,7712]
                                            STRING [7713,7806]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports_postfix_nightly" [7713,7806]
                                        FIELD [7807,7906]
                                            String: "path" [7807,7813]
                                            STRING [7814,7906]
                                                String: "/workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [7814,7906]
            FIELD [7911,9014]
                String: "send_results" [7911,7925]
                OBJECT [7926,9014]
                    FIELD [7927,7959]
                        String: "name" [7927,7933]
                        STRING [7934,7959]
                            String: "Send results to webhook" [7934,7959]
                    FIELD [7960,7984]
                        String: "runs-on" [7960,7969]
                        STRING [7970,7984]
                            String: "ubuntu-22.04" [7970,7984]
                    FIELD [7985,8000]
                        String: "if" [7985,7989]
                        STRING [7990,8000]
                            String: "always()" [7990,8000]
                    FIELD [8001,8105]
                        String: "needs" [8001,8008]
                        ARRAY [8009,8105]
                            STRING [8010,8017]
                                String: "setup" [8010,8017]
                            STRING [8018,8040]
                                String: "run_tests_single_gpu" [8018,8040]
                            STRING [8041,8062]
                                String: "run_tests_multi_gpu" [8041,8062]
                            STRING [8063,8104]
                                String: "run_all_tests_torch_cuda_extensions_gpu" [8063,8104]
                    FIELD [8106,9013]
                        String: "steps" [8106,8113]
                        ARRAY [8114,9013]
                            OBJECT [8115,8222]
                                FIELD [8116,8147]
                                    String: "name" [8116,8122]
                                    STRING [8123,8147]
                                        String: "Preliminary job status" [8123,8147]
                                FIELD [8148,8162]
                                    String: "shell" [8148,8155]
                                    STRING [8156,8162]
                                        String: "bash" [8156,8162]
                                FIELD [8163,8221]
                                    String: "run" [8163,8168]
                                    STRING [8169,8221]
                                        String: "echo \"Setup status: ${{ needs.setup.result }}\"\n" [8169,8221]
                            OBJECT [8223,8253]
                                FIELD [8224,8252]
                                    String: "uses" [8224,8230]
                                    STRING [8231,8252]
                                        String: "actions/checkout@v3" [8231,8252]
                            OBJECT [8254,8293]
                                FIELD [8255,8292]
                                    String: "uses" [8255,8261]
                                    STRING [8262,8292]
                                        String: "actions/download-artifact@v3" [8262,8292]
                            OBJECT [8294,8936]
                                FIELD [8295,8325]
                                    String: "name" [8295,8301]
                                    STRING [8302,8325]
                                        String: "Send message to Slack" [8302,8325]
                                FIELD [8326,8807]
                                    String: "env" [8326,8331]
                                    OBJECT [8332,8807]
                                        FIELD [8333,8389]
                                            String: "CI_SLACK_BOT_TOKEN" [8333,8353]
                                            STRING [8354,8389]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [8354,8389]
                                        FIELD [8390,8448]
                                            String: "CI_SLACK_CHANNEL_ID" [8390,8411]
                                            STRING [8412,8448]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [8412,8448]
                                        FIELD [8449,8519]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [8449,8476]
                                            STRING [8477,8519]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [8477,8519]
                                        FIELD [8520,8596]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [8520,8550]
                                            STRING [8551,8596]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [8551,8596]
                                        FIELD [8597,8674]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [8597,8625]
                                            STRING [8626,8674]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_PAST_FUTURE }}" [8626,8674]
                                        FIELD [8675,8739]
                                            String: "ACCESS_REPO_INFO_TOKEN" [8675,8699]
                                            STRING [8700,8739]
                                                String: "${{ secrets.ACCESS_REPO_INFO_TOKEN }}" [8700,8739]
                                        FIELD [8740,8763]
                                            String: "CI_EVENT" [8740,8750]
                                            STRING [8751,8763]
                                                String: "Nightly CI" [8751,8763]
                                        FIELD [8764,8806]
                                            String: "SETUP_STATUS" [8764,8778]
                                            STRING [8779,8806]
                                                String: "${{ needs.setup.result }}" [8779,8806]
                                FIELD [8808,8935]
                                    String: "run" [8808,8813]
                                    STRING [8814,8935]
                                        String: "pip install slack_sdk\npip show slack_sdk\npython utils/notification_service.py \"${{ needs.setup.outputs.matrix }}\"\n" [8814,8935]
                            OBJECT [8937,9012]
                                FIELD [8938,8975]
                                    String: "uses" [8938,8944]
                                    STRING [8945,8975]
                                        String: "geekyeggo/delete-artifact@v2" [8945,8975]
                                FIELD [8976,9011]
                                    String: "with" [8976,8982]
                                    OBJECT [8983,9011]
                                        FIELD [8984,9010]
                                            String: "name" [8984,8990]
                                            STRING [8991,9010]
                                                String: "single-*\nmulti-*" [8991,9010]