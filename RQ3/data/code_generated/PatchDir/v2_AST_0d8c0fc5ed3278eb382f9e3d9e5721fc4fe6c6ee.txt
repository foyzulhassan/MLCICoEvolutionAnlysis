OBJECT [0,16958]
    FIELD [1,12]
        String: "name" [1,7]
        STRING [8,12]
            String: "CI" [8,12]
    FIELD [13,105]
        String: "concurrency" [13,26]
        OBJECT [27,105]
            FIELD [28,78]
                String: "group" [28,35]
                STRING [36,78]
                    String: "${{ github.workflow }}-${{ github.ref }}" [36,78]
            FIELD [79,104]
                String: "cancel-in-progress" [79,99]
                TRUE [100,104]
    FIELD [106,256]
        String: "on" [106,110]
        OBJECT [111,256]
            FIELD [112,148]
                String: "pull_request" [112,126]
                OBJECT [127,148]
                    FIELD [128,147]
                        String: "branches" [128,138]
                        ARRAY [139,147]
                            STRING [140,146]
                                String: "main" [140,146]
            FIELD [149,177]
                String: "push" [149,155]
                OBJECT [156,177]
                    FIELD [157,176]
                        String: "branches" [157,167]
                        ARRAY [168,176]
                            STRING [169,175]
                                String: "main" [169,175]
            FIELD [178,211]
                String: "release" [178,187]
                OBJECT [188,211]
                    FIELD [189,210]
                        String: "types" [189,196]
                        ARRAY [197,210]
                            STRING [198,209]
                                String: "published" [198,209]
            FIELD [212,255]
                String: "schedule" [212,222]
                ARRAY [223,255]
                    OBJECT [224,254]
                        FIELD [225,253]
                            String: "cron" [225,231]
                            STRING [232,253]
                                String: "37 11 * * 1,2,3,4,5" [232,253]
    FIELD [257,661]
        String: "env" [257,262]
        OBJECT [263,661]
            FIELD [264,287]
                String: "TORCH_VERSION" [264,279]
                STRING [280,287]
                    String: "1.9.0" [280,287]
            FIELD [288,434]
                String: "TORCH_CPU_INSTALL" [288,307]
                STRING [308,434]
                    String: "pip install torch==1.9.0+cpu torchvision==0.10.0+cpu torchaudio==0.9.0 -f https://download.pytorch.org/whl/torch_stable.html" [308,434]
            FIELD [435,585]
                String: "TORCH_GPU_INSTALL" [435,454]
                STRING [455,585]
                    String: "pip install torch==1.9.0+cu111 torchvision==0.10.0+cu111 torchaudio==0.9.0 -f https://download.pytorch.org/whl/torch_stable.html" [455,585]
            FIELD [586,605]
                String: "CACHE_PREFIX" [586,600]
                STRING [601,605]
                    String: "v2" [601,605]
            FIELD [606,638]
                String: "TOKENIZERS_PARALLELISM" [606,630]
                STRING [631,638]
                    String: "false" [631,638]
            FIELD [639,660]
                String: "OMP_NUM_THREADS" [639,656]
                STRING [657,660]
                    String: "1" [657,660]
    FIELD [662,16957]
        String: "jobs" [662,668]
        OBJECT [669,16957]
            FIELD [670,1414]
                String: "changelog" [670,681]
                OBJECT [682,1414]
                    FIELD [683,701]
                        String: "name" [683,689]
                        STRING [690,701]
                            String: "CHANGELOG" [690,701]
                    FIELD [702,727]
                        String: "runs-on" [702,711]
                        STRING [712,727]
                            String: "ubuntu-latest" [712,727]
                    FIELD [728,770]
                        String: "if" [728,732]
                        STRING [733,770]
                            String: "github.event_name == 'pull_request'" [733,770]
                    FIELD [771,1413]
                        String: "steps" [771,778]
                        ARRAY [779,1413]
                            OBJECT [780,810]
                                FIELD [781,809]
                                    String: "uses" [781,787]
                                    STRING [788,809]
                                        String: "actions/checkout@v1" [788,809]
                            OBJECT [811,1057]
                                FIELD [812,855]
                                    String: "name" [812,818]
                                    STRING [819,855]
                                        String: "Check if source files have changed" [819,855]
                                FIELD [856,1056]
                                    String: "run" [856,861]
                                    STRING [862,1056]
                                        String: "git diff --name-only $(git merge-base origin/main HEAD) | grep '^allennlp/.*\\.py$' && echo \"source_files_changed=true\" >> $GITHUB_ENV || echo \"source_files_changed=false\" >> $GITHUB_ENV\n" [862,1056]
                            OBJECT [1058,1412]
                                FIELD [1059,1105]
                                    String: "name" [1059,1065]
                                    STRING [1066,1105]
                                        String: "Check that CHANGELOG has been updated" [1066,1105]
                                FIELD [1106,1147]
                                    String: "if" [1106,1110]
                                    STRING [1111,1147]
                                        String: "env.source_files_changed == 'true'" [1111,1147]
                                FIELD [1148,1411]
                                    String: "run" [1148,1153]
                                    STRING [1154,1411]
                                        String: "# If this step fails, this means you haven't updated the CHANGELOG.md\n# file with notes on your contribution.\ngit diff --name-only $(git merge-base origin/main HEAD) | grep '^CHANGELOG.md$' && echo \"Thanks for helping keep our CHANGELOG up-to-date!\"\n" [1154,1411]
            FIELD [1415,1783]
                String: "style" [1415,1422]
                OBJECT [1423,1783]
                    FIELD [1424,1438]
                        String: "name" [1424,1430]
                        STRING [1431,1438]
                            String: "Style" [1431,1438]
                    FIELD [1439,1464]
                        String: "runs-on" [1439,1448]
                        STRING [1449,1464]
                            String: "ubuntu-latest" [1449,1464]
                    FIELD [1465,1782]
                        String: "steps" [1465,1472]
                        ARRAY [1473,1782]
                            OBJECT [1474,1504]
                                FIELD [1475,1503]
                                    String: "uses" [1475,1481]
                                    STRING [1482,1503]
                                        String: "actions/checkout@v2" [1482,1503]
                            OBJECT [1505,1591]
                                FIELD [1506,1527]
                                    String: "name" [1506,1512]
                                    STRING [1513,1527]
                                        String: "Setup Python" [1513,1527]
                                FIELD [1528,1560]
                                    String: "uses" [1528,1534]
                                    STRING [1535,1560]
                                        String: "actions/setup-python@v2" [1535,1560]
                                FIELD [1561,1590]
                                    String: "with" [1561,1567]
                                    OBJECT [1568,1590]
                                        FIELD [1569,1589]
                                            String: "python-version" [1569,1585]
                                            NUMBER [1586,1589]
                                                Number: 3.8 [1586,1589]
                            OBJECT [1592,1691]
                                FIELD [1593,1622]
                                    String: "name" [1593,1599]
                                    STRING [1600,1622]
                                        String: "Install requirements" [1600,1622]
                                FIELD [1623,1690]
                                    String: "run" [1623,1628]
                                    STRING [1629,1690]
                                        String: "grep -E '^black' dev-requirements.txt | xargs pip install\n" [1629,1690]
                            OBJECT [1692,1734]
                                FIELD [1693,1712]
                                    String: "name" [1693,1699]
                                    STRING [1700,1712]
                                        String: "Debug info" [1700,1712]
                                FIELD [1713,1733]
                                    String: "run" [1713,1718]
                                    STRING [1719,1733]
                                        String: "pip freeze\n" [1719,1733]
                            OBJECT [1735,1781]
                                FIELD [1736,1754]
                                    String: "name" [1736,1742]
                                    STRING [1743,1754]
                                        String: "Run black" [1743,1754]
                                FIELD [1755,1780]
                                    String: "run" [1755,1760]
                                    STRING [1761,1780]
                                        String: "black --check .\n" [1761,1780]
            FIELD [1784,5428]
                String: "checks" [1784,1792]
                OBJECT [1793,5428]
                    FIELD [1794,1826]
                        String: "name" [1794,1800]
                        STRING [1801,1826]
                            String: "${{ matrix.task.name }}" [1801,1826]
                    FIELD [1827,1865]
                        String: "runs-on" [1827,1836]
                        STRING [1837,1865]
                            String: "${{ matrix.task.runs_on }}" [1837,1865]
                    FIELD [1866,1886]
                        String: "timeout-minutes" [1866,1883]
                        NUMBER [1884,1886]
                            Number: 30 [1884,1886]
                    FIELD [1887,2487]
                        String: "strategy" [1887,1897]
                        OBJECT [1898,2487]
                            FIELD [1899,1916]
                                String: "fail-fast" [1899,1910]
                                FALSE [1911,1916]
                            FIELD [1917,2486]
                                String: "matrix" [1917,1925]
                                OBJECT [1926,2486]
                                    FIELD [1927,2485]
                                        String: "task" [1927,1933]
                                        ARRAY [1934,2485]
                                            OBJECT [1935,2061]
                                                FIELD [1936,1949]
                                                    String: "name" [1936,1942]
                                                    STRING [1943,1949]
                                                        String: "Lint" [1943,1949]
                                                FIELD [1950,1975]
                                                    String: "runs_on" [1950,1959]
                                                    STRING [1960,1975]
                                                        String: "ubuntu-latest" [1960,1975]
                                                FIELD [1976,1999]
                                                    String: "coverage_report" [1976,1993]
                                                    FALSE [1994,1999]
                                                FIELD [2000,2022]
                                                    String: "torch_platform" [2000,2016]
                                                    STRING [2017,2022]
                                                        String: "cpu" [2017,2022]
                                                FIELD [2023,2060]
                                                    String: "run" [2023,2028]
                                                    STRING [2029,2060]
                                                        String: "make flake8\nmake typecheck\n" [2029,2060]
                                            OBJECT [2062,2172]
                                                FIELD [2063,2081]
                                                    String: "name" [2063,2069]
                                                    STRING [2070,2081]
                                                        String: "CPU Tests" [2070,2081]
                                                FIELD [2082,2107]
                                                    String: "runs_on" [2082,2091]
                                                    STRING [2092,2107]
                                                        String: "ubuntu-latest" [2092,2107]
                                                FIELD [2108,2130]
                                                    String: "coverage_report" [2108,2125]
                                                    TRUE [2126,2130]
                                                FIELD [2131,2153]
                                                    String: "torch_platform" [2131,2147]
                                                    STRING [2148,2153]
                                                        String: "cpu" [2148,2153]
                                                FIELD [2154,2171]
                                                    String: "run" [2154,2159]
                                                    STRING [2160,2171]
                                                        String: "make test" [2160,2171]
                                            OBJECT [2173,2306]
                                                FIELD [2174,2192]
                                                    String: "name" [2174,2180]
                                                    STRING [2181,2192]
                                                        String: "GPU Tests" [2181,2192]
                                                FIELD [2193,2236]
                                                    String: "runs_on" [2193,2202]
                                                    ARRAY [2203,2236]
                                                        STRING [2204,2217]
                                                            String: "self-hosted" [2204,2217]
                                                        STRING [2218,2223]
                                                            String: "GPU" [2218,2223]
                                                        STRING [2224,2235]
                                                            String: "Multi GPU" [2224,2235]
                                                FIELD [2237,2259]
                                                    String: "coverage_report" [2237,2254]
                                                    TRUE [2255,2259]
                                                FIELD [2260,2282]
                                                    String: "torch_platform" [2260,2276]
                                                    STRING [2277,2282]
                                                        String: "gpu" [2277,2282]
                                                FIELD [2283,2305]
                                                    String: "run" [2283,2288]
                                                    STRING [2289,2305]
                                                        String: "make gpu-tests" [2289,2305]
                                            OBJECT [2307,2484]
                                                FIELD [2308,2328]
                                                    String: "name" [2308,2314]
                                                    STRING [2315,2328]
                                                        String: "Model Tests" [2315,2328]
                                                FIELD [2329,2354]
                                                    String: "runs_on" [2329,2338]
                                                    STRING [2339,2354]
                                                        String: "ubuntu-latest" [2339,2354]
                                                FIELD [2355,2377]
                                                    String: "coverage_report" [2355,2372]
                                                    TRUE [2373,2377]
                                                FIELD [2378,2400]
                                                    String: "torch_platform" [2378,2394]
                                                    STRING [2395,2400]
                                                        String: "cpu" [2395,2400]
                                                FIELD [2401,2483]
                                                    String: "run" [2401,2406]
                                                    STRING [2407,2483]
                                                        String: "cd allennlp-models\nmake test-with-cov COV=allennlp\nmv coverage.xml ../\n" [2407,2483]
                    FIELD [2488,5427]
                        String: "steps" [2488,2495]
                        ARRAY [2496,5427]
                            OBJECT [2497,2527]
                                FIELD [2498,2526]
                                    String: "uses" [2498,2504]
                                    STRING [2505,2526]
                                        String: "actions/checkout@v2" [2505,2526]
                            OBJECT [2528,2650]
                                FIELD [2529,2550]
                                    String: "name" [2529,2535]
                                    STRING [2536,2550]
                                        String: "Setup Python" [2536,2550]
                                FIELD [2551,2583]
                                    String: "uses" [2551,2557]
                                    STRING [2558,2583]
                                        String: "actions/setup-python@v2" [2558,2583]
                                FIELD [2584,2619]
                                    String: "env" [2584,2589]
                                    OBJECT [2590,2619]
                                        FIELD [2591,2618]
                                            String: "ACTIONS_STEP_DEBUG" [2591,2611]
                                            STRING [2612,2618]
                                                String: "true" [2612,2618]
                                FIELD [2620,2649]
                                    String: "with" [2620,2626]
                                    OBJECT [2627,2649]
                                        FIELD [2628,2648]
                                            String: "python-version" [2628,2644]
                                            NUMBER [2645,2648]
                                                Number: 3.8 [2645,2648]
                            OBJECT [2651,2747]
                                FIELD [2652,2682]
                                    String: "name" [2652,2658]
                                    STRING [2659,2682]
                                        String: "Install prerequisites" [2659,2682]
                                FIELD [2683,2746]
                                    String: "run" [2683,2688]
                                    STRING [2689,2746]
                                        String: "pip install --upgrade pip setuptools wheel virtualenv\n" [2689,2746]
                            OBJECT [2748,3085]
                                FIELD [2749,2777]
                                    String: "name" [2749,2755]
                                    STRING [2756,2777]
                                        String: "Set build variables" [2756,2777]
                                FIELD [2778,2792]
                                    String: "shell" [2778,2785]
                                    STRING [2786,2792]
                                        String: "bash" [2786,2792]
                                FIELD [2793,3084]
                                    String: "run" [2793,2798]
                                    STRING [2799,3084]
                                        String: "# Get the exact Python version to use in the cache key.\necho \"PYTHON_VERSION=$(python --version)\" >> $GITHUB_ENV\necho \"RUNNER_ARCH=$(uname -m)\" >> $GITHUB_ENV\n# Use week number in cache key so we can refresh the cache weekly.\necho \"WEEK_NUMBER=$(date +%V)\" >> $GITHUB_ENV\n" [2799,3084]
                            OBJECT [3086,3237]
                                FIELD [3087,3126]
                                    String: "name" [3087,3093]
                                    STRING [3094,3126]
                                        String: "Set build variables (CPU only)" [3094,3126]
                                FIELD [3127,3169]
                                    String: "if" [3127,3131]
                                    STRING [3132,3169]
                                        String: "matrix.task.torch_platform == 'cpu'" [3132,3169]
                                FIELD [3170,3236]
                                    String: "run" [3170,3175]
                                    STRING [3176,3236]
                                        String: "echo \"TORCH_INSTALL=$TORCH_CPU_INSTALL\" >> $GITHUB_ENV\n" [3176,3236]
                            OBJECT [3238,3389]
                                FIELD [3239,3278]
                                    String: "name" [3239,3245]
                                    STRING [3246,3278]
                                        String: "Set build variables (GPU only)" [3246,3278]
                                FIELD [3279,3321]
                                    String: "if" [3279,3283]
                                    STRING [3284,3321]
                                        String: "matrix.task.torch_platform == 'gpu'" [3284,3321]
                                FIELD [3322,3388]
                                    String: "run" [3322,3327]
                                    STRING [3328,3388]
                                        String: "echo \"TORCH_INSTALL=$TORCH_GPU_INSTALL\" >> $GITHUB_ENV\n" [3328,3388]
                            OBJECT [3390,3857]
                                FIELD [3391,3416]
                                    String: "uses" [3391,3397]
                                    STRING [3398,3416]
                                        String: "actions/cache@v2" [3398,3416]
                                FIELD [3417,3440]
                                    String: "id" [3417,3421]
                                    STRING [3422,3440]
                                        String: "virtualenv-cache" [3422,3440]
                                FIELD [3441,3856]
                                    String: "with" [3441,3447]
                                    OBJECT [3448,3856]
                                        FIELD [3449,3463]
                                            String: "path" [3449,3455]
                                            STRING [3456,3463]
                                                String: ".venv" [3456,3463]
                                        FIELD [3464,3688]
                                            String: "key" [3464,3469]
                                            STRING [3470,3688]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-${{ matrix.task.torch_platform }}-${{ hashFiles('setup.py') }}-${{ hashFiles('dev-requirements.txt') }}" [3470,3688]
                                        FIELD [3689,3855]
                                            String: "restore-keys" [3689,3703]
                                            STRING [3704,3855]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-${{ matrix.task.torch_platform }}-\n" [3704,3855]
                            OBJECT [3858,4125]
                                FIELD [3859,3908]
                                    String: "name" [3859,3865]
                                    STRING [3866,3908]
                                        String: "Setup virtual environment (no cache hit)" [3866,3908]
                                FIELD [3909,3966]
                                    String: "if" [3909,3913]
                                    STRING [3914,3966]
                                        String: "steps.virtualenv-cache.outputs.cache-hit != 'true'" [3914,3966]
                                FIELD [3967,4124]
                                    String: "run" [3967,3972]
                                    STRING [3973,4124]
                                        String: "test -d .venv || virtualenv -p $(which python) --copies --reset-app-data .venv\n. .venv/bin/activate\nmake install TORCH_INSTALL=\"$TORCH_INSTALL\"\n" [3973,4124]
                            OBJECT [4126,4313]
                                FIELD [4127,4173]
                                    String: "name" [4127,4133]
                                    STRING [4134,4173]
                                        String: "Setup virtual environment (cache hit)" [4134,4173]
                                FIELD [4174,4231]
                                    String: "if" [4174,4178]
                                    STRING [4179,4231]
                                        String: "steps.virtualenv-cache.outputs.cache-hit == 'true'" [4179,4231]
                                FIELD [4232,4312]
                                    String: "run" [4232,4237]
                                    STRING [4238,4312]
                                        String: ". .venv/bin/activate\npip install --no-deps -e .\nmake download-extras\n" [4238,4312]
                            OBJECT [4314,4619]
                                FIELD [4315,4352]
                                    String: "name" [4315,4321]
                                    STRING [4322,4352]
                                        String: "Pull and install models repo" [4322,4352]
                                FIELD [4353,4393]
                                    String: "if" [4353,4357]
                                    STRING [4358,4393]
                                        String: "matrix.task.name == 'Model Tests'" [4358,4393]
                                FIELD [4394,4432]
                                    String: "env" [4394,4399]
                                    OBJECT [4400,4432]
                                        FIELD [4401,4431]
                                            String: "ALLENNLP_VERSION_OVERRIDE" [4401,4428]
                                            STRING [4429,4431]
                                                String: "" [4429,4431]
                                FIELD [4433,4618]
                                    String: "run" [4433,4438]
                                    STRING [4439,4618]
                                        String: ". .venv/bin/activate\ngit clone https://github.com/allenai/allennlp-models.git\ncd allennlp-models\npip install --upgrade --upgrade-strategy eager -e . -r dev-requirements.txt\n" [4439,4618]
                            OBJECT [4620,4698]
                                FIELD [4621,4640]
                                    String: "name" [4621,4627]
                                    STRING [4628,4640]
                                        String: "Debug info" [4628,4640]
                                FIELD [4641,4697]
                                    String: "run" [4641,4646]
                                    STRING [4647,4697]
                                        String: ". .venv/bin/activate\nwhich python\npip freeze\n" [4647,4697]
                            OBJECT [4699,4803]
                                FIELD [4700,4732]
                                    String: "name" [4700,4706]
                                    STRING [4707,4732]
                                        String: "Ensure torch up-to-date" [4707,4732]
                                FIELD [4733,4802]
                                    String: "run" [4733,4738]
                                    STRING [4739,4802]
                                        String: ". .venv/bin/activate\npython scripts/check_torch_version.py\n" [4739,4802]
                            OBJECT [4804,4893]
                                FIELD [4805,4837]
                                    String: "name" [4805,4811]
                                    STRING [4812,4837]
                                        String: "${{ matrix.task.name }}" [4812,4837]
                                FIELD [4838,4892]
                                    String: "run" [4838,4843]
                                    STRING [4844,4892]
                                        String: ". .venv/bin/activate\n${{ matrix.task.run }}\n" [4844,4892]
                            OBJECT [4894,5015]
                                FIELD [4895,4927]
                                    String: "name" [4895,4901]
                                    STRING [4902,4927]
                                        String: "Prepare coverage report" [4902,4927]
                                FIELD [4928,4962]
                                    String: "if" [4928,4932]
                                    STRING [4933,4962]
                                        String: "matrix.task.coverage_report" [4933,4962]
                                FIELD [4963,5014]
                                    String: "run" [4963,4968]
                                    STRING [4969,5014]
                                        String: "mkdir coverage\nmv coverage.xml coverage/\n" [4969,5014]
                            OBJECT [5016,5189]
                                FIELD [5017,5046]
                                    String: "name" [5017,5023]
                                    STRING [5024,5046]
                                        String: "Save coverage report" [5024,5046]
                                FIELD [5047,5081]
                                    String: "if" [5047,5051]
                                    STRING [5052,5081]
                                        String: "matrix.task.coverage_report" [5052,5081]
                                FIELD [5082,5117]
                                    String: "uses" [5082,5088]
                                    STRING [5089,5117]
                                        String: "actions/upload-artifact@v1" [5089,5117]
                                FIELD [5118,5188]
                                    String: "with" [5118,5124]
                                    OBJECT [5125,5188]
                                        FIELD [5126,5167]
                                            String: "name" [5126,5132]
                                            STRING [5133,5167]
                                                String: "${{ matrix.task.name }}-coverage" [5133,5167]
                                        FIELD [5168,5187]
                                            String: "path" [5168,5174]
                                            STRING [5175,5187]
                                                String: "./coverage" [5175,5187]
                            OBJECT [5190,5426]
                                FIELD [5191,5208]
                                    String: "name" [5191,5197]
                                    STRING [5198,5208]
                                        String: "Clean up" [5198,5208]
                                FIELD [5209,5224]
                                    String: "if" [5209,5213]
                                    STRING [5214,5224]
                                        String: "always()" [5214,5224]
                                FIELD [5225,5425]
                                    String: "run" [5225,5230]
                                    STRING [5231,5425]
                                        String: "# Could run into issues with the cache if we don't uninstall the editable.\n# See https://github.com/pypa/pip/issues/4537.\n. .venv/bin/activate\npip uninstall --yes allennlp allennlp-models\n" [5231,5425]
            FIELD [5429,6388]
                String: "upload_coverage" [5429,5446]
                OBJECT [5447,6388]
                    FIELD [5448,5479]
                        String: "name" [5448,5454]
                        STRING [5455,5479]
                            String: "Upload Coverage Report" [5455,5479]
                    FIELD [5480,5499]
                        String: "timeout-minutes" [5480,5497]
                        NUMBER [5498,5499]
                            Number: 5 [5498,5499]
                    FIELD [5500,5618]
                        String: "if" [5500,5504]
                        STRING [5505,5618]
                            String: "github.repository == 'allenai/allennlp' && (github.event_name == 'push' || github.event_name == 'pull_request')" [5505,5618]
                    FIELD [5619,5644]
                        String: "runs-on" [5619,5628]
                        STRING [5629,5644]
                            String: "ubuntu-latest" [5629,5644]
                    FIELD [5645,5663]
                        String: "needs" [5645,5652]
                        ARRAY [5653,5663]
                            STRING [5654,5662]
                                String: "checks" [5654,5662]
                    FIELD [5664,6387]
                        String: "steps" [5664,5671]
                        ARRAY [5672,6387]
                            OBJECT [5673,5703]
                                FIELD [5674,5702]
                                    String: "uses" [5674,5680]
                                    STRING [5681,5702]
                                        String: "actions/checkout@v2" [5681,5702]
                            OBJECT [5704,5857]
                                FIELD [5705,5753]
                                    String: "name" [5705,5711]
                                    STRING [5712,5753]
                                        String: "Download coverage report from CPU tests" [5712,5753]
                                FIELD [5754,5791]
                                    String: "uses" [5754,5760]
                                    STRING [5761,5791]
                                        String: "actions/download-artifact@v1" [5761,5791]
                                FIELD [5792,5856]
                                    String: "with" [5792,5798]
                                    OBJECT [5799,5856]
                                        FIELD [5800,5827]
                                            String: "name" [5800,5806]
                                            STRING [5807,5827]
                                                String: "CPU Tests-coverage" [5807,5827]
                                        FIELD [5828,5855]
                                            String: "path" [5828,5834]
                                            STRING [5835,5855]
                                                String: "coverage/cpu_tests" [5835,5855]
                            OBJECT [5858,6011]
                                FIELD [5859,5907]
                                    String: "name" [5859,5865]
                                    STRING [5866,5907]
                                        String: "Download coverage report from GPU Tests" [5866,5907]
                                FIELD [5908,5945]
                                    String: "uses" [5908,5914]
                                    STRING [5915,5945]
                                        String: "actions/download-artifact@v1" [5915,5945]
                                FIELD [5946,6010]
                                    String: "with" [5946,5952]
                                    OBJECT [5953,6010]
                                        FIELD [5954,5981]
                                            String: "name" [5954,5960]
                                            STRING [5961,5981]
                                                String: "GPU Tests-coverage" [5961,5981]
                                        FIELD [5982,6009]
                                            String: "path" [5982,5988]
                                            STRING [5989,6009]
                                                String: "coverage/gpu_tests" [5989,6009]
                            OBJECT [6012,6171]
                                FIELD [6013,6063]
                                    String: "name" [6013,6019]
                                    STRING [6020,6063]
                                        String: "Download coverage report from model tests" [6020,6063]
                                FIELD [6064,6101]
                                    String: "uses" [6064,6070]
                                    STRING [6071,6101]
                                        String: "actions/download-artifact@v1" [6071,6101]
                                FIELD [6102,6170]
                                    String: "with" [6102,6108]
                                    OBJECT [6109,6170]
                                        FIELD [6110,6139]
                                            String: "name" [6110,6116]
                                            STRING [6117,6139]
                                                String: "Model Tests-coverage" [6117,6139]
                                        FIELD [6140,6169]
                                            String: "path" [6140,6146]
                                            STRING [6147,6169]
                                                String: "coverage/model_tests" [6147,6169]
                            OBJECT [6172,6386]
                                FIELD [6173,6208]
                                    String: "name" [6173,6179]
                                    STRING [6180,6208]
                                        String: "Upload coverage to Codecov" [6180,6208]
                                FIELD [6209,6243]
                                    String: "uses" [6209,6215]
                                    STRING [6216,6243]
                                        String: "codecov/codecov-action@v1" [6216,6243]
                                FIELD [6244,6385]
                                    String: "with" [6244,6250]
                                    OBJECT [6251,6385]
                                        FIELD [6252,6359]
                                            String: "files" [6252,6259]
                                            STRING [6260,6359]
                                                String: "coverage/cpu_tests/coverage.xml,coverage/gpu_tests/coverage.xml,coverage/model_tests/coverage.xml" [6260,6359]
                                        FIELD [6360,6384]
                                            String: "fail_ci_if_error" [6360,6378]
                                            FALSE [6379,6384]
            FIELD [6389,9296]
                String: "build_package" [6389,6404]
                OBJECT [6405,9296]
                    FIELD [6406,6428]
                        String: "name" [6406,6412]
                        STRING [6413,6428]
                            String: "Build Package" [6413,6428]
                    FIELD [6429,6449]
                        String: "timeout-minutes" [6429,6446]
                        NUMBER [6447,6449]
                            Number: 18 [6447,6449]
                    FIELD [6450,6475]
                        String: "runs-on" [6450,6459]
                        STRING [6460,6475]
                            String: "ubuntu-latest" [6460,6475]
                    FIELD [6476,9295]
                        String: "steps" [6476,6483]
                        ARRAY [6484,9295]
                            OBJECT [6485,6515]
                                FIELD [6486,6514]
                                    String: "uses" [6486,6492]
                                    STRING [6493,6514]
                                        String: "actions/checkout@v2" [6493,6514]
                            OBJECT [6516,6638]
                                FIELD [6517,6538]
                                    String: "name" [6517,6523]
                                    STRING [6524,6538]
                                        String: "Setup Python" [6524,6538]
                                FIELD [6539,6571]
                                    String: "uses" [6539,6545]
                                    STRING [6546,6571]
                                        String: "actions/setup-python@v2" [6546,6571]
                                FIELD [6572,6607]
                                    String: "env" [6572,6577]
                                    OBJECT [6578,6607]
                                        FIELD [6579,6606]
                                            String: "ACTIONS_STEP_DEBUG" [6579,6599]
                                            STRING [6600,6606]
                                                String: "true" [6600,6606]
                                FIELD [6608,6637]
                                    String: "with" [6608,6614]
                                    OBJECT [6615,6637]
                                        FIELD [6616,6636]
                                            String: "python-version" [6616,6632]
                                            NUMBER [6633,6636]
                                                Number: 3.8 [6633,6636]
                            OBJECT [6639,6735]
                                FIELD [6640,6670]
                                    String: "name" [6640,6646]
                                    STRING [6647,6670]
                                        String: "Install prerequisites" [6647,6670]
                                FIELD [6671,6734]
                                    String: "run" [6671,6676]
                                    STRING [6677,6734]
                                        String: "pip install --upgrade pip setuptools wheel virtualenv\n" [6677,6734]
                            OBJECT [6736,6948]
                                FIELD [6737,6765]
                                    String: "name" [6737,6743]
                                    STRING [6744,6765]
                                        String: "Set build variables" [6744,6765]
                                FIELD [6766,6780]
                                    String: "shell" [6766,6773]
                                    STRING [6774,6780]
                                        String: "bash" [6774,6780]
                                FIELD [6781,6947]
                                    String: "run" [6781,6786]
                                    STRING [6787,6947]
                                        String: "echo \"PYTHON_VERSION=$(python --version)\" >> $GITHUB_ENV\necho \"RUNNER_ARCH=$(uname -m)\" >> $GITHUB_ENV\necho \"WEEK_NUMBER=$(date +%V)\" >> $GITHUB_ENV\n" [6787,6947]
                            OBJECT [6949,7356]
                                FIELD [6950,6975]
                                    String: "uses" [6950,6956]
                                    STRING [6957,6975]
                                        String: "actions/cache@v2" [6957,6975]
                                FIELD [6976,6999]
                                    String: "id" [6976,6980]
                                    STRING [6981,6999]
                                        String: "virtualenv-cache" [6981,6999]
                                FIELD [7000,7355]
                                    String: "with" [7000,7006]
                                    OBJECT [7007,7355]
                                        FIELD [7008,7022]
                                            String: "path" [7008,7014]
                                            STRING [7015,7022]
                                                String: ".venv" [7015,7022]
                                        FIELD [7023,7217]
                                            String: "key" [7023,7028]
                                            STRING [7029,7217]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-cpu-${{ hashFiles('setup.py') }}-${{ hashFiles('dev-requirements.txt') }}" [7029,7217]
                                        FIELD [7218,7354]
                                            String: "restore-keys" [7218,7232]
                                            STRING [7233,7354]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-cpu-\n" [7233,7354]
                            OBJECT [7357,7628]
                                FIELD [7358,7407]
                                    String: "name" [7358,7364]
                                    STRING [7365,7407]
                                        String: "Setup virtual environment (no cache hit)" [7365,7407]
                                FIELD [7408,7465]
                                    String: "if" [7408,7412]
                                    STRING [7413,7465]
                                        String: "steps.virtualenv-cache.outputs.cache-hit != 'true'" [7413,7465]
                                FIELD [7466,7627]
                                    String: "run" [7466,7471]
                                    STRING [7472,7627]
                                        String: "test -d .venv || virtualenv -p $(which python) --copies --reset-app-data .venv\n. .venv/bin/activate\nmake install TORCH_INSTALL=\"$TORCH_CPU_INSTALL\"\n" [7472,7627]
                            OBJECT [7629,7816]
                                FIELD [7630,7676]
                                    String: "name" [7630,7636]
                                    STRING [7637,7676]
                                        String: "Setup virtual environment (cache hit)" [7637,7676]
                                FIELD [7677,7734]
                                    String: "if" [7677,7681]
                                    STRING [7682,7734]
                                        String: "steps.virtualenv-cache.outputs.cache-hit == 'true'" [7682,7734]
                                FIELD [7735,7815]
                                    String: "run" [7735,7740]
                                    STRING [7741,7815]
                                        String: ". .venv/bin/activate\npip install --no-deps -e .\nmake download-extras\n" [7741,7815]
                            OBJECT [7817,7895]
                                FIELD [7818,7837]
                                    String: "name" [7818,7824]
                                    STRING [7825,7837]
                                        String: "Debug info" [7825,7837]
                                FIELD [7838,7894]
                                    String: "run" [7838,7843]
                                    STRING [7844,7894]
                                        String: ". .venv/bin/activate\nwhich python\npip freeze\n" [7844,7894]
                            OBJECT [7896,8555]
                                FIELD [7897,7935]
                                    String: "name" [7897,7903]
                                    STRING [7904,7935]
                                        String: "Check and set nightly version" [7904,7935]
                                FIELD [7936,7974]
                                    String: "if" [7936,7940]
                                    STRING [7941,7974]
                                        String: "github.event_name == 'schedule'" [7941,7974]
                                FIELD [7975,8554]
                                    String: "run" [7975,7980]
                                    STRING [7981,8554]
                                        String: "# Verify that current version is ahead of the last release.\n. .venv/bin/activate\nLATEST=$(scripts/get_version.py latest)\nCURRENT=$(scripts/get_version.py current)\nif [ \"$CURRENT\" == \"$LATEST\" ]; then\n    echo \"Current version needs to be ahead of latest release in order to build nightly release\";\n    exit 1;\nfi\n# This is somewhat bizarre, but you can't set env variables to bash\n# commands in the action workflow - so we have to use this odd way of\n# exporting a variable instead.\necho \"ALLENNLP_VERSION_SUFFIX=dev$(date -u +%Y%m%d)\" >> $GITHUB_ENV\n" [7981,8554]
                            OBJECT [8556,8932]
                                FIELD [8557,8601]
                                    String: "name" [8557,8563]
                                    STRING [8564,8601]
                                        String: "Check version and release tag match" [8564,8601]
                                FIELD [8602,8639]
                                    String: "if" [8602,8606]
                                    STRING [8607,8639]
                                        String: "github.event_name == 'release'" [8607,8639]
                                FIELD [8640,8931]
                                    String: "run" [8640,8645]
                                    STRING [8646,8931]
                                        String: "# Remove 'refs/tags/' to get the actual tag from the release.\n. .venv/bin/activate\nTAG=${GITHUB_REF#refs/tags/};\nVERSION=$(scripts/get_version.py current)\nif [ \"$TAG\" != \"$VERSION\" ]; then\n    echo \"Bad tag or version. Tag $TAG does not match $VERSION\";\n    exit 1;\nfi\n" [8646,8931]
                            OBJECT [8933,9087]
                                FIELD [8934,8961]
                                    String: "name" [8934,8940]
                                    STRING [8941,8961]
                                        String: "Build core package" [8941,8961]
                                FIELD [8962,9086]
                                    String: "run" [8962,8967]
                                    STRING [8968,9086]
                                        String: "# Just print out the version for debugging.\n. .venv/bin/activate\nmake version\npython setup.py bdist_wheel sdist\n" [8968,9086]
                            OBJECT [9088,9197]
                                FIELD [9089,9115]
                                    String: "name" [9089,9095]
                                    STRING [9096,9115]
                                        String: "Save core package" [9096,9115]
                                FIELD [9116,9151]
                                    String: "uses" [9116,9122]
                                    STRING [9123,9151]
                                        String: "actions/upload-artifact@v1" [9123,9151]
                                FIELD [9152,9196]
                                    String: "with" [9152,9158]
                                    OBJECT [9159,9196]
                                        FIELD [9160,9181]
                                            String: "name" [9160,9166]
                                            STRING [9167,9181]
                                                String: "core-package" [9167,9181]
                                        FIELD [9182,9195]
                                            String: "path" [9182,9188]
                                            STRING [9189,9195]
                                                String: "dist" [9189,9195]
                            OBJECT [9198,9294]
                                FIELD [9199,9216]
                                    String: "name" [9199,9205]
                                    STRING [9206,9216]
                                        String: "Clean up" [9206,9216]
                                FIELD [9217,9232]
                                    String: "if" [9217,9221]
                                    STRING [9222,9232]
                                        String: "always()" [9222,9232]
                                FIELD [9233,9293]
                                    String: "run" [9233,9238]
                                    STRING [9239,9293]
                                        String: ". .venv/bin/activate\npip uninstall --yes allennlp\n" [9239,9293]
            FIELD [9297,9942]
                String: "test_package" [9297,9311]
                OBJECT [9312,9942]
                    FIELD [9313,9334]
                        String: "name" [9313,9319]
                        STRING [9320,9334]
                            String: "Test Package" [9320,9334]
                    FIELD [9335,9355]
                        String: "timeout-minutes" [9335,9352]
                        NUMBER [9353,9355]
                            Number: 10 [9353,9355]
                    FIELD [9356,9381]
                        String: "needs" [9356,9363]
                        ARRAY [9364,9381]
                            STRING [9365,9380]
                                String: "build_package" [9365,9380]
                    FIELD [9382,9407]
                        String: "runs-on" [9382,9391]
                        STRING [9392,9407]
                            String: "ubuntu-latest" [9392,9407]
                    FIELD [9408,9454]
                        String: "strategy" [9408,9418]
                        OBJECT [9419,9454]
                            FIELD [9420,9453]
                                String: "matrix" [9420,9428]
                                OBJECT [9429,9453]
                                    FIELD [9430,9452]
                                        String: "python" [9430,9438]
                                        ARRAY [9439,9452]
                                            STRING [9440,9445]
                                                String: "3.7" [9440,9445]
                                            STRING [9446,9451]
                                                String: "3.8" [9446,9451]
                    FIELD [9455,9941]
                        String: "steps" [9455,9462]
                        ARRAY [9463,9941]
                            OBJECT [9464,9569]
                                FIELD [9465,9486]
                                    String: "name" [9465,9471]
                                    STRING [9472,9486]
                                        String: "Setup Python" [9472,9486]
                                FIELD [9487,9519]
                                    String: "uses" [9487,9493]
                                    STRING [9494,9519]
                                        String: "actions/setup-python@v1" [9494,9519]
                                FIELD [9520,9568]
                                    String: "with" [9520,9526]
                                    OBJECT [9527,9568]
                                        FIELD [9528,9567]
                                            String: "python-version" [9528,9544]
                                            STRING [9545,9567]
                                                String: "${{ matrix.python }}" [9545,9567]
                            OBJECT [9570,9654]
                                FIELD [9571,9600]
                                    String: "name" [9571,9577]
                                    STRING [9578,9600]
                                        String: "Install requirements" [9578,9600]
                                FIELD [9601,9653]
                                    String: "run" [9601,9606]
                                    STRING [9607,9653]
                                        String: "pip install --upgrade pip setuptools wheel\n" [9607,9653]
                            OBJECT [9655,9770]
                                FIELD [9656,9686]
                                    String: "name" [9656,9662]
                                    STRING [9663,9686]
                                        String: "Download core package" [9663,9686]
                                FIELD [9687,9724]
                                    String: "uses" [9687,9693]
                                    STRING [9694,9724]
                                        String: "actions/download-artifact@v1" [9694,9724]
                                FIELD [9725,9769]
                                    String: "with" [9725,9731]
                                    OBJECT [9732,9769]
                                        FIELD [9733,9754]
                                            String: "name" [9733,9739]
                                            STRING [9740,9754]
                                                String: "core-package" [9740,9754]
                                        FIELD [9755,9768]
                                            String: "path" [9755,9761]
                                            STRING [9762,9768]
                                                String: "dist" [9762,9768]
                            OBJECT [9771,9841]
                                FIELD [9772,9801]
                                    String: "name" [9772,9778]
                                    STRING [9779,9801]
                                        String: "Install core package" [9779,9801]
                                FIELD [9802,9840]
                                    String: "run" [9802,9807]
                                    STRING [9808,9840]
                                        String: "pip install $(ls dist/*.whl)\n" [9808,9840]
                            OBJECT [9842,9884]
                                FIELD [9843,9862]
                                    String: "name" [9843,9849]
                                    STRING [9850,9862]
                                        String: "Pip freeze" [9850,9862]
                                FIELD [9863,9883]
                                    String: "run" [9863,9868]
                                    STRING [9869,9883]
                                        String: "pip freeze\n" [9869,9883]
                            OBJECT [9885,9940]
                                FIELD [9886,9907]
                                    String: "name" [9886,9892]
                                    STRING [9893,9907]
                                        String: "Test install" [9893,9907]
                                FIELD [9908,9939]
                                    String: "run" [9908,9913]
                                    STRING [9914,9939]
                                        String: "allennlp test-install\n" [9914,9939]
            FIELD [9943,11593]
                String: "docker" [9943,9951]
                OBJECT [9952,11593]
                    FIELD [9953,9994]
                        String: "name" [9953,9959]
                        STRING [9960,9994]
                            String: "Docker (CUDA ${{ matrix.cuda }})" [9960,9994]
                    FIELD [9995,10015]
                        String: "timeout-minutes" [9995,10012]
                        NUMBER [10013,10015]
                            Number: 18 [10013,10015]
                    FIELD [10016,10062]
                        String: "if" [10016,10020]
                        STRING [10021,10062]
                            String: "github.repository == 'allenai/allennlp'" [10021,10062]
                    FIELD [10063,10088]
                        String: "runs-on" [10063,10072]
                        STRING [10073,10088]
                            String: "ubuntu-latest" [10073,10088]
                    FIELD [10089,10135]
                        String: "strategy" [10089,10099]
                        OBJECT [10100,10135]
                            FIELD [10101,10134]
                                String: "matrix" [10101,10109]
                                OBJECT [10110,10134]
                                    FIELD [10111,10133]
                                        String: "cuda" [10111,10117]
                                        ARRAY [10118,10133]
                                            STRING [10119,10125]
                                                String: "10.2" [10119,10125]
                                            STRING [10126,10132]
                                                String: "11.1" [10126,10132]
                    FIELD [10136,11592]
                        String: "steps" [10136,10143]
                        ARRAY [10144,11592]
                            OBJECT [10145,10175]
                                FIELD [10146,10174]
                                    String: "uses" [10146,10152]
                                    STRING [10153,10174]
                                        String: "actions/checkout@v2" [10153,10174]
                            OBJECT [10176,10591]
                                FIELD [10177,10218]
                                    String: "name" [10177,10183]
                                    STRING [10184,10218]
                                        String: "Set image name and torch version" [10184,10218]
                                FIELD [10219,10254]
                                    String: "env" [10219,10224]
                                    OBJECT [10225,10254]
                                        FIELD [10226,10253]
                                            String: "CUDA" [10226,10232]
                                            STRING [10233,10253]
                                                String: "${{ matrix.cuda }}" [10233,10253]
                                FIELD [10255,10590]
                                    String: "run" [10255,10260]
                                    STRING [10261,10590]
                                        String: "echo \"DOCKER_TORCH_VERSION=${TORCH_VERSION}-cuda${CUDA}\" >> $GITHUB_ENV;\nif [[ $GITHUB_EVENT_NAME == 'release' ]]; then\n    echo \"DOCKER_IMAGE_NAME=allennlp/allennlp:${GITHUB_REF#refs/tags/}-cuda${CUDA}\" >> $GITHUB_ENV;\nelse\n    echo \"DOCKER_IMAGE_NAME=allennlp/commit:${GITHUB_SHA}-cuda${CUDA}\" >> $GITHUB_ENV;\nfi\n" [10261,10590]
                            OBJECT [10592,10730]
                                FIELD [10593,10613]
                                    String: "name" [10593,10599]
                                    STRING [10600,10613]
                                        String: "Build image" [10600,10613]
                                FIELD [10614,10729]
                                    String: "run" [10614,10619]
                                    STRING [10620,10729]
                                        String: "make docker-image DOCKER_IMAGE_NAME=\"$DOCKER_IMAGE_NAME\" DOCKER_TORCH_VERSION=\"$DOCKER_TORCH_VERSION\"\n" [10620,10729]
                            OBJECT [10731,10850]
                                FIELD [10732,10751]
                                    String: "name" [10732,10738]
                                    STRING [10739,10751]
                                        String: "Test image" [10739,10751]
                                FIELD [10752,10849]
                                    String: "run" [10752,10757]
                                    STRING [10758,10849]
                                        String: "make docker-run DOCKER_GPUS='' DOCKER_IMAGE_NAME=$DOCKER_IMAGE_NAME ARGS='test-install'\n" [10758,10849]
                            OBJECT [10851,11048]
                                FIELD [10852,10887]
                                    String: "name" [10852,10858]
                                    STRING [10859,10887]
                                        String: "Authenticate to Docker Hub" [10859,10887]
                                FIELD [10888,10956]
                                    String: "if" [10888,10892]
                                    STRING [10893,10956]
                                        String: "github.event_name == 'release' || github.event_name == 'push'" [10893,10956]
                                FIELD [10957,11047]
                                    String: "run" [10957,10962]
                                    STRING [10963,11047]
                                        String: "docker login -u ${{ secrets.DOCKER_USERNAME }} -p ${{ secrets.DOCKER_PASSWORD }}\n" [10963,11047]
                            OBJECT [11049,11182]
                                FIELD [11050,11071]
                                    String: "name" [11050,11056]
                                    STRING [11057,11071]
                                        String: "Upload image" [11057,11071]
                                FIELD [11072,11140]
                                    String: "if" [11072,11076]
                                    STRING [11077,11140]
                                        String: "github.event_name == 'release' || github.event_name == 'push'" [11077,11140]
                                FIELD [11141,11181]
                                    String: "run" [11141,11146]
                                    STRING [11147,11181]
                                        String: "docker push $DOCKER_IMAGE_NAME\n" [11147,11181]
                            OBJECT [11183,11394]
                                FIELD [11184,11220]
                                    String: "name" [11184,11190]
                                    STRING [11191,11220]
                                        String: "Upload default commit image" [11191,11220]
                                FIELD [11221,11280]
                                    String: "if" [11221,11225]
                                    STRING [11226,11280]
                                        String: "github.event_name == 'push' && matrix.cuda == '10.2'" [11226,11280]
                                FIELD [11281,11393]
                                    String: "run" [11281,11286]
                                    STRING [11287,11393]
                                        String: "docker tag $DOCKER_IMAGE_NAME allennlp/commit:${GITHUB_SHA}\ndocker push allennlp/commit:${GITHUB_SHA}\n" [11287,11393]
                            OBJECT [11395,11591]
                                FIELD [11396,11424]
                                    String: "name" [11396,11402]
                                    STRING [11403,11424]
                                        String: "Upload latest image" [11403,11424]
                                FIELD [11425,11487]
                                    String: "if" [11425,11429]
                                    STRING [11430,11487]
                                        String: "github.event_name == 'release' && matrix.cuda == '10.2'" [11430,11487]
                                FIELD [11488,11590]
                                    String: "run" [11488,11493]
                                    STRING [11494,11590]
                                        String: "docker tag $DOCKER_IMAGE_NAME allennlp/allennlp:latest\ndocker push allennlp/allennlp:latest\n" [11494,11590]
            FIELD [11594,16252]
                String: "docs" [11594,11600]
                OBJECT [11601,16252]
                    FIELD [11602,11615]
                        String: "name" [11602,11608]
                        STRING [11609,11615]
                            String: "Docs" [11609,11615]
                    FIELD [11616,11636]
                        String: "timeout-minutes" [11616,11633]
                        NUMBER [11634,11636]
                            Number: 15 [11634,11636]
                    FIELD [11637,11683]
                        String: "if" [11637,11641]
                        STRING [11642,11683]
                            String: "github.repository == 'allenai/allennlp'" [11642,11683]
                    FIELD [11684,11709]
                        String: "runs-on" [11684,11693]
                        STRING [11694,11709]
                            String: "ubuntu-latest" [11694,11709]
                    FIELD [11710,16251]
                        String: "steps" [11710,11717]
                        ARRAY [11718,16251]
                            OBJECT [11719,11749]
                                FIELD [11720,11748]
                                    String: "uses" [11720,11726]
                                    STRING [11727,11748]
                                        String: "actions/checkout@v1" [11727,11748]
                            OBJECT [11750,11946]
                                FIELD [11751,11779]
                                    String: "name" [11751,11757]
                                    STRING [11758,11779]
                                        String: "Setup SSH Client " [11758,11779]
                                FIELD [11780,11848]
                                    String: "if" [11780,11784]
                                    STRING [11785,11848]
                                        String: "github.event_name == 'release' || github.event_name == 'push'" [11785,11848]
                                FIELD [11849,11885]
                                    String: "uses" [11849,11855]
                                    STRING [11856,11885]
                                        String: "webfactory/ssh-agent@v0.4.1" [11856,11885]
                                FIELD [11886,11945]
                                    String: "with" [11886,11892]
                                    OBJECT [11893,11945]
                                        FIELD [11894,11944]
                                            String: "ssh-private-key" [11894,11911]
                                            STRING [11912,11944]
                                                String: "${{ secrets.DOCS_DEPLOY_KEY }}" [11912,11944]
                            OBJECT [11947,12069]
                                FIELD [11948,11969]
                                    String: "name" [11948,11954]
                                    STRING [11955,11969]
                                        String: "Setup Python" [11955,11969]
                                FIELD [11970,12002]
                                    String: "uses" [11970,11976]
                                    STRING [11977,12002]
                                        String: "actions/setup-python@v2" [11977,12002]
                                FIELD [12003,12038]
                                    String: "env" [12003,12008]
                                    OBJECT [12009,12038]
                                        FIELD [12010,12037]
                                            String: "ACTIONS_STEP_DEBUG" [12010,12030]
                                            STRING [12031,12037]
                                                String: "true" [12031,12037]
                                FIELD [12039,12068]
                                    String: "with" [12039,12045]
                                    OBJECT [12046,12068]
                                        FIELD [12047,12067]
                                            String: "python-version" [12047,12063]
                                            NUMBER [12064,12067]
                                                Number: 3.8 [12064,12067]
                            OBJECT [12070,12166]
                                FIELD [12071,12101]
                                    String: "name" [12071,12077]
                                    STRING [12078,12101]
                                        String: "Install prerequisites" [12078,12101]
                                FIELD [12102,12165]
                                    String: "run" [12102,12107]
                                    STRING [12108,12165]
                                        String: "pip install --upgrade pip setuptools wheel virtualenv\n" [12108,12165]
                            OBJECT [12167,12379]
                                FIELD [12168,12196]
                                    String: "name" [12168,12174]
                                    STRING [12175,12196]
                                        String: "Set build variables" [12175,12196]
                                FIELD [12197,12211]
                                    String: "shell" [12197,12204]
                                    STRING [12205,12211]
                                        String: "bash" [12205,12211]
                                FIELD [12212,12378]
                                    String: "run" [12212,12217]
                                    STRING [12218,12378]
                                        String: "echo \"PYTHON_VERSION=$(python --version)\" >> $GITHUB_ENV\necho \"RUNNER_ARCH=$(uname -m)\" >> $GITHUB_ENV\necho \"WEEK_NUMBER=$(date +%V)\" >> $GITHUB_ENV\n" [12218,12378]
                            OBJECT [12380,12787]
                                FIELD [12381,12406]
                                    String: "uses" [12381,12387]
                                    STRING [12388,12406]
                                        String: "actions/cache@v2" [12388,12406]
                                FIELD [12407,12430]
                                    String: "id" [12407,12411]
                                    STRING [12412,12430]
                                        String: "virtualenv-cache" [12412,12430]
                                FIELD [12431,12786]
                                    String: "with" [12431,12437]
                                    OBJECT [12438,12786]
                                        FIELD [12439,12453]
                                            String: "path" [12439,12445]
                                            STRING [12446,12453]
                                                String: ".venv" [12446,12453]
                                        FIELD [12454,12648]
                                            String: "key" [12454,12459]
                                            STRING [12460,12648]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-cpu-${{ hashFiles('setup.py') }}-${{ hashFiles('dev-requirements.txt') }}" [12460,12648]
                                        FIELD [12649,12785]
                                            String: "restore-keys" [12649,12663]
                                            STRING [12664,12785]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-cpu-\n" [12664,12785]
                            OBJECT [12788,13059]
                                FIELD [12789,12838]
                                    String: "name" [12789,12795]
                                    STRING [12796,12838]
                                        String: "Setup virtual environment (no cache hit)" [12796,12838]
                                FIELD [12839,12896]
                                    String: "if" [12839,12843]
                                    STRING [12844,12896]
                                        String: "steps.virtualenv-cache.outputs.cache-hit != 'true'" [12844,12896]
                                FIELD [12897,13058]
                                    String: "run" [12897,12902]
                                    STRING [12903,13058]
                                        String: "test -d .venv || virtualenv -p $(which python) --copies --reset-app-data .venv\n. .venv/bin/activate\nmake install TORCH_INSTALL=\"$TORCH_CPU_INSTALL\"\n" [12903,13058]
                            OBJECT [13060,13247]
                                FIELD [13061,13107]
                                    String: "name" [13061,13067]
                                    STRING [13068,13107]
                                        String: "Setup virtual environment (cache hit)" [13068,13107]
                                FIELD [13108,13165]
                                    String: "if" [13108,13112]
                                    STRING [13113,13165]
                                        String: "steps.virtualenv-cache.outputs.cache-hit == 'true'" [13113,13165]
                                FIELD [13166,13246]
                                    String: "run" [13166,13171]
                                    STRING [13172,13246]
                                        String: ". .venv/bin/activate\npip install --no-deps -e .\nmake download-extras\n" [13172,13246]
                            OBJECT [13248,13326]
                                FIELD [13249,13268]
                                    String: "name" [13249,13255]
                                    STRING [13256,13268]
                                        String: "Debug info" [13256,13268]
                                FIELD [13269,13325]
                                    String: "run" [13269,13274]
                                    STRING [13275,13325]
                                        String: ". .venv/bin/activate\nwhich python\npip freeze\n" [13275,13325]
                            OBJECT [13327,13764]
                                FIELD [13328,13356]
                                    String: "name" [13328,13334]
                                    STRING [13335,13356]
                                        String: "Prepare environment" [13335,13356]
                                FIELD [13357,13763]
                                    String: "run" [13357,13362]
                                    STRING [13363,13763]
                                        String: "if [[ $GITHUB_EVENT_NAME == 'release' ]]; then\n    echo \"DOCS_FOLDER=${GITHUB_REF#refs/tags/}\" >> $GITHUB_ENV;\n    echo \"BASE_SOURCE_LINK=https://github.com/allenai/allennlp/blob/${GITHUB_REF#refs/tags/}/allennlp/\" >> $GITHUB_ENV;\nelse\n    echo \"DOCS_FOLDER=main\" >> $GITHUB_ENV;\n    echo \"BASE_SOURCE_LINK=https://github.com/allenai/allennlp/blob/main/allennlp/\" >> $GITHUB_ENV;\nfi\n" [13363,13763]
                            OBJECT [13765,13842]
                                FIELD [13766,13785]
                                    String: "name" [13766,13772]
                                    STRING [13773,13785]
                                        String: "Build docs" [13773,13785]
                                FIELD [13786,13841]
                                    String: "run" [13786,13791]
                                    STRING [13792,13841]
                                        String: ". .venv/bin/activate\n./scripts/build_docs.sh\n" [13792,13841]
                            OBJECT [13843,13900]
                                FIELD [13844,13866]
                                    String: "name" [13844,13850]
                                    STRING [13851,13866]
                                        String: "Print the ref" [13851,13866]
                                FIELD [13867,13899]
                                    String: "run" [13867,13872]
                                    STRING [13873,13899]
                                        String: "echo ${{ github.ref }}\n" [13873,13899]
                            OBJECT [13901,14186]
                                FIELD [13902,13924]
                                    String: "name" [13902,13908]
                                    STRING [13909,13924]
                                        String: "Configure Git" [13909,13924]
                                FIELD [13925,14030]
                                    String: "if" [13925,13929]
                                    STRING [13930,14030]
                                        String: "github.event_name == 'release' || (github.event_name == 'push' && github.ref == 'refs/heads/main')" [13930,14030]
                                FIELD [14031,14185]
                                    String: "run" [14031,14036]
                                    STRING [14037,14185]
                                        String: "git config --global user.email \"ai2service@allenai.org\"\ngit config --global user.name \"ai2service\"\ngit config --global push.default simple\n" [14037,14185]
                            OBJECT [14187,14654]
                                FIELD [14188,14207]
                                    String: "name" [14188,14194]
                                    STRING [14195,14207]
                                        String: "Stage docs" [14195,14207]
                                FIELD [14208,14313]
                                    String: "if" [14208,14212]
                                    STRING [14213,14313]
                                        String: "github.event_name == 'release' || (github.event_name == 'push' && github.ref == 'refs/heads/main')" [14213,14313]
                                FIELD [14314,14653]
                                    String: "run" [14314,14319]
                                    STRING [14320,14653]
                                        String: "echo \"Staging docs to $DOCS_FOLDER\"\n\n# Checkout allennlp-docs to /allennlp-docs\ngit clone git@github.com:allenai/allennlp-docs.git ~/allennlp-docs\n\n# Copy the generated docs to the checked out docs repo\nrm -rf ~/allennlp-docs/$DOCS_FOLDER/\nmkdir -p ~/allennlp-docs/$DOCS_FOLDER\ncp -r site/* ~/allennlp-docs/$DOCS_FOLDER\n" [14320,14653]
                            OBJECT [14655,15551]
                                FIELD [14656,14681]
                                    String: "name" [14656,14662]
                                    STRING [14663,14681]
                                        String: "Update shortcuts" [14663,14681]
                                FIELD [14682,14719]
                                    String: "if" [14682,14686]
                                    STRING [14687,14719]
                                        String: "github.event_name == 'release'" [14687,14719]
                                FIELD [14720,15550]
                                    String: "run" [14720,14725]
                                    STRING [14726,15550]
                                        String: "# Fail immediately if any step fails.\nset -e\n. .venv/bin/activate\n\nLATEST=$(./scripts/get_version.py latest)\nSTABLE=$(./scripts/get_version.py stable)\n\ncd ~/allennlp-docs/\n\necho \"Updating latest/index.html to point to $LATEST\"\nmkdir -p latest\ncat >latest/index.html << EOL\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"Refresh\" content=\"0; url=/${LATEST}/\" />\n  </head>\n  <body>\n    <p>Please follow <a href=\"/${LATEST}/\">this link</a>.</p>\n  </body>\n</html>\nEOL\n\necho \"Updating stable/index.html to point to $STABLE\"\nmkdir -p stable\ncat >stable/index.html << EOL\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"Refresh\" content=\"0; url=/${STABLE}/\" />\n  </head>\n  <body>\n    <p>Please follow <a href=\"/${STABLE}/\">this link</a>.</p>\n  </body>\n</html>\nEOL\n" [14726,15550]
                            OBJECT [15552,15810]
                                FIELD [15553,15573]
                                    String: "name" [15553,15559]
                                    STRING [15560,15573]
                                        String: "Deploy docs" [15560,15573]
                                FIELD [15574,15679]
                                    String: "if" [15574,15578]
                                    STRING [15579,15679]
                                        String: "github.event_name == 'release' || (github.event_name == 'push' && github.ref == 'refs/heads/main')" [15579,15679]
                                FIELD [15680,15809]
                                    String: "run" [15680,15685]
                                    STRING [15686,15809]
                                        String: "# And push them up to GitHub\ncd ~/allennlp-docs/\ngit add -A\ngit commit -m \"automated update of the docs\"\ngit push\n" [15686,15809]
                            OBJECT [15811,16153]
                                FIELD [15812,15849]
                                    String: "name" [15812,15818]
                                    STRING [15819,15849]
                                        String: "Re-write docs commit history" [15819,15849]
                                FIELD [15850,15887]
                                    String: "if" [15850,15854]
                                    STRING [15855,15887]
                                        String: "github.event_name == 'release'" [15855,15887]
                                FIELD [15888,16152]
                                    String: "run" [15888,15893]
                                    STRING [15894,16152]
                                        String: "cd ~/allennlp-docs/\ngit checkout --orphan latest_branch\ngit add -A\ngit commit -m \"Re-write commit history\"\ngit branch -D master  # remove old master branch\ngit branch -m master  # rename clean new branch to master branch\ngit push -f origin master\n" [15894,16152]
                            OBJECT [16154,16250]
                                FIELD [16155,16172]
                                    String: "name" [16155,16161]
                                    STRING [16162,16172]
                                        String: "Clean up" [16162,16172]
                                FIELD [16173,16188]
                                    String: "if" [16173,16177]
                                    STRING [16178,16188]
                                        String: "always()" [16178,16188]
                                FIELD [16189,16249]
                                    String: "run" [16189,16194]
                                    STRING [16195,16249]
                                        String: ". .venv/bin/activate\npip uninstall --yes allennlp\n" [16195,16249]
            FIELD [16253,16956]
                String: "publish" [16253,16262]
                OBJECT [16263,16956]
                    FIELD [16264,16277]
                        String: "name" [16264,16270]
                        STRING [16271,16277]
                            String: "PyPI" [16271,16277]
                    FIELD [16278,16298]
                        String: "timeout-minutes" [16278,16295]
                        NUMBER [16296,16298]
                            Number: 10 [16296,16298]
                    FIELD [16299,16372]
                        String: "needs" [16299,16306]
                        ARRAY [16307,16372]
                            STRING [16308,16315]
                                String: "style" [16308,16315]
                            STRING [16316,16324]
                                String: "checks" [16316,16324]
                            STRING [16325,16340]
                                String: "build_package" [16325,16340]
                            STRING [16341,16355]
                                String: "test_package" [16341,16355]
                            STRING [16356,16364]
                                String: "docker" [16356,16364]
                            STRING [16365,16371]
                                String: "docs" [16365,16371]
                    FIELD [16373,16490]
                        String: "if" [16373,16377]
                        STRING [16378,16490]
                            String: "github.repository == 'allenai/allennlp' && (github.event_name == 'release' || github.event_name == 'schedule')" [16378,16490]
                    FIELD [16491,16516]
                        String: "runs-on" [16491,16500]
                        STRING [16501,16516]
                            String: "ubuntu-latest" [16501,16516]
                    FIELD [16517,16955]
                        String: "steps" [16517,16524]
                        ARRAY [16525,16955]
                            OBJECT [16526,16556]
                                FIELD [16527,16555]
                                    String: "uses" [16527,16533]
                                    STRING [16534,16555]
                                        String: "actions/checkout@v2" [16534,16555]
                            OBJECT [16557,16643]
                                FIELD [16558,16579]
                                    String: "name" [16558,16564]
                                    STRING [16565,16579]
                                        String: "Setup Python" [16565,16579]
                                FIELD [16580,16612]
                                    String: "uses" [16580,16586]
                                    STRING [16587,16612]
                                        String: "actions/setup-python@v1" [16587,16612]
                                FIELD [16613,16642]
                                    String: "with" [16613,16619]
                                    OBJECT [16620,16642]
                                        FIELD [16621,16641]
                                            String: "python-version" [16621,16637]
                                            NUMBER [16638,16641]
                                                Number: 3.7 [16638,16641]
                            OBJECT [16644,16734]
                                FIELD [16645,16674]
                                    String: "name" [16645,16651]
                                    STRING [16652,16674]
                                        String: "Install requirements" [16652,16674]
                                FIELD [16675,16733]
                                    String: "run" [16675,16680]
                                    STRING [16681,16733]
                                        String: "pip install --upgrade pip setuptools wheel twine\n" [16681,16733]
                            OBJECT [16735,16850]
                                FIELD [16736,16766]
                                    String: "name" [16736,16742]
                                    STRING [16743,16766]
                                        String: "Download core package" [16743,16766]
                                FIELD [16767,16804]
                                    String: "uses" [16767,16773]
                                    STRING [16774,16804]
                                        String: "actions/download-artifact@v1" [16774,16804]
                                FIELD [16805,16849]
                                    String: "with" [16805,16811]
                                    OBJECT [16812,16849]
                                        FIELD [16813,16834]
                                            String: "name" [16813,16819]
                                            STRING [16820,16834]
                                                String: "core-package" [16820,16834]
                                        FIELD [16835,16848]
                                            String: "path" [16835,16841]
                                            STRING [16842,16848]
                                                String: "dist" [16842,16848]
                            OBJECT [16851,16954]
                                FIELD [16852,16881]
                                    String: "name" [16852,16858]
                                    STRING [16859,16881]
                                        String: "Publish core package" [16859,16881]
                                FIELD [16882,16953]
                                    String: "run" [16882,16887]
                                    STRING [16888,16953]
                                        String: "twine upload -u allennlp -p ${{ secrets.PYPI_PASSWORD }} dist/*" [16888,16953]