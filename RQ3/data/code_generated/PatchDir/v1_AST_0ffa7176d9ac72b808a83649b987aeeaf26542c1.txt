OBJECT [0,6750]
    FIELD [1,20]
        String: "name" [1,7]
        STRING [8,20]
            String: "Autoformat" [8,20]
    FIELD [21,74]
        String: "on" [21,25]
        OBJECT [26,74]
            FIELD [27,73]
                String: "issue_comment" [27,42]
                OBJECT [43,73]
                    FIELD [44,72]
                        String: "types" [44,51]
                        ARRAY [52,72]
                            STRING [53,62]
                                String: "created" [53,62]
                            STRING [63,71]
                                String: "edited" [63,71]
    FIELD [75,108]
        String: "permissions" [75,88]
        OBJECT [89,108]
            FIELD [90,107]
                String: "contents" [90,100]
                STRING [101,107]
                    String: "read" [101,107]
    FIELD [109,181]
        String: "defaults" [109,119]
        OBJECT [120,181]
            FIELD [121,180]
                String: "run" [121,126]
                OBJECT [127,180]
                    FIELD [128,179]
                        String: "shell" [128,135]
                        STRING [136,179]
                            String: "bash --noprofile --norc -exo pipefail {0}" [136,179]
    FIELD [182,6749]
        String: "jobs" [182,188]
        OBJECT [189,6749]
            FIELD [190,1937]
                String: "check-comment" [190,205]
                OBJECT [206,1937]
                    FIELD [207,232]
                        String: "runs-on" [207,216]
                        STRING [217,232]
                            String: "ubuntu-latest" [217,232]
                    FIELD [233,253]
                        String: "timeout-minutes" [233,250]
                        NUMBER [251,253]
                            Number: 10 [251,253]
                    FIELD [254,413]
                        String: "if" [254,258]
                        STRING [259,413]
                            String: "${{ github.event.issue.pull_request && contains(github.event.comment.body, '@mlflow-automation') && contains(github.event.comment.body, 'autoformat') }}" [259,413]
                    FIELD [414,472]
                        String: "permissions" [414,427]
                        OBJECT [428,472]
                            FIELD [429,447]
                                String: "statuses" [429,439]
                                STRING [440,447]
                                    String: "write" [440,447]
                            FIELD [448,471]
                                String: "pull-requests" [448,463]
                                STRING [464,471]
                                    String: "write" [464,471]
                    FIELD [473,1041]
                        String: "outputs" [473,482]
                        OBJECT [483,1041]
                            FIELD [484,566]
                                String: "should_autoformat" [484,503]
                                STRING [504,566]
                                    String: "${{ fromJSON(steps.judge.outputs.result).shouldAutoformat }}" [504,566]
                            FIELD [567,636]
                                String: "repository" [567,579]
                                STRING [580,636]
                                    String: "${{ fromJSON(steps.judge.outputs.result).repository }}" [580,636]
                            FIELD [637,702]
                                String: "head_ref" [637,647]
                                STRING [648,702]
                                    String: "${{ fromJSON(steps.judge.outputs.result).head_ref }}" [648,702]
                            FIELD [703,768]
                                String: "head_sha" [703,713]
                                STRING [714,768]
                                    String: "${{ fromJSON(steps.judge.outputs.result).head_sha }}" [714,768]
                            FIELD [769,834]
                                String: "base_ref" [769,779]
                                STRING [780,834]
                                    String: "${{ fromJSON(steps.judge.outputs.result).base_ref }}" [780,834]
                            FIELD [835,900]
                                String: "base_sha" [835,845]
                                STRING [846,900]
                                    String: "${{ fromJSON(steps.judge.outputs.result).base_sha }}" [846,900]
                            FIELD [901,968]
                                String: "base_repo" [901,912]
                                STRING [913,968]
                                    String: "${{ fromJSON(steps.judge.outputs.result).base_repo }}" [913,968]
                            FIELD [969,1040]
                                String: "pull_number" [969,982]
                                STRING [983,1040]
                                    String: "${{ fromJSON(steps.judge.outputs.result).pull_number }}" [983,1040]
                    FIELD [1042,1936]
                        String: "steps" [1042,1049]
                        ARRAY [1050,1936]
                            OBJECT [1051,1081]
                                FIELD [1052,1080]
                                    String: "uses" [1052,1058]
                                    STRING [1059,1080]
                                        String: "actions/checkout@v4" [1059,1080]
                            OBJECT [1082,1935]
                                FIELD [1083,1097]
                                    String: "name" [1083,1089]
                                    STRING [1090,1097]
                                        String: "judge" [1090,1097]
                                FIELD [1098,1110]
                                    String: "id" [1098,1102]
                                    STRING [1103,1110]
                                        String: "judge" [1103,1110]
                                FIELD [1111,1144]
                                    String: "uses" [1111,1117]
                                    STRING [1118,1144]
                                        String: "actions/github-script@v7" [1118,1144]
                                FIELD [1145,1934]
                                    String: "with" [1145,1151]
                                    OBJECT [1152,1934]
                                        FIELD [1153,1197]
                                            String: "github-token" [1153,1167]
                                            STRING [1168,1197]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [1168,1197]
                                        FIELD [1198,1933]
                                            String: "script" [1198,1206]
                                            STRING [1207,1933]
                                                String: "core.debug(JSON.stringify(context, null, 2));\nconst autoformat = require('./.github/workflows/autoformat.js');\nconst { comment } = context.payload;\nconst pullInfo = await autoformat.getPullInformation(context, github);\nconst isMaintainer = autoformat.isMlflowMaintainer(comment.author_association) && autoformat.isMlflowMaintainer(pullInfo.author_association);\nif (!isMaintainer) {\n  core.setFailed(\"Only MLflow maintainers can trigger this workflow in their PRs.\");\n}\nconst shouldAutoformat = autoformat.shouldAutoformat(comment);\nif (shouldAutoformat) {\n  await autoformat.createReaction(context, github);\n  await autoformat.createStatus(context, github, core);\n}\nreturn { ...pullInfo, shouldAutoformat };\n" [1207,1933]
            FIELD [1938,5074]
                String: "format" [1938,1946]
                OBJECT [1947,5074]
                    FIELD [1948,1973]
                        String: "runs-on" [1948,1957]
                        STRING [1958,1973]
                            String: "ubuntu-latest" [1958,1973]
                    FIELD [1974,1994]
                        String: "timeout-minutes" [1974,1991]
                        NUMBER [1992,1994]
                            Number: 30 [1992,1994]
                    FIELD [1995,2018]
                        String: "needs" [1995,2002]
                        STRING [2003,2018]
                            String: "check-comment" [2003,2018]
                    FIELD [2019,2088]
                        String: "if" [2019,2023]
                        STRING [2024,2088]
                            String: "${{ needs.check-comment.outputs.should_autoformat == 'true' }}" [2024,2088]
                    FIELD [2089,2127]
                        String: "permissions" [2089,2102]
                        OBJECT [2103,2127]
                            FIELD [2104,2126]
                                String: "pull-requests" [2104,2119]
                                STRING [2120,2126]
                                    String: "read" [2120,2126]
                    FIELD [2128,2194]
                        String: "outputs" [2128,2137]
                        OBJECT [2138,2194]
                            FIELD [2139,2193]
                                String: "reformatted" [2139,2152]
                                STRING [2153,2193]
                                    String: "${{ steps.patch.outputs.reformatted }}" [2153,2193]
                    FIELD [2195,5073]
                        String: "steps" [2195,2202]
                        ARRAY [2203,5073]
                            OBJECT [2204,2374]
                                FIELD [2205,2233]
                                    String: "uses" [2205,2211]
                                    STRING [2212,2233]
                                        String: "actions/checkout@v4" [2212,2233]
                                FIELD [2234,2373]
                                    String: "with" [2234,2240]
                                    OBJECT [2241,2373]
                                        FIELD [2242,2302]
                                            String: "repository" [2242,2254]
                                            STRING [2255,2302]
                                                String: "${{ needs.check-comment.outputs.repository }}" [2255,2302]
                                        FIELD [2303,2354]
                                            String: "ref" [2303,2308]
                                            STRING [2309,2354]
                                                String: "${{ needs.check-comment.outputs.head_ref }}" [2309,2354]
                                        FIELD [2355,2372]
                                            String: "fetch-depth" [2355,2368]
                                            NUMBER [2369,2372]
                                                Number: 300 [2369,2372]
                            OBJECT [2375,3063]
                                FIELD [2376,2395]
                                    String: "name" [2376,2382]
                                    STRING [2383,2395]
                                        String: "Check diff" [2383,2395]
                                FIELD [2396,2407]
                                    String: "id" [2396,2400]
                                    STRING [2401,2407]
                                        String: "diff" [2401,2407]
                                FIELD [2408,2460]
                                    String: "env" [2408,2413]
                                    OBJECT [2414,2460]
                                        FIELD [2415,2459]
                                            String: "GITHUB_TOKEN" [2415,2429]
                                            STRING [2430,2459]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [2430,2459]
                                FIELD [2461,3062]
                                    String: "run" [2461,2466]
                                    STRING [2467,3062]
                                        String: "changed_files=\"$(gh pr view --repo ${{ github.repository }} ${{ needs.check-comment.outputs.pull_number }} --json files --jq '.files.[].path')\"\nprotos=$([[ -z $(echo \"$changed_files\" | grep '^\\(mlflow/protos\\|tests/protos\\)') ]] && echo \"false\" || echo \"true\")\njs=$([[ -z $(echo \"$changed_files\" | grep '^mlflow/server/js') ]] && echo \"false\" || echo \"true\")\nr=$([[ -z $(echo \"$changed_files\" | grep '^mlflow/R/mlflow') ]] && echo \"false\" || echo \"true\")\necho \"protos=$protos\" >> $GITHUB_OUTPUT\necho \"js=$js\" >> $GITHUB_OUTPUT\necho \"r=$r\" >> $GITHUB_OUTPUT\n" [2467,3062]
                            OBJECT [3064,3420]
                                FIELD [3065,3091]
                                    String: "name" [3065,3071]
                                    STRING [3072,3091]
                                        String: "Merge base branch" [3072,3091]
                                FIELD [3092,3419]
                                    String: "run" [3092,3097]
                                    STRING [3098,3419]
                                        String: "git config user.name 'mlflow-automation'\ngit config user.email 'mlflow-automation@users.noreply.github.com'\ngit remote add base https://github.com/${{ needs.check-comment.outputs.base_repo }}.git\ngit fetch base ${{ needs.check-comment.outputs.base_ref }}\ngit merge base/${{ needs.check-comment.outputs.base_ref }}\n" [3098,3419]
                            OBJECT [3421,3462]
                                FIELD [3422,3461]
                                    String: "uses" [3422,3428]
                                    STRING [3429,3461]
                                        String: "./.github/actions/setup-python" [3429,3461]
                            OBJECT [3463,3734]
                                FIELD [3464,3733]
                                    String: "run" [3464,3469]
                                    STRING [3470,3733]
                                        String: "pip install -r requirements/lint-requirements.txt\n# TODO: Use a precompiled binary once it's available: https://github.com/tamasfe/taplo/issues/542\ncargo install taplo-cli@0.9.0 --locked\npre-commit install\npre-commit run --all-files --color=always || true\n" [3470,3733]
                            OBJECT [3735,4103]
                                FIELD [3736,3778]
                                    String: "if" [3736,3740]
                                    STRING [3741,3778]
                                        String: "steps.diff.outputs.protos == 'true'" [3741,3778]
                                FIELD [3779,3806]
                                    String: "env" [3779,3784]
                                    OBJECT [3785,3806]
                                        FIELD [3786,3805]
                                            String: "DOCKER_BUILDKIT" [3786,3803]
                                            NUMBER [3804,3805]
                                                Number: 1 [3804,3805]
                                FIELD [3807,4102]
                                    String: "run" [3807,3812]
                                    STRING [3813,4102]
                                        String: "wget https://github.com/protocolbuffers/protobuf/releases/download/v3.19.4/protoc-3.19.4-linux-x86_64.zip -O /tmp/protoc.zip\nsudo unzip /tmp/protoc.zip -d /tmp/protoc\nsudo chmod -R 777 /tmp/protoc\necho \"/tmp/protoc/bin\" >> $GITHUB_PATH\npip install --upgrade pip\npip install -e .\n" [3813,4102]
                            OBJECT [4104,4190]
                                FIELD [4105,4147]
                                    String: "if" [4105,4109]
                                    STRING [4110,4147]
                                        String: "steps.diff.outputs.protos == 'true'" [4110,4147]
                                FIELD [4148,4189]
                                    String: "run" [4148,4153]
                                    STRING [4154,4189]
                                        String: "python ./dev/generate_protos.py\n" [4154,4189]
                            OBJECT [4191,4291]
                                FIELD [4192,4230]
                                    String: "if" [4192,4196]
                                    STRING [4197,4230]
                                        String: "steps.diff.outputs.js == 'true'" [4197,4230]
                                FIELD [4231,4261]
                                    String: "uses" [4231,4237]
                                    STRING [4238,4261]
                                        String: "actions/setup-node@v3" [4238,4261]
                                FIELD [4262,4290]
                                    String: "with" [4262,4268]
                                    OBJECT [4269,4290]
                                        FIELD [4270,4289]
                                            String: "node-version" [4270,4284]
                                            STRING [4285,4289]
                                                String: "16" [4285,4289]
                            OBJECT [4292,4394]
                                FIELD [4293,4331]
                                    String: "if" [4293,4297]
                                    STRING [4298,4331]
                                        String: "steps.diff.outputs.js == 'true'" [4298,4331]
                                FIELD [4332,4370]
                                    String: "working-directory" [4332,4351]
                                    STRING [4352,4370]
                                        String: "mlflow/server/js" [4352,4370]
                                FIELD [4371,4393]
                                    String: "run" [4371,4376]
                                    STRING [4377,4393]
                                        String: "yarn install\n" [4377,4393]
                            OBJECT [4395,4517]
                                FIELD [4396,4434]
                                    String: "if" [4396,4400]
                                    STRING [4401,4434]
                                        String: "steps.diff.outputs.js == 'true'" [4401,4434]
                                FIELD [4435,4473]
                                    String: "working-directory" [4435,4454]
                                    STRING [4455,4473]
                                        String: "mlflow/server/js" [4455,4473]
                                FIELD [4474,4516]
                                    String: "run" [4474,4479]
                                    STRING [4480,4516]
                                        String: "yarn lint:fix\nyarn prettier:fix\n" [4480,4516]
                            OBJECT [4518,4617]
                                FIELD [4519,4557]
                                    String: "if" [4519,4523]
                                    STRING [4524,4557]
                                        String: "steps.diff.outputs.js == 'true'" [4524,4557]
                                FIELD [4558,4596]
                                    String: "working-directory" [4558,4577]
                                    STRING [4578,4596]
                                        String: "mlflow/server/js" [4578,4596]
                                FIELD [4597,4616]
                                    String: "run" [4597,4602]
                                    STRING [4603,4616]
                                        String: "yarn i18n\n" [4603,4616]
                            OBJECT [4618,4710]
                                FIELD [4619,4656]
                                    String: "if" [4619,4623]
                                    STRING [4624,4656]
                                        String: "steps.diff.outputs.r == 'true'" [4624,4656]
                                FIELD [4657,4683]
                                    String: "working-directory" [4657,4676]
                                    STRING [4677,4683]
                                        String: "docs" [4677,4683]
                                FIELD [4684,4709]
                                    String: "run" [4684,4689]
                                    STRING [4690,4709]
                                        String: "./build-rdoc.sh\n" [4690,4709]
                            OBJECT [4711,4933]
                                FIELD [4712,4733]
                                    String: "name" [4712,4718]
                                    STRING [4719,4733]
                                        String: "Create patch" [4719,4733]
                                FIELD [4734,4746]
                                    String: "id" [4734,4738]
                                    STRING [4739,4746]
                                        String: "patch" [4739,4746]
                                FIELD [4747,4932]
                                    String: "run" [4747,4752]
                                    STRING [4753,4932]
                                        String: "git diff > ${{ github.run_id }}.diff\nreformatted=$([[ -s ${{ github.run_id }}.diff ]] && echo \"true\" || echo \"false\")\necho \"reformatted=$reformatted\" >> $GITHUB_OUTPUT\n" [4753,4932]
                            OBJECT [4934,5072]
                                FIELD [4935,4956]
                                    String: "name" [4935,4941]
                                    STRING [4942,4956]
                                        String: "Upload patch" [4942,4956]
                                FIELD [4957,4992]
                                    String: "uses" [4957,4963]
                                    STRING [4964,4992]
                                        String: "actions/upload-artifact@v4" [4964,4992]
                                FIELD [4993,5071]
                                    String: "with" [4993,4999]
                                    OBJECT [5000,5071]
                                        FIELD [5001,5035]
                                            String: "name" [5001,5007]
                                            STRING [5008,5035]
                                                String: "${{ github.run_id }}.diff" [5008,5035]
                                        FIELD [5036,5070]
                                            String: "path" [5036,5042]
                                            STRING [5043,5070]
                                                String: "${{ github.run_id }}.diff" [5043,5070]
            FIELD [5075,6134]
                String: "push" [5075,5081]
                OBJECT [5082,6134]
                    FIELD [5083,5108]
                        String: "runs-on" [5083,5092]
                        STRING [5093,5108]
                            String: "ubuntu-latest" [5093,5108]
                    FIELD [5109,5128]
                        String: "timeout-minutes" [5109,5126]
                        NUMBER [5127,5128]
                            Number: 5 [5127,5128]
                    FIELD [5129,5163]
                        String: "needs" [5129,5136]
                        ARRAY [5137,5163]
                            STRING [5138,5153]
                                String: "check-comment" [5138,5153]
                            STRING [5154,5162]
                                String: "format" [5154,5162]
                    FIELD [5164,5220]
                        String: "if" [5164,5168]
                        STRING [5169,5220]
                            String: "${{ needs.format.outputs.reformatted == 'true' }}" [5169,5220]
                    FIELD [5221,6133]
                        String: "steps" [5221,5228]
                        ARRAY [5229,6133]
                            OBJECT [5230,5449]
                                FIELD [5231,5259]
                                    String: "uses" [5231,5237]
                                    STRING [5238,5259]
                                        String: "actions/checkout@v4" [5238,5259]
                                FIELD [5260,5448]
                                    String: "with" [5260,5266]
                                    OBJECT [5267,5448]
                                        FIELD [5268,5328]
                                            String: "repository" [5268,5280]
                                            STRING [5281,5328]
                                                String: "${{ needs.check-comment.outputs.repository }}" [5281,5328]
                                        FIELD [5329,5380]
                                            String: "ref" [5329,5334]
                                            STRING [5335,5380]
                                                String: "${{ needs.check-comment.outputs.head_ref }}" [5335,5380]
                                        FIELD [5381,5398]
                                            String: "fetch-depth" [5381,5394]
                                            NUMBER [5395,5398]
                                                Number: 300 [5395,5398]
                                        FIELD [5399,5447]
                                            String: "token" [5399,5406]
                                            STRING [5407,5447]
                                                String: "${{ secrets.MLFLOW_AUTOMATION_TOKEN }}" [5407,5447]
                            OBJECT [5450,5806]
                                FIELD [5451,5477]
                                    String: "name" [5451,5457]
                                    STRING [5458,5477]
                                        String: "Merge base branch" [5458,5477]
                                FIELD [5478,5805]
                                    String: "run" [5478,5483]
                                    STRING [5484,5805]
                                        String: "git config user.name 'mlflow-automation'\ngit config user.email 'mlflow-automation@users.noreply.github.com'\ngit remote add base https://github.com/${{ needs.check-comment.outputs.base_repo }}.git\ngit fetch base ${{ needs.check-comment.outputs.base_ref }}\ngit merge base/${{ needs.check-comment.outputs.base_ref }}\n" [5484,5805]
                            OBJECT [5807,5928]
                                FIELD [5808,5831]
                                    String: "name" [5808,5814]
                                    STRING [5815,5831]
                                        String: "Download patch" [5815,5831]
                                FIELD [5832,5869]
                                    String: "uses" [5832,5838]
                                    STRING [5839,5869]
                                        String: "actions/download-artifact@v4" [5839,5869]
                                FIELD [5870,5927]
                                    String: "with" [5870,5876]
                                    OBJECT [5877,5927]
                                        FIELD [5878,5912]
                                            String: "name" [5878,5884]
                                            STRING [5885,5912]
                                                String: "${{ github.run_id }}.diff" [5885,5912]
                                        FIELD [5913,5926]
                                            String: "path" [5913,5919]
                                            STRING [5920,5926]
                                                String: "/tmp" [5920,5926]
                            OBJECT [5929,6132]
                                FIELD [5930,5959]
                                    String: "name" [5930,5936]
                                    STRING [5937,5959]
                                        String: "Apply patch and push" [5937,5959]
                                FIELD [5960,6131]
                                    String: "run" [5960,5965]
                                    STRING [5966,6131]
                                        String: "git apply /tmp/${{ github.run_id }}.diff\ngit commit -sam \"Autoformat: https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}\"\ngit push\n" [5966,6131]
            FIELD [6135,6748]
                String: "update-status" [6135,6150]
                OBJECT [6151,6748]
                    FIELD [6152,6177]
                        String: "runs-on" [6152,6161]
                        STRING [6162,6177]
                            String: "ubuntu-latest" [6162,6177]
                    FIELD [6178,6198]
                        String: "timeout-minutes" [6178,6195]
                        NUMBER [6196,6198]
                            Number: 10 [6196,6198]
                    FIELD [6199,6240]
                        String: "needs" [6199,6206]
                        ARRAY [6207,6240]
                            STRING [6208,6223]
                                String: "check-comment" [6208,6223]
                            STRING [6224,6232]
                                String: "format" [6224,6232]
                            STRING [6233,6239]
                                String: "push" [6233,6239]
                    FIELD [6241,6315]
                        String: "if" [6241,6245]
                        STRING [6246,6315]
                            String: "always() && needs.check-comment.outputs.should_autoformat == 'true'" [6246,6315]
                    FIELD [6316,6350]
                        String: "permissions" [6316,6329]
                        OBJECT [6330,6350]
                            FIELD [6331,6349]
                                String: "statuses" [6331,6341]
                                STRING [6342,6349]
                                    String: "write" [6342,6349]
                    FIELD [6351,6747]
                        String: "steps" [6351,6358]
                        ARRAY [6359,6747]
                            OBJECT [6360,6390]
                                FIELD [6361,6389]
                                    String: "uses" [6361,6367]
                                    STRING [6368,6389]
                                        String: "actions/checkout@v4" [6368,6389]
                            OBJECT [6391,6746]
                                FIELD [6392,6414]
                                    String: "name" [6392,6398]
                                    STRING [6399,6414]
                                        String: "Update status" [6399,6414]
                                FIELD [6415,6448]
                                    String: "uses" [6415,6421]
                                    STRING [6422,6448]
                                        String: "actions/github-script@v7" [6422,6448]
                                FIELD [6449,6745]
                                    String: "with" [6449,6455]
                                    OBJECT [6456,6745]
                                        FIELD [6457,6501]
                                            String: "github-token" [6457,6471]
                                            STRING [6472,6501]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [6472,6501]
                                        FIELD [6502,6744]
                                            String: "script" [6502,6510]
                                            STRING [6511,6744]
                                                String: "const needs = ${{ toJson(needs) }};\nconst head_sha = '${{ needs.check-comment.outputs.head_sha }}'\nconst autoformat = require('./.github/workflows/autoformat.js');\nawait autoformat.updateStatus(context, github, head_sha, needs);" [6511,6744]