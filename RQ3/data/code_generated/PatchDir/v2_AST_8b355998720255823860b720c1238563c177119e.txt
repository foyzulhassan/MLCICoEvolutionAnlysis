OBJECT [0,3588]
    FIELD [1,21]
        String: "name" [1,7]
        STRING [8,21]
            String: "Build on M1" [8,21]
    FIELD [22,208]
        String: "on" [22,26]
        OBJECT [27,208]
            FIELD [28,96]
                String: "pull_request" [28,42]
                OBJECT [43,96]
                    FIELD [44,95]
                        String: "paths" [44,51]
                        ARRAY [52,95]
                            STRING [53,94]
                                String: ".github/workflows/build-m1-binaries.yml" [53,94]
            FIELD [97,182]
                String: "push" [97,103]
                OBJECT [104,182]
                    FIELD [105,139]
                        String: "branches" [105,115]
                        ARRAY [116,139]
                            STRING [117,126]
                                String: "nightly" [117,126]
                            STRING [127,138]
                                String: "release/*" [127,138]
                    FIELD [140,181]
                        String: "tags" [140,146]
                        ARRAY [147,181]
                            STRING [148,180]
                                String: "v[0-9]+.[0-9]+.[0-9]+-rc[0-9]+" [148,180]
            FIELD [183,207]
                String: "workflow_dispatch" [183,202]
                NULL [203,207]
    FIELD [209,236]
        String: "env" [209,214]
        OBJECT [215,236]
            FIELD [216,235]
                String: "CHANNEL" [216,225]
                STRING [226,235]
                    String: "nightly" [226,235]
    FIELD [237,3587]
        String: "jobs" [237,243]
        OBJECT [244,3587]
            FIELD [245,3586]
                String: "build_wheels" [245,259]
                OBJECT [260,3586]
                    FIELD [261,295]
                        String: "name" [261,267]
                        STRING [268,295]
                            String: "Build TorchText M1 wheels" [268,295]
                    FIELD [296,319]
                        String: "runs-on" [296,305]
                        STRING [306,319]
                            String: "macos-m1-11" [306,319]
                    FIELD [320,374]
                        String: "strategy" [320,330]
                        OBJECT [331,374]
                            FIELD [332,373]
                                String: "matrix" [332,340]
                                OBJECT [341,373]
                                    FIELD [342,372]
                                        String: "py_vers" [342,351]
                                        ARRAY [352,372]
                                            STRING [353,358]
                                                String: "3.8" [353,358]
                                            STRING [359,364]
                                                String: "3.9" [359,364]
                                            STRING [365,371]
                                                String: "3.10" [365,371]
                    FIELD [375,3585]
                        String: "steps" [375,382]
                        ARRAY [383,3585]
                            OBJECT [384,443]
                                FIELD [385,413]
                                    String: "name" [385,391]
                                    STRING [392,413]
                                        String: "Checkout repository" [392,413]
                                FIELD [414,442]
                                    String: "uses" [414,420]
                                    STRING [421,442]
                                        String: "actions/checkout@v2" [421,442]
                            OBJECT [444,720]
                                FIELD [445,490]
                                    String: "name" [445,451]
                                    STRING [452,490]
                                        String: "Set CHANNEL (only for tagged pushes)" [452,490]
                                FIELD [491,578]
                                    String: "if" [491,495]
                                    STRING [496,578]
                                        String: "${{ github.event_name == 'push' && startsWith(github.event.ref, 'refs/tags/') }}" [496,578]
                                FIELD [579,719]
                                    String: "run" [579,584]
                                    STRING [585,719]
                                        String: "# reference ends with an RC suffix\nif [[ ${GITHUB_REF_NAME} = *-rc[0-9]* ]]; then\n  echo \"CHANNEL=test\" >> \"$GITHUB_ENV\"\nfi\n" [585,719]
                            OBJECT [721,947]
                                FIELD [722,764]
                                    String: "name" [722,728]
                                    STRING [729,764]
                                        String: "Set Release CHANNEL (for release)" [729,764]
                                FIELD [765,895]
                                    String: "if" [765,769]
                                    STRING [770,895]
                                        String: "${{ (github.event_name == 'pull_request' && startsWith(github.base_ref, 'release')) || startsWith(github.ref, 'release') }}" [770,895]
                                FIELD [896,946]
                                    String: "run" [896,901]
                                    STRING [902,946]
                                        String: "echo \"CHANNEL=test\" >> \"$GITHUB_ENV\"\n" [902,946]
                            OBJECT [948,2159]
                                FIELD [949,982]
                                    String: "name" [949,955]
                                    STRING [956,982]
                                        String: "Build TorchText M1 wheel" [956,982]
                                FIELD [983,1018]
                                    String: "shell" [983,990]
                                    STRING [991,1018]
                                        String: "arch -arch arm64 bash {0}" [991,1018]
                                FIELD [1019,1104]
                                    String: "env" [1019,1024]
                                    OBJECT [1025,1104]
                                        FIELD [1026,1069]
                                            String: "ENV_NAME" [1026,1036]
                                            STRING [1037,1069]
                                                String: "conda-env-${{ github.run_id }}" [1037,1069]
                                        FIELD [1070,1103]
                                            String: "PY_VERS" [1070,1079]
                                            STRING [1080,1103]
                                                String: "${{ matrix.py_vers }}" [1080,1103]
                                FIELD [1105,2158]
                                    String: "run" [1105,1110]
                                    STRING [1111,2158]
                                        String: "echo $PATH\n. ~/miniconda3/etc/profile.d/conda.sh\nset -ex\n. packaging/pkg_helpers.bash\n# if we are uploading to test channell, our version consist only of the base: 0.x.x - no date string or suffix added\nif [[ $CHANNEL == \"test\" ]]; then\n  setup_base_build_version\nelse\n  setup_build_version\nfi\ngit submodule update --init --recursive\nWHL_NAME=torchtext-${BUILD_VERSION}-cp${PY_VERS/.}-cp${PY_VERS/.}-macosx_11_0_arm64.whl\nconda create -yp ${ENV_NAME} python=${PY_VERS} numpy cmake ninja wheel pkg-config\nconda run -p ${ENV_NAME} python3 -mpip install torch --pre --extra-index-url=https://download.pytorch.org/whl/${CHANNEL}\nconda run -p ${ENV_NAME} python3 -mpip install delocate\nconda run -p ${ENV_NAME} python3 setup.py bdist_wheel\nexport PYTORCH_VERSION=\"$(conda run -p ${ENV_NAME} python3 -mpip show torch | grep ^Version: | sed 's/Version: *//')\"\nconda run -p ${ENV_NAME} DYLD_FALLBACK_LIBRARY_PATH=\"${ENV_NAME}/lib\" delocate-wheel -v --ignore-missing-dependencies dist/${WHL_NAME}\nconda env remove -p ${ENV_NAME}\n" [1111,2158]
                            OBJECT [2160,2829]
                                FIELD [2161,2180]
                                    String: "name" [2161,2167]
                                    STRING [2168,2180]
                                        String: "Test wheel" [2168,2180]
                                FIELD [2181,2216]
                                    String: "shell" [2181,2188]
                                    STRING [2189,2216]
                                        String: "arch -arch arm64 bash {0}" [2189,2216]
                                FIELD [2217,2307]
                                    String: "env" [2217,2222]
                                    OBJECT [2223,2307]
                                        FIELD [2224,2272]
                                            String: "ENV_NAME" [2224,2234]
                                            STRING [2235,2272]
                                                String: "conda-test-env-${{ github.run_id }}" [2235,2272]
                                        FIELD [2273,2306]
                                            String: "PY_VERS" [2273,2282]
                                            STRING [2283,2306]
                                                String: "${{ matrix.py_vers }}" [2283,2306]
                                FIELD [2308,2828]
                                    String: "run" [2308,2313]
                                    STRING [2314,2828]
                                        String: ". ~/miniconda3/etc/profile.d/conda.sh\nset -ex\nconda create -yp ${ENV_NAME} python=${PY_VERS} numpy\nconda run -p ${ENV_NAME} python3 -mpip install torch --pre --extra-index-url=https://download.pytorch.org/whl/${CHANNEL}\nconda run -p ${ENV_NAME} python3 -mpip install dist/*.whl\n# Test torch is importable, by changing cwd and running import commands\nconda run --cwd /tmp -p ${ENV_NAME} python3 -c \"import torchtext;print('torchtext version is ', torchtext.__version__)\"\nconda env remove -p ${ENV_NAME}\n" [2314,2828]
                            OBJECT [2830,3111]
                                FIELD [2831,2862]
                                    String: "name" [2831,2837]
                                    STRING [2838,2862]
                                        String: "Upload wheel to GitHub" [2838,2862]
                                FIELD [2863,2996]
                                    String: "if" [2863,2867]
                                    STRING [2868,2996]
                                        String: "${{ github.event_name == 'push' && (github.event.ref == 'refs/heads/nightly' || startsWith(github.event.ref, 'refs/tags/')) }}" [2868,2996]
                                FIELD [2997,3032]
                                    String: "uses" [2997,3003]
                                    STRING [3004,3032]
                                        String: "actions/upload-artifact@v3" [3004,3032]
                                FIELD [3033,3110]
                                    String: "with" [3033,3039]
                                    OBJECT [3040,3110]
                                        FIELD [3041,3094]
                                            String: "name" [3041,3047]
                                            STRING [3048,3094]
                                                String: "torchtext-py${{ matrix.py_vers }}-macos11-m1" [3048,3094]
                                        FIELD [3095,3109]
                                            String: "path" [3095,3101]
                                            STRING [3102,3109]
                                                String: "dist/" [3102,3109]
                            OBJECT [3112,3584]
                                FIELD [3113,3140]
                                    String: "name" [3113,3119]
                                    STRING [3120,3140]
                                        String: "Upload wheel to S3" [3120,3140]
                                FIELD [3141,3274]
                                    String: "if" [3141,3145]
                                    STRING [3146,3274]
                                        String: "${{ github.event_name == 'push' && (github.event.ref == 'refs/heads/nightly' || startsWith(github.event.ref, 'refs/tags/')) }}" [3146,3274]
                                FIELD [3275,3310]
                                    String: "shell" [3275,3282]
                                    STRING [3283,3310]
                                        String: "arch -arch arm64 bash {0}" [3283,3310]
                                FIELD [3311,3470]
                                    String: "env" [3311,3316]
                                    OBJECT [3317,3470]
                                        FIELD [3318,3389]
                                            String: "AWS_ACCESS_KEY_ID" [3318,3337]
                                            STRING [3338,3389]
                                                String: "${{ secrets.AWS_PYTORCH_UPLOADER_ACCESS_KEY_ID }}" [3338,3389]
                                        FIELD [3390,3469]
                                            String: "AWS_SECRET_ACCESS_KEY" [3390,3413]
                                            STRING [3414,3469]
                                                String: "${{ secrets.AWS_PYTORCH_UPLOADER_SECRET_ACCESS_KEY }}" [3414,3469]
                                FIELD [3471,3583]
                                    String: "run" [3471,3476]
                                    STRING [3477,3583]
                                        String: "for pkg in dist/*; do\n  aws s3 cp \"$pkg\" \"s3://pytorch/whl/${CHANNEL}/cpu/\" --acl public-read\ndone" [3477,3583]