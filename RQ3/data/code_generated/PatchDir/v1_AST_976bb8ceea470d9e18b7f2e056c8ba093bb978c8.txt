OBJECT [0,4195]
    FIELD [1,28]
        String: "name" [1,7]
        STRING [8,28]
            String: "Test package build" [8,28]
    FIELD [29,169]
        String: "on" [29,33]
        OBJECT [34,169]
            FIELD [35,88]
                String: "push" [35,41]
                OBJECT [42,88]
                    FIELD [43,87]
                        String: "branches" [43,53]
                        ARRAY [54,87]
                            STRING [55,63]
                                String: "master" [55,63]
                            STRING [64,86]
                                String: "branch-[0-9]+.[0-9]+" [64,86]
            FIELD [89,168]
                String: "pull_request" [89,103]
                OBJECT [104,168]
                    FIELD [105,167]
                        String: "types" [105,112]
                        ARRAY [113,167]
                            STRING [114,122]
                                String: "opened" [114,122]
                            STRING [123,136]
                                String: "synchronize" [123,136]
                            STRING [137,147]
                                String: "reopened" [137,147]
                            STRING [148,166]
                                String: "ready_for_review" [148,166]
    FIELD [170,203]
        String: "permissions" [170,183]
        OBJECT [184,203]
            FIELD [185,202]
                String: "contents" [185,195]
                STRING [196,202]
                    String: "read" [196,202]
    FIELD [204,321]
        String: "concurrency" [204,217]
        OBJECT [218,321]
            FIELD [219,294]
                String: "group" [219,226]
                STRING [227,294]
                    String: "${{ github.workflow }}-${{ github.event_name }}-${{ github.ref }}" [227,294]
            FIELD [295,320]
                String: "cancel-in-progress" [295,315]
                TRUE [316,320]
    FIELD [322,394]
        String: "defaults" [322,332]
        OBJECT [333,394]
            FIELD [334,393]
                String: "run" [334,339]
                OBJECT [340,393]
                    FIELD [341,392]
                        String: "shell" [341,348]
                        STRING [349,392]
                            String: "bash --noprofile --norc -exo pipefail {0}" [349,392]
    FIELD [395,4194]
        String: "jobs" [395,401]
        OBJECT [402,4194]
            FIELD [403,4193]
                String: "build" [403,410]
                OBJECT [411,4193]
                    FIELD [412,498]
                        String: "if" [412,416]
                        STRING [417,498]
                            String: "github.event_name != 'pull_request' || github.event.pull_request.draft == false" [417,498]
                    FIELD [499,524]
                        String: "runs-on" [499,508]
                        STRING [509,524]
                            String: "ubuntu-latest" [509,524]
                    FIELD [525,545]
                        String: "timeout-minutes" [525,542]
                        NUMBER [543,545]
                            Number: 20 [543,545]
                    FIELD [546,579]
                        String: "permissions" [546,559]
                        OBJECT [560,579]
                            FIELD [561,578]
                                String: "actions" [561,570]
                                STRING [571,578]
                                    String: "write" [571,578]
                    FIELD [580,628]
                        String: "strategy" [580,590]
                        OBJECT [591,628]
                            FIELD [592,627]
                                String: "matrix" [592,600]
                                OBJECT [601,627]
                                    FIELD [602,626]
                                        String: "type" [602,608]
                                        ARRAY [609,626]
                                            STRING [610,616]
                                                String: "full" [610,616]
                                            STRING [617,625]
                                                String: "skinny" [617,625]
                    FIELD [629,4192]
                        String: "steps" [629,636]
                        ARRAY [637,4192]
                            OBJECT [638,702]
                                FIELD [639,667]
                                    String: "uses" [639,645]
                                    STRING [646,667]
                                        String: "actions/checkout@v4" [646,667]
                                FIELD [668,701]
                                    String: "with" [668,674]
                                    OBJECT [675,701]
                                        FIELD [676,700]
                                            String: "submodules" [676,688]
                                            STRING [689,700]
                                                String: "recursive" [689,700]
                            OBJECT [703,741]
                                FIELD [704,740]
                                    String: "uses" [704,710]
                                    STRING [711,740]
                                        String: "./.github/actions/untracked" [711,740]
                            OBJECT [742,783]
                                FIELD [743,782]
                                    String: "uses" [743,749]
                                    STRING [750,782]
                                        String: "./.github/actions/setup-python" [750,782]
                            OBJECT [784,845]
                                FIELD [785,815]
                                    String: "uses" [785,791]
                                    STRING [792,815]
                                        String: "actions/setup-node@v3" [792,815]
                                FIELD [816,844]
                                    String: "with" [816,822]
                                    OBJECT [823,844]
                                        FIELD [824,843]
                                            String: "node-version" [824,838]
                                            STRING [839,843]
                                                String: "16" [839,843]
                            OBJECT [846,931]
                                FIELD [847,864]
                                    String: "name" [847,853]
                                    STRING [854,864]
                                        String: "Build UI" [854,864]
                                FIELD [865,903]
                                    String: "working-directory" [865,884]
                                    STRING [885,903]
                                        String: "mlflow/server/js" [885,903]
                                FIELD [904,930]
                                    String: "run" [904,909]
                                    STRING [910,930]
                                        String: "yarn\nyarn build\n" [910,930]
                            OBJECT [932,997]
                                FIELD [933,962]
                                    String: "name" [933,939]
                                    STRING [940,962]
                                        String: "Install dependencies" [940,962]
                                FIELD [963,996]
                                    String: "run" [963,968]
                                    STRING [969,996]
                                        String: "pip install build twine\n" [969,996]
                            OBJECT [998,1667]
                                FIELD [999,1032]
                                    String: "name" [999,1005]
                                    STRING [1006,1032]
                                        String: "Build distribution files" [1006,1032]
                                FIELD [1033,1050]
                                    String: "id" [1033,1037]
                                    STRING [1038,1050]
                                        String: "build-dist" [1038,1050]
                                FIELD [1051,1666]
                                    String: "run" [1051,1056]
                                    STRING [1057,1666]
                                        String: "if [ \"${{ matrix.type }}\" == \"skinny\" ]; then\n  python dev/build.py --package-type skinny\nelse\n  python dev/build.py\nfi\n\n# List distribution files and check their file sizes\nls -lh dist\n\n# Set step outputs\nsdist_path=$(find dist -type f -name \"*.tar.gz\")\nwheel_path=$(find dist -type f -name \"*.whl\")\nwheel_name=$(basename $wheel_path)\nwheel_size=$(stat -c %s $wheel_path)\necho \"sdist-path=${sdist_path}\" >> $GITHUB_OUTPUT\necho \"wheel-path=${wheel_path}\" >> $GITHUB_OUTPUT\necho \"wheel-name=${wheel_name}\" >> $GITHUB_OUTPUT\necho \"wheel-size=${wheel_size}\" >> $GITHUB_OUTPUT\n" [1057,1666]
                            OBJECT [1668,1773]
                                FIELD [1669,1711]
                                    String: "name" [1669,1675]
                                    STRING [1676,1711]
                                        String: "List files in source distribution" [1676,1711]
                                FIELD [1712,1772]
                                    String: "run" [1712,1717]
                                    STRING [1718,1772]
                                        String: "tar -tf ${{ steps.build-dist.outputs.sdist-path }}\n" [1718,1772]
                            OBJECT [1774,1880]
                                FIELD [1775,1817]
                                    String: "name" [1775,1781]
                                    STRING [1782,1817]
                                        String: "List files in binary distribution" [1782,1817]
                                FIELD [1818,1879]
                                    String: "run" [1818,1823]
                                    STRING [1824,1879]
                                        String: "unzip -l ${{ steps.build-dist.outputs.wheel-path }}\n" [1824,1879]
                            OBJECT [1881,2183]
                                FIELD [1882,1939]
                                    String: "name" [1882,1888]
                                    STRING [1889,1939]
                                        String: "Compare files in source and binary distributions" [1889,1939]
                                FIELD [1940,2182]
                                    String: "run" [1940,1945]
                                    STRING [1946,2182]
                                        String: "tar -tzf ${{ steps.build-dist.outputs.sdist-path }} | grep -v '/$' | cut -d'/' -f2- | sort > /tmp/source.txt\nzipinfo -1 ${{ steps.build-dist.outputs.wheel-path }} | sort > /tmp/wheel.txt\ndiff /tmp/source.txt /tmp/wheel.txt || true\n" [1946,2182]
                            OBJECT [2184,2284]
                                FIELD [2185,2209]
                                    String: "name" [2185,2191]
                                    STRING [2192,2209]
                                        String: "Run twine check" [2192,2209]
                                FIELD [2210,2283]
                                    String: "run" [2210,2215]
                                    STRING [2216,2283]
                                        String: "twine check --strict ${{ steps.build-dist.outputs.wheel-path }}\n" [2216,2283]
                            OBJECT [2285,2447]
                                FIELD [2286,2325]
                                    String: "name" [2286,2292]
                                    STRING [2293,2325]
                                        String: "Test installation from tarball" [2293,2325]
                                FIELD [2326,2446]
                                    String: "run" [2326,2331]
                                    STRING [2332,2446]
                                        String: "pip install ${{ steps.build-dist.outputs.sdist-path }}\npython -c \"import mlflow; print(mlflow.__version__)\"\n" [2332,2446]
                            OBJECT [2448,2626]
                                FIELD [2449,2486]
                                    String: "name" [2449,2455]
                                    STRING [2456,2486]
                                        String: "Test installation from wheel" [2456,2486]
                                FIELD [2487,2625]
                                    String: "run" [2487,2492]
                                    STRING [2493,2625]
                                        String: "pip install --force-reinstall ${{ steps.build-dist.outputs.wheel-path }}\npython -c \"import mlflow; print(mlflow.__version__)\"\n" [2493,2625]
                            OBJECT [2627,2833]
                                FIELD [2628,2648]
                                    String: "name" [2628,2634]
                                    STRING [2635,2648]
                                        String: "Store wheel" [2635,2648]
                                FIELD [2649,2684]
                                    String: "uses" [2649,2655]
                                    STRING [2656,2684]
                                        String: "actions/upload-artifact@v4" [2656,2684]
                                FIELD [2685,2719]
                                    String: "if" [2685,2689]
                                    STRING [2690,2719]
                                        String: "github.event_name == 'push'" [2690,2719]
                                FIELD [2720,2832]
                                    String: "with" [2720,2726]
                                    OBJECT [2727,2832]
                                        FIELD [2728,2779]
                                            String: "name" [2728,2734]
                                            STRING [2735,2779]
                                                String: "${{ steps.build-dist.outputs.wheel-name }}" [2735,2779]
                                        FIELD [2780,2831]
                                            String: "path" [2780,2786]
                                            STRING [2787,2831]
                                                String: "${{ steps.build-dist.outputs.wheel-path }}" [2787,2831]
                            OBJECT [2834,4191]
                                FIELD [2835,2861]
                                    String: "name" [2835,2841]
                                    STRING [2842,2861]
                                        String: "Remove old wheels" [2842,2861]
                                FIELD [2862,2895]
                                    String: "uses" [2862,2868]
                                    STRING [2869,2895]
                                        String: "actions/github-script@v7" [2869,2895]
                                FIELD [2896,2930]
                                    String: "if" [2896,2900]
                                    STRING [2901,2930]
                                        String: "github.event_name == 'push'" [2901,2930]
                                FIELD [2931,2996]
                                    String: "env" [2931,2936]
                                    OBJECT [2937,2996]
                                        FIELD [2938,2995]
                                            String: "WHEEL_SIZE" [2938,2950]
                                            STRING [2951,2995]
                                                String: "${{ steps.build-dist.outputs.wheel-size }}" [2951,2995]
                                FIELD [2997,4190]
                                    String: "with" [2997,3003]
                                    OBJECT [3004,4190]
                                        FIELD [3005,3049]
                                            String: "github-token" [3005,3019]
                                            STRING [3020,3049]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [3020,3049]
                                        FIELD [3050,4189]
                                            String: "script" [3050,3058]
                                            STRING [3059,4189]
                                                String: "const { owner, repo } = context.repo;\n\n// For some reason, the newly-uploaded wheel in the previous step is not included.\nconst artifactsResp = await github.rest.actions.listArtifactsForRepo({\n  owner,\n  repo,\n});\nconst wheels = artifactsResp.data.artifacts.filter(({ name }) => name.endsWith(\".whl\"));\n\n// The storage usage limit for a free github account is up to 500 MB. See the page below for details:\n// https://docs.github.com/en/github/setting-up-and-managing-billing-and-payments-on-github/about-billing-for-github-actions\nMAX_SIZE_IN_BYTES = 300_000_000; // 300 MB\n\nlet index = 0;\nlet sum = parseInt(process.env.WHEEL_SIZE);  // include the newly-uploaded wheel\nfor (const [idx, { size_in_bytes }] of wheels.entries()) {\n  index = idx;\n  sum += size_in_bytes;\n  if (sum > MAX_SIZE_IN_BYTES) {\n    break;\n  }\n}\n\nif (sum <= MAX_SIZE_IN_BYTES) {\n  return;\n}\n\n// Delete old wheels\nconst promises = wheels.slice(index).map(({ id: artifact_id }) =>\n  github.rest.actions.deleteArtifact({\n    owner,\n    repo,\n    artifact_id,\n  })\n);\nPromise.all(promises).then(data => console.log(data));" [3059,4189]