OBJECT [0,6660]
    FIELD [1,20]
        String: "name" [1,7]
        STRING [8,20]
            String: "Autoformat" [8,20]
    FIELD [21,74]
        String: "on" [21,25]
        OBJECT [26,74]
            FIELD [27,73]
                String: "issue_comment" [27,42]
                OBJECT [43,73]
                    FIELD [44,72]
                        String: "types" [44,51]
                        ARRAY [52,72]
                            STRING [53,62]
                                String: "created" [53,62]
                            STRING [63,71]
                                String: "edited" [63,71]
    FIELD [75,108]
        String: "permissions" [75,88]
        OBJECT [89,108]
            FIELD [90,107]
                String: "contents" [90,100]
                STRING [101,107]
                    String: "read" [101,107]
    FIELD [109,181]
        String: "defaults" [109,119]
        OBJECT [120,181]
            FIELD [121,180]
                String: "run" [121,126]
                OBJECT [127,180]
                    FIELD [128,179]
                        String: "shell" [128,135]
                        STRING [136,179]
                            String: "bash --noprofile --norc -exo pipefail {0}" [136,179]
    FIELD [182,6659]
        String: "jobs" [182,188]
        OBJECT [189,6659]
            FIELD [190,1892]
                String: "check-comment" [190,205]
                OBJECT [206,1892]
                    FIELD [207,232]
                        String: "runs-on" [207,216]
                        STRING [217,232]
                            String: "ubuntu-latest" [217,232]
                    FIELD [233,253]
                        String: "timeout-minutes" [233,250]
                        NUMBER [251,253]
                            Number: 10 [251,253]
                    FIELD [254,413]
                        String: "if" [254,258]
                        STRING [259,413]
                            String: "${{ github.event.issue.pull_request && contains(github.event.comment.body, '@mlflow-automation') && contains(github.event.comment.body, 'autoformat') }}" [259,413]
                    FIELD [414,472]
                        String: "permissions" [414,427]
                        OBJECT [428,472]
                            FIELD [429,447]
                                String: "statuses" [429,439]
                                STRING [440,447]
                                    String: "write" [440,447]
                            FIELD [448,471]
                                String: "pull-requests" [448,463]
                                STRING [464,471]
                                    String: "write" [464,471]
                    FIELD [473,1041]
                        String: "outputs" [473,482]
                        OBJECT [483,1041]
                            FIELD [484,566]
                                String: "should_autoformat" [484,503]
                                STRING [504,566]
                                    String: "${{ fromJSON(steps.judge.outputs.result).shouldAutoformat }}" [504,566]
                            FIELD [567,636]
                                String: "repository" [567,579]
                                STRING [580,636]
                                    String: "${{ fromJSON(steps.judge.outputs.result).repository }}" [580,636]
                            FIELD [637,702]
                                String: "head_ref" [637,647]
                                STRING [648,702]
                                    String: "${{ fromJSON(steps.judge.outputs.result).head_ref }}" [648,702]
                            FIELD [703,768]
                                String: "head_sha" [703,713]
                                STRING [714,768]
                                    String: "${{ fromJSON(steps.judge.outputs.result).head_sha }}" [714,768]
                            FIELD [769,834]
                                String: "base_ref" [769,779]
                                STRING [780,834]
                                    String: "${{ fromJSON(steps.judge.outputs.result).base_ref }}" [780,834]
                            FIELD [835,900]
                                String: "base_sha" [835,845]
                                STRING [846,900]
                                    String: "${{ fromJSON(steps.judge.outputs.result).base_sha }}" [846,900]
                            FIELD [901,968]
                                String: "base_repo" [901,912]
                                STRING [913,968]
                                    String: "${{ fromJSON(steps.judge.outputs.result).base_repo }}" [913,968]
                            FIELD [969,1040]
                                String: "pull_number" [969,982]
                                STRING [983,1040]
                                    String: "${{ fromJSON(steps.judge.outputs.result).pull_number }}" [983,1040]
                    FIELD [1042,1891]
                        String: "steps" [1042,1049]
                        ARRAY [1050,1891]
                            OBJECT [1051,1081]
                                FIELD [1052,1080]
                                    String: "uses" [1052,1058]
                                    STRING [1059,1080]
                                        String: "actions/checkout@v4" [1059,1080]
                            OBJECT [1082,1890]
                                FIELD [1083,1097]
                                    String: "name" [1083,1089]
                                    STRING [1090,1097]
                                        String: "judge" [1090,1097]
                                FIELD [1098,1110]
                                    String: "id" [1098,1102]
                                    STRING [1103,1110]
                                        String: "judge" [1103,1110]
                                FIELD [1111,1144]
                                    String: "uses" [1111,1117]
                                    STRING [1118,1144]
                                        String: "actions/github-script@v7" [1118,1144]
                                FIELD [1145,1889]
                                    String: "with" [1145,1151]
                                    OBJECT [1152,1889]
                                        FIELD [1153,1888]
                                            String: "script" [1153,1161]
                                            STRING [1162,1888]
                                                String: "core.debug(JSON.stringify(context, null, 2));\nconst autoformat = require('./.github/workflows/autoformat.js');\nconst { comment } = context.payload;\nconst pullInfo = await autoformat.getPullInformation(context, github);\nconst isMaintainer = autoformat.isMlflowMaintainer(comment.author_association) && autoformat.isMlflowMaintainer(pullInfo.author_association);\nif (!isMaintainer) {\n  core.setFailed(\"Only MLflow maintainers can trigger this workflow in their PRs.\");\n}\nconst shouldAutoformat = autoformat.shouldAutoformat(comment);\nif (shouldAutoformat) {\n  await autoformat.createReaction(context, github);\n  await autoformat.createStatus(context, github, core);\n}\nreturn { ...pullInfo, shouldAutoformat };\n" [1162,1888]
            FIELD [1893,5029]
                String: "format" [1893,1901]
                OBJECT [1902,5029]
                    FIELD [1903,1928]
                        String: "runs-on" [1903,1912]
                        STRING [1913,1928]
                            String: "ubuntu-latest" [1913,1928]
                    FIELD [1929,1949]
                        String: "timeout-minutes" [1929,1946]
                        NUMBER [1947,1949]
                            Number: 30 [1947,1949]
                    FIELD [1950,1973]
                        String: "needs" [1950,1957]
                        STRING [1958,1973]
                            String: "check-comment" [1958,1973]
                    FIELD [1974,2043]
                        String: "if" [1974,1978]
                        STRING [1979,2043]
                            String: "${{ needs.check-comment.outputs.should_autoformat == 'true' }}" [1979,2043]
                    FIELD [2044,2082]
                        String: "permissions" [2044,2057]
                        OBJECT [2058,2082]
                            FIELD [2059,2081]
                                String: "pull-requests" [2059,2074]
                                STRING [2075,2081]
                                    String: "read" [2075,2081]
                    FIELD [2083,2149]
                        String: "outputs" [2083,2092]
                        OBJECT [2093,2149]
                            FIELD [2094,2148]
                                String: "reformatted" [2094,2107]
                                STRING [2108,2148]
                                    String: "${{ steps.patch.outputs.reformatted }}" [2108,2148]
                    FIELD [2150,5028]
                        String: "steps" [2150,2157]
                        ARRAY [2158,5028]
                            OBJECT [2159,2329]
                                FIELD [2160,2188]
                                    String: "uses" [2160,2166]
                                    STRING [2167,2188]
                                        String: "actions/checkout@v4" [2167,2188]
                                FIELD [2189,2328]
                                    String: "with" [2189,2195]
                                    OBJECT [2196,2328]
                                        FIELD [2197,2257]
                                            String: "repository" [2197,2209]
                                            STRING [2210,2257]
                                                String: "${{ needs.check-comment.outputs.repository }}" [2210,2257]
                                        FIELD [2258,2309]
                                            String: "ref" [2258,2263]
                                            STRING [2264,2309]
                                                String: "${{ needs.check-comment.outputs.head_ref }}" [2264,2309]
                                        FIELD [2310,2327]
                                            String: "fetch-depth" [2310,2323]
                                            NUMBER [2324,2327]
                                                Number: 300 [2324,2327]
                            OBJECT [2330,3018]
                                FIELD [2331,2350]
                                    String: "name" [2331,2337]
                                    STRING [2338,2350]
                                        String: "Check diff" [2338,2350]
                                FIELD [2351,2362]
                                    String: "id" [2351,2355]
                                    STRING [2356,2362]
                                        String: "diff" [2356,2362]
                                FIELD [2363,2415]
                                    String: "env" [2363,2368]
                                    OBJECT [2369,2415]
                                        FIELD [2370,2414]
                                            String: "GITHUB_TOKEN" [2370,2384]
                                            STRING [2385,2414]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [2385,2414]
                                FIELD [2416,3017]
                                    String: "run" [2416,2421]
                                    STRING [2422,3017]
                                        String: "changed_files=\"$(gh pr view --repo ${{ github.repository }} ${{ needs.check-comment.outputs.pull_number }} --json files --jq '.files.[].path')\"\nprotos=$([[ -z $(echo \"$changed_files\" | grep '^\\(mlflow/protos\\|tests/protos\\)') ]] && echo \"false\" || echo \"true\")\njs=$([[ -z $(echo \"$changed_files\" | grep '^mlflow/server/js') ]] && echo \"false\" || echo \"true\")\nr=$([[ -z $(echo \"$changed_files\" | grep '^mlflow/R/mlflow') ]] && echo \"false\" || echo \"true\")\necho \"protos=$protos\" >> $GITHUB_OUTPUT\necho \"js=$js\" >> $GITHUB_OUTPUT\necho \"r=$r\" >> $GITHUB_OUTPUT\n" [2422,3017]
                            OBJECT [3019,3375]
                                FIELD [3020,3046]
                                    String: "name" [3020,3026]
                                    STRING [3027,3046]
                                        String: "Merge base branch" [3027,3046]
                                FIELD [3047,3374]
                                    String: "run" [3047,3052]
                                    STRING [3053,3374]
                                        String: "git config user.name 'mlflow-automation'\ngit config user.email 'mlflow-automation@users.noreply.github.com'\ngit remote add base https://github.com/${{ needs.check-comment.outputs.base_repo }}.git\ngit fetch base ${{ needs.check-comment.outputs.base_ref }}\ngit merge base/${{ needs.check-comment.outputs.base_ref }}\n" [3053,3374]
                            OBJECT [3376,3417]
                                FIELD [3377,3416]
                                    String: "uses" [3377,3383]
                                    STRING [3384,3416]
                                        String: "./.github/actions/setup-python" [3384,3416]
                            OBJECT [3418,3689]
                                FIELD [3419,3688]
                                    String: "run" [3419,3424]
                                    STRING [3425,3688]
                                        String: "pip install -r requirements/lint-requirements.txt\n# TODO: Use a precompiled binary once it's available: https://github.com/tamasfe/taplo/issues/542\ncargo install taplo-cli@0.9.0 --locked\npre-commit install\npre-commit run --all-files --color=always || true\n" [3425,3688]
                            OBJECT [3690,4058]
                                FIELD [3691,3733]
                                    String: "if" [3691,3695]
                                    STRING [3696,3733]
                                        String: "steps.diff.outputs.protos == 'true'" [3696,3733]
                                FIELD [3734,3761]
                                    String: "env" [3734,3739]
                                    OBJECT [3740,3761]
                                        FIELD [3741,3760]
                                            String: "DOCKER_BUILDKIT" [3741,3758]
                                            NUMBER [3759,3760]
                                                Number: 1 [3759,3760]
                                FIELD [3762,4057]
                                    String: "run" [3762,3767]
                                    STRING [3768,4057]
                                        String: "wget https://github.com/protocolbuffers/protobuf/releases/download/v3.19.4/protoc-3.19.4-linux-x86_64.zip -O /tmp/protoc.zip\nsudo unzip /tmp/protoc.zip -d /tmp/protoc\nsudo chmod -R 777 /tmp/protoc\necho \"/tmp/protoc/bin\" >> $GITHUB_PATH\npip install --upgrade pip\npip install -e .\n" [3768,4057]
                            OBJECT [4059,4145]
                                FIELD [4060,4102]
                                    String: "if" [4060,4064]
                                    STRING [4065,4102]
                                        String: "steps.diff.outputs.protos == 'true'" [4065,4102]
                                FIELD [4103,4144]
                                    String: "run" [4103,4108]
                                    STRING [4109,4144]
                                        String: "python ./dev/generate_protos.py\n" [4109,4144]
                            OBJECT [4146,4246]
                                FIELD [4147,4185]
                                    String: "if" [4147,4151]
                                    STRING [4152,4185]
                                        String: "steps.diff.outputs.js == 'true'" [4152,4185]
                                FIELD [4186,4216]
                                    String: "uses" [4186,4192]
                                    STRING [4193,4216]
                                        String: "actions/setup-node@v3" [4193,4216]
                                FIELD [4217,4245]
                                    String: "with" [4217,4223]
                                    OBJECT [4224,4245]
                                        FIELD [4225,4244]
                                            String: "node-version" [4225,4239]
                                            STRING [4240,4244]
                                                String: "16" [4240,4244]
                            OBJECT [4247,4349]
                                FIELD [4248,4286]
                                    String: "if" [4248,4252]
                                    STRING [4253,4286]
                                        String: "steps.diff.outputs.js == 'true'" [4253,4286]
                                FIELD [4287,4325]
                                    String: "working-directory" [4287,4306]
                                    STRING [4307,4325]
                                        String: "mlflow/server/js" [4307,4325]
                                FIELD [4326,4348]
                                    String: "run" [4326,4331]
                                    STRING [4332,4348]
                                        String: "yarn install\n" [4332,4348]
                            OBJECT [4350,4472]
                                FIELD [4351,4389]
                                    String: "if" [4351,4355]
                                    STRING [4356,4389]
                                        String: "steps.diff.outputs.js == 'true'" [4356,4389]
                                FIELD [4390,4428]
                                    String: "working-directory" [4390,4409]
                                    STRING [4410,4428]
                                        String: "mlflow/server/js" [4410,4428]
                                FIELD [4429,4471]
                                    String: "run" [4429,4434]
                                    STRING [4435,4471]
                                        String: "yarn lint:fix\nyarn prettier:fix\n" [4435,4471]
                            OBJECT [4473,4572]
                                FIELD [4474,4512]
                                    String: "if" [4474,4478]
                                    STRING [4479,4512]
                                        String: "steps.diff.outputs.js == 'true'" [4479,4512]
                                FIELD [4513,4551]
                                    String: "working-directory" [4513,4532]
                                    STRING [4533,4551]
                                        String: "mlflow/server/js" [4533,4551]
                                FIELD [4552,4571]
                                    String: "run" [4552,4557]
                                    STRING [4558,4571]
                                        String: "yarn i18n\n" [4558,4571]
                            OBJECT [4573,4665]
                                FIELD [4574,4611]
                                    String: "if" [4574,4578]
                                    STRING [4579,4611]
                                        String: "steps.diff.outputs.r == 'true'" [4579,4611]
                                FIELD [4612,4638]
                                    String: "working-directory" [4612,4631]
                                    STRING [4632,4638]
                                        String: "docs" [4632,4638]
                                FIELD [4639,4664]
                                    String: "run" [4639,4644]
                                    STRING [4645,4664]
                                        String: "./build-rdoc.sh\n" [4645,4664]
                            OBJECT [4666,4888]
                                FIELD [4667,4688]
                                    String: "name" [4667,4673]
                                    STRING [4674,4688]
                                        String: "Create patch" [4674,4688]
                                FIELD [4689,4701]
                                    String: "id" [4689,4693]
                                    STRING [4694,4701]
                                        String: "patch" [4694,4701]
                                FIELD [4702,4887]
                                    String: "run" [4702,4707]
                                    STRING [4708,4887]
                                        String: "git diff > ${{ github.run_id }}.diff\nreformatted=$([[ -s ${{ github.run_id }}.diff ]] && echo \"true\" || echo \"false\")\necho \"reformatted=$reformatted\" >> $GITHUB_OUTPUT\n" [4708,4887]
                            OBJECT [4889,5027]
                                FIELD [4890,4911]
                                    String: "name" [4890,4896]
                                    STRING [4897,4911]
                                        String: "Upload patch" [4897,4911]
                                FIELD [4912,4947]
                                    String: "uses" [4912,4918]
                                    STRING [4919,4947]
                                        String: "actions/upload-artifact@v4" [4919,4947]
                                FIELD [4948,5026]
                                    String: "with" [4948,4954]
                                    OBJECT [4955,5026]
                                        FIELD [4956,4990]
                                            String: "name" [4956,4962]
                                            STRING [4963,4990]
                                                String: "${{ github.run_id }}.diff" [4963,4990]
                                        FIELD [4991,5025]
                                            String: "path" [4991,4997]
                                            STRING [4998,5025]
                                                String: "${{ github.run_id }}.diff" [4998,5025]
            FIELD [5030,6089]
                String: "push" [5030,5036]
                OBJECT [5037,6089]
                    FIELD [5038,5063]
                        String: "runs-on" [5038,5047]
                        STRING [5048,5063]
                            String: "ubuntu-latest" [5048,5063]
                    FIELD [5064,5083]
                        String: "timeout-minutes" [5064,5081]
                        NUMBER [5082,5083]
                            Number: 5 [5082,5083]
                    FIELD [5084,5118]
                        String: "needs" [5084,5091]
                        ARRAY [5092,5118]
                            STRING [5093,5108]
                                String: "check-comment" [5093,5108]
                            STRING [5109,5117]
                                String: "format" [5109,5117]
                    FIELD [5119,5175]
                        String: "if" [5119,5123]
                        STRING [5124,5175]
                            String: "${{ needs.format.outputs.reformatted == 'true' }}" [5124,5175]
                    FIELD [5176,6088]
                        String: "steps" [5176,5183]
                        ARRAY [5184,6088]
                            OBJECT [5185,5404]
                                FIELD [5186,5214]
                                    String: "uses" [5186,5192]
                                    STRING [5193,5214]
                                        String: "actions/checkout@v4" [5193,5214]
                                FIELD [5215,5403]
                                    String: "with" [5215,5221]
                                    OBJECT [5222,5403]
                                        FIELD [5223,5283]
                                            String: "repository" [5223,5235]
                                            STRING [5236,5283]
                                                String: "${{ needs.check-comment.outputs.repository }}" [5236,5283]
                                        FIELD [5284,5335]
                                            String: "ref" [5284,5289]
                                            STRING [5290,5335]
                                                String: "${{ needs.check-comment.outputs.head_ref }}" [5290,5335]
                                        FIELD [5336,5353]
                                            String: "fetch-depth" [5336,5349]
                                            NUMBER [5350,5353]
                                                Number: 300 [5350,5353]
                                        FIELD [5354,5402]
                                            String: "token" [5354,5361]
                                            STRING [5362,5402]
                                                String: "${{ secrets.MLFLOW_AUTOMATION_TOKEN }}" [5362,5402]
                            OBJECT [5405,5761]
                                FIELD [5406,5432]
                                    String: "name" [5406,5412]
                                    STRING [5413,5432]
                                        String: "Merge base branch" [5413,5432]
                                FIELD [5433,5760]
                                    String: "run" [5433,5438]
                                    STRING [5439,5760]
                                        String: "git config user.name 'mlflow-automation'\ngit config user.email 'mlflow-automation@users.noreply.github.com'\ngit remote add base https://github.com/${{ needs.check-comment.outputs.base_repo }}.git\ngit fetch base ${{ needs.check-comment.outputs.base_ref }}\ngit merge base/${{ needs.check-comment.outputs.base_ref }}\n" [5439,5760]
                            OBJECT [5762,5883]
                                FIELD [5763,5786]
                                    String: "name" [5763,5769]
                                    STRING [5770,5786]
                                        String: "Download patch" [5770,5786]
                                FIELD [5787,5824]
                                    String: "uses" [5787,5793]
                                    STRING [5794,5824]
                                        String: "actions/download-artifact@v4" [5794,5824]
                                FIELD [5825,5882]
                                    String: "with" [5825,5831]
                                    OBJECT [5832,5882]
                                        FIELD [5833,5867]
                                            String: "name" [5833,5839]
                                            STRING [5840,5867]
                                                String: "${{ github.run_id }}.diff" [5840,5867]
                                        FIELD [5868,5881]
                                            String: "path" [5868,5874]
                                            STRING [5875,5881]
                                                String: "/tmp" [5875,5881]
                            OBJECT [5884,6087]
                                FIELD [5885,5914]
                                    String: "name" [5885,5891]
                                    STRING [5892,5914]
                                        String: "Apply patch and push" [5892,5914]
                                FIELD [5915,6086]
                                    String: "run" [5915,5920]
                                    STRING [5921,6086]
                                        String: "git apply /tmp/${{ github.run_id }}.diff\ngit commit -sam \"Autoformat: https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}\"\ngit push\n" [5921,6086]
            FIELD [6090,6658]
                String: "update-status" [6090,6105]
                OBJECT [6106,6658]
                    FIELD [6107,6132]
                        String: "runs-on" [6107,6116]
                        STRING [6117,6132]
                            String: "ubuntu-latest" [6117,6132]
                    FIELD [6133,6153]
                        String: "timeout-minutes" [6133,6150]
                        NUMBER [6151,6153]
                            Number: 10 [6151,6153]
                    FIELD [6154,6195]
                        String: "needs" [6154,6161]
                        ARRAY [6162,6195]
                            STRING [6163,6178]
                                String: "check-comment" [6163,6178]
                            STRING [6179,6187]
                                String: "format" [6179,6187]
                            STRING [6188,6194]
                                String: "push" [6188,6194]
                    FIELD [6196,6270]
                        String: "if" [6196,6200]
                        STRING [6201,6270]
                            String: "always() && needs.check-comment.outputs.should_autoformat == 'true'" [6201,6270]
                    FIELD [6271,6305]
                        String: "permissions" [6271,6284]
                        OBJECT [6285,6305]
                            FIELD [6286,6304]
                                String: "statuses" [6286,6296]
                                STRING [6297,6304]
                                    String: "write" [6297,6304]
                    FIELD [6306,6657]
                        String: "steps" [6306,6313]
                        ARRAY [6314,6657]
                            OBJECT [6315,6345]
                                FIELD [6316,6344]
                                    String: "uses" [6316,6322]
                                    STRING [6323,6344]
                                        String: "actions/checkout@v4" [6323,6344]
                            OBJECT [6346,6656]
                                FIELD [6347,6369]
                                    String: "name" [6347,6353]
                                    STRING [6354,6369]
                                        String: "Update status" [6354,6369]
                                FIELD [6370,6403]
                                    String: "uses" [6370,6376]
                                    STRING [6377,6403]
                                        String: "actions/github-script@v7" [6377,6403]
                                FIELD [6404,6655]
                                    String: "with" [6404,6410]
                                    OBJECT [6411,6655]
                                        FIELD [6412,6654]
                                            String: "script" [6412,6420]
                                            STRING [6421,6654]
                                                String: "const needs = ${{ toJson(needs) }};\nconst head_sha = '${{ needs.check-comment.outputs.head_sha }}'\nconst autoformat = require('./.github/workflows/autoformat.js');\nawait autoformat.updateStatus(context, github, head_sha, needs);" [6421,6654]