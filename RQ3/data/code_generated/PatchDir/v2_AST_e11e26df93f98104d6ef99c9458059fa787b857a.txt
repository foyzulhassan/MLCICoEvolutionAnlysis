OBJECT [0,10803]
    FIELD [1,38]
        String: "name" [1,7]
        STRING [8,38]
            String: "Self-hosted runner (past-ci)" [8,38]
    FIELD [39,222]
        String: "on" [39,43]
        OBJECT [44,222]
            FIELD [45,221]
                String: "workflow_call" [45,60]
                OBJECT [61,221]
                    FIELD [62,220]
                        String: "inputs" [62,70]
                        OBJECT [71,220]
                            FIELD [72,117]
                                String: "framework" [72,83]
                                OBJECT [84,117]
                                    FIELD [85,100]
                                        String: "required" [85,95]
                                        TRUE [96,100]
                                    FIELD [101,116]
                                        String: "type" [101,107]
                                        STRING [108,116]
                                            String: "string" [108,116]
                            FIELD [118,161]
                                String: "version" [118,127]
                                OBJECT [128,161]
                                    FIELD [129,144]
                                        String: "required" [129,139]
                                        TRUE [140,144]
                                    FIELD [145,160]
                                        String: "type" [145,151]
                                        STRING [152,160]
                                            String: "string" [152,160]
                            FIELD [162,219]
                                String: "sha" [162,167]
                                OBJECT [168,219]
                                    FIELD [169,185]
                                        String: "default" [169,178]
                                        STRING [179,185]
                                            String: "main" [179,185]
                                    FIELD [186,202]
                                        String: "required" [186,196]
                                        FALSE [197,202]
                                    FIELD [203,218]
                                        String: "type" [203,209]
                                        STRING [210,218]
                                            String: "string" [210,218]
    FIELD [223,476]
        String: "env" [223,228]
        OBJECT [229,476]
            FIELD [230,252]
                String: "HF_HOME" [230,239]
                STRING [240,252]
                    String: "/mnt/cache" [240,252]
            FIELD [253,278]
                String: "TRANSFORMERS_IS_CI" [253,273]
                TRUE [274,278]
            FIELD [279,298]
                String: "OMP_NUM_THREADS" [279,296]
                NUMBER [297,298]
                    Number: 8 [297,298]
            FIELD [299,318]
                String: "MKL_NUM_THREADS" [299,316]
                NUMBER [317,318]
                    Number: 8 [317,318]
            FIELD [319,334]
                String: "RUN_SLOW" [319,329]
                TRUE [330,334]
            FIELD [335,387]
                String: "SIGOPT_API_TOKEN" [335,353]
                STRING [354,387]
                    String: "${{ secrets.SIGOPT_API_TOKEN }}" [354,387]
            FIELD [388,420]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [388,415]
                TRUE [416,420]
            FIELD [421,446]
                String: "RUN_PT_TF_CROSS_TESTS" [421,444]
                NUMBER [445,446]
                    Number: 1 [445,446]
            FIELD [447,475]
                String: "CUDA_VISIBLE_DEVICES" [447,469]
                STRING [470,475]
                    String: "0,1" [470,475]
    FIELD [477,10802]
        String: "jobs" [477,483]
        OBJECT [484,10802]
            FIELD [485,1716]
                String: "setup" [485,492]
                OBJECT [493,1716]
                    FIELD [494,508]
                        String: "name" [494,500]
                        STRING [501,508]
                            String: "Setup" [501,508]
                    FIELD [509,574]
                        String: "strategy" [509,519]
                        OBJECT [520,574]
                            FIELD [521,573]
                                String: "matrix" [521,529]
                                OBJECT [530,573]
                                    FIELD [531,572]
                                        String: "machine_type" [531,545]
                                        ARRAY [546,572]
                                            STRING [547,559]
                                                String: "single-gpu" [547,559]
                                            STRING [560,571]
                                                String: "multi-gpu" [560,571]
                    FIELD [575,643]
                        String: "runs-on" [575,584]
                        ARRAY [585,643]
                            STRING [586,614]
                                String: "${{ matrix.machine_type }}" [586,614]
                            STRING [615,627]
                                String: "nvidia-gpu" [615,627]
                            STRING [628,632]
                                String: "t4" [628,632]
                            STRING [633,642]
                                String: "past-ci" [633,642]
                    FIELD [644,844]
                        String: "container" [644,655]
                        OBJECT [656,844]
                            FIELD [657,746]
                                String: "image" [657,664]
                                STRING [665,746]
                                    String: "huggingface/transformers-${{ inputs.framework }}-past-${{ inputs.version }}-gpu" [665,746]
                            FIELD [747,843]
                                String: "options" [747,756]
                                STRING [757,843]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [757,843]
                    FIELD [845,906]
                        String: "outputs" [845,854]
                        OBJECT [855,906]
                            FIELD [856,905]
                                String: "matrix" [856,864]
                                STRING [865,905]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [865,905]
                    FIELD [907,1715]
                        String: "steps" [907,914]
                        ARRAY [915,1715]
                            OBJECT [916,1027]
                                FIELD [917,938]
                                    String: "name" [917,923]
                                    STRING [924,938]
                                        String: "Update clone" [924,938]
                                FIELD [939,974]
                                    String: "working-directory" [939,958]
                                    STRING [959,974]
                                        String: "/transformers" [959,974]
                                FIELD [975,1026]
                                    String: "run" [975,980]
                                    STRING [981,1026]
                                        String: "git fetch && git checkout ${{ inputs.sha }}" [981,1026]
                            OBJECT [1028,1166]
                                FIELD [1029,1045]
                                    String: "name" [1029,1035]
                                    STRING [1036,1045]
                                        String: "Cleanup" [1036,1045]
                                FIELD [1046,1081]
                                    String: "working-directory" [1046,1065]
                                    STRING [1066,1081]
                                        String: "/transformers" [1066,1081]
                                FIELD [1082,1165]
                                    String: "run" [1082,1087]
                                    STRING [1088,1165]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [1088,1165]
                            OBJECT [1167,1276]
                                FIELD [1168,1220]
                                    String: "name" [1168,1174]
                                    STRING [1175,1220]
                                        String: "Show installed libraries and their versions" [1175,1220]
                                FIELD [1221,1256]
                                    String: "working-directory" [1221,1240]
                                    STRING [1241,1256]
                                        String: "/transformers" [1241,1256]
                                FIELD [1257,1275]
                                    String: "run" [1257,1262]
                                    STRING [1263,1275]
                                        String: "pip freeze" [1263,1275]
                            OBJECT [1277,1714]
                                FIELD [1278,1295]
                                    String: "id" [1278,1282]
                                    STRING [1283,1295]
                                        String: "set-matrix" [1283,1295]
                                FIELD [1296,1331]
                                    String: "working-directory" [1296,1315]
                                    STRING [1316,1331]
                                        String: "/transformers" [1316,1331]
                                FIELD [1332,1364]
                                    String: "name" [1332,1338]
                                    STRING [1339,1364]
                                        String: "Identify models to test" [1339,1364]
                                FIELD [1365,1713]
                                    String: "run" [1365,1370]
                                    STRING [1371,1713]
                                        String: "cd tests\necho \"matrix=$(python3 -c 'import os; tests = os.getcwd(); model_tests = os.listdir(os.path.join(tests, \"models\")); d1 = sorted(list(filter(os.path.isdir, os.listdir(tests)))); d2 = sorted(list(filter(os.path.isdir, [f\"models/{x}\" for x in model_tests]))); d1.remove(\"models\"); d = d2 + d1; print(d)')\" >> $GITHUB_OUTPUT\n" [1371,1713]
            FIELD [1717,4316]
                String: "run_tests_single_gpu" [1717,1739]
                OBJECT [1740,4316]
                    FIELD [1741,1761]
                        String: "name" [1741,1747]
                        STRING [1748,1761]
                            String: "Model tests" [1748,1761]
                    FIELD [1762,1889]
                        String: "strategy" [1762,1772]
                        OBJECT [1773,1889]
                            FIELD [1774,1791]
                                String: "fail-fast" [1774,1785]
                                FALSE [1786,1791]
                            FIELD [1792,1888]
                                String: "matrix" [1792,1800]
                                OBJECT [1801,1888]
                                    FIELD [1802,1857]
                                        String: "folders" [1802,1811]
                                        STRING [1812,1857]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [1812,1857]
                                    FIELD [1858,1887]
                                        String: "machine_type" [1858,1872]
                                        ARRAY [1873,1887]
                                            STRING [1874,1886]
                                                String: "single-gpu" [1874,1886]
                    FIELD [1890,1958]
                        String: "runs-on" [1890,1899]
                        ARRAY [1900,1958]
                            STRING [1901,1929]
                                String: "${{ matrix.machine_type }}" [1901,1929]
                            STRING [1930,1942]
                                String: "nvidia-gpu" [1930,1942]
                            STRING [1943,1947]
                                String: "t4" [1943,1947]
                            STRING [1948,1957]
                                String: "past-ci" [1948,1957]
                    FIELD [1959,2159]
                        String: "container" [1959,1970]
                        OBJECT [1971,2159]
                            FIELD [1972,2061]
                                String: "image" [1972,1979]
                                STRING [1980,2061]
                                    String: "huggingface/transformers-${{ inputs.framework }}-past-${{ inputs.version }}-gpu" [1980,2061]
                            FIELD [2062,2158]
                                String: "options" [2062,2071]
                                STRING [2072,2158]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [2072,2158]
                    FIELD [2160,2175]
                        String: "needs" [2160,2167]
                        STRING [2168,2175]
                            String: "setup" [2168,2175]
                    FIELD [2176,4315]
                        String: "steps" [2176,2183]
                        ARRAY [2184,4315]
                            OBJECT [2185,2296]
                                FIELD [2186,2207]
                                    String: "name" [2186,2192]
                                    STRING [2193,2207]
                                        String: "Update clone" [2193,2207]
                                FIELD [2208,2243]
                                    String: "working-directory" [2208,2227]
                                    STRING [2228,2243]
                                        String: "/transformers" [2228,2243]
                                FIELD [2244,2295]
                                    String: "run" [2244,2249]
                                    STRING [2250,2295]
                                        String: "git fetch && git checkout ${{ inputs.sha }}" [2250,2295]
                            OBJECT [2297,2512]
                                FIELD [2298,2395]
                                    String: "name" [2298,2304]
                                    STRING [2305,2395]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [2305,2395]
                                FIELD [2396,2431]
                                    String: "working-directory" [2396,2415]
                                    STRING [2416,2431]
                                        String: "/transformers" [2416,2431]
                                FIELD [2432,2511]
                                    String: "run" [2432,2437]
                                    STRING [2438,2511]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [2438,2511]
                            OBJECT [2513,2787]
                                FIELD [2514,2556]
                                    String: "name" [2514,2520]
                                    STRING [2521,2556]
                                        String: "Echo folder ${{ matrix.folders }}" [2521,2556]
                                FIELD [2557,2571]
                                    String: "shell" [2557,2564]
                                    STRING [2565,2571]
                                        String: "bash" [2565,2571]
                                FIELD [2572,2786]
                                    String: "run" [2572,2577]
                                    STRING [2578,2786]
                                        String: "echo \"${{ matrix.folders }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [2578,2786]
                            OBJECT [2788,2830]
                                FIELD [2789,2808]
                                    String: "name" [2789,2795]
                                    STRING [2796,2808]
                                        String: "NVIDIA-SMI" [2796,2808]
                                FIELD [2809,2829]
                                    String: "run" [2809,2814]
                                    STRING [2815,2829]
                                        String: "nvidia-smi\n" [2815,2829]
                            OBJECT [2831,3036]
                                FIELD [2832,2848]
                                    String: "name" [2832,2838]
                                    STRING [2839,2848]
                                        String: "Install" [2839,2848]
                                FIELD [2849,2885]
                                    String: "if" [2849,2853]
                                    STRING [2854,2885]
                                        String: "inputs.framework == 'pytorch'" [2854,2885]
                                FIELD [2886,2921]
                                    String: "working-directory" [2886,2905]
                                    STRING [2906,2921]
                                        String: "/transformers" [2906,2921]
                                FIELD [2922,3035]
                                    String: "run" [2922,2927]
                                    STRING [2928,3035]
                                        String: "python3 -m pip install --no-cache-dir git+https://github.com/huggingface/accelerate@main#egg=accelerate\n" [2928,3035]
                            OBJECT [3037,3132]
                                FIELD [3038,3058]
                                    String: "name" [3038,3044]
                                    STRING [3045,3058]
                                        String: "Environment" [3045,3058]
                                FIELD [3059,3094]
                                    String: "working-directory" [3059,3078]
                                    STRING [3079,3094]
                                        String: "/transformers" [3079,3094]
                                FIELD [3095,3131]
                                    String: "run" [3095,3100]
                                    STRING [3101,3131]
                                        String: "python3 utils/print_env.py\n" [3101,3131]
                            OBJECT [3133,3242]
                                FIELD [3134,3186]
                                    String: "name" [3134,3140]
                                    STRING [3141,3186]
                                        String: "Show installed libraries and their versions" [3141,3186]
                                FIELD [3187,3222]
                                    String: "working-directory" [3187,3206]
                                    STRING [3207,3222]
                                        String: "/transformers" [3207,3222]
                                FIELD [3223,3241]
                                    String: "run" [3223,3228]
                                    STRING [3229,3241]
                                        String: "pip freeze" [3229,3241]
                            OBJECT [3243,3441]
                                FIELD [3244,3273]
                                    String: "name" [3244,3250]
                                    STRING [3251,3273]
                                        String: "Run all tests on GPU" [3251,3273]
                                FIELD [3274,3309]
                                    String: "working-directory" [3274,3293]
                                    STRING [3294,3309]
                                        String: "/transformers" [3294,3309]
                                FIELD [3310,3440]
                                    String: "run" [3310,3315]
                                    STRING [3316,3440]
                                        String: "python3 -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} tests/${{ matrix.folders }}" [3316,3440]
                            OBJECT [3442,3635]
                                FIELD [3443,3473]
                                    String: "name" [3443,3449]
                                    STRING [3450,3473]
                                        String: "Failure short reports" [3450,3473]
                                FIELD [3474,3497]
                                    String: "if" [3474,3478]
                                    STRING [3479,3497]
                                        String: "${{ failure() }}" [3479,3497]
                                FIELD [3498,3522]
                                    String: "continue-on-error" [3498,3517]
                                    TRUE [3518,3522]
                                FIELD [3523,3634]
                                    String: "run" [3523,3528]
                                    STRING [3529,3634]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [3529,3634]
                            OBJECT [3636,3969]
                                FIELD [3637,3659]
                                    String: "name" [3637,3643]
                                    STRING [3644,3659]
                                        String: "Save job name" [3644,3659]
                                FIELD [3660,3682]
                                    String: "if" [3660,3664]
                                    STRING [3665,3682]
                                        String: "${{ always() }}" [3665,3682]
                                FIELD [3683,3697]
                                    String: "shell" [3683,3690]
                                    STRING [3691,3697]
                                        String: "bash" [3691,3697]
                                FIELD [3698,3968]
                                    String: "run" [3698,3703]
                                    STRING [3704,3968]
                                        String: "matrix_folders=${matrix_folders/'models_'/'models/'}\njob_name=\"Model tests ($matrix_folders, ${{ matrix.machine_type }})\"\necho \"$job_name\"\necho \"$job_name\" > /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/job_name.txt\n" [3704,3968]
                            OBJECT [3970,4314]
                                FIELD [3971,4008]
                                    String: "name" [3971,3977]
                                    STRING [3978,4008]
                                        String: "Test suite reports artifacts" [3978,4008]
                                FIELD [4009,4031]
                                    String: "if" [4009,4013]
                                    STRING [4014,4031]
                                        String: "${{ always() }}" [4014,4031]
                                FIELD [4032,4067]
                                    String: "uses" [4032,4038]
                                    STRING [4039,4067]
                                        String: "actions/upload-artifact@v3" [4039,4067]
                                FIELD [4068,4313]
                                    String: "with" [4068,4074]
                                    OBJECT [4075,4313]
                                        FIELD [4076,4222]
                                            String: "name" [4076,4082]
                                            STRING [4083,4222]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports_postfix_${{ inputs.framework }}-${{ inputs.version }}" [4083,4222]
                                        FIELD [4223,4312]
                                            String: "path" [4223,4229]
                                            STRING [4230,4312]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [4230,4312]
            FIELD [4317,6916]
                String: "run_tests_multi_gpu" [4317,4338]
                OBJECT [4339,6916]
                    FIELD [4340,4360]
                        String: "name" [4340,4346]
                        STRING [4347,4360]
                            String: "Model tests" [4347,4360]
                    FIELD [4361,4487]
                        String: "strategy" [4361,4371]
                        OBJECT [4372,4487]
                            FIELD [4373,4390]
                                String: "fail-fast" [4373,4384]
                                FALSE [4385,4390]
                            FIELD [4391,4486]
                                String: "matrix" [4391,4399]
                                OBJECT [4400,4486]
                                    FIELD [4401,4456]
                                        String: "folders" [4401,4410]
                                        STRING [4411,4456]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [4411,4456]
                                    FIELD [4457,4485]
                                        String: "machine_type" [4457,4471]
                                        ARRAY [4472,4485]
                                            STRING [4473,4484]
                                                String: "multi-gpu" [4473,4484]
                    FIELD [4488,4556]
                        String: "runs-on" [4488,4497]
                        ARRAY [4498,4556]
                            STRING [4499,4527]
                                String: "${{ matrix.machine_type }}" [4499,4527]
                            STRING [4528,4540]
                                String: "nvidia-gpu" [4528,4540]
                            STRING [4541,4545]
                                String: "t4" [4541,4545]
                            STRING [4546,4555]
                                String: "past-ci" [4546,4555]
                    FIELD [4557,4759]
                        String: "container" [4557,4568]
                        OBJECT [4569,4759]
                            FIELD [4570,4659]
                                String: "image" [4570,4577]
                                STRING [4578,4659]
                                    String: "huggingface/transformers-${{ inputs.framework }}-past-${{ inputs.version }}-gpu" [4578,4659]
                            FIELD [4660,4758]
                                String: "options" [4660,4669]
                                STRING [4670,4758]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [4670,4758]
                    FIELD [4760,4775]
                        String: "needs" [4760,4767]
                        STRING [4768,4775]
                            String: "setup" [4768,4775]
                    FIELD [4776,6915]
                        String: "steps" [4776,4783]
                        ARRAY [4784,6915]
                            OBJECT [4785,4896]
                                FIELD [4786,4807]
                                    String: "name" [4786,4792]
                                    STRING [4793,4807]
                                        String: "Update clone" [4793,4807]
                                FIELD [4808,4843]
                                    String: "working-directory" [4808,4827]
                                    STRING [4828,4843]
                                        String: "/transformers" [4828,4843]
                                FIELD [4844,4895]
                                    String: "run" [4844,4849]
                                    STRING [4850,4895]
                                        String: "git fetch && git checkout ${{ inputs.sha }}" [4850,4895]
                            OBJECT [4897,5112]
                                FIELD [4898,4995]
                                    String: "name" [4898,4904]
                                    STRING [4905,4995]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [4905,4995]
                                FIELD [4996,5031]
                                    String: "working-directory" [4996,5015]
                                    STRING [5016,5031]
                                        String: "/transformers" [5016,5031]
                                FIELD [5032,5111]
                                    String: "run" [5032,5037]
                                    STRING [5038,5111]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [5038,5111]
                            OBJECT [5113,5387]
                                FIELD [5114,5156]
                                    String: "name" [5114,5120]
                                    STRING [5121,5156]
                                        String: "Echo folder ${{ matrix.folders }}" [5121,5156]
                                FIELD [5157,5171]
                                    String: "shell" [5157,5164]
                                    STRING [5165,5171]
                                        String: "bash" [5165,5171]
                                FIELD [5172,5386]
                                    String: "run" [5172,5177]
                                    STRING [5178,5386]
                                        String: "echo \"${{ matrix.folders }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [5178,5386]
                            OBJECT [5388,5430]
                                FIELD [5389,5408]
                                    String: "name" [5389,5395]
                                    STRING [5396,5408]
                                        String: "NVIDIA-SMI" [5396,5408]
                                FIELD [5409,5429]
                                    String: "run" [5409,5414]
                                    STRING [5415,5429]
                                        String: "nvidia-smi\n" [5415,5429]
                            OBJECT [5431,5636]
                                FIELD [5432,5448]
                                    String: "name" [5432,5438]
                                    STRING [5439,5448]
                                        String: "Install" [5439,5448]
                                FIELD [5449,5485]
                                    String: "if" [5449,5453]
                                    STRING [5454,5485]
                                        String: "inputs.framework == 'pytorch'" [5454,5485]
                                FIELD [5486,5521]
                                    String: "working-directory" [5486,5505]
                                    STRING [5506,5521]
                                        String: "/transformers" [5506,5521]
                                FIELD [5522,5635]
                                    String: "run" [5522,5527]
                                    STRING [5528,5635]
                                        String: "python3 -m pip install --no-cache-dir git+https://github.com/huggingface/accelerate@main#egg=accelerate\n" [5528,5635]
                            OBJECT [5637,5732]
                                FIELD [5638,5658]
                                    String: "name" [5638,5644]
                                    STRING [5645,5658]
                                        String: "Environment" [5645,5658]
                                FIELD [5659,5694]
                                    String: "working-directory" [5659,5678]
                                    STRING [5679,5694]
                                        String: "/transformers" [5679,5694]
                                FIELD [5695,5731]
                                    String: "run" [5695,5700]
                                    STRING [5701,5731]
                                        String: "python3 utils/print_env.py\n" [5701,5731]
                            OBJECT [5733,5842]
                                FIELD [5734,5786]
                                    String: "name" [5734,5740]
                                    STRING [5741,5786]
                                        String: "Show installed libraries and their versions" [5741,5786]
                                FIELD [5787,5822]
                                    String: "working-directory" [5787,5806]
                                    STRING [5807,5822]
                                        String: "/transformers" [5807,5822]
                                FIELD [5823,5841]
                                    String: "run" [5823,5828]
                                    STRING [5829,5841]
                                        String: "pip freeze" [5829,5841]
                            OBJECT [5843,6041]
                                FIELD [5844,5873]
                                    String: "name" [5844,5850]
                                    STRING [5851,5873]
                                        String: "Run all tests on GPU" [5851,5873]
                                FIELD [5874,5909]
                                    String: "working-directory" [5874,5893]
                                    STRING [5894,5909]
                                        String: "/transformers" [5894,5909]
                                FIELD [5910,6040]
                                    String: "run" [5910,5915]
                                    STRING [5916,6040]
                                        String: "python3 -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} tests/${{ matrix.folders }}" [5916,6040]
                            OBJECT [6042,6235]
                                FIELD [6043,6073]
                                    String: "name" [6043,6049]
                                    STRING [6050,6073]
                                        String: "Failure short reports" [6050,6073]
                                FIELD [6074,6097]
                                    String: "if" [6074,6078]
                                    STRING [6079,6097]
                                        String: "${{ failure() }}" [6079,6097]
                                FIELD [6098,6122]
                                    String: "continue-on-error" [6098,6117]
                                    TRUE [6118,6122]
                                FIELD [6123,6234]
                                    String: "run" [6123,6128]
                                    STRING [6129,6234]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [6129,6234]
                            OBJECT [6236,6569]
                                FIELD [6237,6259]
                                    String: "name" [6237,6243]
                                    STRING [6244,6259]
                                        String: "Save job name" [6244,6259]
                                FIELD [6260,6282]
                                    String: "if" [6260,6264]
                                    STRING [6265,6282]
                                        String: "${{ always() }}" [6265,6282]
                                FIELD [6283,6297]
                                    String: "shell" [6283,6290]
                                    STRING [6291,6297]
                                        String: "bash" [6291,6297]
                                FIELD [6298,6568]
                                    String: "run" [6298,6303]
                                    STRING [6304,6568]
                                        String: "matrix_folders=${matrix_folders/'models_'/'models/'}\njob_name=\"Model tests ($matrix_folders, ${{ matrix.machine_type }})\"\necho \"$job_name\"\necho \"$job_name\" > /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/job_name.txt\n" [6304,6568]
                            OBJECT [6570,6914]
                                FIELD [6571,6608]
                                    String: "name" [6571,6577]
                                    STRING [6578,6608]
                                        String: "Test suite reports artifacts" [6578,6608]
                                FIELD [6609,6631]
                                    String: "if" [6609,6613]
                                    STRING [6614,6631]
                                        String: "${{ always() }}" [6614,6631]
                                FIELD [6632,6667]
                                    String: "uses" [6632,6638]
                                    STRING [6639,6667]
                                        String: "actions/upload-artifact@v3" [6639,6667]
                                FIELD [6668,6913]
                                    String: "with" [6668,6674]
                                    OBJECT [6675,6913]
                                        FIELD [6676,6822]
                                            String: "name" [6676,6682]
                                            STRING [6683,6822]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports_postfix_${{ inputs.framework }}-${{ inputs.version }}" [6683,6822]
                                        FIELD [6823,6912]
                                            String: "path" [6823,6829]
                                            STRING [6830,6912]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [6830,6912]
            FIELD [6917,9383]
                String: "run_all_tests_torch_cuda_extensions_gpu" [6917,6958]
                OBJECT [6959,9383]
                    FIELD [6960,6995]
                        String: "name" [6960,6966]
                        STRING [6967,6995]
                            String: "Torch CUDA extension tests" [6967,6995]
                    FIELD [6996,7032]
                        String: "if" [6996,7000]
                        STRING [7001,7032]
                            String: "inputs.framework == 'pytorch'" [7001,7032]
                    FIELD [7033,7116]
                        String: "strategy" [7033,7043]
                        OBJECT [7044,7116]
                            FIELD [7045,7062]
                                String: "fail-fast" [7045,7056]
                                FALSE [7057,7062]
                            FIELD [7063,7115]
                                String: "matrix" [7063,7071]
                                OBJECT [7072,7115]
                                    FIELD [7073,7114]
                                        String: "machine_type" [7073,7087]
                                        ARRAY [7088,7114]
                                            STRING [7089,7101]
                                                String: "single-gpu" [7089,7101]
                                            STRING [7102,7113]
                                                String: "multi-gpu" [7102,7113]
                    FIELD [7117,7185]
                        String: "runs-on" [7117,7126]
                        ARRAY [7127,7185]
                            STRING [7128,7156]
                                String: "${{ matrix.machine_type }}" [7128,7156]
                            STRING [7157,7169]
                                String: "nvidia-gpu" [7157,7169]
                            STRING [7170,7174]
                                String: "t4" [7170,7174]
                            STRING [7175,7184]
                                String: "past-ci" [7175,7184]
                    FIELD [7186,7201]
                        String: "needs" [7186,7193]
                        STRING [7194,7201]
                            String: "setup" [7194,7201]
                    FIELD [7202,7404]
                        String: "container" [7202,7213]
                        OBJECT [7214,7404]
                            FIELD [7215,7304]
                                String: "image" [7215,7222]
                                STRING [7223,7304]
                                    String: "huggingface/transformers-${{ inputs.framework }}-past-${{ inputs.version }}-gpu" [7223,7304]
                            FIELD [7305,7403]
                                String: "options" [7305,7314]
                                STRING [7315,7403]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [7315,7403]
                    FIELD [7405,9382]
                        String: "steps" [7405,7412]
                        ARRAY [7413,9382]
                            OBJECT [7414,7525]
                                FIELD [7415,7436]
                                    String: "name" [7415,7421]
                                    STRING [7422,7436]
                                        String: "Update clone" [7422,7436]
                                FIELD [7437,7472]
                                    String: "working-directory" [7437,7456]
                                    STRING [7457,7472]
                                        String: "/transformers" [7457,7472]
                                FIELD [7473,7524]
                                    String: "run" [7473,7478]
                                    STRING [7479,7524]
                                        String: "git fetch && git checkout ${{ github.sha }}" [7479,7524]
                            OBJECT [7526,7741]
                                FIELD [7527,7624]
                                    String: "name" [7527,7533]
                                    STRING [7534,7624]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [7534,7624]
                                FIELD [7625,7660]
                                    String: "working-directory" [7625,7644]
                                    STRING [7645,7660]
                                        String: "/transformers" [7645,7660]
                                FIELD [7661,7740]
                                    String: "run" [7661,7666]
                                    STRING [7667,7740]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [7667,7740]
                            OBJECT [7742,7910]
                                FIELD [7743,7759]
                                    String: "name" [7743,7749]
                                    STRING [7750,7759]
                                        String: "Install" [7750,7759]
                                FIELD [7760,7795]
                                    String: "working-directory" [7760,7779]
                                    STRING [7780,7795]
                                        String: "/transformers" [7780,7795]
                                FIELD [7796,7909]
                                    String: "run" [7796,7801]
                                    STRING [7802,7909]
                                        String: "python3 -m pip install --no-cache-dir git+https://github.com/huggingface/accelerate@main#egg=accelerate\n" [7802,7909]
                            OBJECT [7911,8005]
                                FIELD [7912,7951]
                                    String: "name" [7912,7918]
                                    STRING [7919,7951]
                                        String: "Remove cached torch extensions" [7919,7951]
                                FIELD [7952,8004]
                                    String: "run" [7952,7957]
                                    STRING [7958,8004]
                                        String: "rm -rf /github/home/.cache/torch_extensions/" [7958,8004]
                            OBJECT [8006,8397]
                                FIELD [8007,8043]
                                    String: "name" [8007,8013]
                                    STRING [8014,8043]
                                        String: "Pre build DeepSpeed *again*" [8014,8043]
                                FIELD [8044,8067]
                                    String: "working-directory" [8044,8063]
                                    STRING [8064,8067]
                                        String: "/" [8064,8067]
                                FIELD [8068,8396]
                                    String: "run" [8068,8073]
                                    STRING [8074,8396]
                                        String: "python3 -m pip uninstall -y deepspeed\nrm -rf DeepSpeed\ngit clone https://github.com/microsoft/DeepSpeed && cd DeepSpeed && rm -rf build\nDS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 DS_BUILD_UTILS=1 python3 -m pip install . --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [8074,8396]
                            OBJECT [8398,8440]
                                FIELD [8399,8418]
                                    String: "name" [8399,8405]
                                    STRING [8406,8418]
                                        String: "NVIDIA-SMI" [8406,8418]
                                FIELD [8419,8439]
                                    String: "run" [8419,8424]
                                    STRING [8425,8439]
                                        String: "nvidia-smi\n" [8425,8439]
                            OBJECT [8441,8536]
                                FIELD [8442,8462]
                                    String: "name" [8442,8448]
                                    STRING [8449,8462]
                                        String: "Environment" [8449,8462]
                                FIELD [8463,8498]
                                    String: "working-directory" [8463,8482]
                                    STRING [8483,8498]
                                        String: "/transformers" [8483,8498]
                                FIELD [8499,8535]
                                    String: "run" [8499,8504]
                                    STRING [8505,8535]
                                        String: "python3 utils/print_env.py\n" [8505,8535]
                            OBJECT [8537,8646]
                                FIELD [8538,8590]
                                    String: "name" [8538,8544]
                                    STRING [8545,8590]
                                        String: "Show installed libraries and their versions" [8545,8590]
                                FIELD [8591,8626]
                                    String: "working-directory" [8591,8610]
                                    STRING [8611,8626]
                                        String: "/transformers" [8611,8626]
                                FIELD [8627,8645]
                                    String: "run" [8627,8632]
                                    STRING [8633,8645]
                                        String: "pip freeze" [8633,8645]
                            OBJECT [8647,8850]
                                FIELD [8648,8677]
                                    String: "name" [8648,8654]
                                    STRING [8655,8677]
                                        String: "Run all tests on GPU" [8655,8677]
                                FIELD [8678,8713]
                                    String: "working-directory" [8678,8697]
                                    STRING [8698,8713]
                                        String: "/transformers" [8698,8713]
                                FIELD [8714,8849]
                                    String: "run" [8714,8719]
                                    STRING [8720,8849]
                                        String: "python3 -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [8720,8849]
                            OBJECT [8851,9044]
                                FIELD [8852,8882]
                                    String: "name" [8852,8858]
                                    STRING [8859,8882]
                                        String: "Failure short reports" [8859,8882]
                                FIELD [8883,8906]
                                    String: "if" [8883,8887]
                                    STRING [8888,8906]
                                        String: "${{ failure() }}" [8888,8906]
                                FIELD [8907,8931]
                                    String: "continue-on-error" [8907,8926]
                                    TRUE [8927,8931]
                                FIELD [8932,9043]
                                    String: "run" [8932,8937]
                                    STRING [8938,9043]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [8938,9043]
                            OBJECT [9045,9381]
                                FIELD [9046,9083]
                                    String: "name" [9046,9052]
                                    STRING [9053,9083]
                                        String: "Test suite reports artifacts" [9053,9083]
                                FIELD [9084,9106]
                                    String: "if" [9084,9088]
                                    STRING [9089,9106]
                                        String: "${{ always() }}" [9089,9106]
                                FIELD [9107,9142]
                                    String: "uses" [9107,9113]
                                    STRING [9114,9142]
                                        String: "actions/upload-artifact@v3" [9114,9142]
                                FIELD [9143,9380]
                                    String: "with" [9143,9149]
                                    OBJECT [9150,9380]
                                        FIELD [9151,9289]
                                            String: "name" [9151,9157]
                                            STRING [9158,9289]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports_postfix_${{ inputs.framework }}-${{ inputs.version }}" [9158,9289]
                                        FIELD [9290,9379]
                                            String: "path" [9290,9296]
                                            STRING [9297,9379]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [9297,9379]
            FIELD [9384,10801]
                String: "send_results" [9384,9398]
                OBJECT [9399,10801]
                    FIELD [9400,9432]
                        String: "name" [9400,9406]
                        STRING [9407,9432]
                            String: "Send results to webhook" [9407,9432]
                    FIELD [9433,9457]
                        String: "runs-on" [9433,9442]
                        STRING [9443,9457]
                            String: "ubuntu-22.04" [9443,9457]
                    FIELD [9458,9473]
                        String: "if" [9458,9462]
                        STRING [9463,9473]
                            String: "always()" [9463,9473]
                    FIELD [9474,9578]
                        String: "needs" [9474,9481]
                        ARRAY [9482,9578]
                            STRING [9483,9490]
                                String: "setup" [9483,9490]
                            STRING [9491,9513]
                                String: "run_tests_single_gpu" [9491,9513]
                            STRING [9514,9535]
                                String: "run_tests_multi_gpu" [9514,9535]
                            STRING [9536,9577]
                                String: "run_all_tests_torch_cuda_extensions_gpu" [9536,9577]
                    FIELD [9579,10800]
                        String: "steps" [9579,9586]
                        ARRAY [9587,10800]
                            OBJECT [9588,9695]
                                FIELD [9589,9620]
                                    String: "name" [9589,9595]
                                    STRING [9596,9620]
                                        String: "Preliminary job status" [9596,9620]
                                FIELD [9621,9635]
                                    String: "shell" [9621,9628]
                                    STRING [9629,9635]
                                        String: "bash" [9629,9635]
                                FIELD [9636,9694]
                                    String: "run" [9636,9641]
                                    STRING [9642,9694]
                                        String: "echo \"Setup status: ${{ needs.setup.result }}\"\n" [9642,9694]
                            OBJECT [9696,9726]
                                FIELD [9697,9725]
                                    String: "uses" [9697,9703]
                                    STRING [9704,9725]
                                        String: "actions/checkout@v3" [9704,9725]
                            OBJECT [9727,9766]
                                FIELD [9728,9765]
                                    String: "uses" [9728,9734]
                                    STRING [9735,9765]
                                        String: "actions/download-artifact@v3" [9735,9765]
                            OBJECT [9767,9828]
                                FIELD [9768,9793]
                                    String: "name" [9768,9774]
                                    STRING [9775,9793]
                                        String: "Create directory" [9775,9793]
                                FIELD [9794,9827]
                                    String: "run" [9794,9799]
                                    STRING [9800,9827]
                                        String: "mkdir test_failure_tables" [9800,9827]
                            OBJECT [9829,10516]
                                FIELD [9830,9860]
                                    String: "name" [9830,9836]
                                    STRING [9837,9860]
                                        String: "Send message to Slack" [9837,9860]
                                FIELD [9861,10387]
                                    String: "env" [9861,9866]
                                    OBJECT [9867,10387]
                                        FIELD [9868,9924]
                                            String: "CI_SLACK_BOT_TOKEN" [9868,9888]
                                            STRING [9889,9924]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [9889,9924]
                                        FIELD [9925,9983]
                                            String: "CI_SLACK_CHANNEL_ID" [9925,9946]
                                            STRING [9947,9983]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [9947,9983]
                                        FIELD [9984,10054]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [9984,10011]
                                            STRING [10012,10054]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [10012,10054]
                                        FIELD [10055,10131]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [10055,10085]
                                            STRING [10086,10131]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [10086,10131]
                                        FIELD [10132,10209]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [10132,10160]
                                            STRING [10161,10209]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_PAST_FUTURE }}" [10161,10209]
                                        FIELD [10210,10274]
                                            String: "ACCESS_REPO_INFO_TOKEN" [10210,10234]
                                            STRING [10235,10274]
                                                String: "${{ secrets.ACCESS_REPO_INFO_TOKEN }}" [10235,10274]
                                        FIELD [10275,10343]
                                            String: "CI_EVENT" [10275,10285]
                                            STRING [10286,10343]
                                                String: "Past CI - ${{ inputs.framework }}-${{ inputs.version }}" [10286,10343]
                                        FIELD [10344,10386]
                                            String: "SETUP_STATUS" [10344,10358]
                                            STRING [10359,10386]
                                                String: "${{ needs.setup.result }}" [10359,10386]
                                FIELD [10388,10515]
                                    String: "run" [10388,10393]
                                    STRING [10394,10515]
                                        String: "pip install slack_sdk\npip show slack_sdk\npython utils/notification_service.py \"${{ needs.setup.outputs.matrix }}\"\n" [10394,10515]
                            OBJECT [10517,10723]
                                FIELD [10518,10550]
                                    String: "name" [10518,10524]
                                    STRING [10525,10550]
                                        String: "Failure table artifacts" [10525,10550]
                                FIELD [10551,10573]
                                    String: "if" [10551,10555]
                                    STRING [10556,10573]
                                        String: "${{ always() }}" [10556,10573]
                                FIELD [10574,10609]
                                    String: "uses" [10574,10580]
                                    STRING [10581,10609]
                                        String: "actions/upload-artifact@v3" [10581,10609]
                                FIELD [10610,10722]
                                    String: "with" [10610,10616]
                                    OBJECT [10617,10722]
                                        FIELD [10618,10692]
                                            String: "name" [10618,10624]
                                            STRING [10625,10692]
                                                String: "test_failure_tables_${{ inputs.framework }}-${{ inputs.version }}" [10625,10692]
                                        FIELD [10693,10721]
                                            String: "path" [10693,10699]
                                            STRING [10700,10721]
                                                String: "test_failure_tables" [10700,10721]
                            OBJECT [10724,10799]
                                FIELD [10725,10762]
                                    String: "uses" [10725,10731]
                                    STRING [10732,10762]
                                        String: "geekyeggo/delete-artifact@v2" [10732,10762]
                                FIELD [10763,10798]
                                    String: "with" [10763,10769]
                                    OBJECT [10770,10798]
                                        FIELD [10771,10797]
                                            String: "name" [10771,10777]
                                            STRING [10778,10797]
                                                String: "single-*\nmulti-*" [10778,10797]