OBJECT [0,11626]
    FIELD [1,40]
        String: "name" [1,7]
        STRING [8,40]
            String: "Self-hosted runner (scheduled)" [8,40]
    FIELD [41,108]
        String: "on" [41,45]
        OBJECT [46,108]
            FIELD [47,73]
                String: "repository_dispatch" [47,68]
                NULL [69,73]
            FIELD [74,107]
                String: "schedule" [74,84]
                ARRAY [85,107]
                    OBJECT [86,106]
                        FIELD [87,105]
                            String: "cron" [87,93]
                            STRING [94,105]
                                String: "0 2 * * *" [94,105]
    FIELD [109,333]
        String: "env" [109,114]
        OBJECT [115,333]
            FIELD [116,138]
                String: "HF_HOME" [116,125]
                STRING [126,138]
                    String: "/mnt/cache" [126,138]
            FIELD [139,164]
                String: "TRANSFORMERS_IS_CI" [139,159]
                TRUE [160,164]
            FIELD [165,184]
                String: "OMP_NUM_THREADS" [165,182]
                NUMBER [183,184]
                    Number: 8 [183,184]
            FIELD [185,204]
                String: "MKL_NUM_THREADS" [185,202]
                NUMBER [203,204]
                    Number: 8 [203,204]
            FIELD [205,220]
                String: "RUN_SLOW" [205,215]
                TRUE [216,220]
            FIELD [221,273]
                String: "SIGOPT_API_TOKEN" [221,239]
                STRING [240,273]
                    String: "${{ secrets.SIGOPT_API_TOKEN }}" [240,273]
            FIELD [274,306]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [274,301]
                TRUE [302,306]
            FIELD [307,332]
                String: "RUN_PT_TF_CROSS_TESTS" [307,330]
                NUMBER [331,332]
                    Number: 1 [331,332]
    FIELD [334,11625]
        String: "jobs" [334,340]
        OBJECT [341,11625]
            FIELD [342,1820]
                String: "setup" [342,349]
                OBJECT [350,1820]
                    FIELD [351,365]
                        String: "name" [351,357]
                        STRING [358,365]
                            String: "Setup" [358,365]
                    FIELD [366,441]
                        String: "strategy" [366,376]
                        OBJECT [377,441]
                            FIELD [378,440]
                                String: "matrix" [378,386]
                                OBJECT [387,440]
                                    FIELD [388,439]
                                        String: "machines" [388,398]
                                        ARRAY [399,439]
                                            STRING [400,418]
                                                String: "multi-gpu-docker" [400,418]
                                            STRING [419,438]
                                                String: "single-gpu-docker" [419,438]
                    FIELD [442,476]
                        String: "runs-on" [442,451]
                        STRING [452,476]
                            String: "${{ matrix.machines }}" [452,476]
                    FIELD [477,637]
                        String: "container" [477,488]
                        OBJECT [489,637]
                            FIELD [490,539]
                                String: "image" [490,497]
                                STRING [498,539]
                                    String: "huggingface/transformers-all-latest-gpu" [498,539]
                            FIELD [540,636]
                                String: "options" [540,549]
                                STRING [550,636]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [550,636]
                    FIELD [638,699]
                        String: "outputs" [638,647]
                        OBJECT [648,699]
                            FIELD [649,698]
                                String: "matrix" [649,657]
                                STRING [658,698]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [658,698]
                    FIELD [700,1819]
                        String: "steps" [700,707]
                        ARRAY [708,1819]
                            OBJECT [709,822]
                                FIELD [710,731]
                                    String: "name" [710,716]
                                    STRING [717,731]
                                        String: "Update clone" [717,731]
                                FIELD [732,767]
                                    String: "working-directory" [732,751]
                                    STRING [752,767]
                                        String: "/transformers" [752,767]
                                FIELD [768,821]
                                    String: "run" [768,773]
                                    STRING [774,821]
                                        String: "git fetch && git checkout ${{ github.sha }}\n" [774,821]
                            OBJECT [823,961]
                                FIELD [824,840]
                                    String: "name" [824,830]
                                    STRING [831,840]
                                        String: "Cleanup" [831,840]
                                FIELD [841,876]
                                    String: "working-directory" [841,860]
                                    STRING [861,876]
                                        String: "/transformers" [861,876]
                                FIELD [877,960]
                                    String: "run" [877,882]
                                    STRING [883,960]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [883,960]
                            OBJECT [962,1396]
                                FIELD [963,980]
                                    String: "id" [963,967]
                                    STRING [968,980]
                                        String: "set-matrix" [968,980]
                                FIELD [981,1013]
                                    String: "name" [981,987]
                                    STRING [988,1013]
                                        String: "Identify models to test" [988,1013]
                                FIELD [1014,1055]
                                    String: "working-directory" [1014,1033]
                                    STRING [1034,1055]
                                        String: "/transformers/tests" [1034,1055]
                                FIELD [1056,1395]
                                    String: "run" [1056,1061]
                                    STRING [1062,1395]
                                        String: "echo \"::set-output name=matrix::$(python3 -c 'import os; tests = os.getcwd(); model_tests = os.listdir(os.path.join(tests, \"models\")); d1 = sorted(list(filter(os.path.isdir, os.listdir(tests)))); d2 = sorted(list(filter(os.path.isdir, [f\"models/{x}\" for x in model_tests]))); d1.remove(\"models\"); d = d2 + d1; print(d)')\"\n" [1062,1395]
                            OBJECT [1397,1439]
                                FIELD [1398,1417]
                                    String: "name" [1398,1404]
                                    STRING [1405,1417]
                                        String: "NVIDIA-SMI" [1405,1417]
                                FIELD [1418,1438]
                                    String: "run" [1418,1423]
                                    STRING [1424,1438]
                                        String: "nvidia-smi\n" [1424,1438]
                            OBJECT [1440,1818]
                                FIELD [1441,1464]
                                    String: "name" [1441,1447]
                                    STRING [1448,1464]
                                        String: "GPU visibility" [1448,1464]
                                FIELD [1465,1500]
                                    String: "working-directory" [1465,1484]
                                    STRING [1485,1500]
                                        String: "/transformers" [1485,1500]
                                FIELD [1501,1817]
                                    String: "run" [1501,1506]
                                    STRING [1507,1817]
                                        String: "utils/print_env_pt.py\nTF_CPP_MIN_LOG_LEVEL=3 python3 -c \"import tensorflow as tf; print('TF GPUs available:', bool(tf.config.list_physical_devices('GPU')))\"\nTF_CPP_MIN_LOG_LEVEL=3 python3 -c \"import tensorflow as tf; print('Number of TF GPUs available:', len(tf.config.list_physical_devices('GPU')))\"\n" [1507,1817]
            FIELD [1821,3527]
                String: "run_tests_single_gpu" [1821,1843]
                OBJECT [1844,3527]
                    FIELD [1845,1865]
                        String: "name" [1845,1851]
                        STRING [1852,1865]
                            String: "Model tests" [1852,1865]
                    FIELD [1866,1996]
                        String: "strategy" [1866,1876]
                        OBJECT [1877,1996]
                            FIELD [1878,1895]
                                String: "fail-fast" [1878,1889]
                                FALSE [1890,1895]
                            FIELD [1896,1995]
                                String: "matrix" [1896,1904]
                                OBJECT [1905,1995]
                                    FIELD [1906,1961]
                                        String: "folders" [1906,1915]
                                        STRING [1916,1961]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [1916,1961]
                                    FIELD [1962,1994]
                                        String: "machines" [1962,1972]
                                        ARRAY [1973,1994]
                                            STRING [1974,1993]
                                                String: "single-gpu-docker" [1974,1993]
                    FIELD [1997,2031]
                        String: "runs-on" [1997,2006]
                        STRING [2007,2031]
                            String: "${{ matrix.machines }}" [2007,2031]
                    FIELD [2032,2192]
                        String: "container" [2032,2043]
                        OBJECT [2044,2192]
                            FIELD [2045,2094]
                                String: "image" [2045,2052]
                                STRING [2053,2094]
                                    String: "huggingface/transformers-all-latest-gpu" [2053,2094]
                            FIELD [2095,2191]
                                String: "options" [2095,2104]
                                STRING [2105,2191]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [2105,2191]
                    FIELD [2193,2208]
                        String: "needs" [2193,2200]
                        STRING [2201,2208]
                            String: "setup" [2201,2208]
                    FIELD [2209,3526]
                        String: "steps" [2209,2216]
                        ARRAY [2217,3526]
                            OBJECT [2218,2492]
                                FIELD [2219,2261]
                                    String: "name" [2219,2225]
                                    STRING [2226,2261]
                                        String: "Echo folder ${{ matrix.folders }}" [2226,2261]
                                FIELD [2262,2276]
                                    String: "shell" [2262,2269]
                                    STRING [2270,2276]
                                        String: "bash" [2270,2276]
                                FIELD [2277,2491]
                                    String: "run" [2277,2282]
                                    STRING [2283,2491]
                                        String: "echo \"${{ matrix.folders }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [2283,2491]
                            OBJECT [2493,2741]
                                FIELD [2494,2547]
                                    String: "name" [2494,2500]
                                    STRING [2501,2547]
                                        String: "Set machine type from ${{ matrix.machines }}" [2501,2547]
                                FIELD [2548,2562]
                                    String: "shell" [2548,2555]
                                    STRING [2556,2562]
                                        String: "bash" [2556,2562]
                                FIELD [2563,2740]
                                    String: "run" [2563,2568]
                                    STRING [2569,2740]
                                        String: "machine_type=${{ matrix.machines }}\nmachine_type=${machine_type/'-docker'/''}\necho \"machine_type=$machine_type\"\necho \"machine_type=$machine_type\" >> $GITHUB_ENV\n" [2569,2740]
                            OBJECT [2742,2853]
                                FIELD [2743,2764]
                                    String: "name" [2743,2749]
                                    STRING [2750,2764]
                                        String: "Update clone" [2750,2764]
                                FIELD [2765,2800]
                                    String: "working-directory" [2765,2784]
                                    STRING [2785,2800]
                                        String: "/transformers" [2785,2800]
                                FIELD [2801,2852]
                                    String: "run" [2801,2806]
                                    STRING [2807,2852]
                                        String: "git fetch && git checkout ${{ github.sha }}" [2807,2852]
                            OBJECT [2854,3049]
                                FIELD [2855,2884]
                                    String: "name" [2855,2861]
                                    STRING [2862,2884]
                                        String: "Run all tests on GPU" [2862,2884]
                                FIELD [2885,2920]
                                    String: "working-directory" [2885,2904]
                                    STRING [2905,2920]
                                        String: "/transformers" [2905,2920]
                                FIELD [2921,3048]
                                    String: "run" [2921,2926]
                                    STRING [2927,3048]
                                        String: "python3 -m pytest -v --make-reports=${{ env.machine_type }}_tests_gpu_${{ matrix.folders }} tests/${{ matrix.folders }}" [2927,3048]
                            OBJECT [3050,3240]
                                FIELD [3051,3081]
                                    String: "name" [3051,3057]
                                    STRING [3058,3081]
                                        String: "Failure short reports" [3058,3081]
                                FIELD [3082,3105]
                                    String: "if" [3082,3086]
                                    STRING [3087,3105]
                                        String: "${{ failure() }}" [3087,3105]
                                FIELD [3106,3130]
                                    String: "continue-on-error" [3106,3125]
                                    TRUE [3126,3130]
                                FIELD [3131,3239]
                                    String: "run" [3131,3136]
                                    STRING [3137,3239]
                                        String: "cat /transformers/reports/${{ env.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [3137,3239]
                            OBJECT [3241,3525]
                                FIELD [3242,3279]
                                    String: "name" [3242,3248]
                                    STRING [3249,3279]
                                        String: "Test suite reports artifacts" [3249,3279]
                                FIELD [3280,3302]
                                    String: "if" [3280,3284]
                                    STRING [3285,3302]
                                        String: "${{ always() }}" [3285,3302]
                                FIELD [3303,3338]
                                    String: "uses" [3303,3309]
                                    STRING [3310,3338]
                                        String: "actions/upload-artifact@v2" [3310,3338]
                                FIELD [3339,3524]
                                    String: "with" [3339,3345]
                                    OBJECT [3346,3524]
                                        FIELD [3347,3436]
                                            String: "name" [3347,3353]
                                            STRING [3354,3436]
                                                String: "${{ env.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [3354,3436]
                                        FIELD [3437,3523]
                                            String: "path" [3437,3443]
                                            STRING [3444,3523]
                                                String: "/transformers/reports/${{ env.machine_type }}_tests_gpu_${{ matrix.folders }}" [3444,3523]
            FIELD [3528,5232]
                String: "run_tests_multi_gpu" [3528,3549]
                OBJECT [3550,5232]
                    FIELD [3551,3571]
                        String: "name" [3551,3557]
                        STRING [3558,3571]
                            String: "Model tests" [3558,3571]
                    FIELD [3572,3701]
                        String: "strategy" [3572,3582]
                        OBJECT [3583,3701]
                            FIELD [3584,3601]
                                String: "fail-fast" [3584,3595]
                                FALSE [3596,3601]
                            FIELD [3602,3700]
                                String: "matrix" [3602,3610]
                                OBJECT [3611,3700]
                                    FIELD [3612,3667]
                                        String: "folders" [3612,3621]
                                        STRING [3622,3667]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [3622,3667]
                                    FIELD [3668,3699]
                                        String: "machines" [3668,3678]
                                        ARRAY [3679,3699]
                                            STRING [3680,3698]
                                                String: "multi-gpu-docker" [3680,3698]
                    FIELD [3702,3736]
                        String: "runs-on" [3702,3711]
                        STRING [3712,3736]
                            String: "${{ matrix.machines }}" [3712,3736]
                    FIELD [3737,3897]
                        String: "container" [3737,3748]
                        OBJECT [3749,3897]
                            FIELD [3750,3799]
                                String: "image" [3750,3757]
                                STRING [3758,3799]
                                    String: "huggingface/transformers-all-latest-gpu" [3758,3799]
                            FIELD [3800,3896]
                                String: "options" [3800,3809]
                                STRING [3810,3896]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [3810,3896]
                    FIELD [3898,3913]
                        String: "needs" [3898,3905]
                        STRING [3906,3913]
                            String: "setup" [3906,3913]
                    FIELD [3914,5231]
                        String: "steps" [3914,3921]
                        ARRAY [3922,5231]
                            OBJECT [3923,4197]
                                FIELD [3924,3966]
                                    String: "name" [3924,3930]
                                    STRING [3931,3966]
                                        String: "Echo folder ${{ matrix.folders }}" [3931,3966]
                                FIELD [3967,3981]
                                    String: "shell" [3967,3974]
                                    STRING [3975,3981]
                                        String: "bash" [3975,3981]
                                FIELD [3982,4196]
                                    String: "run" [3982,3987]
                                    STRING [3988,4196]
                                        String: "echo \"${{ matrix.folders }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [3988,4196]
                            OBJECT [4198,4446]
                                FIELD [4199,4252]
                                    String: "name" [4199,4205]
                                    STRING [4206,4252]
                                        String: "Set machine type from ${{ matrix.machines }}" [4206,4252]
                                FIELD [4253,4267]
                                    String: "shell" [4253,4260]
                                    STRING [4261,4267]
                                        String: "bash" [4261,4267]
                                FIELD [4268,4445]
                                    String: "run" [4268,4273]
                                    STRING [4274,4445]
                                        String: "machine_type=${{ matrix.machines }}\nmachine_type=${machine_type/'-docker'/''}\necho \"machine_type=$machine_type\"\necho \"machine_type=$machine_type\" >> $GITHUB_ENV\n" [4274,4445]
                            OBJECT [4447,4558]
                                FIELD [4448,4469]
                                    String: "name" [4448,4454]
                                    STRING [4455,4469]
                                        String: "Update clone" [4455,4469]
                                FIELD [4470,4505]
                                    String: "working-directory" [4470,4489]
                                    STRING [4490,4505]
                                        String: "/transformers" [4490,4505]
                                FIELD [4506,4557]
                                    String: "run" [4506,4511]
                                    STRING [4512,4557]
                                        String: "git fetch && git checkout ${{ github.sha }}" [4512,4557]
                            OBJECT [4559,4754]
                                FIELD [4560,4589]
                                    String: "name" [4560,4566]
                                    STRING [4567,4589]
                                        String: "Run all tests on GPU" [4567,4589]
                                FIELD [4590,4625]
                                    String: "working-directory" [4590,4609]
                                    STRING [4610,4625]
                                        String: "/transformers" [4610,4625]
                                FIELD [4626,4753]
                                    String: "run" [4626,4631]
                                    STRING [4632,4753]
                                        String: "python3 -m pytest -v --make-reports=${{ env.machine_type }}_tests_gpu_${{ matrix.folders }} tests/${{ matrix.folders }}" [4632,4753]
                            OBJECT [4755,4945]
                                FIELD [4756,4786]
                                    String: "name" [4756,4762]
                                    STRING [4763,4786]
                                        String: "Failure short reports" [4763,4786]
                                FIELD [4787,4810]
                                    String: "if" [4787,4791]
                                    STRING [4792,4810]
                                        String: "${{ failure() }}" [4792,4810]
                                FIELD [4811,4835]
                                    String: "continue-on-error" [4811,4830]
                                    TRUE [4831,4835]
                                FIELD [4836,4944]
                                    String: "run" [4836,4841]
                                    STRING [4842,4944]
                                        String: "cat /transformers/reports/${{ env.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [4842,4944]
                            OBJECT [4946,5230]
                                FIELD [4947,4984]
                                    String: "name" [4947,4953]
                                    STRING [4954,4984]
                                        String: "Test suite reports artifacts" [4954,4984]
                                FIELD [4985,5007]
                                    String: "if" [4985,4989]
                                    STRING [4990,5007]
                                        String: "${{ always() }}" [4990,5007]
                                FIELD [5008,5043]
                                    String: "uses" [5008,5014]
                                    STRING [5015,5043]
                                        String: "actions/upload-artifact@v2" [5015,5043]
                                FIELD [5044,5229]
                                    String: "with" [5044,5050]
                                    OBJECT [5051,5229]
                                        FIELD [5052,5141]
                                            String: "name" [5052,5058]
                                            STRING [5059,5141]
                                                String: "${{ env.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [5059,5141]
                                        FIELD [5142,5228]
                                            String: "path" [5142,5148]
                                            STRING [5149,5228]
                                                String: "/transformers/reports/${{ env.machine_type }}_tests_gpu_${{ matrix.folders }}" [5149,5228]
            FIELD [5233,6158]
                String: "run_examples_gpu" [5233,5251]
                OBJECT [5252,6158]
                    FIELD [5253,5280]
                        String: "name" [5253,5259]
                        STRING [5260,5280]
                            String: "Examples directory" [5260,5280]
                    FIELD [5281,5326]
                        String: "runs-on" [5281,5290]
                        ARRAY [5291,5326]
                            STRING [5292,5305]
                                String: "self-hosted" [5292,5305]
                            STRING [5306,5325]
                                String: "single-gpu-docker" [5306,5325]
                    FIELD [5327,5487]
                        String: "container" [5327,5338]
                        OBJECT [5339,5487]
                            FIELD [5340,5389]
                                String: "image" [5340,5347]
                                STRING [5348,5389]
                                    String: "huggingface/transformers-all-latest-gpu" [5348,5389]
                            FIELD [5390,5486]
                                String: "options" [5390,5399]
                                STRING [5400,5486]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [5400,5486]
                    FIELD [5488,5503]
                        String: "needs" [5488,5495]
                        STRING [5496,5503]
                            String: "setup" [5496,5503]
                    FIELD [5504,6157]
                        String: "steps" [5504,5511]
                        ARRAY [5512,6157]
                            OBJECT [5513,5624]
                                FIELD [5514,5535]
                                    String: "name" [5514,5520]
                                    STRING [5521,5535]
                                        String: "Update clone" [5521,5535]
                                FIELD [5536,5571]
                                    String: "working-directory" [5536,5555]
                                    STRING [5556,5571]
                                        String: "/transformers" [5556,5571]
                                FIELD [5572,5623]
                                    String: "run" [5572,5577]
                                    STRING [5578,5623]
                                        String: "git fetch && git checkout ${{ github.sha }}" [5578,5623]
                            OBJECT [5625,5830]
                                FIELD [5626,5660]
                                    String: "name" [5626,5632]
                                    STRING [5633,5660]
                                        String: "Run examples tests on GPU" [5633,5660]
                                FIELD [5661,5696]
                                    String: "working-directory" [5661,5680]
                                    STRING [5681,5696]
                                        String: "/transformers" [5681,5696]
                                FIELD [5697,5829]
                                    String: "run" [5697,5702]
                                    STRING [5703,5829]
                                        String: "pip install -r examples/pytorch/_tests_requirements.txt\npython3 -m pytest -v --make-reports=examples_gpu examples/pytorch\n" [5703,5829]
                            OBJECT [5831,5978]
                                FIELD [5832,5862]
                                    String: "name" [5832,5838]
                                    STRING [5839,5862]
                                        String: "Failure short reports" [5839,5862]
                                FIELD [5863,5886]
                                    String: "if" [5863,5867]
                                    STRING [5868,5886]
                                        String: "${{ failure() }}" [5868,5886]
                                FIELD [5887,5911]
                                    String: "continue-on-error" [5887,5906]
                                    TRUE [5907,5911]
                                FIELD [5912,5977]
                                    String: "run" [5912,5917]
                                    STRING [5918,5977]
                                        String: "cat /transformers/reports/examples_gpu/failures_short.txt" [5918,5977]
                            OBJECT [5979,6156]
                                FIELD [5980,6017]
                                    String: "name" [5980,5986]
                                    STRING [5987,6017]
                                        String: "Test suite reports artifacts" [5987,6017]
                                FIELD [6018,6040]
                                    String: "if" [6018,6022]
                                    STRING [6023,6040]
                                        String: "${{ always() }}" [6023,6040]
                                FIELD [6041,6076]
                                    String: "uses" [6041,6047]
                                    STRING [6048,6076]
                                        String: "actions/upload-artifact@v2" [6048,6076]
                                FIELD [6077,6155]
                                    String: "with" [6077,6083]
                                    OBJECT [6084,6155]
                                        FIELD [6085,6110]
                                            String: "name" [6085,6091]
                                            STRING [6092,6110]
                                                String: "run_examples_gpu" [6092,6110]
                                        FIELD [6111,6154]
                                            String: "path" [6111,6117]
                                            STRING [6118,6154]
                                                String: "/transformers/reports/examples_gpu" [6118,6154]
            FIELD [6159,7574]
                String: "run_pipelines_torch_gpu" [6159,6184]
                OBJECT [6185,7574]
                    FIELD [6186,6212]
                        String: "name" [6186,6192]
                        STRING [6193,6212]
                            String: "PyTorch pipelines" [6193,6212]
                    FIELD [6213,6306]
                        String: "strategy" [6213,6223]
                        OBJECT [6224,6306]
                            FIELD [6225,6242]
                                String: "fail-fast" [6225,6236]
                                FALSE [6237,6242]
                            FIELD [6243,6305]
                                String: "matrix" [6243,6251]
                                OBJECT [6252,6305]
                                    FIELD [6253,6304]
                                        String: "machines" [6253,6263]
                                        ARRAY [6264,6304]
                                            STRING [6265,6283]
                                                String: "multi-gpu-docker" [6265,6283]
                                            STRING [6284,6303]
                                                String: "single-gpu-docker" [6284,6303]
                    FIELD [6307,6341]
                        String: "runs-on" [6307,6316]
                        STRING [6317,6341]
                            String: "${{ matrix.machines }}" [6317,6341]
                    FIELD [6342,6499]
                        String: "container" [6342,6353]
                        OBJECT [6354,6499]
                            FIELD [6355,6401]
                                String: "image" [6355,6362]
                                STRING [6363,6401]
                                    String: "huggingface/transformers-pytorch-gpu" [6363,6401]
                            FIELD [6402,6498]
                                String: "options" [6402,6411]
                                STRING [6412,6498]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [6412,6498]
                    FIELD [6500,6515]
                        String: "needs" [6500,6507]
                        STRING [6508,6515]
                            String: "setup" [6508,6515]
                    FIELD [6516,7573]
                        String: "steps" [6516,6523]
                        ARRAY [6524,7573]
                            OBJECT [6525,6773]
                                FIELD [6526,6579]
                                    String: "name" [6526,6532]
                                    STRING [6533,6579]
                                        String: "Set machine type from ${{ matrix.machines }}" [6533,6579]
                                FIELD [6580,6594]
                                    String: "shell" [6580,6587]
                                    STRING [6588,6594]
                                        String: "bash" [6588,6594]
                                FIELD [6595,6772]
                                    String: "run" [6595,6600]
                                    STRING [6601,6772]
                                        String: "machine_type=${{ matrix.machines }}\nmachine_type=${machine_type/'-docker'/''}\necho \"machine_type=$machine_type\"\necho \"machine_type=$machine_type\" >> $GITHUB_ENV\n" [6601,6772]
                            OBJECT [6774,6885]
                                FIELD [6775,6796]
                                    String: "name" [6775,6781]
                                    STRING [6782,6796]
                                        String: "Update clone" [6782,6796]
                                FIELD [6797,6832]
                                    String: "working-directory" [6797,6816]
                                    STRING [6817,6832]
                                        String: "/transformers" [6817,6832]
                                FIELD [6833,6884]
                                    String: "run" [6833,6838]
                                    STRING [6839,6884]
                                        String: "git fetch && git checkout ${{ github.sha }}" [6839,6884]
                            OBJECT [6886,7138]
                                FIELD [6887,6925]
                                    String: "name" [6887,6893]
                                    STRING [6894,6925]
                                        String: "Run all pipeline tests on GPU" [6894,6925]
                                FIELD [6926,6961]
                                    String: "working-directory" [6926,6945]
                                    STRING [6946,6961]
                                        String: "/transformers" [6946,6961]
                                FIELD [6962,6995]
                                    String: "env" [6962,6967]
                                    OBJECT [6968,6995]
                                        FIELD [6969,6994]
                                            String: "RUN_PIPELINE_TESTS" [6969,6989]
                                            TRUE [6990,6994]
                                FIELD [6996,7137]
                                    String: "run" [6996,7001]
                                    STRING [7002,7137]
                                        String: "python3 -m pytest -n 1 -v --dist=loadfile -m is_pipeline_test --make-reports=${{ env.machine_type }}_tests_torch_pipeline_gpu tests\n" [7002,7137]
                            OBJECT [7139,7322]
                                FIELD [7140,7170]
                                    String: "name" [7140,7146]
                                    STRING [7147,7170]
                                        String: "Failure short reports" [7147,7170]
                                FIELD [7171,7194]
                                    String: "if" [7171,7175]
                                    STRING [7176,7194]
                                        String: "${{ failure() }}" [7176,7194]
                                FIELD [7195,7219]
                                    String: "continue-on-error" [7195,7214]
                                    TRUE [7215,7219]
                                FIELD [7220,7321]
                                    String: "run" [7220,7225]
                                    STRING [7226,7321]
                                        String: "cat /transformers/reports/${{ env.machine_type }}_tests_torch_pipeline_gpu/failures_short.txt" [7226,7321]
                            OBJECT [7323,7572]
                                FIELD [7324,7361]
                                    String: "name" [7324,7330]
                                    STRING [7331,7361]
                                        String: "Test suite reports artifacts" [7331,7361]
                                FIELD [7362,7384]
                                    String: "if" [7362,7366]
                                    STRING [7367,7384]
                                        String: "${{ always() }}" [7367,7384]
                                FIELD [7385,7420]
                                    String: "uses" [7385,7391]
                                    STRING [7392,7420]
                                        String: "actions/upload-artifact@v2" [7392,7420]
                                FIELD [7421,7571]
                                    String: "with" [7421,7427]
                                    OBJECT [7428,7571]
                                        FIELD [7429,7490]
                                            String: "name" [7429,7435]
                                            STRING [7436,7490]
                                                String: "${{ env.machine_type }}_run_tests_torch_pipeline_gpu" [7436,7490]
                                        FIELD [7491,7570]
                                            String: "path" [7491,7497]
                                            STRING [7498,7570]
                                                String: "/transformers/reports/${{ env.machine_type }}_tests_torch_pipeline_gpu" [7498,7570]
            FIELD [7575,8959]
                String: "run_pipelines_tf_gpu" [7575,7597]
                OBJECT [7598,8959]
                    FIELD [7599,7628]
                        String: "name" [7599,7605]
                        STRING [7606,7628]
                            String: "TensorFlow pipelines" [7606,7628]
                    FIELD [7629,7722]
                        String: "strategy" [7629,7639]
                        OBJECT [7640,7722]
                            FIELD [7641,7658]
                                String: "fail-fast" [7641,7652]
                                FALSE [7653,7658]
                            FIELD [7659,7721]
                                String: "matrix" [7659,7667]
                                OBJECT [7668,7721]
                                    FIELD [7669,7720]
                                        String: "machines" [7669,7679]
                                        ARRAY [7680,7720]
                                            STRING [7681,7699]
                                                String: "multi-gpu-docker" [7681,7699]
                                            STRING [7700,7719]
                                                String: "single-gpu-docker" [7700,7719]
                    FIELD [7723,7757]
                        String: "runs-on" [7723,7732]
                        STRING [7733,7757]
                            String: "${{ matrix.machines }}" [7733,7757]
                    FIELD [7758,7918]
                        String: "container" [7758,7769]
                        OBJECT [7770,7918]
                            FIELD [7771,7820]
                                String: "image" [7771,7778]
                                STRING [7779,7820]
                                    String: "huggingface/transformers-tensorflow-gpu" [7779,7820]
                            FIELD [7821,7917]
                                String: "options" [7821,7830]
                                STRING [7831,7917]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [7831,7917]
                    FIELD [7919,7934]
                        String: "needs" [7919,7926]
                        STRING [7927,7934]
                            String: "setup" [7927,7934]
                    FIELD [7935,8958]
                        String: "steps" [7935,7942]
                        ARRAY [7943,8958]
                            OBJECT [7944,8192]
                                FIELD [7945,7998]
                                    String: "name" [7945,7951]
                                    STRING [7952,7998]
                                        String: "Set machine type from ${{ matrix.machines }}" [7952,7998]
                                FIELD [7999,8013]
                                    String: "shell" [7999,8006]
                                    STRING [8007,8013]
                                        String: "bash" [8007,8013]
                                FIELD [8014,8191]
                                    String: "run" [8014,8019]
                                    STRING [8020,8191]
                                        String: "machine_type=${{ matrix.machines }}\nmachine_type=${machine_type/'-docker'/''}\necho \"machine_type=$machine_type\"\necho \"machine_type=$machine_type\" >> $GITHUB_ENV\n" [8020,8191]
                            OBJECT [8193,8306]
                                FIELD [8194,8215]
                                    String: "name" [8194,8200]
                                    STRING [8201,8215]
                                        String: "Update clone" [8201,8215]
                                FIELD [8216,8251]
                                    String: "working-directory" [8216,8235]
                                    STRING [8236,8251]
                                        String: "/transformers" [8236,8251]
                                FIELD [8252,8305]
                                    String: "run" [8252,8257]
                                    STRING [8258,8305]
                                        String: "git fetch && git checkout ${{ github.sha }}\n" [8258,8305]
                            OBJECT [8307,8556]
                                FIELD [8308,8346]
                                    String: "name" [8308,8314]
                                    STRING [8315,8346]
                                        String: "Run all pipeline tests on GPU" [8315,8346]
                                FIELD [8347,8382]
                                    String: "working-directory" [8347,8366]
                                    STRING [8367,8382]
                                        String: "/transformers" [8367,8382]
                                FIELD [8383,8416]
                                    String: "env" [8383,8388]
                                    OBJECT [8389,8416]
                                        FIELD [8390,8415]
                                            String: "RUN_PIPELINE_TESTS" [8390,8410]
                                            TRUE [8411,8415]
                                FIELD [8417,8555]
                                    String: "run" [8417,8422]
                                    STRING [8423,8555]
                                        String: "python3 -m pytest -n 1 -v --dist=loadfile -m is_pipeline_test --make-reports=${{ env.machine_type }}_tests_tf_pipeline_gpu tests\n" [8423,8555]
                            OBJECT [8557,8713]
                                FIELD [8558,8588]
                                    String: "name" [8558,8564]
                                    STRING [8565,8588]
                                        String: "Failure short reports" [8565,8588]
                                FIELD [8589,8611]
                                    String: "if" [8589,8593]
                                    STRING [8594,8611]
                                        String: "${{ always() }}" [8594,8611]
                                FIELD [8612,8712]
                                    String: "run" [8612,8617]
                                    STRING [8618,8712]
                                        String: "cat /transformers/reports/${{ env.machine_type }}_tests_tf_pipeline_gpu/failures_short.txt\n" [8618,8712]
                            OBJECT [8714,8957]
                                FIELD [8715,8752]
                                    String: "name" [8715,8721]
                                    STRING [8722,8752]
                                        String: "Test suite reports artifacts" [8722,8752]
                                FIELD [8753,8775]
                                    String: "if" [8753,8757]
                                    STRING [8758,8775]
                                        String: "${{ always() }}" [8758,8775]
                                FIELD [8776,8811]
                                    String: "uses" [8776,8782]
                                    STRING [8783,8811]
                                        String: "actions/upload-artifact@v2" [8783,8811]
                                FIELD [8812,8956]
                                    String: "with" [8812,8818]
                                    OBJECT [8819,8956]
                                        FIELD [8820,8878]
                                            String: "name" [8820,8826]
                                            STRING [8827,8878]
                                                String: "${{ env.machine_type }}_run_tests_tf_pipeline_gpu" [8827,8878]
                                        FIELD [8879,8955]
                                            String: "path" [8879,8885]
                                            STRING [8886,8955]
                                                String: "/transformers/reports/${{ env.machine_type }}_tests_tf_pipeline_gpu" [8886,8955]
            FIELD [8960,10844]
                String: "run_all_tests_torch_cuda_extensions_gpu" [8960,9001]
                OBJECT [9002,10844]
                    FIELD [9003,9038]
                        String: "name" [9003,9009]
                        STRING [9010,9038]
                            String: "Torch CUDA extension tests" [9010,9038]
                    FIELD [9039,9132]
                        String: "strategy" [9039,9049]
                        OBJECT [9050,9132]
                            FIELD [9051,9068]
                                String: "fail-fast" [9051,9062]
                                FALSE [9063,9068]
                            FIELD [9069,9131]
                                String: "matrix" [9069,9077]
                                OBJECT [9078,9131]
                                    FIELD [9079,9130]
                                        String: "machines" [9079,9089]
                                        ARRAY [9090,9130]
                                            STRING [9091,9109]
                                                String: "multi-gpu-docker" [9091,9109]
                                            STRING [9110,9129]
                                                String: "single-gpu-docker" [9110,9129]
                    FIELD [9133,9167]
                        String: "runs-on" [9133,9142]
                        STRING [9143,9167]
                            String: "${{ matrix.machines }}" [9143,9167]
                    FIELD [9168,9183]
                        String: "needs" [9168,9175]
                        STRING [9176,9183]
                            String: "setup" [9176,9183]
                    FIELD [9184,9360]
                        String: "container" [9184,9195]
                        OBJECT [9196,9360]
                            FIELD [9197,9260]
                                String: "image" [9197,9204]
                                STRING [9205,9260]
                                    String: "huggingface/transformers-pytorch-deepspeed-latest-gpu" [9205,9260]
                            FIELD [9261,9359]
                                String: "options" [9261,9270]
                                STRING [9271,9359]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [9271,9359]
                    FIELD [9361,10843]
                        String: "steps" [9361,9368]
                        ARRAY [9369,10843]
                            OBJECT [9370,9618]
                                FIELD [9371,9424]
                                    String: "name" [9371,9377]
                                    STRING [9378,9424]
                                        String: "Set machine type from ${{ matrix.machines }}" [9378,9424]
                                FIELD [9425,9439]
                                    String: "shell" [9425,9432]
                                    STRING [9433,9439]
                                        String: "bash" [9433,9439]
                                FIELD [9440,9617]
                                    String: "run" [9440,9445]
                                    STRING [9446,9617]
                                        String: "machine_type=${{ matrix.machines }}\nmachine_type=${machine_type/'-docker'/''}\necho \"machine_type=$machine_type\"\necho \"machine_type=$machine_type\" >> $GITHUB_ENV\n" [9446,9617]
                            OBJECT [9619,9740]
                                FIELD [9620,9641]
                                    String: "name" [9620,9626]
                                    STRING [9627,9641]
                                        String: "Update clone" [9627,9641]
                                FIELD [9642,9687]
                                    String: "working-directory" [9642,9661]
                                    STRING [9662,9687]
                                        String: "/workspace/transformers" [9662,9687]
                                FIELD [9688,9739]
                                    String: "run" [9688,9693]
                                    STRING [9694,9739]
                                        String: "git fetch && git checkout ${{ github.sha }}" [9694,9739]
                            OBJECT [9741,10144]
                                FIELD [9742,9771]
                                    String: "name" [9742,9748]
                                    STRING [9749,9771]
                                        String: "Re-compile DeepSpeed" [9749,9771]
                                FIELD [9772,9804]
                                    String: "working-directory" [9772,9791]
                                    STRING [9792,9804]
                                        String: "/workspace" [9792,9804]
                                FIELD [9805,10143]
                                    String: "run" [9805,9810]
                                    STRING [9811,10143]
                                        String: "pip install deepspeed # installs the deps correctly\nrm -rf DeepSpeed\ngit clone https://github.com/microsoft/DeepSpeed && cd DeepSpeed && rm -rf build\nDS_BUILD_CPU_ADAM=1 DS_BUILD_AIO=1 DS_BUILD_UTILS=1 python3 -m pip install -e . --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [9811,10143]
                            OBJECT [10145,10354]
                                FIELD [10146,10175]
                                    String: "name" [10146,10152]
                                    STRING [10153,10175]
                                        String: "Run all tests on GPU" [10153,10175]
                                FIELD [10176,10221]
                                    String: "working-directory" [10176,10195]
                                    STRING [10196,10221]
                                        String: "/workspace/transformers" [10196,10221]
                                FIELD [10222,10353]
                                    String: "run" [10222,10227]
                                    STRING [10228,10353]
                                        String: "python -m pytest -v --make-reports=${{ env.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [10228,10353]
                            OBJECT [10355,10555]
                                FIELD [10356,10386]
                                    String: "name" [10356,10362]
                                    STRING [10363,10386]
                                        String: "Failure short reports" [10363,10386]
                                FIELD [10387,10410]
                                    String: "if" [10387,10391]
                                    STRING [10392,10410]
                                        String: "${{ failure() }}" [10392,10410]
                                FIELD [10411,10435]
                                    String: "continue-on-error" [10411,10430]
                                    TRUE [10431,10435]
                                FIELD [10436,10554]
                                    String: "run" [10436,10441]
                                    STRING [10442,10554]
                                        String: "cat /workspace/transformers/reports/${{ env.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [10442,10554]
                            OBJECT [10556,10842]
                                FIELD [10557,10594]
                                    String: "name" [10557,10563]
                                    STRING [10564,10594]
                                        String: "Test suite reports artifacts" [10564,10594]
                                FIELD [10595,10617]
                                    String: "if" [10595,10599]
                                    STRING [10600,10617]
                                        String: "${{ always() }}" [10600,10617]
                                FIELD [10618,10653]
                                    String: "uses" [10618,10624]
                                    STRING [10625,10653]
                                        String: "actions/upload-artifact@v2" [10625,10653]
                                FIELD [10654,10841]
                                    String: "with" [10654,10660]
                                    OBJECT [10661,10841]
                                        FIELD [10662,10743]
                                            String: "name" [10662,10668]
                                            STRING [10669,10743]
                                                String: "${{ env.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [10669,10743]
                                        FIELD [10744,10840]
                                            String: "path" [10744,10750]
                                            STRING [10751,10840]
                                                String: "/workspace/transformers/reports/${{ env.machine_type }}_tests_torch_cuda_extensions_gpu" [10751,10840]
            FIELD [10845,11624]
                String: "send_results" [10845,10859]
                OBJECT [10860,11624]
                    FIELD [10861,10893]
                        String: "name" [10861,10867]
                        STRING [10868,10893]
                            String: "Send results to webhook" [10868,10893]
                    FIELD [10894,10919]
                        String: "runs-on" [10894,10903]
                        STRING [10904,10919]
                            String: "ubuntu-latest" [10904,10919]
                    FIELD [10920,10935]
                        String: "if" [10920,10924]
                        STRING [10925,10935]
                            String: "always()" [10925,10935]
                    FIELD [10936,11108]
                        String: "needs" [10936,10943]
                        ARRAY [10944,11108]
                            STRING [10945,10952]
                                String: "setup" [10945,10952]
                            STRING [10953,10975]
                                String: "run_tests_single_gpu" [10953,10975]
                            STRING [10976,10997]
                                String: "run_tests_multi_gpu" [10976,10997]
                            STRING [10998,11016]
                                String: "run_examples_gpu" [10998,11016]
                            STRING [11017,11039]
                                String: "run_pipelines_tf_gpu" [11017,11039]
                            STRING [11040,11065]
                                String: "run_pipelines_torch_gpu" [11040,11065]
                            STRING [11066,11107]
                                String: "run_all_tests_torch_cuda_extensions_gpu" [11066,11107]
                    FIELD [11109,11623]
                        String: "steps" [11109,11116]
                        ARRAY [11117,11623]
                            OBJECT [11118,11148]
                                FIELD [11119,11147]
                                    String: "uses" [11119,11125]
                                    STRING [11126,11147]
                                        String: "actions/checkout@v2" [11126,11147]
                            OBJECT [11149,11188]
                                FIELD [11150,11187]
                                    String: "uses" [11150,11156]
                                    STRING [11157,11187]
                                        String: "actions/download-artifact@v2" [11157,11187]
                            OBJECT [11189,11622]
                                FIELD [11190,11220]
                                    String: "name" [11190,11196]
                                    STRING [11197,11220]
                                        String: "Send message to Slack" [11197,11220]
                                FIELD [11221,11515]
                                    String: "env" [11221,11226]
                                    OBJECT [11227,11515]
                                        FIELD [11228,11284]
                                            String: "CI_SLACK_BOT_TOKEN" [11228,11248]
                                            STRING [11249,11284]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [11249,11284]
                                        FIELD [11285,11343]
                                            String: "CI_SLACK_CHANNEL_ID" [11285,11306]
                                            STRING [11307,11343]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [11307,11343]
                                        FIELD [11344,11414]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [11344,11371]
                                            STRING [11372,11414]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [11372,11414]
                                        FIELD [11415,11491]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [11415,11445]
                                            STRING [11446,11491]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [11446,11491]
                                        FIELD [11492,11514]
                                            String: "CI_EVENT" [11492,11502]
                                            STRING [11503,11514]
                                                String: "scheduled" [11503,11514]
                                FIELD [11516,11621]
                                    String: "run" [11516,11521]
                                    STRING [11522,11621]
                                        String: "pip install slack_sdk\npython utils/notification_service.py \"${{ needs.setup.outputs.matrix }}\"" [11522,11621]