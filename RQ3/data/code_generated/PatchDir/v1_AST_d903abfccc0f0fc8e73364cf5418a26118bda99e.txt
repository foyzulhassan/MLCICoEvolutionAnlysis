OBJECT [0,10517]
    FIELD [1,43]
        String: "name" [1,7]
        STRING [8,43]
            String: "Self-hosted runner AMD GPU (push)" [8,43]
    FIELD [44,126]
        String: "on" [44,48]
        OBJECT [49,126]
            FIELD [50,125]
                String: "workflow_call" [50,65]
                OBJECT [66,125]
                    FIELD [67,124]
                        String: "inputs" [67,75]
                        OBJECT [76,124]
                            FIELD [77,123]
                                String: "gpu_flavor" [77,89]
                                OBJECT [90,123]
                                    FIELD [91,106]
                                        String: "required" [91,101]
                                        TRUE [102,106]
                                    FIELD [107,122]
                                        String: "type" [107,113]
                                        STRING [114,122]
                                            String: "string" [114,122]
    FIELD [127,302]
        String: "env" [127,132]
        OBJECT [133,302]
            FIELD [134,156]
                String: "HF_HOME" [134,143]
                STRING [144,156]
                    String: "/mnt/cache" [144,156]
            FIELD [157,182]
                String: "TRANSFORMERS_IS_CI" [157,177]
                TRUE [178,182]
            FIELD [183,202]
                String: "OMP_NUM_THREADS" [183,200]
                NUMBER [201,202]
                    Number: 8 [201,202]
            FIELD [203,222]
                String: "MKL_NUM_THREADS" [203,220]
                NUMBER [221,222]
                    Number: 8 [221,222]
            FIELD [223,242]
                String: "PYTEST_TIMEOUT" [223,239]
                NUMBER [240,242]
                    Number: 60 [240,242]
            FIELD [243,275]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [243,270]
                TRUE [271,275]
            FIELD [276,301]
                String: "RUN_PT_TF_CROSS_TESTS" [276,299]
                NUMBER [300,301]
                    Number: 1 [300,301]
    FIELD [303,10516]
        String: "jobs" [303,309]
        OBJECT [310,10516]
            FIELD [311,666]
                String: "check_runner_status" [311,332]
                OBJECT [333,666]
                    FIELD [334,362]
                        String: "name" [334,340]
                        STRING [341,362]
                            String: "Check Runner Status" [341,362]
                    FIELD [363,387]
                        String: "runs-on" [363,372]
                        STRING [373,387]
                            String: "ubuntu-22.04" [373,387]
                    FIELD [388,665]
                        String: "steps" [388,395]
                        ARRAY [396,665]
                            OBJECT [397,483]
                                FIELD [398,428]
                                    String: "name" [398,404]
                                    STRING [405,428]
                                        String: "Checkout transformers" [405,428]
                                FIELD [429,457]
                                    String: "uses" [429,435]
                                    STRING [436,457]
                                        String: "actions/checkout@v3" [436,457]
                                FIELD [458,482]
                                    String: "with" [458,464]
                                    OBJECT [465,482]
                                        FIELD [466,481]
                                            String: "fetch-depth" [466,479]
                                            NUMBER [480,481]
                                                Number: 2 [480,481]
                            OBJECT [484,664]
                                FIELD [485,513]
                                    String: "name" [485,491]
                                    STRING [492,513]
                                        String: "Check Runner Status" [492,513]
                                FIELD [514,663]
                                    String: "run" [514,519]
                                    STRING [520,663]
                                        String: "python utils/check_self_hosted_runner.py --target_runners amd-mi210-single-gpu-ci-runner-docker --token ${{ secrets.ACCESS_REPO_INFO_TOKEN }}" [520,663]
            FIELD [667,1325]
                String: "check_runners" [667,682]
                OBJECT [683,1325]
                    FIELD [684,706]
                        String: "name" [684,690]
                        STRING [691,706]
                            String: "Check Runners" [691,706]
                    FIELD [707,736]
                        String: "needs" [707,714]
                        STRING [715,736]
                            String: "check_runner_status" [715,736]
                    FIELD [737,802]
                        String: "strategy" [737,747]
                        OBJECT [748,802]
                            FIELD [749,801]
                                String: "matrix" [749,757]
                                OBJECT [758,801]
                                    FIELD [759,800]
                                        String: "machine_type" [759,773]
                                        ARRAY [774,800]
                                            STRING [775,787]
                                                String: "single-gpu" [775,787]
                                            STRING [788,799]
                                                String: "multi-gpu" [788,799]
                    FIELD [803,907]
                        String: "runs-on" [803,812]
                        ARRAY [813,907]
                            STRING [814,827]
                                String: "self-hosted" [814,827]
                            STRING [828,840]
                                String: "docker-gpu" [828,840]
                            STRING [841,850]
                                String: "amd-gpu" [841,850]
                            STRING [851,879]
                                String: "${{ matrix.machine_type }}" [851,879]
                            STRING [880,906]
                                String: "${{ inputs.gpu_flavor }}" [880,906]
                    FIELD [908,1131]
                        String: "container" [908,919]
                        OBJECT [920,1131]
                            FIELD [921,979]
                                String: "image" [921,928]
                                STRING [929,979]
                                    String: "huggingface/transformers-pytorch-amd-gpu-push-ci" [929,979]
                            FIELD [980,1130]
                                String: "options" [980,989]
                                STRING [990,1130]
                                    String: "--device /dev/kfd --device /dev/dri --env ROCR_VISIBLE_DEVICES --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [990,1130]
                    FIELD [1132,1324]
                        String: "steps" [1132,1139]
                        ARRAY [1140,1324]
                            OBJECT [1141,1179]
                                FIELD [1142,1159]
                                    String: "name" [1142,1148]
                                    STRING [1149,1159]
                                        String: "ROCM-SMI" [1149,1159]
                                FIELD [1160,1178]
                                    String: "run" [1160,1165]
                                    STRING [1166,1178]
                                        String: "rocm-smi\n" [1166,1178]
                            OBJECT [1180,1243]
                                FIELD [1181,1199]
                                    String: "name" [1181,1187]
                                    STRING [1188,1199]
                                        String: "ROCM-INFO" [1188,1199]
                                FIELD [1200,1242]
                                    String: "run" [1200,1205]
                                    STRING [1206,1242]
                                        String: "rocminfo  | grep \"Agent\" -A 14\n" [1206,1242]
                            OBJECT [1244,1323]
                                FIELD [1245,1275]
                                    String: "name" [1245,1251]
                                    STRING [1252,1275]
                                        String: "Show ROCR environment" [1252,1275]
                                FIELD [1276,1322]
                                    String: "run" [1276,1281]
                                    STRING [1282,1322]
                                        String: "echo \"ROCR: $ROCR_VISIBLE_DEVICES\"\n" [1282,1322]
            FIELD [1326,4323]
                String: "setup_gpu" [1326,1337]
                OBJECT [1338,4323]
                    FIELD [1339,1353]
                        String: "name" [1339,1345]
                        STRING [1346,1353]
                            String: "Setup" [1346,1353]
                    FIELD [1354,1377]
                        String: "needs" [1354,1361]
                        STRING [1362,1377]
                            String: "check_runners" [1362,1377]
                    FIELD [1378,1443]
                        String: "strategy" [1378,1388]
                        OBJECT [1389,1443]
                            FIELD [1390,1442]
                                String: "matrix" [1390,1398]
                                OBJECT [1399,1442]
                                    FIELD [1400,1441]
                                        String: "machine_type" [1400,1414]
                                        ARRAY [1415,1441]
                                            STRING [1416,1428]
                                                String: "single-gpu" [1416,1428]
                                            STRING [1429,1440]
                                                String: "multi-gpu" [1429,1440]
                    FIELD [1444,1548]
                        String: "runs-on" [1444,1453]
                        ARRAY [1454,1548]
                            STRING [1455,1468]
                                String: "self-hosted" [1455,1468]
                            STRING [1469,1481]
                                String: "docker-gpu" [1469,1481]
                            STRING [1482,1491]
                                String: "amd-gpu" [1482,1491]
                            STRING [1492,1520]
                                String: "${{ matrix.machine_type }}" [1492,1520]
                            STRING [1521,1547]
                                String: "${{ inputs.gpu_flavor }}" [1521,1547]
                    FIELD [1549,1772]
                        String: "container" [1549,1560]
                        OBJECT [1561,1772]
                            FIELD [1562,1620]
                                String: "image" [1562,1569]
                                STRING [1570,1620]
                                    String: "huggingface/transformers-pytorch-amd-gpu-push-ci" [1570,1620]
                            FIELD [1621,1771]
                                String: "options" [1621,1630]
                                STRING [1631,1771]
                                    String: "--device /dev/kfd --device /dev/dri --env ROCR_VISIBLE_DEVICES --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1631,1771]
                    FIELD [1773,1888]
                        String: "outputs" [1773,1782]
                        OBJECT [1783,1888]
                            FIELD [1784,1833]
                                String: "matrix" [1784,1792]
                                STRING [1793,1833]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [1793,1833]
                            FIELD [1834,1887]
                                String: "test_map" [1834,1844]
                                STRING [1845,1887]
                                    String: "${{ steps.set-matrix.outputs.test_map }}" [1845,1887]
                    FIELD [1889,4322]
                        String: "steps" [1889,1896]
                        ARRAY [1897,4322]
                            OBJECT [1898,2615]
                                FIELD [1899,1944]
                                    String: "name" [1899,1905]
                                    STRING [1906,1944]
                                        String: "Prepare custom environment variables" [1906,1944]
                                FIELD [1945,1959]
                                    String: "shell" [1945,1952]
                                    STRING [1953,1959]
                                        String: "bash" [1953,1959]
                                FIELD [1960,2614]
                                    String: "run" [1960,1965]
                                    STRING [1966,2614]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [1966,2614]
                            OBJECT [2616,2751]
                                FIELD [2617,2653]
                                    String: "name" [2617,2623]
                                    STRING [2624,2653]
                                        String: "print environment variables" [2624,2653]
                                FIELD [2654,2750]
                                    String: "run" [2654,2659]
                                    STRING [2660,2750]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [2660,2750]
                            OBJECT [2752,3073]
                                FIELD [2753,2802]
                                    String: "name" [2753,2759]
                                    STRING [2760,2802]
                                        String: "Update clone using environment variables" [2760,2802]
                                FIELD [2803,2838]
                                    String: "working-directory" [2803,2822]
                                    STRING [2823,2838]
                                        String: "/transformers" [2823,2838]
                                FIELD [2839,3072]
                                    String: "run" [2839,2844]
                                    STRING [2845,3072]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [2845,3072]
                            OBJECT [3074,3212]
                                FIELD [3075,3091]
                                    String: "name" [3075,3081]
                                    STRING [3082,3091]
                                        String: "Cleanup" [3082,3091]
                                FIELD [3092,3127]
                                    String: "working-directory" [3092,3111]
                                    STRING [3112,3127]
                                        String: "/transformers" [3112,3127]
                                FIELD [3128,3211]
                                    String: "run" [3128,3133]
                                    STRING [3134,3211]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [3134,3211]
                            OBJECT [3213,3322]
                                FIELD [3214,3266]
                                    String: "name" [3214,3220]
                                    STRING [3221,3266]
                                        String: "Show installed libraries and their versions" [3221,3266]
                                FIELD [3267,3302]
                                    String: "working-directory" [3267,3286]
                                    STRING [3287,3302]
                                        String: "/transformers" [3287,3302]
                                FIELD [3303,3321]
                                    String: "run" [3303,3308]
                                    STRING [3309,3321]
                                        String: "pip freeze" [3309,3321]
                            OBJECT [3323,3518]
                                FIELD [3324,3355]
                                    String: "name" [3324,3330]
                                    STRING [3331,3355]
                                        String: "Fetch the tests to run" [3331,3355]
                                FIELD [3356,3391]
                                    String: "working-directory" [3356,3375]
                                    STRING [3376,3391]
                                        String: "/transformers" [3376,3391]
                                FIELD [3392,3517]
                                    String: "run" [3392,3397]
                                    STRING [3398,3517]
                                        String: "pip install --upgrade git-python\npython3 utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [3398,3517]
                            OBJECT [3519,3661]
                                FIELD [3520,3549]
                                    String: "name" [3520,3526]
                                    STRING [3527,3549]
                                        String: "Report fetched tests" [3527,3549]
                                FIELD [3550,3585]
                                    String: "uses" [3550,3556]
                                    STRING [3557,3585]
                                        String: "actions/upload-artifact@v3" [3557,3585]
                                FIELD [3586,3660]
                                    String: "with" [3586,3592]
                                    OBJECT [3593,3660]
                                        FIELD [3594,3615]
                                            String: "name" [3594,3600]
                                            STRING [3601,3615]
                                                String: "test_fetched" [3601,3615]
                                        FIELD [3616,3659]
                                            String: "path" [3616,3622]
                                            STRING [3623,3659]
                                                String: "/transformers/test_preparation.txt" [3623,3659]
                            OBJECT [3662,4321]
                                FIELD [3663,3680]
                                    String: "id" [3663,3667]
                                    STRING [3668,3680]
                                        String: "set-matrix" [3668,3680]
                                FIELD [3681,3716]
                                    String: "name" [3681,3687]
                                    STRING [3688,3716]
                                        String: "Organize tests into models" [3688,3716]
                                FIELD [3717,3752]
                                    String: "working-directory" [3717,3736]
                                    STRING [3737,3752]
                                        String: "/transformers" [3737,3752]
                                FIELD [3753,4320]
                                    String: "run" [3753,3758]
                                    STRING [3759,4320]
                                        String: "if [ -f test_map.json ]; then\n    keys=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); d = list(test_map.keys()); print(d)')\n    test_map=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); print(test_map)')\nelse\n    keys=$(python3 -c 'keys = [\"dummy\"]; print(keys)')\n    test_map=$(python3 -c 'test_map = {\"dummy\": []}; print(test_map)')\nfi\necho $keys\necho $test_map\necho \"matrix=$keys\" >> $GITHUB_OUTPUT\necho \"test_map=$test_map\" >> $GITHUB_OUTPUT\n" [3759,4320]
            FIELD [4324,7838]
                String: "run_tests_amdgpu" [4324,4342]
                OBJECT [4343,7838]
                    FIELD [4344,4364]
                        String: "name" [4344,4350]
                        STRING [4351,4364]
                            String: "Model tests" [4351,4364]
                    FIELD [4365,4384]
                        String: "needs" [4365,4372]
                        STRING [4373,4384]
                            String: "setup_gpu" [4373,4384]
                    FIELD [4385,4459]
                        String: "if" [4385,4389]
                        STRING [4390,4459]
                            String: "contains(fromJson(needs.setup_gpu.outputs.matrix), 'dummy') != true" [4390,4459]
                    FIELD [4460,4603]
                        String: "strategy" [4460,4470]
                        OBJECT [4471,4603]
                            FIELD [4472,4489]
                                String: "fail-fast" [4472,4483]
                                FALSE [4484,4489]
                            FIELD [4490,4602]
                                String: "matrix" [4490,4498]
                                OBJECT [4499,4602]
                                    FIELD [4500,4559]
                                        String: "folders" [4500,4509]
                                        STRING [4510,4559]
                                            String: "${{ fromJson(needs.setup_gpu.outputs.matrix) }}" [4510,4559]
                                    FIELD [4560,4601]
                                        String: "machine_type" [4560,4574]
                                        ARRAY [4575,4601]
                                            STRING [4576,4588]
                                                String: "single-gpu" [4576,4588]
                                            STRING [4589,4600]
                                                String: "multi-gpu" [4589,4600]
                    FIELD [4604,4708]
                        String: "runs-on" [4604,4613]
                        ARRAY [4614,4708]
                            STRING [4615,4628]
                                String: "self-hosted" [4615,4628]
                            STRING [4629,4641]
                                String: "docker-gpu" [4629,4641]
                            STRING [4642,4651]
                                String: "amd-gpu" [4642,4651]
                            STRING [4652,4680]
                                String: "${{ matrix.machine_type }}" [4652,4680]
                            STRING [4681,4707]
                                String: "${{ inputs.gpu_flavor }}" [4681,4707]
                    FIELD [4709,4932]
                        String: "container" [4709,4720]
                        OBJECT [4721,4932]
                            FIELD [4722,4780]
                                String: "image" [4722,4729]
                                STRING [4730,4780]
                                    String: "huggingface/transformers-pytorch-amd-gpu-push-ci" [4730,4780]
                            FIELD [4781,4931]
                                String: "options" [4781,4790]
                                STRING [4791,4931]
                                    String: "--device /dev/kfd --device /dev/dri --env ROCR_VISIBLE_DEVICES --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [4791,4931]
                    FIELD [4933,7837]
                        String: "steps" [4933,4940]
                        ARRAY [4941,7837]
                            OBJECT [4942,5659]
                                FIELD [4943,4988]
                                    String: "name" [4943,4949]
                                    STRING [4950,4988]
                                        String: "Prepare custom environment variables" [4950,4988]
                                FIELD [4989,5003]
                                    String: "shell" [4989,4996]
                                    STRING [4997,5003]
                                        String: "bash" [4997,5003]
                                FIELD [5004,5658]
                                    String: "run" [5004,5009]
                                    STRING [5010,5658]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [5010,5658]
                            OBJECT [5660,5795]
                                FIELD [5661,5697]
                                    String: "name" [5661,5667]
                                    STRING [5668,5697]
                                        String: "print environment variables" [5668,5697]
                                FIELD [5698,5794]
                                    String: "run" [5698,5703]
                                    STRING [5704,5794]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [5704,5794]
                            OBJECT [5796,6117]
                                FIELD [5797,5846]
                                    String: "name" [5797,5803]
                                    STRING [5804,5846]
                                        String: "Update clone using environment variables" [5804,5846]
                                FIELD [5847,5882]
                                    String: "working-directory" [5847,5866]
                                    STRING [5867,5882]
                                        String: "/transformers" [5867,5882]
                                FIELD [5883,6116]
                                    String: "run" [5883,5888]
                                    STRING [5889,6116]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [5889,6116]
                            OBJECT [6118,6333]
                                FIELD [6119,6216]
                                    String: "name" [6119,6125]
                                    STRING [6126,6216]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [6126,6216]
                                FIELD [6217,6252]
                                    String: "working-directory" [6217,6236]
                                    STRING [6237,6252]
                                        String: "/transformers" [6237,6252]
                                FIELD [6253,6332]
                                    String: "run" [6253,6258]
                                    STRING [6259,6332]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [6259,6332]
                            OBJECT [6334,6684]
                                FIELD [6335,6377]
                                    String: "name" [6335,6341]
                                    STRING [6342,6377]
                                        String: "Echo folder ${{ matrix.folders }}" [6342,6377]
                                FIELD [6378,6392]
                                    String: "shell" [6378,6385]
                                    STRING [6386,6392]
                                        String: "bash" [6386,6392]
                                FIELD [6393,6683]
                                    String: "run" [6393,6398]
                                    STRING [6399,6683]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup_gpu.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [6399,6683]
                            OBJECT [6685,6723]
                                FIELD [6686,6703]
                                    String: "name" [6686,6692]
                                    STRING [6693,6703]
                                        String: "ROCM-SMI" [6693,6703]
                                FIELD [6704,6722]
                                    String: "run" [6704,6709]
                                    STRING [6710,6722]
                                        String: "rocm-smi\n" [6710,6722]
                            OBJECT [6724,6787]
                                FIELD [6725,6743]
                                    String: "name" [6725,6731]
                                    STRING [6732,6743]
                                        String: "ROCM-INFO" [6732,6743]
                                FIELD [6744,6786]
                                    String: "run" [6744,6749]
                                    STRING [6750,6786]
                                        String: "rocminfo  | grep \"Agent\" -A 14\n" [6750,6786]
                            OBJECT [6788,6867]
                                FIELD [6789,6819]
                                    String: "name" [6789,6795]
                                    STRING [6796,6819]
                                        String: "Show ROCR environment" [6796,6819]
                                FIELD [6820,6866]
                                    String: "run" [6820,6825]
                                    STRING [6826,6866]
                                        String: "echo \"ROCR: $ROCR_VISIBLE_DEVICES\"\n" [6826,6866]
                            OBJECT [6868,6963]
                                FIELD [6869,6889]
                                    String: "name" [6869,6875]
                                    STRING [6876,6889]
                                        String: "Environment" [6876,6889]
                                FIELD [6890,6925]
                                    String: "working-directory" [6890,6909]
                                    STRING [6910,6925]
                                        String: "/transformers" [6910,6925]
                                FIELD [6926,6962]
                                    String: "run" [6926,6931]
                                    STRING [6932,6962]
                                        String: "python3 utils/print_env.py\n" [6932,6962]
                            OBJECT [6964,7073]
                                FIELD [6965,7017]
                                    String: "name" [6965,6971]
                                    STRING [6972,7017]
                                        String: "Show installed libraries and their versions" [6972,7017]
                                FIELD [7018,7053]
                                    String: "working-directory" [7018,7037]
                                    STRING [7038,7053]
                                        String: "/transformers" [7038,7053]
                                FIELD [7054,7072]
                                    String: "run" [7054,7059]
                                    STRING [7060,7072]
                                        String: "pip freeze" [7060,7072]
                            OBJECT [7074,7351]
                                FIELD [7075,7122]
                                    String: "name" [7075,7081]
                                    STRING [7082,7122]
                                        String: "Run all non-slow selected tests on GPU" [7082,7122]
                                FIELD [7123,7158]
                                    String: "working-directory" [7123,7142]
                                    STRING [7143,7158]
                                        String: "/transformers" [7143,7158]
                                FIELD [7159,7350]
                                    String: "run" [7159,7164]
                                    STRING [7165,7350]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup_gpu.outputs.test_map)[matrix.folders] }}\n" [7165,7350]
                            OBJECT [7352,7545]
                                FIELD [7353,7383]
                                    String: "name" [7353,7359]
                                    STRING [7360,7383]
                                        String: "Failure short reports" [7360,7383]
                                FIELD [7384,7407]
                                    String: "if" [7384,7388]
                                    STRING [7389,7407]
                                        String: "${{ failure() }}" [7389,7407]
                                FIELD [7408,7432]
                                    String: "continue-on-error" [7408,7427]
                                    TRUE [7428,7432]
                                FIELD [7433,7544]
                                    String: "run" [7433,7438]
                                    STRING [7439,7544]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [7439,7544]
                            OBJECT [7546,7836]
                                FIELD [7547,7584]
                                    String: "name" [7547,7553]
                                    STRING [7554,7584]
                                        String: "Test suite reports artifacts" [7554,7584]
                                FIELD [7585,7607]
                                    String: "if" [7585,7589]
                                    STRING [7590,7607]
                                        String: "${{ always() }}" [7590,7607]
                                FIELD [7608,7643]
                                    String: "uses" [7608,7614]
                                    STRING [7615,7643]
                                        String: "actions/upload-artifact@v3" [7615,7643]
                                FIELD [7644,7835]
                                    String: "with" [7644,7650]
                                    OBJECT [7651,7835]
                                        FIELD [7652,7744]
                                            String: "name" [7652,7658]
                                            STRING [7659,7744]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [7659,7744]
                                        FIELD [7745,7834]
                                            String: "path" [7745,7751]
                                            STRING [7752,7834]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [7752,7834]
            FIELD [7839,10515]
                String: "send_results" [7839,7853]
                OBJECT [7854,10515]
                    FIELD [7855,7887]
                        String: "name" [7855,7861]
                        STRING [7862,7887]
                            String: "Send results to webhook" [7862,7887]
                    FIELD [7888,7912]
                        String: "runs-on" [7888,7897]
                        STRING [7898,7912]
                            String: "ubuntu-22.04" [7898,7912]
                    FIELD [7913,7928]
                        String: "if" [7913,7917]
                        STRING [7918,7928]
                            String: "always()" [7918,7928]
                    FIELD [7929,8007]
                        String: "needs" [7929,7936]
                        ARRAY [7937,8007]
                            STRING [7938,7959]
                                String: "check_runner_status" [7938,7959]
                            STRING [7960,7975]
                                String: "check_runners" [7960,7975]
                            STRING [7976,7987]
                                String: "setup_gpu" [7976,7987]
                            STRING [7988,8006]
                                String: "run_tests_amdgpu" [7988,8006]
                    FIELD [8008,10514]
                        String: "steps" [8008,8015]
                        ARRAY [8016,10514]
                            OBJECT [8017,8258]
                                FIELD [8018,8049]
                                    String: "name" [8018,8024]
                                    STRING [8025,8049]
                                        String: "Preliminary job status" [8025,8049]
                                FIELD [8050,8064]
                                    String: "shell" [8050,8057]
                                    STRING [8058,8064]
                                        String: "bash" [8058,8064]
                                FIELD [8065,8257]
                                    String: "run" [8065,8070]
                                    STRING [8071,8257]
                                        String: "echo \"Runner availability: ${{ needs.check_runner_status.result }}\"\necho \"Setup status: ${{ needs.setup_gpu.result }}\"\necho \"Runner status: ${{ needs.check_runners.result }}\"\n" [8071,8257]
                            OBJECT [8259,8976]
                                FIELD [8260,8305]
                                    String: "name" [8260,8266]
                                    STRING [8267,8305]
                                        String: "Prepare custom environment variables" [8267,8305]
                                FIELD [8306,8320]
                                    String: "shell" [8306,8313]
                                    STRING [8314,8320]
                                        String: "bash" [8314,8320]
                                FIELD [8321,8975]
                                    String: "run" [8321,8326]
                                    STRING [8327,8975]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [8327,8975]
                            OBJECT [8977,9112]
                                FIELD [8978,9014]
                                    String: "name" [8978,8984]
                                    STRING [8985,9014]
                                        String: "print environment variables" [8985,9014]
                                FIELD [9015,9111]
                                    String: "run" [9015,9020]
                                    STRING [9021,9111]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [9021,9111]
                            OBJECT [9113,9169]
                                FIELD [9114,9142]
                                    String: "uses" [9114,9120]
                                    STRING [9121,9142]
                                        String: "actions/checkout@v3" [9121,9142]
                                FIELD [9143,9168]
                                    String: "with" [9143,9149]
                                    OBJECT [9150,9168]
                                        FIELD [9151,9167]
                                            String: "fetch-depth" [9151,9164]
                                            NUMBER [9165,9167]
                                                Number: 20 [9165,9167]
                            OBJECT [9170,9455]
                                FIELD [9171,9220]
                                    String: "name" [9171,9177]
                                    STRING [9178,9220]
                                        String: "Update clone using environment variables" [9178,9220]
                                FIELD [9221,9454]
                                    String: "run" [9221,9226]
                                    STRING [9227,9454]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [9227,9454]
                            OBJECT [9456,9495]
                                FIELD [9457,9494]
                                    String: "uses" [9457,9463]
                                    STRING [9464,9494]
                                        String: "actions/download-artifact@v3" [9464,9494]
                            OBJECT [9496,10513]
                                FIELD [9497,9527]
                                    String: "name" [9497,9503]
                                    STRING [9504,9527]
                                        String: "Send message to Slack" [9504,9527]
                                FIELD [9528,10382]
                                    String: "env" [9528,9533]
                                    OBJECT [9534,10382]
                                        FIELD [9535,9591]
                                            String: "CI_SLACK_BOT_TOKEN" [9535,9555]
                                            STRING [9556,9591]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [9556,9591]
                                        FIELD [9592,9650]
                                            String: "CI_SLACK_CHANNEL_ID" [9592,9613]
                                            STRING [9614,9650]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [9614,9650]
                                        FIELD [9651,9721]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [9651,9678]
                                            STRING [9679,9721]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [9679,9721]
                                        FIELD [9722,9788]
                                            String: "CI_SLACK_CHANNEL_ID_AMD" [9722,9747]
                                            STRING [9748,9788]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_AMD }}" [9748,9788]
                                        FIELD [9789,9865]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [9789,9819]
                                            STRING [9820,9865]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [9820,9865]
                                        FIELD [9866,9935]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [9866,9894]
                                            STRING [9895,9935]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_AMD }}" [9895,9935]
                                        FIELD [9936,10000]
                                            String: "ACCESS_REPO_INFO_TOKEN" [9936,9960]
                                            STRING [9961,10000]
                                                String: "${{ secrets.ACCESS_REPO_INFO_TOKEN }}" [9961,10000]
                                        FIELD [10001,10054]
                                            String: "CI_EVENT" [10001,10011]
                                            STRING [10012,10054]
                                                String: "Push CI (AMD) - ${{ inputs.gpu_flavor }}" [10012,10054]
                                        FIELD [10055,10112]
                                            String: "CI_TITLE_PUSH" [10055,10070]
                                            STRING [10071,10112]
                                                String: "${{ github.event.head_commit.message }}" [10071,10112]
                                        FIELD [10113,10191]
                                            String: "CI_TITLE_WORKFLOW_RUN" [10113,10136]
                                            STRING [10137,10191]
                                                String: "${{ github.event.workflow_run.head_commit.message }}" [10137,10191]
                                        FIELD [10192,10220]
                                            String: "CI_SHA" [10192,10200]
                                            STRING [10201,10220]
                                                String: "${{ env.CI_SHA }}" [10201,10220]
                                        FIELD [10221,10278]
                                            String: "RUNNER_STATUS" [10221,10236]
                                            STRING [10237,10278]
                                                String: "${{ needs.check_runner_status.result }}" [10237,10278]
                                        FIELD [10279,10334]
                                            String: "RUNNER_ENV_STATUS" [10279,10298]
                                            STRING [10299,10334]
                                                String: "${{ needs.check_runners.result }}" [10299,10334]
                                        FIELD [10335,10381]
                                            String: "SETUP_STATUS" [10335,10349]
                                            STRING [10350,10381]
                                                String: "${{ needs.setup_gpu.result }}" [10350,10381]
                                FIELD [10383,10512]
                                    String: "run" [10383,10388]
                                    STRING [10389,10512]
                                        String: "pip install slack_sdk\npip show slack_sdk\npython utils/notification_service.py \"${{ needs.setup_gpu.outputs.matrix }}\"" [10389,10512]