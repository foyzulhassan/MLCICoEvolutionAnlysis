OBJECT [0,3039]
    FIELD [1,14]
        String: "name" [1,7]
        STRING [8,14]
            String: "Docs" [8,14]
    FIELD [15,182]
        String: "on" [15,19]
        OBJECT [20,182]
            FIELD [21,40]
                String: "pull_request" [21,35]
                NULL [36,40]
            FIELD [41,156]
                String: "push" [41,47]
                OBJECT [48,156]
                    FIELD [49,90]
                        String: "branches" [49,59]
                        ARRAY [60,90]
                            STRING [61,70]
                                String: "nightly" [61,70]
                            STRING [71,77]
                                String: "main" [71,77]
                            STRING [78,89]
                                String: "release/*" [78,89]
                    FIELD [91,155]
                        String: "tags" [91,97]
                        ARRAY [98,155]
                            STRING [99,121]
                                String: "v[0-9]+.[0-9]+.[0-9]" [99,121]
                            STRING [122,154]
                                String: "v[0-9]+.[0-9]+.[0-9]+-rc[0-9]+" [122,154]
            FIELD [157,181]
                String: "workflow_dispatch" [157,176]
                NULL [177,181]
    FIELD [183,3038]
        String: "jobs" [183,189]
        OBJECT [190,3038]
            FIELD [191,1540]
                String: "build" [191,198]
                OBJECT [199,1540]
                    FIELD [200,264]
                        String: "uses" [200,206]
                        STRING [207,264]
                            String: "pytorch/test-infra/.github/workflows/linux_job.yml@main" [207,264]
                    FIELD [265,1539]
                        String: "with" [265,271]
                        OBJECT [272,1539]
                            FIELD [273,302]
                                String: "repository" [273,285]
                                STRING [286,302]
                                    String: "pytorch/vision" [286,302]
                            FIELD [303,327]
                                String: "upload-artifact" [303,320]
                                STRING [321,327]
                                    String: "docs" [321,327]
                            FIELD [328,1538]
                                String: "script" [328,336]
                                STRING [337,1538]
                                    String: "set -euo pipefail\n\nexport PYTHON_VERSION=3.8\nexport GPU_ARCH_TYPE=cpu\nexport GPU_ARCH_VERSION=''\n./.github/scripts/setup-env.sh\n\n# Prepare conda\nCONDA_PATH=$(which conda)\neval \"$(${CONDA_PATH} shell.bash hook)\"\nconda activate ci\n# FIXME: not sure why we need this. `ldd torchvision/video_reader.so` shows that it\n#  already links against the one pulled from conda. However, at runtime it pulls from\n#  /lib64\n# Should we maybe always do this in `./.github/scripts/setup-env.sh` so that we don't\n# have to pay attention in all other workflows?\nexport LD_LIBRARY_PATH=\"${CONDA_PREFIX}/lib:${LD_LIBRARY_PATH}\"\n\ncd docs\n\necho '::group::Install doc requirements'\npip install --progress-bar=off -r requirements.txt\necho '::endgroup::'\n\n# The runner does not have sufficient memory to run with as many processes as there are\n# cores (`-j auto`). Thus, we limit to a single process (`-j 1`) here.\nsed -i -e 's/-j auto/-j 1/' Makefile\nmake html\n\ncp -r build/html \"${RUNNER_ARTIFACT_DIR}\"\n\n# On PRs we also want to upload the docs into our S3 bucket for preview.\nif [[ ${{ github.event_name == 'pull_request' }} ]]; then\n  cp -r build/html/* \"${RUNNER_DOCS_DIR}\"\nfi\n" [337,1538]
            FIELD [1541,3037]
                String: "upload" [1541,1549]
                OBJECT [1550,3037]
                    FIELD [1551,1566]
                        String: "needs" [1551,1558]
                        STRING [1559,1566]
                            String: "build" [1559,1566]
                    FIELD [1567,1734]
                        String: "if" [1567,1571]
                        STRING [1572,1734]
                            String: "github.repository == 'pytorch/vision' && github.event_name == 'push' && ((github.ref_type == 'branch' && github.ref_name == 'main') || github.ref_type == 'tag')" [1572,1734]
                    FIELD [1735,1769]
                        String: "permissions" [1735,1748]
                        OBJECT [1749,1769]
                            FIELD [1750,1768]
                                String: "contents" [1750,1760]
                                STRING [1761,1768]
                                    String: "write" [1761,1768]
                    FIELD [1770,1834]
                        String: "uses" [1770,1776]
                        STRING [1777,1834]
                            String: "pytorch/test-infra/.github/workflows/linux_job.yml@main" [1777,1834]
                    FIELD [1835,3036]
                        String: "with" [1835,1841]
                        OBJECT [1842,3036]
                            FIELD [1843,1872]
                                String: "repository" [1843,1855]
                                STRING [1856,1872]
                                    String: "pytorch/vision" [1856,1872]
                            FIELD [1873,1899]
                                String: "download-artifact" [1873,1892]
                                STRING [1893,1899]
                                    String: "docs" [1893,1899]
                            FIELD [1900,1916]
                                String: "ref" [1900,1905]
                                STRING [1906,1916]
                                    String: "gh-pages" [1906,1916]
                            FIELD [1917,3035]
                                String: "script" [1917,1925]
                                STRING [1926,3035]
                                    String: "set -euo pipefail\n\nREF_TYPE=${{ github.ref_type }}\nREF_NAME=${{ github.ref_name }}\n\nif [[ \"${REF_TYPE}\" == branch ]]; then\n  TARGET_FOLDER=\"${REF_NAME}\"\nelif [[ \"${REF_TYPE}\" == tag ]]; then\n  case \"${REF_NAME}\" in\n    *-rc*)\n      echo \"Aborting upload since this is an RC tag: ${REF_NAME}\"\n      exit 0\n      ;;\n    *)\n      # Strip the leading \"v\" as well as the trailing patch version. For example:\n      # 'v0.15.2' -> '0.15'\n      TARGET_FOLDER=$(echo \"${REF_NAME}\" | sed 's/v\\([0-9]\\+\\)\\.\\([0-9]\\+\\)\\.[0-9]\\+/\\1.\\2/')\n      ;;\n  esac\nfi\necho \"Target Folder: ${TARGET_FOLDER}\"\n\nmkdir -p \"${TARGET_FOLDER}\"\nrm -rf \"${TARGET_FOLDER}\"/*\nmv \"${RUNNER_ARTIFACT_DIR}\"/html/* \"${TARGET_FOLDER}\"\ngit add \"${TARGET_FOLDER}\" || true\n\nif [[ \"${TARGET_FOLDER}\" == main ]]; then\n  mkdir -p _static\n  rm -rf _static/*\n  cp -r \"${TARGET_FOLDER}\"/_static/* _static\n  git add _static || true\nfi\n\ngit config user.name 'pytorchbot'\ngit config user.email 'soumith+bot@pytorch.org'\ngit commit -m \"auto-generating sphinx docs\" || true\ngit push" [1926,3035]