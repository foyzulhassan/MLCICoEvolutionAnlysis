OBJECT [0,18558]
    FIELD [1,35]
        String: "name" [1,7]
        STRING [8,35]
            String: "Self-hosted runner (push)" [8,35]
    FIELD [36,282]
        String: "on" [36,40]
        OBJECT [41,282]
            FIELD [42,149]
                String: "workflow_run" [42,56]
                OBJECT [57,149]
                    FIELD [58,106]
                        String: "workflows" [58,69]
                        ARRAY [70,106]
                            STRING [71,105]
                                String: "Self-hosted runner (push-caller)" [71,105]
                    FIELD [107,126]
                        String: "branches" [107,117]
                        ARRAY [118,126]
                            STRING [119,125]
                                String: "main" [119,125]
                    FIELD [127,148]
                        String: "types" [127,134]
                        ARRAY [135,148]
                            STRING [136,147]
                                String: "completed" [136,147]
            FIELD [150,254]
                String: "push" [150,156]
                OBJECT [157,254]
                    FIELD [158,184]
                        String: "branches" [158,168]
                        ARRAY [169,184]
                            STRING [170,176]
                                String: "ci_*" [170,176]
                            STRING [177,183]
                                String: "ci-*" [177,183]
                    FIELD [185,253]
                        String: "paths" [185,192]
                        ARRAY [193,253]
                            STRING [194,202]
                                String: "src/**" [194,202]
                            STRING [203,213]
                                String: "tests/**" [203,213]
                            STRING [214,226]
                                String: ".github/**" [214,226]
                            STRING [227,241]
                                String: "templates/**" [227,241]
                            STRING [242,252]
                                String: "utils/**" [242,252]
            FIELD [255,281]
                String: "repository_dispatch" [255,276]
                NULL [277,281]
    FIELD [283,458]
        String: "env" [283,288]
        OBJECT [289,458]
            FIELD [290,312]
                String: "HF_HOME" [290,299]
                STRING [300,312]
                    String: "/mnt/cache" [300,312]
            FIELD [313,338]
                String: "TRANSFORMERS_IS_CI" [313,333]
                TRUE [334,338]
            FIELD [339,358]
                String: "OMP_NUM_THREADS" [339,356]
                NUMBER [357,358]
                    Number: 8 [357,358]
            FIELD [359,378]
                String: "MKL_NUM_THREADS" [359,376]
                NUMBER [377,378]
                    Number: 8 [377,378]
            FIELD [379,398]
                String: "PYTEST_TIMEOUT" [379,395]
                NUMBER [396,398]
                    Number: 60 [396,398]
            FIELD [399,431]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [399,426]
                TRUE [427,431]
            FIELD [432,457]
                String: "RUN_PT_TF_CROSS_TESTS" [432,455]
                NUMBER [456,457]
                    Number: 1 [456,457]
    FIELD [459,18557]
        String: "jobs" [459,465]
        OBJECT [466,18557]
            FIELD [467,840]
                String: "check_runner_status" [467,488]
                OBJECT [489,840]
                    FIELD [490,518]
                        String: "name" [490,496]
                        STRING [497,518]
                            String: "Check Runner Status" [497,518]
                    FIELD [519,544]
                        String: "runs-on" [519,528]
                        STRING [529,544]
                            String: "ubuntu-latest" [529,544]
                    FIELD [545,839]
                        String: "steps" [545,552]
                        ARRAY [553,839]
                            OBJECT [554,640]
                                FIELD [555,585]
                                    String: "name" [555,561]
                                    STRING [562,585]
                                        String: "Checkout transformers" [562,585]
                                FIELD [586,614]
                                    String: "uses" [586,592]
                                    STRING [593,614]
                                        String: "actions/checkout@v2" [593,614]
                                FIELD [615,639]
                                    String: "with" [615,621]
                                    OBJECT [622,639]
                                        FIELD [623,638]
                                            String: "fetch-depth" [623,636]
                                            NUMBER [637,638]
                                                Number: 2 [637,638]
                            OBJECT [641,838]
                                FIELD [642,670]
                                    String: "name" [642,648]
                                    STRING [649,670]
                                        String: "Check Runner Status" [649,670]
                                FIELD [671,837]
                                    String: "run" [671,676]
                                    STRING [677,837]
                                        String: "python utils/check_self_hosted_runner.py --target_runners single-gpu-ci-runner-docker,multi-gpu-ci-runner-docker --token ${{ secrets.ACCESS_REPO_INFO_TOKEN }}" [677,837]
            FIELD [841,1259]
                String: "check_runners" [841,856]
                OBJECT [857,1259]
                    FIELD [858,880]
                        String: "name" [858,864]
                        STRING [865,880]
                            String: "Check Runners" [865,880]
                    FIELD [881,910]
                        String: "needs" [881,888]
                        STRING [889,910]
                            String: "check_runner_status" [889,910]
                    FIELD [911,976]
                        String: "strategy" [911,921]
                        OBJECT [922,976]
                            FIELD [923,975]
                                String: "matrix" [923,931]
                                OBJECT [932,975]
                                    FIELD [933,974]
                                        String: "machine_type" [933,947]
                                        ARRAY [948,974]
                                            STRING [949,961]
                                                String: "single-gpu" [949,961]
                                            STRING [962,973]
                                                String: "multi-gpu" [962,973]
                    FIELD [977,1044]
                        String: "runs-on" [977,986]
                        ARRAY [987,1044]
                            STRING [988,1001]
                                String: "self-hosted" [988,1001]
                            STRING [1002,1014]
                                String: "docker-gpu" [1002,1014]
                            STRING [1015,1043]
                                String: "${{ matrix.machine_type }}" [1015,1043]
                    FIELD [1045,1205]
                        String: "container" [1045,1056]
                        OBJECT [1057,1205]
                            FIELD [1058,1107]
                                String: "image" [1058,1065]
                                STRING [1066,1107]
                                    String: "huggingface/transformers-all-latest-gpu" [1066,1107]
                            FIELD [1108,1204]
                                String: "options" [1108,1117]
                                STRING [1118,1204]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1118,1204]
                    FIELD [1206,1258]
                        String: "steps" [1206,1213]
                        ARRAY [1214,1258]
                            OBJECT [1215,1257]
                                FIELD [1216,1235]
                                    String: "name" [1216,1222]
                                    STRING [1223,1235]
                                        String: "NVIDIA-SMI" [1223,1235]
                                FIELD [1236,1256]
                                    String: "run" [1236,1241]
                                    STRING [1242,1256]
                                        String: "nvidia-smi\n" [1242,1256]
            FIELD [1260,4009]
                String: "setup" [1260,1267]
                OBJECT [1268,4009]
                    FIELD [1269,1283]
                        String: "name" [1269,1275]
                        STRING [1276,1283]
                            String: "Setup" [1276,1283]
                    FIELD [1284,1307]
                        String: "needs" [1284,1291]
                        STRING [1292,1307]
                            String: "check_runners" [1292,1307]
                    FIELD [1308,1373]
                        String: "strategy" [1308,1318]
                        OBJECT [1319,1373]
                            FIELD [1320,1372]
                                String: "matrix" [1320,1328]
                                OBJECT [1329,1372]
                                    FIELD [1330,1371]
                                        String: "machine_type" [1330,1344]
                                        ARRAY [1345,1371]
                                            STRING [1346,1358]
                                                String: "single-gpu" [1346,1358]
                                            STRING [1359,1370]
                                                String: "multi-gpu" [1359,1370]
                    FIELD [1374,1441]
                        String: "runs-on" [1374,1383]
                        ARRAY [1384,1441]
                            STRING [1385,1398]
                                String: "self-hosted" [1385,1398]
                            STRING [1399,1411]
                                String: "docker-gpu" [1399,1411]
                            STRING [1412,1440]
                                String: "${{ matrix.machine_type }}" [1412,1440]
                    FIELD [1442,1602]
                        String: "container" [1442,1453]
                        OBJECT [1454,1602]
                            FIELD [1455,1504]
                                String: "image" [1455,1462]
                                STRING [1463,1504]
                                    String: "huggingface/transformers-all-latest-gpu" [1463,1504]
                            FIELD [1505,1601]
                                String: "options" [1505,1514]
                                STRING [1515,1601]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1515,1601]
                    FIELD [1603,1718]
                        String: "outputs" [1603,1612]
                        OBJECT [1613,1718]
                            FIELD [1614,1663]
                                String: "matrix" [1614,1622]
                                STRING [1623,1663]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [1623,1663]
                            FIELD [1664,1717]
                                String: "test_map" [1664,1674]
                                STRING [1675,1717]
                                    String: "${{ steps.set-matrix.outputs.test_map }}" [1675,1717]
                    FIELD [1719,4008]
                        String: "steps" [1719,1726]
                        ARRAY [1727,4008]
                            OBJECT [1728,2445]
                                FIELD [1729,1774]
                                    String: "name" [1729,1735]
                                    STRING [1736,1774]
                                        String: "Prepare custom environment variables" [1736,1774]
                                FIELD [1775,1789]
                                    String: "shell" [1775,1782]
                                    STRING [1783,1789]
                                        String: "bash" [1783,1789]
                                FIELD [1790,2444]
                                    String: "run" [1790,1795]
                                    STRING [1796,2444]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [1796,2444]
                            OBJECT [2446,2581]
                                FIELD [2447,2483]
                                    String: "name" [2447,2453]
                                    STRING [2454,2483]
                                        String: "print environment variables" [2454,2483]
                                FIELD [2484,2580]
                                    String: "run" [2484,2489]
                                    STRING [2490,2580]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [2490,2580]
                            OBJECT [2582,2668]
                                FIELD [2583,2613]
                                    String: "name" [2583,2589]
                                    STRING [2590,2613]
                                        String: "Checkout transformers" [2590,2613]
                                FIELD [2614,2642]
                                    String: "uses" [2614,2620]
                                    STRING [2621,2642]
                                        String: "actions/checkout@v2" [2621,2642]
                                FIELD [2643,2667]
                                    String: "with" [2643,2649]
                                    OBJECT [2650,2667]
                                        FIELD [2651,2666]
                                            String: "fetch-depth" [2651,2664]
                                            NUMBER [2665,2666]
                                                Number: 2 [2665,2666]
                            OBJECT [2669,2990]
                                FIELD [2670,2719]
                                    String: "name" [2670,2676]
                                    STRING [2677,2719]
                                        String: "Update clone using environment variables" [2677,2719]
                                FIELD [2720,2755]
                                    String: "working-directory" [2720,2739]
                                    STRING [2740,2755]
                                        String: "/transformers" [2740,2755]
                                FIELD [2756,2989]
                                    String: "run" [2756,2761]
                                    STRING [2762,2989]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [2762,2989]
                            OBJECT [2991,3093]
                                FIELD [2992,3008]
                                    String: "name" [2992,2998]
                                    STRING [2999,3008]
                                        String: "Cleanup" [2999,3008]
                                FIELD [3009,3092]
                                    String: "run" [3009,3014]
                                    STRING [3015,3092]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [3015,3092]
                            OBJECT [3094,3252]
                                FIELD [3095,3126]
                                    String: "name" [3095,3101]
                                    STRING [3102,3126]
                                        String: "Fetch the tests to run" [3102,3126]
                                FIELD [3127,3251]
                                    String: "run" [3127,3132]
                                    STRING [3133,3251]
                                        String: "pip install --upgrade git-python\npython utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [3133,3251]
                            OBJECT [3253,3381]
                                FIELD [3254,3283]
                                    String: "name" [3254,3260]
                                    STRING [3261,3283]
                                        String: "Report fetched tests" [3261,3283]
                                FIELD [3284,3319]
                                    String: "uses" [3284,3290]
                                    STRING [3291,3319]
                                        String: "actions/upload-artifact@v2" [3291,3319]
                                FIELD [3320,3380]
                                    String: "with" [3320,3326]
                                    OBJECT [3327,3380]
                                        FIELD [3328,3349]
                                            String: "name" [3328,3334]
                                            STRING [3335,3349]
                                                String: "test_fetched" [3335,3349]
                                        FIELD [3350,3379]
                                            String: "path" [3350,3356]
                                            STRING [3357,3379]
                                                String: "test_preparation.txt" [3357,3379]
                            OBJECT [3382,4007]
                                FIELD [3383,3400]
                                    String: "id" [3383,3387]
                                    STRING [3388,3400]
                                        String: "set-matrix" [3388,3400]
                                FIELD [3401,3436]
                                    String: "name" [3401,3407]
                                    STRING [3408,3436]
                                        String: "Organize tests into models" [3408,3436]
                                FIELD [3437,4006]
                                    String: "run" [3437,3442]
                                    STRING [3443,4006]
                                        String: "if [ -f test_map.json ]; then\n    keys=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); d = list(test_map.keys()); print(d)')\n    test_map=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); print(test_map)')\nelse\n    keys=$(python3 -c 'keys = [\"dummy\"]; print(keys)')\n    test_map=$(python3 -c 'test_map = {\"dummy\": []}; print(test_map)')\nfi\necho $keys\necho $test_map\necho \"::set-output name=matrix::$keys\"\necho \"::set-output name=test_map::$test_map\"\n" [3443,4006]
            FIELD [4010,6930]
                String: "run_tests_single_gpu" [4010,4032]
                OBJECT [4033,6930]
                    FIELD [4034,4054]
                        String: "name" [4034,4040]
                        STRING [4041,4054]
                            String: "Model tests" [4041,4054]
                    FIELD [4055,4070]
                        String: "needs" [4055,4062]
                        STRING [4063,4070]
                            String: "setup" [4063,4070]
                    FIELD [4071,4141]
                        String: "if" [4071,4075]
                        STRING [4076,4141]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [4076,4141]
                    FIELD [4142,4269]
                        String: "strategy" [4142,4152]
                        OBJECT [4153,4269]
                            FIELD [4154,4171]
                                String: "fail-fast" [4154,4165]
                                FALSE [4166,4171]
                            FIELD [4172,4268]
                                String: "matrix" [4172,4180]
                                OBJECT [4181,4268]
                                    FIELD [4182,4237]
                                        String: "folders" [4182,4191]
                                        STRING [4192,4237]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [4192,4237]
                                    FIELD [4238,4267]
                                        String: "machine_type" [4238,4252]
                                        ARRAY [4253,4267]
                                            STRING [4254,4266]
                                                String: "single-gpu" [4254,4266]
                    FIELD [4270,4337]
                        String: "runs-on" [4270,4279]
                        ARRAY [4280,4337]
                            STRING [4281,4294]
                                String: "self-hosted" [4281,4294]
                            STRING [4295,4307]
                                String: "docker-gpu" [4295,4307]
                            STRING [4308,4336]
                                String: "${{ matrix.machine_type }}" [4308,4336]
                    FIELD [4338,4498]
                        String: "container" [4338,4349]
                        OBJECT [4350,4498]
                            FIELD [4351,4400]
                                String: "image" [4351,4358]
                                STRING [4359,4400]
                                    String: "huggingface/transformers-all-latest-gpu" [4359,4400]
                            FIELD [4401,4497]
                                String: "options" [4401,4410]
                                STRING [4411,4497]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [4411,4497]
                    FIELD [4499,6929]
                        String: "steps" [4499,4506]
                        ARRAY [4507,6929]
                            OBJECT [4508,5225]
                                FIELD [4509,4554]
                                    String: "name" [4509,4515]
                                    STRING [4516,4554]
                                        String: "Prepare custom environment variables" [4516,4554]
                                FIELD [4555,4569]
                                    String: "shell" [4555,4562]
                                    STRING [4563,4569]
                                        String: "bash" [4563,4569]
                                FIELD [4570,5224]
                                    String: "run" [4570,4575]
                                    STRING [4576,5224]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [4576,5224]
                            OBJECT [5226,5361]
                                FIELD [5227,5263]
                                    String: "name" [5227,5233]
                                    STRING [5234,5263]
                                        String: "print environment variables" [5234,5263]
                                FIELD [5264,5360]
                                    String: "run" [5264,5269]
                                    STRING [5270,5360]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [5270,5360]
                            OBJECT [5362,5683]
                                FIELD [5363,5412]
                                    String: "name" [5363,5369]
                                    STRING [5370,5412]
                                        String: "Update clone using environment variables" [5370,5412]
                                FIELD [5413,5448]
                                    String: "working-directory" [5413,5432]
                                    STRING [5433,5448]
                                        String: "/transformers" [5433,5448]
                                FIELD [5449,5682]
                                    String: "run" [5449,5454]
                                    STRING [5455,5682]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [5455,5682]
                            OBJECT [5684,6030]
                                FIELD [5685,5727]
                                    String: "name" [5685,5691]
                                    STRING [5692,5727]
                                        String: "Echo folder ${{ matrix.folders }}" [5692,5727]
                                FIELD [5728,5742]
                                    String: "shell" [5728,5735]
                                    STRING [5736,5742]
                                        String: "bash" [5736,5742]
                                FIELD [5743,6029]
                                    String: "run" [5743,5748]
                                    STRING [5749,6029]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [5749,6029]
                            OBJECT [6031,6073]
                                FIELD [6032,6051]
                                    String: "name" [6032,6038]
                                    STRING [6039,6051]
                                        String: "NVIDIA-SMI" [6039,6051]
                                FIELD [6052,6072]
                                    String: "run" [6052,6057]
                                    STRING [6058,6072]
                                        String: "nvidia-smi\n" [6058,6072]
                            OBJECT [6074,6169]
                                FIELD [6075,6095]
                                    String: "name" [6075,6081]
                                    STRING [6082,6095]
                                        String: "Environment" [6082,6095]
                                FIELD [6096,6131]
                                    String: "working-directory" [6096,6115]
                                    STRING [6116,6131]
                                        String: "/transformers" [6116,6131]
                                FIELD [6132,6168]
                                    String: "run" [6132,6137]
                                    STRING [6138,6168]
                                        String: "python3 utils/print_env.py\n" [6138,6168]
                            OBJECT [6170,6443]
                                FIELD [6171,6218]
                                    String: "name" [6171,6177]
                                    STRING [6178,6218]
                                        String: "Run all non-slow selected tests on GPU" [6178,6218]
                                FIELD [6219,6254]
                                    String: "working-directory" [6219,6238]
                                    STRING [6239,6254]
                                        String: "/transformers" [6239,6254]
                                FIELD [6255,6442]
                                    String: "run" [6255,6260]
                                    STRING [6261,6442]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [6261,6442]
                            OBJECT [6444,6637]
                                FIELD [6445,6475]
                                    String: "name" [6445,6451]
                                    STRING [6452,6475]
                                        String: "Failure short reports" [6452,6475]
                                FIELD [6476,6499]
                                    String: "if" [6476,6480]
                                    STRING [6481,6499]
                                        String: "${{ failure() }}" [6481,6499]
                                FIELD [6500,6524]
                                    String: "continue-on-error" [6500,6519]
                                    TRUE [6520,6524]
                                FIELD [6525,6636]
                                    String: "run" [6525,6530]
                                    STRING [6531,6636]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [6531,6636]
                            OBJECT [6638,6928]
                                FIELD [6639,6676]
                                    String: "name" [6639,6645]
                                    STRING [6646,6676]
                                        String: "Test suite reports artifacts" [6646,6676]
                                FIELD [6677,6699]
                                    String: "if" [6677,6681]
                                    STRING [6682,6699]
                                        String: "${{ always() }}" [6682,6699]
                                FIELD [6700,6735]
                                    String: "uses" [6700,6706]
                                    STRING [6707,6735]
                                        String: "actions/upload-artifact@v2" [6707,6735]
                                FIELD [6736,6927]
                                    String: "with" [6736,6742]
                                    OBJECT [6743,6927]
                                        FIELD [6744,6836]
                                            String: "name" [6744,6750]
                                            STRING [6751,6836]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [6751,6836]
                                        FIELD [6837,6926]
                                            String: "path" [6837,6843]
                                            STRING [6844,6926]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [6844,6926]
            FIELD [6931,9887]
                String: "run_tests_multi_gpu" [6931,6952]
                OBJECT [6953,9887]
                    FIELD [6954,6974]
                        String: "name" [6954,6960]
                        STRING [6961,6974]
                            String: "Model tests" [6961,6974]
                    FIELD [6975,6990]
                        String: "needs" [6975,6982]
                        STRING [6983,6990]
                            String: "setup" [6983,6990]
                    FIELD [6991,7061]
                        String: "if" [6991,6995]
                        STRING [6996,7061]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [6996,7061]
                    FIELD [7062,7188]
                        String: "strategy" [7062,7072]
                        OBJECT [7073,7188]
                            FIELD [7074,7091]
                                String: "fail-fast" [7074,7085]
                                FALSE [7086,7091]
                            FIELD [7092,7187]
                                String: "matrix" [7092,7100]
                                OBJECT [7101,7187]
                                    FIELD [7102,7157]
                                        String: "folders" [7102,7111]
                                        STRING [7112,7157]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [7112,7157]
                                    FIELD [7158,7186]
                                        String: "machine_type" [7158,7172]
                                        ARRAY [7173,7186]
                                            STRING [7174,7185]
                                                String: "multi-gpu" [7174,7185]
                    FIELD [7189,7256]
                        String: "runs-on" [7189,7198]
                        ARRAY [7199,7256]
                            STRING [7200,7213]
                                String: "self-hosted" [7200,7213]
                            STRING [7214,7226]
                                String: "docker-gpu" [7214,7226]
                            STRING [7227,7255]
                                String: "${{ matrix.machine_type }}" [7227,7255]
                    FIELD [7257,7419]
                        String: "container" [7257,7268]
                        OBJECT [7269,7419]
                            FIELD [7270,7319]
                                String: "image" [7270,7277]
                                STRING [7278,7319]
                                    String: "huggingface/transformers-all-latest-gpu" [7278,7319]
                            FIELD [7320,7418]
                                String: "options" [7320,7329]
                                STRING [7330,7418]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [7330,7418]
                    FIELD [7420,9886]
                        String: "steps" [7420,7427]
                        ARRAY [7428,9886]
                            OBJECT [7429,8146]
                                FIELD [7430,7475]
                                    String: "name" [7430,7436]
                                    STRING [7437,7475]
                                        String: "Prepare custom environment variables" [7437,7475]
                                FIELD [7476,7490]
                                    String: "shell" [7476,7483]
                                    STRING [7484,7490]
                                        String: "bash" [7484,7490]
                                FIELD [7491,8145]
                                    String: "run" [7491,7496]
                                    STRING [7497,8145]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [7497,8145]
                            OBJECT [8147,8282]
                                FIELD [8148,8184]
                                    String: "name" [8148,8154]
                                    STRING [8155,8184]
                                        String: "print environment variables" [8155,8184]
                                FIELD [8185,8281]
                                    String: "run" [8185,8190]
                                    STRING [8191,8281]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [8191,8281]
                            OBJECT [8283,8604]
                                FIELD [8284,8333]
                                    String: "name" [8284,8290]
                                    STRING [8291,8333]
                                        String: "Update clone using environment variables" [8291,8333]
                                FIELD [8334,8369]
                                    String: "working-directory" [8334,8353]
                                    STRING [8354,8369]
                                        String: "/transformers" [8354,8369]
                                FIELD [8370,8603]
                                    String: "run" [8370,8375]
                                    STRING [8376,8603]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [8376,8603]
                            OBJECT [8605,8951]
                                FIELD [8606,8648]
                                    String: "name" [8606,8612]
                                    STRING [8613,8648]
                                        String: "Echo folder ${{ matrix.folders }}" [8613,8648]
                                FIELD [8649,8663]
                                    String: "shell" [8649,8656]
                                    STRING [8657,8663]
                                        String: "bash" [8657,8663]
                                FIELD [8664,8950]
                                    String: "run" [8664,8669]
                                    STRING [8670,8950]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [8670,8950]
                            OBJECT [8952,8994]
                                FIELD [8953,8972]
                                    String: "name" [8953,8959]
                                    STRING [8960,8972]
                                        String: "NVIDIA-SMI" [8960,8972]
                                FIELD [8973,8993]
                                    String: "run" [8973,8978]
                                    STRING [8979,8993]
                                        String: "nvidia-smi\n" [8979,8993]
                            OBJECT [8995,9090]
                                FIELD [8996,9016]
                                    String: "name" [8996,9002]
                                    STRING [9003,9016]
                                        String: "Environment" [9003,9016]
                                FIELD [9017,9052]
                                    String: "working-directory" [9017,9036]
                                    STRING [9037,9052]
                                        String: "/transformers" [9037,9052]
                                FIELD [9053,9089]
                                    String: "run" [9053,9058]
                                    STRING [9059,9089]
                                        String: "python3 utils/print_env.py\n" [9059,9089]
                            OBJECT [9091,9400]
                                FIELD [9092,9139]
                                    String: "name" [9092,9098]
                                    STRING [9099,9139]
                                        String: "Run all non-slow selected tests on GPU" [9099,9139]
                                FIELD [9140,9175]
                                    String: "env" [9140,9145]
                                    OBJECT [9146,9175]
                                        FIELD [9147,9174]
                                            String: "MKL_SERVICE_FORCE_INTEL" [9147,9172]
                                            NUMBER [9173,9174]
                                                Number: 1 [9173,9174]
                                FIELD [9176,9211]
                                    String: "working-directory" [9176,9195]
                                    STRING [9196,9211]
                                        String: "/transformers" [9196,9211]
                                FIELD [9212,9399]
                                    String: "run" [9212,9217]
                                    STRING [9218,9399]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [9218,9399]
                            OBJECT [9401,9594]
                                FIELD [9402,9432]
                                    String: "name" [9402,9408]
                                    STRING [9409,9432]
                                        String: "Failure short reports" [9409,9432]
                                FIELD [9433,9456]
                                    String: "if" [9433,9437]
                                    STRING [9438,9456]
                                        String: "${{ failure() }}" [9438,9456]
                                FIELD [9457,9481]
                                    String: "continue-on-error" [9457,9476]
                                    TRUE [9477,9481]
                                FIELD [9482,9593]
                                    String: "run" [9482,9487]
                                    STRING [9488,9593]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [9488,9593]
                            OBJECT [9595,9885]
                                FIELD [9596,9633]
                                    String: "name" [9596,9602]
                                    STRING [9603,9633]
                                        String: "Test suite reports artifacts" [9603,9633]
                                FIELD [9634,9656]
                                    String: "if" [9634,9638]
                                    STRING [9639,9656]
                                        String: "${{ always() }}" [9639,9656]
                                FIELD [9657,9692]
                                    String: "uses" [9657,9663]
                                    STRING [9664,9692]
                                        String: "actions/upload-artifact@v2" [9664,9692]
                                FIELD [9693,9884]
                                    String: "with" [9693,9699]
                                    OBJECT [9700,9884]
                                        FIELD [9701,9793]
                                            String: "name" [9701,9707]
                                            STRING [9708,9793]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [9708,9793]
                                        FIELD [9794,9883]
                                            String: "path" [9794,9800]
                                            STRING [9801,9883]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [9801,9883]
            FIELD [9888,12942]
                String: "run_tests_torch_cuda_extensions_single_gpu" [9888,9932]
                OBJECT [9933,12942]
                    FIELD [9934,9969]
                        String: "name" [9934,9940]
                        STRING [9941,9969]
                            String: "Torch CUDA extension tests" [9941,9969]
                    FIELD [9970,9985]
                        String: "needs" [9970,9977]
                        STRING [9978,9985]
                            String: "setup" [9978,9985]
                    FIELD [9986,10114]
                        String: "if" [9986,9990]
                        STRING [9991,10114]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [9991,10114]
                    FIELD [10115,10186]
                        String: "strategy" [10115,10125]
                        OBJECT [10126,10186]
                            FIELD [10127,10144]
                                String: "fail-fast" [10127,10138]
                                FALSE [10139,10144]
                            FIELD [10145,10185]
                                String: "matrix" [10145,10153]
                                OBJECT [10154,10185]
                                    FIELD [10155,10184]
                                        String: "machine_type" [10155,10169]
                                        ARRAY [10170,10184]
                                            STRING [10171,10183]
                                                String: "single-gpu" [10171,10183]
                    FIELD [10187,10254]
                        String: "runs-on" [10187,10196]
                        ARRAY [10197,10254]
                            STRING [10198,10211]
                                String: "self-hosted" [10198,10211]
                            STRING [10212,10224]
                                String: "docker-gpu" [10212,10224]
                            STRING [10225,10253]
                                String: "${{ matrix.machine_type }}" [10225,10253]
                    FIELD [10255,10429]
                        String: "container" [10255,10266]
                        OBJECT [10267,10429]
                            FIELD [10268,10331]
                                String: "image" [10268,10275]
                                STRING [10276,10331]
                                    String: "huggingface/transformers-pytorch-deepspeed-latest-gpu" [10276,10331]
                            FIELD [10332,10428]
                                String: "options" [10332,10341]
                                STRING [10342,10428]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [10342,10428]
                    FIELD [10430,12941]
                        String: "steps" [10430,10437]
                        ARRAY [10438,12941]
                            OBJECT [10439,11156]
                                FIELD [10440,10485]
                                    String: "name" [10440,10446]
                                    STRING [10447,10485]
                                        String: "Prepare custom environment variables" [10447,10485]
                                FIELD [10486,10500]
                                    String: "shell" [10486,10493]
                                    STRING [10494,10500]
                                        String: "bash" [10494,10500]
                                FIELD [10501,11155]
                                    String: "run" [10501,10506]
                                    STRING [10507,11155]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [10507,11155]
                            OBJECT [11157,11292]
                                FIELD [11158,11194]
                                    String: "name" [11158,11164]
                                    STRING [11165,11194]
                                        String: "print environment variables" [11165,11194]
                                FIELD [11195,11291]
                                    String: "run" [11195,11200]
                                    STRING [11201,11291]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [11201,11291]
                            OBJECT [11293,11624]
                                FIELD [11294,11343]
                                    String: "name" [11294,11300]
                                    STRING [11301,11343]
                                        String: "Update clone using environment variables" [11301,11343]
                                FIELD [11344,11389]
                                    String: "working-directory" [11344,11363]
                                    STRING [11364,11389]
                                        String: "/workspace/transformers" [11364,11389]
                                FIELD [11390,11623]
                                    String: "run" [11390,11395]
                                    STRING [11396,11623]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [11396,11623]
                            OBJECT [11625,11719]
                                FIELD [11626,11665]
                                    String: "name" [11626,11632]
                                    STRING [11633,11665]
                                        String: "Remove cached torch extensions" [11633,11665]
                                FIELD [11666,11718]
                                    String: "run" [11666,11671]
                                    STRING [11672,11718]
                                        String: "rm -rf /github/home/.cache/torch_extensions/" [11672,11718]
                            OBJECT [11720,12043]
                                FIELD [11721,11757]
                                    String: "name" [11721,11727]
                                    STRING [11728,11757]
                                        String: "Pre build DeepSpeed *again*" [11728,11757]
                                FIELD [11758,11790]
                                    String: "working-directory" [11758,11777]
                                    STRING [11778,11790]
                                        String: "/workspace" [11778,11790]
                                FIELD [11791,12042]
                                    String: "run" [11791,11796]
                                    STRING [11797,12042]
                                        String: "python3 -m pip uninstall -y deepspeed\nDS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 DS_BUILD_AIO=1 DS_BUILD_UTILS=1 python3 -m pip install deepspeed --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [11797,12042]
                            OBJECT [12044,12086]
                                FIELD [12045,12064]
                                    String: "name" [12045,12051]
                                    STRING [12052,12064]
                                        String: "NVIDIA-SMI" [12052,12064]
                                FIELD [12065,12085]
                                    String: "run" [12065,12070]
                                    STRING [12071,12085]
                                        String: "nvidia-smi\n" [12071,12085]
                            OBJECT [12087,12191]
                                FIELD [12088,12108]
                                    String: "name" [12088,12094]
                                    STRING [12095,12108]
                                        String: "Environment" [12095,12108]
                                FIELD [12109,12154]
                                    String: "working-directory" [12109,12128]
                                    STRING [12129,12154]
                                        String: "/workspace/transformers" [12129,12154]
                                FIELD [12155,12190]
                                    String: "run" [12155,12160]
                                    STRING [12161,12190]
                                        String: "python utils/print_env.py\n" [12161,12190]
                            OBJECT [12192,12443]
                                FIELD [12193,12240]
                                    String: "name" [12193,12199]
                                    STRING [12200,12240]
                                        String: "Run all non-slow selected tests on GPU" [12200,12240]
                                FIELD [12241,12286]
                                    String: "working-directory" [12241,12260]
                                    STRING [12261,12286]
                                        String: "/workspace/transformers" [12261,12286]
                                FIELD [12287,12442]
                                    String: "run" [12287,12292]
                                    STRING [12293,12442]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [12293,12442]
                            OBJECT [12444,12647]
                                FIELD [12445,12475]
                                    String: "name" [12445,12451]
                                    STRING [12452,12475]
                                        String: "Failure short reports" [12452,12475]
                                FIELD [12476,12499]
                                    String: "if" [12476,12480]
                                    STRING [12481,12499]
                                        String: "${{ failure() }}" [12481,12499]
                                FIELD [12500,12524]
                                    String: "continue-on-error" [12500,12519]
                                    TRUE [12520,12524]
                                FIELD [12525,12646]
                                    String: "run" [12525,12530]
                                    STRING [12531,12646]
                                        String: "cat /workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [12531,12646]
                            OBJECT [12648,12940]
                                FIELD [12649,12686]
                                    String: "name" [12649,12655]
                                    STRING [12656,12686]
                                        String: "Test suite reports artifacts" [12656,12686]
                                FIELD [12687,12709]
                                    String: "if" [12687,12691]
                                    STRING [12692,12709]
                                        String: "${{ always() }}" [12692,12709]
                                FIELD [12710,12745]
                                    String: "uses" [12710,12716]
                                    STRING [12717,12745]
                                        String: "actions/upload-artifact@v2" [12717,12745]
                                FIELD [12746,12939]
                                    String: "with" [12746,12752]
                                    OBJECT [12753,12939]
                                        FIELD [12754,12838]
                                            String: "name" [12754,12760]
                                            STRING [12761,12838]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [12761,12838]
                                        FIELD [12839,12938]
                                            String: "path" [12839,12845]
                                            STRING [12846,12938]
                                                String: "/workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [12846,12938]
            FIELD [12943,15997]
                String: "run_tests_torch_cuda_extensions_multi_gpu" [12943,12986]
                OBJECT [12987,15997]
                    FIELD [12988,13023]
                        String: "name" [12988,12994]
                        STRING [12995,13023]
                            String: "Torch CUDA extension tests" [12995,13023]
                    FIELD [13024,13039]
                        String: "needs" [13024,13031]
                        STRING [13032,13039]
                            String: "setup" [13032,13039]
                    FIELD [13040,13168]
                        String: "if" [13040,13044]
                        STRING [13045,13168]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [13045,13168]
                    FIELD [13169,13239]
                        String: "strategy" [13169,13179]
                        OBJECT [13180,13239]
                            FIELD [13181,13198]
                                String: "fail-fast" [13181,13192]
                                FALSE [13193,13198]
                            FIELD [13199,13238]
                                String: "matrix" [13199,13207]
                                OBJECT [13208,13238]
                                    FIELD [13209,13237]
                                        String: "machine_type" [13209,13223]
                                        ARRAY [13224,13237]
                                            STRING [13225,13236]
                                                String: "multi-gpu" [13225,13236]
                    FIELD [13240,13307]
                        String: "runs-on" [13240,13249]
                        ARRAY [13250,13307]
                            STRING [13251,13264]
                                String: "self-hosted" [13251,13264]
                            STRING [13265,13277]
                                String: "docker-gpu" [13265,13277]
                            STRING [13278,13306]
                                String: "${{ matrix.machine_type }}" [13278,13306]
                    FIELD [13308,13484]
                        String: "container" [13308,13319]
                        OBJECT [13320,13484]
                            FIELD [13321,13384]
                                String: "image" [13321,13328]
                                STRING [13329,13384]
                                    String: "huggingface/transformers-pytorch-deepspeed-latest-gpu" [13329,13384]
                            FIELD [13385,13483]
                                String: "options" [13385,13394]
                                STRING [13395,13483]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [13395,13483]
                    FIELD [13485,15996]
                        String: "steps" [13485,13492]
                        ARRAY [13493,15996]
                            OBJECT [13494,14211]
                                FIELD [13495,13540]
                                    String: "name" [13495,13501]
                                    STRING [13502,13540]
                                        String: "Prepare custom environment variables" [13502,13540]
                                FIELD [13541,13555]
                                    String: "shell" [13541,13548]
                                    STRING [13549,13555]
                                        String: "bash" [13549,13555]
                                FIELD [13556,14210]
                                    String: "run" [13556,13561]
                                    STRING [13562,14210]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [13562,14210]
                            OBJECT [14212,14347]
                                FIELD [14213,14249]
                                    String: "name" [14213,14219]
                                    STRING [14220,14249]
                                        String: "print environment variables" [14220,14249]
                                FIELD [14250,14346]
                                    String: "run" [14250,14255]
                                    STRING [14256,14346]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [14256,14346]
                            OBJECT [14348,14679]
                                FIELD [14349,14398]
                                    String: "name" [14349,14355]
                                    STRING [14356,14398]
                                        String: "Update clone using environment variables" [14356,14398]
                                FIELD [14399,14444]
                                    String: "working-directory" [14399,14418]
                                    STRING [14419,14444]
                                        String: "/workspace/transformers" [14419,14444]
                                FIELD [14445,14678]
                                    String: "run" [14445,14450]
                                    STRING [14451,14678]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [14451,14678]
                            OBJECT [14680,14774]
                                FIELD [14681,14720]
                                    String: "name" [14681,14687]
                                    STRING [14688,14720]
                                        String: "Remove cached torch extensions" [14688,14720]
                                FIELD [14721,14773]
                                    String: "run" [14721,14726]
                                    STRING [14727,14773]
                                        String: "rm -rf /github/home/.cache/torch_extensions/" [14727,14773]
                            OBJECT [14775,15098]
                                FIELD [14776,14812]
                                    String: "name" [14776,14782]
                                    STRING [14783,14812]
                                        String: "Pre build DeepSpeed *again*" [14783,14812]
                                FIELD [14813,14845]
                                    String: "working-directory" [14813,14832]
                                    STRING [14833,14845]
                                        String: "/workspace" [14833,14845]
                                FIELD [14846,15097]
                                    String: "run" [14846,14851]
                                    STRING [14852,15097]
                                        String: "python3 -m pip uninstall -y deepspeed\nDS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 DS_BUILD_AIO=1 DS_BUILD_UTILS=1 python3 -m pip install deepspeed --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [14852,15097]
                            OBJECT [15099,15141]
                                FIELD [15100,15119]
                                    String: "name" [15100,15106]
                                    STRING [15107,15119]
                                        String: "NVIDIA-SMI" [15107,15119]
                                FIELD [15120,15140]
                                    String: "run" [15120,15125]
                                    STRING [15126,15140]
                                        String: "nvidia-smi\n" [15126,15140]
                            OBJECT [15142,15246]
                                FIELD [15143,15163]
                                    String: "name" [15143,15149]
                                    STRING [15150,15163]
                                        String: "Environment" [15150,15163]
                                FIELD [15164,15209]
                                    String: "working-directory" [15164,15183]
                                    STRING [15184,15209]
                                        String: "/workspace/transformers" [15184,15209]
                                FIELD [15210,15245]
                                    String: "run" [15210,15215]
                                    STRING [15216,15245]
                                        String: "python utils/print_env.py\n" [15216,15245]
                            OBJECT [15247,15498]
                                FIELD [15248,15295]
                                    String: "name" [15248,15254]
                                    STRING [15255,15295]
                                        String: "Run all non-slow selected tests on GPU" [15255,15295]
                                FIELD [15296,15341]
                                    String: "working-directory" [15296,15315]
                                    STRING [15316,15341]
                                        String: "/workspace/transformers" [15316,15341]
                                FIELD [15342,15497]
                                    String: "run" [15342,15347]
                                    STRING [15348,15497]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [15348,15497]
                            OBJECT [15499,15702]
                                FIELD [15500,15530]
                                    String: "name" [15500,15506]
                                    STRING [15507,15530]
                                        String: "Failure short reports" [15507,15530]
                                FIELD [15531,15554]
                                    String: "if" [15531,15535]
                                    STRING [15536,15554]
                                        String: "${{ failure() }}" [15536,15554]
                                FIELD [15555,15579]
                                    String: "continue-on-error" [15555,15574]
                                    TRUE [15575,15579]
                                FIELD [15580,15701]
                                    String: "run" [15580,15585]
                                    STRING [15586,15701]
                                        String: "cat /workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [15586,15701]
                            OBJECT [15703,15995]
                                FIELD [15704,15741]
                                    String: "name" [15704,15710]
                                    STRING [15711,15741]
                                        String: "Test suite reports artifacts" [15711,15741]
                                FIELD [15742,15764]
                                    String: "if" [15742,15746]
                                    STRING [15747,15764]
                                        String: "${{ always() }}" [15747,15764]
                                FIELD [15765,15800]
                                    String: "uses" [15765,15771]
                                    STRING [15772,15800]
                                        String: "actions/upload-artifact@v2" [15772,15800]
                                FIELD [15801,15994]
                                    String: "with" [15801,15807]
                                    OBJECT [15808,15994]
                                        FIELD [15809,15893]
                                            String: "name" [15809,15815]
                                            STRING [15816,15893]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [15816,15893]
                                        FIELD [15894,15993]
                                            String: "path" [15894,15900]
                                            STRING [15901,15993]
                                                String: "/workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [15901,15993]
            FIELD [15998,18556]
                String: "send_results" [15998,16012]
                OBJECT [16013,18556]
                    FIELD [16014,16046]
                        String: "name" [16014,16020]
                        STRING [16021,16046]
                            String: "Send results to webhook" [16021,16046]
                    FIELD [16047,16072]
                        String: "runs-on" [16047,16056]
                        STRING [16057,16072]
                            String: "ubuntu-latest" [16057,16072]
                    FIELD [16073,16088]
                        String: "if" [16073,16077]
                        STRING [16078,16088]
                            String: "always()" [16078,16088]
                    FIELD [16089,16278]
                        String: "needs" [16089,16096]
                        ARRAY [16097,16278]
                            STRING [16098,16119]
                                String: "check_runner_status" [16098,16119]
                            STRING [16120,16135]
                                String: "check_runners" [16120,16135]
                            STRING [16136,16143]
                                String: "setup" [16136,16143]
                            STRING [16144,16166]
                                String: "run_tests_single_gpu" [16144,16166]
                            STRING [16167,16188]
                                String: "run_tests_multi_gpu" [16167,16188]
                            STRING [16189,16233]
                                String: "run_tests_torch_cuda_extensions_single_gpu" [16189,16233]
                            STRING [16234,16277]
                                String: "run_tests_torch_cuda_extensions_multi_gpu" [16234,16277]
                    FIELD [16279,18555]
                        String: "steps" [16279,16286]
                        ARRAY [16287,18555]
                            OBJECT [16288,16525]
                                FIELD [16289,16320]
                                    String: "name" [16289,16295]
                                    STRING [16296,16320]
                                        String: "Preliminary job status" [16296,16320]
                                FIELD [16321,16335]
                                    String: "shell" [16321,16328]
                                    STRING [16329,16335]
                                        String: "bash" [16329,16335]
                                FIELD [16336,16524]
                                    String: "run" [16336,16341]
                                    STRING [16342,16524]
                                        String: "echo \"Runner availability: ${{ needs.check_runner_status.result }}\"\necho \"Setup status: ${{ needs.setup.result }}\"\necho \"Runner status: ${{ needs.check_runners.result }}\"\n" [16342,16524]
                            OBJECT [16526,17243]
                                FIELD [16527,16572]
                                    String: "name" [16527,16533]
                                    STRING [16534,16572]
                                        String: "Prepare custom environment variables" [16534,16572]
                                FIELD [16573,16587]
                                    String: "shell" [16573,16580]
                                    STRING [16581,16587]
                                        String: "bash" [16581,16587]
                                FIELD [16588,17242]
                                    String: "run" [16588,16593]
                                    STRING [16594,17242]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [16594,17242]
                            OBJECT [17244,17379]
                                FIELD [17245,17281]
                                    String: "name" [17245,17251]
                                    STRING [17252,17281]
                                        String: "print environment variables" [17252,17281]
                                FIELD [17282,17378]
                                    String: "run" [17282,17287]
                                    STRING [17288,17378]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [17288,17378]
                            OBJECT [17380,17410]
                                FIELD [17381,17409]
                                    String: "uses" [17381,17387]
                                    STRING [17388,17409]
                                        String: "actions/checkout@v2" [17388,17409]
                            OBJECT [17411,17696]
                                FIELD [17412,17461]
                                    String: "name" [17412,17418]
                                    STRING [17419,17461]
                                        String: "Update clone using environment variables" [17419,17461]
                                FIELD [17462,17695]
                                    String: "run" [17462,17467]
                                    STRING [17468,17695]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [17468,17695]
                            OBJECT [17697,17736]
                                FIELD [17698,17735]
                                    String: "uses" [17698,17704]
                                    STRING [17705,17735]
                                        String: "actions/download-artifact@v2" [17705,17735]
                            OBJECT [17737,18554]
                                FIELD [17738,17768]
                                    String: "name" [17738,17744]
                                    STRING [17745,17768]
                                        String: "Send message to Slack" [17745,17768]
                                FIELD [17769,18447]
                                    String: "env" [17769,17774]
                                    OBJECT [17775,18447]
                                        FIELD [17776,17832]
                                            String: "CI_SLACK_BOT_TOKEN" [17776,17796]
                                            STRING [17797,17832]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [17797,17832]
                                        FIELD [17833,17891]
                                            String: "CI_SLACK_CHANNEL_ID" [17833,17854]
                                            STRING [17855,17891]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [17855,17891]
                                        FIELD [17892,17962]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [17892,17919]
                                            STRING [17920,17962]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [17920,17962]
                                        FIELD [17963,18039]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [17963,17993]
                                            STRING [17994,18039]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [17994,18039]
                                        FIELD [18040,18105]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [18040,18068]
                                            STRING [18069,18105]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [18069,18105]
                                        FIELD [18106,18123]
                                            String: "CI_EVENT" [18106,18116]
                                            STRING [18117,18123]
                                                String: "push" [18117,18123]
                                        FIELD [18124,18181]
                                            String: "CI_TITLE_PUSH" [18124,18139]
                                            STRING [18140,18181]
                                                String: "${{ github.event.head_commit.message }}" [18140,18181]
                                        FIELD [18182,18260]
                                            String: "CI_TITLE_WORKFLOW_RUN" [18182,18205]
                                            STRING [18206,18260]
                                                String: "${{ github.event.workflow_run.head_commit.message }}" [18206,18260]
                                        FIELD [18261,18289]
                                            String: "CI_SHA" [18261,18269]
                                            STRING [18270,18289]
                                                String: "${{ env.CI_SHA }}" [18270,18289]
                                        FIELD [18290,18347]
                                            String: "RUNNER_STATUS" [18290,18305]
                                            STRING [18306,18347]
                                                String: "${{ needs.check_runner_status.result }}" [18306,18347]
                                        FIELD [18348,18403]
                                            String: "RUNNER_ENV_STATUS" [18348,18367]
                                            STRING [18368,18403]
                                                String: "${{ needs.check_runners.result }}" [18368,18403]
                                        FIELD [18404,18446]
                                            String: "SETUP_STATUS" [18404,18418]
                                            STRING [18419,18446]
                                                String: "${{ needs.setup.result }}" [18419,18446]
                                FIELD [18448,18553]
                                    String: "run" [18448,18453]
                                    STRING [18454,18553]
                                        String: "pip install slack_sdk\npython utils/notification_service.py \"${{ needs.setup.outputs.matrix }}\"" [18454,18553]