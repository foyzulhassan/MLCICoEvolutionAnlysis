OBJECT [0,3722]
    FIELD [1,21]
        String: "name" [1,7]
        STRING [8,21]
            String: "master only" [8,21]
    FIELD [22,75]
        String: "on" [22,26]
        OBJECT [27,75]
            FIELD [28,74]
                String: "push" [28,34]
                OBJECT [35,74]
                    FIELD [36,55]
                        String: "branches" [36,46]
                        STRING [47,55]
                            String: "master" [47,55]
                    FIELD [56,73]
                        String: "tags" [56,62]
                        ARRAY [63,73]
                            STRING [64,72]
                                String: "v*.*.*" [64,72]
    FIELD [76,3721]
        String: "jobs" [76,82]
        OBJECT [83,3721]
            FIELD [84,2546]
                String: "build-docker-images" [84,105]
                OBJECT [106,2546]
                    FIELD [107,132]
                        String: "runs-on" [107,116]
                        ARRAY [117,132]
                            STRING [118,131]
                                String: "self-hosted" [118,131]
                    FIELD [133,215]
                        String: "strategy" [133,143]
                        OBJECT [144,215]
                            FIELD [145,214]
                                String: "matrix" [145,153]
                                OBJECT [154,214]
                                    FIELD [155,213]
                                        String: "component" [155,166]
                                        ARRAY [167,213]
                                            STRING [168,174]
                                                String: "core" [168,174]
                                            STRING [175,184]
                                                String: "serving" [175,184]
                                            STRING [185,197]
                                                String: "jobservice" [185,197]
                                            STRING [198,207]
                                                String: "jupyter" [198,207]
                                            STRING [208,212]
                                                String: "ci" [208,212]
                    FIELD [216,313]
                        String: "env" [216,221]
                        OBJECT [222,313]
                            FIELD [223,290]
                                String: "MAVEN_CACHE" [223,236]
                                STRING [237,290]
                                    String: "gs://feast-templocation-kf-feast/.m2.2020-08-19.tar" [237,290]
                            FIELD [291,312]
                                String: "DOCKER_BUILDKIT" [291,308]
                                STRING [309,312]
                                    String: "1" [309,312]
                    FIELD [314,2545]
                        String: "steps" [314,321]
                        ARRAY [322,2545]
                            OBJECT [323,353]
                                FIELD [324,352]
                                    String: "uses" [324,330]
                                    STRING [331,352]
                                        String: "actions/checkout@v2" [331,352]
                            OBJECT [354,482]
                                FIELD [355,418]
                                    String: "uses" [355,361]
                                    STRING [362,418]
                                        String: "GoogleCloudPlatform/github-actions/setup-gcloud@master" [362,418]
                                FIELD [419,481]
                                    String: "with" [419,425]
                                    OBJECT [426,481]
                                        FIELD [427,446]
                                            String: "version" [427,436]
                                            STRING [437,446]
                                                String: "290.0.1" [437,446]
                                        FIELD [447,480]
                                            String: "export_default_credentials" [447,475]
                                            TRUE [476,480]
                            OBJECT [483,529]
                                FIELD [484,528]
                                    String: "run" [484,489]
                                    STRING [490,528]
                                        String: "gcloud auth configure-docker --quiet" [490,528]
                            OBJECT [530,653]
                                FIELD [531,552]
                                    String: "name" [531,537]
                                    STRING [538,552]
                                        String: "Get m2 cache" [538,552]
                                FIELD [553,652]
                                    String: "run" [553,558]
                                    STRING [559,652]
                                        String: "infra/scripts/download-maven-cache.sh \\\n--archive-uri ${MAVEN_CACHE} \\\n--output-dir .\n" [559,652]
                            OBJECT [654,746]
                                FIELD [655,675]
                                    String: "name" [655,661]
                                    STRING [662,675]
                                        String: "Get version" [662,675]
                                FIELD [676,745]
                                    String: "run" [676,681]
                                    STRING [682,745]
                                        String: "echo \"RELEASE_VERSION=${GITHUB_REF#refs/*/}\" >> $GITHUB_ENV" [682,745]
                            OBJECT [747,894]
                                FIELD [748,768]
                                    String: "name" [748,754]
                                    STRING [755,768]
                                        String: "Build image" [755,768]
                                FIELD [769,893]
                                    String: "run" [769,774]
                                    STRING [775,893]
                                        String: "make build-${{ matrix.component }}-docker REGISTRY=gcr.io/kf-feast VERSION=${GITHUB_SHA} REVISION=${RELEASE_VERSION}" [775,893]
                            OBJECT [895,1040]
                                FIELD [896,915]
                                    String: "name" [896,902]
                                    STRING [903,915]
                                        String: "Push image" [903,915]
                                FIELD [916,1039]
                                    String: "run" [916,921]
                                    STRING [922,1039]
                                        String: "make push-${{ matrix.component }}-docker REGISTRY=gcr.io/kf-feast VERSION=${GITHUB_SHA} REVISION=${RELEASE_VERSION}" [922,1039]
                            OBJECT [1041,1341]
                                FIELD [1042,1080]
                                    String: "name" [1042,1048]
                                    STRING [1049,1080]
                                        String: "Push development Docker image" [1049,1080]
                                FIELD [1081,1340]
                                    String: "run" [1081,1086]
                                    STRING [1087,1340]
                                        String: "if [ ${GITHUB_REF#refs/*/} == \"master\" ]; then\n  docker tag gcr.io/kf-feast/feast-${{ matrix.component }}:${GITHUB_SHA} gcr.io/kf-feast/feast-${{ matrix.component }}:develop\n  docker push gcr.io/kf-feast/feast-${{ matrix.component }}:develop\nfi\n" [1087,1340]
                            OBJECT [1342,2544]
                                FIELD [1343,1379]
                                    String: "name" [1343,1349]
                                    STRING [1350,1379]
                                        String: "Push versioned Docker image" [1350,1379]
                                FIELD [1380,2543]
                                    String: "run" [1380,1385]
                                    STRING [1386,2543]
                                        String: "source infra/scripts/setup-common-functions.sh\n# Build and push semver tagged commits\n# Regular expression should match MAJOR.MINOR.PATCH[-PRERELEASE[.IDENTIFIER]]\n# eg. v0.7.1 v0.7.2-alpha v0.7.2-rc.1\nSEMVER_REGEX='^v[0-9]+\\.[0-9]+\\.[0-9]+(-([0-9A-Za-z-]+(\\.[0-9A-Za-z-]+)*))?$'\nif echo \"${RELEASE_VERSION}\" | grep -P \"$SEMVER_REGEX\" &>/dev/null ; then\n  VERSION_WITHOUT_PREFIX=${RELEASE_VERSION:1}\n\n  docker tag gcr.io/kf-feast/feast-${{ matrix.component }}:${GITHUB_SHA} gcr.io/kf-feast/feast-${{ matrix.component }}:${VERSION_WITHOUT_PREFIX}\n  docker push gcr.io/kf-feast/feast-${{ matrix.component }}:${VERSION_WITHOUT_PREFIX}\n\n  # Also update \"latest\" image if tagged commit is pushed to stable branch\n  HIGHEST_SEMVER_TAG=$(get_tag_release -m)\n  echo \"Only push to latest tag if tag is the highest semver version $HIGHEST_SEMVER_TAG\"\n\n  if [ \"${VERSION_WITHOUT_PREFIX}\" = \"${HIGHEST_SEMVER_TAG:1}\" ]\n  then\n    docker tag gcr.io/kf-feast/feast-${{ matrix.component }}:${GITHUB_SHA} gcr.io/kf-feast/feast-${{ matrix.component }}:latest\n    docker push gcr.io/kf-feast/feast-${{ matrix.component }}:latest\n  fi\nfi\n" [1386,2543]
            FIELD [2547,3720]
                String: "publish-ingestion-jar" [2547,2570]
                OBJECT [2571,3720]
                    FIELD [2572,2597]
                        String: "runs-on" [2572,2581]
                        ARRAY [2582,2597]
                            STRING [2583,2596]
                                String: "self-hosted" [2583,2596]
                    FIELD [2598,2635]
                        String: "env" [2598,2603]
                        OBJECT [2604,2635]
                            FIELD [2605,2634]
                                String: "PUBLISH_BUCKET" [2605,2621]
                                STRING [2622,2634]
                                    String: "feast-jobs" [2622,2634]
                    FIELD [2636,3719]
                        String: "steps" [2636,2643]
                        ARRAY [2644,3719]
                            OBJECT [2645,2675]
                                FIELD [2646,2674]
                                    String: "uses" [2646,2652]
                                    STRING [2653,2674]
                                        String: "actions/checkout@v2" [2653,2674]
                            OBJECT [2676,2804]
                                FIELD [2677,2740]
                                    String: "uses" [2677,2683]
                                    STRING [2684,2740]
                                        String: "GoogleCloudPlatform/github-actions/setup-gcloud@master" [2684,2740]
                                FIELD [2741,2803]
                                    String: "with" [2741,2747]
                                    OBJECT [2748,2803]
                                        FIELD [2749,2768]
                                            String: "version" [2749,2758]
                                            STRING [2759,2768]
                                                String: "290.0.1" [2759,2768]
                                        FIELD [2769,2802]
                                            String: "export_default_credentials" [2769,2797]
                                            TRUE [2798,2802]
                            OBJECT [2805,2866]
                                FIELD [2806,2836]
                                    String: "uses" [2806,2812]
                                    STRING [2813,2836]
                                        String: "actions/setup-java@v1" [2813,2836]
                                FIELD [2837,2865]
                                    String: "with" [2837,2843]
                                    OBJECT [2844,2865]
                                        FIELD [2845,2864]
                                            String: "java-version" [2845,2859]
                                            STRING [2860,2864]
                                                String: "11" [2860,2864]
                            OBJECT [2867,2935]
                                FIELD [2868,2901]
                                    String: "uses" [2868,2874]
                                    STRING [2875,2901]
                                        String: "stCarolas/setup-maven@v3" [2875,2901]
                                FIELD [2902,2934]
                                    String: "with" [2902,2908]
                                    OBJECT [2909,2934]
                                        FIELD [2910,2933]
                                            String: "maven-version" [2910,2925]
                                            STRING [2926,2933]
                                                String: "3.6.3" [2926,2933]
                            OBJECT [2936,3207]
                                FIELD [2937,2986]
                                    String: "name" [2937,2943]
                                    STRING [2944,2986]
                                        String: "Publish develop version of ingestion job" [2944,2986]
                                FIELD [2987,3206]
                                    String: "run" [2987,2992]
                                    STRING [2993,3206]
                                        String: "if [ ${GITHUB_REF#refs/*/} == \"master\" ]; then\n  make build-java-no-tests REVISION=develop\n  gsutil cp ./spark/ingestion/target/feast-ingestion-spark-develop.jar gs://${PUBLISH_BUCKET}/spark/ingestion/\nfi\n" [2993,3206]
                            OBJECT [3208,3300]
                                FIELD [3209,3229]
                                    String: "name" [3209,3215]
                                    STRING [3216,3229]
                                        String: "Get version" [3216,3229]
                                FIELD [3230,3299]
                                    String: "run" [3230,3235]
                                    STRING [3236,3299]
                                        String: "echo \"RELEASE_VERSION=${GITHUB_REF#refs/*/}\" >> $GITHUB_ENV" [3236,3299]
                            OBJECT [3301,3718]
                                FIELD [3302,3350]
                                    String: "name" [3302,3308]
                                    STRING [3309,3350]
                                        String: "Publish tagged version of ingestion job" [3309,3350]
                                FIELD [3351,3717]
                                    String: "run" [3351,3356]
                                    STRING [3357,3717]
                                        String: "SEMVER_REGEX='^v[0-9]+\\.[0-9]+\\.[0-9]+(-([0-9A-Za-z-]+(\\.[0-9A-Za-z-]+)*))?$'\nif echo \"${RELEASE_VERSION}\" | grep -P \"$SEMVER_REGEX\" &>/dev/null ; then\n  VERSION=${RELEASE_VERSION:1}\n  make build-java-no-tests REVISION=${VERSION}\n  gsutil cp ./spark/ingestion/target/feast-ingestion-spark-${VERSION}.jar gs://${PUBLISH_BUCKET}/spark/ingestion/\nfi" [3357,3717]