OBJECT [0,4899]
    FIELD [1,31]
        String: "name" [1,7]
        STRING [8,31]
            String: "CD - Kubernetes - Dev" [8,31]
    FIELD [32,277]
        String: "on" [32,36]
        OBJECT [37,277]
            FIELD [38,73]
                String: "schedule" [38,48]
                ARRAY [49,73]
                    OBJECT [50,72]
                        FIELD [51,71]
                            String: "cron" [51,57]
                            STRING [58,71]
                                String: "0 */3 * * *" [58,71]
            FIELD [74,276]
                String: "workflow_dispatch" [74,93]
                OBJECT [94,276]
                    FIELD [95,275]
                        String: "inputs" [95,103]
                        OBJECT [104,275]
                            FIELD [105,190]
                                String: "check-cache" [105,118]
                                OBJECT [119,190]
                                    FIELD [120,136]
                                        String: "type" [120,126]
                                        STRING [127,136]
                                            String: "boolean" [127,136]
                                    FIELD [137,173]
                                        String: "description" [137,150]
                                        STRING [151,173]
                                            String: "Check workflow cache" [151,173]
                                    FIELD [174,189]
                                        String: "default" [174,183]
                                        FALSE [184,189]
                            FIELD [191,274]
                                String: "deploy-helm" [191,204]
                                OBJECT [205,274]
                                    FIELD [206,222]
                                        String: "type" [206,212]
                                        STRING [213,222]
                                            String: "boolean" [213,222]
                                    FIELD [223,257]
                                        String: "description" [223,236]
                                        STRING [237,257]
                                            String: "Deploy Helm Charts" [237,257]
                                    FIELD [258,273]
                                        String: "default" [258,267]
                                        FALSE [268,273]
    FIELD [278,4898]
        String: "jobs" [278,284]
        OBJECT [285,4898]
            FIELD [286,832]
                String: "check-last-run" [286,302]
                OBJECT [303,832]
                    FIELD [304,339]
                        String: "runs-on" [304,313]
                        STRING [314,339]
                            String: "om-ci-16vcpu-ubuntu2204" [314,339]
                    FIELD [340,404]
                        String: "outputs" [340,349]
                        OBJECT [350,404]
                            FIELD [351,403]
                                String: "same-commit" [351,364]
                                STRING [365,403]
                                    String: "${{ steps.cache.outputs.cache-hit }}" [365,403]
                    FIELD [405,831]
                        String: "steps" [405,412]
                        ARRAY [413,831]
                            OBJECT [414,661]
                                FIELD [415,445]
                                    String: "name" [415,421]
                                    STRING [422,445]
                                        String: "Check for new changes" [422,445]
                                FIELD [446,529]
                                    String: "if" [446,450]
                                    STRING [451,529]
                                        String: "github.event_name == 'schedule' || github.event.inputs.check-cache == 'true'" [451,529]
                                FIELD [530,542]
                                    String: "id" [530,534]
                                    STRING [535,542]
                                        String: "cache" [535,542]
                                FIELD [543,568]
                                    String: "uses" [543,549]
                                    STRING [550,568]
                                        String: "actions/cache@v3" [550,568]
                                FIELD [569,660]
                                    String: "with" [569,575]
                                    OBJECT [576,660]
                                        FIELD [577,606]
                                            String: "path" [577,583]
                                            STRING [584,606]
                                                String: "scripts/k8s_dev_hash" [584,606]
                                        FIELD [607,640]
                                            String: "key" [607,612]
                                            STRING [613,640]
                                                String: "k8s-dev-${{ github.sha }}" [613,640]
                                        FIELD [641,659]
                                            String: "lookup-only" [641,654]
                                            TRUE [655,659]
                            OBJECT [662,830]
                                FIELD [663,687]
                                    String: "name" [663,669]
                                    STRING [670,687]
                                        String: "Save Commit SHA" [670,687]
                                FIELD [688,771]
                                    String: "if" [688,692]
                                    STRING [693,771]
                                        String: "github.event_name == 'schedule' || github.event.inputs.check-cache == 'true'" [693,771]
                                FIELD [772,829]
                                    String: "run" [772,777]
                                    STRING [778,829]
                                        String: "echo \"${{ github.sha }}\" > scripts/k8s_dev_hash" [778,829]
            FIELD [833,4897]
                String: "deploy-syft-dev" [833,850]
                OBJECT [851,4897]
                    FIELD [852,876]
                        String: "needs" [852,859]
                        STRING [860,876]
                            String: "check-last-run" [860,876]
                    FIELD [877,934]
                        String: "if" [877,881]
                        STRING [882,934]
                            String: "needs.check-last-run.outputs.same-commit != 'true'" [882,934]
                    FIELD [935,970]
                        String: "runs-on" [935,944]
                        STRING [945,970]
                            String: "om-ci-16vcpu-ubuntu2204" [945,970]
                    FIELD [971,4896]
                        String: "steps" [971,978]
                        ARRAY [979,4896]
                            OBJECT [980,1061]
                                FIELD [981,1018]
                                    String: "name" [981,987]
                                    STRING [988,1018]
                                        String: "Permission to home directory" [988,1018]
                                FIELD [1019,1060]
                                    String: "run" [1019,1024]
                                    STRING [1025,1060]
                                        String: "sudo chown -R $USER:$USER $HOME\n" [1025,1060]
                            OBJECT [1062,1092]
                                FIELD [1063,1091]
                                    String: "uses" [1063,1069]
                                    STRING [1070,1091]
                                        String: "actions/checkout@v4" [1070,1091]
                            OBJECT [1093,1287]
                                FIELD [1094,1122]
                                    String: "name" [1094,1100]
                                    STRING [1101,1122]
                                        String: "Checkout Infra Repo" [1101,1122]
                                FIELD [1123,1151]
                                    String: "uses" [1123,1129]
                                    STRING [1130,1151]
                                        String: "actions/checkout@v4" [1130,1151]
                                FIELD [1152,1286]
                                    String: "with" [1152,1158]
                                    OBJECT [1159,1286]
                                        FIELD [1160,1200]
                                            String: "repository" [1160,1172]
                                            STRING [1173,1200]
                                                String: "${{ secrets.INFRA_REPO }}" [1173,1200]
                                        FIELD [1201,1213]
                                            String: "ref" [1201,1206]
                                            STRING [1207,1213]
                                                String: "main" [1207,1213]
                                        FIELD [1214,1261]
                                            String: "token" [1214,1221]
                                            STRING [1222,1261]
                                                String: "${{ secrets.INFRA_BOT_COMMIT_TOKEN }}" [1222,1261]
                                        FIELD [1262,1285]
                                            String: "path" [1262,1268]
                                            STRING [1269,1285]
                                                String: "infrastructure" [1269,1285]
                            OBJECT [1288,1378]
                                FIELD [1289,1311]
                                    String: "name" [1289,1295]
                                    STRING [1296,1311]
                                        String: "Set up Python" [1296,1311]
                                FIELD [1312,1344]
                                    String: "uses" [1312,1318]
                                    STRING [1319,1344]
                                        String: "actions/setup-python@v3" [1319,1344]
                                FIELD [1345,1377]
                                    String: "with" [1345,1351]
                                    OBJECT [1352,1377]
                                        FIELD [1353,1376]
                                            String: "python-version" [1353,1369]
                                            STRING [1370,1376]
                                                String: "3.11" [1370,1376]
                            OBJECT [1379,1463]
                                FIELD [1380,1409]
                                    String: "name" [1380,1386]
                                    STRING [1387,1409]
                                        String: "Set up Docker Buildx" [1387,1409]
                                FIELD [1410,1423]
                                    String: "id" [1410,1414]
                                    STRING [1415,1423]
                                        String: "buildx" [1415,1423]
                                FIELD [1424,1462]
                                    String: "uses" [1424,1430]
                                    STRING [1431,1462]
                                        String: "docker/setup-buildx-action@v3" [1431,1462]
                            OBJECT [1464,1569]
                                FIELD [1465,1491]
                                    String: "name" [1465,1471]
                                    STRING [1472,1491]
                                        String: "Install Azure CLI" [1472,1491]
                                FIELD [1492,1568]
                                    String: "run" [1492,1497]
                                    STRING [1498,1568]
                                        String: "curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash\naz version\n" [1498,1568]
                            OBJECT [1570,1685]
                                FIELD [1571,1598]
                                    String: "name" [1571,1577]
                                    STRING [1578,1598]
                                        String: "Login to Azure CLI" [1578,1598]
                                FIELD [1599,1622]
                                    String: "uses" [1599,1605]
                                    STRING [1606,1622]
                                        String: "azure/login@v1" [1606,1622]
                                FIELD [1623,1684]
                                    String: "with" [1623,1629]
                                    OBJECT [1630,1684]
                                        FIELD [1631,1683]
                                            String: "creds" [1631,1638]
                                            STRING [1639,1683]
                                                String: "${{ secrets.AZURE_CREDENTIALS_GITHUB_CI }}" [1639,1683]
                            OBJECT [1686,1895]
                                FIELD [1687,1729]
                                    String: "name" [1687,1693]
                                    STRING [1694,1729]
                                        String: "Login to Azure Container Registry" [1694,1729]
                                FIELD [1730,1760]
                                    String: "uses" [1730,1736]
                                    STRING [1737,1760]
                                        String: "azure/docker-login@v1" [1737,1760]
                                FIELD [1761,1894]
                                    String: "with" [1761,1767]
                                    OBJECT [1768,1894]
                                        FIELD [1769,1811]
                                            String: "login-server" [1769,1783]
                                            STRING [1784,1811]
                                                String: "${{ secrets.ACR_SERVER }}" [1784,1811]
                                        FIELD [1812,1852]
                                            String: "username" [1812,1822]
                                            STRING [1823,1852]
                                                String: "${{ secrets.ACR_USERNAME }}" [1823,1852]
                                        FIELD [1853,1893]
                                            String: "password" [1853,1863]
                                            STRING [1864,1893]
                                                String: "${{ secrets.ACR_PASSWORD }}" [1864,1893]
                            OBJECT [1896,2038]
                                FIELD [1897,1930]
                                    String: "name" [1897,1903]
                                    STRING [1904,1930]
                                        String: "Set Grid package version" [1904,1930]
                                FIELD [1931,1942]
                                    String: "id" [1931,1935]
                                    STRING [1936,1942]
                                        String: "grid" [1936,1942]
                                FIELD [1943,1957]
                                    String: "shell" [1943,1950]
                                    STRING [1951,1957]
                                        String: "bash" [1951,1957]
                                FIELD [1958,2037]
                                    String: "run" [1958,1963]
                                    STRING [1964,2037]
                                        String: "echo \"GRID_VERSION=$(python packages/grid/VERSION)\" >> $GITHUB_OUTPUT" [1964,2037]
                            OBJECT [2039,2474]
                                FIELD [2040,2096]
                                    String: "name" [2040,2046]
                                    STRING [2047,2096]
                                        String: "Build and push `grid-backend` image to registry" [2047,2096]
                                FIELD [2097,2133]
                                    String: "uses" [2097,2103]
                                    STRING [2104,2133]
                                        String: "docker/build-push-action@v5" [2104,2133]
                                FIELD [2134,2473]
                                    String: "with" [2134,2140]
                                    OBJECT [2141,2473]
                                        FIELD [2142,2164]
                                            String: "context" [2142,2151]
                                            STRING [2152,2164]
                                                String: "./packages" [2152,2164]
                                        FIELD [2165,2216]
                                            String: "file" [2165,2171]
                                            STRING [2172,2216]
                                                String: "./packages/grid/backend/backend.dockerfile" [2172,2216]
                                        FIELD [2217,2228]
                                            String: "push" [2217,2223]
                                            TRUE [2224,2228]
                                        FIELD [2229,2247]
                                            String: "target" [2229,2237]
                                            STRING [2238,2247]
                                                String: "backend" [2238,2247]
                                        FIELD [2248,2472]
                                            String: "tags" [2248,2254]
                                            STRING [2255,2472]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-backend:${{ steps.grid.outputs.GRID_VERSION }}\n" [2255,2472]
                            OBJECT [2475,2942]
                                FIELD [2476,2533]
                                    String: "name" [2476,2482]
                                    STRING [2483,2533]
                                        String: "Build and push `grid-frontend` image to registry" [2483,2533]
                                FIELD [2534,2570]
                                    String: "uses" [2534,2540]
                                    STRING [2541,2570]
                                        String: "docker/build-push-action@v5" [2541,2570]
                                FIELD [2571,2941]
                                    String: "with" [2571,2577]
                                    OBJECT [2578,2941]
                                        FIELD [2579,2615]
                                            String: "context" [2579,2588]
                                            STRING [2589,2615]
                                                String: "./packages/grid/frontend" [2589,2615]
                                        FIELD [2616,2669]
                                            String: "file" [2616,2622]
                                            STRING [2623,2669]
                                                String: "./packages/grid/frontend/frontend.dockerfile" [2623,2669]
                                        FIELD [2670,2681]
                                            String: "push" [2670,2676]
                                            TRUE [2677,2681]
                                        FIELD [2682,2909]
                                            String: "tags" [2682,2688]
                                            STRING [2689,2909]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-frontend:${{ steps.grid.outputs.GRID_VERSION }}\n" [2689,2909]
                                        FIELD [2910,2940]
                                            String: "target" [2910,2918]
                                            STRING [2919,2940]
                                                String: "grid-ui-development" [2919,2940]
                            OBJECT [2943,3817]
                                FIELD [2944,2985]
                                    String: "name" [2944,2950]
                                    STRING [2951,2985]
                                        String: "Build Helm Chart & Copy to infra" [2951,2985]
                                FIELD [2986,3068]
                                    String: "if" [2986,2990]
                                    STRING [2991,3068]
                                        String: "github.ref == 'refs/heads/dev' || github.event.inputs.deploy-helm == 'true'" [2991,3068]
                                FIELD [3069,3083]
                                    String: "shell" [3069,3076]
                                    STRING [3077,3083]
                                        String: "bash" [3077,3083]
                                FIELD [3084,3816]
                                    String: "run" [3084,3089]
                                    STRING [3090,3816]
                                        String: "K3D_VERSION=v5.6.0\nDEVSPACE_VERSION=v6.3.3\n\n# install k3d\nwget https://github.com/k3d-io/k3d/releases/download/${K3D_VERSION}/k3d-linux-amd64\nmv k3d-linux-amd64 k3d\nchmod +x k3d\nexport PATH=`pwd`:$PATH\nk3d version\n\n# Install devspace\ncurl -sSL https://github.com/loft-sh/devspace/releases/download/${DEVSPACE_VERSION}/devspace-linux-amd64 -o ./devspace\nchmod +x devspace\ndevspace version\n\nexport CONTAINER_REGISTRY=${{ secrets.ACR_SERVER }}\nexport VERSION=dev-${{github.sha}}\ntox -e syft.build.helm\n\nrm -rf infrastructure/gitops/environments/dev/\nmkdir -p infrastructure/gitops/environments/dev/\ncp -R packages/grid/helm/syft/. packages/grid/helm/manifests.yaml infrastructure/gitops/environments/dev/\n" [3090,3816]
                            OBJECT [3818,4176]
                                FIELD [3819,3863]
                                    String: "name" [3819,3825]
                                    STRING [3826,3863]
                                        String: "Commit & push changes to Infra Repo" [3826,3863]
                                FIELD [3864,3946]
                                    String: "if" [3864,3868]
                                    STRING [3869,3946]
                                        String: "github.ref == 'refs/heads/dev' || github.event.inputs.deploy-helm == 'true'" [3869,3946]
                                FIELD [3947,3980]
                                    String: "uses" [3947,3953]
                                    STRING [3954,3980]
                                        String: "EndBug/add-and-commit@v9" [3954,3980]
                                FIELD [3981,4175]
                                    String: "with" [3981,3987]
                                    OBJECT [3988,4175]
                                        FIELD [3989,4031]
                                            String: "author_name" [3989,4002]
                                            STRING [4003,4031]
                                                String: "${{ secrets.OM_BOT_NAME }}" [4003,4031]
                                        FIELD [4032,4076]
                                            String: "author_email" [4032,4046]
                                            STRING [4047,4076]
                                                String: "${{ secrets.OM_BOT_EMAIL }}" [4047,4076]
                                        FIELD [4077,4117]
                                            String: "message" [4077,4086]
                                            STRING [4087,4117]
                                                String: "[env] Update dev helm charts" [4087,4117]
                                        FIELD [4118,4127]
                                            String: "add" [4118,4123]
                                            STRING [4124,4127]
                                                String: "." [4124,4127]
                                        FIELD [4128,4148]
                                            String: "push" [4128,4134]
                                            STRING [4135,4148]
                                                String: "origin main" [4135,4148]
                                        FIELD [4149,4174]
                                            String: "cwd" [4149,4154]
                                            STRING [4155,4174]
                                                String: "./infrastructure/" [4155,4174]
                            OBJECT [4177,4783]
                                FIELD [4178,4219]
                                    String: "name" [4178,4184]
                                    STRING [4185,4219]
                                        String: "Cleanup Azure Container Registry" [4185,4219]
                                FIELD [4220,4782]
                                    String: "run" [4220,4225]
                                    STRING [4226,4782]
                                        String: "ACR_REGISTRY_NAME=${{ secrets.ACR_REGISTRY_NAME }}\n\necho \">> Fetching repo list..\"\nREPO_LIST=$(az acr repository list -n $ACR_REGISTRY_NAME -o tsv)\n\nKEEP_PREV_VERSIONS=5\nTAIL_FROM_LINE=$(($KEEP_PREV_VERSIONS + 1))\n\nfor repo in $REPO_LIST\ndo\n    echo \"Cleaning up '$repo'\"\n    az acr repository show-tags --name $ACR_REGISTRY_NAME --repository $repo --orderby time_desc --output tsv \\\n      | grep dev- \\\n      | tail -n +$TAIL_FROM_LINE \\\n      | xargs -r -I% az acr repository untag --name $ACR_REGISTRY_NAME --image $repo:%\ndone\n" [4226,4782]
                            OBJECT [4784,4895]
                                FIELD [4785,4826]
                                    String: "name" [4785,4791]
                                    STRING [4792,4826]
                                        String: "Logout and cleanup Azure account" [4792,4826]
                                FIELD [4827,4842]
                                    String: "if" [4827,4831]
                                    STRING [4832,4842]
                                        String: "always()" [4832,4842]
                                FIELD [4843,4894]
                                    String: "run" [4843,4848]
                                    STRING [4849,4894]
                                        String: "az logout\naz cache purge\naz account clear" [4849,4894]