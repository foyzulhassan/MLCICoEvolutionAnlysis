OBJECT [0,3347]
    FIELD [1,21]
        String: "name" [1,7]
        STRING [8,21]
            String: "Build on M1" [8,21]
    FIELD [22,196]
        String: "on" [22,26]
        OBJECT [27,196]
            FIELD [28,96]
                String: "pull_request" [28,42]
                OBJECT [43,96]
                    FIELD [44,95]
                        String: "paths" [44,51]
                        ARRAY [52,95]
                            STRING [53,94]
                                String: ".github/workflows/build-m1-binaries.yml" [53,94]
            FIELD [97,170]
                String: "push" [97,103]
                OBJECT [104,170]
                    FIELD [105,127]
                        String: "branches" [105,115]
                        ARRAY [116,127]
                            STRING [117,126]
                                String: "nightly" [117,126]
                    FIELD [128,169]
                        String: "tags" [128,134]
                        ARRAY [135,169]
                            STRING [136,168]
                                String: "v[0-9]+.[0-9]+.[0-9]+-rc[0-9]+" [136,168]
            FIELD [171,195]
                String: "workflow_dispatch" [171,190]
                NULL [191,195]
    FIELD [197,224]
        String: "env" [197,202]
        OBJECT [203,224]
            FIELD [204,223]
                String: "CHANNEL" [204,213]
                STRING [214,223]
                    String: "nightly" [214,223]
    FIELD [225,3346]
        String: "jobs" [225,231]
        OBJECT [232,3346]
            FIELD [233,3345]
                String: "build_wheels" [233,247]
                OBJECT [248,3345]
                    FIELD [249,283]
                        String: "name" [249,255]
                        STRING [256,283]
                            String: "Build TorchText M1 wheels" [256,283]
                    FIELD [284,307]
                        String: "runs-on" [284,293]
                        STRING [294,307]
                            String: "macos-m1-11" [294,307]
                    FIELD [308,362]
                        String: "strategy" [308,318]
                        OBJECT [319,362]
                            FIELD [320,361]
                                String: "matrix" [320,328]
                                OBJECT [329,361]
                                    FIELD [330,360]
                                        String: "py_vers" [330,339]
                                        ARRAY [340,360]
                                            STRING [341,346]
                                                String: "3.8" [341,346]
                                            STRING [347,352]
                                                String: "3.9" [347,352]
                                            STRING [353,359]
                                                String: "3.10" [353,359]
                    FIELD [363,3344]
                        String: "steps" [363,370]
                        ARRAY [371,3344]
                            OBJECT [372,431]
                                FIELD [373,401]
                                    String: "name" [373,379]
                                    STRING [380,401]
                                        String: "Checkout repository" [380,401]
                                FIELD [402,430]
                                    String: "uses" [402,408]
                                    STRING [409,430]
                                        String: "actions/checkout@v2" [409,430]
                            OBJECT [432,708]
                                FIELD [433,478]
                                    String: "name" [433,439]
                                    STRING [440,478]
                                        String: "Set CHANNEL (only for tagged pushes)" [440,478]
                                FIELD [479,566]
                                    String: "if" [479,483]
                                    STRING [484,566]
                                        String: "${{ github.event_name == 'push' && startsWith(github.event.ref, 'refs/tags/') }}" [484,566]
                                FIELD [567,707]
                                    String: "run" [567,572]
                                    STRING [573,707]
                                        String: "# reference ends with an RC suffix\nif [[ ${GITHUB_REF_NAME} = *-rc[0-9]* ]]; then\n  echo \"CHANNEL=test\" >> \"$GITHUB_ENV\"\nfi\n" [573,707]
                            OBJECT [709,1920]
                                FIELD [710,743]
                                    String: "name" [710,716]
                                    STRING [717,743]
                                        String: "Build TorchText M1 wheel" [717,743]
                                FIELD [744,779]
                                    String: "shell" [744,751]
                                    STRING [752,779]
                                        String: "arch -arch arm64 bash {0}" [752,779]
                                FIELD [780,865]
                                    String: "env" [780,785]
                                    OBJECT [786,865]
                                        FIELD [787,830]
                                            String: "ENV_NAME" [787,797]
                                            STRING [798,830]
                                                String: "conda-env-${{ github.run_id }}" [798,830]
                                        FIELD [831,864]
                                            String: "PY_VERS" [831,840]
                                            STRING [841,864]
                                                String: "${{ matrix.py_vers }}" [841,864]
                                FIELD [866,1919]
                                    String: "run" [866,871]
                                    STRING [872,1919]
                                        String: "echo $PATH\n. ~/miniconda3/etc/profile.d/conda.sh\nset -ex\n. packaging/pkg_helpers.bash\n# if we are uploading to test channell, our version consist only of the base: 0.x.x - no date string or suffix added\nif [[ $CHANNEL == \"test\" ]]; then\n  setup_base_build_version\nelse\n  setup_build_version\nfi\ngit submodule update --init --recursive\nWHL_NAME=torchtext-${BUILD_VERSION}-cp${PY_VERS/.}-cp${PY_VERS/.}-macosx_11_0_arm64.whl\nconda create -yp ${ENV_NAME} python=${PY_VERS} numpy cmake ninja wheel pkg-config\nconda run -p ${ENV_NAME} python3 -mpip install torch --pre --extra-index-url=https://download.pytorch.org/whl/${CHANNEL}\nconda run -p ${ENV_NAME} python3 -mpip install delocate\nconda run -p ${ENV_NAME} python3 setup.py bdist_wheel\nexport PYTORCH_VERSION=\"$(conda run -p ${ENV_NAME} python3 -mpip show torch | grep ^Version: | sed 's/Version: *//')\"\nconda run -p ${ENV_NAME} DYLD_FALLBACK_LIBRARY_PATH=\"${ENV_NAME}/lib\" delocate-wheel -v --ignore-missing-dependencies dist/${WHL_NAME}\nconda env remove -p ${ENV_NAME}\n" [872,1919]
                            OBJECT [1921,2590]
                                FIELD [1922,1941]
                                    String: "name" [1922,1928]
                                    STRING [1929,1941]
                                        String: "Test wheel" [1929,1941]
                                FIELD [1942,1977]
                                    String: "shell" [1942,1949]
                                    STRING [1950,1977]
                                        String: "arch -arch arm64 bash {0}" [1950,1977]
                                FIELD [1978,2068]
                                    String: "env" [1978,1983]
                                    OBJECT [1984,2068]
                                        FIELD [1985,2033]
                                            String: "ENV_NAME" [1985,1995]
                                            STRING [1996,2033]
                                                String: "conda-test-env-${{ github.run_id }}" [1996,2033]
                                        FIELD [2034,2067]
                                            String: "PY_VERS" [2034,2043]
                                            STRING [2044,2067]
                                                String: "${{ matrix.py_vers }}" [2044,2067]
                                FIELD [2069,2589]
                                    String: "run" [2069,2074]
                                    STRING [2075,2589]
                                        String: ". ~/miniconda3/etc/profile.d/conda.sh\nset -ex\nconda create -yp ${ENV_NAME} python=${PY_VERS} numpy\nconda run -p ${ENV_NAME} python3 -mpip install torch --pre --extra-index-url=https://download.pytorch.org/whl/${CHANNEL}\nconda run -p ${ENV_NAME} python3 -mpip install dist/*.whl\n# Test torch is importable, by changing cwd and running import commands\nconda run --cwd /tmp -p ${ENV_NAME} python3 -c \"import torchtext;print('torchtext version is ', torchtext.__version__)\"\nconda env remove -p ${ENV_NAME}\n" [2075,2589]
                            OBJECT [2591,2871]
                                FIELD [2592,2623]
                                    String: "name" [2592,2598]
                                    STRING [2599,2623]
                                        String: "Upload wheel to GitHub" [2599,2623]
                                FIELD [2624,2756]
                                    String: "if" [2624,2628]
                                    STRING [2629,2756]
                                        String: "${{ github.event_name == 'push' && (github.event.ref == 'ref/heads/nightly' || startsWith(github.event.ref, 'refs/tags/')) }}" [2629,2756]
                                FIELD [2757,2792]
                                    String: "uses" [2757,2763]
                                    STRING [2764,2792]
                                        String: "actions/upload-artifact@v3" [2764,2792]
                                FIELD [2793,2870]
                                    String: "with" [2793,2799]
                                    OBJECT [2800,2870]
                                        FIELD [2801,2854]
                                            String: "name" [2801,2807]
                                            STRING [2808,2854]
                                                String: "torchtext-py${{ matrix.py_vers }}-macos11-m1" [2808,2854]
                                        FIELD [2855,2869]
                                            String: "path" [2855,2861]
                                            STRING [2862,2869]
                                                String: "dist/" [2862,2869]
                            OBJECT [2872,3343]
                                FIELD [2873,2900]
                                    String: "name" [2873,2879]
                                    STRING [2880,2900]
                                        String: "Upload wheel to S3" [2880,2900]
                                FIELD [2901,3033]
                                    String: "if" [2901,2905]
                                    STRING [2906,3033]
                                        String: "${{ github.event_name == 'push' && (github.event.ref == 'ref/heads/nightly' || startsWith(github.event.ref, 'refs/tags/')) }}" [2906,3033]
                                FIELD [3034,3069]
                                    String: "shell" [3034,3041]
                                    STRING [3042,3069]
                                        String: "arch -arch arm64 bash {0}" [3042,3069]
                                FIELD [3070,3229]
                                    String: "env" [3070,3075]
                                    OBJECT [3076,3229]
                                        FIELD [3077,3148]
                                            String: "AWS_ACCESS_KEY_ID" [3077,3096]
                                            STRING [3097,3148]
                                                String: "${{ secrets.AWS_PYTORCH_UPLOADER_ACCESS_KEY_ID }}" [3097,3148]
                                        FIELD [3149,3228]
                                            String: "AWS_SECRET_ACCESS_KEY" [3149,3172]
                                            STRING [3173,3228]
                                                String: "${{ secrets.AWS_PYTORCH_UPLOADER_SECRET_ACCESS_KEY }}" [3173,3228]
                                FIELD [3230,3342]
                                    String: "run" [3230,3235]
                                    STRING [3236,3342]
                                        String: "for pkg in dist/*; do\n  aws s3 cp \"$pkg\" \"s3://pytorch/whl/${CHANNEL}/cpu/\" --acl public-read\ndone" [3236,3342]