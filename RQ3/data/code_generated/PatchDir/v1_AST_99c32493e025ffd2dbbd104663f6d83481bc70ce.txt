OBJECT [0,18641]
    FIELD [1,35]
        String: "name" [1,7]
        STRING [8,35]
            String: "Self-hosted runner (push)" [8,35]
    FIELD [36,282]
        String: "on" [36,40]
        OBJECT [41,282]
            FIELD [42,149]
                String: "workflow_run" [42,56]
                OBJECT [57,149]
                    FIELD [58,106]
                        String: "workflows" [58,69]
                        ARRAY [70,106]
                            STRING [71,105]
                                String: "Self-hosted runner (push-caller)" [71,105]
                    FIELD [107,126]
                        String: "branches" [107,117]
                        ARRAY [118,126]
                            STRING [119,125]
                                String: "main" [119,125]
                    FIELD [127,148]
                        String: "types" [127,134]
                        ARRAY [135,148]
                            STRING [136,147]
                                String: "completed" [136,147]
            FIELD [150,254]
                String: "push" [150,156]
                OBJECT [157,254]
                    FIELD [158,184]
                        String: "branches" [158,168]
                        ARRAY [169,184]
                            STRING [170,176]
                                String: "ci_*" [170,176]
                            STRING [177,183]
                                String: "ci-*" [177,183]
                    FIELD [185,253]
                        String: "paths" [185,192]
                        ARRAY [193,253]
                            STRING [194,202]
                                String: "src/**" [194,202]
                            STRING [203,213]
                                String: "tests/**" [203,213]
                            STRING [214,226]
                                String: ".github/**" [214,226]
                            STRING [227,241]
                                String: "templates/**" [227,241]
                            STRING [242,252]
                                String: "utils/**" [242,252]
            FIELD [255,281]
                String: "repository_dispatch" [255,276]
                NULL [277,281]
    FIELD [283,458]
        String: "env" [283,288]
        OBJECT [289,458]
            FIELD [290,312]
                String: "HF_HOME" [290,299]
                STRING [300,312]
                    String: "/mnt/cache" [300,312]
            FIELD [313,338]
                String: "TRANSFORMERS_IS_CI" [313,333]
                TRUE [334,338]
            FIELD [339,358]
                String: "OMP_NUM_THREADS" [339,356]
                NUMBER [357,358]
                    Number: 8 [357,358]
            FIELD [359,378]
                String: "MKL_NUM_THREADS" [359,376]
                NUMBER [377,378]
                    Number: 8 [377,378]
            FIELD [379,398]
                String: "PYTEST_TIMEOUT" [379,395]
                NUMBER [396,398]
                    Number: 60 [396,398]
            FIELD [399,431]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [399,426]
                TRUE [427,431]
            FIELD [432,457]
                String: "RUN_PT_TF_CROSS_TESTS" [432,455]
                NUMBER [456,457]
                    Number: 1 [456,457]
    FIELD [459,18640]
        String: "jobs" [459,465]
        OBJECT [466,18640]
            FIELD [467,840]
                String: "check_runner_status" [467,488]
                OBJECT [489,840]
                    FIELD [490,518]
                        String: "name" [490,496]
                        STRING [497,518]
                            String: "Check Runner Status" [497,518]
                    FIELD [519,544]
                        String: "runs-on" [519,528]
                        STRING [529,544]
                            String: "ubuntu-latest" [529,544]
                    FIELD [545,839]
                        String: "steps" [545,552]
                        ARRAY [553,839]
                            OBJECT [554,640]
                                FIELD [555,585]
                                    String: "name" [555,561]
                                    STRING [562,585]
                                        String: "Checkout transformers" [562,585]
                                FIELD [586,614]
                                    String: "uses" [586,592]
                                    STRING [593,614]
                                        String: "actions/checkout@v2" [593,614]
                                FIELD [615,639]
                                    String: "with" [615,621]
                                    OBJECT [622,639]
                                        FIELD [623,638]
                                            String: "fetch-depth" [623,636]
                                            NUMBER [637,638]
                                                Number: 2 [637,638]
                            OBJECT [641,838]
                                FIELD [642,670]
                                    String: "name" [642,648]
                                    STRING [649,670]
                                        String: "Check Runner Status" [649,670]
                                FIELD [671,837]
                                    String: "run" [671,676]
                                    STRING [677,837]
                                        String: "python utils/check_self_hosted_runner.py --target_runners single-gpu-ci-runner-docker,multi-gpu-ci-runner-docker --token ${{ secrets.ACCESS_REPO_INFO_TOKEN }}" [677,837]
            FIELD [841,1267]
                String: "check_runners" [841,856]
                OBJECT [857,1267]
                    FIELD [858,880]
                        String: "name" [858,864]
                        STRING [865,880]
                            String: "Check Runners" [865,880]
                    FIELD [881,910]
                        String: "needs" [881,888]
                        STRING [889,910]
                            String: "check_runner_status" [889,910]
                    FIELD [911,976]
                        String: "strategy" [911,921]
                        OBJECT [922,976]
                            FIELD [923,975]
                                String: "matrix" [923,931]
                                OBJECT [932,975]
                                    FIELD [933,974]
                                        String: "machine_type" [933,947]
                                        ARRAY [948,974]
                                            STRING [949,961]
                                                String: "single-gpu" [949,961]
                                            STRING [962,973]
                                                String: "multi-gpu" [962,973]
                    FIELD [977,1044]
                        String: "runs-on" [977,986]
                        ARRAY [987,1044]
                            STRING [988,1001]
                                String: "self-hosted" [988,1001]
                            STRING [1002,1014]
                                String: "docker-gpu" [1002,1014]
                            STRING [1015,1043]
                                String: "${{ matrix.machine_type }}" [1015,1043]
                    FIELD [1045,1213]
                        String: "container" [1045,1056]
                        OBJECT [1057,1213]
                            FIELD [1058,1115]
                                String: "image" [1058,1065]
                                STRING [1066,1115]
                                    String: "huggingface/transformers-all-latest-gpu-push-ci" [1066,1115]
                            FIELD [1116,1212]
                                String: "options" [1116,1125]
                                STRING [1126,1212]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1126,1212]
                    FIELD [1214,1266]
                        String: "steps" [1214,1221]
                        ARRAY [1222,1266]
                            OBJECT [1223,1265]
                                FIELD [1224,1243]
                                    String: "name" [1224,1230]
                                    STRING [1231,1243]
                                        String: "NVIDIA-SMI" [1231,1243]
                                FIELD [1244,1264]
                                    String: "run" [1244,1249]
                                    STRING [1250,1264]
                                        String: "nvidia-smi\n" [1250,1264]
            FIELD [1268,4060]
                String: "setup" [1268,1275]
                OBJECT [1276,4060]
                    FIELD [1277,1291]
                        String: "name" [1277,1283]
                        STRING [1284,1291]
                            String: "Setup" [1284,1291]
                    FIELD [1292,1315]
                        String: "needs" [1292,1299]
                        STRING [1300,1315]
                            String: "check_runners" [1300,1315]
                    FIELD [1316,1381]
                        String: "strategy" [1316,1326]
                        OBJECT [1327,1381]
                            FIELD [1328,1380]
                                String: "matrix" [1328,1336]
                                OBJECT [1337,1380]
                                    FIELD [1338,1379]
                                        String: "machine_type" [1338,1352]
                                        ARRAY [1353,1379]
                                            STRING [1354,1366]
                                                String: "single-gpu" [1354,1366]
                                            STRING [1367,1378]
                                                String: "multi-gpu" [1367,1378]
                    FIELD [1382,1449]
                        String: "runs-on" [1382,1391]
                        ARRAY [1392,1449]
                            STRING [1393,1406]
                                String: "self-hosted" [1393,1406]
                            STRING [1407,1419]
                                String: "docker-gpu" [1407,1419]
                            STRING [1420,1448]
                                String: "${{ matrix.machine_type }}" [1420,1448]
                    FIELD [1450,1618]
                        String: "container" [1450,1461]
                        OBJECT [1462,1618]
                            FIELD [1463,1520]
                                String: "image" [1463,1470]
                                STRING [1471,1520]
                                    String: "huggingface/transformers-all-latest-gpu-push-ci" [1471,1520]
                            FIELD [1521,1617]
                                String: "options" [1521,1530]
                                STRING [1531,1617]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1531,1617]
                    FIELD [1619,1734]
                        String: "outputs" [1619,1628]
                        OBJECT [1629,1734]
                            FIELD [1630,1679]
                                String: "matrix" [1630,1638]
                                STRING [1639,1679]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [1639,1679]
                            FIELD [1680,1733]
                                String: "test_map" [1680,1690]
                                STRING [1691,1733]
                                    String: "${{ steps.set-matrix.outputs.test_map }}" [1691,1733]
                    FIELD [1735,4059]
                        String: "steps" [1735,1742]
                        ARRAY [1743,4059]
                            OBJECT [1744,2461]
                                FIELD [1745,1790]
                                    String: "name" [1745,1751]
                                    STRING [1752,1790]
                                        String: "Prepare custom environment variables" [1752,1790]
                                FIELD [1791,1805]
                                    String: "shell" [1791,1798]
                                    STRING [1799,1805]
                                        String: "bash" [1799,1805]
                                FIELD [1806,2460]
                                    String: "run" [1806,1811]
                                    STRING [1812,2460]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [1812,2460]
                            OBJECT [2462,2597]
                                FIELD [2463,2499]
                                    String: "name" [2463,2469]
                                    STRING [2470,2499]
                                        String: "print environment variables" [2470,2499]
                                FIELD [2500,2596]
                                    String: "run" [2500,2505]
                                    STRING [2506,2596]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [2506,2596]
                            OBJECT [2598,2919]
                                FIELD [2599,2648]
                                    String: "name" [2599,2605]
                                    STRING [2606,2648]
                                        String: "Update clone using environment variables" [2606,2648]
                                FIELD [2649,2684]
                                    String: "working-directory" [2649,2668]
                                    STRING [2669,2684]
                                        String: "/transformers" [2669,2684]
                                FIELD [2685,2918]
                                    String: "run" [2685,2690]
                                    STRING [2691,2918]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [2691,2918]
                            OBJECT [2920,3058]
                                FIELD [2921,2937]
                                    String: "name" [2921,2927]
                                    STRING [2928,2937]
                                        String: "Cleanup" [2928,2937]
                                FIELD [2938,2973]
                                    String: "working-directory" [2938,2957]
                                    STRING [2958,2973]
                                        String: "/transformers" [2958,2973]
                                FIELD [2974,3057]
                                    String: "run" [2974,2979]
                                    STRING [2980,3057]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [2980,3057]
                            OBJECT [3059,3253]
                                FIELD [3060,3091]
                                    String: "name" [3060,3066]
                                    STRING [3067,3091]
                                        String: "Fetch the tests to run" [3067,3091]
                                FIELD [3092,3127]
                                    String: "working-directory" [3092,3111]
                                    STRING [3112,3127]
                                        String: "/transformers" [3112,3127]
                                FIELD [3128,3252]
                                    String: "run" [3128,3133]
                                    STRING [3134,3252]
                                        String: "pip install --upgrade git-python\npython utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [3134,3252]
                            OBJECT [3254,3396]
                                FIELD [3255,3284]
                                    String: "name" [3255,3261]
                                    STRING [3262,3284]
                                        String: "Report fetched tests" [3262,3284]
                                FIELD [3285,3320]
                                    String: "uses" [3285,3291]
                                    STRING [3292,3320]
                                        String: "actions/upload-artifact@v2" [3292,3320]
                                FIELD [3321,3395]
                                    String: "with" [3321,3327]
                                    OBJECT [3328,3395]
                                        FIELD [3329,3350]
                                            String: "name" [3329,3335]
                                            STRING [3336,3350]
                                                String: "test_fetched" [3336,3350]
                                        FIELD [3351,3394]
                                            String: "path" [3351,3357]
                                            STRING [3358,3394]
                                                String: "/transformers/test_preparation.txt" [3358,3394]
                            OBJECT [3397,4058]
                                FIELD [3398,3415]
                                    String: "id" [3398,3402]
                                    STRING [3403,3415]
                                        String: "set-matrix" [3403,3415]
                                FIELD [3416,3451]
                                    String: "name" [3416,3422]
                                    STRING [3423,3451]
                                        String: "Organize tests into models" [3423,3451]
                                FIELD [3452,3487]
                                    String: "working-directory" [3452,3471]
                                    STRING [3472,3487]
                                        String: "/transformers" [3472,3487]
                                FIELD [3488,4057]
                                    String: "run" [3488,3493]
                                    STRING [3494,4057]
                                        String: "if [ -f test_map.json ]; then\n    keys=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); d = list(test_map.keys()); print(d)')\n    test_map=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); print(test_map)')\nelse\n    keys=$(python3 -c 'keys = [\"dummy\"]; print(keys)')\n    test_map=$(python3 -c 'test_map = {\"dummy\": []}; print(test_map)')\nfi\necho $keys\necho $test_map\necho \"::set-output name=matrix::$keys\"\necho \"::set-output name=test_map::$test_map\"\n" [3494,4057]
            FIELD [4061,6989]
                String: "run_tests_single_gpu" [4061,4083]
                OBJECT [4084,6989]
                    FIELD [4085,4105]
                        String: "name" [4085,4091]
                        STRING [4092,4105]
                            String: "Model tests" [4092,4105]
                    FIELD [4106,4121]
                        String: "needs" [4106,4113]
                        STRING [4114,4121]
                            String: "setup" [4114,4121]
                    FIELD [4122,4192]
                        String: "if" [4122,4126]
                        STRING [4127,4192]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [4127,4192]
                    FIELD [4193,4320]
                        String: "strategy" [4193,4203]
                        OBJECT [4204,4320]
                            FIELD [4205,4222]
                                String: "fail-fast" [4205,4216]
                                FALSE [4217,4222]
                            FIELD [4223,4319]
                                String: "matrix" [4223,4231]
                                OBJECT [4232,4319]
                                    FIELD [4233,4288]
                                        String: "folders" [4233,4242]
                                        STRING [4243,4288]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [4243,4288]
                                    FIELD [4289,4318]
                                        String: "machine_type" [4289,4303]
                                        ARRAY [4304,4318]
                                            STRING [4305,4317]
                                                String: "single-gpu" [4305,4317]
                    FIELD [4321,4388]
                        String: "runs-on" [4321,4330]
                        ARRAY [4331,4388]
                            STRING [4332,4345]
                                String: "self-hosted" [4332,4345]
                            STRING [4346,4358]
                                String: "docker-gpu" [4346,4358]
                            STRING [4359,4387]
                                String: "${{ matrix.machine_type }}" [4359,4387]
                    FIELD [4389,4557]
                        String: "container" [4389,4400]
                        OBJECT [4401,4557]
                            FIELD [4402,4459]
                                String: "image" [4402,4409]
                                STRING [4410,4459]
                                    String: "huggingface/transformers-all-latest-gpu-push-ci" [4410,4459]
                            FIELD [4460,4556]
                                String: "options" [4460,4469]
                                STRING [4470,4556]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [4470,4556]
                    FIELD [4558,6988]
                        String: "steps" [4558,4565]
                        ARRAY [4566,6988]
                            OBJECT [4567,5284]
                                FIELD [4568,4613]
                                    String: "name" [4568,4574]
                                    STRING [4575,4613]
                                        String: "Prepare custom environment variables" [4575,4613]
                                FIELD [4614,4628]
                                    String: "shell" [4614,4621]
                                    STRING [4622,4628]
                                        String: "bash" [4622,4628]
                                FIELD [4629,5283]
                                    String: "run" [4629,4634]
                                    STRING [4635,5283]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [4635,5283]
                            OBJECT [5285,5420]
                                FIELD [5286,5322]
                                    String: "name" [5286,5292]
                                    STRING [5293,5322]
                                        String: "print environment variables" [5293,5322]
                                FIELD [5323,5419]
                                    String: "run" [5323,5328]
                                    STRING [5329,5419]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [5329,5419]
                            OBJECT [5421,5742]
                                FIELD [5422,5471]
                                    String: "name" [5422,5428]
                                    STRING [5429,5471]
                                        String: "Update clone using environment variables" [5429,5471]
                                FIELD [5472,5507]
                                    String: "working-directory" [5472,5491]
                                    STRING [5492,5507]
                                        String: "/transformers" [5492,5507]
                                FIELD [5508,5741]
                                    String: "run" [5508,5513]
                                    STRING [5514,5741]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [5514,5741]
                            OBJECT [5743,6089]
                                FIELD [5744,5786]
                                    String: "name" [5744,5750]
                                    STRING [5751,5786]
                                        String: "Echo folder ${{ matrix.folders }}" [5751,5786]
                                FIELD [5787,5801]
                                    String: "shell" [5787,5794]
                                    STRING [5795,5801]
                                        String: "bash" [5795,5801]
                                FIELD [5802,6088]
                                    String: "run" [5802,5807]
                                    STRING [5808,6088]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [5808,6088]
                            OBJECT [6090,6132]
                                FIELD [6091,6110]
                                    String: "name" [6091,6097]
                                    STRING [6098,6110]
                                        String: "NVIDIA-SMI" [6098,6110]
                                FIELD [6111,6131]
                                    String: "run" [6111,6116]
                                    STRING [6117,6131]
                                        String: "nvidia-smi\n" [6117,6131]
                            OBJECT [6133,6228]
                                FIELD [6134,6154]
                                    String: "name" [6134,6140]
                                    STRING [6141,6154]
                                        String: "Environment" [6141,6154]
                                FIELD [6155,6190]
                                    String: "working-directory" [6155,6174]
                                    STRING [6175,6190]
                                        String: "/transformers" [6175,6190]
                                FIELD [6191,6227]
                                    String: "run" [6191,6196]
                                    STRING [6197,6227]
                                        String: "python3 utils/print_env.py\n" [6197,6227]
                            OBJECT [6229,6502]
                                FIELD [6230,6277]
                                    String: "name" [6230,6236]
                                    STRING [6237,6277]
                                        String: "Run all non-slow selected tests on GPU" [6237,6277]
                                FIELD [6278,6313]
                                    String: "working-directory" [6278,6297]
                                    STRING [6298,6313]
                                        String: "/transformers" [6298,6313]
                                FIELD [6314,6501]
                                    String: "run" [6314,6319]
                                    STRING [6320,6501]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [6320,6501]
                            OBJECT [6503,6696]
                                FIELD [6504,6534]
                                    String: "name" [6504,6510]
                                    STRING [6511,6534]
                                        String: "Failure short reports" [6511,6534]
                                FIELD [6535,6558]
                                    String: "if" [6535,6539]
                                    STRING [6540,6558]
                                        String: "${{ failure() }}" [6540,6558]
                                FIELD [6559,6583]
                                    String: "continue-on-error" [6559,6578]
                                    TRUE [6579,6583]
                                FIELD [6584,6695]
                                    String: "run" [6584,6589]
                                    STRING [6590,6695]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [6590,6695]
                            OBJECT [6697,6987]
                                FIELD [6698,6735]
                                    String: "name" [6698,6704]
                                    STRING [6705,6735]
                                        String: "Test suite reports artifacts" [6705,6735]
                                FIELD [6736,6758]
                                    String: "if" [6736,6740]
                                    STRING [6741,6758]
                                        String: "${{ always() }}" [6741,6758]
                                FIELD [6759,6794]
                                    String: "uses" [6759,6765]
                                    STRING [6766,6794]
                                        String: "actions/upload-artifact@v2" [6766,6794]
                                FIELD [6795,6986]
                                    String: "with" [6795,6801]
                                    OBJECT [6802,6986]
                                        FIELD [6803,6895]
                                            String: "name" [6803,6809]
                                            STRING [6810,6895]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [6810,6895]
                                        FIELD [6896,6985]
                                            String: "path" [6896,6902]
                                            STRING [6903,6985]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [6903,6985]
            FIELD [6990,9954]
                String: "run_tests_multi_gpu" [6990,7011]
                OBJECT [7012,9954]
                    FIELD [7013,7033]
                        String: "name" [7013,7019]
                        STRING [7020,7033]
                            String: "Model tests" [7020,7033]
                    FIELD [7034,7049]
                        String: "needs" [7034,7041]
                        STRING [7042,7049]
                            String: "setup" [7042,7049]
                    FIELD [7050,7120]
                        String: "if" [7050,7054]
                        STRING [7055,7120]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [7055,7120]
                    FIELD [7121,7247]
                        String: "strategy" [7121,7131]
                        OBJECT [7132,7247]
                            FIELD [7133,7150]
                                String: "fail-fast" [7133,7144]
                                FALSE [7145,7150]
                            FIELD [7151,7246]
                                String: "matrix" [7151,7159]
                                OBJECT [7160,7246]
                                    FIELD [7161,7216]
                                        String: "folders" [7161,7170]
                                        STRING [7171,7216]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [7171,7216]
                                    FIELD [7217,7245]
                                        String: "machine_type" [7217,7231]
                                        ARRAY [7232,7245]
                                            STRING [7233,7244]
                                                String: "multi-gpu" [7233,7244]
                    FIELD [7248,7315]
                        String: "runs-on" [7248,7257]
                        ARRAY [7258,7315]
                            STRING [7259,7272]
                                String: "self-hosted" [7259,7272]
                            STRING [7273,7285]
                                String: "docker-gpu" [7273,7285]
                            STRING [7286,7314]
                                String: "${{ matrix.machine_type }}" [7286,7314]
                    FIELD [7316,7486]
                        String: "container" [7316,7327]
                        OBJECT [7328,7486]
                            FIELD [7329,7386]
                                String: "image" [7329,7336]
                                STRING [7337,7386]
                                    String: "huggingface/transformers-all-latest-gpu-push-ci" [7337,7386]
                            FIELD [7387,7485]
                                String: "options" [7387,7396]
                                STRING [7397,7485]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [7397,7485]
                    FIELD [7487,9953]
                        String: "steps" [7487,7494]
                        ARRAY [7495,9953]
                            OBJECT [7496,8213]
                                FIELD [7497,7542]
                                    String: "name" [7497,7503]
                                    STRING [7504,7542]
                                        String: "Prepare custom environment variables" [7504,7542]
                                FIELD [7543,7557]
                                    String: "shell" [7543,7550]
                                    STRING [7551,7557]
                                        String: "bash" [7551,7557]
                                FIELD [7558,8212]
                                    String: "run" [7558,7563]
                                    STRING [7564,8212]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [7564,8212]
                            OBJECT [8214,8349]
                                FIELD [8215,8251]
                                    String: "name" [8215,8221]
                                    STRING [8222,8251]
                                        String: "print environment variables" [8222,8251]
                                FIELD [8252,8348]
                                    String: "run" [8252,8257]
                                    STRING [8258,8348]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [8258,8348]
                            OBJECT [8350,8671]
                                FIELD [8351,8400]
                                    String: "name" [8351,8357]
                                    STRING [8358,8400]
                                        String: "Update clone using environment variables" [8358,8400]
                                FIELD [8401,8436]
                                    String: "working-directory" [8401,8420]
                                    STRING [8421,8436]
                                        String: "/transformers" [8421,8436]
                                FIELD [8437,8670]
                                    String: "run" [8437,8442]
                                    STRING [8443,8670]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [8443,8670]
                            OBJECT [8672,9018]
                                FIELD [8673,8715]
                                    String: "name" [8673,8679]
                                    STRING [8680,8715]
                                        String: "Echo folder ${{ matrix.folders }}" [8680,8715]
                                FIELD [8716,8730]
                                    String: "shell" [8716,8723]
                                    STRING [8724,8730]
                                        String: "bash" [8724,8730]
                                FIELD [8731,9017]
                                    String: "run" [8731,8736]
                                    STRING [8737,9017]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [8737,9017]
                            OBJECT [9019,9061]
                                FIELD [9020,9039]
                                    String: "name" [9020,9026]
                                    STRING [9027,9039]
                                        String: "NVIDIA-SMI" [9027,9039]
                                FIELD [9040,9060]
                                    String: "run" [9040,9045]
                                    STRING [9046,9060]
                                        String: "nvidia-smi\n" [9046,9060]
                            OBJECT [9062,9157]
                                FIELD [9063,9083]
                                    String: "name" [9063,9069]
                                    STRING [9070,9083]
                                        String: "Environment" [9070,9083]
                                FIELD [9084,9119]
                                    String: "working-directory" [9084,9103]
                                    STRING [9104,9119]
                                        String: "/transformers" [9104,9119]
                                FIELD [9120,9156]
                                    String: "run" [9120,9125]
                                    STRING [9126,9156]
                                        String: "python3 utils/print_env.py\n" [9126,9156]
                            OBJECT [9158,9467]
                                FIELD [9159,9206]
                                    String: "name" [9159,9165]
                                    STRING [9166,9206]
                                        String: "Run all non-slow selected tests on GPU" [9166,9206]
                                FIELD [9207,9242]
                                    String: "env" [9207,9212]
                                    OBJECT [9213,9242]
                                        FIELD [9214,9241]
                                            String: "MKL_SERVICE_FORCE_INTEL" [9214,9239]
                                            NUMBER [9240,9241]
                                                Number: 1 [9240,9241]
                                FIELD [9243,9278]
                                    String: "working-directory" [9243,9262]
                                    STRING [9263,9278]
                                        String: "/transformers" [9263,9278]
                                FIELD [9279,9466]
                                    String: "run" [9279,9284]
                                    STRING [9285,9466]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [9285,9466]
                            OBJECT [9468,9661]
                                FIELD [9469,9499]
                                    String: "name" [9469,9475]
                                    STRING [9476,9499]
                                        String: "Failure short reports" [9476,9499]
                                FIELD [9500,9523]
                                    String: "if" [9500,9504]
                                    STRING [9505,9523]
                                        String: "${{ failure() }}" [9505,9523]
                                FIELD [9524,9548]
                                    String: "continue-on-error" [9524,9543]
                                    TRUE [9544,9548]
                                FIELD [9549,9660]
                                    String: "run" [9549,9554]
                                    STRING [9555,9660]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [9555,9660]
                            OBJECT [9662,9952]
                                FIELD [9663,9700]
                                    String: "name" [9663,9669]
                                    STRING [9670,9700]
                                        String: "Test suite reports artifacts" [9670,9700]
                                FIELD [9701,9723]
                                    String: "if" [9701,9705]
                                    STRING [9706,9723]
                                        String: "${{ always() }}" [9706,9723]
                                FIELD [9724,9759]
                                    String: "uses" [9724,9730]
                                    STRING [9731,9759]
                                        String: "actions/upload-artifact@v2" [9731,9759]
                                FIELD [9760,9951]
                                    String: "with" [9760,9766]
                                    OBJECT [9767,9951]
                                        FIELD [9768,9860]
                                            String: "name" [9768,9774]
                                            STRING [9775,9860]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [9775,9860]
                                        FIELD [9861,9950]
                                            String: "path" [9861,9867]
                                            STRING [9868,9950]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [9868,9950]
            FIELD [9955,13017]
                String: "run_tests_torch_cuda_extensions_single_gpu" [9955,9999]
                OBJECT [10000,13017]
                    FIELD [10001,10036]
                        String: "name" [10001,10007]
                        STRING [10008,10036]
                            String: "Torch CUDA extension tests" [10008,10036]
                    FIELD [10037,10052]
                        String: "needs" [10037,10044]
                        STRING [10045,10052]
                            String: "setup" [10045,10052]
                    FIELD [10053,10181]
                        String: "if" [10053,10057]
                        STRING [10058,10181]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [10058,10181]
                    FIELD [10182,10253]
                        String: "strategy" [10182,10192]
                        OBJECT [10193,10253]
                            FIELD [10194,10211]
                                String: "fail-fast" [10194,10205]
                                FALSE [10206,10211]
                            FIELD [10212,10252]
                                String: "matrix" [10212,10220]
                                OBJECT [10221,10252]
                                    FIELD [10222,10251]
                                        String: "machine_type" [10222,10236]
                                        ARRAY [10237,10251]
                                            STRING [10238,10250]
                                                String: "single-gpu" [10238,10250]
                    FIELD [10254,10321]
                        String: "runs-on" [10254,10263]
                        ARRAY [10264,10321]
                            STRING [10265,10278]
                                String: "self-hosted" [10265,10278]
                            STRING [10279,10291]
                                String: "docker-gpu" [10279,10291]
                            STRING [10292,10320]
                                String: "${{ matrix.machine_type }}" [10292,10320]
                    FIELD [10322,10504]
                        String: "container" [10322,10333]
                        OBJECT [10334,10504]
                            FIELD [10335,10406]
                                String: "image" [10335,10342]
                                STRING [10343,10406]
                                    String: "huggingface/transformers-pytorch-deepspeed-latest-gpu-push-ci" [10343,10406]
                            FIELD [10407,10503]
                                String: "options" [10407,10416]
                                STRING [10417,10503]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [10417,10503]
                    FIELD [10505,13016]
                        String: "steps" [10505,10512]
                        ARRAY [10513,13016]
                            OBJECT [10514,11231]
                                FIELD [10515,10560]
                                    String: "name" [10515,10521]
                                    STRING [10522,10560]
                                        String: "Prepare custom environment variables" [10522,10560]
                                FIELD [10561,10575]
                                    String: "shell" [10561,10568]
                                    STRING [10569,10575]
                                        String: "bash" [10569,10575]
                                FIELD [10576,11230]
                                    String: "run" [10576,10581]
                                    STRING [10582,11230]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [10582,11230]
                            OBJECT [11232,11367]
                                FIELD [11233,11269]
                                    String: "name" [11233,11239]
                                    STRING [11240,11269]
                                        String: "print environment variables" [11240,11269]
                                FIELD [11270,11366]
                                    String: "run" [11270,11275]
                                    STRING [11276,11366]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [11276,11366]
                            OBJECT [11368,11699]
                                FIELD [11369,11418]
                                    String: "name" [11369,11375]
                                    STRING [11376,11418]
                                        String: "Update clone using environment variables" [11376,11418]
                                FIELD [11419,11464]
                                    String: "working-directory" [11419,11438]
                                    STRING [11439,11464]
                                        String: "/workspace/transformers" [11439,11464]
                                FIELD [11465,11698]
                                    String: "run" [11465,11470]
                                    STRING [11471,11698]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [11471,11698]
                            OBJECT [11700,11794]
                                FIELD [11701,11740]
                                    String: "name" [11701,11707]
                                    STRING [11708,11740]
                                        String: "Remove cached torch extensions" [11708,11740]
                                FIELD [11741,11793]
                                    String: "run" [11741,11746]
                                    STRING [11747,11793]
                                        String: "rm -rf /github/home/.cache/torch_extensions/" [11747,11793]
                            OBJECT [11795,12118]
                                FIELD [11796,11832]
                                    String: "name" [11796,11802]
                                    STRING [11803,11832]
                                        String: "Pre build DeepSpeed *again*" [11803,11832]
                                FIELD [11833,11865]
                                    String: "working-directory" [11833,11852]
                                    STRING [11853,11865]
                                        String: "/workspace" [11853,11865]
                                FIELD [11866,12117]
                                    String: "run" [11866,11871]
                                    STRING [11872,12117]
                                        String: "python3 -m pip uninstall -y deepspeed\nDS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 DS_BUILD_AIO=1 DS_BUILD_UTILS=1 python3 -m pip install deepspeed --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [11872,12117]
                            OBJECT [12119,12161]
                                FIELD [12120,12139]
                                    String: "name" [12120,12126]
                                    STRING [12127,12139]
                                        String: "NVIDIA-SMI" [12127,12139]
                                FIELD [12140,12160]
                                    String: "run" [12140,12145]
                                    STRING [12146,12160]
                                        String: "nvidia-smi\n" [12146,12160]
                            OBJECT [12162,12266]
                                FIELD [12163,12183]
                                    String: "name" [12163,12169]
                                    STRING [12170,12183]
                                        String: "Environment" [12170,12183]
                                FIELD [12184,12229]
                                    String: "working-directory" [12184,12203]
                                    STRING [12204,12229]
                                        String: "/workspace/transformers" [12204,12229]
                                FIELD [12230,12265]
                                    String: "run" [12230,12235]
                                    STRING [12236,12265]
                                        String: "python utils/print_env.py\n" [12236,12265]
                            OBJECT [12267,12518]
                                FIELD [12268,12315]
                                    String: "name" [12268,12274]
                                    STRING [12275,12315]
                                        String: "Run all non-slow selected tests on GPU" [12275,12315]
                                FIELD [12316,12361]
                                    String: "working-directory" [12316,12335]
                                    STRING [12336,12361]
                                        String: "/workspace/transformers" [12336,12361]
                                FIELD [12362,12517]
                                    String: "run" [12362,12367]
                                    STRING [12368,12517]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [12368,12517]
                            OBJECT [12519,12722]
                                FIELD [12520,12550]
                                    String: "name" [12520,12526]
                                    STRING [12527,12550]
                                        String: "Failure short reports" [12527,12550]
                                FIELD [12551,12574]
                                    String: "if" [12551,12555]
                                    STRING [12556,12574]
                                        String: "${{ failure() }}" [12556,12574]
                                FIELD [12575,12599]
                                    String: "continue-on-error" [12575,12594]
                                    TRUE [12595,12599]
                                FIELD [12600,12721]
                                    String: "run" [12600,12605]
                                    STRING [12606,12721]
                                        String: "cat /workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [12606,12721]
                            OBJECT [12723,13015]
                                FIELD [12724,12761]
                                    String: "name" [12724,12730]
                                    STRING [12731,12761]
                                        String: "Test suite reports artifacts" [12731,12761]
                                FIELD [12762,12784]
                                    String: "if" [12762,12766]
                                    STRING [12767,12784]
                                        String: "${{ always() }}" [12767,12784]
                                FIELD [12785,12820]
                                    String: "uses" [12785,12791]
                                    STRING [12792,12820]
                                        String: "actions/upload-artifact@v2" [12792,12820]
                                FIELD [12821,13014]
                                    String: "with" [12821,12827]
                                    OBJECT [12828,13014]
                                        FIELD [12829,12913]
                                            String: "name" [12829,12835]
                                            STRING [12836,12913]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [12836,12913]
                                        FIELD [12914,13013]
                                            String: "path" [12914,12920]
                                            STRING [12921,13013]
                                                String: "/workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [12921,13013]
            FIELD [13018,16080]
                String: "run_tests_torch_cuda_extensions_multi_gpu" [13018,13061]
                OBJECT [13062,16080]
                    FIELD [13063,13098]
                        String: "name" [13063,13069]
                        STRING [13070,13098]
                            String: "Torch CUDA extension tests" [13070,13098]
                    FIELD [13099,13114]
                        String: "needs" [13099,13106]
                        STRING [13107,13114]
                            String: "setup" [13107,13114]
                    FIELD [13115,13243]
                        String: "if" [13115,13119]
                        STRING [13120,13243]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [13120,13243]
                    FIELD [13244,13314]
                        String: "strategy" [13244,13254]
                        OBJECT [13255,13314]
                            FIELD [13256,13273]
                                String: "fail-fast" [13256,13267]
                                FALSE [13268,13273]
                            FIELD [13274,13313]
                                String: "matrix" [13274,13282]
                                OBJECT [13283,13313]
                                    FIELD [13284,13312]
                                        String: "machine_type" [13284,13298]
                                        ARRAY [13299,13312]
                                            STRING [13300,13311]
                                                String: "multi-gpu" [13300,13311]
                    FIELD [13315,13382]
                        String: "runs-on" [13315,13324]
                        ARRAY [13325,13382]
                            STRING [13326,13339]
                                String: "self-hosted" [13326,13339]
                            STRING [13340,13352]
                                String: "docker-gpu" [13340,13352]
                            STRING [13353,13381]
                                String: "${{ matrix.machine_type }}" [13353,13381]
                    FIELD [13383,13567]
                        String: "container" [13383,13394]
                        OBJECT [13395,13567]
                            FIELD [13396,13467]
                                String: "image" [13396,13403]
                                STRING [13404,13467]
                                    String: "huggingface/transformers-pytorch-deepspeed-latest-gpu-push-ci" [13404,13467]
                            FIELD [13468,13566]
                                String: "options" [13468,13477]
                                STRING [13478,13566]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [13478,13566]
                    FIELD [13568,16079]
                        String: "steps" [13568,13575]
                        ARRAY [13576,16079]
                            OBJECT [13577,14294]
                                FIELD [13578,13623]
                                    String: "name" [13578,13584]
                                    STRING [13585,13623]
                                        String: "Prepare custom environment variables" [13585,13623]
                                FIELD [13624,13638]
                                    String: "shell" [13624,13631]
                                    STRING [13632,13638]
                                        String: "bash" [13632,13638]
                                FIELD [13639,14293]
                                    String: "run" [13639,13644]
                                    STRING [13645,14293]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [13645,14293]
                            OBJECT [14295,14430]
                                FIELD [14296,14332]
                                    String: "name" [14296,14302]
                                    STRING [14303,14332]
                                        String: "print environment variables" [14303,14332]
                                FIELD [14333,14429]
                                    String: "run" [14333,14338]
                                    STRING [14339,14429]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [14339,14429]
                            OBJECT [14431,14762]
                                FIELD [14432,14481]
                                    String: "name" [14432,14438]
                                    STRING [14439,14481]
                                        String: "Update clone using environment variables" [14439,14481]
                                FIELD [14482,14527]
                                    String: "working-directory" [14482,14501]
                                    STRING [14502,14527]
                                        String: "/workspace/transformers" [14502,14527]
                                FIELD [14528,14761]
                                    String: "run" [14528,14533]
                                    STRING [14534,14761]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [14534,14761]
                            OBJECT [14763,14857]
                                FIELD [14764,14803]
                                    String: "name" [14764,14770]
                                    STRING [14771,14803]
                                        String: "Remove cached torch extensions" [14771,14803]
                                FIELD [14804,14856]
                                    String: "run" [14804,14809]
                                    STRING [14810,14856]
                                        String: "rm -rf /github/home/.cache/torch_extensions/" [14810,14856]
                            OBJECT [14858,15181]
                                FIELD [14859,14895]
                                    String: "name" [14859,14865]
                                    STRING [14866,14895]
                                        String: "Pre build DeepSpeed *again*" [14866,14895]
                                FIELD [14896,14928]
                                    String: "working-directory" [14896,14915]
                                    STRING [14916,14928]
                                        String: "/workspace" [14916,14928]
                                FIELD [14929,15180]
                                    String: "run" [14929,14934]
                                    STRING [14935,15180]
                                        String: "python3 -m pip uninstall -y deepspeed\nDS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 DS_BUILD_AIO=1 DS_BUILD_UTILS=1 python3 -m pip install deepspeed --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [14935,15180]
                            OBJECT [15182,15224]
                                FIELD [15183,15202]
                                    String: "name" [15183,15189]
                                    STRING [15190,15202]
                                        String: "NVIDIA-SMI" [15190,15202]
                                FIELD [15203,15223]
                                    String: "run" [15203,15208]
                                    STRING [15209,15223]
                                        String: "nvidia-smi\n" [15209,15223]
                            OBJECT [15225,15329]
                                FIELD [15226,15246]
                                    String: "name" [15226,15232]
                                    STRING [15233,15246]
                                        String: "Environment" [15233,15246]
                                FIELD [15247,15292]
                                    String: "working-directory" [15247,15266]
                                    STRING [15267,15292]
                                        String: "/workspace/transformers" [15267,15292]
                                FIELD [15293,15328]
                                    String: "run" [15293,15298]
                                    STRING [15299,15328]
                                        String: "python utils/print_env.py\n" [15299,15328]
                            OBJECT [15330,15581]
                                FIELD [15331,15378]
                                    String: "name" [15331,15337]
                                    STRING [15338,15378]
                                        String: "Run all non-slow selected tests on GPU" [15338,15378]
                                FIELD [15379,15424]
                                    String: "working-directory" [15379,15398]
                                    STRING [15399,15424]
                                        String: "/workspace/transformers" [15399,15424]
                                FIELD [15425,15580]
                                    String: "run" [15425,15430]
                                    STRING [15431,15580]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [15431,15580]
                            OBJECT [15582,15785]
                                FIELD [15583,15613]
                                    String: "name" [15583,15589]
                                    STRING [15590,15613]
                                        String: "Failure short reports" [15590,15613]
                                FIELD [15614,15637]
                                    String: "if" [15614,15618]
                                    STRING [15619,15637]
                                        String: "${{ failure() }}" [15619,15637]
                                FIELD [15638,15662]
                                    String: "continue-on-error" [15638,15657]
                                    TRUE [15658,15662]
                                FIELD [15663,15784]
                                    String: "run" [15663,15668]
                                    STRING [15669,15784]
                                        String: "cat /workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [15669,15784]
                            OBJECT [15786,16078]
                                FIELD [15787,15824]
                                    String: "name" [15787,15793]
                                    STRING [15794,15824]
                                        String: "Test suite reports artifacts" [15794,15824]
                                FIELD [15825,15847]
                                    String: "if" [15825,15829]
                                    STRING [15830,15847]
                                        String: "${{ always() }}" [15830,15847]
                                FIELD [15848,15883]
                                    String: "uses" [15848,15854]
                                    STRING [15855,15883]
                                        String: "actions/upload-artifact@v2" [15855,15883]
                                FIELD [15884,16077]
                                    String: "with" [15884,15890]
                                    OBJECT [15891,16077]
                                        FIELD [15892,15976]
                                            String: "name" [15892,15898]
                                            STRING [15899,15976]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [15899,15976]
                                        FIELD [15977,16076]
                                            String: "path" [15977,15983]
                                            STRING [15984,16076]
                                                String: "/workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [15984,16076]
            FIELD [16081,18639]
                String: "send_results" [16081,16095]
                OBJECT [16096,18639]
                    FIELD [16097,16129]
                        String: "name" [16097,16103]
                        STRING [16104,16129]
                            String: "Send results to webhook" [16104,16129]
                    FIELD [16130,16155]
                        String: "runs-on" [16130,16139]
                        STRING [16140,16155]
                            String: "ubuntu-latest" [16140,16155]
                    FIELD [16156,16171]
                        String: "if" [16156,16160]
                        STRING [16161,16171]
                            String: "always()" [16161,16171]
                    FIELD [16172,16361]
                        String: "needs" [16172,16179]
                        ARRAY [16180,16361]
                            STRING [16181,16202]
                                String: "check_runner_status" [16181,16202]
                            STRING [16203,16218]
                                String: "check_runners" [16203,16218]
                            STRING [16219,16226]
                                String: "setup" [16219,16226]
                            STRING [16227,16249]
                                String: "run_tests_single_gpu" [16227,16249]
                            STRING [16250,16271]
                                String: "run_tests_multi_gpu" [16250,16271]
                            STRING [16272,16316]
                                String: "run_tests_torch_cuda_extensions_single_gpu" [16272,16316]
                            STRING [16317,16360]
                                String: "run_tests_torch_cuda_extensions_multi_gpu" [16317,16360]
                    FIELD [16362,18638]
                        String: "steps" [16362,16369]
                        ARRAY [16370,18638]
                            OBJECT [16371,16608]
                                FIELD [16372,16403]
                                    String: "name" [16372,16378]
                                    STRING [16379,16403]
                                        String: "Preliminary job status" [16379,16403]
                                FIELD [16404,16418]
                                    String: "shell" [16404,16411]
                                    STRING [16412,16418]
                                        String: "bash" [16412,16418]
                                FIELD [16419,16607]
                                    String: "run" [16419,16424]
                                    STRING [16425,16607]
                                        String: "echo \"Runner availability: ${{ needs.check_runner_status.result }}\"\necho \"Setup status: ${{ needs.setup.result }}\"\necho \"Runner status: ${{ needs.check_runners.result }}\"\n" [16425,16607]
                            OBJECT [16609,17326]
                                FIELD [16610,16655]
                                    String: "name" [16610,16616]
                                    STRING [16617,16655]
                                        String: "Prepare custom environment variables" [16617,16655]
                                FIELD [16656,16670]
                                    String: "shell" [16656,16663]
                                    STRING [16664,16670]
                                        String: "bash" [16664,16670]
                                FIELD [16671,17325]
                                    String: "run" [16671,16676]
                                    STRING [16677,17325]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [16677,17325]
                            OBJECT [17327,17462]
                                FIELD [17328,17364]
                                    String: "name" [17328,17334]
                                    STRING [17335,17364]
                                        String: "print environment variables" [17335,17364]
                                FIELD [17365,17461]
                                    String: "run" [17365,17370]
                                    STRING [17371,17461]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [17371,17461]
                            OBJECT [17463,17493]
                                FIELD [17464,17492]
                                    String: "uses" [17464,17470]
                                    STRING [17471,17492]
                                        String: "actions/checkout@v2" [17471,17492]
                            OBJECT [17494,17779]
                                FIELD [17495,17544]
                                    String: "name" [17495,17501]
                                    STRING [17502,17544]
                                        String: "Update clone using environment variables" [17502,17544]
                                FIELD [17545,17778]
                                    String: "run" [17545,17550]
                                    STRING [17551,17778]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [17551,17778]
                            OBJECT [17780,17819]
                                FIELD [17781,17818]
                                    String: "uses" [17781,17787]
                                    STRING [17788,17818]
                                        String: "actions/download-artifact@v2" [17788,17818]
                            OBJECT [17820,18637]
                                FIELD [17821,17851]
                                    String: "name" [17821,17827]
                                    STRING [17828,17851]
                                        String: "Send message to Slack" [17828,17851]
                                FIELD [17852,18530]
                                    String: "env" [17852,17857]
                                    OBJECT [17858,18530]
                                        FIELD [17859,17915]
                                            String: "CI_SLACK_BOT_TOKEN" [17859,17879]
                                            STRING [17880,17915]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [17880,17915]
                                        FIELD [17916,17974]
                                            String: "CI_SLACK_CHANNEL_ID" [17916,17937]
                                            STRING [17938,17974]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [17938,17974]
                                        FIELD [17975,18045]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [17975,18002]
                                            STRING [18003,18045]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [18003,18045]
                                        FIELD [18046,18122]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [18046,18076]
                                            STRING [18077,18122]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [18077,18122]
                                        FIELD [18123,18188]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [18123,18151]
                                            STRING [18152,18188]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [18152,18188]
                                        FIELD [18189,18206]
                                            String: "CI_EVENT" [18189,18199]
                                            STRING [18200,18206]
                                                String: "push" [18200,18206]
                                        FIELD [18207,18264]
                                            String: "CI_TITLE_PUSH" [18207,18222]
                                            STRING [18223,18264]
                                                String: "${{ github.event.head_commit.message }}" [18223,18264]
                                        FIELD [18265,18343]
                                            String: "CI_TITLE_WORKFLOW_RUN" [18265,18288]
                                            STRING [18289,18343]
                                                String: "${{ github.event.workflow_run.head_commit.message }}" [18289,18343]
                                        FIELD [18344,18372]
                                            String: "CI_SHA" [18344,18352]
                                            STRING [18353,18372]
                                                String: "${{ env.CI_SHA }}" [18353,18372]
                                        FIELD [18373,18430]
                                            String: "RUNNER_STATUS" [18373,18388]
                                            STRING [18389,18430]
                                                String: "${{ needs.check_runner_status.result }}" [18389,18430]
                                        FIELD [18431,18486]
                                            String: "RUNNER_ENV_STATUS" [18431,18450]
                                            STRING [18451,18486]
                                                String: "${{ needs.check_runners.result }}" [18451,18486]
                                        FIELD [18487,18529]
                                            String: "SETUP_STATUS" [18487,18501]
                                            STRING [18502,18529]
                                                String: "${{ needs.setup.result }}" [18502,18529]
                                FIELD [18531,18636]
                                    String: "run" [18531,18536]
                                    STRING [18537,18636]
                                        String: "pip install slack_sdk\npython utils/notification_service.py \"${{ needs.setup.outputs.matrix }}\"" [18537,18636]