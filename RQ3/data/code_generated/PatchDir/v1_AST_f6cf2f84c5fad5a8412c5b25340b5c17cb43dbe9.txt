OBJECT [0,3483]
    FIELD [1,12]
        String: "name" [1,7]
        STRING [8,12]
            String: "CI" [8,12]
    FIELD [13,41]
        String: "on" [13,17]
        ARRAY [18,41]
            STRING [19,25]
                String: "push" [19,25]
            STRING [26,40]
                String: "pull_request" [26,40]
    FIELD [42,72]
        String: "env" [42,47]
        OBJECT [48,72]
            FIELD [49,71]
                String: "PYTHON_VERSION" [49,65]
                STRING [66,71]
                    String: "3.8" [66,71]
    FIELD [73,164]
        String: "concurrency" [73,86]
        OBJECT [87,164]
            FIELD [88,137]
                String: "group" [88,95]
                STRING [96,137]
                    String: "${{ github.head_ref || github.run_id }}" [96,137]
            FIELD [138,163]
                String: "cancel-in-progress" [138,158]
                TRUE [159,163]
    FIELD [165,3482]
        String: "jobs" [165,171]
        OBJECT [172,3482]
            FIELD [173,615]
                String: "precommit" [173,184]
                OBJECT [185,615]
                    FIELD [186,211]
                        String: "runs-on" [186,195]
                        STRING [196,211]
                            String: "ubuntu-latest" [196,211]
                    FIELD [212,614]
                        String: "steps" [212,219]
                        ARRAY [220,614]
                            OBJECT [221,359]
                                FIELD [222,271]
                                    String: "name" [222,228]
                                    STRING [229,271]
                                        String: "Install Python ${{ env.PYTHON_VERSION }}" [229,271]
                                FIELD [272,304]
                                    String: "uses" [272,278]
                                    STRING [279,304]
                                        String: "actions/setup-python@v3" [279,304]
                                FIELD [305,358]
                                    String: "with" [305,311]
                                    OBJECT [312,358]
                                        FIELD [313,357]
                                            String: "python-version" [313,329]
                                            STRING [330,357]
                                                String: "${{ env.PYTHON_VERSION }}" [330,357]
                            OBJECT [360,390]
                                FIELD [361,389]
                                    String: "uses" [361,367]
                                    STRING [368,389]
                                        String: "actions/checkout@v3" [368,389]
                            OBJECT [391,539]
                                FIELD [392,419]
                                    String: "name" [392,398]
                                    STRING [399,419]
                                        String: "Install pre-commit" [399,419]
                                FIELD [420,538]
                                    String: "run" [420,425]
                                    STRING [426,538]
                                        String: "python -m pip install --upgrade pip\npython -m pip install pre-commit virtualenv!=20.0.6\npre-commit install\n" [426,538]
                            OBJECT [540,613]
                                FIELD [541,577]
                                    String: "name" [541,547]
                                    STRING [548,577]
                                        String: "Run static code inspections" [548,577]
                                FIELD [578,612]
                                    String: "run" [578,583]
                                    STRING [584,612]
                                        String: "pre-commit run --all-files" [584,612]
            FIELD [616,1607]
                String: "django-tests" [616,630]
                OBJECT [631,1607]
                    FIELD [632,657]
                        String: "runs-on" [632,641]
                        STRING [642,657]
                            String: "ubuntu-latest" [642,657]
                    FIELD [658,1606]
                        String: "steps" [658,665]
                        ARRAY [666,1606]
                            OBJECT [667,804]
                                FIELD [668,716]
                                    String: "name" [668,674]
                                    STRING [675,716]
                                        String: "Set up Python ${{ env.PYTHON_VERSION }}" [675,716]
                                FIELD [717,749]
                                    String: "uses" [717,723]
                                    STRING [724,749]
                                        String: "actions/setup-python@v3" [724,749]
                                FIELD [750,803]
                                    String: "with" [750,756]
                                    OBJECT [757,803]
                                        FIELD [758,802]
                                            String: "python-version" [758,774]
                                            STRING [775,802]
                                                String: "${{ env.PYTHON_VERSION }}" [775,802]
                            OBJECT [805,944]
                                FIELD [806,843]
                                    String: "name" [806,812]
                                    STRING [813,843]
                                        String: "Install codecov dependencies" [813,843]
                                FIELD [844,943]
                                    String: "run" [844,849]
                                    STRING [850,943]
                                        String: "python -m pip install codecov pytest-cov\nmkdir -p /tmp/coverage\nchmod a+w /tmp/coverage\n" [850,943]
                            OBJECT [945,975]
                                FIELD [946,974]
                                    String: "uses" [946,952]
                                    STRING [953,974]
                                        String: "actions/checkout@v3" [953,974]
                            OBJECT [976,1041]
                                FIELD [977,1010]
                                    String: "name" [977,983]
                                    STRING [984,1010]
                                        String: "Build the test container" [984,1010]
                                FIELD [1011,1040]
                                    String: "run" [1011,1016]
                                    STRING [1017,1040]
                                        String: "make build_web_test\n" [1017,1040]
                            OBJECT [1042,1136]
                                FIELD [1043,1066]
                                    String: "name" [1043,1049]
                                    STRING [1050,1066]
                                        String: "Set DOCKER_GID" [1050,1066]
                                FIELD [1067,1135]
                                    String: "run" [1067,1072]
                                    STRING [1073,1135]
                                        String: "echo DOCKER_GID=`getent group docker | cut -d: -f3` > .env\n" [1073,1135]
                            OBJECT [1137,1209]
                                FIELD [1138,1178]
                                    String: "name" [1138,1144]
                                    STRING [1145,1178]
                                        String: "Check migrations have been made" [1145,1178]
                                FIELD [1179,1208]
                                    String: "run" [1179,1184]
                                    STRING [1185,1208]
                                        String: "make check_migrations" [1185,1208]
                            OBJECT [1210,1454]
                                FIELD [1211,1240]
                                    String: "name" [1211,1217]
                                    STRING [1218,1240]
                                        String: "Run the django tests" [1218,1240]
                                FIELD [1241,1453]
                                    String: "run" [1241,1246]
                                    STRING [1247,1453]
                                        String: "make minio\ndocker compose run --rm -v /tmp/coverage:/tmp/coverage celery_worker_evaluation bash -c \"COVERAGE_FILE=/tmp/coverage/.coverage.non-transactions pytest --cov-report= --cov=. --durations 10\"\n" [1247,1453]
                            OBJECT [1455,1605]
                                FIELD [1456,1498]
                                    String: "name" [1456,1462]
                                    STRING [1463,1498]
                                        String: "Upload coverage report to codecov" [1463,1498]
                                FIELD [1499,1549]
                                    String: "run" [1499,1504]
                                    STRING [1505,1549]
                                        String: "coverage combine /tmp/coverage/\ncodecov\n" [1505,1549]
                                FIELD [1550,1604]
                                    String: "env" [1550,1555]
                                    OBJECT [1556,1604]
                                        FIELD [1557,1603]
                                            String: "CODECOV_TOKEN" [1557,1572]
                                            STRING [1573,1603]
                                                String: "${{ secrets.CODECOV_TOKEN }}" [1573,1603]
            FIELD [1608,2105]
                String: "docs" [1608,1614]
                OBJECT [1615,2105]
                    FIELD [1616,1641]
                        String: "runs-on" [1616,1625]
                        STRING [1626,1641]
                            String: "ubuntu-latest" [1626,1641]
                    FIELD [1642,2104]
                        String: "steps" [1642,1649]
                        ARRAY [1650,2104]
                            OBJECT [1651,1681]
                                FIELD [1652,1680]
                                    String: "uses" [1652,1658]
                                    STRING [1659,1680]
                                        String: "actions/checkout@v3" [1659,1680]
                            OBJECT [1682,1747]
                                FIELD [1683,1716]
                                    String: "name" [1683,1689]
                                    STRING [1690,1716]
                                        String: "Build the test container" [1690,1716]
                                FIELD [1717,1746]
                                    String: "run" [1717,1722]
                                    STRING [1723,1746]
                                        String: "make build_web_test\n" [1723,1746]
                            OBJECT [1748,1842]
                                FIELD [1749,1772]
                                    String: "name" [1749,1755]
                                    STRING [1756,1772]
                                        String: "Set DOCKER_GID" [1756,1772]
                                FIELD [1773,1841]
                                    String: "run" [1773,1778]
                                    STRING [1779,1841]
                                        String: "echo DOCKER_GID=`getent group docker | cut -d: -f3` > .env\n" [1779,1841]
                            OBJECT [1843,1888]
                                FIELD [1844,1867]
                                    String: "name" [1844,1850]
                                    STRING [1851,1867]
                                        String: "Build the docs" [1851,1867]
                                FIELD [1868,1887]
                                    String: "run" [1868,1873]
                                    STRING [1874,1887]
                                        String: "make docs\n" [1874,1887]
                            OBJECT [1889,2103]
                                FIELD [1890,1931]
                                    String: "name" [1890,1896]
                                    STRING [1897,1931]
                                        String: "Deploy the documentation on main" [1897,1931]
                                FIELD [1932,1970]
                                    String: "if" [1932,1936]
                                    STRING [1937,1970]
                                        String: "github.ref == 'refs/heads/main'" [1937,1970]
                                FIELD [1971,2009]
                                    String: "uses" [1971,1977]
                                    STRING [1978,2009]
                                        String: "peaceiris/actions-gh-pages@v3" [1978,2009]
                                FIELD [2010,2102]
                                    String: "with" [2010,2016]
                                    OBJECT [2017,2102]
                                        FIELD [2018,2062]
                                            String: "github_token" [2018,2032]
                                            STRING [2033,2062]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [2033,2062]
                                        FIELD [2063,2101]
                                            String: "publish_dir" [2063,2076]
                                            STRING [2077,2101]
                                                String: "./app/docs/_build/html" [2077,2101]
            FIELD [2106,3481]
                String: "deploy" [2106,2114]
                OBJECT [2115,3481]
                    FIELD [2116,2140]
                        String: "needs" [2116,2123]
                        ARRAY [2124,2140]
                            STRING [2125,2139]
                                String: "django-tests" [2125,2139]
                    FIELD [2141,2166]
                        String: "runs-on" [2141,2150]
                        STRING [2151,2166]
                            String: "ubuntu-latest" [2151,2166]
                    FIELD [2167,2219]
                        String: "permissions" [2167,2180]
                        OBJECT [2181,2219]
                            FIELD [2182,2200]
                                String: "id-token" [2182,2192]
                                STRING [2193,2200]
                                    String: "write" [2193,2200]
                            FIELD [2201,2218]
                                String: "contents" [2201,2211]
                                STRING [2212,2218]
                                    String: "read" [2212,2218]
                    FIELD [2220,2258]
                        String: "if" [2220,2224]
                        STRING [2225,2258]
                            String: "github.ref == 'refs/heads/main'" [2225,2258]
                    FIELD [2259,3480]
                        String: "steps" [2259,2266]
                        ARRAY [2267,3480]
                            OBJECT [2268,2298]
                                FIELD [2269,2297]
                                    String: "uses" [2269,2275]
                                    STRING [2276,2297]
                                        String: "actions/checkout@v3" [2276,2297]
                            OBJECT [2299,2365]
                                FIELD [2300,2343]
                                    String: "name" [2300,2306]
                                    STRING [2307,2343]
                                        String: "Build the distributable containers" [2307,2343]
                                FIELD [2344,2364]
                                    String: "run" [2344,2349]
                                    STRING [2350,2364]
                                        String: "make build\n" [2350,2364]
                            OBJECT [2366,2533]
                                FIELD [2367,2401]
                                    String: "name" [2367,2373]
                                    STRING [2374,2401]
                                        String: "Configure AWS credentials" [2374,2401]
                                FIELD [2402,2451]
                                    String: "uses" [2402,2408]
                                    STRING [2409,2451]
                                        String: "aws-actions/configure-aws-credentials@v1" [2409,2451]
                                FIELD [2452,2532]
                                    String: "with" [2452,2458]
                                    OBJECT [2459,2532]
                                        FIELD [2460,2506]
                                            String: "role-to-assume" [2460,2476]
                                            STRING [2477,2506]
                                                String: "${{ secrets.AWS_ROLE_ARN }}" [2477,2506]
                                        FIELD [2507,2531]
                                            String: "aws-region" [2507,2519]
                                            STRING [2520,2531]
                                                String: "us-east-1" [2520,2531]
                            OBJECT [2534,3479]
                                FIELD [2535,2555]
                                    String: "name" [2535,2541]
                                    STRING [2542,2555]
                                        String: "Push to ECR" [2542,2555]
                                FIELD [2556,3478]
                                    String: "run" [2556,2561]
                                    STRING [2562,3478]
                                        String: "sudo apt-get update\nsudo apt-get install -y retry\nretry -t 5 -- /bin/bash -c 'aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws/diag-nijmegen/grand-challenge/web-base'\nretry -t 5 -- make push_web_base\nretry -t 5 -- /bin/bash -c 'aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws/diag-nijmegen/grand-challenge/web-test-base'\nretry -t 5 -- make push_web_test_base\nretry -t 5 -- /bin/bash -c 'aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws/diag-nijmegen/grand-challenge/web'\nretry -t 5 -- make push_web\nretry -t 5 -- /bin/bash -c 'aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws/diag-nijmegen/grand-challenge/http'\nretry -t 5 -- make push_http" [2562,3478]