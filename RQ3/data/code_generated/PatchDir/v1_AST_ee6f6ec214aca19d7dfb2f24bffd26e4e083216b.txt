OBJECT [0,4739]
    FIELD [1,21]
        String: "name" [1,7]
        STRING [8,21]
            String: "Build on M1" [8,21]
    FIELD [22,161]
        String: "on" [22,26]
        OBJECT [27,161]
            FIELD [28,96]
                String: "pull_request" [28,42]
                OBJECT [43,96]
                    FIELD [44,95]
                        String: "paths" [44,51]
                        ARRAY [52,95]
                            STRING [53,94]
                                String: ".github/workflows/build-m1-binaries.yml" [53,94]
            FIELD [97,135]
                String: "push" [97,103]
                OBJECT [104,135]
                    FIELD [105,134]
                        String: "branches" [105,115]
                        ARRAY [116,134]
                            STRING [117,126]
                                String: "nightly" [117,126]
                            STRING [127,133]
                                String: "main" [127,133]
            FIELD [136,160]
                String: "workflow_dispatch" [136,155]
                NULL [156,160]
    FIELD [162,4738]
        String: "jobs" [162,168]
        OBJECT [169,4738]
            FIELD [170,3107]
                String: "build_wheels" [170,184]
                OBJECT [185,3107]
                    FIELD [186,222]
                        String: "name" [186,192]
                        STRING [193,222]
                            String: "Build TorchVision M1 wheels" [193,222]
                    FIELD [223,243]
                        String: "runs-on" [223,232]
                        STRING [233,243]
                            String: "macos-m1" [233,243]
                    FIELD [244,298]
                        String: "strategy" [244,254]
                        OBJECT [255,298]
                            FIELD [256,297]
                                String: "matrix" [256,264]
                                OBJECT [265,297]
                                    FIELD [266,296]
                                        String: "py_vers" [266,275]
                                        ARRAY [276,296]
                                            STRING [277,282]
                                                String: "3.8" [277,282]
                                            STRING [283,288]
                                                String: "3.9" [283,288]
                                            STRING [289,295]
                                                String: "3.10" [289,295]
                    FIELD [299,3106]
                        String: "steps" [299,306]
                        ARRAY [307,3106]
                            OBJECT [308,367]
                                FIELD [309,337]
                                    String: "name" [309,315]
                                    STRING [316,337]
                                        String: "Checkout repository" [316,337]
                                FIELD [338,366]
                                    String: "uses" [338,344]
                                    STRING [345,366]
                                        String: "actions/checkout@v2" [345,366]
                            OBJECT [368,1475]
                                FIELD [369,404]
                                    String: "name" [369,375]
                                    STRING [376,404]
                                        String: "Build TorchVision M1 wheel" [376,404]
                                FIELD [405,440]
                                    String: "shell" [405,412]
                                    STRING [413,440]
                                        String: "arch -arch arm64 bash {0}" [413,440]
                                FIELD [441,526]
                                    String: "env" [441,446]
                                    OBJECT [447,526]
                                        FIELD [448,491]
                                            String: "ENV_NAME" [448,458]
                                            STRING [459,491]
                                                String: "conda-env-${{ github.run_id }}" [459,491]
                                        FIELD [492,525]
                                            String: "PY_VERS" [492,501]
                                            STRING [502,525]
                                                String: "${{ matrix.py_vers }}" [502,525]
                                FIELD [527,1474]
                                    String: "run" [527,532]
                                    STRING [533,1474]
                                        String: ". ~/miniconda3/etc/profile.d/conda.sh\n# Needed for JPEG library detection as setup.py detects conda presence by running `shlex.which('conda')`\nexport PATH=~/miniconda3/bin:$PATH\nset -ex\n. packaging/pkg_helpers.bash\nsetup_build_version\nWHL_NAME=torchvision-${BUILD_VERSION}-cp${PY_VERS/.}-cp${PY_VERS/.}-macosx_11_0_arm64.whl\nconda create -yp ${ENV_NAME} python=${PY_VERS} numpy libpng jpeg wheel pkg-config\nconda run -p ${ENV_NAME} python3 -mpip install torch --pre --extra-index-url=https://download.pytorch.org/whl/nightly\nconda run -p ${ENV_NAME} python3 -mpip install delocate\nconda run -p ${ENV_NAME} python3 setup.py bdist_wheel\nexport PYTORCH_VERSION=\"$(conda run -p ${ENV_NAME} python3 -mpip show torch | grep ^Version: | sed 's/Version:  *//')\"\nconda run -p ${ENV_NAME} DYLD_FALLBACK_LIBRARY_PATH=\"${ENV_NAME}/lib\" delocate-wheel -v --ignore-missing-dependencies dist/${WHL_NAME}\nconda env remove -p ${ENV_NAME}\n" [533,1474]
                            OBJECT [1476,2500]
                                FIELD [1477,1496]
                                    String: "name" [1477,1483]
                                    STRING [1484,1496]
                                        String: "Test wheel" [1484,1496]
                                FIELD [1497,1532]
                                    String: "shell" [1497,1504]
                                    STRING [1505,1532]
                                        String: "arch -arch arm64 bash {0}" [1505,1532]
                                FIELD [1533,1623]
                                    String: "env" [1533,1538]
                                    OBJECT [1539,1623]
                                        FIELD [1540,1588]
                                            String: "ENV_NAME" [1540,1550]
                                            STRING [1551,1588]
                                                String: "conda-test-env-${{ github.run_id }}" [1551,1588]
                                        FIELD [1589,1622]
                                            String: "PY_VERS" [1589,1598]
                                            STRING [1599,1622]
                                                String: "${{ matrix.py_vers }}" [1599,1622]
                                FIELD [1624,2499]
                                    String: "run" [1624,1629]
                                    STRING [1630,2499]
                                        String: ". ~/miniconda3/etc/profile.d/conda.sh\nset -ex\nconda create -yp ${ENV_NAME} python=${PY_VERS} numpy\nconda run -p ${ENV_NAME} python3 -mpip install torch --pre --extra-index-url=https://download.pytorch.org/whl/nightly\nconda run -p ${ENV_NAME} python3 -mpip install dist/*.whl\n# Test torch is importable, by changing cwd and running import commands\nconda run --cwd /tmp -p ${ENV_NAME} python3 -c \"import torchvision;print('torchvision version is ', torchvision.__version__)\"\nconda run --cwd /tmp -p ${ENV_NAME} python3 -c \"import torch;import torchvision;print('Is torchvision useable?', all(x is not None for x in [torch.ops.image.decode_png, torch.ops.torchvision.roi_align]))\"\nconda run --cwd /tmp -p ${ENV_NAME} python3 -c \"import torchvision;print(torchvision.io.read_image('${PWD}/gallery/assets/dog1.jpg').shape)\"\nconda env remove -p ${ENV_NAME}\n" [1630,2499]
                            OBJECT [2501,2650]
                                FIELD [2502,2533]
                                    String: "name" [2502,2508]
                                    STRING [2509,2533]
                                        String: "Upload wheel to GitHub" [2509,2533]
                                FIELD [2534,2569]
                                    String: "uses" [2534,2540]
                                    STRING [2541,2569]
                                        String: "actions/upload-artifact@v3" [2541,2569]
                                FIELD [2570,2649]
                                    String: "with" [2570,2576]
                                    OBJECT [2577,2649]
                                        FIELD [2578,2633]
                                            String: "name" [2578,2584]
                                            STRING [2585,2633]
                                                String: "torchvision-py${{ matrix.py_vers }}-macos11-m1" [2585,2633]
                                        FIELD [2634,2648]
                                            String: "path" [2634,2640]
                                            STRING [2641,2648]
                                                String: "dist/" [2641,2648]
                            OBJECT [2651,3105]
                                FIELD [2652,2679]
                                    String: "name" [2652,2658]
                                    STRING [2659,2679]
                                        String: "Upload wheel to S3" [2659,2679]
                                FIELD [2680,2773]
                                    String: "if" [2680,2684]
                                    STRING [2685,2773]
                                        String: "${{ github.event_name == 'push' && steps.extract_branch.outputs.branch == 'nightly' }}" [2685,2773]
                                FIELD [2774,2809]
                                    String: "shell" [2774,2781]
                                    STRING [2782,2809]
                                        String: "arch -arch arm64 bash {0}" [2782,2809]
                                FIELD [2810,2989]
                                    String: "env" [2810,2815]
                                    OBJECT [2816,2989]
                                        FIELD [2817,2888]
                                            String: "AWS_ACCESS_KEY_ID" [2817,2836]
                                            STRING [2837,2888]
                                                String: "${{ secrets.AWS_PYTORCH_UPLOADER_ACCESS_KEY_ID }}" [2837,2888]
                                        FIELD [2889,2968]
                                            String: "AWS_SECRET_ACCESS_KEY" [2889,2912]
                                            STRING [2913,2968]
                                                String: "${{ secrets.AWS_PYTORCH_UPLOADER_SECRET_ACCESS_KEY }}" [2913,2968]
                                        FIELD [2969,2988]
                                            String: "CHANNEL" [2969,2978]
                                            STRING [2979,2988]
                                                String: "nightly" [2979,2988]
                                FIELD [2990,3104]
                                    String: "run" [2990,2995]
                                    STRING [2996,3104]
                                        String: "for pkg in dist/*; do\n  aws s3 cp \"$pkg\" \"s3://pytorch/whl/${CHANNEL}/cpu/\" --acl public-read\ndone\n" [2996,3104]
            FIELD [3108,4737]
                String: "build_conda" [3108,3121]
                OBJECT [3122,4737]
                    FIELD [3123,3167]
                        String: "name" [3123,3129]
                        STRING [3130,3167]
                            String: "Build TorchVision M1 conda packages" [3130,3167]
                    FIELD [3168,3188]
                        String: "runs-on" [3168,3177]
                        STRING [3178,3188]
                            String: "macos-m1" [3178,3188]
                    FIELD [3189,3243]
                        String: "strategy" [3189,3199]
                        OBJECT [3200,3243]
                            FIELD [3201,3242]
                                String: "matrix" [3201,3209]
                                OBJECT [3210,3242]
                                    FIELD [3211,3241]
                                        String: "py_vers" [3211,3220]
                                        ARRAY [3221,3241]
                                            STRING [3222,3227]
                                                String: "3.8" [3222,3227]
                                            STRING [3228,3233]
                                                String: "3.9" [3228,3233]
                                            STRING [3234,3240]
                                                String: "3.10" [3234,3240]
                    FIELD [3244,4736]
                        String: "steps" [3244,3251]
                        ARRAY [3252,4736]
                            OBJECT [3253,3312]
                                FIELD [3254,3282]
                                    String: "name" [3254,3260]
                                    STRING [3261,3282]
                                        String: "Checkout repository" [3261,3282]
                                FIELD [3283,3311]
                                    String: "uses" [3283,3289]
                                    STRING [3290,3311]
                                        String: "actions/checkout@v2" [3290,3311]
                            OBJECT [3313,3510]
                                FIELD [3314,3371]
                                    String: "name" [3314,3320]
                                    STRING [3321,3371]
                                        String: "Install conda-build and purge previous artifacts" [3321,3371]
                                FIELD [3372,3407]
                                    String: "shell" [3372,3379]
                                    STRING [3380,3407]
                                        String: "arch -arch arm64 bash {0}" [3380,3407]
                                FIELD [3408,3509]
                                    String: "run" [3408,3413]
                                    STRING [3414,3509]
                                        String: ". ~/miniconda3/etc/profile.d/conda.sh\nconda install -yq conda-build\nconda build purge-all\n" [3414,3509]
                            OBJECT [3511,4061]
                                FIELD [3512,3555]
                                    String: "name" [3512,3518]
                                    STRING [3519,3555]
                                        String: "Build TorchVision M1 conda package" [3519,3555]
                                FIELD [3556,3591]
                                    String: "shell" [3556,3563]
                                    STRING [3564,3591]
                                        String: "arch -arch arm64 bash {0}" [3564,3591]
                                FIELD [3592,3703]
                                    String: "env" [3592,3597]
                                    OBJECT [3598,3703]
                                        FIELD [3599,3642]
                                            String: "ENV_NAME" [3599,3609]
                                            STRING [3610,3642]
                                                String: "conda-env-${{ github.run_id }}" [3610,3642]
                                        FIELD [3643,3683]
                                            String: "PYTHON_VERSION" [3643,3659]
                                            STRING [3660,3683]
                                                String: "${{ matrix.py_vers }}" [3660,3683]
                                        FIELD [3684,3702]
                                            String: "CU_VERSION" [3684,3696]
                                            STRING [3697,3702]
                                                String: "cpu" [3697,3702]
                                FIELD [3704,4060]
                                    String: "run" [3704,3709]
                                    STRING [3710,4060]
                                        String: ". ~/miniconda3/etc/profile.d/conda.sh\nset -ex\n. packaging/pkg_helpers.bash\nsetup_build_version\nsetup_conda_pytorch_constraint\nexport SOURCE_ROOT_DIR=$(pwd)\nconda build -c defaults $CONDA_CHANNEL_FLAGS --no-anaconda-upload --python \"$PYTHON_VERSION\" packaging/torchvision\nmkdir -p dist\ncp ~/miniconda3/conda-bld/osx-arm64/*.tar.bz2 dist/\n" [3710,4060]
                            OBJECT [4062,4219]
                                FIELD [4063,4096]
                                    String: "name" [4063,4069]
                                    STRING [4070,4096]
                                        String: "Upload package to GitHub" [4070,4096]
                                FIELD [4097,4132]
                                    String: "uses" [4097,4103]
                                    STRING [4104,4132]
                                        String: "actions/upload-artifact@v3" [4104,4132]
                                FIELD [4133,4218]
                                    String: "with" [4133,4139]
                                    OBJECT [4140,4218]
                                        FIELD [4141,4202]
                                            String: "name" [4141,4147]
                                            STRING [4148,4202]
                                                String: "torchvision-py${{ matrix.py_vers }}-macos11-m1-conda" [4148,4202]
                                        FIELD [4203,4217]
                                            String: "path" [4203,4209]
                                            STRING [4210,4217]
                                                String: "dist/" [4210,4217]
                            OBJECT [4220,4735]
                                FIELD [4221,4253]
                                    String: "name" [4221,4227]
                                    STRING [4228,4253]
                                        String: "Upload package to conda" [4228,4253]
                                FIELD [4254,4347]
                                    String: "if" [4254,4258]
                                    STRING [4259,4347]
                                        String: "${{ github.event_name == 'push' && steps.extract_branch.outputs.branch == 'nightly' }}" [4259,4347]
                                FIELD [4348,4383]
                                    String: "shell" [4348,4355]
                                    STRING [4356,4383]
                                        String: "arch -arch arm64 bash {0}" [4356,4383]
                                FIELD [4384,4483]
                                    String: "env" [4384,4389]
                                    OBJECT [4390,4483]
                                        FIELD [4391,4455]
                                            String: "CONDA_PYTORCHBOT_TOKEN" [4391,4415]
                                            STRING [4416,4455]
                                                String: "${{ secrets.CONDA_PYTORCHBOT_TOKEN }}" [4416,4455]
                                        FIELD [4456,4482]
                                            String: "UPLOAD_CHANNEL" [4456,4472]
                                            STRING [4473,4482]
                                                String: "nightly" [4473,4482]
                                FIELD [4484,4734]
                                    String: "run" [4484,4489]
                                    STRING [4490,4734]
                                        String: ". ~/miniconda3/etc/profile.d/conda.sh\nconda install -yq anaconda-client\nset -x\nanaconda  -t \"${CONDA_PYTORCHBOT_TOKEN}\" upload ~/miniconda3/conda-bld/osx-arm64/*.tar.bz2 -u \"pytorch-${UPLOAD_CHANNEL}\" --label main --no-progress --force" [4490,4734]