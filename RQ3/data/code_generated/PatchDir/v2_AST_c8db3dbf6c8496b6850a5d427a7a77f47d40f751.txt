OBJECT [0,2406]
    FIELD [1,21]
        String: "name" [1,7]
        STRING [8,21]
            String: "master only" [8,21]
    FIELD [22,75]
        String: "on" [22,26]
        OBJECT [27,75]
            FIELD [28,74]
                String: "push" [28,34]
                OBJECT [35,74]
                    FIELD [36,55]
                        String: "branches" [36,46]
                        STRING [47,55]
                            String: "master" [47,55]
                    FIELD [56,73]
                        String: "tags" [56,62]
                        ARRAY [63,73]
                            STRING [64,72]
                                String: "v*.*.*" [64,72]
    FIELD [76,2405]
        String: "jobs" [76,82]
        OBJECT [83,2405]
            FIELD [84,2234]
                String: "build-docker-images" [84,105]
                OBJECT [106,2234]
                    FIELD [107,132]
                        String: "runs-on" [107,116]
                        ARRAY [117,132]
                            STRING [118,131]
                                String: "self-hosted" [118,131]
                    FIELD [133,218]
                        String: "strategy" [133,143]
                        OBJECT [144,218]
                            FIELD [145,217]
                                String: "matrix" [145,153]
                                OBJECT [154,217]
                                    FIELD [155,216]
                                        String: "component" [155,166]
                                        ARRAY [167,216]
                                            STRING [168,174]
                                                String: "core" [168,174]
                                            STRING [175,184]
                                                String: "serving" [175,184]
                                            STRING [185,200]
                                                String: "jobcontroller" [185,200]
                                            STRING [201,210]
                                                String: "jupyter" [201,210]
                                            STRING [211,215]
                                                String: "ci" [211,215]
                    FIELD [219,294]
                        String: "env" [219,224]
                        OBJECT [225,294]
                            FIELD [226,293]
                                String: "MAVEN_CACHE" [226,239]
                                STRING [240,293]
                                    String: "gs://feast-templocation-kf-feast/.m2.2020-08-19.tar" [240,293]
                    FIELD [295,2233]
                        String: "steps" [295,302]
                        ARRAY [303,2233]
                            OBJECT [304,334]
                                FIELD [305,333]
                                    String: "uses" [305,311]
                                    STRING [312,333]
                                        String: "actions/checkout@v2" [312,333]
                            OBJECT [335,463]
                                FIELD [336,399]
                                    String: "uses" [336,342]
                                    STRING [343,399]
                                        String: "GoogleCloudPlatform/github-actions/setup-gcloud@master" [343,399]
                                FIELD [400,462]
                                    String: "with" [400,406]
                                    OBJECT [407,462]
                                        FIELD [408,427]
                                            String: "version" [408,417]
                                            STRING [418,427]
                                                String: "290.0.1" [418,427]
                                        FIELD [428,461]
                                            String: "export_default_credentials" [428,456]
                                            TRUE [457,461]
                            OBJECT [464,510]
                                FIELD [465,509]
                                    String: "run" [465,470]
                                    STRING [471,509]
                                        String: "gcloud auth configure-docker --quiet" [471,509]
                            OBJECT [511,634]
                                FIELD [512,533]
                                    String: "name" [512,518]
                                    STRING [519,533]
                                        String: "Get m2 cache" [519,533]
                                FIELD [534,633]
                                    String: "run" [534,539]
                                    STRING [540,633]
                                        String: "infra/scripts/download-maven-cache.sh \\\n--archive-uri ${MAVEN_CACHE} \\\n--output-dir .\n" [540,633]
                            OBJECT [635,754]
                                FIELD [636,656]
                                    String: "name" [636,642]
                                    STRING [643,656]
                                        String: "Build image" [643,656]
                                FIELD [657,753]
                                    String: "run" [657,662]
                                    STRING [663,753]
                                        String: "make build-${{ matrix.component }}-docker REGISTRY=gcr.io/kf-feast VERSION=${GITHUB_SHA}" [663,753]
                            OBJECT [755,872]
                                FIELD [756,775]
                                    String: "name" [756,762]
                                    STRING [763,775]
                                        String: "Push image" [763,775]
                                FIELD [776,871]
                                    String: "run" [776,781]
                                    STRING [782,871]
                                        String: "make push-${{ matrix.component }}-docker REGISTRY=gcr.io/kf-feast VERSION=${GITHUB_SHA}" [782,871]
                            OBJECT [873,1159]
                                FIELD [874,906]
                                    String: "name" [874,880]
                                    STRING [881,906]
                                        String: "Push image to feast dev" [881,906]
                                FIELD [907,1158]
                                    String: "run" [907,912]
                                    STRING [913,1158]
                                        String: "if [ ${GITHUB_REF#refs/*/} == \"master\" ]; then\n  docker tag gcr.io/kf-feast/feast-${{ matrix.component }}:${GITHUB_SHA} gcr.io/kf-feast/feast-${{ matrix.component }}:dev\n  docker push gcr.io/kf-feast/feast-${{ matrix.component }}:dev\nfi\n" [913,1158]
                            OBJECT [1160,1249]
                                FIELD [1161,1181]
                                    String: "name" [1161,1167]
                                    STRING [1168,1181]
                                        String: "Get version" [1168,1181]
                                FIELD [1182,1248]
                                    String: "run" [1182,1187]
                                    STRING [1188,1248]
                                        String: "echo ::set-env name=RELEASE_VERSION::${GITHUB_REF#refs/*/}" [1188,1248]
                            OBJECT [1250,2232]
                                FIELD [1251,1282]
                                    String: "name" [1251,1257]
                                    STRING [1258,1282]
                                        String: "Push versioned release" [1258,1282]
                                FIELD [1283,2231]
                                    String: "run" [1283,1288]
                                    STRING [1289,2231]
                                        String: "# Build and push semver tagged commits\nrx='^v[0-9]+?\\.[0-9]+?\\.[0-9]+?$'\nif [[ \"${RELEASE_VERSION}\" =~ $rx ]]; then\n  VERSION_WITHOUT_PREFIX=${RELEASE_VERSION:1}\n\n  docker tag gcr.io/kf-feast/feast-${{ matrix.component }}:${GITHUB_SHA} gcr.io/kf-feast/feast-${{ matrix.component }}:${VERSION_WITHOUT_PREFIX}\n  docker push gcr.io/kf-feast/feast-${{ matrix.component }}:${VERSION_WITHOUT_PREFIX}\n\n  # Also update \"latest\" image if tagged commit is pushed to stable branch\n  HIGHEST_SEMVER_TAG=$(git tag -l --sort -version:refname | head -n 1)\n  echo \"Only push to latest tag if tag is the highest semver version $HIGHEST_SEMVER_TAG\"\n\n  if [ \"${VERSION_WITHOUT_PREFIX}\" == \"${HIGHEST_SEMVER_TAG:1}\" ]\n  then\n    docker tag gcr.io/kf-feast/feast-${{ matrix.component }}:${GITHUB_SHA} gcr.io/kf-feast/feast-${{ matrix.component }}:latest\n    docker push gcr.io/kf-feast/feast-${{ matrix.component }}:latest\n  fi\nfi\n" [1289,2231]
            FIELD [2235,2404]
                String: "tests-docker-compose" [2235,2257]
                OBJECT [2258,2404]
                    FIELD [2259,2284]
                        String: "runs-on" [2259,2268]
                        STRING [2269,2284]
                            String: "ubuntu-latest" [2269,2284]
                    FIELD [2285,2403]
                        String: "steps" [2285,2292]
                        ARRAY [2293,2403]
                            OBJECT [2294,2324]
                                FIELD [2295,2323]
                                    String: "uses" [2295,2301]
                                    STRING [2302,2323]
                                        String: "actions/checkout@v2" [2302,2323]
                            OBJECT [2325,2402]
                                FIELD [2326,2354]
                                    String: "name" [2326,2332]
                                    STRING [2333,2354]
                                        String: "Test docker compose" [2333,2354]
                                FIELD [2355,2401]
                                    String: "run" [2355,2360]
                                    STRING [2361,2401]
                                        String: "./infra/scripts/test-docker-compose.sh" [2361,2401]