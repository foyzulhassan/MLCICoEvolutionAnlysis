OBJECT [0,10784]
    FIELD [1,43]
        String: "name" [1,7]
        STRING [8,43]
            String: "Self-hosted runner AMD GPU (push)" [8,43]
    FIELD [44,290]
        String: "on" [44,48]
        OBJECT [49,290]
            FIELD [50,157]
                String: "workflow_run" [50,64]
                OBJECT [65,157]
                    FIELD [66,114]
                        String: "workflows" [66,77]
                        ARRAY [78,114]
                            STRING [79,113]
                                String: "Self-hosted runner (push-caller)" [79,113]
                    FIELD [115,134]
                        String: "branches" [115,125]
                        ARRAY [126,134]
                            STRING [127,133]
                                String: "main" [127,133]
                    FIELD [135,156]
                        String: "types" [135,142]
                        ARRAY [143,156]
                            STRING [144,155]
                                String: "completed" [144,155]
            FIELD [158,262]
                String: "push" [158,164]
                OBJECT [165,262]
                    FIELD [166,192]
                        String: "branches" [166,176]
                        ARRAY [177,192]
                            STRING [178,184]
                                String: "ci_*" [178,184]
                            STRING [185,191]
                                String: "ci-*" [185,191]
                    FIELD [193,261]
                        String: "paths" [193,200]
                        ARRAY [201,261]
                            STRING [202,210]
                                String: "src/**" [202,210]
                            STRING [211,221]
                                String: "tests/**" [211,221]
                            STRING [222,234]
                                String: ".github/**" [222,234]
                            STRING [235,249]
                                String: "templates/**" [235,249]
                            STRING [250,260]
                                String: "utils/**" [250,260]
            FIELD [263,289]
                String: "repository_dispatch" [263,284]
                NULL [285,289]
    FIELD [291,466]
        String: "env" [291,296]
        OBJECT [297,466]
            FIELD [298,320]
                String: "HF_HOME" [298,307]
                STRING [308,320]
                    String: "/mnt/cache" [308,320]
            FIELD [321,346]
                String: "TRANSFORMERS_IS_CI" [321,341]
                TRUE [342,346]
            FIELD [347,366]
                String: "OMP_NUM_THREADS" [347,364]
                NUMBER [365,366]
                    Number: 8 [365,366]
            FIELD [367,386]
                String: "MKL_NUM_THREADS" [367,384]
                NUMBER [385,386]
                    Number: 8 [385,386]
            FIELD [387,406]
                String: "PYTEST_TIMEOUT" [387,403]
                NUMBER [404,406]
                    Number: 60 [404,406]
            FIELD [407,439]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [407,434]
                TRUE [435,439]
            FIELD [440,465]
                String: "RUN_PT_TF_CROSS_TESTS" [440,463]
                NUMBER [464,465]
                    Number: 1 [464,465]
    FIELD [467,10783]
        String: "jobs" [467,473]
        OBJECT [474,10783]
            FIELD [475,831]
                String: "check_runner_status" [475,496]
                OBJECT [497,831]
                    FIELD [498,526]
                        String: "name" [498,504]
                        STRING [505,526]
                            String: "Check Runner Status" [505,526]
                    FIELD [527,552]
                        String: "runs-on" [527,536]
                        STRING [537,552]
                            String: "ubuntu-latest" [537,552]
                    FIELD [553,830]
                        String: "steps" [553,560]
                        ARRAY [561,830]
                            OBJECT [562,648]
                                FIELD [563,593]
                                    String: "name" [563,569]
                                    STRING [570,593]
                                        String: "Checkout transformers" [570,593]
                                FIELD [594,622]
                                    String: "uses" [594,600]
                                    STRING [601,622]
                                        String: "actions/checkout@v3" [601,622]
                                FIELD [623,647]
                                    String: "with" [623,629]
                                    OBJECT [630,647]
                                        FIELD [631,646]
                                            String: "fetch-depth" [631,644]
                                            NUMBER [645,646]
                                                Number: 2 [645,646]
                            OBJECT [649,829]
                                FIELD [650,678]
                                    String: "name" [650,656]
                                    STRING [657,678]
                                        String: "Check Runner Status" [657,678]
                                FIELD [679,828]
                                    String: "run" [679,684]
                                    STRING [685,828]
                                        String: "python utils/check_self_hosted_runner.py --target_runners amd-mi210-single-gpu-ci-runner-docker --token ${{ secrets.ACCESS_REPO_INFO_TOKEN }}" [685,828]
            FIELD [832,1534]
                String: "check_runners" [832,847]
                OBJECT [848,1534]
                    FIELD [849,871]
                        String: "name" [849,855]
                        STRING [856,871]
                            String: "Check Runners" [856,871]
                    FIELD [872,901]
                        String: "needs" [872,879]
                        STRING [880,901]
                            String: "check_runner_status" [880,901]
                    FIELD [902,990]
                        String: "strategy" [902,912]
                        OBJECT [913,990]
                            FIELD [914,989]
                                String: "matrix" [914,922]
                                OBJECT [923,989]
                                    FIELD [924,965]
                                        String: "machine_type" [924,938]
                                        ARRAY [939,965]
                                            STRING [940,952]
                                                String: "single-gpu" [940,952]
                                            STRING [953,964]
                                                String: "multi-gpu" [953,964]
                                    FIELD [966,988]
                                        String: "gpu_flavor" [966,978]
                                        ARRAY [979,988]
                                            STRING [980,987]
                                                String: "mi210" [980,987]
                    FIELD [991,1095]
                        String: "runs-on" [991,1000]
                        ARRAY [1001,1095]
                            STRING [1002,1015]
                                String: "self-hosted" [1002,1015]
                            STRING [1016,1028]
                                String: "docker-gpu" [1016,1028]
                            STRING [1029,1038]
                                String: "amd-gpu" [1029,1038]
                            STRING [1039,1067]
                                String: "${{ matrix.machine_type }}" [1039,1067]
                            STRING [1068,1094]
                                String: "${{ matrix.gpu_flavor }}" [1068,1094]
                    FIELD [1096,1345]
                        String: "container" [1096,1107]
                        OBJECT [1108,1345]
                            FIELD [1109,1167]
                                String: "image" [1109,1116]
                                STRING [1117,1167]
                                    String: "huggingface/transformers-pytorch-amd-gpu-push-ci" [1117,1167]
                            FIELD [1168,1344]
                                String: "options" [1168,1177]
                                STRING [1178,1344]
                                    String: "--device /dev/kfd --device /dev/dri --env HIP_VISIBLE_DEVICES --env ROCR_VISIBLE_DEVICES --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1178,1344]
                    FIELD [1346,1533]
                        String: "steps" [1346,1353]
                        ARRAY [1354,1533]
                            OBJECT [1355,1417]
                                FIELD [1356,1373]
                                    String: "name" [1356,1362]
                                    STRING [1363,1373]
                                        String: "ROCM-SMI" [1363,1373]
                                FIELD [1374,1416]
                                    String: "run" [1374,1379]
                                    STRING [1380,1416]
                                        String: "rocminfo  | grep \"Agent\" -A 14\n" [1380,1416]
                            OBJECT [1418,1532]
                                FIELD [1419,1448]
                                    String: "name" [1419,1425]
                                    STRING [1426,1448]
                                        String: "Show HIP environment" [1426,1448]
                                FIELD [1449,1531]
                                    String: "run" [1449,1454]
                                    STRING [1455,1531]
                                        String: "echo \"HIP: $HIP_VISIBLE_DEVICES\"\necho \"ROCR: $ROCR_VISIBLE_DEVICES\"\n" [1455,1531]
            FIELD [1535,4581]
                String: "setup_gpu" [1535,1546]
                OBJECT [1547,4581]
                    FIELD [1548,1562]
                        String: "name" [1548,1554]
                        STRING [1555,1562]
                            String: "Setup" [1555,1562]
                    FIELD [1563,1586]
                        String: "needs" [1563,1570]
                        STRING [1571,1586]
                            String: "check_runners" [1571,1586]
                    FIELD [1587,1675]
                        String: "strategy" [1587,1597]
                        OBJECT [1598,1675]
                            FIELD [1599,1674]
                                String: "matrix" [1599,1607]
                                OBJECT [1608,1674]
                                    FIELD [1609,1650]
                                        String: "machine_type" [1609,1623]
                                        ARRAY [1624,1650]
                                            STRING [1625,1637]
                                                String: "single-gpu" [1625,1637]
                                            STRING [1638,1649]
                                                String: "multi-gpu" [1638,1649]
                                    FIELD [1651,1673]
                                        String: "gpu_flavor" [1651,1663]
                                        ARRAY [1664,1673]
                                            STRING [1665,1672]
                                                String: "mi210" [1665,1672]
                    FIELD [1676,1780]
                        String: "runs-on" [1676,1685]
                        ARRAY [1686,1780]
                            STRING [1687,1700]
                                String: "self-hosted" [1687,1700]
                            STRING [1701,1713]
                                String: "docker-gpu" [1701,1713]
                            STRING [1714,1723]
                                String: "amd-gpu" [1714,1723]
                            STRING [1724,1752]
                                String: "${{ matrix.machine_type }}" [1724,1752]
                            STRING [1753,1779]
                                String: "${{ matrix.gpu_flavor }}" [1753,1779]
                    FIELD [1781,2030]
                        String: "container" [1781,1792]
                        OBJECT [1793,2030]
                            FIELD [1794,1852]
                                String: "image" [1794,1801]
                                STRING [1802,1852]
                                    String: "huggingface/transformers-pytorch-amd-gpu-push-ci" [1802,1852]
                            FIELD [1853,2029]
                                String: "options" [1853,1862]
                                STRING [1863,2029]
                                    String: "--device /dev/kfd --device /dev/dri --env HIP_VISIBLE_DEVICES --env ROCR_VISIBLE_DEVICES --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1863,2029]
                    FIELD [2031,2146]
                        String: "outputs" [2031,2040]
                        OBJECT [2041,2146]
                            FIELD [2042,2091]
                                String: "matrix" [2042,2050]
                                STRING [2051,2091]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [2051,2091]
                            FIELD [2092,2145]
                                String: "test_map" [2092,2102]
                                STRING [2103,2145]
                                    String: "${{ steps.set-matrix.outputs.test_map }}" [2103,2145]
                    FIELD [2147,4580]
                        String: "steps" [2147,2154]
                        ARRAY [2155,4580]
                            OBJECT [2156,2873]
                                FIELD [2157,2202]
                                    String: "name" [2157,2163]
                                    STRING [2164,2202]
                                        String: "Prepare custom environment variables" [2164,2202]
                                FIELD [2203,2217]
                                    String: "shell" [2203,2210]
                                    STRING [2211,2217]
                                        String: "bash" [2211,2217]
                                FIELD [2218,2872]
                                    String: "run" [2218,2223]
                                    STRING [2224,2872]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [2224,2872]
                            OBJECT [2874,3009]
                                FIELD [2875,2911]
                                    String: "name" [2875,2881]
                                    STRING [2882,2911]
                                        String: "print environment variables" [2882,2911]
                                FIELD [2912,3008]
                                    String: "run" [2912,2917]
                                    STRING [2918,3008]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [2918,3008]
                            OBJECT [3010,3331]
                                FIELD [3011,3060]
                                    String: "name" [3011,3017]
                                    STRING [3018,3060]
                                        String: "Update clone using environment variables" [3018,3060]
                                FIELD [3061,3096]
                                    String: "working-directory" [3061,3080]
                                    STRING [3081,3096]
                                        String: "/transformers" [3081,3096]
                                FIELD [3097,3330]
                                    String: "run" [3097,3102]
                                    STRING [3103,3330]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [3103,3330]
                            OBJECT [3332,3470]
                                FIELD [3333,3349]
                                    String: "name" [3333,3339]
                                    STRING [3340,3349]
                                        String: "Cleanup" [3340,3349]
                                FIELD [3350,3385]
                                    String: "working-directory" [3350,3369]
                                    STRING [3370,3385]
                                        String: "/transformers" [3370,3385]
                                FIELD [3386,3469]
                                    String: "run" [3386,3391]
                                    STRING [3392,3469]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [3392,3469]
                            OBJECT [3471,3580]
                                FIELD [3472,3524]
                                    String: "name" [3472,3478]
                                    STRING [3479,3524]
                                        String: "Show installed libraries and their versions" [3479,3524]
                                FIELD [3525,3560]
                                    String: "working-directory" [3525,3544]
                                    STRING [3545,3560]
                                        String: "/transformers" [3545,3560]
                                FIELD [3561,3579]
                                    String: "run" [3561,3566]
                                    STRING [3567,3579]
                                        String: "pip freeze" [3567,3579]
                            OBJECT [3581,3776]
                                FIELD [3582,3613]
                                    String: "name" [3582,3588]
                                    STRING [3589,3613]
                                        String: "Fetch the tests to run" [3589,3613]
                                FIELD [3614,3649]
                                    String: "working-directory" [3614,3633]
                                    STRING [3634,3649]
                                        String: "/transformers" [3634,3649]
                                FIELD [3650,3775]
                                    String: "run" [3650,3655]
                                    STRING [3656,3775]
                                        String: "pip install --upgrade git-python\npython3 utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [3656,3775]
                            OBJECT [3777,3919]
                                FIELD [3778,3807]
                                    String: "name" [3778,3784]
                                    STRING [3785,3807]
                                        String: "Report fetched tests" [3785,3807]
                                FIELD [3808,3843]
                                    String: "uses" [3808,3814]
                                    STRING [3815,3843]
                                        String: "actions/upload-artifact@v3" [3815,3843]
                                FIELD [3844,3918]
                                    String: "with" [3844,3850]
                                    OBJECT [3851,3918]
                                        FIELD [3852,3873]
                                            String: "name" [3852,3858]
                                            STRING [3859,3873]
                                                String: "test_fetched" [3859,3873]
                                        FIELD [3874,3917]
                                            String: "path" [3874,3880]
                                            STRING [3881,3917]
                                                String: "/transformers/test_preparation.txt" [3881,3917]
                            OBJECT [3920,4579]
                                FIELD [3921,3938]
                                    String: "id" [3921,3925]
                                    STRING [3926,3938]
                                        String: "set-matrix" [3926,3938]
                                FIELD [3939,3974]
                                    String: "name" [3939,3945]
                                    STRING [3946,3974]
                                        String: "Organize tests into models" [3946,3974]
                                FIELD [3975,4010]
                                    String: "working-directory" [3975,3994]
                                    STRING [3995,4010]
                                        String: "/transformers" [3995,4010]
                                FIELD [4011,4578]
                                    String: "run" [4011,4016]
                                    STRING [4017,4578]
                                        String: "if [ -f test_map.json ]; then\n    keys=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); d = list(test_map.keys()); print(d)')\n    test_map=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); print(test_map)')\nelse\n    keys=$(python3 -c 'keys = [\"dummy\"]; print(keys)')\n    test_map=$(python3 -c 'test_map = {\"dummy\": []}; print(test_map)')\nfi\necho $keys\necho $test_map\necho \"matrix=$keys\" >> $GITHUB_OUTPUT\necho \"test_map=$test_map\" >> $GITHUB_OUTPUT\n" [4017,4578]
            FIELD [4582,8140]
                String: "run_tests_amdgpu" [4582,4600]
                OBJECT [4601,8140]
                    FIELD [4602,4622]
                        String: "name" [4602,4608]
                        STRING [4609,4622]
                            String: "Model tests" [4609,4622]
                    FIELD [4623,4642]
                        String: "needs" [4623,4630]
                        STRING [4631,4642]
                            String: "setup_gpu" [4631,4642]
                    FIELD [4643,4717]
                        String: "if" [4643,4647]
                        STRING [4648,4717]
                            String: "contains(fromJson(needs.setup_gpu.outputs.matrix), 'dummy') != true" [4648,4717]
                    FIELD [4718,4884]
                        String: "strategy" [4718,4728]
                        OBJECT [4729,4884]
                            FIELD [4730,4747]
                                String: "fail-fast" [4730,4741]
                                FALSE [4742,4747]
                            FIELD [4748,4883]
                                String: "matrix" [4748,4756]
                                OBJECT [4757,4883]
                                    FIELD [4758,4817]
                                        String: "folders" [4758,4767]
                                        STRING [4768,4817]
                                            String: "${{ fromJson(needs.setup_gpu.outputs.matrix) }}" [4768,4817]
                                    FIELD [4818,4859]
                                        String: "machine_type" [4818,4832]
                                        ARRAY [4833,4859]
                                            STRING [4834,4846]
                                                String: "single-gpu" [4834,4846]
                                            STRING [4847,4858]
                                                String: "multi-gpu" [4847,4858]
                                    FIELD [4860,4882]
                                        String: "gpu_flavor" [4860,4872]
                                        ARRAY [4873,4882]
                                            STRING [4874,4881]
                                                String: "mi210" [4874,4881]
                    FIELD [4885,4989]
                        String: "runs-on" [4885,4894]
                        ARRAY [4895,4989]
                            STRING [4896,4909]
                                String: "self-hosted" [4896,4909]
                            STRING [4910,4922]
                                String: "docker-gpu" [4910,4922]
                            STRING [4923,4932]
                                String: "amd-gpu" [4923,4932]
                            STRING [4933,4961]
                                String: "${{ matrix.machine_type }}" [4933,4961]
                            STRING [4962,4988]
                                String: "${{ matrix.gpu_flavor }}" [4962,4988]
                    FIELD [4990,5239]
                        String: "container" [4990,5001]
                        OBJECT [5002,5239]
                            FIELD [5003,5061]
                                String: "image" [5003,5010]
                                STRING [5011,5061]
                                    String: "huggingface/transformers-pytorch-amd-gpu-push-ci" [5011,5061]
                            FIELD [5062,5238]
                                String: "options" [5062,5071]
                                STRING [5072,5238]
                                    String: "--device /dev/kfd --device /dev/dri --env HIP_VISIBLE_DEVICES --env ROCR_VISIBLE_DEVICES --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [5072,5238]
                    FIELD [5240,8139]
                        String: "steps" [5240,5247]
                        ARRAY [5248,8139]
                            OBJECT [5249,5966]
                                FIELD [5250,5295]
                                    String: "name" [5250,5256]
                                    STRING [5257,5295]
                                        String: "Prepare custom environment variables" [5257,5295]
                                FIELD [5296,5310]
                                    String: "shell" [5296,5303]
                                    STRING [5304,5310]
                                        String: "bash" [5304,5310]
                                FIELD [5311,5965]
                                    String: "run" [5311,5316]
                                    STRING [5317,5965]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [5317,5965]
                            OBJECT [5967,6102]
                                FIELD [5968,6004]
                                    String: "name" [5968,5974]
                                    STRING [5975,6004]
                                        String: "print environment variables" [5975,6004]
                                FIELD [6005,6101]
                                    String: "run" [6005,6010]
                                    STRING [6011,6101]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [6011,6101]
                            OBJECT [6103,6424]
                                FIELD [6104,6153]
                                    String: "name" [6104,6110]
                                    STRING [6111,6153]
                                        String: "Update clone using environment variables" [6111,6153]
                                FIELD [6154,6189]
                                    String: "working-directory" [6154,6173]
                                    STRING [6174,6189]
                                        String: "/transformers" [6174,6189]
                                FIELD [6190,6423]
                                    String: "run" [6190,6195]
                                    STRING [6196,6423]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [6196,6423]
                            OBJECT [6425,6640]
                                FIELD [6426,6523]
                                    String: "name" [6426,6432]
                                    STRING [6433,6523]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [6433,6523]
                                FIELD [6524,6559]
                                    String: "working-directory" [6524,6543]
                                    STRING [6544,6559]
                                        String: "/transformers" [6544,6559]
                                FIELD [6560,6639]
                                    String: "run" [6560,6565]
                                    STRING [6566,6639]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [6566,6639]
                            OBJECT [6641,6991]
                                FIELD [6642,6684]
                                    String: "name" [6642,6648]
                                    STRING [6649,6684]
                                        String: "Echo folder ${{ matrix.folders }}" [6649,6684]
                                FIELD [6685,6699]
                                    String: "shell" [6685,6692]
                                    STRING [6693,6699]
                                        String: "bash" [6693,6699]
                                FIELD [6700,6990]
                                    String: "run" [6700,6705]
                                    STRING [6706,6990]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup_gpu.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [6706,6990]
                            OBJECT [6992,7054]
                                FIELD [6993,7010]
                                    String: "name" [6993,6999]
                                    STRING [7000,7010]
                                        String: "ROCM-SMI" [7000,7010]
                                FIELD [7011,7053]
                                    String: "run" [7011,7016]
                                    STRING [7017,7053]
                                        String: "rocminfo  | grep \"Agent\" -A 14\n" [7017,7053]
                            OBJECT [7055,7169]
                                FIELD [7056,7085]
                                    String: "name" [7056,7062]
                                    STRING [7063,7085]
                                        String: "Show HIP environment" [7063,7085]
                                FIELD [7086,7168]
                                    String: "run" [7086,7091]
                                    STRING [7092,7168]
                                        String: "echo \"HIP: $HIP_VISIBLE_DEVICES\"\necho \"ROCR: $ROCR_VISIBLE_DEVICES\"\n" [7092,7168]
                            OBJECT [7170,7265]
                                FIELD [7171,7191]
                                    String: "name" [7171,7177]
                                    STRING [7178,7191]
                                        String: "Environment" [7178,7191]
                                FIELD [7192,7227]
                                    String: "working-directory" [7192,7211]
                                    STRING [7212,7227]
                                        String: "/transformers" [7212,7227]
                                FIELD [7228,7264]
                                    String: "run" [7228,7233]
                                    STRING [7234,7264]
                                        String: "python3 utils/print_env.py\n" [7234,7264]
                            OBJECT [7266,7375]
                                FIELD [7267,7319]
                                    String: "name" [7267,7273]
                                    STRING [7274,7319]
                                        String: "Show installed libraries and their versions" [7274,7319]
                                FIELD [7320,7355]
                                    String: "working-directory" [7320,7339]
                                    STRING [7340,7355]
                                        String: "/transformers" [7340,7355]
                                FIELD [7356,7374]
                                    String: "run" [7356,7361]
                                    STRING [7362,7374]
                                        String: "pip freeze" [7362,7374]
                            OBJECT [7376,7653]
                                FIELD [7377,7424]
                                    String: "name" [7377,7383]
                                    STRING [7384,7424]
                                        String: "Run all non-slow selected tests on GPU" [7384,7424]
                                FIELD [7425,7460]
                                    String: "working-directory" [7425,7444]
                                    STRING [7445,7460]
                                        String: "/transformers" [7445,7460]
                                FIELD [7461,7652]
                                    String: "run" [7461,7466]
                                    STRING [7467,7652]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup_gpu.outputs.test_map)[matrix.folders] }}\n" [7467,7652]
                            OBJECT [7654,7847]
                                FIELD [7655,7685]
                                    String: "name" [7655,7661]
                                    STRING [7662,7685]
                                        String: "Failure short reports" [7662,7685]
                                FIELD [7686,7709]
                                    String: "if" [7686,7690]
                                    STRING [7691,7709]
                                        String: "${{ failure() }}" [7691,7709]
                                FIELD [7710,7734]
                                    String: "continue-on-error" [7710,7729]
                                    TRUE [7730,7734]
                                FIELD [7735,7846]
                                    String: "run" [7735,7740]
                                    STRING [7741,7846]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [7741,7846]
                            OBJECT [7848,8138]
                                FIELD [7849,7886]
                                    String: "name" [7849,7855]
                                    STRING [7856,7886]
                                        String: "Test suite reports artifacts" [7856,7886]
                                FIELD [7887,7909]
                                    String: "if" [7887,7891]
                                    STRING [7892,7909]
                                        String: "${{ always() }}" [7892,7909]
                                FIELD [7910,7945]
                                    String: "uses" [7910,7916]
                                    STRING [7917,7945]
                                        String: "actions/upload-artifact@v3" [7917,7945]
                                FIELD [7946,8137]
                                    String: "with" [7946,7952]
                                    OBJECT [7953,8137]
                                        FIELD [7954,8046]
                                            String: "name" [7954,7960]
                                            STRING [7961,8046]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [7961,8046]
                                        FIELD [8047,8136]
                                            String: "path" [8047,8053]
                                            STRING [8054,8136]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [8054,8136]
            FIELD [8141,10782]
                String: "send_results" [8141,8155]
                OBJECT [8156,10782]
                    FIELD [8157,8189]
                        String: "name" [8157,8163]
                        STRING [8164,8189]
                            String: "Send results to webhook" [8164,8189]
                    FIELD [8190,8215]
                        String: "runs-on" [8190,8199]
                        STRING [8200,8215]
                            String: "ubuntu-latest" [8200,8215]
                    FIELD [8216,8231]
                        String: "if" [8216,8220]
                        STRING [8221,8231]
                            String: "always()" [8221,8231]
                    FIELD [8232,8310]
                        String: "needs" [8232,8239]
                        ARRAY [8240,8310]
                            STRING [8241,8262]
                                String: "check_runner_status" [8241,8262]
                            STRING [8263,8278]
                                String: "check_runners" [8263,8278]
                            STRING [8279,8290]
                                String: "setup_gpu" [8279,8290]
                            STRING [8291,8309]
                                String: "run_tests_amdgpu" [8291,8309]
                    FIELD [8311,10781]
                        String: "steps" [8311,8318]
                        ARRAY [8319,10781]
                            OBJECT [8320,8561]
                                FIELD [8321,8352]
                                    String: "name" [8321,8327]
                                    STRING [8328,8352]
                                        String: "Preliminary job status" [8328,8352]
                                FIELD [8353,8367]
                                    String: "shell" [8353,8360]
                                    STRING [8361,8367]
                                        String: "bash" [8361,8367]
                                FIELD [8368,8560]
                                    String: "run" [8368,8373]
                                    STRING [8374,8560]
                                        String: "echo \"Runner availability: ${{ needs.check_runner_status.result }}\"\necho \"Setup status: ${{ needs.setup_gpu.result }}\"\necho \"Runner status: ${{ needs.check_runners.result }}\"\n" [8374,8560]
                            OBJECT [8562,9279]
                                FIELD [8563,8608]
                                    String: "name" [8563,8569]
                                    STRING [8570,8608]
                                        String: "Prepare custom environment variables" [8570,8608]
                                FIELD [8609,8623]
                                    String: "shell" [8609,8616]
                                    STRING [8617,8623]
                                        String: "bash" [8617,8623]
                                FIELD [8624,9278]
                                    String: "run" [8624,8629]
                                    STRING [8630,9278]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [8630,9278]
                            OBJECT [9280,9415]
                                FIELD [9281,9317]
                                    String: "name" [9281,9287]
                                    STRING [9288,9317]
                                        String: "print environment variables" [9288,9317]
                                FIELD [9318,9414]
                                    String: "run" [9318,9323]
                                    STRING [9324,9414]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [9324,9414]
                            OBJECT [9416,9472]
                                FIELD [9417,9445]
                                    String: "uses" [9417,9423]
                                    STRING [9424,9445]
                                        String: "actions/checkout@v3" [9424,9445]
                                FIELD [9446,9471]
                                    String: "with" [9446,9452]
                                    OBJECT [9453,9471]
                                        FIELD [9454,9470]
                                            String: "fetch-depth" [9454,9467]
                                            NUMBER [9468,9470]
                                                Number: 20 [9468,9470]
                            OBJECT [9473,9758]
                                FIELD [9474,9523]
                                    String: "name" [9474,9480]
                                    STRING [9481,9523]
                                        String: "Update clone using environment variables" [9481,9523]
                                FIELD [9524,9757]
                                    String: "run" [9524,9529]
                                    STRING [9530,9757]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [9530,9757]
                            OBJECT [9759,9798]
                                FIELD [9760,9797]
                                    String: "uses" [9760,9766]
                                    STRING [9767,9797]
                                        String: "actions/download-artifact@v3" [9767,9797]
                            OBJECT [9799,10780]
                                FIELD [9800,9830]
                                    String: "name" [9800,9806]
                                    STRING [9807,9830]
                                        String: "Send message to Slack" [9807,9830]
                                FIELD [9831,10649]
                                    String: "env" [9831,9836]
                                    OBJECT [9837,10649]
                                        FIELD [9838,9894]
                                            String: "CI_SLACK_BOT_TOKEN" [9838,9858]
                                            STRING [9859,9894]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [9859,9894]
                                        FIELD [9895,9953]
                                            String: "CI_SLACK_CHANNEL_ID" [9895,9916]
                                            STRING [9917,9953]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [9917,9953]
                                        FIELD [9954,10024]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [9954,9981]
                                            STRING [9982,10024]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [9982,10024]
                                        FIELD [10025,10091]
                                            String: "CI_SLACK_CHANNEL_ID_AMD" [10025,10050]
                                            STRING [10051,10091]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_AMD }}" [10051,10091]
                                        FIELD [10092,10168]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [10092,10122]
                                            STRING [10123,10168]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [10123,10168]
                                        FIELD [10169,10238]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [10169,10197]
                                            STRING [10198,10238]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_AMD }}" [10198,10238]
                                        FIELD [10239,10303]
                                            String: "ACCESS_REPO_INFO_TOKEN" [10239,10263]
                                            STRING [10264,10303]
                                                String: "${{ secrets.ACCESS_REPO_INFO_TOKEN }}" [10264,10303]
                                        FIELD [10304,10321]
                                            String: "CI_EVENT" [10304,10314]
                                            STRING [10315,10321]
                                                String: "push" [10315,10321]
                                        FIELD [10322,10379]
                                            String: "CI_TITLE_PUSH" [10322,10337]
                                            STRING [10338,10379]
                                                String: "${{ github.event.head_commit.message }}" [10338,10379]
                                        FIELD [10380,10458]
                                            String: "CI_TITLE_WORKFLOW_RUN" [10380,10403]
                                            STRING [10404,10458]
                                                String: "${{ github.event.workflow_run.head_commit.message }}" [10404,10458]
                                        FIELD [10459,10487]
                                            String: "CI_SHA" [10459,10467]
                                            STRING [10468,10487]
                                                String: "${{ env.CI_SHA }}" [10468,10487]
                                        FIELD [10488,10545]
                                            String: "RUNNER_STATUS" [10488,10503]
                                            STRING [10504,10545]
                                                String: "${{ needs.check_runner_status.result }}" [10504,10545]
                                        FIELD [10546,10601]
                                            String: "RUNNER_ENV_STATUS" [10546,10565]
                                            STRING [10566,10601]
                                                String: "${{ needs.check_runners.result }}" [10566,10601]
                                        FIELD [10602,10648]
                                            String: "SETUP_STATUS" [10602,10616]
                                            STRING [10617,10648]
                                                String: "${{ needs.setup_gpu.result }}" [10617,10648]
                                FIELD [10650,10779]
                                    String: "run" [10650,10655]
                                    STRING [10656,10779]
                                        String: "pip install slack_sdk\npip show slack_sdk\npython utils/notification_service.py \"${{ needs.setup_gpu.outputs.matrix }}\"" [10656,10779]