OBJECT [0,9622]
    FIELD [1,16]
        String: "name" [1,7]
        STRING [8,16]
            String: "Master" [8,16]
    FIELD [17,132]
        String: "on" [17,21]
        OBJECT [22,132]
            FIELD [23,53]
                String: "push" [23,29]
                OBJECT [30,53]
                    FIELD [31,52]
                        String: "branches" [31,41]
                        ARRAY [42,52]
                            STRING [43,51]
                                String: "master" [43,51]
            FIELD [54,87]
                String: "release" [54,63]
                OBJECT [64,87]
                    FIELD [65,86]
                        String: "types" [65,72]
                        ARRAY [73,86]
                            STRING [74,85]
                                String: "published" [74,85]
            FIELD [88,131]
                String: "schedule" [88,98]
                ARRAY [99,131]
                    OBJECT [100,130]
                        FIELD [101,129]
                            String: "cron" [101,107]
                            STRING [108,129]
                                String: "37 11 * * 1,2,3,4,5" [108,129]
    FIELD [133,9621]
        String: "jobs" [133,139]
        OBJECT [140,9621]
            FIELD [141,1502]
                String: "check_core" [141,153]
                OBJECT [154,1502]
                    FIELD [155,174]
                        String: "name" [155,161]
                        STRING [162,174]
                            String: "Check Core" [162,174]
                    FIELD [175,200]
                        String: "runs-on" [175,184]
                        STRING [185,200]
                            String: "ubuntu-latest" [185,200]
                    FIELD [201,247]
                        String: "strategy" [201,211]
                        OBJECT [212,247]
                            FIELD [213,246]
                                String: "matrix" [213,221]
                                OBJECT [222,246]
                                    FIELD [223,245]
                                        String: "python" [223,231]
                                        ARRAY [232,245]
                                            STRING [233,238]
                                                String: "3.6" [233,238]
                                            STRING [239,244]
                                                String: "3.7" [239,244]
                    FIELD [248,1501]
                        String: "steps" [248,255]
                        ARRAY [256,1501]
                            OBJECT [257,287]
                                FIELD [258,286]
                                    String: "uses" [258,264]
                                    STRING [265,286]
                                        String: "actions/checkout@v2" [265,286]
                            OBJECT [288,393]
                                FIELD [289,310]
                                    String: "name" [289,295]
                                    STRING [296,310]
                                        String: "Setup Python" [296,310]
                                FIELD [311,343]
                                    String: "uses" [311,317]
                                    STRING [318,343]
                                        String: "actions/setup-python@v1" [318,343]
                                FIELD [344,392]
                                    String: "with" [344,350]
                                    OBJECT [351,392]
                                        FIELD [352,391]
                                            String: "python-version" [352,368]
                                            STRING [369,391]
                                                String: "${{ matrix.python }}" [369,391]
                            OBJECT [394,593]
                                FIELD [395,420]
                                    String: "uses" [395,401]
                                    STRING [402,420]
                                        String: "actions/cache@v1" [402,420]
                                FIELD [421,592]
                                    String: "with" [421,427]
                                    OBJECT [428,592]
                                        FIELD [429,463]
                                            String: "path" [429,435]
                                            STRING [436,463]
                                                String: "${{ env.pythonLocation }}" [436,463]
                                        FIELD [464,591]
                                            String: "key" [464,469]
                                            STRING [470,591]
                                                String: "${{ runner.os }}-pydeps-${{ env.pythonLocation }}-${{ hashFiles('setup.py') }}-${{ hashFiles('dev-requirements.txt') }}" [470,591]
                            OBJECT [594,648]
                                FIELD [595,624]
                                    String: "name" [595,601]
                                    STRING [602,624]
                                        String: "Install requirements" [602,624]
                                FIELD [625,647]
                                    String: "run" [625,630]
                                    STRING [631,647]
                                        String: "make install\n" [631,647]
                            OBJECT [649,691]
                                FIELD [650,669]
                                    String: "name" [650,656]
                                    STRING [657,669]
                                        String: "Debug info" [657,669]
                                FIELD [670,690]
                                    String: "run" [670,675]
                                    STRING [676,690]
                                        String: "pip freeze\n" [676,690]
                            OBJECT [692,727]
                                FIELD [693,706]
                                    String: "name" [693,699]
                                    STRING [700,706]
                                        String: "Lint" [700,706]
                                FIELD [707,726]
                                    String: "run" [707,712]
                                    STRING [713,726]
                                        String: "make lint\n" [713,726]
                            OBJECT [728,774]
                                FIELD [729,748]
                                    String: "name" [729,735]
                                    STRING [736,748]
                                        String: "Type check" [736,748]
                                FIELD [749,773]
                                    String: "run" [749,754]
                                    STRING [755,773]
                                        String: "make typecheck\n" [755,773]
                            OBJECT [775,824]
                                FIELD [776,794]
                                    String: "name" [776,782]
                                    STRING [783,794]
                                        String: "Run tests" [783,794]
                                FIELD [795,823]
                                    String: "run" [795,800]
                                    STRING [801,823]
                                        String: "make test-with-cov\n" [801,823]
                            OBJECT [825,1301]
                                FIELD [826,861]
                                    String: "name" [826,832]
                                    STRING [833,861]
                                        String: "Upload coverage to Codecov" [833,861]
                                FIELD [862,891]
                                    String: "if" [862,866]
                                    STRING [867,891]
                                        String: "matrix.python == '3.7'" [867,891]
                                FIELD [892,946]
                                    String: "env" [892,897]
                                    OBJECT [898,946]
                                        FIELD [899,945]
                                            String: "CODECOV_TOKEN" [899,914]
                                            STRING [915,945]
                                                String: "${{ secrets.CODECOV_TOKEN }}" [915,945]
                                FIELD [947,1300]
                                    String: "run" [947,952]
                                    STRING [953,1300]
                                        String: "# Ignore codecov failures as the codecov server is not\n# very reliable but we don't want to report a failure\n# in the github UI just because the coverage report failed to\n# be published.\n# This will also fail for forked repositories since the secret token won't\n# be available.\ncodecov -t $CODECOV_TOKEN || echo \"codecov upload failed\"\n" [953,1300]
                            OBJECT [1302,1500]
                                FIELD [1303,1320]
                                    String: "name" [1303,1309]
                                    STRING [1310,1320]
                                        String: "Clean up" [1310,1320]
                                FIELD [1321,1336]
                                    String: "if" [1321,1325]
                                    STRING [1326,1336]
                                        String: "always()" [1326,1336]
                                FIELD [1337,1499]
                                    String: "run" [1337,1342]
                                    STRING [1343,1499]
                                        String: "# Could run into issues with the cache if we don't uninstall the editable.\n# See https://github.com/pypa/pip/issues/4537.\npip uninstall --yes allennlp\n" [1343,1499]
            FIELD [1503,2486]
                String: "check_models" [1503,1517]
                OBJECT [1518,2486]
                    FIELD [1519,1540]
                        String: "name" [1519,1525]
                        STRING [1526,1540]
                            String: "Check Models" [1526,1540]
                    FIELD [1541,1566]
                        String: "runs-on" [1541,1550]
                        STRING [1551,1566]
                            String: "ubuntu-latest" [1551,1566]
                    FIELD [1567,1613]
                        String: "strategy" [1567,1577]
                        OBJECT [1578,1613]
                            FIELD [1579,1612]
                                String: "matrix" [1579,1587]
                                OBJECT [1588,1612]
                                    FIELD [1589,1611]
                                        String: "python" [1589,1597]
                                        ARRAY [1598,1611]
                                            STRING [1599,1604]
                                                String: "3.6" [1599,1604]
                                            STRING [1605,1610]
                                                String: "3.7" [1605,1610]
                    FIELD [1614,2485]
                        String: "steps" [1614,1621]
                        ARRAY [1622,2485]
                            OBJECT [1623,1653]
                                FIELD [1624,1652]
                                    String: "uses" [1624,1630]
                                    STRING [1631,1652]
                                        String: "actions/checkout@v2" [1631,1652]
                            OBJECT [1654,1759]
                                FIELD [1655,1676]
                                    String: "name" [1655,1661]
                                    STRING [1662,1676]
                                        String: "Setup Python" [1662,1676]
                                FIELD [1677,1709]
                                    String: "uses" [1677,1683]
                                    STRING [1684,1709]
                                        String: "actions/setup-python@v1" [1684,1709]
                                FIELD [1710,1758]
                                    String: "with" [1710,1716]
                                    OBJECT [1717,1758]
                                        FIELD [1718,1757]
                                            String: "python-version" [1718,1734]
                                            STRING [1735,1757]
                                                String: "${{ matrix.python }}" [1735,1757]
                            OBJECT [1760,1959]
                                FIELD [1761,1786]
                                    String: "uses" [1761,1767]
                                    STRING [1768,1786]
                                        String: "actions/cache@v1" [1768,1786]
                                FIELD [1787,1958]
                                    String: "with" [1787,1793]
                                    OBJECT [1794,1958]
                                        FIELD [1795,1829]
                                            String: "path" [1795,1801]
                                            STRING [1802,1829]
                                                String: "${{ env.pythonLocation }}" [1802,1829]
                                        FIELD [1830,1957]
                                            String: "key" [1830,1835]
                                            STRING [1836,1957]
                                                String: "${{ runner.os }}-pydeps-${{ env.pythonLocation }}-${{ hashFiles('setup.py') }}-${{ hashFiles('dev-requirements.txt') }}" [1836,1957]
                            OBJECT [1960,2014]
                                FIELD [1961,1990]
                                    String: "name" [1961,1967]
                                    STRING [1968,1990]
                                        String: "Install requirements" [1968,1990]
                                FIELD [1991,2013]
                                    String: "run" [1991,1996]
                                    STRING [1997,2013]
                                        String: "make install\n" [1997,2013]
                            OBJECT [2015,2057]
                                FIELD [2016,2035]
                                    String: "name" [2016,2022]
                                    STRING [2023,2035]
                                        String: "Debug info" [2023,2035]
                                FIELD [2036,2056]
                                    String: "run" [2036,2041]
                                    STRING [2042,2056]
                                        String: "pip freeze\n" [2042,2056]
                            OBJECT [2058,2302]
                                FIELD [2059,2096]
                                    String: "name" [2059,2065]
                                    STRING [2066,2096]
                                        String: "Pull and install models repo" [2066,2096]
                                FIELD [2097,2135]
                                    String: "env" [2097,2102]
                                    OBJECT [2103,2135]
                                        FIELD [2104,2134]
                                            String: "ALLENNLP_VERSION_OVERRIDE" [2104,2131]
                                            STRING [2132,2134]
                                                String: "" [2132,2134]
                                FIELD [2136,2301]
                                    String: "run" [2136,2141]
                                    STRING [2142,2301]
                                        String: "git clone https://github.com/allenai/allennlp-models.git\ncd allennlp-models && pip install --upgrade --upgrade-strategy eager -e . -r dev-requirements.txt\n" [2142,2301]
                            OBJECT [2303,2372]
                                FIELD [2304,2329]
                                    String: "name" [2304,2310]
                                    STRING [2311,2329]
                                        String: "Run models tests" [2311,2329]
                                FIELD [2330,2371]
                                    String: "run" [2330,2335]
                                    STRING [2336,2371]
                                        String: "cd allennlp-models && make test\n" [2336,2371]
                            OBJECT [2373,2484]
                                FIELD [2374,2391]
                                    String: "name" [2374,2380]
                                    STRING [2381,2391]
                                        String: "Clean up" [2381,2391]
                                FIELD [2392,2407]
                                    String: "if" [2392,2396]
                                    STRING [2397,2407]
                                        String: "always()" [2397,2407]
                                FIELD [2408,2483]
                                    String: "run" [2408,2413]
                                    STRING [2414,2483]
                                        String: "pip uninstall --yes allennlp\npip uninstall --yes allennlp_models\n" [2414,2483]
            FIELD [2487,4290]
                String: "build_package" [2487,2502]
                OBJECT [2503,4290]
                    FIELD [2504,2526]
                        String: "name" [2504,2510]
                        STRING [2511,2526]
                            String: "Build Package" [2511,2526]
                    FIELD [2527,2552]
                        String: "runs-on" [2527,2536]
                        STRING [2537,2552]
                            String: "ubuntu-latest" [2537,2552]
                    FIELD [2553,4289]
                        String: "steps" [2553,2560]
                        ARRAY [2561,4289]
                            OBJECT [2562,2592]
                                FIELD [2563,2591]
                                    String: "uses" [2563,2569]
                                    STRING [2570,2591]
                                        String: "actions/checkout@v2" [2570,2591]
                            OBJECT [2593,2679]
                                FIELD [2594,2615]
                                    String: "name" [2594,2600]
                                    STRING [2601,2615]
                                        String: "Setup Python" [2601,2615]
                                FIELD [2616,2648]
                                    String: "uses" [2616,2622]
                                    STRING [2623,2648]
                                        String: "actions/setup-python@v1" [2623,2648]
                                FIELD [2649,2678]
                                    String: "with" [2649,2655]
                                    OBJECT [2656,2678]
                                        FIELD [2657,2677]
                                            String: "python-version" [2657,2673]
                                            NUMBER [2674,2677]
                                                Number: 3.7 [2674,2677]
                            OBJECT [2680,2879]
                                FIELD [2681,2706]
                                    String: "uses" [2681,2687]
                                    STRING [2688,2706]
                                        String: "actions/cache@v1" [2688,2706]
                                FIELD [2707,2878]
                                    String: "with" [2707,2713]
                                    OBJECT [2714,2878]
                                        FIELD [2715,2749]
                                            String: "path" [2715,2721]
                                            STRING [2722,2749]
                                                String: "${{ env.pythonLocation }}" [2722,2749]
                                        FIELD [2750,2877]
                                            String: "key" [2750,2755]
                                            STRING [2756,2877]
                                                String: "${{ runner.os }}-pydeps-${{ env.pythonLocation }}-${{ hashFiles('setup.py') }}-${{ hashFiles('dev-requirements.txt') }}" [2756,2877]
                            OBJECT [2880,2934]
                                FIELD [2881,2910]
                                    String: "name" [2881,2887]
                                    STRING [2888,2910]
                                        String: "Install requirements" [2888,2910]
                                FIELD [2911,2933]
                                    String: "run" [2911,2916]
                                    STRING [2917,2933]
                                        String: "make install\n" [2917,2933]
                            OBJECT [2935,3570]
                                FIELD [2936,2974]
                                    String: "name" [2936,2942]
                                    STRING [2943,2974]
                                        String: "Check and set nightly version" [2943,2974]
                                FIELD [2975,3013]
                                    String: "if" [2975,2979]
                                    STRING [2980,3013]
                                        String: "github.event_name == 'schedule'" [2980,3013]
                                FIELD [3014,3569]
                                    String: "run" [3014,3019]
                                    STRING [3020,3569]
                                        String: "# Verify that current version is ahead of the last release.\nLATEST=$(scripts/get_version.py latest)\nCURRENT=$(scripts/get_version.py current)\nif [ \"$CURRENT\" == \"$LATEST\" ]; then\n    echo \"Current version needs to be ahead of latest release in order to build nightly release\";\n    exit 1;\nfi\n# This is somewhat bizarre, but you can't set env variables to bash\n# commands in the action workflow - so we have to use this odd way of\n# exporting a variable instead.\necho ::set-env name=ALLENNLP_VERSION_SUFFIX::.dev$(date -u +%Y%m%d)\n" [3020,3569]
                            OBJECT [3571,3925]
                                FIELD [3572,3616]
                                    String: "name" [3572,3578]
                                    STRING [3579,3616]
                                        String: "Check version and release tag match" [3579,3616]
                                FIELD [3617,3654]
                                    String: "if" [3617,3621]
                                    STRING [3622,3654]
                                        String: "github.event_name == 'release'" [3622,3654]
                                FIELD [3655,3924]
                                    String: "run" [3655,3660]
                                    STRING [3661,3924]
                                        String: "# Remove 'refs/tags/' to get the actual tag from the release.\nTAG=${GITHUB_REF#refs/tags/};\nVERSION=$(scripts/get_version.py current)\nif [ \"$TAG\" != \"$VERSION\" ]; then\n    echo \"Bad tag or version. Tag $TAG does not match $VERSION\";\n    exit 1;\nfi\n" [3661,3924]
                            OBJECT [3926,4103]
                                FIELD [3927,3954]
                                    String: "name" [3927,3933]
                                    STRING [3934,3954]
                                        String: "Build core package" [3934,3954]
                                FIELD [3955,4102]
                                    String: "run" [3955,3960]
                                    STRING [3961,4102]
                                        String: "echo \"Building packages for core release\"\n# Just print out the version for debugging.\nmake version\npython setup.py bdist_wheel sdist\n" [3961,4102]
                            OBJECT [4104,4213]
                                FIELD [4105,4131]
                                    String: "name" [4105,4111]
                                    STRING [4112,4131]
                                        String: "Save core package" [4112,4131]
                                FIELD [4132,4167]
                                    String: "uses" [4132,4138]
                                    STRING [4139,4167]
                                        String: "actions/upload-artifact@v1" [4139,4167]
                                FIELD [4168,4212]
                                    String: "with" [4168,4174]
                                    OBJECT [4175,4212]
                                        FIELD [4176,4197]
                                            String: "name" [4176,4182]
                                            STRING [4183,4197]
                                                String: "core-package" [4183,4197]
                                        FIELD [4198,4211]
                                            String: "path" [4198,4204]
                                            STRING [4205,4211]
                                                String: "dist" [4205,4211]
                            OBJECT [4214,4288]
                                FIELD [4215,4232]
                                    String: "name" [4215,4221]
                                    STRING [4222,4232]
                                        String: "Clean up" [4222,4232]
                                FIELD [4233,4248]
                                    String: "if" [4233,4237]
                                    STRING [4238,4248]
                                        String: "always()" [4238,4248]
                                FIELD [4249,4287]
                                    String: "run" [4249,4254]
                                    STRING [4255,4287]
                                        String: "pip uninstall --yes allennlp\n" [4255,4287]
            FIELD [4291,4872]
                String: "test_package" [4291,4305]
                OBJECT [4306,4872]
                    FIELD [4307,4328]
                        String: "name" [4307,4313]
                        STRING [4314,4328]
                            String: "Test Package" [4314,4328]
                    FIELD [4329,4354]
                        String: "needs" [4329,4336]
                        ARRAY [4337,4354]
                            STRING [4338,4353]
                                String: "build_package" [4338,4353]
                    FIELD [4355,4380]
                        String: "runs-on" [4355,4364]
                        STRING [4365,4380]
                            String: "ubuntu-latest" [4365,4380]
                    FIELD [4381,4427]
                        String: "strategy" [4381,4391]
                        OBJECT [4392,4427]
                            FIELD [4393,4426]
                                String: "matrix" [4393,4401]
                                OBJECT [4402,4426]
                                    FIELD [4403,4425]
                                        String: "python" [4403,4411]
                                        ARRAY [4412,4425]
                                            STRING [4413,4418]
                                                String: "3.6" [4413,4418]
                                            STRING [4419,4424]
                                                String: "3.7" [4419,4424]
                    FIELD [4428,4871]
                        String: "steps" [4428,4435]
                        ARRAY [4436,4871]
                            OBJECT [4437,4542]
                                FIELD [4438,4459]
                                    String: "name" [4438,4444]
                                    STRING [4445,4459]
                                        String: "Setup Python" [4445,4459]
                                FIELD [4460,4492]
                                    String: "uses" [4460,4466]
                                    STRING [4467,4492]
                                        String: "actions/setup-python@v1" [4467,4492]
                                FIELD [4493,4541]
                                    String: "with" [4493,4499]
                                    OBJECT [4500,4541]
                                        FIELD [4501,4540]
                                            String: "python-version" [4501,4517]
                                            STRING [4518,4540]
                                                String: "${{ matrix.python }}" [4518,4540]
                            OBJECT [4543,4627]
                                FIELD [4544,4573]
                                    String: "name" [4544,4550]
                                    STRING [4551,4573]
                                        String: "Install requirements" [4551,4573]
                                FIELD [4574,4626]
                                    String: "run" [4574,4579]
                                    STRING [4580,4626]
                                        String: "pip install --upgrade pip setuptools wheel\n" [4580,4626]
                            OBJECT [4628,4743]
                                FIELD [4629,4659]
                                    String: "name" [4629,4635]
                                    STRING [4636,4659]
                                        String: "Download core package" [4636,4659]
                                FIELD [4660,4697]
                                    String: "uses" [4660,4666]
                                    STRING [4667,4697]
                                        String: "actions/download-artifact@v1" [4667,4697]
                                FIELD [4698,4742]
                                    String: "with" [4698,4704]
                                    OBJECT [4705,4742]
                                        FIELD [4706,4727]
                                            String: "name" [4706,4712]
                                            STRING [4713,4727]
                                                String: "core-package" [4713,4727]
                                        FIELD [4728,4741]
                                            String: "path" [4728,4734]
                                            STRING [4735,4741]
                                                String: "dist" [4735,4741]
                            OBJECT [4744,4814]
                                FIELD [4745,4774]
                                    String: "name" [4745,4751]
                                    STRING [4752,4774]
                                        String: "Install core package" [4752,4774]
                                FIELD [4775,4813]
                                    String: "run" [4775,4780]
                                    STRING [4781,4813]
                                        String: "pip install $(ls dist/*.whl)\n" [4781,4813]
                            OBJECT [4815,4870]
                                FIELD [4816,4837]
                                    String: "name" [4816,4822]
                                    STRING [4823,4837]
                                        String: "Test install" [4823,4837]
                                FIELD [4838,4869]
                                    String: "run" [4838,4843]
                                    STRING [4844,4869]
                                        String: "allennlp test-install\n" [4844,4869]
            FIELD [4873,6147]
                String: "docker" [4873,4881]
                OBJECT [4882,6147]
                    FIELD [4883,4898]
                        String: "name" [4883,4889]
                        STRING [4890,4898]
                            String: "Docker" [4890,4898]
                    FIELD [4899,4924]
                        String: "needs" [4899,4906]
                        ARRAY [4907,4924]
                            STRING [4908,4923]
                                String: "build_package" [4908,4923]
                    FIELD [4925,4950]
                        String: "runs-on" [4925,4934]
                        STRING [4935,4950]
                            String: "ubuntu-latest" [4935,4950]
                    FIELD [4951,6146]
                        String: "steps" [4951,4958]
                        ARRAY [4959,6146]
                            OBJECT [4960,4990]
                                FIELD [4961,4989]
                                    String: "uses" [4961,4967]
                                    STRING [4968,4989]
                                        String: "actions/checkout@v2" [4968,4989]
                            OBJECT [4991,5106]
                                FIELD [4992,5022]
                                    String: "name" [4992,4998]
                                    STRING [4999,5022]
                                        String: "Download core package" [4999,5022]
                                FIELD [5023,5060]
                                    String: "uses" [5023,5029]
                                    STRING [5030,5060]
                                        String: "actions/download-artifact@v1" [5030,5060]
                                FIELD [5061,5105]
                                    String: "with" [5061,5067]
                                    OBJECT [5068,5105]
                                        FIELD [5069,5090]
                                            String: "name" [5069,5075]
                                            STRING [5076,5090]
                                                String: "core-package" [5076,5090]
                                        FIELD [5091,5104]
                                            String: "path" [5091,5097]
                                            STRING [5098,5104]
                                                String: "dist" [5098,5104]
                            OBJECT [5107,5177]
                                FIELD [5108,5128]
                                    String: "name" [5108,5114]
                                    STRING [5115,5128]
                                        String: "Build image" [5115,5128]
                                FIELD [5129,5176]
                                    String: "run" [5129,5134]
                                    STRING [5135,5176]
                                        String: "make docker-image DOCKER_TAG=allennlp\n" [5135,5176]
                            OBJECT [5178,5247]
                                FIELD [5179,5198]
                                    String: "name" [5179,5185]
                                    STRING [5186,5198]
                                        String: "Test image" [5186,5198]
                                FIELD [5199,5246]
                                    String: "run" [5199,5204]
                                    STRING [5205,5246]
                                        String: "docker run --rm allennlp test-install\n" [5205,5246]
                            OBJECT [5248,5681]
                                FIELD [5249,5277]
                                    String: "name" [5249,5255]
                                    STRING [5256,5277]
                                        String: "Upload master image" [5256,5277]
                                FIELD [5278,5355]
                                    String: "if" [5278,5282]
                                    STRING [5283,5355]
                                        String: "github.repository == 'allenai/allennlp' && github.event_name == 'push'" [5283,5355]
                                FIELD [5356,5680]
                                    String: "run" [5356,5361]
                                    STRING [5362,5680]
                                        String: "docker login -u ${{ secrets.DOCKER_USERNAME }} -p ${{ secrets.DOCKER_PASSWORD }}\n\n# Tag with current commit and 'latest'.\ndocker tag allennlp allennlp/commit:$GITHUB_SHA\ndocker tag allennlp allennlp/commit:latest\n\n# Push both tags.\ndocker push allennlp/commit:$GITHUB_SHA\ndocker push allennlp/commit:latest\n" [5362,5680]
                            OBJECT [5682,6145]
                                FIELD [5683,5712]
                                    String: "name" [5683,5689]
                                    STRING [5690,5712]
                                        String: "Upload release image" [5690,5712]
                                FIELD [5713,5793]
                                    String: "if" [5713,5717]
                                    STRING [5718,5793]
                                        String: "github.repository == 'allenai/allennlp' && github.event_name == 'release'" [5718,5793]
                                FIELD [5794,6144]
                                    String: "run" [5794,5799]
                                    STRING [5800,6144]
                                        String: "docker login -u ${{ secrets.DOCKER_USERNAME }} -p ${{ secrets.DOCKER_PASSWORD }}\nTAG=${GITHUB_REF#refs/tags/};\n\n# Tag with release version and 'latest'.\ndocker tag allennlp allennlp/allennlp:$TAG\ndocker tag allennlp allennlp/allennlp:latest\n\n# Push both tags.\ndocker push allennlp/allennlp:$TAG\ndocker push allennlp/allennlp:latest\n" [5800,6144]
            FIELD [6148,8966]
                String: "docs" [6148,6154]
                OBJECT [6155,8966]
                    FIELD [6156,6169]
                        String: "name" [6156,6162]
                        STRING [6163,6169]
                            String: "Docs" [6163,6169]
                    FIELD [6170,6195]
                        String: "runs-on" [6170,6179]
                        STRING [6180,6195]
                            String: "ubuntu-latest" [6180,6195]
                    FIELD [6196,8965]
                        String: "steps" [6196,6203]
                        ARRAY [6204,8965]
                            OBJECT [6205,6235]
                                FIELD [6206,6234]
                                    String: "uses" [6206,6212]
                                    STRING [6213,6234]
                                        String: "actions/checkout@v1" [6213,6234]
                            OBJECT [6236,6410]
                                FIELD [6237,6265]
                                    String: "name" [6237,6243]
                                    STRING [6244,6265]
                                        String: "Setup SSH Client ðŸ”‘" [6244,6265]
                                FIELD [6266,6312]
                                    String: "if" [6266,6270]
                                    STRING [6271,6312]
                                        String: "github.repository == 'allenai/allennlp'" [6271,6312]
                                FIELD [6313,6349]
                                    String: "uses" [6313,6319]
                                    STRING [6320,6349]
                                        String: "webfactory/ssh-agent@v0.2.0" [6320,6349]
                                FIELD [6350,6409]
                                    String: "with" [6350,6356]
                                    OBJECT [6357,6409]
                                        FIELD [6358,6408]
                                            String: "ssh-private-key" [6358,6375]
                                            STRING [6376,6408]
                                                String: "${{ secrets.DOCS_DEPLOY_KEY }}" [6376,6408]
                            OBJECT [6411,6497]
                                FIELD [6412,6433]
                                    String: "name" [6412,6418]
                                    STRING [6419,6433]
                                        String: "Setup Python" [6419,6433]
                                FIELD [6434,6466]
                                    String: "uses" [6434,6440]
                                    STRING [6441,6466]
                                        String: "actions/setup-python@v1" [6441,6466]
                                FIELD [6467,6496]
                                    String: "with" [6467,6473]
                                    OBJECT [6474,6496]
                                        FIELD [6475,6495]
                                            String: "python-version" [6475,6491]
                                            NUMBER [6492,6495]
                                                Number: 3.7 [6492,6495]
                            OBJECT [6498,6697]
                                FIELD [6499,6524]
                                    String: "uses" [6499,6505]
                                    STRING [6506,6524]
                                        String: "actions/cache@v1" [6506,6524]
                                FIELD [6525,6696]
                                    String: "with" [6525,6531]
                                    OBJECT [6532,6696]
                                        FIELD [6533,6567]
                                            String: "path" [6533,6539]
                                            STRING [6540,6567]
                                                String: "${{ env.pythonLocation }}" [6540,6567]
                                        FIELD [6568,6695]
                                            String: "key" [6568,6573]
                                            STRING [6574,6695]
                                                String: "${{ runner.os }}-pydeps-${{ env.pythonLocation }}-${{ hashFiles('setup.py') }}-${{ hashFiles('dev-requirements.txt') }}" [6574,6695]
                            OBJECT [6698,6752]
                                FIELD [6699,6728]
                                    String: "name" [6699,6705]
                                    STRING [6706,6728]
                                        String: "Install requirements" [6706,6728]
                                FIELD [6729,6751]
                                    String: "run" [6729,6734]
                                    STRING [6735,6751]
                                        String: "make install\n" [6735,6751]
                            OBJECT [6753,6795]
                                FIELD [6754,6773]
                                    String: "name" [6754,6760]
                                    STRING [6761,6773]
                                        String: "Debug info" [6761,6773]
                                FIELD [6774,6794]
                                    String: "run" [6774,6779]
                                    STRING [6780,6794]
                                        String: "pip freeze\n" [6780,6794]
                            OBJECT [6796,6851]
                                FIELD [6797,6816]
                                    String: "name" [6797,6803]
                                    STRING [6804,6816]
                                        String: "Build docs" [6804,6816]
                                FIELD [6817,6850]
                                    String: "run" [6817,6822]
                                    STRING [6823,6850]
                                        String: "./scripts/build_docs.sh\n" [6823,6850]
                            OBJECT [6852,7078]
                                FIELD [6853,6875]
                                    String: "name" [6853,6859]
                                    STRING [6860,6875]
                                        String: "Configure Git" [6860,6875]
                                FIELD [6876,6922]
                                    String: "if" [6876,6880]
                                    STRING [6881,6922]
                                        String: "github.repository == 'allenai/allennlp'" [6881,6922]
                                FIELD [6923,7077]
                                    String: "run" [6923,6928]
                                    STRING [6929,7077]
                                        String: "git config --global user.email \"ai2service@allenai.org\"\ngit config --global user.name \"ai2service\"\ngit config --global push.default simple\n" [6929,7077]
                            OBJECT [7079,7292]
                                FIELD [7080,7107]
                                    String: "name" [7080,7086]
                                    STRING [7087,7107]
                                        String: "Set target folders" [7087,7107]
                                FIELD [7108,7291]
                                    String: "run" [7108,7113]
                                    STRING [7114,7291]
                                        String: "if [[ $GITHUB_EVENT_NAME == 'release' ]]; then\n    echo \"::set-env name=DOCS_FOLDER::${GITHUB_REF#refs/tags/}\"\nelse\n    echo \"::set-env name=DOCS_FOLDER::master\";\nfi\n" [7114,7291]
                            OBJECT [7293,7736]
                                FIELD [7294,7313]
                                    String: "name" [7294,7300]
                                    STRING [7301,7313]
                                        String: "Stage docs" [7301,7313]
                                FIELD [7314,7395]
                                    String: "if" [7314,7318]
                                    STRING [7319,7395]
                                        String: "github.repository == 'allenai/allennlp' && github.event_name != 'schedule'" [7319,7395]
                                FIELD [7396,7735]
                                    String: "run" [7396,7401]
                                    STRING [7402,7735]
                                        String: "echo \"Staging docs to $DOCS_FOLDER\"\n\n# Checkout allennlp-docs to /allennlp-docs\ngit clone git@github.com:allenai/allennlp-docs.git ~/allennlp-docs\n\n# Copy the generated docs to the checked out docs repo\nrm -rf ~/allennlp-docs/$DOCS_FOLDER/\nmkdir -p ~/allennlp-docs/$DOCS_FOLDER\ncp -r site/* ~/allennlp-docs/$DOCS_FOLDER\n" [7402,7735]
                            OBJECT [7737,8654]
                                FIELD [7738,7763]
                                    String: "name" [7738,7744]
                                    STRING [7745,7763]
                                        String: "Update shortcuts" [7745,7763]
                                FIELD [7764,7844]
                                    String: "if" [7764,7768]
                                    STRING [7769,7844]
                                        String: "github.repository == 'allenai/allennlp' && github.event_name == 'release'" [7769,7844]
                                FIELD [7845,8653]
                                    String: "run" [7845,7850]
                                    STRING [7851,8653]
                                        String: "# Fail immediately if any step fails.\nset -e\n\nLATEST=$(./scripts/get_version.py latest)\nSTABLE=$(./scripts/get_version.py stable)\n\ncd ~/allennlp-docs/\n\necho \"Updating latest/index.html to point to $LATEST\"\nmkdir -p latest\ncat >latest/index.html << EOL\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"Refresh\" content=\"0; url=/${LATEST}/\" />\n  </head>\n  <body>\n    <p>Please follow <a href=\"/${LATEST}/\">this link</a>.</p>\n  </body>\n</html>\nEOL\n\necho \"Updating stable/index.html to point to $STABLE\"\nmkdir -p stable\ncat >stable/index.html << EOL\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"Refresh\" content=\"0; url=/${STABLE}/\" />\n  </head>\n  <body>\n    <p>Please follow <a href=\"/${STABLE}/\">this link</a>.</p>\n  </body>\n</html>\nEOL\n" [7851,8653]
                            OBJECT [8655,8889]
                                FIELD [8656,8676]
                                    String: "name" [8656,8662]
                                    STRING [8663,8676]
                                        String: "Deploy docs" [8663,8676]
                                FIELD [8677,8758]
                                    String: "if" [8677,8681]
                                    STRING [8682,8758]
                                        String: "github.repository == 'allenai/allennlp' && github.event_name != 'schedule'" [8682,8758]
                                FIELD [8759,8888]
                                    String: "run" [8759,8764]
                                    STRING [8765,8888]
                                        String: "# And push them up to GitHub\ncd ~/allennlp-docs/\ngit add -A\ngit commit -m \"automated update of the docs\"\ngit push\n" [8765,8888]
                            OBJECT [8890,8964]
                                FIELD [8891,8908]
                                    String: "name" [8891,8897]
                                    STRING [8898,8908]
                                        String: "Clean up" [8898,8908]
                                FIELD [8909,8924]
                                    String: "if" [8909,8913]
                                    STRING [8914,8924]
                                        String: "always()" [8914,8924]
                                FIELD [8925,8963]
                                    String: "run" [8925,8930]
                                    STRING [8931,8963]
                                        String: "pip uninstall --yes allennlp\n" [8931,8963]
            FIELD [8967,9620]
                String: "publish" [8967,8976]
                OBJECT [8977,9620]
                    FIELD [8978,8991]
                        String: "name" [8978,8984]
                        STRING [8985,8991]
                            String: "PyPI" [8985,8991]
                    FIELD [8992,9076]
                        String: "needs" [8992,8999]
                        ARRAY [9000,9076]
                            STRING [9001,9013]
                                String: "check_core" [9001,9013]
                            STRING [9014,9028]
                                String: "check_models" [9014,9028]
                            STRING [9029,9044]
                                String: "build_package" [9029,9044]
                            STRING [9045,9059]
                                String: "test_package" [9045,9059]
                            STRING [9060,9068]
                                String: "docker" [9060,9068]
                            STRING [9069,9075]
                                String: "docs" [9069,9075]
                    FIELD [9077,9154]
                        String: "if" [9077,9081]
                        STRING [9082,9154]
                            String: "github.repository == 'allenai/allennlp' && github.event_name != 'push'" [9082,9154]
                    FIELD [9155,9180]
                        String: "runs-on" [9155,9164]
                        STRING [9165,9180]
                            String: "ubuntu-latest" [9165,9180]
                    FIELD [9181,9619]
                        String: "steps" [9181,9188]
                        ARRAY [9189,9619]
                            OBJECT [9190,9220]
                                FIELD [9191,9219]
                                    String: "uses" [9191,9197]
                                    STRING [9198,9219]
                                        String: "actions/checkout@v2" [9198,9219]
                            OBJECT [9221,9307]
                                FIELD [9222,9243]
                                    String: "name" [9222,9228]
                                    STRING [9229,9243]
                                        String: "Setup Python" [9229,9243]
                                FIELD [9244,9276]
                                    String: "uses" [9244,9250]
                                    STRING [9251,9276]
                                        String: "actions/setup-python@v1" [9251,9276]
                                FIELD [9277,9306]
                                    String: "with" [9277,9283]
                                    OBJECT [9284,9306]
                                        FIELD [9285,9305]
                                            String: "python-version" [9285,9301]
                                            NUMBER [9302,9305]
                                                Number: 3.7 [9302,9305]
                            OBJECT [9308,9398]
                                FIELD [9309,9338]
                                    String: "name" [9309,9315]
                                    STRING [9316,9338]
                                        String: "Install requirements" [9316,9338]
                                FIELD [9339,9397]
                                    String: "run" [9339,9344]
                                    STRING [9345,9397]
                                        String: "pip install --upgrade pip setuptools wheel twine\n" [9345,9397]
                            OBJECT [9399,9514]
                                FIELD [9400,9430]
                                    String: "name" [9400,9406]
                                    STRING [9407,9430]
                                        String: "Download core package" [9407,9430]
                                FIELD [9431,9468]
                                    String: "uses" [9431,9437]
                                    STRING [9438,9468]
                                        String: "actions/download-artifact@v1" [9438,9468]
                                FIELD [9469,9513]
                                    String: "with" [9469,9475]
                                    OBJECT [9476,9513]
                                        FIELD [9477,9498]
                                            String: "name" [9477,9483]
                                            STRING [9484,9498]
                                                String: "core-package" [9484,9498]
                                        FIELD [9499,9512]
                                            String: "path" [9499,9505]
                                            STRING [9506,9512]
                                                String: "dist" [9506,9512]
                            OBJECT [9515,9618]
                                FIELD [9516,9545]
                                    String: "name" [9516,9522]
                                    STRING [9523,9545]
                                        String: "Publish core package" [9523,9545]
                                FIELD [9546,9617]
                                    String: "run" [9546,9551]
                                    STRING [9552,9617]
                                        String: "twine upload -u allennlp -p ${{ secrets.PYPI_PASSWORD }} dist/*" [9552,9617]