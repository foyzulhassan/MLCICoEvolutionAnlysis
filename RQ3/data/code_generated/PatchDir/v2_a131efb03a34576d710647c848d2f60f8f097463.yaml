name: Test Workflows Synchronization

on:
  pull_request:
    paths:
    - '.github/workflows/**'

jobs:
  test-doc:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Tests
      run: |
        if [[ "$(diff .github/workflows/test_suite_linux.yml .github/workflows/test_suite_linux_develop.yml | grep -c -e \"^<\" -e \"^>\")" -ne "13" ]]; then echo Linux Workflows not synchronized; exit -1; fi
        if [[ "$(diff .github/workflows/test_suite_mac.yml .github/workflows/test_suite_mac_develop.yml | grep -c -e \"^<\" -e \"^>\")" -ne "10" ]]; then echo macOS Workflows not synchronized; exit -1; fi