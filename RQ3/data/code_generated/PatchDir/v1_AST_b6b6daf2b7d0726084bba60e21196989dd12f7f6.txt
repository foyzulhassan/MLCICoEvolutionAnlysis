OBJECT [0,2329]
    FIELD [1,21]
        String: "name" [1,7]
        STRING [8,21]
            String: "Doctest job" [8,21]
    FIELD [22,151]
        String: "on" [22,26]
        OBJECT [27,151]
            FIELD [28,150]
                String: "workflow_call" [28,43]
                OBJECT [44,150]
                    FIELD [45,149]
                        String: "inputs" [45,53]
                        OBJECT [54,149]
                            FIELD [55,101]
                                String: "job_splits" [55,67]
                                OBJECT [68,101]
                                    FIELD [69,84]
                                        String: "required" [69,79]
                                        TRUE [80,84]
                                    FIELD [85,100]
                                        String: "type" [85,91]
                                        STRING [92,100]
                                            String: "string" [92,100]
                            FIELD [102,148]
                                String: "split_keys" [102,114]
                                OBJECT [115,148]
                                    FIELD [116,131]
                                        String: "required" [116,126]
                                        TRUE [127,131]
                                    FIELD [132,147]
                                        String: "type" [132,138]
                                        STRING [139,147]
                                            String: "string" [139,147]
    FIELD [152,352]
        String: "env" [152,157]
        OBJECT [158,352]
            FIELD [159,181]
                String: "HF_HOME" [159,168]
                STRING [169,181]
                    String: "/mnt/cache" [169,181]
            FIELD [182,207]
                String: "TRANSFORMERS_IS_CI" [182,202]
                TRUE [203,207]
            FIELD [208,223]
                String: "RUN_SLOW" [208,218]
                TRUE [219,223]
            FIELD [224,244]
                String: "OMP_NUM_THREADS" [224,241]
                NUMBER [242,244]
                    Number: 16 [242,244]
            FIELD [245,265]
                String: "MKL_NUM_THREADS" [245,262]
                NUMBER [263,265]
                    Number: 16 [263,265]
            FIELD [266,318]
                String: "SIGOPT_API_TOKEN" [266,284]
                STRING [285,318]
                    String: "${{ secrets.SIGOPT_API_TOKEN }}" [285,318]
            FIELD [319,351]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [319,346]
                TRUE [347,351]
    FIELD [353,2328]
        String: "jobs" [353,359]
        OBJECT [360,2328]
            FIELD [361,2327]
                String: "run_doctests" [361,375]
                OBJECT [376,2327]
                    FIELD [377,387]
                        String: "name" [377,383]
                        STRING [384,387]
                            String: " " [384,387]
                    FIELD [388,479]
                        String: "strategy" [388,398]
                        OBJECT [399,479]
                            FIELD [400,417]
                                String: "fail-fast" [400,411]
                                FALSE [412,417]
                            FIELD [418,478]
                                String: "matrix" [418,426]
                                OBJECT [427,478]
                                    FIELD [428,477]
                                        String: "split_keys" [428,440]
                                        STRING [441,477]
                                            String: "${{ fromJson(inputs.split_keys) }}" [441,477]
                    FIELD [480,527]
                        String: "runs-on" [480,489]
                        ARRAY [490,527]
                            STRING [491,503]
                                String: "single-gpu" [491,503]
                            STRING [504,516]
                                String: "nvidia-gpu" [504,516]
                            STRING [517,521]
                                String: "t4" [517,521]
                            STRING [522,526]
                                String: "ci" [522,526]
                    FIELD [528,688]
                        String: "container" [528,539]
                        OBJECT [540,688]
                            FIELD [541,590]
                                String: "image" [541,548]
                                STRING [549,590]
                                    String: "huggingface/transformers-all-latest-gpu" [549,590]
                            FIELD [591,687]
                                String: "options" [591,600]
                                STRING [601,687]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [601,687]
                    FIELD [689,2326]
                        String: "steps" [689,696]
                        ARRAY [697,2326]
                            OBJECT [698,809]
                                FIELD [699,720]
                                    String: "name" [699,705]
                                    STRING [706,720]
                                        String: "Update clone" [706,720]
                                FIELD [721,756]
                                    String: "working-directory" [721,740]
                                    STRING [741,756]
                                        String: "/transformers" [741,756]
                                FIELD [757,808]
                                    String: "run" [757,762]
                                    STRING [763,808]
                                        String: "git fetch && git checkout ${{ github.sha }}" [763,808]
                            OBJECT [810,1031]
                                FIELD [811,908]
                                    String: "name" [811,817]
                                    STRING [818,908]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [818,908]
                                FIELD [909,944]
                                    String: "working-directory" [909,928]
                                    STRING [929,944]
                                        String: "/transformers" [929,944]
                                FIELD [945,1030]
                                    String: "run" [945,950]
                                    STRING [951,1030]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e .[flax]" [951,1030]
                            OBJECT [1032,1130]
                                FIELD [1033,1056]
                                    String: "name" [1033,1039]
                                    STRING [1040,1056]
                                        String: "GPU visibility" [1040,1056]
                                FIELD [1057,1092]
                                    String: "working-directory" [1057,1076]
                                    STRING [1077,1092]
                                        String: "/transformers" [1077,1092]
                                FIELD [1093,1129]
                                    String: "run" [1093,1098]
                                    STRING [1099,1129]
                                        String: "python3 utils/print_env.py\n" [1099,1129]
                            OBJECT [1131,1204]
                                FIELD [1132,1184]
                                    String: "name" [1132,1138]
                                    STRING [1139,1184]
                                        String: "Show installed libraries and their versions" [1139,1184]
                                FIELD [1185,1203]
                                    String: "run" [1185,1190]
                                    STRING [1191,1203]
                                        String: "pip freeze" [1191,1203]
                            OBJECT [1205,1385]
                                FIELD [1206,1232]
                                    String: "name" [1206,1212]
                                    STRING [1213,1232]
                                        String: "Get doctest files" [1213,1232]
                                FIELD [1233,1268]
                                    String: "working-directory" [1233,1252]
                                    STRING [1253,1268]
                                        String: "/transformers" [1253,1268]
                                FIELD [1269,1384]
                                    String: "run" [1269,1274]
                                    STRING [1275,1384]
                                        String: "echo \"${{ toJson(fromJson(inputs.job_splits)[matrix.split_keys]) }}\" > doc_tests.txt\ncat doc_tests.txt\n" [1275,1384]
                            OBJECT [1386,1613]
                                FIELD [1387,1412]
                                    String: "name" [1387,1393]
                                    STRING [1394,1412]
                                        String: "Set `split_keys`" [1394,1412]
                                FIELD [1413,1427]
                                    String: "shell" [1413,1420]
                                    STRING [1421,1427]
                                        String: "bash" [1421,1427]
                                FIELD [1428,1612]
                                    String: "run" [1428,1433]
                                    STRING [1434,1612]
                                        String: "echo \"${{ matrix.split_keys }}\"\nsplit_keys=${{ matrix.split_keys }}\nsplit_keys=${split_keys//'/'/'_'}\necho \"split_keys\"\necho \"split_keys=$split_keys\" >> $GITHUB_ENV\n" [1434,1612]
                            OBJECT [1614,1871]
                                FIELD [1615,1636]
                                    String: "name" [1615,1621]
                                    STRING [1622,1636]
                                        String: "Run doctests" [1622,1636]
                                FIELD [1637,1672]
                                    String: "working-directory" [1637,1656]
                                    STRING [1657,1672]
                                        String: "/transformers" [1657,1672]
                                FIELD [1673,1870]
                                    String: "run" [1673,1678]
                                    STRING [1679,1870]
                                        String: "cat doc_tests.txt\npython3 -m pytest -v --make-reports doc_tests_gpu_${{ env.split_keys }} --doctest-modules $(cat doc_tests.txt) -sv --doctest-continue-on-failure --doctest-glob=\"*.md\"\n" [1679,1870]
                            OBJECT [1872,2042]
                                FIELD [1873,1903]
                                    String: "name" [1873,1879]
                                    STRING [1880,1903]
                                        String: "Failure short reports" [1880,1903]
                                FIELD [1904,1927]
                                    String: "if" [1904,1908]
                                    STRING [1909,1927]
                                        String: "${{ failure() }}" [1909,1927]
                                FIELD [1928,1952]
                                    String: "continue-on-error" [1928,1947]
                                    TRUE [1948,1952]
                                FIELD [1953,2041]
                                    String: "run" [1953,1958]
                                    STRING [1959,2041]
                                        String: "cat /transformers/reports/doc_tests_gpu_${{ env.split_keys }}/failures_short.txt" [1959,2041]
                            OBJECT [2043,2325]
                                FIELD [2044,2131]
                                    String: "name" [2044,2050]
                                    STRING [2051,2131]
                                        String: "Test suite reports artifacts: doc_tests_gpu_test_reports_${{ env.split_keys }}" [2051,2131]
                                FIELD [2132,2154]
                                    String: "if" [2132,2136]
                                    STRING [2137,2154]
                                        String: "${{ always() }}" [2137,2154]
                                FIELD [2155,2190]
                                    String: "uses" [2155,2161]
                                    STRING [2162,2190]
                                        String: "actions/upload-artifact@v3" [2162,2190]
                                FIELD [2191,2324]
                                    String: "with" [2191,2197]
                                    OBJECT [2198,2324]
                                        FIELD [2199,2256]
                                            String: "name" [2199,2205]
                                            STRING [2206,2256]
                                                String: "doc_tests_gpu_test_reports_${{ env.split_keys }}" [2206,2256]
                                        FIELD [2257,2323]
                                            String: "path" [2257,2263]
                                            STRING [2264,2323]
                                                String: "/transformers/reports/doc_tests_gpu_${{ env.split_keys }}" [2264,2323]