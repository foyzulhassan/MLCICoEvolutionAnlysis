OBJECT [0,5843]
    FIELD [1,24]
        String: "name" [1,7]
        STRING [8,24]
            String: "OctoBot-Docker" [8,24]
    FIELD [25,101]
        String: "on" [25,29]
        OBJECT [30,101]
            FIELD [31,80]
                String: "push" [31,37]
                OBJECT [38,80]
                    FIELD [39,66]
                        String: "branches" [39,49]
                        ARRAY [50,66]
                            STRING [51,59]
                                String: "master" [51,59]
                            STRING [60,65]
                                String: "dev" [60,65]
                    FIELD [67,79]
                        String: "tags" [67,73]
                        ARRAY [74,79]
                            STRING [75,78]
                                String: "*" [75,78]
            FIELD [81,100]
                String: "pull_request" [81,95]
                NULL [96,100]
    FIELD [102,5842]
        String: "jobs" [102,108]
        OBJECT [109,5842]
            FIELD [110,374]
                String: "lint" [110,116]
                OBJECT [117,374]
                    FIELD [118,156]
                        String: "name" [118,124]
                        STRING [125,156]
                            String: "ubuntu-latest - Docker - lint" [125,156]
                    FIELD [157,182]
                        String: "runs-on" [157,166]
                        STRING [167,182]
                            String: "ubuntu-latest" [167,182]
                    FIELD [183,373]
                        String: "steps" [183,190]
                        ARRAY [191,373]
                            OBJECT [192,222]
                                FIELD [193,221]
                                    String: "uses" [193,199]
                                    STRING [200,221]
                                        String: "actions/checkout@v2" [200,221]
                            OBJECT [223,372]
                                FIELD [224,245]
                                    String: "name" [224,230]
                                    STRING [231,245]
                                        String: "Run hadolint" [231,245]
                                FIELD [246,283]
                                    String: "uses" [246,252]
                                    STRING [253,283]
                                        String: "reviewdog/action-hadolint@v1" [253,283]
                                FIELD [284,371]
                                    String: "with" [284,290]
                                    OBJECT [291,371]
                                        FIELD [292,336]
                                            String: "github_token" [292,306]
                                            STRING [307,336]
                                                String: "${{ secrets.github_token }}" [307,336]
                                        FIELD [337,370]
                                            String: "hadolint_ignore" [337,354]
                                            STRING [355,370]
                                                String: "DL3013 DL3008" [355,370]
            FIELD [375,5572]
                String: "build_test_push" [375,392]
                OBJECT [393,5572]
                    FIELD [394,408]
                        String: "needs" [394,401]
                        STRING [402,408]
                            String: "lint" [402,408]
                    FIELD [409,462]
                        String: "name" [409,415]
                        STRING [416,462]
                            String: "ubuntu-latest - Docker - build & test & push" [416,462]
                    FIELD [463,488]
                        String: "runs-on" [463,472]
                        STRING [473,488]
                            String: "ubuntu-latest" [473,488]
                    FIELD [489,5571]
                        String: "steps" [489,496]
                        ARRAY [497,5571]
                            OBJECT [498,528]
                                FIELD [499,527]
                                    String: "uses" [499,505]
                                    STRING [506,527]
                                        String: "actions/checkout@v2" [506,527]
                            OBJECT [529,1047]
                                FIELD [530,564]
                                    String: "name" [530,536]
                                    STRING [537,564]
                                        String: "Set Environment Variables" [537,564]
                                FIELD [565,1046]
                                    String: "run" [565,570]
                                    STRING [571,1046]
                                        String: "OWNER=\"$(echo \"${{ github.repository_owner }}\" | tr '[:upper:]' '[:lower:]' | tr -d '-')\"\nIMG=octobot\necho \"VERSION=${GITHUB_REF##*/}\" >> $GITHUB_ENV\necho \"IMAGE=${OWNER}/${IMG}\" >> $GITHUB_ENV\necho \"LATEST=latest\" >> $GITHUB_ENV\necho \"STABLE=stable\" >> $GITHUB_ENV\necho \"TEST=test\" >> $GITHUB_ENV\necho \"CONTAINER_NAME=octobot\" >> $GITHUB_ENV\necho \"CHECK_TENTACLE_CONTAINER_TIME=10\" >> $GITHUB_ENV\necho \"WAIT_CONTAINER_TIME=80\" >> $GITHUB_ENV\n" [571,1046]
                            OBJECT [1048,1408]
                                FIELD [1049,1076]
                                    String: "name" [1049,1055]
                                    STRING [1056,1076]
                                        String: "Wait for tentacles" [1056,1076]
                                FIELD [1077,1150]
                                    String: "if" [1077,1081]
                                    STRING [1082,1150]
                                        String: "github.event_name == 'push' && startsWith(github.ref, 'refs/tags')" [1082,1150]
                                FIELD [1151,1201]
                                    String: "uses" [1151,1157]
                                    STRING [1158,1201]
                                        String: "fountainhead/action-wait-for-check@v1.0.0" [1158,1201]
                                FIELD [1202,1227]
                                    String: "id" [1202,1206]
                                    STRING [1207,1227]
                                        String: "wait-for-tentacles" [1207,1227]
                                FIELD [1228,1407]
                                    String: "with" [1228,1234]
                                    OBJECT [1235,1407]
                                        FIELD [1236,1271]
                                            String: "token" [1236,1243]
                                            STRING [1244,1271]
                                                String: "${{ secrets.AUTH_TOKEN }}" [1244,1271]
                                        FIELD [1272,1331]
                                            String: "checkName" [1272,1283]
                                            STRING [1284,1331]
                                                String: "ubuntu-latest - Python 3.8 - upload tentacles" [1284,1331]
                                        FIELD [1332,1357]
                                            String: "ref" [1332,1337]
                                            STRING [1338,1357]
                                                String: "${{ github.ref }}" [1338,1357]
                                        FIELD [1358,1384]
                                            String: "repo" [1358,1364]
                                            STRING [1365,1384]
                                                String: "OctoBot-Tentacles" [1365,1384]
                                        FIELD [1385,1406]
                                            String: "timeoutSeconds" [1385,1401]
                                            NUMBER [1402,1406]
                                                Number: 3600 [1402,1406]
                            OBJECT [1409,1603]
                                FIELD [1410,1453]
                                    String: "name" [1410,1416]
                                    STRING [1417,1453]
                                        String: "Trigger fail when Tentacles failed" [1417,1453]
                                FIELD [1454,1587]
                                    String: "if" [1454,1458]
                                    STRING [1459,1587]
                                        String: "github.event_name == 'push' && startsWith(github.ref, 'refs/tags') && steps.wait-for-tentacles.outputs.conclusion == 'failure'" [1459,1587]
                                FIELD [1588,1602]
                                    String: "run" [1588,1593]
                                    STRING [1594,1602]
                                        String: "exit 1" [1594,1602]
                            OBJECT [1604,1712]
                                FIELD [1605,1625]
                                    String: "name" [1605,1611]
                                    STRING [1612,1625]
                                        String: "Set up QEMU" [1612,1625]
                                FIELD [1626,1643]
                                    String: "id" [1626,1630]
                                    STRING [1631,1643]
                                        String: "qemu-setup" [1631,1643]
                                FIELD [1644,1684]
                                    String: "uses" [1644,1650]
                                    STRING [1651,1684]
                                        String: "docker/setup-qemu-action@master" [1651,1684]
                                FIELD [1685,1711]
                                    String: "with" [1685,1691]
                                    OBJECT [1692,1711]
                                        FIELD [1693,1710]
                                            String: "platforms" [1693,1704]
                                            STRING [1705,1710]
                                                String: "all" [1705,1710]
                            OBJECT [1713,1798]
                                FIELD [1714,1748]
                                    String: "name" [1714,1720]
                                    STRING [1721,1748]
                                        String: "Print available platforms" [1721,1748]
                                FIELD [1749,1797]
                                    String: "run" [1749,1754]
                                    STRING [1755,1797]
                                        String: "echo ${{ steps.qemu.outputs.platforms }}" [1755,1797]
                            OBJECT [1799,1935]
                                FIELD [1800,1829]
                                    String: "name" [1800,1806]
                                    STRING [1807,1829]
                                        String: "Set up Docker Buildx" [1807,1829]
                                FIELD [1830,1843]
                                    String: "id" [1830,1834]
                                    STRING [1835,1843]
                                        String: "buildx" [1835,1843]
                                FIELD [1844,1886]
                                    String: "uses" [1844,1850]
                                    STRING [1851,1886]
                                        String: "docker/setup-buildx-action@master" [1851,1886]
                                FIELD [1887,1934]
                                    String: "with" [1887,1893]
                                    OBJECT [1894,1934]
                                        FIELD [1895,1922]
                                            String: "driver" [1895,1903]
                                            STRING [1904,1922]
                                                String: "docker-container" [1904,1922]
                                        FIELD [1923,1933]
                                            String: "use" [1923,1928]
                                            TRUE [1929,1933]
                            OBJECT [1936,2123]
                                FIELD [1937,1965]
                                    String: "name" [1937,1943]
                                    STRING [1944,1965]
                                        String: "Cache Docker layers" [1944,1965]
                                FIELD [1966,1991]
                                    String: "uses" [1966,1972]
                                    STRING [1973,1991]
                                        String: "actions/cache@v2" [1973,1991]
                                FIELD [1992,2122]
                                    String: "with" [1992,1998]
                                    OBJECT [1999,2122]
                                        FIELD [2000,2027]
                                            String: "path" [2000,2006]
                                            STRING [2007,2027]
                                                String: "/tmp/.buildx-cache" [2007,2027]
                                        FIELD [2028,2077]
                                            String: "key" [2028,2033]
                                            STRING [2034,2077]
                                                String: "${{ runner.os }}-buildx-${{ github.sha }}" [2034,2077]
                                        FIELD [2078,2121]
                                            String: "restore-keys" [2078,2092]
                                            STRING [2093,2121]
                                                String: "${{ runner.os }}-buildx-\n" [2093,2121]
                            OBJECT [2124,2320]
                                FIELD [2125,2152]
                                    String: "name" [2125,2131]
                                    STRING [2132,2152]
                                        String: "Login to DockerHub" [2132,2152]
                                FIELD [2153,2187]
                                    String: "if" [2153,2157]
                                    STRING [2158,2187]
                                        String: "github.event_name == 'push'" [2158,2187]
                                FIELD [2188,2219]
                                    String: "uses" [2188,2194]
                                    STRING [2195,2219]
                                        String: "docker/login-action@v1" [2195,2219]
                                FIELD [2220,2319]
                                    String: "with" [2220,2226]
                                    OBJECT [2227,2319]
                                        FIELD [2228,2274]
                                            String: "username" [2228,2238]
                                            STRING [2239,2274]
                                                String: "${{ secrets.DOCKERHUB_USERNAME }}" [2239,2274]
                                        FIELD [2275,2318]
                                            String: "password" [2275,2285]
                                            STRING [2286,2318]
                                                String: "${{ secrets.DOCKERHUB_TOKEN }}" [2286,2318]
                            OBJECT [2321,2581]
                                FIELD [2322,2355]
                                    String: "name" [2322,2328]
                                    STRING [2329,2355]
                                        String: "Wait for main build done" [2329,2355]
                                FIELD [2356,2390]
                                    String: "if" [2356,2360]
                                    STRING [2361,2390]
                                        String: "github.event_name == 'push'" [2361,2390]
                                FIELD [2391,2441]
                                    String: "uses" [2391,2397]
                                    STRING [2398,2441]
                                        String: "fountainhead/action-wait-for-check@v1.0.0" [2398,2441]
                                FIELD [2442,2468]
                                    String: "id" [2442,2446]
                                    STRING [2447,2468]
                                        String: "wait-for-main-build" [2447,2468]
                                FIELD [2469,2580]
                                    String: "with" [2469,2475]
                                    OBJECT [2476,2580]
                                        FIELD [2477,2512]
                                            String: "token" [2477,2484]
                                            STRING [2485,2512]
                                                String: "${{ secrets.AUTH_TOKEN }}" [2485,2512]
                                        FIELD [2513,2531]
                                            String: "checkName" [2513,2524]
                                            STRING [2525,2531]
                                                String: "Done" [2525,2531]
                                        FIELD [2532,2557]
                                            String: "ref" [2532,2537]
                                            STRING [2538,2557]
                                                String: "${{ github.sha }}" [2538,2557]
                                        FIELD [2558,2579]
                                            String: "timeoutSeconds" [2558,2574]
                                            NUMBER [2575,2579]
                                                Number: 3600 [2575,2579]
                            OBJECT [2582,2733]
                                FIELD [2583,2621]
                                    String: "name" [2583,2589]
                                    STRING [2590,2621]
                                        String: "Trigger fail when Main failed" [2590,2621]
                                FIELD [2622,2717]
                                    String: "if" [2622,2626]
                                    STRING [2627,2717]
                                        String: "github.event_name == 'push' && steps.wait-for-main-build.outputs.conclusion == 'failure'" [2627,2717]
                                FIELD [2718,2732]
                                    String: "run" [2718,2723]
                                    STRING [2724,2732]
                                        String: "exit 1" [2724,2732]
                            OBJECT [2734,3147]
                                FIELD [2735,2756]
                                    String: "name" [2735,2741]
                                    STRING [2742,2756]
                                        String: "Build latest" [2742,2756]
                                FIELD [2757,2791]
                                    String: "if" [2757,2761]
                                    STRING [2762,2791]
                                        String: "github.event_name != 'push'" [2762,2791]
                                FIELD [2792,2832]
                                    String: "uses" [2792,2798]
                                    STRING [2799,2832]
                                        String: "docker/build-push-action@master" [2799,2832]
                                FIELD [2833,3146]
                                    String: "with" [2833,2839]
                                    OBJECT [2840,3146]
                                        FIELD [2841,2854]
                                            String: "context" [2841,2850]
                                            STRING [2851,2854]
                                                String: "." [2851,2854]
                                        FIELD [2855,2899]
                                            String: "builder" [2855,2864]
                                            STRING [2865,2899]
                                                String: "${{ steps.buildx.outputs.name }}" [2865,2899]
                                        FIELD [2900,2938]
                                            String: "platforms" [2900,2911]
                                            STRING [2912,2938]
                                                String: "linux/amd64,linux/arm/v7" [2912,2938]
                                        FIELD [2939,2951]
                                            String: "push" [2939,2945]
                                            FALSE [2946,2951]
                                        FIELD [2952,2995]
                                            String: "tags" [2952,2958]
                                            STRING [2959,2995]
                                                String: "${{ env.IMAGE }}:${{ env.LATEST }}" [2959,2995]
                                        FIELD [2996,3048]
                                            String: "build-args" [2996,3008]
                                            STRING [3009,3048]
                                                String: "TENTACLES_URL_TAG=${{ env.LATEST }}\n" [3009,3048]
                                        FIELD [3049,3097]
                                            String: "cache-from" [3049,3061]
                                            STRING [3062,3097]
                                                String: "type=local,src=/tmp/.buildx-cache" [3062,3097]
                                        FIELD [3098,3145]
                                            String: "cache-to" [3098,3108]
                                            STRING [3109,3145]
                                                String: "type=local,dest=/tmp/.buildx-cache" [3109,3145]
                            OBJECT [3148,3365]
                                FIELD [3149,3185]
                                    String: "name" [3149,3155]
                                    STRING [3156,3185]
                                        String: "Docker build test container" [3156,3185]
                                FIELD [3186,3220]
                                    String: "if" [3186,3190]
                                    STRING [3191,3220]
                                        String: "github.event_name != 'push'" [3191,3220]
                                FIELD [3221,3364]
                                    String: "run" [3221,3226]
                                    STRING [3227,3364]
                                        String: "docker build -f ./tests/Dockerfile --build-arg OCTOBOT_IMAGE=${{ env.IMAGE }}:${{ env.LATEST }} -t ${{ env.IMAGE }}:${{ env.TEST }} .\n" [3227,3364]
                            OBJECT [3366,3571]
                                FIELD [3367,3395]
                                    String: "name" [3367,3373]
                                    STRING [3374,3395]
                                        String: "run tests in docker" [3374,3395]
                                FIELD [3396,3430]
                                    String: "if" [3396,3400]
                                    STRING [3401,3430]
                                        String: "github.event_name != 'push'" [3401,3430]
                                FIELD [3431,3570]
                                    String: "run" [3431,3436]
                                    STRING [3437,3570]
                                        String: "docker run -i -e TENTACLES_REPOSITORY=dev-tentacles -e TENTACLES_URL_TAG=${GITHUB_HEAD_REF////_} ${{ env.IMAGE }}:${{ env.TEST }}\n" [3437,3570]
                            OBJECT [3572,4484]
                                FIELD [3573,3614]
                                    String: "name" [3573,3579]
                                    STRING [3580,3614]
                                        String: "run and check health after start" [3580,3614]
                                FIELD [3615,3649]
                                    String: "if" [3615,3619]
                                    STRING [3620,3649]
                                        String: "github.event_name != 'push'" [3620,3649]
                                FIELD [3650,4483]
                                    String: "run" [3650,3655]
                                    STRING [3656,4483]
                                        String: "echo Start OctoBot docker with branche_name tentacles package\ndocker run -id -e TENTACLES_PACKAGES_SOURCE=dev -e TENTACLES_URL_TAG=${GITHUB_HEAD_REF////_} --name ${{ env.CONTAINER_NAME }} ${{ env.IMAGE }}:${{ env.LATEST }}\nsleep ${{ env.CHECK_TENTACLE_CONTAINER_TIME }}\nif docker logs ${{ env.CONTAINER_NAME }} | grep \"octobot_tentacles_manager.api.util.tentacles_management Can't find tentacle archive at:\" ; then\n    docker rm -f ${{ env.CONTAINER_NAME }}\n    echo Restarting docker with latest tentacle package...\n    docker run -id -e TENTACLES_URL_TAG=${{ env.LATEST }} --name ${{ env.CONTAINER_NAME }} ${{ env.IMAGE }}:${{ env.LATEST }}\nfi\nsleep ${{ env.WAIT_CONTAINER_TIME }}\ndocker logs ${{ env.CONTAINER_NAME }}\ndocker inspect ${{ env.CONTAINER_NAME }} | jq '.[].State.Health.Status' | grep \"healthy\"\n" [3656,4483]
                            OBJECT [4485,4979]
                                FIELD [4486,4516]
                                    String: "name" [4486,4492]
                                    STRING [4493,4516]
                                        String: "Build and push latest" [4493,4516]
                                FIELD [4517,4625]
                                    String: "if" [4517,4521]
                                    STRING [4522,4625]
                                        String: "github.event_name == 'push' && !startsWith(github.ref, 'refs/tags') && github.ref == 'refs/heads/dev'" [4522,4625]
                                FIELD [4626,4666]
                                    String: "uses" [4626,4632]
                                    STRING [4633,4666]
                                        String: "docker/build-push-action@master" [4633,4666]
                                FIELD [4667,4978]
                                    String: "with" [4667,4673]
                                    OBJECT [4674,4978]
                                        FIELD [4675,4688]
                                            String: "context" [4675,4684]
                                            STRING [4685,4688]
                                                String: "." [4685,4688]
                                        FIELD [4689,4733]
                                            String: "builder" [4689,4698]
                                            STRING [4699,4733]
                                                String: "${{ steps.buildx.outputs.name }}" [4699,4733]
                                        FIELD [4734,4771]
                                            String: "platforms" [4734,4745]
                                            STRING [4746,4771]
                                                String: "linux/amd64,linux/arm64" [4746,4771]
                                        FIELD [4772,4783]
                                            String: "push" [4772,4778]
                                            TRUE [4779,4783]
                                        FIELD [4784,4827]
                                            String: "tags" [4784,4790]
                                            STRING [4791,4827]
                                                String: "${{ env.IMAGE }}:${{ env.LATEST }}" [4791,4827]
                                        FIELD [4828,4880]
                                            String: "build-args" [4828,4840]
                                            STRING [4841,4880]
                                                String: "TENTACLES_URL_TAG=${{ env.LATEST }}\n" [4841,4880]
                                        FIELD [4881,4929]
                                            String: "cache-from" [4881,4893]
                                            STRING [4894,4929]
                                                String: "type=local,src=/tmp/.buildx-cache" [4894,4929]
                                        FIELD [4930,4977]
                                            String: "cache-to" [4930,4940]
                                            STRING [4941,4977]
                                                String: "type=local,dest=/tmp/.buildx-cache" [4941,4977]
                            OBJECT [4980,5483]
                                FIELD [4981,5011]
                                    String: "name" [4981,4987]
                                    STRING [4988,5011]
                                        String: "Build and push on tag" [4988,5011]
                                FIELD [5012,5085]
                                    String: "if" [5012,5016]
                                    STRING [5017,5085]
                                        String: "github.event_name == 'push' && startsWith(github.ref, 'refs/tags')" [5017,5085]
                                FIELD [5086,5126]
                                    String: "uses" [5086,5092]
                                    STRING [5093,5126]
                                        String: "docker/build-push-action@master" [5093,5126]
                                FIELD [5127,5482]
                                    String: "with" [5127,5133]
                                    OBJECT [5134,5482]
                                        FIELD [5135,5148]
                                            String: "context" [5135,5144]
                                            STRING [5145,5148]
                                                String: "." [5145,5148]
                                        FIELD [5149,5170]
                                            String: "file" [5149,5155]
                                            STRING [5156,5170]
                                                String: "./Dockerfile" [5156,5170]
                                        FIELD [5171,5215]
                                            String: "builder" [5171,5180]
                                            STRING [5181,5215]
                                                String: "${{ steps.buildx.outputs.name }}" [5181,5215]
                                        FIELD [5216,5253]
                                            String: "platforms" [5216,5227]
                                            STRING [5228,5253]
                                                String: "linux/amd64,linux/arm64" [5228,5253]
                                        FIELD [5254,5265]
                                            String: "push" [5254,5260]
                                            TRUE [5261,5265]
                                        FIELD [5266,5384]
                                            String: "tags" [5266,5272]
                                            STRING [5273,5384]
                                                String: "${{ env.IMAGE }}:${{ env.LATEST }}\n${{ env.IMAGE }}:${{ env.STABLE }}\n${{ env.IMAGE }}:${{ env.VERSION }}\n" [5273,5384]
                                        FIELD [5385,5433]
                                            String: "cache-from" [5385,5397]
                                            STRING [5398,5433]
                                                String: "type=local,src=/tmp/.buildx-cache" [5398,5433]
                                        FIELD [5434,5481]
                                            String: "cache-to" [5434,5444]
                                            STRING [5445,5481]
                                                String: "type=local,dest=/tmp/.buildx-cache" [5445,5481]
                            OBJECT [5484,5570]
                                FIELD [5485,5506]
                                    String: "name" [5485,5491]
                                    STRING [5492,5506]
                                        String: "Image digest" [5492,5506]
                                FIELD [5507,5569]
                                    String: "run" [5507,5512]
                                    STRING [5513,5569]
                                        String: "echo ${{ steps.docker_build_and_psuh.outputs.digest }}" [5513,5569]
            FIELD [5573,5841]
                String: "notify" [5573,5581]
                OBJECT [5582,5841]
                    FIELD [5583,5598]
                        String: "name" [5583,5589]
                        STRING [5590,5598]
                            String: "Notify" [5590,5598]
                    FIELD [5599,5624]
                        String: "runs-on" [5599,5608]
                        STRING [5609,5624]
                            String: "ubuntu-latest" [5609,5624]
                    FIELD [5625,5659]
                        String: "needs" [5625,5632]
                        ARRAY [5633,5659]
                            STRING [5634,5640]
                                String: "lint" [5634,5640]
                            STRING [5641,5658]
                                String: "build_test_push" [5641,5658]
                    FIELD [5660,5683]
                        String: "if" [5660,5664]
                        STRING [5665,5683]
                            String: "${{ failure() }}" [5665,5683]
                    FIELD [5684,5840]
                        String: "steps" [5684,5691]
                        ARRAY [5692,5840]
                            OBJECT [5693,5839]
                                FIELD [5694,5717]
                                    String: "name" [5694,5700]
                                    STRING [5701,5717]
                                        String: "Notify discord" [5701,5717]
                                FIELD [5718,5760]
                                    String: "uses" [5718,5724]
                                    STRING [5725,5760]
                                        String: "sarisia/actions-status-discord@v1" [5725,5760]
                                FIELD [5761,5838]
                                    String: "with" [5761,5767]
                                    OBJECT [5768,5838]
                                        FIELD [5769,5787]
                                            String: "status" [5769,5777]
                                            STRING [5778,5787]
                                                String: "Failure" [5778,5787]
                                        FIELD [5788,5837]
                                            String: "webhook" [5788,5797]
                                            STRING [5798,5837]
                                                String: "${{ secrets.DISCORD_GITHUB_WEBHOOK }}" [5798,5837]