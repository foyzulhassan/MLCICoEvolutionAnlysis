OBJECT [0,16510]
    FIELD [1,12]
        String: "name" [1,7]
        STRING [8,12]
            String: "CI" [8,12]
    FIELD [13,105]
        String: "concurrency" [13,26]
        OBJECT [27,105]
            FIELD [28,78]
                String: "group" [28,35]
                STRING [36,78]
                    String: "${{ github.workflow }}-${{ github.ref }}" [36,78]
            FIELD [79,104]
                String: "cancel-in-progress" [79,99]
                TRUE [100,104]
    FIELD [106,256]
        String: "on" [106,110]
        OBJECT [111,256]
            FIELD [112,148]
                String: "pull_request" [112,126]
                OBJECT [127,148]
                    FIELD [128,147]
                        String: "branches" [128,138]
                        ARRAY [139,147]
                            STRING [140,146]
                                String: "main" [140,146]
            FIELD [149,177]
                String: "push" [149,155]
                OBJECT [156,177]
                    FIELD [157,176]
                        String: "branches" [157,167]
                        ARRAY [168,176]
                            STRING [169,175]
                                String: "main" [169,175]
            FIELD [178,211]
                String: "release" [178,187]
                OBJECT [188,211]
                    FIELD [189,210]
                        String: "types" [189,196]
                        ARRAY [197,210]
                            STRING [198,209]
                                String: "published" [198,209]
            FIELD [212,255]
                String: "schedule" [212,222]
                ARRAY [223,255]
                    OBJECT [224,254]
                        FIELD [225,253]
                            String: "cron" [225,231]
                            STRING [232,253]
                                String: "37 11 * * 1,2,3,4,5" [232,253]
    FIELD [257,605]
        String: "env" [257,262]
        OBJECT [263,605]
            FIELD [264,288]
                String: "TORCH_VERSION" [264,279]
                STRING [280,288]
                    String: "1.11.0" [280,288]
            FIELD [289,351]
                String: "TORCH_CPU_INSTALL" [289,308]
                STRING [309,351]
                    String: "pip install torch torchvision torchaudio" [309,351]
            FIELD [352,471]
                String: "TORCH_GPU_INSTALL" [352,371]
                STRING [372,471]
                    String: "pip install torch torchvision torchaudio --extra-index-url https://download.pytorch.org/whl/cu113" [372,471]
            FIELD [472,492]
                String: "CACHE_PREFIX" [472,486]
                STRING [487,492]
                    String: "v11" [487,492]
            FIELD [493,525]
                String: "TOKENIZERS_PARALLELISM" [493,517]
                STRING [518,525]
                    String: "false" [518,525]
            FIELD [526,547]
                String: "OMP_NUM_THREADS" [526,543]
                STRING [544,547]
                    String: "1" [544,547]
            FIELD [548,575]
                String: "MKL_THREADING_LAYER" [548,569]
                STRING [570,575]
                    String: "GNU" [570,575]
            FIELD [576,604]
                String: "DEFAULT_PYTHON_VERSION" [576,600]
                NUMBER [601,604]
                    Number: 3.8 [601,604]
    FIELD [606,648]
        String: "defaults" [606,616]
        OBJECT [617,648]
            FIELD [618,647]
                String: "run" [618,623]
                OBJECT [624,647]
                    FIELD [625,646]
                        String: "shell" [625,632]
                        STRING [633,646]
                            String: "bash -l {0}" [633,646]
    FIELD [649,16509]
        String: "jobs" [649,655]
        OBJECT [656,16509]
            FIELD [657,1401]
                String: "changelog" [657,668]
                OBJECT [669,1401]
                    FIELD [670,688]
                        String: "name" [670,676]
                        STRING [677,688]
                            String: "CHANGELOG" [677,688]
                    FIELD [689,714]
                        String: "runs-on" [689,698]
                        STRING [699,714]
                            String: "ubuntu-latest" [699,714]
                    FIELD [715,757]
                        String: "if" [715,719]
                        STRING [720,757]
                            String: "github.event_name == 'pull_request'" [720,757]
                    FIELD [758,1400]
                        String: "steps" [758,765]
                        ARRAY [766,1400]
                            OBJECT [767,797]
                                FIELD [768,796]
                                    String: "uses" [768,774]
                                    STRING [775,796]
                                        String: "actions/checkout@v1" [775,796]
                            OBJECT [798,1044]
                                FIELD [799,842]
                                    String: "name" [799,805]
                                    STRING [806,842]
                                        String: "Check if source files have changed" [806,842]
                                FIELD [843,1043]
                                    String: "run" [843,848]
                                    STRING [849,1043]
                                        String: "git diff --name-only $(git merge-base origin/main HEAD) | grep '^allennlp/.*\\.py$' && echo \"source_files_changed=true\" >> $GITHUB_ENV || echo \"source_files_changed=false\" >> $GITHUB_ENV\n" [849,1043]
                            OBJECT [1045,1399]
                                FIELD [1046,1092]
                                    String: "name" [1046,1052]
                                    STRING [1053,1092]
                                        String: "Check that CHANGELOG has been updated" [1053,1092]
                                FIELD [1093,1134]
                                    String: "if" [1093,1097]
                                    STRING [1098,1134]
                                        String: "env.source_files_changed == 'true'" [1098,1134]
                                FIELD [1135,1398]
                                    String: "run" [1135,1140]
                                    STRING [1141,1398]
                                        String: "# If this step fails, this means you haven't updated the CHANGELOG.md\n# file with notes on your contribution.\ngit diff --name-only $(git merge-base origin/main HEAD) | grep '^CHANGELOG.md$' && echo \"Thanks for helping keep our CHANGELOG up-to-date!\"\n" [1141,1398]
            FIELD [1402,1802]
                String: "style" [1402,1409]
                OBJECT [1410,1802]
                    FIELD [1411,1425]
                        String: "name" [1411,1417]
                        STRING [1418,1425]
                            String: "Style" [1418,1425]
                    FIELD [1426,1451]
                        String: "runs-on" [1426,1435]
                        STRING [1436,1451]
                            String: "ubuntu-latest" [1436,1451]
                    FIELD [1452,1801]
                        String: "steps" [1452,1459]
                        ARRAY [1460,1801]
                            OBJECT [1461,1491]
                                FIELD [1462,1490]
                                    String: "uses" [1462,1468]
                                    STRING [1469,1490]
                                        String: "actions/checkout@v2" [1469,1490]
                            OBJECT [1492,1610]
                                FIELD [1493,1514]
                                    String: "name" [1493,1499]
                                    STRING [1500,1514]
                                        String: "Setup Python" [1500,1514]
                                FIELD [1515,1547]
                                    String: "uses" [1515,1521]
                                    STRING [1522,1547]
                                        String: "actions/setup-python@v2" [1522,1547]
                                FIELD [1548,1609]
                                    String: "with" [1548,1554]
                                    OBJECT [1555,1609]
                                        FIELD [1556,1608]
                                            String: "python-version" [1556,1572]
                                            STRING [1573,1608]
                                                String: "${{ env.DEFAULT_PYTHON_VERSION }}" [1573,1608]
                            OBJECT [1611,1710]
                                FIELD [1612,1641]
                                    String: "name" [1612,1618]
                                    STRING [1619,1641]
                                        String: "Install requirements" [1619,1641]
                                FIELD [1642,1709]
                                    String: "run" [1642,1647]
                                    STRING [1648,1709]
                                        String: "grep -E '^black' dev-requirements.txt | xargs pip install\n" [1648,1709]
                            OBJECT [1711,1753]
                                FIELD [1712,1731]
                                    String: "name" [1712,1718]
                                    STRING [1719,1731]
                                        String: "Debug info" [1719,1731]
                                FIELD [1732,1752]
                                    String: "run" [1732,1737]
                                    STRING [1738,1752]
                                        String: "pip freeze\n" [1738,1752]
                            OBJECT [1754,1800]
                                FIELD [1755,1773]
                                    String: "name" [1755,1761]
                                    STRING [1762,1773]
                                        String: "Run black" [1762,1773]
                                FIELD [1774,1799]
                                    String: "run" [1774,1779]
                                    STRING [1780,1799]
                                        String: "black --check .\n" [1780,1799]
            FIELD [1803,5130]
                String: "checks" [1803,1811]
                OBJECT [1812,5130]
                    FIELD [1813,1845]
                        String: "name" [1813,1819]
                        STRING [1820,1845]
                            String: "${{ matrix.task.name }}" [1820,1845]
                    FIELD [1846,1884]
                        String: "runs-on" [1846,1855]
                        STRING [1856,1884]
                            String: "${{ matrix.task.runs_on }}" [1856,1884]
                    FIELD [1885,1905]
                        String: "timeout-minutes" [1885,1902]
                        NUMBER [1903,1905]
                            Number: 30 [1903,1905]
                    FIELD [1906,2506]
                        String: "strategy" [1906,1916]
                        OBJECT [1917,2506]
                            FIELD [1918,1935]
                                String: "fail-fast" [1918,1929]
                                FALSE [1930,1935]
                            FIELD [1936,2505]
                                String: "matrix" [1936,1944]
                                OBJECT [1945,2505]
                                    FIELD [1946,2504]
                                        String: "task" [1946,1952]
                                        ARRAY [1953,2504]
                                            OBJECT [1954,2080]
                                                FIELD [1955,1968]
                                                    String: "name" [1955,1961]
                                                    STRING [1962,1968]
                                                        String: "Lint" [1962,1968]
                                                FIELD [1969,1994]
                                                    String: "runs_on" [1969,1978]
                                                    STRING [1979,1994]
                                                        String: "ubuntu-latest" [1979,1994]
                                                FIELD [1995,2018]
                                                    String: "coverage_report" [1995,2012]
                                                    FALSE [2013,2018]
                                                FIELD [2019,2041]
                                                    String: "torch_platform" [2019,2035]
                                                    STRING [2036,2041]
                                                        String: "cpu" [2036,2041]
                                                FIELD [2042,2079]
                                                    String: "run" [2042,2047]
                                                    STRING [2048,2079]
                                                        String: "make flake8\nmake typecheck\n" [2048,2079]
                                            OBJECT [2081,2191]
                                                FIELD [2082,2100]
                                                    String: "name" [2082,2088]
                                                    STRING [2089,2100]
                                                        String: "CPU Tests" [2089,2100]
                                                FIELD [2101,2126]
                                                    String: "runs_on" [2101,2110]
                                                    STRING [2111,2126]
                                                        String: "ubuntu-latest" [2111,2126]
                                                FIELD [2127,2149]
                                                    String: "coverage_report" [2127,2144]
                                                    TRUE [2145,2149]
                                                FIELD [2150,2172]
                                                    String: "torch_platform" [2150,2166]
                                                    STRING [2167,2172]
                                                        String: "cpu" [2167,2172]
                                                FIELD [2173,2190]
                                                    String: "run" [2173,2178]
                                                    STRING [2179,2190]
                                                        String: "make test" [2179,2190]
                                            OBJECT [2192,2325]
                                                FIELD [2193,2211]
                                                    String: "name" [2193,2199]
                                                    STRING [2200,2211]
                                                        String: "GPU Tests" [2200,2211]
                                                FIELD [2212,2255]
                                                    String: "runs_on" [2212,2221]
                                                    ARRAY [2222,2255]
                                                        STRING [2223,2236]
                                                            String: "self-hosted" [2223,2236]
                                                        STRING [2237,2242]
                                                            String: "GPU" [2237,2242]
                                                        STRING [2243,2254]
                                                            String: "Multi GPU" [2243,2254]
                                                FIELD [2256,2278]
                                                    String: "coverage_report" [2256,2273]
                                                    TRUE [2274,2278]
                                                FIELD [2279,2301]
                                                    String: "torch_platform" [2279,2295]
                                                    STRING [2296,2301]
                                                        String: "gpu" [2296,2301]
                                                FIELD [2302,2324]
                                                    String: "run" [2302,2307]
                                                    STRING [2308,2324]
                                                        String: "make gpu-tests" [2308,2324]
                                            OBJECT [2326,2503]
                                                FIELD [2327,2347]
                                                    String: "name" [2327,2333]
                                                    STRING [2334,2347]
                                                        String: "Model Tests" [2334,2347]
                                                FIELD [2348,2373]
                                                    String: "runs_on" [2348,2357]
                                                    STRING [2358,2373]
                                                        String: "ubuntu-latest" [2358,2373]
                                                FIELD [2374,2396]
                                                    String: "coverage_report" [2374,2391]
                                                    TRUE [2392,2396]
                                                FIELD [2397,2419]
                                                    String: "torch_platform" [2397,2413]
                                                    STRING [2414,2419]
                                                        String: "cpu" [2414,2419]
                                                FIELD [2420,2502]
                                                    String: "run" [2420,2425]
                                                    STRING [2426,2502]
                                                        String: "cd allennlp-models\nmake test-with-cov COV=allennlp\nmv coverage.xml ../\n" [2426,2502]
                    FIELD [2507,5129]
                        String: "steps" [2507,2514]
                        ARRAY [2515,5129]
                            OBJECT [2516,2546]
                                FIELD [2517,2545]
                                    String: "uses" [2517,2523]
                                    STRING [2524,2545]
                                        String: "actions/checkout@v2" [2524,2545]
                            OBJECT [2547,2683]
                                FIELD [2548,2591]
                                    String: "uses" [2548,2554]
                                    STRING [2555,2591]
                                        String: "conda-incubator/setup-miniconda@v2" [2555,2591]
                                FIELD [2592,2682]
                                    String: "with" [2592,2598]
                                    OBJECT [2599,2682]
                                        FIELD [2600,2628]
                                            String: "miniconda-version" [2600,2619]
                                            STRING [2620,2628]
                                                String: "latest" [2620,2628]
                                        FIELD [2629,2681]
                                            String: "python-version" [2629,2645]
                                            STRING [2646,2681]
                                                String: "${{ env.DEFAULT_PYTHON_VERSION }}" [2646,2681]
                            OBJECT [2684,3006]
                                FIELD [2685,2713]
                                    String: "name" [2685,2691]
                                    STRING [2692,2713]
                                        String: "Set build variables" [2692,2713]
                                FIELD [2714,3005]
                                    String: "run" [2714,2719]
                                    STRING [2720,3005]
                                        String: "# Get the exact Python version to use in the cache key.\necho \"PYTHON_VERSION=$(python --version)\" >> $GITHUB_ENV\necho \"RUNNER_ARCH=$(uname -m)\" >> $GITHUB_ENV\n# Use week number in cache key so we can refresh the cache weekly.\necho \"WEEK_NUMBER=$(date +%V)\" >> $GITHUB_ENV\n" [2720,3005]
                            OBJECT [3007,3158]
                                FIELD [3008,3047]
                                    String: "name" [3008,3014]
                                    STRING [3015,3047]
                                        String: "Set build variables (CPU only)" [3015,3047]
                                FIELD [3048,3090]
                                    String: "if" [3048,3052]
                                    STRING [3053,3090]
                                        String: "matrix.task.torch_platform == 'cpu'" [3053,3090]
                                FIELD [3091,3157]
                                    String: "run" [3091,3096]
                                    STRING [3097,3157]
                                        String: "echo \"TORCH_INSTALL=$TORCH_CPU_INSTALL\" >> $GITHUB_ENV\n" [3097,3157]
                            OBJECT [3159,3310]
                                FIELD [3160,3199]
                                    String: "name" [3160,3166]
                                    STRING [3167,3199]
                                        String: "Set build variables (GPU only)" [3167,3199]
                                FIELD [3200,3242]
                                    String: "if" [3200,3204]
                                    STRING [3205,3242]
                                        String: "matrix.task.torch_platform == 'gpu'" [3205,3242]
                                FIELD [3243,3309]
                                    String: "run" [3243,3248]
                                    STRING [3249,3309]
                                        String: "echo \"TORCH_INSTALL=$TORCH_GPU_INSTALL\" >> $GITHUB_ENV\n" [3249,3309]
                            OBJECT [3311,3608]
                                FIELD [3312,3337]
                                    String: "uses" [3312,3318]
                                    STRING [3319,3337]
                                        String: "actions/cache@v2" [3319,3337]
                                FIELD [3338,3361]
                                    String: "id" [3338,3342]
                                    STRING [3343,3361]
                                        String: "virtualenv-cache" [3343,3361]
                                FIELD [3362,3607]
                                    String: "with" [3362,3368]
                                    OBJECT [3369,3607]
                                        FIELD [3370,3384]
                                            String: "path" [3370,3376]
                                            STRING [3377,3384]
                                                String: ".venv" [3377,3384]
                                        FIELD [3385,3606]
                                            String: "key" [3385,3390]
                                            STRING [3391,3606]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-${{ matrix.task.torch_platform }}-${{ hashFiles('setup.py') }}-${{ hashFiles('*requirements.txt') }}" [3391,3606]
                            OBJECT [3609,3856]
                                FIELD [3610,3659]
                                    String: "name" [3610,3616]
                                    STRING [3617,3659]
                                        String: "Setup virtual environment (no cache hit)" [3617,3659]
                                FIELD [3660,3717]
                                    String: "if" [3660,3664]
                                    STRING [3665,3717]
                                        String: "steps.virtualenv-cache.outputs.cache-hit != 'true'" [3665,3717]
                                FIELD [3718,3855]
                                    String: "run" [3718,3723]
                                    STRING [3724,3855]
                                        String: "python${{ env.DEFAULT_PYTHON_VERSION }} -m venv .venv\nsource .venv/bin/activate\nmake install TORCH_INSTALL=\"$TORCH_INSTALL\"\n" [3724,3855]
                            OBJECT [3857,4054]
                                FIELD [3858,3904]
                                    String: "name" [3858,3864]
                                    STRING [3865,3904]
                                        String: "Setup virtual environment (cache hit)" [3865,3904]
                                FIELD [3905,3962]
                                    String: "if" [3905,3909]
                                    STRING [3910,3962]
                                        String: "steps.virtualenv-cache.outputs.cache-hit == 'true'" [3910,3962]
                                FIELD [3963,4053]
                                    String: "run" [3963,3968]
                                    STRING [3969,4053]
                                        String: "source .venv/bin/activate\npip install --no-deps -e .[all]\nmake download-extras\n" [3969,4053]
                            OBJECT [4055,4315]
                                FIELD [4056,4093]
                                    String: "name" [4056,4062]
                                    STRING [4063,4093]
                                        String: "Pull and install models repo" [4063,4093]
                                FIELD [4094,4134]
                                    String: "if" [4094,4098]
                                    STRING [4099,4134]
                                        String: "matrix.task.name == 'Model Tests'" [4099,4134]
                                FIELD [4135,4173]
                                    String: "env" [4135,4140]
                                    OBJECT [4141,4173]
                                        FIELD [4142,4172]
                                            String: "ALLENNLP_VERSION_OVERRIDE" [4142,4169]
                                            STRING [4170,4172]
                                                String: "" [4170,4172]
                                FIELD [4174,4314]
                                    String: "run" [4174,4179]
                                    STRING [4180,4314]
                                        String: "source .venv/bin/activate\ngit clone https://github.com/allenai/allennlp-models.git\ncd allennlp-models\npip install -e .[dev,all]\n" [4180,4314]
                            OBJECT [4316,4385]
                                FIELD [4317,4336]
                                    String: "name" [4317,4323]
                                    STRING [4324,4336]
                                        String: "Debug info" [4324,4336]
                                FIELD [4337,4384]
                                    String: "run" [4337,4342]
                                    STRING [4343,4384]
                                        String: "source .venv/bin/activate\npip freeze\n" [4343,4384]
                            OBJECT [4386,4495]
                                FIELD [4387,4419]
                                    String: "name" [4387,4393]
                                    STRING [4394,4419]
                                        String: "Ensure torch up-to-date" [4394,4419]
                                FIELD [4420,4494]
                                    String: "run" [4420,4425]
                                    STRING [4426,4494]
                                        String: "source .venv/bin/activate\npython scripts/check_torch_version.py\n" [4426,4494]
                            OBJECT [4496,4590]
                                FIELD [4497,4529]
                                    String: "name" [4497,4503]
                                    STRING [4504,4529]
                                        String: "${{ matrix.task.name }}" [4504,4529]
                                FIELD [4530,4589]
                                    String: "run" [4530,4535]
                                    STRING [4536,4589]
                                        String: "source .venv/bin/activate\n${{ matrix.task.run }}\n" [4536,4589]
                            OBJECT [4591,4712]
                                FIELD [4592,4624]
                                    String: "name" [4592,4598]
                                    STRING [4599,4624]
                                        String: "Prepare coverage report" [4599,4624]
                                FIELD [4625,4659]
                                    String: "if" [4625,4629]
                                    STRING [4630,4659]
                                        String: "matrix.task.coverage_report" [4630,4659]
                                FIELD [4660,4711]
                                    String: "run" [4660,4665]
                                    STRING [4666,4711]
                                        String: "mkdir coverage\nmv coverage.xml coverage/\n" [4666,4711]
                            OBJECT [4713,4886]
                                FIELD [4714,4743]
                                    String: "name" [4714,4720]
                                    STRING [4721,4743]
                                        String: "Save coverage report" [4721,4743]
                                FIELD [4744,4778]
                                    String: "if" [4744,4748]
                                    STRING [4749,4778]
                                        String: "matrix.task.coverage_report" [4749,4778]
                                FIELD [4779,4814]
                                    String: "uses" [4779,4785]
                                    STRING [4786,4814]
                                        String: "actions/upload-artifact@v1" [4786,4814]
                                FIELD [4815,4885]
                                    String: "with" [4815,4821]
                                    OBJECT [4822,4885]
                                        FIELD [4823,4864]
                                            String: "name" [4823,4829]
                                            STRING [4830,4864]
                                                String: "${{ matrix.task.name }}-coverage" [4830,4864]
                                        FIELD [4865,4884]
                                            String: "path" [4865,4871]
                                            STRING [4872,4884]
                                                String: "./coverage" [4872,4884]
                            OBJECT [4887,5128]
                                FIELD [4888,4905]
                                    String: "name" [4888,4894]
                                    STRING [4895,4905]
                                        String: "Clean up" [4895,4905]
                                FIELD [4906,4921]
                                    String: "if" [4906,4910]
                                    STRING [4911,4921]
                                        String: "always()" [4911,4921]
                                FIELD [4922,5127]
                                    String: "run" [4922,4927]
                                    STRING [4928,5127]
                                        String: "# Could run into issues with the cache if we don't uninstall the editable.\n# See https://github.com/pypa/pip/issues/4537.\nsource .venv/bin/activate\npip uninstall --yes allennlp allennlp-models\n" [4928,5127]
            FIELD [5131,6090]
                String: "upload_coverage" [5131,5148]
                OBJECT [5149,6090]
                    FIELD [5150,5181]
                        String: "name" [5150,5156]
                        STRING [5157,5181]
                            String: "Upload Coverage Report" [5157,5181]
                    FIELD [5182,5201]
                        String: "timeout-minutes" [5182,5199]
                        NUMBER [5200,5201]
                            Number: 5 [5200,5201]
                    FIELD [5202,5320]
                        String: "if" [5202,5206]
                        STRING [5207,5320]
                            String: "github.repository == 'allenai/allennlp' && (github.event_name == 'push' || github.event_name == 'pull_request')" [5207,5320]
                    FIELD [5321,5346]
                        String: "runs-on" [5321,5330]
                        STRING [5331,5346]
                            String: "ubuntu-latest" [5331,5346]
                    FIELD [5347,5365]
                        String: "needs" [5347,5354]
                        ARRAY [5355,5365]
                            STRING [5356,5364]
                                String: "checks" [5356,5364]
                    FIELD [5366,6089]
                        String: "steps" [5366,5373]
                        ARRAY [5374,6089]
                            OBJECT [5375,5405]
                                FIELD [5376,5404]
                                    String: "uses" [5376,5382]
                                    STRING [5383,5404]
                                        String: "actions/checkout@v2" [5383,5404]
                            OBJECT [5406,5559]
                                FIELD [5407,5455]
                                    String: "name" [5407,5413]
                                    STRING [5414,5455]
                                        String: "Download coverage report from CPU tests" [5414,5455]
                                FIELD [5456,5493]
                                    String: "uses" [5456,5462]
                                    STRING [5463,5493]
                                        String: "actions/download-artifact@v3" [5463,5493]
                                FIELD [5494,5558]
                                    String: "with" [5494,5500]
                                    OBJECT [5501,5558]
                                        FIELD [5502,5529]
                                            String: "name" [5502,5508]
                                            STRING [5509,5529]
                                                String: "CPU Tests-coverage" [5509,5529]
                                        FIELD [5530,5557]
                                            String: "path" [5530,5536]
                                            STRING [5537,5557]
                                                String: "coverage/cpu_tests" [5537,5557]
                            OBJECT [5560,5713]
                                FIELD [5561,5609]
                                    String: "name" [5561,5567]
                                    STRING [5568,5609]
                                        String: "Download coverage report from GPU Tests" [5568,5609]
                                FIELD [5610,5647]
                                    String: "uses" [5610,5616]
                                    STRING [5617,5647]
                                        String: "actions/download-artifact@v3" [5617,5647]
                                FIELD [5648,5712]
                                    String: "with" [5648,5654]
                                    OBJECT [5655,5712]
                                        FIELD [5656,5683]
                                            String: "name" [5656,5662]
                                            STRING [5663,5683]
                                                String: "GPU Tests-coverage" [5663,5683]
                                        FIELD [5684,5711]
                                            String: "path" [5684,5690]
                                            STRING [5691,5711]
                                                String: "coverage/gpu_tests" [5691,5711]
                            OBJECT [5714,5873]
                                FIELD [5715,5765]
                                    String: "name" [5715,5721]
                                    STRING [5722,5765]
                                        String: "Download coverage report from model tests" [5722,5765]
                                FIELD [5766,5803]
                                    String: "uses" [5766,5772]
                                    STRING [5773,5803]
                                        String: "actions/download-artifact@v3" [5773,5803]
                                FIELD [5804,5872]
                                    String: "with" [5804,5810]
                                    OBJECT [5811,5872]
                                        FIELD [5812,5841]
                                            String: "name" [5812,5818]
                                            STRING [5819,5841]
                                                String: "Model Tests-coverage" [5819,5841]
                                        FIELD [5842,5871]
                                            String: "path" [5842,5848]
                                            STRING [5849,5871]
                                                String: "coverage/model_tests" [5849,5871]
                            OBJECT [5874,6088]
                                FIELD [5875,5910]
                                    String: "name" [5875,5881]
                                    STRING [5882,5910]
                                        String: "Upload coverage to Codecov" [5882,5910]
                                FIELD [5911,5945]
                                    String: "uses" [5911,5917]
                                    STRING [5918,5945]
                                        String: "codecov/codecov-action@v3" [5918,5945]
                                FIELD [5946,6087]
                                    String: "with" [5946,5952]
                                    OBJECT [5953,6087]
                                        FIELD [5954,6061]
                                            String: "files" [5954,5961]
                                            STRING [5962,6061]
                                                String: "coverage/cpu_tests/coverage.xml,coverage/gpu_tests/coverage.xml,coverage/model_tests/coverage.xml" [5962,6061]
                                        FIELD [6062,6086]
                                            String: "fail_ci_if_error" [6062,6080]
                                            FALSE [6081,6086]
            FIELD [6091,8815]
                String: "build_package" [6091,6106]
                OBJECT [6107,8815]
                    FIELD [6108,6130]
                        String: "name" [6108,6114]
                        STRING [6115,6130]
                            String: "Build Package" [6115,6130]
                    FIELD [6131,6151]
                        String: "timeout-minutes" [6131,6148]
                        NUMBER [6149,6151]
                            Number: 18 [6149,6151]
                    FIELD [6152,6177]
                        String: "runs-on" [6152,6161]
                        STRING [6162,6177]
                            String: "ubuntu-latest" [6162,6177]
                    FIELD [6178,8814]
                        String: "steps" [6178,6185]
                        ARRAY [6186,8814]
                            OBJECT [6187,6217]
                                FIELD [6188,6216]
                                    String: "uses" [6188,6194]
                                    STRING [6195,6216]
                                        String: "actions/checkout@v2" [6195,6216]
                            OBJECT [6218,6354]
                                FIELD [6219,6262]
                                    String: "uses" [6219,6225]
                                    STRING [6226,6262]
                                        String: "conda-incubator/setup-miniconda@v2" [6226,6262]
                                FIELD [6263,6353]
                                    String: "with" [6263,6269]
                                    OBJECT [6270,6353]
                                        FIELD [6271,6299]
                                            String: "miniconda-version" [6271,6290]
                                            STRING [6291,6299]
                                                String: "latest" [6291,6299]
                                        FIELD [6300,6352]
                                            String: "python-version" [6300,6316]
                                            STRING [6317,6352]
                                                String: "${{ env.DEFAULT_PYTHON_VERSION }}" [6317,6352]
                            OBJECT [6355,6610]
                                FIELD [6356,6384]
                                    String: "name" [6356,6362]
                                    STRING [6363,6384]
                                        String: "Set build variables" [6363,6384]
                                FIELD [6385,6609]
                                    String: "run" [6385,6390]
                                    STRING [6391,6609]
                                        String: "echo \"PYTHON_VERSION=$(python --version)\" >> $GITHUB_ENV\necho \"RUNNER_ARCH=$(uname -m)\" >> $GITHUB_ENV\necho \"WEEK_NUMBER=$(date +%V)\" >> $GITHUB_ENV\necho \"TORCH_INSTALL=$TORCH_CPU_INSTALL\" >> $GITHUB_ENV\n" [6391,6609]
                            OBJECT [6611,6878]
                                FIELD [6612,6637]
                                    String: "uses" [6612,6618]
                                    STRING [6619,6637]
                                        String: "actions/cache@v2" [6619,6637]
                                FIELD [6638,6661]
                                    String: "id" [6638,6642]
                                    STRING [6643,6661]
                                        String: "virtualenv-cache" [6643,6661]
                                FIELD [6662,6877]
                                    String: "with" [6662,6668]
                                    OBJECT [6669,6877]
                                        FIELD [6670,6684]
                                            String: "path" [6670,6676]
                                            STRING [6677,6684]
                                                String: ".venv" [6677,6684]
                                        FIELD [6685,6876]
                                            String: "key" [6685,6690]
                                            STRING [6691,6876]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-cpu-${{ hashFiles('setup.py') }}-${{ hashFiles('*requirements.txt') }}" [6691,6876]
                            OBJECT [6879,7126]
                                FIELD [6880,6929]
                                    String: "name" [6880,6886]
                                    STRING [6887,6929]
                                        String: "Setup virtual environment (no cache hit)" [6887,6929]
                                FIELD [6930,6987]
                                    String: "if" [6930,6934]
                                    STRING [6935,6987]
                                        String: "steps.virtualenv-cache.outputs.cache-hit != 'true'" [6935,6987]
                                FIELD [6988,7125]
                                    String: "run" [6988,6993]
                                    STRING [6994,7125]
                                        String: "python${{ env.DEFAULT_PYTHON_VERSION }} -m venv .venv\nsource .venv/bin/activate\nmake install TORCH_INSTALL=\"$TORCH_INSTALL\"\n" [6994,7125]
                            OBJECT [7127,7324]
                                FIELD [7128,7174]
                                    String: "name" [7128,7134]
                                    STRING [7135,7174]
                                        String: "Setup virtual environment (cache hit)" [7135,7174]
                                FIELD [7175,7232]
                                    String: "if" [7175,7179]
                                    STRING [7180,7232]
                                        String: "steps.virtualenv-cache.outputs.cache-hit == 'true'" [7180,7232]
                                FIELD [7233,7323]
                                    String: "run" [7233,7238]
                                    STRING [7239,7323]
                                        String: "source .venv/bin/activate\npip install --no-deps -e .[all]\nmake download-extras\n" [7239,7323]
                            OBJECT [7325,7394]
                                FIELD [7326,7345]
                                    String: "name" [7326,7332]
                                    STRING [7333,7345]
                                        String: "Debug info" [7333,7345]
                                FIELD [7346,7393]
                                    String: "run" [7346,7351]
                                    STRING [7352,7393]
                                        String: "source .venv/bin/activate\npip freeze\n" [7352,7393]
                            OBJECT [7395,8059]
                                FIELD [7396,7434]
                                    String: "name" [7396,7402]
                                    STRING [7403,7434]
                                        String: "Check and set nightly version" [7403,7434]
                                FIELD [7435,7473]
                                    String: "if" [7435,7439]
                                    STRING [7440,7473]
                                        String: "github.event_name == 'schedule'" [7440,7473]
                                FIELD [7474,8058]
                                    String: "run" [7474,7479]
                                    STRING [7480,8058]
                                        String: "# Verify that current version is ahead of the last release.\nsource .venv/bin/activate\nLATEST=$(scripts/get_version.py latest)\nCURRENT=$(scripts/get_version.py current)\nif [ \"$CURRENT\" == \"$LATEST\" ]; then\n    echo \"Current version needs to be ahead of latest release in order to build nightly release\";\n    exit 1;\nfi\n# This is somewhat bizarre, but you can't set env variables to bash\n# commands in the action workflow - so we have to use this odd way of\n# exporting a variable instead.\necho \"ALLENNLP_VERSION_SUFFIX=dev$(date -u +%Y%m%d)\" >> $GITHUB_ENV\n" [7480,8058]
                            OBJECT [8060,8441]
                                FIELD [8061,8105]
                                    String: "name" [8061,8067]
                                    STRING [8068,8105]
                                        String: "Check version and release tag match" [8068,8105]
                                FIELD [8106,8143]
                                    String: "if" [8106,8110]
                                    STRING [8111,8143]
                                        String: "github.event_name == 'release'" [8111,8143]
                                FIELD [8144,8440]
                                    String: "run" [8144,8149]
                                    STRING [8150,8440]
                                        String: "# Remove 'refs/tags/' to get the actual tag from the release.\nsource .venv/bin/activate\nTAG=${GITHUB_REF#refs/tags/};\nVERSION=$(scripts/get_version.py current)\nif [ \"$TAG\" != \"$VERSION\" ]; then\n    echo \"Bad tag or version. Tag $TAG does not match $VERSION\";\n    exit 1;\nfi\n" [8150,8440]
                            OBJECT [8442,8601]
                                FIELD [8443,8470]
                                    String: "name" [8443,8449]
                                    STRING [8450,8470]
                                        String: "Build core package" [8450,8470]
                                FIELD [8471,8600]
                                    String: "run" [8471,8476]
                                    STRING [8477,8600]
                                        String: "# Just print out the version for debugging.\nsource .venv/bin/activate\nmake version\npython setup.py bdist_wheel sdist\n" [8477,8600]
                            OBJECT [8602,8711]
                                FIELD [8603,8629]
                                    String: "name" [8603,8609]
                                    STRING [8610,8629]
                                        String: "Save core package" [8610,8629]
                                FIELD [8630,8665]
                                    String: "uses" [8630,8636]
                                    STRING [8637,8665]
                                        String: "actions/upload-artifact@v1" [8637,8665]
                                FIELD [8666,8710]
                                    String: "with" [8666,8672]
                                    OBJECT [8673,8710]
                                        FIELD [8674,8695]
                                            String: "name" [8674,8680]
                                            STRING [8681,8695]
                                                String: "core-package" [8681,8695]
                                        FIELD [8696,8709]
                                            String: "path" [8696,8702]
                                            STRING [8703,8709]
                                                String: "dist" [8703,8709]
                            OBJECT [8712,8813]
                                FIELD [8713,8730]
                                    String: "name" [8713,8719]
                                    STRING [8720,8730]
                                        String: "Clean up" [8720,8730]
                                FIELD [8731,8746]
                                    String: "if" [8731,8735]
                                    STRING [8736,8746]
                                        String: "always()" [8736,8746]
                                FIELD [8747,8812]
                                    String: "run" [8747,8752]
                                    STRING [8753,8812]
                                        String: "source .venv/bin/activate\npip uninstall --yes allennlp\n" [8753,8812]
            FIELD [8816,9697]
                String: "test_package" [8816,8830]
                OBJECT [8831,9697]
                    FIELD [8832,8853]
                        String: "name" [8832,8838]
                        STRING [8839,8853]
                            String: "Test Package" [8839,8853]
                    FIELD [8854,8874]
                        String: "timeout-minutes" [8854,8871]
                        NUMBER [8872,8874]
                            Number: 10 [8872,8874]
                    FIELD [8875,8900]
                        String: "needs" [8875,8882]
                        ARRAY [8883,8900]
                            STRING [8884,8899]
                                String: "build_package" [8884,8899]
                    FIELD [8901,8926]
                        String: "runs-on" [8901,8910]
                        STRING [8911,8926]
                            String: "ubuntu-latest" [8911,8926]
                    FIELD [8927,9001]
                        String: "strategy" [8927,8937]
                        OBJECT [8938,9001]
                            FIELD [8939,9000]
                                String: "matrix" [8939,8947]
                                OBJECT [8948,9000]
                                    FIELD [8949,8977]
                                        String: "python" [8949,8957]
                                        ARRAY [8958,8977]
                                            STRING [8959,8964]
                                                String: "3.7" [8959,8964]
                                            STRING [8965,8970]
                                                String: "3.8" [8965,8970]
                                            STRING [8971,8976]
                                                String: "3.9" [8971,8976]
                                    FIELD [8978,8999]
                                        String: "flavor" [8978,8986]
                                        ARRAY [8987,8999]
                                            STRING [8988,8990]
                                                String: "" [8988,8990]
                                            STRING [8991,8998]
                                                String: "[all]" [8991,8998]
                    FIELD [9002,9696]
                        String: "steps" [9002,9009]
                        ARRAY [9010,9696]
                            OBJECT [9011,9041]
                                FIELD [9012,9040]
                                    String: "uses" [9012,9018]
                                    STRING [9019,9040]
                                        String: "actions/checkout@v2" [9019,9040]
                            OBJECT [9042,9147]
                                FIELD [9043,9064]
                                    String: "name" [9043,9049]
                                    STRING [9050,9064]
                                        String: "Setup Python" [9050,9064]
                                FIELD [9065,9097]
                                    String: "uses" [9065,9071]
                                    STRING [9072,9097]
                                        String: "actions/setup-python@v2" [9072,9097]
                                FIELD [9098,9146]
                                    String: "with" [9098,9104]
                                    OBJECT [9105,9146]
                                        FIELD [9106,9145]
                                            String: "python-version" [9106,9122]
                                            STRING [9123,9145]
                                                String: "${{ matrix.python }}" [9123,9145]
                            OBJECT [9148,9232]
                                FIELD [9149,9178]
                                    String: "name" [9149,9155]
                                    STRING [9156,9178]
                                        String: "Install requirements" [9156,9178]
                                FIELD [9179,9231]
                                    String: "run" [9179,9184]
                                    STRING [9185,9231]
                                        String: "pip install --upgrade pip setuptools wheel\n" [9185,9231]
                            OBJECT [9233,9348]
                                FIELD [9234,9264]
                                    String: "name" [9234,9240]
                                    STRING [9241,9264]
                                        String: "Download core package" [9241,9264]
                                FIELD [9265,9302]
                                    String: "uses" [9265,9271]
                                    STRING [9272,9302]
                                        String: "actions/download-artifact@v3" [9272,9302]
                                FIELD [9303,9347]
                                    String: "with" [9303,9309]
                                    OBJECT [9310,9347]
                                        FIELD [9311,9332]
                                            String: "name" [9311,9317]
                                            STRING [9318,9332]
                                                String: "core-package" [9318,9332]
                                        FIELD [9333,9346]
                                            String: "path" [9333,9339]
                                            STRING [9340,9346]
                                                String: "dist" [9340,9346]
                            OBJECT [9349,9439]
                                FIELD [9350,9379]
                                    String: "name" [9350,9356]
                                    STRING [9357,9379]
                                        String: "Install core package" [9357,9379]
                                FIELD [9380,9438]
                                    String: "run" [9380,9385]
                                    STRING [9386,9438]
                                        String: "pip install $(ls dist/*.whl)${{ matrix.flavor }}\n" [9386,9438]
                            OBJECT [9440,9509]
                                FIELD [9441,9477]
                                    String: "name" [9441,9447]
                                    STRING [9448,9477]
                                        String: "Download NLTK prerequisites" [9448,9477]
                                FIELD [9478,9508]
                                    String: "run" [9478,9483]
                                    STRING [9484,9508]
                                        String: "make download-extras\n" [9484,9508]
                            OBJECT [9510,9596]
                                FIELD [9511,9537]
                                    String: "name" [9511,9517]
                                    STRING [9518,9537]
                                        String: "Cleanup workspace" [9518,9537]
                                FIELD [9538,9595]
                                    String: "run" [9538,9543]
                                    STRING [9544,9595]
                                        String: "rm -rf allennlp/ setup.py tests/ test_fixtures/\n" [9544,9595]
                            OBJECT [9597,9639]
                                FIELD [9598,9617]
                                    String: "name" [9598,9604]
                                    STRING [9605,9617]
                                        String: "Pip freeze" [9605,9617]
                                FIELD [9618,9638]
                                    String: "run" [9618,9623]
                                    STRING [9624,9638]
                                        String: "pip freeze\n" [9624,9638]
                            OBJECT [9640,9695]
                                FIELD [9641,9662]
                                    String: "name" [9641,9647]
                                    STRING [9648,9662]
                                        String: "Test install" [9648,9662]
                                FIELD [9663,9694]
                                    String: "run" [9663,9668]
                                    STRING [9669,9694]
                                        String: "allennlp test-install\n" [9669,9694]
            FIELD [9698,11301]
                String: "docker" [9698,9706]
                OBJECT [9707,11301]
                    FIELD [9708,9749]
                        String: "name" [9708,9714]
                        STRING [9715,9749]
                            String: "Docker (CUDA ${{ matrix.cuda }})" [9715,9749]
                    FIELD [9750,9770]
                        String: "timeout-minutes" [9750,9767]
                        NUMBER [9768,9770]
                            Number: 18 [9768,9770]
                    FIELD [9771,9817]
                        String: "if" [9771,9775]
                        STRING [9776,9817]
                            String: "github.repository == 'allenai/allennlp'" [9776,9817]
                    FIELD [9818,9843]
                        String: "runs-on" [9818,9827]
                        STRING [9828,9843]
                            String: "ubuntu-latest" [9828,9843]
                    FIELD [9844,9883]
                        String: "strategy" [9844,9854]
                        OBJECT [9855,9883]
                            FIELD [9856,9882]
                                String: "matrix" [9856,9864]
                                OBJECT [9865,9882]
                                    FIELD [9866,9881]
                                        String: "cuda" [9866,9872]
                                        ARRAY [9873,9881]
                                            STRING [9874,9880]
                                                String: "11.3" [9874,9880]
                    FIELD [9884,11300]
                        String: "steps" [9884,9891]
                        ARRAY [9892,11300]
                            OBJECT [9893,9923]
                                FIELD [9894,9922]
                                    String: "uses" [9894,9900]
                                    STRING [9901,9922]
                                        String: "actions/checkout@v2" [9901,9922]
                            OBJECT [9924,10339]
                                FIELD [9925,9966]
                                    String: "name" [9925,9931]
                                    STRING [9932,9966]
                                        String: "Set image name and torch version" [9932,9966]
                                FIELD [9967,10002]
                                    String: "env" [9967,9972]
                                    OBJECT [9973,10002]
                                        FIELD [9974,10001]
                                            String: "CUDA" [9974,9980]
                                            STRING [9981,10001]
                                                String: "${{ matrix.cuda }}" [9981,10001]
                                FIELD [10003,10338]
                                    String: "run" [10003,10008]
                                    STRING [10009,10338]
                                        String: "echo \"DOCKER_TORCH_VERSION=${TORCH_VERSION}-cuda${CUDA}\" >> $GITHUB_ENV;\nif [[ $GITHUB_EVENT_NAME == 'release' ]]; then\n    echo \"DOCKER_IMAGE_NAME=allennlp/allennlp:${GITHUB_REF#refs/tags/}-cuda${CUDA}\" >> $GITHUB_ENV;\nelse\n    echo \"DOCKER_IMAGE_NAME=allennlp/commit:${GITHUB_SHA}-cuda${CUDA}\" >> $GITHUB_ENV;\nfi\n" [10009,10338]
                            OBJECT [10340,10478]
                                FIELD [10341,10361]
                                    String: "name" [10341,10347]
                                    STRING [10348,10361]
                                        String: "Build image" [10348,10361]
                                FIELD [10362,10477]
                                    String: "run" [10362,10367]
                                    STRING [10368,10477]
                                        String: "make docker-image DOCKER_IMAGE_NAME=\"$DOCKER_IMAGE_NAME\" DOCKER_TORCH_VERSION=\"$DOCKER_TORCH_VERSION\"\n" [10368,10477]
                            OBJECT [10479,10558]
                                FIELD [10480,10499]
                                    String: "name" [10480,10486]
                                    STRING [10487,10499]
                                        String: "Test image" [10487,10499]
                                FIELD [10500,10557]
                                    String: "run" [10500,10505]
                                    STRING [10506,10557]
                                        String: "docker run --rm $DOCKER_IMAGE_NAME test-install\n" [10506,10557]
                            OBJECT [10559,10756]
                                FIELD [10560,10595]
                                    String: "name" [10560,10566]
                                    STRING [10567,10595]
                                        String: "Authenticate to Docker Hub" [10567,10595]
                                FIELD [10596,10664]
                                    String: "if" [10596,10600]
                                    STRING [10601,10664]
                                        String: "github.event_name == 'release' || github.event_name == 'push'" [10601,10664]
                                FIELD [10665,10755]
                                    String: "run" [10665,10670]
                                    STRING [10671,10755]
                                        String: "docker login -u ${{ secrets.DOCKER_USERNAME }} -p ${{ secrets.DOCKER_PASSWORD }}\n" [10671,10755]
                            OBJECT [10757,10890]
                                FIELD [10758,10779]
                                    String: "name" [10758,10764]
                                    STRING [10765,10779]
                                        String: "Upload image" [10765,10779]
                                FIELD [10780,10848]
                                    String: "if" [10780,10784]
                                    STRING [10785,10848]
                                        String: "github.event_name == 'release' || github.event_name == 'push'" [10785,10848]
                                FIELD [10849,10889]
                                    String: "run" [10849,10854]
                                    STRING [10855,10889]
                                        String: "docker push $DOCKER_IMAGE_NAME\n" [10855,10889]
                            OBJECT [10891,11102]
                                FIELD [10892,10928]
                                    String: "name" [10892,10898]
                                    STRING [10899,10928]
                                        String: "Upload default commit image" [10899,10928]
                                FIELD [10929,10988]
                                    String: "if" [10929,10933]
                                    STRING [10934,10988]
                                        String: "github.event_name == 'push' && matrix.cuda == '11.3'" [10934,10988]
                                FIELD [10989,11101]
                                    String: "run" [10989,10994]
                                    STRING [10995,11101]
                                        String: "docker tag $DOCKER_IMAGE_NAME allennlp/commit:${GITHUB_SHA}\ndocker push allennlp/commit:${GITHUB_SHA}\n" [10995,11101]
                            OBJECT [11103,11299]
                                FIELD [11104,11132]
                                    String: "name" [11104,11110]
                                    STRING [11111,11132]
                                        String: "Upload latest image" [11111,11132]
                                FIELD [11133,11195]
                                    String: "if" [11133,11137]
                                    STRING [11138,11195]
                                        String: "github.event_name == 'release' && matrix.cuda == '11.3'" [11138,11195]
                                FIELD [11196,11298]
                                    String: "run" [11196,11201]
                                    STRING [11202,11298]
                                        String: "docker tag $DOCKER_IMAGE_NAME allennlp/allennlp:latest\ndocker push allennlp/allennlp:latest\n" [11202,11298]
            FIELD [11302,15772]
                String: "docs" [11302,11308]
                OBJECT [11309,15772]
                    FIELD [11310,11323]
                        String: "name" [11310,11316]
                        STRING [11317,11323]
                            String: "Docs" [11317,11323]
                    FIELD [11324,11344]
                        String: "timeout-minutes" [11324,11341]
                        NUMBER [11342,11344]
                            Number: 15 [11342,11344]
                    FIELD [11345,11391]
                        String: "if" [11345,11349]
                        STRING [11350,11391]
                            String: "github.repository == 'allenai/allennlp'" [11350,11391]
                    FIELD [11392,11417]
                        String: "runs-on" [11392,11401]
                        STRING [11402,11417]
                            String: "ubuntu-latest" [11402,11417]
                    FIELD [11418,15771]
                        String: "steps" [11418,11425]
                        ARRAY [11426,15771]
                            OBJECT [11427,11457]
                                FIELD [11428,11456]
                                    String: "uses" [11428,11434]
                                    STRING [11435,11456]
                                        String: "actions/checkout@v1" [11435,11456]
                            OBJECT [11458,11654]
                                FIELD [11459,11487]
                                    String: "name" [11459,11465]
                                    STRING [11466,11487]
                                        String: "Setup SSH Client " [11466,11487]
                                FIELD [11488,11556]
                                    String: "if" [11488,11492]
                                    STRING [11493,11556]
                                        String: "github.event_name == 'release' || github.event_name == 'push'" [11493,11556]
                                FIELD [11557,11593]
                                    String: "uses" [11557,11563]
                                    STRING [11564,11593]
                                        String: "webfactory/ssh-agent@v0.5.4" [11564,11593]
                                FIELD [11594,11653]
                                    String: "with" [11594,11600]
                                    OBJECT [11601,11653]
                                        FIELD [11602,11652]
                                            String: "ssh-private-key" [11602,11619]
                                            STRING [11620,11652]
                                                String: "${{ secrets.DOCS_DEPLOY_KEY }}" [11620,11652]
                            OBJECT [11655,11791]
                                FIELD [11656,11699]
                                    String: "uses" [11656,11662]
                                    STRING [11663,11699]
                                        String: "conda-incubator/setup-miniconda@v2" [11663,11699]
                                FIELD [11700,11790]
                                    String: "with" [11700,11706]
                                    OBJECT [11707,11790]
                                        FIELD [11708,11736]
                                            String: "miniconda-version" [11708,11727]
                                            STRING [11728,11736]
                                                String: "latest" [11728,11736]
                                        FIELD [11737,11789]
                                            String: "python-version" [11737,11753]
                                            STRING [11754,11789]
                                                String: "${{ env.DEFAULT_PYTHON_VERSION }}" [11754,11789]
                            OBJECT [11792,12047]
                                FIELD [11793,11821]
                                    String: "name" [11793,11799]
                                    STRING [11800,11821]
                                        String: "Set build variables" [11800,11821]
                                FIELD [11822,12046]
                                    String: "run" [11822,11827]
                                    STRING [11828,12046]
                                        String: "echo \"PYTHON_VERSION=$(python --version)\" >> $GITHUB_ENV\necho \"RUNNER_ARCH=$(uname -m)\" >> $GITHUB_ENV\necho \"WEEK_NUMBER=$(date +%V)\" >> $GITHUB_ENV\necho \"TORCH_INSTALL=$TORCH_CPU_INSTALL\" >> $GITHUB_ENV\n" [11828,12046]
                            OBJECT [12048,12315]
                                FIELD [12049,12074]
                                    String: "uses" [12049,12055]
                                    STRING [12056,12074]
                                        String: "actions/cache@v2" [12056,12074]
                                FIELD [12075,12098]
                                    String: "id" [12075,12079]
                                    STRING [12080,12098]
                                        String: "virtualenv-cache" [12080,12098]
                                FIELD [12099,12314]
                                    String: "with" [12099,12105]
                                    OBJECT [12106,12314]
                                        FIELD [12107,12121]
                                            String: "path" [12107,12113]
                                            STRING [12114,12121]
                                                String: ".venv" [12114,12121]
                                        FIELD [12122,12313]
                                            String: "key" [12122,12127]
                                            STRING [12128,12313]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-cpu-${{ hashFiles('setup.py') }}-${{ hashFiles('*requirements.txt') }}" [12128,12313]
                            OBJECT [12316,12563]
                                FIELD [12317,12366]
                                    String: "name" [12317,12323]
                                    STRING [12324,12366]
                                        String: "Setup virtual environment (no cache hit)" [12324,12366]
                                FIELD [12367,12424]
                                    String: "if" [12367,12371]
                                    STRING [12372,12424]
                                        String: "steps.virtualenv-cache.outputs.cache-hit != 'true'" [12372,12424]
                                FIELD [12425,12562]
                                    String: "run" [12425,12430]
                                    STRING [12431,12562]
                                        String: "python${{ env.DEFAULT_PYTHON_VERSION }} -m venv .venv\nsource .venv/bin/activate\nmake install TORCH_INSTALL=\"$TORCH_INSTALL\"\n" [12431,12562]
                            OBJECT [12564,12761]
                                FIELD [12565,12611]
                                    String: "name" [12565,12571]
                                    STRING [12572,12611]
                                        String: "Setup virtual environment (cache hit)" [12572,12611]
                                FIELD [12612,12669]
                                    String: "if" [12612,12616]
                                    STRING [12617,12669]
                                        String: "steps.virtualenv-cache.outputs.cache-hit == 'true'" [12617,12669]
                                FIELD [12670,12760]
                                    String: "run" [12670,12675]
                                    STRING [12676,12760]
                                        String: "source .venv/bin/activate\npip install --no-deps -e .[all]\nmake download-extras\n" [12676,12760]
                            OBJECT [12762,12831]
                                FIELD [12763,12782]
                                    String: "name" [12763,12769]
                                    STRING [12770,12782]
                                        String: "Debug info" [12770,12782]
                                FIELD [12783,12830]
                                    String: "run" [12783,12788]
                                    STRING [12789,12830]
                                        String: "source .venv/bin/activate\npip freeze\n" [12789,12830]
                            OBJECT [12832,13269]
                                FIELD [12833,12861]
                                    String: "name" [12833,12839]
                                    STRING [12840,12861]
                                        String: "Prepare environment" [12840,12861]
                                FIELD [12862,13268]
                                    String: "run" [12862,12867]
                                    STRING [12868,13268]
                                        String: "if [[ $GITHUB_EVENT_NAME == 'release' ]]; then\n    echo \"DOCS_FOLDER=${GITHUB_REF#refs/tags/}\" >> $GITHUB_ENV;\n    echo \"BASE_SOURCE_LINK=https://github.com/allenai/allennlp/blob/${GITHUB_REF#refs/tags/}/allennlp/\" >> $GITHUB_ENV;\nelse\n    echo \"DOCS_FOLDER=main\" >> $GITHUB_ENV;\n    echo \"BASE_SOURCE_LINK=https://github.com/allenai/allennlp/blob/main/allennlp/\" >> $GITHUB_ENV;\nfi\n" [12868,13268]
                            OBJECT [13270,13352]
                                FIELD [13271,13290]
                                    String: "name" [13271,13277]
                                    STRING [13278,13290]
                                        String: "Build docs" [13278,13290]
                                FIELD [13291,13351]
                                    String: "run" [13291,13296]
                                    STRING [13297,13351]
                                        String: "source .venv/bin/activate\n./scripts/build_docs.sh\n" [13297,13351]
                            OBJECT [13353,13410]
                                FIELD [13354,13376]
                                    String: "name" [13354,13360]
                                    STRING [13361,13376]
                                        String: "Print the ref" [13361,13376]
                                FIELD [13377,13409]
                                    String: "run" [13377,13382]
                                    STRING [13383,13409]
                                        String: "echo ${{ github.ref }}\n" [13383,13409]
                            OBJECT [13411,13696]
                                FIELD [13412,13434]
                                    String: "name" [13412,13418]
                                    STRING [13419,13434]
                                        String: "Configure Git" [13419,13434]
                                FIELD [13435,13540]
                                    String: "if" [13435,13439]
                                    STRING [13440,13540]
                                        String: "github.event_name == 'release' || (github.event_name == 'push' && github.ref == 'refs/heads/main')" [13440,13540]
                                FIELD [13541,13695]
                                    String: "run" [13541,13546]
                                    STRING [13547,13695]
                                        String: "git config --global user.email \"ai2service@allenai.org\"\ngit config --global user.name \"ai2service\"\ngit config --global push.default simple\n" [13547,13695]
                            OBJECT [13697,14164]
                                FIELD [13698,13717]
                                    String: "name" [13698,13704]
                                    STRING [13705,13717]
                                        String: "Stage docs" [13705,13717]
                                FIELD [13718,13823]
                                    String: "if" [13718,13722]
                                    STRING [13723,13823]
                                        String: "github.event_name == 'release' || (github.event_name == 'push' && github.ref == 'refs/heads/main')" [13723,13823]
                                FIELD [13824,14163]
                                    String: "run" [13824,13829]
                                    STRING [13830,14163]
                                        String: "echo \"Staging docs to $DOCS_FOLDER\"\n\n# Checkout allennlp-docs to /allennlp-docs\ngit clone git@github.com:allenai/allennlp-docs.git ~/allennlp-docs\n\n# Copy the generated docs to the checked out docs repo\nrm -rf ~/allennlp-docs/$DOCS_FOLDER/\nmkdir -p ~/allennlp-docs/$DOCS_FOLDER\ncp -r site/* ~/allennlp-docs/$DOCS_FOLDER\n" [13830,14163]
                            OBJECT [14165,15066]
                                FIELD [14166,14191]
                                    String: "name" [14166,14172]
                                    STRING [14173,14191]
                                        String: "Update shortcuts" [14173,14191]
                                FIELD [14192,14229]
                                    String: "if" [14192,14196]
                                    STRING [14197,14229]
                                        String: "github.event_name == 'release'" [14197,14229]
                                FIELD [14230,15065]
                                    String: "run" [14230,14235]
                                    STRING [14236,15065]
                                        String: "# Fail immediately if any step fails.\nset -e\nsource .venv/bin/activate\n\nLATEST=$(./scripts/get_version.py latest)\nSTABLE=$(./scripts/get_version.py stable)\n\ncd ~/allennlp-docs/\n\necho \"Updating latest/index.html to point to $LATEST\"\nmkdir -p latest\ncat >latest/index.html << EOL\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"Refresh\" content=\"0; url=/${LATEST}/\" />\n  </head>\n  <body>\n    <p>Please follow <a href=\"/${LATEST}/\">this link</a>.</p>\n  </body>\n</html>\nEOL\n\necho \"Updating stable/index.html to point to $STABLE\"\nmkdir -p stable\ncat >stable/index.html << EOL\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"Refresh\" content=\"0; url=/${STABLE}/\" />\n  </head>\n  <body>\n    <p>Please follow <a href=\"/${STABLE}/\">this link</a>.</p>\n  </body>\n</html>\nEOL\n" [14236,15065]
                            OBJECT [15067,15325]
                                FIELD [15068,15088]
                                    String: "name" [15068,15074]
                                    STRING [15075,15088]
                                        String: "Deploy docs" [15075,15088]
                                FIELD [15089,15194]
                                    String: "if" [15089,15093]
                                    STRING [15094,15194]
                                        String: "github.event_name == 'release' || (github.event_name == 'push' && github.ref == 'refs/heads/main')" [15094,15194]
                                FIELD [15195,15324]
                                    String: "run" [15195,15200]
                                    STRING [15201,15324]
                                        String: "# And push them up to GitHub\ncd ~/allennlp-docs/\ngit add -A\ngit commit -m \"automated update of the docs\"\ngit push\n" [15201,15324]
                            OBJECT [15326,15668]
                                FIELD [15327,15364]
                                    String: "name" [15327,15333]
                                    STRING [15334,15364]
                                        String: "Re-write docs commit history" [15334,15364]
                                FIELD [15365,15402]
                                    String: "if" [15365,15369]
                                    STRING [15370,15402]
                                        String: "github.event_name == 'release'" [15370,15402]
                                FIELD [15403,15667]
                                    String: "run" [15403,15408]
                                    STRING [15409,15667]
                                        String: "cd ~/allennlp-docs/\ngit checkout --orphan latest_branch\ngit add -A\ngit commit -m \"Re-write commit history\"\ngit branch -D master  # remove old master branch\ngit branch -m master  # rename clean new branch to master branch\ngit push -f origin master\n" [15409,15667]
                            OBJECT [15669,15770]
                                FIELD [15670,15687]
                                    String: "name" [15670,15676]
                                    STRING [15677,15687]
                                        String: "Clean up" [15677,15687]
                                FIELD [15688,15703]
                                    String: "if" [15688,15692]
                                    STRING [15693,15703]
                                        String: "always()" [15693,15703]
                                FIELD [15704,15769]
                                    String: "run" [15704,15709]
                                    STRING [15710,15769]
                                        String: "source .venv/bin/activate\npip uninstall --yes allennlp\n" [15710,15769]
            FIELD [15773,16508]
                String: "publish" [15773,15782]
                OBJECT [15783,16508]
                    FIELD [15784,15797]
                        String: "name" [15784,15790]
                        STRING [15791,15797]
                            String: "PyPI" [15791,15797]
                    FIELD [15798,15818]
                        String: "timeout-minutes" [15798,15815]
                        NUMBER [15816,15818]
                            Number: 10 [15816,15818]
                    FIELD [15819,15892]
                        String: "needs" [15819,15826]
                        ARRAY [15827,15892]
                            STRING [15828,15835]
                                String: "style" [15828,15835]
                            STRING [15836,15844]
                                String: "checks" [15836,15844]
                            STRING [15845,15860]
                                String: "build_package" [15845,15860]
                            STRING [15861,15875]
                                String: "test_package" [15861,15875]
                            STRING [15876,15884]
                                String: "docker" [15876,15884]
                            STRING [15885,15891]
                                String: "docs" [15885,15891]
                    FIELD [15893,16010]
                        String: "if" [15893,15897]
                        STRING [15898,16010]
                            String: "github.repository == 'allenai/allennlp' && (github.event_name == 'release' || github.event_name == 'schedule')" [15898,16010]
                    FIELD [16011,16036]
                        String: "runs-on" [16011,16020]
                        STRING [16021,16036]
                            String: "ubuntu-latest" [16021,16036]
                    FIELD [16037,16507]
                        String: "steps" [16037,16044]
                        ARRAY [16045,16507]
                            OBJECT [16046,16076]
                                FIELD [16047,16075]
                                    String: "uses" [16047,16053]
                                    STRING [16054,16075]
                                        String: "actions/checkout@v2" [16054,16075]
                            OBJECT [16077,16195]
                                FIELD [16078,16099]
                                    String: "name" [16078,16084]
                                    STRING [16085,16099]
                                        String: "Setup Python" [16085,16099]
                                FIELD [16100,16132]
                                    String: "uses" [16100,16106]
                                    STRING [16107,16132]
                                        String: "actions/setup-python@v2" [16107,16132]
                                FIELD [16133,16194]
                                    String: "with" [16133,16139]
                                    OBJECT [16140,16194]
                                        FIELD [16141,16193]
                                            String: "python-version" [16141,16157]
                                            STRING [16158,16193]
                                                String: "${{ env.DEFAULT_PYTHON_VERSION }}" [16158,16193]
                            OBJECT [16196,16286]
                                FIELD [16197,16226]
                                    String: "name" [16197,16203]
                                    STRING [16204,16226]
                                        String: "Install requirements" [16204,16226]
                                FIELD [16227,16285]
                                    String: "run" [16227,16232]
                                    STRING [16233,16285]
                                        String: "pip install --upgrade pip setuptools wheel twine\n" [16233,16285]
                            OBJECT [16287,16402]
                                FIELD [16288,16318]
                                    String: "name" [16288,16294]
                                    STRING [16295,16318]
                                        String: "Download core package" [16295,16318]
                                FIELD [16319,16356]
                                    String: "uses" [16319,16325]
                                    STRING [16326,16356]
                                        String: "actions/download-artifact@v3" [16326,16356]
                                FIELD [16357,16401]
                                    String: "with" [16357,16363]
                                    OBJECT [16364,16401]
                                        FIELD [16365,16386]
                                            String: "name" [16365,16371]
                                            STRING [16372,16386]
                                                String: "core-package" [16372,16386]
                                        FIELD [16387,16400]
                                            String: "path" [16387,16393]
                                            STRING [16394,16400]
                                                String: "dist" [16394,16400]
                            OBJECT [16403,16506]
                                FIELD [16404,16433]
                                    String: "name" [16404,16410]
                                    STRING [16411,16433]
                                        String: "Publish core package" [16411,16433]
                                FIELD [16434,16505]
                                    String: "run" [16434,16439]
                                    STRING [16440,16505]
                                        String: "twine upload -u allennlp -p ${{ secrets.PYPI_PASSWORD }} dist/*" [16440,16505]