OBJECT [0,3426]
    FIELD [1,42]
        String: "name" [1,7]
        STRING [8,42]
            String: "Guide Notebooks Regression - EC2" [8,42]
    FIELD [43,88]
        String: "run-name" [43,53]
        STRING [54,88]
            String: "Guide Notebooks Regression - EC2" [54,88]
    FIELD [89,102]
        String: "on" [89,93]
        ARRAY [94,102]
            STRING [95,101]
                String: "push" [95,101]
    FIELD [103,3425]
        String: "jobs" [103,109]
        OBJECT [110,3425]
            FIELD [111,1267]
                String: "start_ec2_runner" [111,129]
                OBJECT [130,1267]
                    FIELD [131,156]
                        String: "runs-on" [131,140]
                        STRING [141,156]
                            String: "ubuntu-latest" [141,156]
                    FIELD [157,402]
                        String: "env" [157,162]
                        OBJECT [163,402]
                            FIELD [164,204]
                                String: "AWS_KEY_ID" [164,176]
                                STRING [177,204]
                                    String: "${{ secrets.AWS_KEY_ID }}" [177,204]
                            FIELD [205,253]
                                String: "AWS_KEY_SECRET" [205,221]
                                STRING [222,253]
                                    String: "${{ secrets.AWS_KEY_SECRET }}" [222,253]
                            FIELD [254,305]
                                String: "AWS_INSTANCE_TYPE" [254,273]
                                STRING [274,305]
                                    String: "${{ vars.AWS_INSTANCE_TYPE }}" [274,305]
                            FIELD [306,347]
                                String: "AWS_IMAGE_ID" [306,320]
                                STRING [321,347]
                                    String: "${{ vars.AWS_IMAGE_ID }}" [321,347]
                            FIELD [348,401]
                                String: "AWS_SECURITY_GROUP" [348,368]
                                STRING [369,401]
                                    String: "${{ vars.AWS_SECURITY_GROUP }}" [369,401]
                    FIELD [403,484]
                        String: "outputs" [403,412]
                        OBJECT [413,484]
                            FIELD [414,483]
                                String: "EC2_INSTANCE_ID" [414,431]
                                STRING [432,483]
                                    String: "${{ steps.start_runner.outputs.EC2_INSTANCE_ID }}" [432,483]
                    FIELD [485,1266]
                        String: "steps" [485,492]
                        ARRAY [493,1266]
                            OBJECT [494,890]
                                FIELD [495,517]
                                    String: "name" [495,501]
                                    STRING [502,517]
                                        String: "configure_aws" [502,517]
                                FIELD [518,889]
                                    String: "run" [518,523]
                                    STRING [524,889]
                                        String: "set -xe\nsudo apt update\nsudo apt install -y awscli jq\nmkdir ${HOME}/.aws\necho \"[default]\" > ${HOME}/.aws/credentials\necho \"aws_access_key_id = ${AWS_KEY_ID}\" >> ${HOME}/.aws/credentials\necho \"aws_secret_access_key = ${AWS_KEY_SECRET}\" >> ${HOME}/.aws/credentials\necho \"region = us-east-1\" >> ${HOME}/.aws/credentials\ncat ${HOME}/.aws/credentials\n" [524,889]
                            OBJECT [891,1265]
                                FIELD [892,913]
                                    String: "name" [892,898]
                                    STRING [899,913]
                                        String: "start_runner" [899,913]
                                FIELD [914,933]
                                    String: "id" [914,918]
                                    STRING [919,933]
                                        String: "start_runner" [919,933]
                                FIELD [934,1264]
                                    String: "run" [934,939]
                                    STRING [940,1264]
                                        String: "set -xe\noutput=$(aws ec2 run-instances \\\n  --instance-type ${AWS_INSTANCE_TYPE} \\\n  --image-id ${AWS_IMAGE_ID} \\\n  --security-group-ids ${AWS_SECURITY_GROUP} \\\n  --count 1)\nEC2_INSTANCE_ID=$(echo ${output} | jq -r \".Instances[0].InstanceId\")\necho \"EC2_INSTANCE_ID=${EC2_INSTANCE_ID}\" >> \"$GITHUB_OUTPUT\"\n" [940,1264]
            FIELD [1268,2614]
                String: "guide_notebooks_regression_ec2" [1268,1300]
                OBJECT [1301,2614]
                    FIELD [1302,1350]
                        String: "runs-on" [1302,1311]
                        ARRAY [1312,1350]
                            STRING [1313,1326]
                                String: "self-hosted" [1313,1326]
                            STRING [1327,1349]
                                String: "nobrainer-ci-ec2-gpu" [1327,1349]
                    FIELD [1351,1377]
                        String: "needs" [1351,1358]
                        STRING [1359,1377]
                            String: "start_ec2_runner" [1359,1377]
                    FIELD [1378,2613]
                        String: "steps" [1378,1385]
                        ARRAY [1386,2613]
                            OBJECT [1387,1664]
                                FIELD [1388,1412]
                                    String: "name" [1388,1394]
                                    STRING [1395,1412]
                                        String: "verify-instance" [1395,1412]
                                FIELD [1413,1494]
                                    String: "env" [1413,1418]
                                    OBJECT [1419,1494]
                                        FIELD [1420,1493]
                                            String: "EC2_INSTANCE_ID" [1420,1437]
                                            STRING [1438,1493]
                                                String: "${{ needs.start_ec2_runner.outputs.EC2_INSTANCE_ID }}" [1438,1493]
                                FIELD [1495,1663]
                                    String: "run" [1495,1500]
                                    STRING [1501,1663]
                                        String: "set -xe\nif [[ $(ec2metadata --instance-id) != ${EC2_INSTANCE_ID} ]]; then\n  echo \"Running on the wrong instance! Bailing, but try rerunning\"\n  exit 1\nfi\n" [1501,1663]
                            OBJECT [1665,1710]
                                FIELD [1666,1680]
                                    String: "name" [1666,1672]
                                    STRING [1673,1680]
                                        String: "clone" [1673,1680]
                                FIELD [1681,1709]
                                    String: "uses" [1681,1687]
                                    STRING [1688,1709]
                                        String: "actions/checkout@v3" [1688,1709]
                            OBJECT [1711,1913]
                                FIELD [1712,1728]
                                    String: "name" [1712,1718]
                                    STRING [1719,1728]
                                        String: "install" [1719,1728]
                                FIELD [1729,1912]
                                    String: "run" [1729,1734]
                                    STRING [1735,1912]
                                        String: "set -xe\ncd ${{ github.workspace }}\npython -m venv env\nsource env/bin/activate\npip install --upgrade pip\npip install matplotlib nilearn\npip install -e .\nnobrainer info\n" [1735,1912]
                            OBJECT [1914,2612]
                                FIELD [1915,1927]
                                    String: "name" [1915,1921]
                                    STRING [1922,1927]
                                        String: "run" [1922,1927]
                                FIELD [1928,2611]
                                    String: "run" [1928,1933]
                                    STRING [1934,2611]
                                        String: "set -xe\ncd ${{ github.workspace }}\ngit clone https://github.com/neuronets/nobrainer-book.git\ncd nobrainer-book\n\n# if there is a matching book branch, switch to it\nif [ $(git ls-remote --heads https://github.com/neuronets/nobrainer-book.git ${{ github.ref_name }} | wc -l) -ne 0 ]; then\n  echo \"Checking out branch ${{ github.ref_name }}\"\n  git checkout ${{ github.ref_name }};\nelse\n  echo \"No matching branch found, sticking with the default\"\nfi\n\ncd ${{ github.workspace }}\nsource env/bin/activate\nfor notebook_script in $(ls nobrainer-book/docs/nobrainer-guides/scripts/*.py); do\n  echo \"running ${notebook_script}\"\n  python ${notebook_script}\ndone\n" [1934,2611]
            FIELD [2615,3424]
                String: "stop_ec2_runner" [2615,2632]
                OBJECT [2633,3424]
                    FIELD [2634,2649]
                        String: "if" [2634,2638]
                        STRING [2639,2649]
                            String: "always()" [2639,2649]
                    FIELD [2650,2675]
                        String: "runs-on" [2650,2659]
                        STRING [2660,2675]
                            String: "ubuntu-latest" [2660,2675]
                    FIELD [2676,2737]
                        String: "needs" [2676,2683]
                        ARRAY [2684,2737]
                            STRING [2685,2703]
                                String: "start_ec2_runner" [2685,2703]
                            STRING [2704,2736]
                                String: "guide_notebooks_regression_ec2" [2704,2736]
                    FIELD [2738,2835]
                        String: "env" [2738,2743]
                        OBJECT [2744,2835]
                            FIELD [2745,2785]
                                String: "AWS_KEY_ID" [2745,2757]
                                STRING [2758,2785]
                                    String: "${{ secrets.AWS_KEY_ID }}" [2758,2785]
                            FIELD [2786,2834]
                                String: "AWS_KEY_SECRET" [2786,2802]
                                STRING [2803,2834]
                                    String: "${{ secrets.AWS_KEY_SECRET }}" [2803,2834]
                    FIELD [2836,3423]
                        String: "steps" [2836,2843]
                        ARRAY [2844,3423]
                            OBJECT [2845,3238]
                                FIELD [2846,2868]
                                    String: "name" [2846,2852]
                                    STRING [2853,2868]
                                        String: "configure_aws" [2853,2868]
                                FIELD [2869,3237]
                                    String: "run" [2869,2874]
                                    STRING [2875,3237]
                                        String: "set -xe\nsudo apt update\nsudo apt install -y awscli\nmkdir ${HOME}/.aws\necho \"[default]\" > ${HOME}/.aws/credentials\necho \"aws_access_key_id = ${AWS_KEY_ID}\" >> ${HOME}/.aws/credentials\necho \"aws_secret_access_key = ${AWS_KEY_SECRET}\" >> ${HOME}/.aws/credentials\necho \"region = us-east-1\" >> ${HOME}/.aws/credentials\ncat ${HOME}/.aws/credentials\n" [2875,3237]
                            OBJECT [3239,3422]
                                FIELD [3240,3260]
                                    String: "name" [3240,3246]
                                    STRING [3247,3260]
                                        String: "stop_runner" [3247,3260]
                                FIELD [3261,3342]
                                    String: "env" [3261,3266]
                                    OBJECT [3267,3342]
                                        FIELD [3268,3341]
                                            String: "EC2_INSTANCE_ID" [3268,3285]
                                            STRING [3286,3341]
                                                String: "${{ needs.start_ec2_runner.outputs.EC2_INSTANCE_ID }}" [3286,3341]
                                FIELD [3343,3421]
                                    String: "run" [3343,3348]
                                    STRING [3349,3421]
                                        String: "set -xe\naws ec2 terminate-instances --instance-ids ${EC2_INSTANCE_ID}" [3349,3421]