OBJECT [0,4084]
    FIELD [1,23]
        String: "name" [1,7]
        STRING [8,23]
            String: "PHPUnit mysql" [8,23]
    FIELD [24,261]
        String: "on" [24,28]
        OBJECT [29,261]
            FIELD [30,212]
                String: "pull_request" [30,44]
                OBJECT [45,212]
                    FIELD [46,211]
                        String: "paths" [46,53]
                        ARRAY [54,211]
                            STRING [55,77]
                                String: ".github/workflows/**" [55,77]
                            STRING [78,90]
                                String: "appinfo/**" [78,90]
                            STRING [91,99]
                                String: "lib/**" [91,99]
                            STRING [100,114]
                                String: "templates/**" [100,114]
                            STRING [115,125]
                                String: "tests/**" [115,125]
                            STRING [126,137]
                                String: "vendor/**" [126,137]
                            STRING [138,153]
                                String: "vendor-bin/**" [138,153]
                            STRING [154,178]
                                String: ".php-cs-fixer.dist.php" [154,178]
                            STRING [179,194]
                                String: "composer.json" [179,194]
                            STRING [195,210]
                                String: "composer.lock" [195,210]
            FIELD [213,260]
                String: "push" [213,219]
                OBJECT [220,260]
                    FIELD [221,259]
                        String: "branches" [221,231]
                        ARRAY [232,259]
                            STRING [233,239]
                                String: "main" [233,239]
                            STRING [240,248]
                                String: "master" [240,248]
                            STRING [249,258]
                                String: "stable*" [249,258]
    FIELD [262,295]
        String: "permissions" [262,275]
        OBJECT [276,295]
            FIELD [277,294]
                String: "contents" [277,287]
                STRING [288,294]
                    String: "read" [288,294]
    FIELD [296,401]
        String: "concurrency" [296,309]
        OBJECT [310,401]
            FIELD [311,374]
                String: "group" [311,318]
                STRING [319,374]
                    String: "phpunit-mysql-${{ github.head_ref || github.run_id }}" [319,374]
            FIELD [375,400]
                String: "cancel-in-progress" [375,395]
                TRUE [396,400]
    FIELD [402,4083]
        String: "jobs" [402,408]
        OBJECT [409,4083]
            FIELD [410,3828]
                String: "phpunit-mysql" [410,425]
                OBJECT [426,3828]
                    FIELD [427,452]
                        String: "runs-on" [427,436]
                        STRING [437,452]
                            String: "ubuntu-latest" [437,452]
                    FIELD [453,540]
                        String: "strategy" [453,463]
                        OBJECT [464,540]
                            FIELD [465,539]
                                String: "matrix" [465,473]
                                OBJECT [474,539]
                                    FIELD [475,509]
                                        String: "php-versions" [475,489]
                                        ARRAY [490,509]
                                            STRING [491,496]
                                                String: "8.0" [491,496]
                                            STRING [497,502]
                                                String: "8.1" [497,502]
                                            STRING [503,508]
                                                String: "8.2" [503,508]
                                    FIELD [510,538]
                                        String: "server-versions" [510,527]
                                        ARRAY [528,538]
                                            STRING [529,537]
                                                String: "master" [529,537]
                    FIELD [541,810]
                        String: "services" [541,551]
                        OBJECT [552,810]
                            FIELD [553,809]
                                String: "mysql" [553,560]
                                OBJECT [561,809]
                                    FIELD [562,632]
                                        String: "image" [562,569]
                                        STRING [570,632]
                                            String: "ghcr.io/nextcloud/continuous-integration-mariadb-10.6:latest" [570,632]
                                    FIELD [633,658]
                                        String: "ports" [633,640]
                                        ARRAY [641,658]
                                            STRING [642,657]
                                                String: "4444:3306/tcp" [642,657]
                                    FIELD [659,703]
                                        String: "env" [659,664]
                                        OBJECT [665,703]
                                            FIELD [666,702]
                                                String: "MYSQL_ROOT_PASSWORD" [666,687]
                                                STRING [688,702]
                                                    String: "rootpassword" [688,702]
                                    FIELD [704,808]
                                        String: "options" [704,713]
                                        STRING [714,808]
                                            String: "--health-cmd=\"mysqladmin ping\" --health-interval 5s --health-timeout 2s --health-retries 5" [714,808]
                    FIELD [811,3827]
                        String: "steps" [811,818]
                        ARRAY [819,3827]
                            OBJECT [820,933]
                                FIELD [821,841]
                                    String: "name" [821,827]
                                    STRING [828,841]
                                        String: "Set app env" [828,841]
                                FIELD [842,932]
                                    String: "run" [842,847]
                                    STRING [848,932]
                                        String: "# Split and keep last\necho \"APP_NAME=${GITHUB_REPOSITORY##*/}\" >> $GITHUB_ENV\n" [848,932]
                            OBJECT [934,1206]
                                FIELD [935,982]
                                    String: "name" [935,941]
                                    STRING [942,982]
                                        String: "Enable ONLY_FULL_GROUP_BY MySQL option" [942,982]
                                FIELD [983,1205]
                                    String: "run" [983,988]
                                    STRING [989,1205]
                                        String: "echo \"SET GLOBAL sql_mode=(SELECT CONCAT(@@sql_mode,',ONLY_FULL_GROUP_BY'));\" | mysql -h 127.0.0.1 -P 4444 -u root -prootpassword\necho \"SELECT @@sql_mode;\" | mysql -h 127.0.0.1 -P 4444 -u root -prootpassword\n" [989,1205]
                            OBJECT [1207,1397]
                                FIELD [1208,1232]
                                    String: "name" [1208,1214]
                                    STRING [1215,1232]
                                        String: "Checkout server" [1215,1232]
                                FIELD [1233,1299]
                                    String: "uses" [1233,1239]
                                    STRING [1240,1299]
                                        String: "actions/checkout@8e5e7e5ab8b370d6c329ec480221332ada57f0ab" [1240,1299]
                                FIELD [1300,1396]
                                    String: "with" [1300,1306]
                                    OBJECT [1307,1396]
                                        FIELD [1308,1325]
                                            String: "submodules" [1308,1320]
                                            TRUE [1321,1325]
                                        FIELD [1326,1357]
                                            String: "repository" [1326,1338]
                                            STRING [1339,1357]
                                                String: "nextcloud/server" [1339,1357]
                                        FIELD [1358,1395]
                                            String: "ref" [1358,1363]
                                            STRING [1364,1395]
                                                String: "${{ matrix.server-versions }}" [1364,1395]
                            OBJECT [1398,1531]
                                FIELD [1399,1420]
                                    String: "name" [1399,1405]
                                    STRING [1406,1420]
                                        String: "Checkout app" [1406,1420]
                                FIELD [1421,1487]
                                    String: "uses" [1421,1427]
                                    STRING [1428,1487]
                                        String: "actions/checkout@8e5e7e5ab8b370d6c329ec480221332ada57f0ab" [1428,1487]
                                FIELD [1488,1530]
                                    String: "with" [1488,1494]
                                    OBJECT [1495,1530]
                                        FIELD [1496,1529]
                                            String: "path" [1496,1502]
                                            STRING [1503,1529]
                                                String: "apps/${{ env.APP_NAME }}" [1503,1529]
                            OBJECT [1532,1983]
                                FIELD [1533,1579]
                                    String: "name" [1533,1539]
                                    STRING [1540,1579]
                                        String: "Set up php ${{ matrix.php-versions }}" [1540,1579]
                                FIELD [1580,1652]
                                    String: "uses" [1580,1586]
                                    STRING [1587,1652]
                                        String: "shivammathur/setup-php@c5fc0d8281aba02c7fda07d3a70cc5371548067d" [1587,1652]
                                FIELD [1653,1929]
                                    String: "with" [1653,1659]
                                    OBJECT [1660,1929]
                                        FIELD [1661,1703]
                                            String: "php-version" [1661,1674]
                                            STRING [1675,1703]
                                                String: "${{ matrix.php-versions }}" [1675,1703]
                                        FIELD [1704,1885]
                                            String: "extensions" [1704,1716]
                                            STRING [1717,1885]
                                                String: "bz2, ctype, curl, dom, fileinfo, gd, iconv, intl, json, libxml, mbstring, openssl, pcntl, posix, session, simplexml, xmlreader, xmlwriter, zip, zlib, mysql, pdo_mysql" [1717,1885]
                                        FIELD [1886,1903]
                                            String: "coverage" [1886,1896]
                                            STRING [1897,1903]
                                                String: "none" [1897,1903]
                                        FIELD [1904,1928]
                                            String: "ini-file" [1904,1914]
                                            STRING [1915,1928]
                                                String: "development" [1915,1928]
                                FIELD [1930,1982]
                                    String: "env" [1930,1935]
                                    OBJECT [1936,1982]
                                        FIELD [1937,1981]
                                            String: "GITHUB_TOKEN" [1937,1951]
                                            STRING [1952,1981]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [1952,1981]
                            OBJECT [1984,2184]
                                FIELD [1985,2023]
                                    String: "name" [1985,1991]
                                    STRING [1992,2023]
                                        String: "Check composer file existence" [1992,2023]
                                FIELD [2024,2045]
                                    String: "id" [2024,2028]
                                    STRING [2029,2045]
                                        String: "check_composer" [2029,2045]
                                FIELD [2046,2125]
                                    String: "uses" [2046,2052]
                                    STRING [2053,2125]
                                        String: "andstor/file-existence-action@20b4d2e596410855db8f9ca21e96fbe18e12930b" [2053,2125]
                                FIELD [2126,2183]
                                    String: "with" [2126,2132]
                                    OBJECT [2133,2183]
                                        FIELD [2134,2182]
                                            String: "files" [2134,2141]
                                            STRING [2142,2182]
                                                String: "apps/${{ env.APP_NAME }}/composer.json" [2142,2182]
                            OBJECT [2185,2340]
                                FIELD [2186,2214]
                                    String: "name" [2186,2192]
                                    STRING [2193,2214]
                                        String: "Set up dependencies" [2193,2214]
                                FIELD [2215,2273]
                                    String: "if" [2215,2219]
                                    STRING [2220,2273]
                                        String: "steps.check_composer.outputs.files_exists == 'true'" [2220,2273]
                                FIELD [2274,2320]
                                    String: "working-directory" [2274,2293]
                                    STRING [2294,2320]
                                        String: "apps/${{ env.APP_NAME }}" [2294,2320]
                                FIELD [2321,2339]
                                    String: "run" [2321,2326]
                                    STRING [2327,2339]
                                        String: "composer i" [2327,2339]
                            OBJECT [2341,2669]
                                FIELD [2342,2367]
                                    String: "name" [2342,2348]
                                    STRING [2349,2367]
                                        String: "Set up Nextcloud" [2349,2367]
                                FIELD [2368,2390]
                                    String: "env" [2368,2373]
                                    OBJECT [2374,2390]
                                        FIELD [2375,2389]
                                            String: "DB_PORT" [2375,2384]
                                            NUMBER [2385,2389]
                                                Number: 4444 [2385,2389]
                                FIELD [2391,2668]
                                    String: "run" [2391,2396]
                                    STRING [2397,2668]
                                        String: "mkdir data\n./occ maintenance:install --verbose --database=mysql --database-name=nextcloud --database-host=127.0.0.1 --database-port=$DB_PORT --database-user=root --database-pass=rootpassword --admin-user admin --admin-pass admin\n./occ app:enable ${{ env.APP_NAME }}\n" [2397,2668]
                            OBJECT [2670,2877]
                                FIELD [2671,2711]
                                    String: "name" [2671,2677]
                                    STRING [2678,2711]
                                        String: "Check PHPUnit script is defined" [2678,2711]
                                FIELD [2712,2732]
                                    String: "id" [2712,2716]
                                    STRING [2717,2732]
                                        String: "check_phpunit" [2717,2732]
                                FIELD [2733,2757]
                                    String: "continue-on-error" [2733,2752]
                                    TRUE [2753,2757]
                                FIELD [2758,2804]
                                    String: "working-directory" [2758,2777]
                                    STRING [2778,2804]
                                        String: "apps/${{ env.APP_NAME }}" [2778,2804]
                                FIELD [2805,2876]
                                    String: "run" [2805,2810]
                                    STRING [2811,2876]
                                        String: "composer run --list | grep \"^  test:unit \" | wc -l | grep 1\n" [2811,2876]
                            OBJECT [2878,3022]
                                FIELD [2879,2895]
                                    String: "name" [2879,2885]
                                    STRING [2886,2895]
                                        String: "PHPUnit" [2886,2895]
                                FIELD [2896,2943]
                                    String: "if" [2896,2900]
                                    STRING [2901,2943]
                                        String: "steps.check_phpunit.outcome == 'success'" [2901,2943]
                                FIELD [2944,2990]
                                    String: "working-directory" [2944,2963]
                                    STRING [2964,2990]
                                        String: "apps/${{ env.APP_NAME }}" [2964,2990]
                                FIELD [2991,3021]
                                    String: "run" [2991,2996]
                                    STRING [2997,3021]
                                        String: "composer run test:unit" [2997,3021]
                            OBJECT [3023,3253]
                                FIELD [3024,3076]
                                    String: "name" [3024,3030]
                                    STRING [3031,3076]
                                        String: "Check PHPUnit integration script is defined" [3031,3076]
                                FIELD [3077,3101]
                                    String: "id" [3077,3081]
                                    STRING [3082,3101]
                                        String: "check_integration" [3082,3101]
                                FIELD [3102,3126]
                                    String: "continue-on-error" [3102,3121]
                                    TRUE [3122,3126]
                                FIELD [3127,3173]
                                    String: "working-directory" [3127,3146]
                                    STRING [3147,3173]
                                        String: "apps/${{ env.APP_NAME }}" [3147,3173]
                                FIELD [3174,3252]
                                    String: "run" [3174,3179]
                                    STRING [3180,3252]
                                        String: "composer run --list | grep \"^  test:integration \" | wc -l | grep 1\n" [3180,3252]
                            OBJECT [3254,3362]
                                FIELD [3255,3277]
                                    String: "name" [3255,3261]
                                    STRING [3262,3277]
                                        String: "Run Nextcloud" [3262,3277]
                                FIELD [3278,3329]
                                    String: "if" [3278,3282]
                                    STRING [3283,3329]
                                        String: "steps.check_integration.outcome == 'success'" [3283,3329]
                                FIELD [3330,3361]
                                    String: "run" [3330,3335]
                                    STRING [3336,3361]
                                        String: "php -S localhost:8080 &" [3336,3361]
                            OBJECT [3363,3530]
                                FIELD [3364,3392]
                                    String: "name" [3364,3370]
                                    STRING [3371,3392]
                                        String: "PHPUnit integration" [3371,3392]
                                FIELD [3393,3444]
                                    String: "if" [3393,3397]
                                    STRING [3398,3444]
                                        String: "steps.check_integration.outcome == 'success'" [3398,3444]
                                FIELD [3445,3491]
                                    String: "working-directory" [3445,3464]
                                    STRING [3465,3491]
                                        String: "apps/${{ env.APP_NAME }}" [3465,3491]
                                FIELD [3492,3529]
                                    String: "run" [3492,3497]
                                    STRING [3498,3529]
                                        String: "composer run test:integration" [3498,3529]
                            OBJECT [3531,3601]
                                FIELD [3532,3551]
                                    String: "name" [3532,3538]
                                    STRING [3539,3551]
                                        String: "Print logs" [3539,3551]
                                FIELD [3552,3567]
                                    String: "if" [3552,3556]
                                    STRING [3557,3567]
                                        String: "always()" [3557,3567]
                                FIELD [3568,3600]
                                    String: "run" [3568,3573]
                                    STRING [3574,3600]
                                        String: "cat data/nextcloud.log\n" [3574,3600]
                            OBJECT [3602,3826]
                                FIELD [3603,3619]
                                    String: "name" [3603,3609]
                                    STRING [3610,3619]
                                        String: "Skipped" [3610,3619]
                                FIELD [3620,3715]
                                    String: "if" [3620,3624]
                                    STRING [3625,3715]
                                        String: "steps.check_phpunit.outcome == 'failure' && steps.check_integration.outcome == 'failure'" [3625,3715]
                                FIELD [3716,3825]
                                    String: "run" [3716,3721]
                                    STRING [3722,3825]
                                        String: "echo 'Neither PHPUnit nor PHPUnit integration tests are specified in composer.json scripts'\nexit 1\n" [3722,3825]
            FIELD [3829,4082]
                String: "summary" [3829,3838]
                OBJECT [3839,4082]
                    FIELD [3840,3873]
                        String: "permissions" [3840,3853]
                        OBJECT [3854,3873]
                            FIELD [3855,3872]
                                String: "contents" [3855,3865]
                                STRING [3866,3872]
                                    String: "none" [3866,3872]
                    FIELD [3874,3899]
                        String: "runs-on" [3874,3883]
                        STRING [3884,3899]
                            String: "ubuntu-latest" [3884,3899]
                    FIELD [3900,3923]
                        String: "needs" [3900,3907]
                        STRING [3908,3923]
                            String: "phpunit-mysql" [3908,3923]
                    FIELD [3924,3939]
                        String: "if" [3924,3928]
                        STRING [3929,3939]
                            String: "always()" [3929,3939]
                    FIELD [3940,3970]
                        String: "name" [3940,3946]
                        STRING [3947,3970]
                            String: "phpunit-mysql-summary" [3947,3970]
                    FIELD [3971,4081]
                        String: "steps" [3971,3978]
                        ARRAY [3979,4081]
                            OBJECT [3980,4080]
                                FIELD [3981,4004]
                                    String: "name" [3981,3987]
                                    STRING [3988,4004]
                                        String: "Summary status" [3988,4004]
                                FIELD [4005,4079]
                                    String: "run" [4005,4010]
                                    STRING [4011,4079]
                                        String: "if ${{ needs.phpunit-mysql.result != 'success' }}; then exit 1; fi" [4011,4079]