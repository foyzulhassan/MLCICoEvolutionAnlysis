OBJECT [0,4206]
    FIELD [1,28]
        String: "name" [1,7]
        STRING [8,28]
            String: "Test package build" [8,28]
    FIELD [29,581]
        String: "on" [29,33]
        OBJECT [34,581]
            FIELD [35,65]
                String: "push" [35,41]
                OBJECT [42,65]
                    FIELD [43,64]
                        String: "branches" [43,53]
                        ARRAY [54,64]
                            STRING [55,63]
                                String: "master" [55,63]
            FIELD [66,104]
                String: "pull_request" [66,80]
                OBJECT [81,104]
                    FIELD [82,103]
                        String: "branches" [82,92]
                        ARRAY [93,103]
                            STRING [94,102]
                                String: "master" [94,102]
            FIELD [105,580]
                String: "workflow_dispatch" [105,124]
                OBJECT [125,580]
                    FIELD [126,579]
                        String: "inputs" [126,134]
                        OBJECT [135,579]
                            FIELD [136,321]
                                String: "repository" [136,148]
                                OBJECT [149,321]
                                    FIELD [150,290]
                                        String: "description" [150,163]
                                        STRING [164,290]
                                            String: "[Optional] Repository name with owner. For example, mlflow/mlflow.\n Defaults to the repository that triggered a workflow.\n" [164,290]
                                    FIELD [291,307]
                                        String: "required" [291,301]
                                        FALSE [302,307]
                                    FIELD [308,320]
                                        String: "default" [308,317]
                                        STRING [318,320]
                                            String: "" [318,320]
                            FIELD [322,578]
                                String: "ref" [322,327]
                                OBJECT [328,578]
                                    FIELD [329,547]
                                        String: "description" [329,342]
                                        STRING [343,547]
                                            String: "[Optional] The branch, tag or SHA to checkout. When checking out the repository that\n triggered a workflow, this defaults to the reference or SHA for that event. Otherwise,\n uses the default branch.\n" [343,547]
                                    FIELD [548,564]
                                        String: "required" [548,558]
                                        FALSE [559,564]
                                    FIELD [565,577]
                                        String: "default" [565,574]
                                        STRING [575,577]
                                            String: "" [575,577]
    FIELD [582,732]
        String: "concurrency" [582,595]
        OBJECT [596,732]
            FIELD [597,705]
                String: "group" [597,604]
                STRING [605,705]
                    String: "${{ github.workflow }}-${{ github.ref == 'refs/heads/master' && github.run_number || github.ref }}" [605,705]
            FIELD [706,731]
                String: "cancel-in-progress" [706,726]
                TRUE [727,731]
    FIELD [733,805]
        String: "defaults" [733,743]
        OBJECT [744,805]
            FIELD [745,804]
                String: "run" [745,750]
                OBJECT [751,804]
                    FIELD [752,803]
                        String: "shell" [752,759]
                        STRING [760,803]
                            String: "bash --noprofile --norc -exo pipefail {0}" [760,803]
    FIELD [806,4205]
        String: "jobs" [806,812]
        OBJECT [813,4205]
            FIELD [814,4204]
                String: "build" [814,821]
                OBJECT [822,4204]
                    FIELD [823,848]
                        String: "runs-on" [823,832]
                        STRING [833,848]
                            String: "ubuntu-latest" [833,848]
                    FIELD [849,897]
                        String: "strategy" [849,859]
                        OBJECT [860,897]
                            FIELD [861,896]
                                String: "matrix" [861,869]
                                OBJECT [870,896]
                                    FIELD [871,895]
                                        String: "type" [871,877]
                                        ARRAY [878,895]
                                            STRING [879,885]
                                                String: "full" [879,885]
                                            STRING [886,894]
                                                String: "skinny" [886,894]
                    FIELD [898,4203]
                        String: "steps" [898,905]
                        ARRAY [906,4203]
                            OBJECT [907,1063]
                                FIELD [908,936]
                                    String: "uses" [908,914]
                                    STRING [915,936]
                                        String: "actions/checkout@v3" [915,936]
                                FIELD [937,1062]
                                    String: "with" [937,943]
                                    OBJECT [944,1062]
                                        FIELD [945,969]
                                            String: "submodules" [945,957]
                                            STRING [958,969]
                                                String: "recursive" [958,969]
                                        FIELD [970,1022]
                                            String: "repository" [970,982]
                                            STRING [983,1022]
                                                String: "${{ github.event.inputs.repository }}" [983,1022]
                                        FIELD [1023,1061]
                                            String: "ref" [1023,1028]
                                            STRING [1029,1061]
                                                String: "${{ github.event.inputs.ref }}" [1029,1061]
                            OBJECT [1064,1105]
                                FIELD [1065,1104]
                                    String: "uses" [1065,1071]
                                    STRING [1072,1104]
                                        String: "./.github/actions/setup-python" [1072,1104]
                            OBJECT [1106,1256]
                                FIELD [1107,1164]
                                    String: "name" [1107,1113]
                                    STRING [1114,1164]
                                        String: "Set environment variable for skinny client build" [1114,1164]
                                FIELD [1165,1202]
                                    String: "if" [1165,1169]
                                    STRING [1170,1202]
                                        String: "${{ matrix.type == 'skinny' }}" [1170,1202]
                                FIELD [1203,1255]
                                    String: "run" [1203,1208]
                                    STRING [1209,1255]
                                        String: "echo \"MLFLOW_SKINNY=true\" >> $GITHUB_ENV\n" [1209,1255]
                            OBJECT [1257,1530]
                                FIELD [1258,1289]
                                    String: "name" [1258,1264]
                                    STRING [1265,1289]
                                        String: "Create dummy MLflow UI" [1265,1289]
                                FIELD [1290,1529]
                                    String: "run" [1290,1295]
                                    STRING [1296,1529]
                                        String: "mkdir -p mlflow/server/js/build\necho '\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\">\n    <title>MLflow</title>\n  </head>\n<body>\n  MLflow\n</body>\n</html>\n' > mlflow/server/js/build/index.html\n" [1296,1529]
                            OBJECT [1531,1596]
                                FIELD [1532,1561]
                                    String: "name" [1532,1538]
                                    STRING [1539,1561]
                                        String: "Install dependencies" [1539,1561]
                                FIELD [1562,1595]
                                    String: "run" [1562,1567]
                                    STRING [1568,1595]
                                        String: "pip install wheel twine\n" [1568,1595]
                            OBJECT [1597,2204]
                                FIELD [1598,1631]
                                    String: "name" [1598,1604]
                                    STRING [1605,1631]
                                        String: "Build distribution files" [1605,1631]
                                FIELD [1632,1649]
                                    String: "id" [1632,1636]
                                    STRING [1637,1649]
                                        String: "build-dist" [1637,1649]
                                FIELD [1650,2203]
                                    String: "run" [1650,1655]
                                    STRING [1656,2203]
                                        String: "# Build distribution files\npython setup.py sdist bdist_wheel\n\n# List distribution files and check their file sizes\nls -lh dist\n\n# Set step outputs\nsdist_path=$(find dist -type f -name \"*.tar.gz\")\nwheel_path=$(find dist -type f -name \"*.whl\")\nwheel_name=$(basename $wheel_path)\nwheel_size=$(stat -c %s $wheel_path)\necho \"::set-output name=sdist-path::${sdist_path}\"\necho \"::set-output name=wheel-path::${wheel_path}\"\necho \"::set-output name=wheel-name::${wheel_name}\"\necho \"::set-output name=wheel-size::${wheel_size}\"\n" [1656,2203]
                            OBJECT [2205,2305]
                                FIELD [2206,2230]
                                    String: "name" [2206,2212]
                                    STRING [2213,2230]
                                        String: "Run twine check" [2213,2230]
                                FIELD [2231,2304]
                                    String: "run" [2231,2236]
                                    STRING [2237,2304]
                                        String: "twine check --strict ${{ steps.build-dist.outputs.wheel-path }}\n" [2237,2304]
                            OBJECT [2306,2468]
                                FIELD [2307,2346]
                                    String: "name" [2307,2313]
                                    STRING [2314,2346]
                                        String: "Test installation from tarball" [2314,2346]
                                FIELD [2347,2467]
                                    String: "run" [2347,2352]
                                    STRING [2353,2467]
                                        String: "pip install ${{ steps.build-dist.outputs.sdist-path }}\npython -c \"import mlflow; print(mlflow.__version__)\"\n" [2353,2467]
                            OBJECT [2469,2647]
                                FIELD [2470,2507]
                                    String: "name" [2470,2476]
                                    STRING [2477,2507]
                                        String: "Test installation from wheel" [2477,2507]
                                FIELD [2508,2646]
                                    String: "run" [2508,2513]
                                    STRING [2514,2646]
                                        String: "pip install --force-reinstall ${{ steps.build-dist.outputs.wheel-path }}\npython -c \"import mlflow; print(mlflow.__version__)\"\n" [2514,2646]
                            OBJECT [2648,2854]
                                FIELD [2649,2669]
                                    String: "name" [2649,2655]
                                    STRING [2656,2669]
                                        String: "Store wheel" [2656,2669]
                                FIELD [2670,2705]
                                    String: "uses" [2670,2676]
                                    STRING [2677,2705]
                                        String: "actions/upload-artifact@v3" [2677,2705]
                                FIELD [2706,2740]
                                    String: "if" [2706,2710]
                                    STRING [2711,2740]
                                        String: "github.event_name == 'push'" [2711,2740]
                                FIELD [2741,2853]
                                    String: "with" [2741,2747]
                                    OBJECT [2748,2853]
                                        FIELD [2749,2800]
                                            String: "name" [2749,2755]
                                            STRING [2756,2800]
                                                String: "${{ steps.build-dist.outputs.wheel-name }}" [2756,2800]
                                        FIELD [2801,2852]
                                            String: "path" [2801,2807]
                                            STRING [2808,2852]
                                                String: "${{ steps.build-dist.outputs.wheel-path }}" [2808,2852]
                            OBJECT [2855,4202]
                                FIELD [2856,2882]
                                    String: "name" [2856,2862]
                                    STRING [2863,2882]
                                        String: "Remove old wheels" [2863,2882]
                                FIELD [2883,2916]
                                    String: "uses" [2883,2889]
                                    STRING [2890,2916]
                                        String: "actions/github-script@v3" [2890,2916]
                                FIELD [2917,2951]
                                    String: "if" [2917,2921]
                                    STRING [2922,2951]
                                        String: "github.event_name == 'push'" [2922,2951]
                                FIELD [2952,3017]
                                    String: "env" [2952,2957]
                                    OBJECT [2958,3017]
                                        FIELD [2959,3016]
                                            String: "WHEEL_SIZE" [2959,2971]
                                            STRING [2972,3016]
                                                String: "${{ steps.build-dist.outputs.wheel-size }}" [2972,3016]
                                FIELD [3018,4201]
                                    String: "with" [3018,3024]
                                    OBJECT [3025,4201]
                                        FIELD [3026,3070]
                                            String: "github-token" [3026,3040]
                                            STRING [3041,3070]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [3041,3070]
                                        FIELD [3071,4200]
                                            String: "script" [3071,3079]
                                            STRING [3080,4200]
                                                String: "const { owner, repo } = context.repo;\n\n// For some reason, the newly-uploaded wheel in the previous step is not included.\nconst artifactsResp = await github.actions.listArtifactsForRepo({\n  owner,\n  repo,\n});\nconst wheels = artifactsResp.data.artifacts.filter(({ name }) => name.endsWith(\".whl\"));\n\n// The storage usage limit for a free github account is up to 500 MB. See the page below for details:\n// https://docs.github.com/en/github/setting-up-and-managing-billing-and-payments-on-github/about-billing-for-github-actions\nMAX_SIZE_IN_BYTES = 300_000_000; // 300 MB\n\nlet index = 0;\nlet sum = parseInt(process.env.WHEEL_SIZE);  // include the newly-uploaded wheel\nfor (const [idx, { size_in_bytes }] of wheels.entries()) {\n  index = idx;\n  sum += size_in_bytes;\n  if (sum > MAX_SIZE_IN_BYTES) {\n    break;\n  }\n}\n\nif (sum <= MAX_SIZE_IN_BYTES) {\n  return;\n}\n\n// Delete old wheels\nconst promises = wheels.slice(index).map(({ id: artifact_id }) =>\n  github.actions.deleteArtifact({\n    owner,\n    repo,\n    artifact_id,\n  })\n);\nPromise.all(promises).then(data => console.log(data));" [3080,4200]