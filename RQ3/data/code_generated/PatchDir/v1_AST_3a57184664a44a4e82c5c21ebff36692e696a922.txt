OBJECT [0,5651]
    FIELD [1,24]
        String: "name" [1,7]
        STRING [8,24]
            String: "OctoBot-Docker" [8,24]
    FIELD [25,101]
        String: "on" [25,29]
        OBJECT [30,101]
            FIELD [31,80]
                String: "push" [31,37]
                OBJECT [38,80]
                    FIELD [39,66]
                        String: "branches" [39,49]
                        ARRAY [50,66]
                            STRING [51,59]
                                String: "master" [51,59]
                            STRING [60,65]
                                String: "dev" [60,65]
                    FIELD [67,79]
                        String: "tags" [67,73]
                        ARRAY [74,79]
                            STRING [75,78]
                                String: "*" [75,78]
            FIELD [81,100]
                String: "pull_request" [81,95]
                NULL [96,100]
    FIELD [102,5650]
        String: "jobs" [102,108]
        OBJECT [109,5650]
            FIELD [110,374]
                String: "lint" [110,116]
                OBJECT [117,374]
                    FIELD [118,156]
                        String: "name" [118,124]
                        STRING [125,156]
                            String: "ubuntu-latest - Docker - lint" [125,156]
                    FIELD [157,182]
                        String: "runs-on" [157,166]
                        STRING [167,182]
                            String: "ubuntu-latest" [167,182]
                    FIELD [183,373]
                        String: "steps" [183,190]
                        ARRAY [191,373]
                            OBJECT [192,222]
                                FIELD [193,221]
                                    String: "uses" [193,199]
                                    STRING [200,221]
                                        String: "actions/checkout@v2" [200,221]
                            OBJECT [223,372]
                                FIELD [224,245]
                                    String: "name" [224,230]
                                    STRING [231,245]
                                        String: "Run hadolint" [231,245]
                                FIELD [246,283]
                                    String: "uses" [246,252]
                                    STRING [253,283]
                                        String: "reviewdog/action-hadolint@v1" [253,283]
                                FIELD [284,371]
                                    String: "with" [284,290]
                                    OBJECT [291,371]
                                        FIELD [292,336]
                                            String: "github_token" [292,306]
                                            STRING [307,336]
                                                String: "${{ secrets.github_token }}" [307,336]
                                        FIELD [337,370]
                                            String: "hadolint_ignore" [337,354]
                                            STRING [355,370]
                                                String: "DL3013 DL3008" [355,370]
            FIELD [375,5380]
                String: "build_test_push" [375,392]
                OBJECT [393,5380]
                    FIELD [394,408]
                        String: "needs" [394,401]
                        STRING [402,408]
                            String: "lint" [402,408]
                    FIELD [409,462]
                        String: "name" [409,415]
                        STRING [416,462]
                            String: "ubuntu-latest - Docker - build & test & push" [416,462]
                    FIELD [463,488]
                        String: "runs-on" [463,472]
                        STRING [473,488]
                            String: "ubuntu-latest" [473,488]
                    FIELD [489,5379]
                        String: "steps" [489,496]
                        ARRAY [497,5379]
                            OBJECT [498,528]
                                FIELD [499,527]
                                    String: "uses" [499,505]
                                    STRING [506,527]
                                        String: "actions/checkout@v2" [506,527]
                            OBJECT [529,1047]
                                FIELD [530,564]
                                    String: "name" [530,536]
                                    STRING [537,564]
                                        String: "Set Environment Variables" [537,564]
                                FIELD [565,1046]
                                    String: "run" [565,570]
                                    STRING [571,1046]
                                        String: "OWNER=\"$(echo \"${{ github.repository_owner }}\" | tr '[:upper:]' '[:lower:]' | tr -d '-')\"\nIMG=octobot\necho \"VERSION=${GITHUB_REF##*/}\" >> $GITHUB_ENV\necho \"IMAGE=${OWNER}/${IMG}\" >> $GITHUB_ENV\necho \"LATEST=latest\" >> $GITHUB_ENV\necho \"STABLE=stable\" >> $GITHUB_ENV\necho \"TEST=test\" >> $GITHUB_ENV\necho \"CONTAINER_NAME=octobot\" >> $GITHUB_ENV\necho \"CHECK_TENTACLE_CONTAINER_TIME=10\" >> $GITHUB_ENV\necho \"WAIT_CONTAINER_TIME=80\" >> $GITHUB_ENV\n" [571,1046]
                            OBJECT [1048,1408]
                                FIELD [1049,1076]
                                    String: "name" [1049,1055]
                                    STRING [1056,1076]
                                        String: "Wait for tentacles" [1056,1076]
                                FIELD [1077,1150]
                                    String: "if" [1077,1081]
                                    STRING [1082,1150]
                                        String: "github.event_name == 'push' && startsWith(github.ref, 'refs/tags')" [1082,1150]
                                FIELD [1151,1201]
                                    String: "uses" [1151,1157]
                                    STRING [1158,1201]
                                        String: "fountainhead/action-wait-for-check@v1.0.0" [1158,1201]
                                FIELD [1202,1227]
                                    String: "id" [1202,1206]
                                    STRING [1207,1227]
                                        String: "wait-for-tentacles" [1207,1227]
                                FIELD [1228,1407]
                                    String: "with" [1228,1234]
                                    OBJECT [1235,1407]
                                        FIELD [1236,1271]
                                            String: "token" [1236,1243]
                                            STRING [1244,1271]
                                                String: "${{ secrets.AUTH_TOKEN }}" [1244,1271]
                                        FIELD [1272,1331]
                                            String: "checkName" [1272,1283]
                                            STRING [1284,1331]
                                                String: "ubuntu-latest - Python 3.8 - upload tentacles" [1284,1331]
                                        FIELD [1332,1357]
                                            String: "ref" [1332,1337]
                                            STRING [1338,1357]
                                                String: "${{ github.ref }}" [1338,1357]
                                        FIELD [1358,1384]
                                            String: "repo" [1358,1364]
                                            STRING [1365,1384]
                                                String: "OctoBot-Tentacles" [1365,1384]
                                        FIELD [1385,1406]
                                            String: "timeoutSeconds" [1385,1401]
                                            NUMBER [1402,1406]
                                                Number: 3600 [1402,1406]
                            OBJECT [1409,1603]
                                FIELD [1410,1453]
                                    String: "name" [1410,1416]
                                    STRING [1417,1453]
                                        String: "Trigger fail when Tentacles failed" [1417,1453]
                                FIELD [1454,1587]
                                    String: "if" [1454,1458]
                                    STRING [1459,1587]
                                        String: "github.event_name == 'push' && startsWith(github.ref, 'refs/tags') && steps.wait-for-tentacles.outputs.conclusion == 'failure'" [1459,1587]
                                FIELD [1588,1602]
                                    String: "run" [1588,1593]
                                    STRING [1594,1602]
                                        String: "exit 1" [1594,1602]
                            OBJECT [1604,1663]
                                FIELD [1605,1625]
                                    String: "name" [1605,1611]
                                    STRING [1612,1625]
                                        String: "Set up QEMU" [1612,1625]
                                FIELD [1626,1662]
                                    String: "uses" [1626,1632]
                                    STRING [1633,1662]
                                        String: "docker/setup-qemu-action@v1" [1633,1662]
                            OBJECT [1664,1734]
                                FIELD [1665,1694]
                                    String: "name" [1665,1671]
                                    STRING [1672,1694]
                                        String: "Set up Docker Buildx" [1672,1694]
                                FIELD [1695,1733]
                                    String: "uses" [1695,1701]
                                    STRING [1702,1733]
                                        String: "docker/setup-buildx-action@v1" [1702,1733]
                            OBJECT [1735,1922]
                                FIELD [1736,1764]
                                    String: "name" [1736,1742]
                                    STRING [1743,1764]
                                        String: "Cache Docker layers" [1743,1764]
                                FIELD [1765,1790]
                                    String: "uses" [1765,1771]
                                    STRING [1772,1790]
                                        String: "actions/cache@v2" [1772,1790]
                                FIELD [1791,1921]
                                    String: "with" [1791,1797]
                                    OBJECT [1798,1921]
                                        FIELD [1799,1826]
                                            String: "path" [1799,1805]
                                            STRING [1806,1826]
                                                String: "/tmp/.buildx-cache" [1806,1826]
                                        FIELD [1827,1876]
                                            String: "key" [1827,1832]
                                            STRING [1833,1876]
                                                String: "${{ runner.os }}-buildx-${{ github.sha }}" [1833,1876]
                                        FIELD [1877,1920]
                                            String: "restore-keys" [1877,1891]
                                            STRING [1892,1920]
                                                String: "${{ runner.os }}-buildx-\n" [1892,1920]
                            OBJECT [1923,2119]
                                FIELD [1924,1951]
                                    String: "name" [1924,1930]
                                    STRING [1931,1951]
                                        String: "Login to DockerHub" [1931,1951]
                                FIELD [1952,1986]
                                    String: "if" [1952,1956]
                                    STRING [1957,1986]
                                        String: "github.event_name == 'push'" [1957,1986]
                                FIELD [1987,2018]
                                    String: "uses" [1987,1993]
                                    STRING [1994,2018]
                                        String: "docker/login-action@v1" [1994,2018]
                                FIELD [2019,2118]
                                    String: "with" [2019,2025]
                                    OBJECT [2026,2118]
                                        FIELD [2027,2073]
                                            String: "username" [2027,2037]
                                            STRING [2038,2073]
                                                String: "${{ secrets.DOCKERHUB_USERNAME }}" [2038,2073]
                                        FIELD [2074,2117]
                                            String: "password" [2074,2084]
                                            STRING [2085,2117]
                                                String: "${{ secrets.DOCKERHUB_TOKEN }}" [2085,2117]
                            OBJECT [2120,2380]
                                FIELD [2121,2154]
                                    String: "name" [2121,2127]
                                    STRING [2128,2154]
                                        String: "Wait for main build done" [2128,2154]
                                FIELD [2155,2189]
                                    String: "if" [2155,2159]
                                    STRING [2160,2189]
                                        String: "github.event_name == 'push'" [2160,2189]
                                FIELD [2190,2240]
                                    String: "uses" [2190,2196]
                                    STRING [2197,2240]
                                        String: "fountainhead/action-wait-for-check@v1.0.0" [2197,2240]
                                FIELD [2241,2267]
                                    String: "id" [2241,2245]
                                    STRING [2246,2267]
                                        String: "wait-for-main-build" [2246,2267]
                                FIELD [2268,2379]
                                    String: "with" [2268,2274]
                                    OBJECT [2275,2379]
                                        FIELD [2276,2311]
                                            String: "token" [2276,2283]
                                            STRING [2284,2311]
                                                String: "${{ secrets.AUTH_TOKEN }}" [2284,2311]
                                        FIELD [2312,2330]
                                            String: "checkName" [2312,2323]
                                            STRING [2324,2330]
                                                String: "Done" [2324,2330]
                                        FIELD [2331,2356]
                                            String: "ref" [2331,2336]
                                            STRING [2337,2356]
                                                String: "${{ github.sha }}" [2337,2356]
                                        FIELD [2357,2378]
                                            String: "timeoutSeconds" [2357,2373]
                                            NUMBER [2374,2378]
                                                Number: 3600 [2374,2378]
                            OBJECT [2381,2532]
                                FIELD [2382,2420]
                                    String: "name" [2382,2388]
                                    STRING [2389,2420]
                                        String: "Trigger fail when Main failed" [2389,2420]
                                FIELD [2421,2516]
                                    String: "if" [2421,2425]
                                    STRING [2426,2516]
                                        String: "github.event_name == 'push' && steps.wait-for-main-build.outputs.conclusion == 'failure'" [2426,2516]
                                FIELD [2517,2531]
                                    String: "run" [2517,2522]
                                    STRING [2523,2531]
                                        String: "exit 1" [2523,2531]
                            OBJECT [2533,2963]
                                FIELD [2534,2564]
                                    String: "name" [2534,2540]
                                    STRING [2541,2564]
                                        String: "Build and push latest" [2541,2564]
                                FIELD [2565,2599]
                                    String: "if" [2565,2569]
                                    STRING [2570,2599]
                                        String: "github.event_name != 'push'" [2570,2599]
                                FIELD [2600,2636]
                                    String: "uses" [2600,2606]
                                    STRING [2607,2636]
                                        String: "docker/build-push-action@v2" [2607,2636]
                                FIELD [2637,2962]
                                    String: "with" [2637,2643]
                                    OBJECT [2644,2962]
                                        FIELD [2645,2658]
                                            String: "context" [2645,2654]
                                            STRING [2655,2658]
                                                String: "." [2655,2658]
                                        FIELD [2659,2703]
                                            String: "builder" [2659,2668]
                                            STRING [2669,2703]
                                                String: "${{ steps.buildx.outputs.name }}" [2669,2703]
                                        FIELD [2704,2742]
                                            String: "platforms" [2704,2715]
                                            STRING [2716,2742]
                                                String: "linux/amd64,linux/arm/v7" [2716,2742]
                                        FIELD [2743,2754]
                                            String: "load" [2743,2749]
                                            TRUE [2750,2754]
                                        FIELD [2755,2767]
                                            String: "push" [2755,2761]
                                            FALSE [2762,2767]
                                        FIELD [2768,2811]
                                            String: "tags" [2768,2774]
                                            STRING [2775,2811]
                                                String: "${{ env.IMAGE }}:${{ env.LATEST }}" [2775,2811]
                                        FIELD [2812,2864]
                                            String: "build-args" [2812,2824]
                                            STRING [2825,2864]
                                                String: "TENTACLES_URL_TAG=${{ env.LATEST }}\n" [2825,2864]
                                        FIELD [2865,2913]
                                            String: "cache-from" [2865,2877]
                                            STRING [2878,2913]
                                                String: "type=local,src=/tmp/.buildx-cache" [2878,2913]
                                        FIELD [2914,2961]
                                            String: "cache-to" [2914,2924]
                                            STRING [2925,2961]
                                                String: "type=local,dest=/tmp/.buildx-cache" [2925,2961]
                            OBJECT [2964,3181]
                                FIELD [2965,3001]
                                    String: "name" [2965,2971]
                                    STRING [2972,3001]
                                        String: "Docker build test container" [2972,3001]
                                FIELD [3002,3036]
                                    String: "if" [3002,3006]
                                    STRING [3007,3036]
                                        String: "github.event_name != 'push'" [3007,3036]
                                FIELD [3037,3180]
                                    String: "run" [3037,3042]
                                    STRING [3043,3180]
                                        String: "docker build -f ./tests/Dockerfile --build-arg OCTOBOT_IMAGE=${{ env.IMAGE }}:${{ env.LATEST }} -t ${{ env.IMAGE }}:${{ env.TEST }} .\n" [3043,3180]
                            OBJECT [3182,3387]
                                FIELD [3183,3211]
                                    String: "name" [3183,3189]
                                    STRING [3190,3211]
                                        String: "run tests in docker" [3190,3211]
                                FIELD [3212,3246]
                                    String: "if" [3212,3216]
                                    STRING [3217,3246]
                                        String: "github.event_name != 'push'" [3217,3246]
                                FIELD [3247,3386]
                                    String: "run" [3247,3252]
                                    STRING [3253,3386]
                                        String: "docker run -i -e TENTACLES_REPOSITORY=dev-tentacles -e TENTACLES_URL_TAG=${GITHUB_HEAD_REF////_} ${{ env.IMAGE }}:${{ env.TEST }}\n" [3253,3386]
                            OBJECT [3388,4300]
                                FIELD [3389,3430]
                                    String: "name" [3389,3395]
                                    STRING [3396,3430]
                                        String: "run and check health after start" [3396,3430]
                                FIELD [3431,3465]
                                    String: "if" [3431,3435]
                                    STRING [3436,3465]
                                        String: "github.event_name != 'push'" [3436,3465]
                                FIELD [3466,4299]
                                    String: "run" [3466,3471]
                                    STRING [3472,4299]
                                        String: "echo Start OctoBot docker with branche_name tentacles package\ndocker run -id -e TENTACLES_PACKAGES_SOURCE=dev -e TENTACLES_URL_TAG=${GITHUB_HEAD_REF////_} --name ${{ env.CONTAINER_NAME }} ${{ env.IMAGE }}:${{ env.LATEST }}\nsleep ${{ env.CHECK_TENTACLE_CONTAINER_TIME }}\nif docker logs ${{ env.CONTAINER_NAME }} | grep \"octobot_tentacles_manager.api.util.tentacles_management Can't find tentacle archive at:\" ; then\n    docker rm -f ${{ env.CONTAINER_NAME }}\n    echo Restarting docker with latest tentacle package...\n    docker run -id -e TENTACLES_URL_TAG=${{ env.LATEST }} --name ${{ env.CONTAINER_NAME }} ${{ env.IMAGE }}:${{ env.LATEST }}\nfi\nsleep ${{ env.WAIT_CONTAINER_TIME }}\ndocker logs ${{ env.CONTAINER_NAME }}\ndocker inspect ${{ env.CONTAINER_NAME }} | jq '.[].State.Health.Status' | grep \"healthy\"\n" [3472,4299]
                            OBJECT [4301,4791]
                                FIELD [4302,4332]
                                    String: "name" [4302,4308]
                                    STRING [4309,4332]
                                        String: "Build and push latest" [4309,4332]
                                FIELD [4333,4441]
                                    String: "if" [4333,4337]
                                    STRING [4338,4441]
                                        String: "github.event_name == 'push' && !startsWith(github.ref, 'refs/tags') && github.ref == 'refs/heads/dev'" [4338,4441]
                                FIELD [4442,4478]
                                    String: "uses" [4442,4448]
                                    STRING [4449,4478]
                                        String: "docker/build-push-action@v2" [4449,4478]
                                FIELD [4479,4790]
                                    String: "with" [4479,4485]
                                    OBJECT [4486,4790]
                                        FIELD [4487,4500]
                                            String: "context" [4487,4496]
                                            STRING [4497,4500]
                                                String: "." [4497,4500]
                                        FIELD [4501,4545]
                                            String: "builder" [4501,4510]
                                            STRING [4511,4545]
                                                String: "${{ steps.buildx.outputs.name }}" [4511,4545]
                                        FIELD [4546,4583]
                                            String: "platforms" [4546,4557]
                                            STRING [4558,4583]
                                                String: "linux/amd64,linux/arm64" [4558,4583]
                                        FIELD [4584,4595]
                                            String: "push" [4584,4590]
                                            TRUE [4591,4595]
                                        FIELD [4596,4639]
                                            String: "tags" [4596,4602]
                                            STRING [4603,4639]
                                                String: "${{ env.IMAGE }}:${{ env.LATEST }}" [4603,4639]
                                        FIELD [4640,4692]
                                            String: "build-args" [4640,4652]
                                            STRING [4653,4692]
                                                String: "TENTACLES_URL_TAG=${{ env.LATEST }}\n" [4653,4692]
                                        FIELD [4693,4741]
                                            String: "cache-from" [4693,4705]
                                            STRING [4706,4741]
                                                String: "type=local,src=/tmp/.buildx-cache" [4706,4741]
                                        FIELD [4742,4789]
                                            String: "cache-to" [4742,4752]
                                            STRING [4753,4789]
                                                String: "type=local,dest=/tmp/.buildx-cache" [4753,4789]
                            OBJECT [4792,5291]
                                FIELD [4793,4823]
                                    String: "name" [4793,4799]
                                    STRING [4800,4823]
                                        String: "Build and push on tag" [4800,4823]
                                FIELD [4824,4897]
                                    String: "if" [4824,4828]
                                    STRING [4829,4897]
                                        String: "github.event_name == 'push' && startsWith(github.ref, 'refs/tags')" [4829,4897]
                                FIELD [4898,4934]
                                    String: "uses" [4898,4904]
                                    STRING [4905,4934]
                                        String: "docker/build-push-action@v2" [4905,4934]
                                FIELD [4935,5290]
                                    String: "with" [4935,4941]
                                    OBJECT [4942,5290]
                                        FIELD [4943,4956]
                                            String: "context" [4943,4952]
                                            STRING [4953,4956]
                                                String: "." [4953,4956]
                                        FIELD [4957,4978]
                                            String: "file" [4957,4963]
                                            STRING [4964,4978]
                                                String: "./Dockerfile" [4964,4978]
                                        FIELD [4979,5023]
                                            String: "builder" [4979,4988]
                                            STRING [4989,5023]
                                                String: "${{ steps.buildx.outputs.name }}" [4989,5023]
                                        FIELD [5024,5061]
                                            String: "platforms" [5024,5035]
                                            STRING [5036,5061]
                                                String: "linux/amd64,linux/arm64" [5036,5061]
                                        FIELD [5062,5073]
                                            String: "push" [5062,5068]
                                            TRUE [5069,5073]
                                        FIELD [5074,5192]
                                            String: "tags" [5074,5080]
                                            STRING [5081,5192]
                                                String: "${{ env.IMAGE }}:${{ env.LATEST }}\n${{ env.IMAGE }}:${{ env.STABLE }}\n${{ env.IMAGE }}:${{ env.VERSION }}\n" [5081,5192]
                                        FIELD [5193,5241]
                                            String: "cache-from" [5193,5205]
                                            STRING [5206,5241]
                                                String: "type=local,src=/tmp/.buildx-cache" [5206,5241]
                                        FIELD [5242,5289]
                                            String: "cache-to" [5242,5252]
                                            STRING [5253,5289]
                                                String: "type=local,dest=/tmp/.buildx-cache" [5253,5289]
                            OBJECT [5292,5378]
                                FIELD [5293,5314]
                                    String: "name" [5293,5299]
                                    STRING [5300,5314]
                                        String: "Image digest" [5300,5314]
                                FIELD [5315,5377]
                                    String: "run" [5315,5320]
                                    STRING [5321,5377]
                                        String: "echo ${{ steps.docker_build_and_psuh.outputs.digest }}" [5321,5377]
            FIELD [5381,5649]
                String: "notify" [5381,5389]
                OBJECT [5390,5649]
                    FIELD [5391,5406]
                        String: "name" [5391,5397]
                        STRING [5398,5406]
                            String: "Notify" [5398,5406]
                    FIELD [5407,5432]
                        String: "runs-on" [5407,5416]
                        STRING [5417,5432]
                            String: "ubuntu-latest" [5417,5432]
                    FIELD [5433,5467]
                        String: "needs" [5433,5440]
                        ARRAY [5441,5467]
                            STRING [5442,5448]
                                String: "lint" [5442,5448]
                            STRING [5449,5466]
                                String: "build_test_push" [5449,5466]
                    FIELD [5468,5491]
                        String: "if" [5468,5472]
                        STRING [5473,5491]
                            String: "${{ failure() }}" [5473,5491]
                    FIELD [5492,5648]
                        String: "steps" [5492,5499]
                        ARRAY [5500,5648]
                            OBJECT [5501,5647]
                                FIELD [5502,5525]
                                    String: "name" [5502,5508]
                                    STRING [5509,5525]
                                        String: "Notify discord" [5509,5525]
                                FIELD [5526,5568]
                                    String: "uses" [5526,5532]
                                    STRING [5533,5568]
                                        String: "sarisia/actions-status-discord@v1" [5533,5568]
                                FIELD [5569,5646]
                                    String: "with" [5569,5575]
                                    OBJECT [5576,5646]
                                        FIELD [5577,5595]
                                            String: "status" [5577,5585]
                                            STRING [5586,5595]
                                                String: "Failure" [5586,5595]
                                        FIELD [5596,5645]
                                            String: "webhook" [5596,5605]
                                            STRING [5606,5645]
                                                String: "${{ secrets.DISCORD_GITHUB_WEBHOOK }}" [5606,5645]