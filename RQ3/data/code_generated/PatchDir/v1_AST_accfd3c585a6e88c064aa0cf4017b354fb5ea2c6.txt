OBJECT [0,4920]
    FIELD [1,41]
        String: "name" [1,7]
        STRING [8,41]
            String: "CD - Syft - Deploy `dev` to K8s" [8,41]
    FIELD [42,178]
        String: "on" [42,46]
        OBJECT [47,178]
            FIELD [48,83]
                String: "schedule" [48,58]
                ARRAY [59,83]
                    OBJECT [60,82]
                        FIELD [61,81]
                            String: "cron" [61,67]
                            STRING [68,81]
                                String: "0 */3 * * *" [68,81]
            FIELD [84,177]
                String: "workflow_dispatch" [84,103]
                OBJECT [104,177]
                    FIELD [105,176]
                        String: "inputs" [105,113]
                        OBJECT [114,176]
                            FIELD [115,175]
                                String: "none" [115,121]
                                OBJECT [122,175]
                                    FIELD [123,157]
                                        String: "description" [123,136]
                                        STRING [137,157]
                                            String: "Run Tests Manually" [137,157]
                                    FIELD [158,174]
                                        String: "required" [158,168]
                                        FALSE [169,174]
    FIELD [179,4919]
        String: "jobs" [179,185]
        OBJECT [186,4919]
            FIELD [187,4918]
                String: "deploy-syft-dev" [187,204]
                OBJECT [205,4918]
                    FIELD [206,241]
                        String: "runs-on" [206,215]
                        STRING [216,241]
                            String: "om-ci-16vcpu-ubuntu2204" [216,241]
                    FIELD [242,4917]
                        String: "steps" [242,249]
                        ARRAY [250,4917]
                            OBJECT [251,455]
                                FIELD [252,282]
                                    String: "name" [252,258]
                                    STRING [259,282]
                                        String: "Check for new changes" [259,282]
                                FIELD [283,295]
                                    String: "id" [283,287]
                                    STRING [288,295]
                                        String: "cache" [288,295]
                                FIELD [296,334]
                                    String: "if" [296,300]
                                    STRING [301,334]
                                        String: "github.event_name == 'schedule'" [301,334]
                                FIELD [335,360]
                                    String: "uses" [335,341]
                                    STRING [342,360]
                                        String: "actions/cache@v3" [342,360]
                                FIELD [361,454]
                                    String: "with" [361,367]
                                    OBJECT [368,454]
                                        FIELD [369,397]
                                            String: "path" [369,375]
                                            STRING [376,397]
                                                String: "scripts/commit_hash" [376,397]
                                        FIELD [398,434]
                                            String: "key" [398,403]
                                            STRING [404,434]
                                                String: "dev-commit-${{ github.sha }}" [404,434]
                                        FIELD [435,453]
                                            String: "lookup-only" [435,448]
                                            TRUE [449,453]
                            OBJECT [456,586]
                                FIELD [457,488]
                                    String: "name" [457,463]
                                    STRING [464,488]
                                        String: "Quit if no new changes" [464,488]
                                FIELD [489,570]
                                    String: "if" [489,493]
                                    STRING [494,570]
                                        String: "github.event_name == 'schedule' && steps.cache.outputs.cache-hit == 'true'" [494,570]
                                FIELD [571,585]
                                    String: "run" [571,576]
                                    STRING [577,585]
                                        String: "exit 0" [577,585]
                            OBJECT [587,668]
                                FIELD [588,625]
                                    String: "name" [588,594]
                                    STRING [595,625]
                                        String: "Permission to home directory" [595,625]
                                FIELD [626,667]
                                    String: "run" [626,631]
                                    STRING [632,667]
                                        String: "sudo chown -R $USER:$USER $HOME\n" [632,667]
                            OBJECT [669,699]
                                FIELD [670,698]
                                    String: "uses" [670,676]
                                    STRING [677,698]
                                        String: "actions/checkout@v4" [677,698]
                            OBJECT [700,894]
                                FIELD [701,729]
                                    String: "name" [701,707]
                                    STRING [708,729]
                                        String: "Checkout Infra Repo" [708,729]
                                FIELD [730,758]
                                    String: "uses" [730,736]
                                    STRING [737,758]
                                        String: "actions/checkout@v4" [737,758]
                                FIELD [759,893]
                                    String: "with" [759,765]
                                    OBJECT [766,893]
                                        FIELD [767,807]
                                            String: "repository" [767,779]
                                            STRING [780,807]
                                                String: "${{ secrets.INFRA_REPO }}" [780,807]
                                        FIELD [808,820]
                                            String: "ref" [808,813]
                                            STRING [814,820]
                                                String: "main" [814,820]
                                        FIELD [821,868]
                                            String: "token" [821,828]
                                            STRING [829,868]
                                                String: "${{ secrets.INFRA_BOT_COMMIT_TOKEN }}" [829,868]
                                        FIELD [869,892]
                                            String: "path" [869,875]
                                            STRING [876,892]
                                                String: "infrastructure" [876,892]
                            OBJECT [895,985]
                                FIELD [896,918]
                                    String: "name" [896,902]
                                    STRING [903,918]
                                        String: "Set up Python" [903,918]
                                FIELD [919,951]
                                    String: "uses" [919,925]
                                    STRING [926,951]
                                        String: "actions/setup-python@v3" [926,951]
                                FIELD [952,984]
                                    String: "with" [952,958]
                                    OBJECT [959,984]
                                        FIELD [960,983]
                                            String: "python-version" [960,976]
                                            STRING [977,983]
                                                String: "3.11" [977,983]
                            OBJECT [986,1070]
                                FIELD [987,1016]
                                    String: "name" [987,993]
                                    STRING [994,1016]
                                        String: "Set up Docker Buildx" [994,1016]
                                FIELD [1017,1030]
                                    String: "id" [1017,1021]
                                    STRING [1022,1030]
                                        String: "buildx" [1022,1030]
                                FIELD [1031,1069]
                                    String: "uses" [1031,1037]
                                    STRING [1038,1069]
                                        String: "docker/setup-buildx-action@v3" [1038,1069]
                            OBJECT [1071,1280]
                                FIELD [1072,1114]
                                    String: "name" [1072,1078]
                                    STRING [1079,1114]
                                        String: "Login to Azure container registry" [1079,1114]
                                FIELD [1115,1145]
                                    String: "uses" [1115,1121]
                                    STRING [1122,1145]
                                        String: "azure/docker-login@v1" [1122,1145]
                                FIELD [1146,1279]
                                    String: "with" [1146,1152]
                                    OBJECT [1153,1279]
                                        FIELD [1154,1196]
                                            String: "login-server" [1154,1168]
                                            STRING [1169,1196]
                                                String: "${{ secrets.ACR_SERVER }}" [1169,1196]
                                        FIELD [1197,1237]
                                            String: "username" [1197,1207]
                                            STRING [1208,1237]
                                                String: "${{ secrets.ACR_USERNAME }}" [1208,1237]
                                        FIELD [1238,1278]
                                            String: "password" [1238,1248]
                                            STRING [1249,1278]
                                                String: "${{ secrets.ACR_PASSWORD }}" [1249,1278]
                            OBJECT [1281,1423]
                                FIELD [1282,1315]
                                    String: "name" [1282,1288]
                                    STRING [1289,1315]
                                        String: "Set Grid package version" [1289,1315]
                                FIELD [1316,1327]
                                    String: "id" [1316,1320]
                                    STRING [1321,1327]
                                        String: "grid" [1321,1327]
                                FIELD [1328,1342]
                                    String: "shell" [1328,1335]
                                    STRING [1336,1342]
                                        String: "bash" [1336,1342]
                                FIELD [1343,1422]
                                    String: "run" [1343,1348]
                                    STRING [1349,1422]
                                        String: "echo \"GRID_VERSION=$(python packages/grid/VERSION)\" >> $GITHUB_OUTPUT" [1349,1422]
                            OBJECT [1424,1771]
                                FIELD [1425,1482]
                                    String: "name" [1425,1431]
                                    STRING [1432,1482]
                                        String: "Build and push `grid-backend` image to DockerHub" [1432,1482]
                                FIELD [1483,1519]
                                    String: "uses" [1483,1489]
                                    STRING [1490,1519]
                                        String: "docker/build-push-action@v4" [1490,1519]
                                FIELD [1520,1770]
                                    String: "with" [1520,1526]
                                    OBJECT [1527,1770]
                                        FIELD [1528,1550]
                                            String: "context" [1528,1537]
                                            STRING [1538,1550]
                                                String: "./packages" [1538,1550]
                                        FIELD [1551,1602]
                                            String: "file" [1551,1557]
                                            STRING [1558,1602]
                                                String: "./packages/grid/backend/backend.dockerfile" [1558,1602]
                                        FIELD [1603,1614]
                                            String: "push" [1603,1609]
                                            TRUE [1610,1614]
                                        FIELD [1615,1633]
                                            String: "target" [1615,1623]
                                            STRING [1624,1633]
                                                String: "backend" [1624,1633]
                                        FIELD [1634,1769]
                                            String: "tags" [1634,1640]
                                            STRING [1641,1769]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev-${{ github.sha }}\n" [1641,1769]
                            OBJECT [1772,2150]
                                FIELD [1773,1831]
                                    String: "name" [1773,1779]
                                    STRING [1780,1831]
                                        String: "Build and push `grid-frontend` image to DockerHub" [1780,1831]
                                FIELD [1832,1868]
                                    String: "uses" [1832,1838]
                                    STRING [1839,1868]
                                        String: "docker/build-push-action@v4" [1839,1868]
                                FIELD [1869,2149]
                                    String: "with" [1869,1875]
                                    OBJECT [1876,2149]
                                        FIELD [1877,1913]
                                            String: "context" [1877,1886]
                                            STRING [1887,1913]
                                                String: "./packages/grid/frontend" [1887,1913]
                                        FIELD [1914,1967]
                                            String: "file" [1914,1920]
                                            STRING [1921,1967]
                                                String: "./packages/grid/frontend/frontend.dockerfile" [1921,1967]
                                        FIELD [1968,1979]
                                            String: "push" [1968,1974]
                                            TRUE [1975,1979]
                                        FIELD [1980,2117]
                                            String: "tags" [1980,1986]
                                            STRING [1987,2117]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev-${{ github.sha }}\n" [1987,2117]
                                        FIELD [2118,2148]
                                            String: "target" [2118,2126]
                                            STRING [2127,2148]
                                                String: "grid-ui-development" [2127,2148]
                            OBJECT [2151,2492]
                                FIELD [2152,2211]
                                    String: "name" [2152,2158]
                                    STRING [2159,2211]
                                        String: "Build and push `grid-headscale` image to DockerHub" [2159,2211]
                                FIELD [2212,2248]
                                    String: "uses" [2212,2218]
                                    STRING [2219,2248]
                                        String: "docker/build-push-action@v4" [2219,2248]
                                FIELD [2249,2491]
                                    String: "with" [2249,2255]
                                    OBJECT [2256,2491]
                                        FIELD [2257,2288]
                                            String: "context" [2257,2266]
                                            STRING [2267,2288]
                                                String: "./packages/grid/vpn" [2267,2288]
                                        FIELD [2289,2338]
                                            String: "file" [2289,2295]
                                            STRING [2296,2338]
                                                String: "./packages/grid/vpn/headscale.dockerfile" [2296,2338]
                                        FIELD [2339,2350]
                                            String: "push" [2339,2345]
                                            TRUE [2346,2350]
                                        FIELD [2351,2490]
                                            String: "tags" [2351,2357]
                                            STRING [2358,2490]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-headscale:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-headscale:dev-${{ github.sha }}\n" [2358,2490]
                            OBJECT [2493,2834]
                                FIELD [2494,2553]
                                    String: "name" [2494,2500]
                                    STRING [2501,2553]
                                        String: "Build and push `grid-tailscale` image to DockerHub" [2501,2553]
                                FIELD [2554,2590]
                                    String: "uses" [2554,2560]
                                    STRING [2561,2590]
                                        String: "docker/build-push-action@v4" [2561,2590]
                                FIELD [2591,2833]
                                    String: "with" [2591,2597]
                                    OBJECT [2598,2833]
                                        FIELD [2599,2630]
                                            String: "context" [2599,2608]
                                            STRING [2609,2630]
                                                String: "./packages/grid/vpn" [2609,2630]
                                        FIELD [2631,2680]
                                            String: "file" [2631,2637]
                                            STRING [2638,2680]
                                                String: "./packages/grid/vpn/tailscale.dockerfile" [2638,2680]
                                        FIELD [2681,2692]
                                            String: "push" [2681,2687]
                                            TRUE [2688,2692]
                                        FIELD [2693,2832]
                                            String: "tags" [2693,2699]
                                            STRING [2700,2832]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-tailscale:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-tailscale:dev-${{ github.sha }}\n" [2700,2832]
                            OBJECT [2835,3184]
                                FIELD [2836,2898]
                                    String: "name" [2836,2842]
                                    STRING [2843,2898]
                                        String: "Build and push `grid-vpn-iptables` image to DockerHub" [2843,2898]
                                FIELD [2899,2935]
                                    String: "uses" [2899,2905]
                                    STRING [2906,2935]
                                        String: "docker/build-push-action@v2" [2906,2935]
                                FIELD [2936,3183]
                                    String: "with" [2936,2942]
                                    OBJECT [2943,3183]
                                        FIELD [2944,2975]
                                            String: "context" [2944,2953]
                                            STRING [2954,2975]
                                                String: "./packages/grid/vpn" [2954,2975]
                                        FIELD [2976,3024]
                                            String: "file" [2976,2982]
                                            STRING [2983,3024]
                                                String: "./packages/grid/vpn/iptables.dockerfile" [2983,3024]
                                        FIELD [3025,3036]
                                            String: "push" [3025,3031]
                                            TRUE [3032,3036]
                                        FIELD [3037,3182]
                                            String: "tags" [3037,3043]
                                            STRING [3044,3182]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-vpn-iptables:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-vpn-iptables:dev-${{ github.sha }}\n" [3044,3182]
                            OBJECT [3185,3976]
                                FIELD [3186,3227]
                                    String: "name" [3186,3192]
                                    STRING [3193,3227]
                                        String: "Build Helm Chart & Copy to infra" [3193,3227]
                                FIELD [3228,3242]
                                    String: "shell" [3228,3235]
                                    STRING [3236,3242]
                                        String: "bash" [3236,3242]
                                FIELD [3243,3975]
                                    String: "run" [3243,3248]
                                    STRING [3249,3975]
                                        String: "K3D_VERSION=v5.6.0\nDEVSPACE_VERSION=v6.3.3\n\n# install k3d\nwget https://github.com/k3d-io/k3d/releases/download/${K3D_VERSION}/k3d-linux-amd64\nmv k3d-linux-amd64 k3d\nchmod +x k3d\nexport PATH=`pwd`:$PATH\nk3d version\n\n# Install devspace\ncurl -sSL https://github.com/loft-sh/devspace/releases/download/${DEVSPACE_VERSION}/devspace-linux-amd64 -o ./devspace\nchmod +x devspace\ndevspace version\n\nexport CONTAINER_REGISTRY=${{ secrets.ACR_SERVER }}\nexport VERSION=dev-${{github.sha}}\ntox -e syft.build.helm\n\nrm -rf infrastructure/gitops/environments/dev/\nmkdir -p infrastructure/gitops/environments/dev/\ncp -R packages/grid/helm/syft/. packages/grid/helm/manifests.yaml infrastructure/gitops/environments/dev/\n" [3249,3975]
                            OBJECT [3977,4252]
                                FIELD [3978,4022]
                                    String: "name" [3978,3984]
                                    STRING [3985,4022]
                                        String: "Commit & push changes to Infra Repo" [3985,4022]
                                FIELD [4023,4056]
                                    String: "uses" [4023,4029]
                                    STRING [4030,4056]
                                        String: "EndBug/add-and-commit@v9" [4030,4056]
                                FIELD [4057,4251]
                                    String: "with" [4057,4063]
                                    OBJECT [4064,4251]
                                        FIELD [4065,4107]
                                            String: "author_name" [4065,4078]
                                            STRING [4079,4107]
                                                String: "${{ secrets.OM_BOT_NAME }}" [4079,4107]
                                        FIELD [4108,4152]
                                            String: "author_email" [4108,4122]
                                            STRING [4123,4152]
                                                String: "${{ secrets.OM_BOT_EMAIL }}" [4123,4152]
                                        FIELD [4153,4193]
                                            String: "message" [4153,4162]
                                            STRING [4163,4193]
                                                String: "[env] Update dev helm charts" [4163,4193]
                                        FIELD [4194,4203]
                                            String: "add" [4194,4199]
                                            STRING [4200,4203]
                                                String: "." [4200,4203]
                                        FIELD [4204,4224]
                                            String: "push" [4204,4210]
                                            STRING [4211,4224]
                                                String: "origin main" [4211,4224]
                                        FIELD [4225,4250]
                                            String: "cwd" [4225,4230]
                                            STRING [4231,4250]
                                                String: "./infrastructure/" [4231,4250]
                            OBJECT [4253,4832]
                                FIELD [4254,4295]
                                    String: "name" [4254,4260]
                                    STRING [4261,4295]
                                        String: "Cleanup Azure Container Registry" [4261,4295]
                                FIELD [4296,4317]
                                    String: "uses" [4296,4302]
                                    STRING [4303,4317]
                                        String: "azure/CLI@v1" [4303,4317]
                                FIELD [4318,4831]
                                    String: "with" [4318,4324]
                                    OBJECT [4325,4831]
                                        FIELD [4326,4830]
                                            String: "inlineScript" [4326,4340]
                                            STRING [4341,4830]
                                                String: "ACR_REGISTRY_NAME=${{ secrets.ACR_REGISTRY_NAME }}\nREPO_LIST=$(az acr repository list -n $ACR_REGISTRY_NAME -o tsv)\n\nKEEP_PREV_VERSIONS=1\nTAIL_FROM_LINE=$((2 + $KEEP_PREV_VERSIONS + 1))\n\nfor repo in $REPO_LIST\ndo\n    echo \"Cleaning up '$repo'\"\n    az acr repository show-tags --name $ACR_REGISTRY_NAME --repository $repo --orderby time_desc --output tsv | tail -n +$TAIL_FROM_LINE | xargs -r -I% az acr repository delete --name $ACR_REGISTRY_NAME --image $repo:% --yes\ndone\n" [4341,4830]
                            OBJECT [4833,4916]
                                FIELD [4834,4858]
                                    String: "name" [4834,4840]
                                    STRING [4841,4858]
                                        String: "Save Commit SHA" [4841,4858]
                                FIELD [4859,4915]
                                    String: "run" [4859,4864]
                                    STRING [4865,4915]
                                        String: "echo \"${{ github.sha }}\" > scripts/commit_hash" [4865,4915]