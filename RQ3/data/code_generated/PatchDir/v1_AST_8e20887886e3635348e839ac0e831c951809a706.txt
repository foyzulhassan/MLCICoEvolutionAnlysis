OBJECT [0,9834]
    FIELD [1,35]
        String: "name" [1,7]
        STRING [8,35]
            String: "Self-hosted runner (push)" [8,35]
    FIELD [36,183]
        String: "on" [36,40]
        OBJECT [41,183]
            FIELD [42,155]
                String: "push" [42,48]
                OBJECT [49,155]
                    FIELD [50,85]
                        String: "branches" [50,60]
                        ARRAY [61,85]
                            STRING [62,70]
                                String: "master" [62,70]
                            STRING [71,77]
                                String: "ci_*" [71,77]
                            STRING [78,84]
                                String: "ci-*" [78,84]
                    FIELD [86,154]
                        String: "paths" [86,93]
                        ARRAY [94,154]
                            STRING [95,103]
                                String: "src/**" [95,103]
                            STRING [104,114]
                                String: "tests/**" [104,114]
                            STRING [115,127]
                                String: ".github/**" [115,127]
                            STRING [128,142]
                                String: "templates/**" [128,142]
                            STRING [143,153]
                                String: "utils/**" [143,153]
            FIELD [156,182]
                String: "repository_dispatch" [156,177]
                NULL [178,182]
    FIELD [184,300]
        String: "env" [184,189]
        OBJECT [190,300]
            FIELD [191,213]
                String: "HF_HOME" [191,200]
                STRING [201,213]
                    String: "/mnt/cache" [201,213]
            FIELD [214,239]
                String: "TRANSFORMERS_IS_CI" [214,234]
                TRUE [235,239]
            FIELD [240,259]
                String: "OMP_NUM_THREADS" [240,257]
                NUMBER [258,259]
                    Number: 8 [258,259]
            FIELD [260,279]
                String: "MKL_NUM_THREADS" [260,277]
                NUMBER [278,279]
                    Number: 8 [278,279]
            FIELD [280,299]
                String: "PYTEST_TIMEOUT" [280,296]
                NUMBER [297,299]
                    Number: 60 [297,299]
    FIELD [301,9833]
        String: "jobs" [301,307]
        OBJECT [308,9833]
            FIELD [309,2134]
                String: "run_tests_torch_gpu" [309,330]
                OBJECT [331,2134]
                    FIELD [332,383]
                        String: "runs-on" [332,341]
                        ARRAY [342,383]
                            STRING [343,356]
                                String: "self-hosted" [343,356]
                            STRING [357,369]
                                String: "docker-gpu" [357,369]
                            STRING [370,382]
                                String: "single-gpu" [370,382]
                    FIELD [384,550]
                        String: "container" [384,395]
                        OBJECT [396,550]
                            FIELD [397,452]
                                String: "image" [397,404]
                                STRING [405,452]
                                    String: "pytorch/pytorch:1.9.0-cuda11.1-cudnn8-runtime" [405,452]
                            FIELD [453,549]
                                String: "options" [453,462]
                                STRING [463,549]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [463,549]
                    FIELD [551,2133]
                        String: "steps" [551,558]
                        ARRAY [559,2133]
                            OBJECT [560,900]
                                FIELD [561,590]
                                    String: "name" [561,567]
                                    STRING [568,590]
                                        String: "Install dependencies" [568,590]
                                FIELD [591,899]
                                    String: "run" [591,596]
                                    STRING [597,899]
                                        String: "apt -y update && apt install -y software-properties-common && apt -y update && add-apt-repository -y ppa:git-core/ppa && apt -y update && apt install -y git\napt install -y libsndfile1-dev\npip install --upgrade pip\npip install .[sklearn,testing,onnxruntime,sentencepiece,torch-speech,vision,timm]\n" [597,899]
                            OBJECT [901,981]
                                FIELD [902,926]
                                    String: "name" [902,908]
                                    STRING [909,926]
                                        String: "Launcher docker" [909,926]
                                FIELD [927,955]
                                    String: "uses" [927,933]
                                    STRING [934,955]
                                        String: "actions/checkout@v2" [934,955]
                                FIELD [956,980]
                                    String: "with" [956,962]
                                    OBJECT [963,980]
                                        FIELD [964,979]
                                            String: "fetch-depth" [964,977]
                                            NUMBER [978,979]
                                                Number: 2 [978,979]
                            OBJECT [982,1024]
                                FIELD [983,1002]
                                    String: "name" [983,989]
                                    STRING [990,1002]
                                        String: "NVIDIA-SMI" [990,1002]
                                FIELD [1003,1023]
                                    String: "run" [1003,1008]
                                    STRING [1009,1023]
                                        String: "nvidia-smi\n" [1009,1023]
                            OBJECT [1025,1414]
                                FIELD [1026,1075]
                                    String: "name" [1026,1032]
                                    STRING [1033,1075]
                                        String: "Are GPUs recognized by our DL frameworks" [1033,1075]
                                FIELD [1076,1413]
                                    String: "run" [1076,1081]
                                    STRING [1082,1413]
                                        String: "python -c \"import torch; print('Cuda available:', torch.cuda.is_available())\"\npython -c \"import torch; print('Cuda version:', torch.version.cuda)\"\npython -c \"import torch; print('CuDNN version:', torch.backends.cudnn.version())\"\npython -c \"import torch; print('Number of GPUs available:', torch.cuda.device_count())\"\n" [1082,1413]
                            OBJECT [1415,1539]
                                FIELD [1416,1447]
                                    String: "name" [1416,1422]
                                    STRING [1423,1447]
                                        String: "Fetch the tests to run" [1423,1447]
                                FIELD [1448,1538]
                                    String: "run" [1448,1453]
                                    STRING [1454,1538]
                                        String: "python utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [1454,1538]
                            OBJECT [1540,1668]
                                FIELD [1541,1570]
                                    String: "name" [1541,1547]
                                    STRING [1548,1570]
                                        String: "Report fetched tests" [1548,1570]
                                FIELD [1571,1606]
                                    String: "uses" [1571,1577]
                                    STRING [1578,1606]
                                        String: "actions/upload-artifact@v2" [1578,1606]
                                FIELD [1607,1667]
                                    String: "with" [1607,1613]
                                    OBJECT [1614,1667]
                                        FIELD [1615,1636]
                                            String: "name" [1615,1621]
                                            STRING [1622,1636]
                                                String: "test_fetched" [1622,1636]
                                        FIELD [1637,1666]
                                            String: "path" [1637,1643]
                                            STRING [1644,1666]
                                                String: "test_preparation.txt" [1644,1666]
                            OBJECT [1669,1849]
                                FIELD [1670,1708]
                                    String: "name" [1670,1676]
                                    STRING [1677,1708]
                                        String: "Run all non-slow tests on GPU" [1677,1708]
                                FIELD [1709,1848]
                                    String: "run" [1709,1714]
                                    STRING [1715,1848]
                                        String: "if [ -f test_list.txt ]; then\n  python -m pytest -n 2 --dist=loadfile -v --make-reports=tests_torch_gpu $(cat test_list.txt)\nfi\n" [1715,1848]
                            OBJECT [1850,1961]
                                FIELD [1851,1881]
                                    String: "name" [1851,1857]
                                    STRING [1858,1881]
                                        String: "Failure short reports" [1858,1881]
                                FIELD [1882,1905]
                                    String: "if" [1882,1886]
                                    STRING [1887,1905]
                                        String: "${{ failure() }}" [1887,1905]
                                FIELD [1906,1960]
                                    String: "run" [1906,1911]
                                    STRING [1912,1960]
                                        String: "cat reports/tests_torch_gpu_failures_short.txt" [1912,1960]
                            OBJECT [1962,2132]
                                FIELD [1963,2000]
                                    String: "name" [1963,1969]
                                    STRING [1970,2000]
                                        String: "Test suite reports artifacts" [1970,2000]
                                FIELD [2001,2023]
                                    String: "if" [2001,2005]
                                    STRING [2006,2023]
                                        String: "${{ always() }}" [2006,2023]
                                FIELD [2024,2059]
                                    String: "uses" [2024,2030]
                                    STRING [2031,2059]
                                        String: "actions/upload-artifact@v2" [2031,2059]
                                FIELD [2060,2131]
                                    String: "with" [2060,2066]
                                    OBJECT [2067,2131]
                                        FIELD [2068,2113]
                                            String: "name" [2068,2074]
                                            STRING [2075,2113]
                                                String: "run_all_tests_torch_gpu_test_reports" [2075,2113]
                                        FIELD [2114,2130]
                                            String: "path" [2114,2120]
                                            STRING [2121,2130]
                                                String: "reports" [2121,2130]
            FIELD [2135,3897]
                String: "run_tests_flax_gpu" [2135,2155]
                OBJECT [2156,3897]
                    FIELD [2157,2213]
                        String: "runs-on" [2157,2166]
                        ARRAY [2167,2213]
                            STRING [2168,2181]
                                String: "self-hosted" [2168,2181]
                            STRING [2182,2199]
                                String: "docker-gpu-test" [2182,2199]
                            STRING [2200,2212]
                                String: "single-gpu" [2200,2212]
                    FIELD [2214,2366]
                        String: "container" [2214,2225]
                        OBJECT [2226,2366]
                            FIELD [2227,2268]
                                String: "image" [2227,2234]
                                STRING [2235,2268]
                                    String: "tensorflow/tensorflow:2.4.1-gpu" [2235,2268]
                            FIELD [2269,2365]
                                String: "options" [2269,2278]
                                STRING [2279,2365]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [2279,2365]
                    FIELD [2367,3896]
                        String: "steps" [2367,2374]
                        ARRAY [2375,3896]
                            OBJECT [2376,2776]
                                FIELD [2377,2406]
                                    String: "name" [2377,2383]
                                    STRING [2384,2406]
                                        String: "Install dependencies" [2384,2406]
                                FIELD [2407,2775]
                                    String: "run" [2407,2412]
                                    STRING [2413,2775]
                                        String: "apt -y update && apt install -y software-properties-common && apt -y update && add-apt-repository -y ppa:git-core/ppa && apt -y update && apt install -y git\npip install --upgrade \"jax[cuda111]\" -f https://storage.googleapis.com/jax-releases/jax_releases.html\npip install --upgrade pip\npip install .[sklearn,testing,sentencepiece,flax,flax-speech,vision]\n" [2413,2775]
                            OBJECT [2777,2857]
                                FIELD [2778,2802]
                                    String: "name" [2778,2784]
                                    STRING [2785,2802]
                                        String: "Launcher docker" [2785,2802]
                                FIELD [2803,2831]
                                    String: "uses" [2803,2809]
                                    STRING [2810,2831]
                                        String: "actions/checkout@v2" [2810,2831]
                                FIELD [2832,2856]
                                    String: "with" [2832,2838]
                                    OBJECT [2839,2856]
                                        FIELD [2840,2855]
                                            String: "fetch-depth" [2840,2853]
                                            NUMBER [2854,2855]
                                                Number: 2 [2854,2855]
                            OBJECT [2858,2925]
                                FIELD [2859,2878]
                                    String: "name" [2859,2865]
                                    STRING [2866,2878]
                                        String: "NVIDIA-SMI" [2866,2878]
                                FIELD [2879,2903]
                                    String: "continue-on-error" [2879,2898]
                                    TRUE [2899,2903]
                                FIELD [2904,2924]
                                    String: "run" [2904,2909]
                                    STRING [2910,2924]
                                        String: "nvidia-smi\n" [2910,2924]
                            OBJECT [2926,3180]
                                FIELD [2927,2976]
                                    String: "name" [2927,2933]
                                    STRING [2934,2976]
                                        String: "Are GPUs recognized by our DL frameworks" [2934,2976]
                                FIELD [2977,3179]
                                    String: "run" [2977,2982]
                                    STRING [2983,3179]
                                        String: "python -c \"from jax.lib import xla_bridge; print('GPU available:', xla_bridge.get_backend().platform)\"\npython -c \"import jax; print('Number of GPUs available:', len(jax.local_devices()))\"\n" [2983,3179]
                            OBJECT [3181,3305]
                                FIELD [3182,3213]
                                    String: "name" [3182,3188]
                                    STRING [3189,3213]
                                        String: "Fetch the tests to run" [3189,3213]
                                FIELD [3214,3304]
                                    String: "run" [3214,3219]
                                    STRING [3220,3304]
                                        String: "python utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [3220,3304]
                            OBJECT [3306,3434]
                                FIELD [3307,3336]
                                    String: "name" [3307,3313]
                                    STRING [3314,3336]
                                        String: "Report fetched tests" [3314,3336]
                                FIELD [3337,3372]
                                    String: "uses" [3337,3343]
                                    STRING [3344,3372]
                                        String: "actions/upload-artifact@v2" [3344,3372]
                                FIELD [3373,3433]
                                    String: "with" [3373,3379]
                                    OBJECT [3380,3433]
                                        FIELD [3381,3402]
                                            String: "name" [3381,3387]
                                            STRING [3388,3402]
                                                String: "test_fetched" [3388,3402]
                                        FIELD [3403,3432]
                                            String: "path" [3403,3409]
                                            STRING [3410,3432]
                                                String: "test_preparation.txt" [3410,3432]
                            OBJECT [3435,3614]
                                FIELD [3436,3474]
                                    String: "name" [3436,3442]
                                    STRING [3443,3474]
                                        String: "Run all non-slow tests on GPU" [3443,3474]
                                FIELD [3475,3613]
                                    String: "run" [3475,3480]
                                    STRING [3481,3613]
                                        String: "if [ -f test_list.txt ]; then\n  python -m pytest -n 2 --dist=loadfile -v --make-reports=tests_flax_gpu $(cat test_list.txt)\nfi\n" [3481,3613]
                            OBJECT [3615,3725]
                                FIELD [3616,3646]
                                    String: "name" [3616,3622]
                                    STRING [3623,3646]
                                        String: "Failure short reports" [3623,3646]
                                FIELD [3647,3670]
                                    String: "if" [3647,3651]
                                    STRING [3652,3670]
                                        String: "${{ failure() }}" [3652,3670]
                                FIELD [3671,3724]
                                    String: "run" [3671,3676]
                                    STRING [3677,3724]
                                        String: "cat reports/tests_flax_gpu_failures_short.txt" [3677,3724]
                            OBJECT [3726,3895]
                                FIELD [3727,3764]
                                    String: "name" [3727,3733]
                                    STRING [3734,3764]
                                        String: "Test suite reports artifacts" [3734,3764]
                                FIELD [3765,3787]
                                    String: "if" [3765,3769]
                                    STRING [3770,3787]
                                        String: "${{ always() }}" [3770,3787]
                                FIELD [3788,3823]
                                    String: "uses" [3788,3794]
                                    STRING [3795,3823]
                                        String: "actions/upload-artifact@v2" [3795,3823]
                                FIELD [3824,3894]
                                    String: "with" [3824,3830]
                                    OBJECT [3831,3894]
                                        FIELD [3832,3876]
                                            String: "name" [3832,3838]
                                            STRING [3839,3876]
                                                String: "run_all_tests_flax_gpu_test_reports" [3839,3876]
                                        FIELD [3877,3893]
                                            String: "path" [3877,3883]
                                            STRING [3884,3893]
                                                String: "reports" [3884,3893]
            FIELD [3898,5809]
                String: "run_tests_torch_multi_gpu" [3898,3925]
                OBJECT [3926,5809]
                    FIELD [3927,3977]
                        String: "runs-on" [3927,3936]
                        ARRAY [3937,3977]
                            STRING [3938,3951]
                                String: "self-hosted" [3938,3951]
                            STRING [3952,3964]
                                String: "docker-gpu" [3952,3964]
                            STRING [3965,3976]
                                String: "multi-gpu" [3965,3976]
                    FIELD [3978,4146]
                        String: "container" [3978,3989]
                        OBJECT [3990,4146]
                            FIELD [3991,4046]
                                String: "image" [3991,3998]
                                STRING [3999,4046]
                                    String: "pytorch/pytorch:1.9.0-cuda11.1-cudnn8-runtime" [3999,4046]
                            FIELD [4047,4145]
                                String: "options" [4047,4056]
                                STRING [4057,4145]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [4057,4145]
                    FIELD [4147,5808]
                        String: "steps" [4147,4154]
                        ARRAY [4155,5808]
                            OBJECT [4156,4496]
                                FIELD [4157,4186]
                                    String: "name" [4157,4163]
                                    STRING [4164,4186]
                                        String: "Install dependencies" [4164,4186]
                                FIELD [4187,4495]
                                    String: "run" [4187,4192]
                                    STRING [4193,4495]
                                        String: "apt -y update && apt install -y software-properties-common && apt -y update && add-apt-repository -y ppa:git-core/ppa && apt -y update && apt install -y git\napt install -y libsndfile1-dev\npip install --upgrade pip\npip install .[sklearn,testing,onnxruntime,sentencepiece,torch-speech,vision,timm]\n" [4193,4495]
                            OBJECT [4497,4577]
                                FIELD [4498,4522]
                                    String: "name" [4498,4504]
                                    STRING [4505,4522]
                                        String: "Launcher docker" [4505,4522]
                                FIELD [4523,4551]
                                    String: "uses" [4523,4529]
                                    STRING [4530,4551]
                                        String: "actions/checkout@v2" [4530,4551]
                                FIELD [4552,4576]
                                    String: "with" [4552,4558]
                                    OBJECT [4559,4576]
                                        FIELD [4560,4575]
                                            String: "fetch-depth" [4560,4573]
                                            NUMBER [4574,4575]
                                                Number: 2 [4574,4575]
                            OBJECT [4578,4645]
                                FIELD [4579,4598]
                                    String: "name" [4579,4585]
                                    STRING [4586,4598]
                                        String: "NVIDIA-SMI" [4586,4598]
                                FIELD [4599,4623]
                                    String: "continue-on-error" [4599,4618]
                                    TRUE [4619,4623]
                                FIELD [4624,4644]
                                    String: "run" [4624,4629]
                                    STRING [4630,4644]
                                        String: "nvidia-smi\n" [4630,4644]
                            OBJECT [4646,5035]
                                FIELD [4647,4696]
                                    String: "name" [4647,4653]
                                    STRING [4654,4696]
                                        String: "Are GPUs recognized by our DL frameworks" [4654,4696]
                                FIELD [4697,5034]
                                    String: "run" [4697,4702]
                                    STRING [4703,5034]
                                        String: "python -c \"import torch; print('Cuda available:', torch.cuda.is_available())\"\npython -c \"import torch; print('Cuda version:', torch.version.cuda)\"\npython -c \"import torch; print('CuDNN version:', torch.backends.cudnn.version())\"\npython -c \"import torch; print('Number of GPUs available:', torch.cuda.device_count())\"\n" [4703,5034]
                            OBJECT [5036,5160]
                                FIELD [5037,5068]
                                    String: "name" [5037,5043]
                                    STRING [5044,5068]
                                        String: "Fetch the tests to run" [5044,5068]
                                FIELD [5069,5159]
                                    String: "run" [5069,5074]
                                    STRING [5075,5159]
                                        String: "python utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [5075,5159]
                            OBJECT [5161,5289]
                                FIELD [5162,5191]
                                    String: "name" [5162,5168]
                                    STRING [5169,5191]
                                        String: "Report fetched tests" [5169,5191]
                                FIELD [5192,5227]
                                    String: "uses" [5192,5198]
                                    STRING [5199,5227]
                                        String: "actions/upload-artifact@v2" [5199,5227]
                                FIELD [5228,5288]
                                    String: "with" [5228,5234]
                                    OBJECT [5235,5288]
                                        FIELD [5236,5257]
                                            String: "name" [5236,5242]
                                            STRING [5243,5257]
                                                String: "test_fetched" [5243,5257]
                                        FIELD [5258,5287]
                                            String: "path" [5258,5264]
                                            STRING [5265,5287]
                                                String: "test_preparation.txt" [5265,5287]
                            OBJECT [5290,5512]
                                FIELD [5291,5329]
                                    String: "name" [5291,5297]
                                    STRING [5298,5329]
                                        String: "Run all non-slow tests on GPU" [5298,5329]
                                FIELD [5330,5365]
                                    String: "env" [5330,5335]
                                    OBJECT [5336,5365]
                                        FIELD [5337,5364]
                                            String: "MKL_SERVICE_FORCE_INTEL" [5337,5362]
                                            NUMBER [5363,5364]
                                                Number: 1 [5363,5364]
                                FIELD [5366,5511]
                                    String: "run" [5366,5371]
                                    STRING [5372,5511]
                                        String: "if [ -f test_list.txt ]; then\n  python -m pytest -n 2 --dist=loadfile -v --make-reports=tests_torch_multi_gpu $(cat test_list.txt)\nfi\n" [5372,5511]
                            OBJECT [5513,5630]
                                FIELD [5514,5544]
                                    String: "name" [5514,5520]
                                    STRING [5521,5544]
                                        String: "Failure short reports" [5521,5544]
                                FIELD [5545,5568]
                                    String: "if" [5545,5549]
                                    STRING [5550,5568]
                                        String: "${{ failure() }}" [5550,5568]
                                FIELD [5569,5629]
                                    String: "run" [5569,5574]
                                    STRING [5575,5629]
                                        String: "cat reports/tests_torch_multi_gpu_failures_short.txt" [5575,5629]
                            OBJECT [5631,5807]
                                FIELD [5632,5669]
                                    String: "name" [5632,5638]
                                    STRING [5639,5669]
                                        String: "Test suite reports artifacts" [5639,5669]
                                FIELD [5670,5692]
                                    String: "if" [5670,5674]
                                    STRING [5675,5692]
                                        String: "${{ always() }}" [5675,5692]
                                FIELD [5693,5728]
                                    String: "uses" [5693,5699]
                                    STRING [5700,5728]
                                        String: "actions/upload-artifact@v2" [5700,5728]
                                FIELD [5729,5806]
                                    String: "with" [5729,5735]
                                    OBJECT [5736,5806]
                                        FIELD [5737,5788]
                                            String: "name" [5737,5743]
                                            STRING [5744,5788]
                                                String: "run_all_tests_torch_multi_gpu_test_reports" [5744,5788]
                                        FIELD [5789,5805]
                                            String: "path" [5789,5795]
                                            STRING [5796,5805]
                                                String: "reports" [5796,5805]
            FIELD [5810,7519]
                String: "run_tests_torch_cuda_extensions_gpu" [5810,5847]
                OBJECT [5848,7519]
                    FIELD [5849,5900]
                        String: "runs-on" [5849,5858]
                        ARRAY [5859,5900]
                            STRING [5860,5873]
                                String: "self-hosted" [5860,5873]
                            STRING [5874,5886]
                                String: "docker-gpu" [5874,5886]
                            STRING [5887,5899]
                                String: "single-gpu" [5887,5899]
                    FIELD [5901,6054]
                        String: "container" [5901,5912]
                        OBJECT [5913,6054]
                            FIELD [5914,5956]
                                String: "image" [5914,5921]
                                STRING [5922,5956]
                                    String: "nvcr.io/nvidia/pytorch:21.03-py3" [5922,5956]
                            FIELD [5957,6053]
                                String: "options" [5957,5966]
                                STRING [5967,6053]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [5967,6053]
                    FIELD [6055,7518]
                        String: "steps" [6055,6062]
                        ARRAY [6063,7518]
                            OBJECT [6064,6144]
                                FIELD [6065,6089]
                                    String: "name" [6065,6071]
                                    STRING [6072,6089]
                                        String: "Launcher docker" [6072,6089]
                                FIELD [6090,6118]
                                    String: "uses" [6090,6096]
                                    STRING [6097,6118]
                                        String: "actions/checkout@v2" [6097,6118]
                                FIELD [6119,6143]
                                    String: "with" [6119,6125]
                                    OBJECT [6126,6143]
                                        FIELD [6127,6142]
                                            String: "fetch-depth" [6127,6140]
                                            NUMBER [6141,6142]
                                                Number: 2 [6141,6142]
                            OBJECT [6145,6187]
                                FIELD [6146,6165]
                                    String: "name" [6146,6152]
                                    STRING [6153,6165]
                                        String: "NVIDIA-SMI" [6153,6165]
                                FIELD [6166,6186]
                                    String: "run" [6166,6171]
                                    STRING [6172,6186]
                                        String: "nvidia-smi\n" [6172,6186]
                            OBJECT [6188,6333]
                                FIELD [6189,6218]
                                    String: "name" [6189,6195]
                                    STRING [6196,6218]
                                        String: "Install dependencies" [6196,6218]
                                FIELD [6219,6332]
                                    String: "run" [6219,6224]
                                    STRING [6225,6332]
                                        String: "apt -y update && apt install -y libaio-dev\npip install --upgrade pip\npip install .[testing,deepspeed]\n" [6225,6332]
                            OBJECT [6334,6723]
                                FIELD [6335,6384]
                                    String: "name" [6335,6341]
                                    STRING [6342,6384]
                                        String: "Are GPUs recognized by our DL frameworks" [6342,6384]
                                FIELD [6385,6722]
                                    String: "run" [6385,6390]
                                    STRING [6391,6722]
                                        String: "python -c \"import torch; print('Cuda available:', torch.cuda.is_available())\"\npython -c \"import torch; print('Cuda version:', torch.version.cuda)\"\npython -c \"import torch; print('CuDNN version:', torch.backends.cudnn.version())\"\npython -c \"import torch; print('Number of GPUs available:', torch.cuda.device_count())\"\n" [6391,6722]
                            OBJECT [6724,6889]
                                FIELD [6725,6756]
                                    String: "name" [6725,6731]
                                    STRING [6732,6756]
                                        String: "Fetch the tests to run" [6732,6756]
                                FIELD [6757,6888]
                                    String: "run" [6757,6762]
                                    STRING [6763,6888]
                                        String: "python utils/tests_fetcher.py --diff_with_last_commit --filters tests/deepspeed tests/extended | tee test_preparation.txt\n" [6763,6888]
                            OBJECT [6890,7018]
                                FIELD [6891,6920]
                                    String: "name" [6891,6897]
                                    STRING [6898,6920]
                                        String: "Report fetched tests" [6898,6920]
                                FIELD [6921,6956]
                                    String: "uses" [6921,6927]
                                    STRING [6928,6956]
                                        String: "actions/upload-artifact@v2" [6928,6956]
                                FIELD [6957,7017]
                                    String: "with" [6957,6963]
                                    OBJECT [6964,7017]
                                        FIELD [6965,6986]
                                            String: "name" [6965,6971]
                                            STRING [6972,6986]
                                                String: "test_fetched" [6972,6986]
                                        FIELD [6987,7016]
                                            String: "path" [6987,6993]
                                            STRING [6994,7016]
                                                String: "test_preparation.txt" [6994,7016]
                            OBJECT [7019,7206]
                                FIELD [7020,7049]
                                    String: "name" [7020,7026]
                                    STRING [7027,7049]
                                        String: "Run all tests on GPU" [7027,7049]
                                FIELD [7050,7205]
                                    String: "run" [7050,7055]
                                    STRING [7056,7205]
                                        String: "if [ -f test_list.txt ]; then\n  python -m pytest -n 1 --dist=loadfile -v --make-reports=tests_torch_cuda_extensions_gpu $(cat test_list.txt)\nfi\n" [7056,7205]
                            OBJECT [7207,7334]
                                FIELD [7208,7238]
                                    String: "name" [7208,7214]
                                    STRING [7215,7238]
                                        String: "Failure short reports" [7215,7238]
                                FIELD [7239,7262]
                                    String: "if" [7239,7243]
                                    STRING [7244,7262]
                                        String: "${{ failure() }}" [7244,7262]
                                FIELD [7263,7333]
                                    String: "run" [7263,7268]
                                    STRING [7269,7333]
                                        String: "cat reports/tests_torch_cuda_extensions_gpu_failures_short.txt" [7269,7333]
                            OBJECT [7335,7517]
                                FIELD [7336,7373]
                                    String: "name" [7336,7342]
                                    STRING [7343,7373]
                                        String: "Test suite reports artifacts" [7343,7373]
                                FIELD [7374,7396]
                                    String: "if" [7374,7378]
                                    STRING [7379,7396]
                                        String: "${{ always() }}" [7379,7396]
                                FIELD [7397,7432]
                                    String: "uses" [7397,7403]
                                    STRING [7404,7432]
                                        String: "actions/upload-artifact@v2" [7404,7432]
                                FIELD [7433,7516]
                                    String: "with" [7433,7439]
                                    OBJECT [7440,7516]
                                        FIELD [7441,7498]
                                            String: "name" [7441,7447]
                                            STRING [7448,7498]
                                                String: "run_tests_torch_cuda_extensions_gpu_test_reports" [7448,7498]
                                        FIELD [7499,7515]
                                            String: "path" [7499,7505]
                                            STRING [7506,7515]
                                                String: "reports" [7506,7515]
            FIELD [7520,9287]
                String: "run_tests_torch_cuda_extensions_multi_gpu" [7520,7563]
                OBJECT [7564,9287]
                    FIELD [7565,7615]
                        String: "runs-on" [7565,7574]
                        ARRAY [7575,7615]
                            STRING [7576,7589]
                                String: "self-hosted" [7576,7589]
                            STRING [7590,7602]
                                String: "docker-gpu" [7590,7602]
                            STRING [7603,7614]
                                String: "multi-gpu" [7603,7614]
                    FIELD [7616,7769]
                        String: "container" [7616,7627]
                        OBJECT [7628,7769]
                            FIELD [7629,7671]
                                String: "image" [7629,7636]
                                STRING [7637,7671]
                                    String: "nvcr.io/nvidia/pytorch:21.03-py3" [7637,7671]
                            FIELD [7672,7768]
                                String: "options" [7672,7681]
                                STRING [7682,7768]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [7682,7768]
                    FIELD [7770,9286]
                        String: "steps" [7770,7777]
                        ARRAY [7778,9286]
                            OBJECT [7779,7859]
                                FIELD [7780,7804]
                                    String: "name" [7780,7786]
                                    STRING [7787,7804]
                                        String: "Launcher docker" [7787,7804]
                                FIELD [7805,7833]
                                    String: "uses" [7805,7811]
                                    STRING [7812,7833]
                                        String: "actions/checkout@v2" [7812,7833]
                                FIELD [7834,7858]
                                    String: "with" [7834,7840]
                                    OBJECT [7841,7858]
                                        FIELD [7842,7857]
                                            String: "fetch-depth" [7842,7855]
                                            NUMBER [7856,7857]
                                                Number: 2 [7856,7857]
                            OBJECT [7860,7927]
                                FIELD [7861,7880]
                                    String: "name" [7861,7867]
                                    STRING [7868,7880]
                                        String: "NVIDIA-SMI" [7868,7880]
                                FIELD [7881,7905]
                                    String: "continue-on-error" [7881,7900]
                                    TRUE [7901,7905]
                                FIELD [7906,7926]
                                    String: "run" [7906,7911]
                                    STRING [7912,7926]
                                        String: "nvidia-smi\n" [7912,7926]
                            OBJECT [7928,8083]
                                FIELD [7929,7958]
                                    String: "name" [7929,7935]
                                    STRING [7936,7958]
                                        String: "Install dependencies" [7936,7958]
                                FIELD [7959,8082]
                                    String: "run" [7959,7964]
                                    STRING [7965,8082]
                                        String: "apt -y update && apt install -y libaio-dev\npip install --upgrade pip\npip install .[testing,deepspeed,fairscale]\n" [7965,8082]
                            OBJECT [8084,8473]
                                FIELD [8085,8134]
                                    String: "name" [8085,8091]
                                    STRING [8092,8134]
                                        String: "Are GPUs recognized by our DL frameworks" [8092,8134]
                                FIELD [8135,8472]
                                    String: "run" [8135,8140]
                                    STRING [8141,8472]
                                        String: "python -c \"import torch; print('Cuda available:', torch.cuda.is_available())\"\npython -c \"import torch; print('Cuda version:', torch.version.cuda)\"\npython -c \"import torch; print('CuDNN version:', torch.backends.cudnn.version())\"\npython -c \"import torch; print('Number of GPUs available:', torch.cuda.device_count())\"\n" [8141,8472]
                            OBJECT [8474,8639]
                                FIELD [8475,8506]
                                    String: "name" [8475,8481]
                                    STRING [8482,8506]
                                        String: "Fetch the tests to run" [8482,8506]
                                FIELD [8507,8638]
                                    String: "run" [8507,8512]
                                    STRING [8513,8638]
                                        String: "python utils/tests_fetcher.py --diff_with_last_commit --filters tests/deepspeed tests/extended | tee test_preparation.txt\n" [8513,8638]
                            OBJECT [8640,8768]
                                FIELD [8641,8670]
                                    String: "name" [8641,8647]
                                    STRING [8648,8670]
                                        String: "Report fetched tests" [8648,8670]
                                FIELD [8671,8706]
                                    String: "uses" [8671,8677]
                                    STRING [8678,8706]
                                        String: "actions/upload-artifact@v2" [8678,8706]
                                FIELD [8707,8767]
                                    String: "with" [8707,8713]
                                    OBJECT [8714,8767]
                                        FIELD [8715,8736]
                                            String: "name" [8715,8721]
                                            STRING [8722,8736]
                                                String: "test_fetched" [8722,8736]
                                        FIELD [8737,8766]
                                            String: "path" [8737,8743]
                                            STRING [8744,8766]
                                                String: "test_preparation.txt" [8744,8766]
                            OBJECT [8769,8962]
                                FIELD [8770,8799]
                                    String: "name" [8770,8776]
                                    STRING [8777,8799]
                                        String: "Run all tests on GPU" [8777,8799]
                                FIELD [8800,8961]
                                    String: "run" [8800,8805]
                                    STRING [8806,8961]
                                        String: "if [ -f test_list.txt ]; then\n  python -m pytest -n 1 --dist=loadfile -v --make-reports=tests_torch_cuda_extensions_multi_gpu $(cat test_list.txt)\nfi\n" [8806,8961]
                            OBJECT [8963,9096]
                                FIELD [8964,8994]
                                    String: "name" [8964,8970]
                                    STRING [8971,8994]
                                        String: "Failure short reports" [8971,8994]
                                FIELD [8995,9018]
                                    String: "if" [8995,8999]
                                    STRING [9000,9018]
                                        String: "${{ failure() }}" [9000,9018]
                                FIELD [9019,9095]
                                    String: "run" [9019,9024]
                                    STRING [9025,9095]
                                        String: "cat reports/tests_torch_cuda_extensions_multi_gpu_failures_short.txt" [9025,9095]
                            OBJECT [9097,9285]
                                FIELD [9098,9135]
                                    String: "name" [9098,9104]
                                    STRING [9105,9135]
                                        String: "Test suite reports artifacts" [9105,9135]
                                FIELD [9136,9158]
                                    String: "if" [9136,9140]
                                    STRING [9141,9158]
                                        String: "${{ always() }}" [9141,9158]
                                FIELD [9159,9194]
                                    String: "uses" [9159,9165]
                                    STRING [9166,9194]
                                        String: "actions/upload-artifact@v2" [9166,9194]
                                FIELD [9195,9284]
                                    String: "with" [9195,9201]
                                    OBJECT [9202,9284]
                                        FIELD [9203,9266]
                                            String: "name" [9203,9209]
                                            STRING [9210,9266]
                                                String: "run_tests_torch_cuda_extensions_multi_gpu_test_reports" [9210,9266]
                                        FIELD [9267,9283]
                                            String: "path" [9267,9273]
                                            STRING [9274,9283]
                                                String: "reports" [9274,9283]
            FIELD [9288,9832]
                String: "send_results" [9288,9302]
                OBJECT [9303,9832]
                    FIELD [9304,9336]
                        String: "name" [9304,9310]
                        STRING [9311,9336]
                            String: "Send results to webhook" [9311,9336]
                    FIELD [9337,9362]
                        String: "runs-on" [9337,9346]
                        STRING [9347,9362]
                            String: "ubuntu-latest" [9347,9362]
                    FIELD [9363,9378]
                        String: "if" [9363,9367]
                        STRING [9368,9378]
                            String: "always()" [9368,9378]
                    FIELD [9379,9520]
                        String: "needs" [9379,9386]
                        ARRAY [9387,9520]
                            STRING [9388,9409]
                                String: "run_tests_torch_gpu" [9388,9409]
                            STRING [9410,9437]
                                String: "run_tests_torch_multi_gpu" [9410,9437]
                            STRING [9438,9475]
                                String: "run_tests_torch_cuda_extensions_gpu" [9438,9475]
                            STRING [9476,9519]
                                String: "run_tests_torch_cuda_extensions_multi_gpu" [9476,9519]
                    FIELD [9521,9831]
                        String: "steps" [9521,9528]
                        ARRAY [9529,9831]
                            OBJECT [9530,9560]
                                FIELD [9531,9559]
                                    String: "uses" [9531,9537]
                                    STRING [9538,9559]
                                        String: "actions/checkout@v2" [9538,9559]
                            OBJECT [9561,9600]
                                FIELD [9562,9599]
                                    String: "uses" [9562,9568]
                                    STRING [9569,9599]
                                        String: "actions/download-artifact@v2" [9569,9599]
                            OBJECT [9601,9830]
                                FIELD [9602,9632]
                                    String: "name" [9602,9608]
                                    STRING [9609,9632]
                                        String: "Send message to Slack" [9609,9632]
                                FIELD [9633,9756]
                                    String: "env" [9633,9638]
                                    OBJECT [9639,9756]
                                        FIELD [9640,9696]
                                            String: "CI_SLACK_BOT_TOKEN" [9640,9660]
                                            STRING [9661,9696]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [9661,9696]
                                        FIELD [9697,9755]
                                            String: "CI_SLACK_CHANNEL_ID" [9697,9718]
                                            STRING [9719,9755]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [9719,9755]
                                FIELD [9757,9829]
                                    String: "run" [9757,9762]
                                    STRING [9763,9829]
                                        String: "pip install slack_sdk\npython utils/notification_service.py push" [9763,9829]