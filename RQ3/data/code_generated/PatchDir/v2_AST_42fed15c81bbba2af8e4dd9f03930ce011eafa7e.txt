OBJECT [0,3991]
    FIELD [1,20]
        String: "name" [1,7]
        STRING [8,20]
            String: "PR slow CI" [8,20]
    FIELD [21,47]
        String: "on" [21,25]
        OBJECT [26,47]
            FIELD [27,46]
                String: "pull_request" [27,41]
                NULL [42,46]
    FIELD [48,356]
        String: "env" [48,53]
        OBJECT [54,356]
            FIELD [55,77]
                String: "HF_HOME" [55,64]
                STRING [65,77]
                    String: "/mnt/cache" [65,77]
            FIELD [78,103]
                String: "TRANSFORMERS_IS_CI" [78,98]
                TRUE [99,103]
            FIELD [104,123]
                String: "OMP_NUM_THREADS" [104,121]
                NUMBER [122,123]
                    Number: 8 [122,123]
            FIELD [124,143]
                String: "MKL_NUM_THREADS" [124,141]
                NUMBER [142,143]
                    Number: 8 [142,143]
            FIELD [144,159]
                String: "RUN_SLOW" [144,154]
                TRUE [155,159]
            FIELD [160,214]
                String: "HF_HUB_READ_TOKEN" [160,179]
                STRING [180,214]
                    String: "${{ secrets.HF_HUB_READ_TOKEN }}" [180,214]
            FIELD [215,267]
                String: "SIGOPT_API_TOKEN" [215,233]
                STRING [234,267]
                    String: "${{ secrets.SIGOPT_API_TOKEN }}" [234,267]
            FIELD [268,300]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [268,295]
                TRUE [296,300]
            FIELD [301,326]
                String: "RUN_PT_TF_CROSS_TESTS" [301,324]
                NUMBER [325,326]
                    Number: 1 [325,326]
            FIELD [327,355]
                String: "CUDA_VISIBLE_DEVICES" [327,349]
                STRING [350,355]
                    String: "0,1" [350,355]
    FIELD [357,3990]
        String: "jobs" [357,363]
        OBJECT [364,3990]
            FIELD [365,795]
                String: "check_for_new_model" [365,386]
                OBJECT [387,795]
                    FIELD [388,412]
                        String: "runs-on" [388,397]
                        STRING [398,412]
                            String: "ubuntu-22.04" [398,412]
                    FIELD [413,453]
                        String: "name" [413,419]
                        STRING [420,453]
                            String: "Check if a PR is a new model PR" [420,453]
                    FIELD [454,526]
                        String: "outputs" [454,463]
                        OBJECT [464,526]
                            FIELD [465,525]
                                String: "new_model" [465,476]
                                STRING [477,525]
                                    String: "${{ steps.check_new_model.outputs.new_model }}" [477,525]
                    FIELD [527,794]
                        String: "steps" [527,534]
                        ARRAY [535,794]
                            OBJECT [536,593]
                                FIELD [537,565]
                                    String: "uses" [537,543]
                                    STRING [544,565]
                                        String: "actions/checkout@v4" [544,565]
                                FIELD [566,592]
                                    String: "with" [566,572]
                                    OBJECT [573,592]
                                        FIELD [574,591]
                                            String: "fetch-depth" [574,587]
                                            STRING [588,591]
                                                String: "0" [588,591]
                            OBJECT [594,793]
                                FIELD [595,633]
                                    String: "name" [595,601]
                                    STRING [602,633]
                                        String: "Check if there is a new model" [602,633]
                                FIELD [634,656]
                                    String: "id" [634,638]
                                    STRING [639,656]
                                        String: "check_new_model" [639,656]
                                FIELD [657,792]
                                    String: "run" [657,662]
                                    STRING [663,792]
                                        String: "python -m pip install GitPython\necho \"new_model=$(python utils/check_if_new_model_added.py | tail -n 1)\" >> $GITHUB_OUTPUT\n" [663,792]
            FIELD [796,3505]
                String: "run_new_model_tests" [796,817]
                OBJECT [818,3505]
                    FIELD [819,859]
                        String: "name" [819,825]
                        STRING [826,859]
                            String: "Run all tests for the new model" [826,859]
                    FIELD [860,1001]
                        String: "if" [860,864]
                        STRING [865,1001]
                            String: "${{ needs.check_for_new_model.outputs.new_model != '' && contains(github.event.pull_request.labels.*.name, 'single-model-run-slow') }}" [865,1001]
                    FIELD [1002,1031]
                        String: "needs" [1002,1009]
                        STRING [1010,1031]
                            String: "check_for_new_model" [1010,1031]
                    FIELD [1032,1180]
                        String: "strategy" [1032,1042]
                        OBJECT [1043,1180]
                            FIELD [1044,1061]
                                String: "fail-fast" [1044,1055]
                                FALSE [1056,1061]
                            FIELD [1062,1179]
                                String: "matrix" [1062,1070]
                                OBJECT [1071,1179]
                                    FIELD [1072,1136]
                                        String: "folders" [1072,1081]
                                        ARRAY [1082,1136]
                                            STRING [1083,1135]
                                                String: "${{ needs.check_for_new_model.outputs.new_model }}" [1083,1135]
                                    FIELD [1137,1178]
                                        String: "machine_type" [1137,1151]
                                        ARRAY [1152,1178]
                                            STRING [1153,1165]
                                                String: "single-gpu" [1153,1165]
                                            STRING [1166,1177]
                                                String: "multi-gpu" [1166,1177]
                    FIELD [1181,1250]
                        String: "runs-on" [1181,1190]
                        ARRAY [1191,1250]
                            STRING [1192,1220]
                                String: "${{ matrix.machine_type }}" [1192,1220]
                            STRING [1221,1233]
                                String: "nvidia-gpu" [1221,1233]
                            STRING [1234,1238]
                                String: "t4" [1234,1238]
                            STRING [1239,1249]
                                String: "daily-ci" [1239,1249]
                    FIELD [1251,1413]
                        String: "container" [1251,1262]
                        OBJECT [1263,1413]
                            FIELD [1264,1313]
                                String: "image" [1264,1271]
                                STRING [1272,1313]
                                    String: "huggingface/transformers-all-latest-gpu" [1272,1313]
                            FIELD [1314,1412]
                                String: "options" [1314,1323]
                                STRING [1324,1412]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1324,1412]
                    FIELD [1414,3504]
                        String: "steps" [1414,1421]
                        ARRAY [1422,3504]
                            OBJECT [1423,1516]
                                FIELD [1424,1459]
                                    String: "name" [1424,1430]
                                    STRING [1431,1459]
                                        String: "Echo input and matrix info" [1431,1459]
                                FIELD [1460,1474]
                                    String: "shell" [1460,1467]
                                    STRING [1468,1474]
                                        String: "bash" [1468,1474]
                                FIELD [1475,1515]
                                    String: "run" [1475,1480]
                                    STRING [1481,1515]
                                        String: "echo \"${{ matrix.folders }}\"\n" [1481,1515]
                            OBJECT [1517,1791]
                                FIELD [1518,1560]
                                    String: "name" [1518,1524]
                                    STRING [1525,1560]
                                        String: "Echo folder ${{ matrix.folders }}" [1525,1560]
                                FIELD [1561,1575]
                                    String: "shell" [1561,1568]
                                    STRING [1569,1575]
                                        String: "bash" [1569,1575]
                                FIELD [1576,1790]
                                    String: "run" [1576,1581]
                                    STRING [1582,1790]
                                        String: "echo \"${{ matrix.folders }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [1582,1790]
                            OBJECT [1792,1927]
                                FIELD [1793,1814]
                                    String: "name" [1793,1799]
                                    STRING [1800,1814]
                                        String: "Update clone" [1800,1814]
                                FIELD [1815,1850]
                                    String: "working-directory" [1815,1834]
                                    STRING [1835,1850]
                                        String: "/transformers" [1835,1850]
                                FIELD [1851,1926]
                                    String: "run" [1851,1856]
                                    STRING [1857,1926]
                                        String: "git fetch && git checkout ${{ github.event.pull_request.head.sha }}" [1857,1926]
                            OBJECT [1928,2143]
                                FIELD [1929,2026]
                                    String: "name" [1929,1935]
                                    STRING [1936,2026]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [1936,2026]
                                FIELD [2027,2062]
                                    String: "working-directory" [2027,2046]
                                    STRING [2047,2062]
                                        String: "/transformers" [2047,2062]
                                FIELD [2063,2142]
                                    String: "run" [2063,2068]
                                    STRING [2069,2142]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [2069,2142]
                            OBJECT [2144,2186]
                                FIELD [2145,2164]
                                    String: "name" [2145,2151]
                                    STRING [2152,2164]
                                        String: "NVIDIA-SMI" [2152,2164]
                                FIELD [2165,2185]
                                    String: "run" [2165,2170]
                                    STRING [2171,2185]
                                        String: "nvidia-smi\n" [2171,2185]
                            OBJECT [2187,2282]
                                FIELD [2188,2208]
                                    String: "name" [2188,2194]
                                    STRING [2195,2208]
                                        String: "Environment" [2195,2208]
                                FIELD [2209,2244]
                                    String: "working-directory" [2209,2228]
                                    STRING [2229,2244]
                                        String: "/transformers" [2229,2244]
                                FIELD [2245,2281]
                                    String: "run" [2245,2250]
                                    STRING [2251,2281]
                                        String: "python3 utils/print_env.py\n" [2251,2281]
                            OBJECT [2283,2392]
                                FIELD [2284,2336]
                                    String: "name" [2284,2290]
                                    STRING [2291,2336]
                                        String: "Show installed libraries and their versions" [2291,2336]
                                FIELD [2337,2372]
                                    String: "working-directory" [2337,2356]
                                    STRING [2357,2372]
                                        String: "/transformers" [2357,2372]
                                FIELD [2373,2391]
                                    String: "run" [2373,2378]
                                    STRING [2379,2391]
                                        String: "pip freeze" [2379,2391]
                            OBJECT [2393,2595]
                                FIELD [2394,2423]
                                    String: "name" [2394,2400]
                                    STRING [2401,2423]
                                        String: "Run all tests on GPU" [2401,2423]
                                FIELD [2424,2459]
                                    String: "working-directory" [2424,2443]
                                    STRING [2444,2459]
                                        String: "/transformers" [2444,2459]
                                FIELD [2460,2594]
                                    String: "run" [2460,2465]
                                    STRING [2466,2594]
                                        String: "python3 -m pytest -v -rs --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} tests/${{ matrix.folders }}" [2466,2594]
                            OBJECT [2596,2789]
                                FIELD [2597,2627]
                                    String: "name" [2597,2603]
                                    STRING [2604,2627]
                                        String: "Failure short reports" [2604,2627]
                                FIELD [2628,2651]
                                    String: "if" [2628,2632]
                                    STRING [2633,2651]
                                        String: "${{ failure() }}" [2633,2651]
                                FIELD [2652,2676]
                                    String: "continue-on-error" [2652,2671]
                                    TRUE [2672,2676]
                                FIELD [2677,2788]
                                    String: "run" [2677,2682]
                                    STRING [2683,2788]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [2683,2788]
                            OBJECT [2790,3127]
                                FIELD [2791,2833]
                                    String: "name" [2791,2797]
                                    STRING [2798,2833]
                                        String: "Make sure report directory exists" [2798,2833]
                                FIELD [2834,2848]
                                    String: "shell" [2834,2841]
                                    STRING [2842,2848]
                                        String: "bash" [2842,2848]
                                FIELD [2849,3126]
                                    String: "run" [2849,2854]
                                    STRING [2855,3126]
                                        String: "mkdir -p /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}\necho \"hello\" > /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/hello.txt\necho \"${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}\"\n" [2855,3126]
                            OBJECT [3128,3503]
                                FIELD [3129,3251]
                                    String: "name" [3129,3135]
                                    STRING [3136,3251]
                                        String: "Test suite reports artifacts: ${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [3136,3251]
                                FIELD [3252,3274]
                                    String: "if" [3252,3256]
                                    STRING [3257,3274]
                                        String: "${{ always() }}" [3257,3274]
                                FIELD [3275,3310]
                                    String: "uses" [3275,3281]
                                    STRING [3282,3310]
                                        String: "actions/upload-artifact@v4" [3282,3310]
                                FIELD [3311,3502]
                                    String: "with" [3311,3317]
                                    OBJECT [3318,3502]
                                        FIELD [3319,3411]
                                            String: "name" [3319,3325]
                                            STRING [3326,3411]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [3326,3411]
                                        FIELD [3412,3501]
                                            String: "path" [3412,3418]
                                            STRING [3419,3501]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [3419,3501]
            FIELD [3506,3989]
                String: "slow_test_result" [3506,3524]
                OBJECT [3525,3989]
                    FIELD [3526,3550]
                        String: "runs-on" [3526,3535]
                        STRING [3536,3550]
                            String: "ubuntu-22.04" [3536,3550]
                    FIELD [3551,3582]
                        String: "name" [3551,3557]
                        STRING [3558,3582]
                            String: "Check slow test status" [3558,3582]
                    FIELD [3583,3636]
                        String: "needs" [3583,3590]
                        ARRAY [3591,3636]
                            STRING [3592,3613]
                                String: "check_for_new_model" [3592,3613]
                            STRING [3614,3635]
                                String: "run_new_model_tests" [3614,3635]
                    FIELD [3637,3652]
                        String: "if" [3637,3641]
                        STRING [3642,3652]
                            String: "always()" [3642,3652]
                    FIELD [3653,3988]
                        String: "steps" [3653,3660]
                        ARRAY [3661,3988]
                            OBJECT [3662,3987]
                                FIELD [3663,3689]
                                    String: "name" [3663,3669]
                                    STRING [3670,3689]
                                        String: "Check test status" [3670,3689]
                                FIELD [3690,3704]
                                    String: "shell" [3690,3697]
                                    STRING [3698,3704]
                                        String: "bash" [3698,3704]
                                FIELD [3705,3986]
                                    String: "run" [3705,3710]
                                    STRING [3711,3986]
                                        String: "echo \"${{ needs.run_new_model_tests.result }}\"\nif [ \"${{ needs.check_for_new_model.outputs.new_model }}\" = \"\" ]; then echo \"not new model\"; elif [ \"${{ needs.run_new_model_tests.result }}\" != \"success\" ]; then echo \"failure\"; exit -1; else echo \"pass\"; fi;" [3711,3986]