OBJECT [0,10778]
    FIELD [1,43]
        String: "name" [1,7]
        STRING [8,43]
            String: "Self-hosted runner AMD GPU (push)" [8,43]
    FIELD [44,126]
        String: "on" [44,48]
        OBJECT [49,126]
            FIELD [50,125]
                String: "workflow_call" [50,65]
                OBJECT [66,125]
                    FIELD [67,124]
                        String: "inputs" [67,75]
                        OBJECT [76,124]
                            FIELD [77,123]
                                String: "gpu_flavor" [77,89]
                                OBJECT [90,123]
                                    FIELD [91,106]
                                        String: "required" [91,101]
                                        TRUE [102,106]
                                    FIELD [107,122]
                                        String: "type" [107,113]
                                        STRING [114,122]
                                            String: "string" [114,122]
    FIELD [127,357]
        String: "env" [127,132]
        OBJECT [133,357]
            FIELD [134,156]
                String: "HF_HOME" [134,143]
                STRING [144,156]
                    String: "/mnt/cache" [144,156]
            FIELD [157,182]
                String: "TRANSFORMERS_IS_CI" [157,177]
                TRUE [178,182]
            FIELD [183,202]
                String: "OMP_NUM_THREADS" [183,200]
                NUMBER [201,202]
                    Number: 8 [201,202]
            FIELD [203,222]
                String: "MKL_NUM_THREADS" [203,220]
                NUMBER [221,222]
                    Number: 8 [221,222]
            FIELD [223,242]
                String: "PYTEST_TIMEOUT" [223,239]
                NUMBER [240,242]
                    Number: 60 [240,242]
            FIELD [243,275]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [243,270]
                TRUE [271,275]
            FIELD [276,301]
                String: "RUN_PT_TF_CROSS_TESTS" [276,299]
                NUMBER [300,301]
                    Number: 1 [300,301]
            FIELD [302,356]
                String: "HF_HUB_READ_TOKEN" [302,321]
                STRING [322,356]
                    String: "${{ secrets.HF_HUB_READ_TOKEN }}" [322,356]
    FIELD [358,10777]
        String: "jobs" [358,364]
        OBJECT [365,10777]
            FIELD [366,721]
                String: "check_runner_status" [366,387]
                OBJECT [388,721]
                    FIELD [389,417]
                        String: "name" [389,395]
                        STRING [396,417]
                            String: "Check Runner Status" [396,417]
                    FIELD [418,442]
                        String: "runs-on" [418,427]
                        STRING [428,442]
                            String: "ubuntu-22.04" [428,442]
                    FIELD [443,720]
                        String: "steps" [443,450]
                        ARRAY [451,720]
                            OBJECT [452,538]
                                FIELD [453,483]
                                    String: "name" [453,459]
                                    STRING [460,483]
                                        String: "Checkout transformers" [460,483]
                                FIELD [484,512]
                                    String: "uses" [484,490]
                                    STRING [491,512]
                                        String: "actions/checkout@v4" [491,512]
                                FIELD [513,537]
                                    String: "with" [513,519]
                                    OBJECT [520,537]
                                        FIELD [521,536]
                                            String: "fetch-depth" [521,534]
                                            NUMBER [535,536]
                                                Number: 2 [535,536]
                            OBJECT [539,719]
                                FIELD [540,568]
                                    String: "name" [540,546]
                                    STRING [547,568]
                                        String: "Check Runner Status" [547,568]
                                FIELD [569,718]
                                    String: "run" [569,574]
                                    STRING [575,718]
                                        String: "python utils/check_self_hosted_runner.py --target_runners amd-mi210-single-gpu-ci-runner-docker --token ${{ secrets.ACCESS_REPO_INFO_TOKEN }}" [575,718]
            FIELD [722,1367]
                String: "check_runners" [722,737]
                OBJECT [738,1367]
                    FIELD [739,761]
                        String: "name" [739,745]
                        STRING [746,761]
                            String: "Check Runners" [746,761]
                    FIELD [762,791]
                        String: "needs" [762,769]
                        STRING [770,791]
                            String: "check_runner_status" [770,791]
                    FIELD [792,857]
                        String: "strategy" [792,802]
                        OBJECT [803,857]
                            FIELD [804,856]
                                String: "matrix" [804,812]
                                OBJECT [813,856]
                                    FIELD [814,855]
                                        String: "machine_type" [814,828]
                                        ARRAY [829,855]
                                            STRING [830,842]
                                                String: "single-gpu" [830,842]
                                            STRING [843,854]
                                                String: "multi-gpu" [843,854]
                    FIELD [858,949]
                        String: "runs-on" [858,867]
                        ARRAY [868,949]
                            STRING [869,882]
                                String: "self-hosted" [869,882]
                            STRING [883,892]
                                String: "amd-gpu" [883,892]
                            STRING [893,921]
                                String: "${{ matrix.machine_type }}" [893,921]
                            STRING [922,948]
                                String: "${{ inputs.gpu_flavor }}" [922,948]
                    FIELD [950,1173]
                        String: "container" [950,961]
                        OBJECT [962,1173]
                            FIELD [963,1021]
                                String: "image" [963,970]
                                STRING [971,1021]
                                    String: "huggingface/transformers-pytorch-amd-gpu-push-ci" [971,1021]
                            FIELD [1022,1172]
                                String: "options" [1022,1031]
                                STRING [1032,1172]
                                    String: "--device /dev/kfd --device /dev/dri --env ROCR_VISIBLE_DEVICES --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1032,1172]
                    FIELD [1174,1366]
                        String: "steps" [1174,1181]
                        ARRAY [1182,1366]
                            OBJECT [1183,1221]
                                FIELD [1184,1201]
                                    String: "name" [1184,1190]
                                    STRING [1191,1201]
                                        String: "ROCM-SMI" [1191,1201]
                                FIELD [1202,1220]
                                    String: "run" [1202,1207]
                                    STRING [1208,1220]
                                        String: "rocm-smi\n" [1208,1220]
                            OBJECT [1222,1285]
                                FIELD [1223,1241]
                                    String: "name" [1223,1229]
                                    STRING [1230,1241]
                                        String: "ROCM-INFO" [1230,1241]
                                FIELD [1242,1284]
                                    String: "run" [1242,1247]
                                    STRING [1248,1284]
                                        String: "rocminfo  | grep \"Agent\" -A 14\n" [1248,1284]
                            OBJECT [1286,1365]
                                FIELD [1287,1317]
                                    String: "name" [1287,1293]
                                    STRING [1294,1317]
                                        String: "Show ROCR environment" [1294,1317]
                                FIELD [1318,1364]
                                    String: "run" [1318,1323]
                                    STRING [1324,1364]
                                        String: "echo \"ROCR: $ROCR_VISIBLE_DEVICES\"\n" [1324,1364]
            FIELD [1368,4372]
                String: "setup_gpu" [1368,1379]
                OBJECT [1380,4372]
                    FIELD [1381,1395]
                        String: "name" [1381,1387]
                        STRING [1388,1395]
                            String: "Setup" [1388,1395]
                    FIELD [1396,1419]
                        String: "needs" [1396,1403]
                        STRING [1404,1419]
                            String: "check_runners" [1404,1419]
                    FIELD [1420,1485]
                        String: "strategy" [1420,1430]
                        OBJECT [1431,1485]
                            FIELD [1432,1484]
                                String: "matrix" [1432,1440]
                                OBJECT [1441,1484]
                                    FIELD [1442,1483]
                                        String: "machine_type" [1442,1456]
                                        ARRAY [1457,1483]
                                            STRING [1458,1470]
                                                String: "single-gpu" [1458,1470]
                                            STRING [1471,1482]
                                                String: "multi-gpu" [1471,1482]
                    FIELD [1486,1577]
                        String: "runs-on" [1486,1495]
                        ARRAY [1496,1577]
                            STRING [1497,1510]
                                String: "self-hosted" [1497,1510]
                            STRING [1511,1520]
                                String: "amd-gpu" [1511,1520]
                            STRING [1521,1549]
                                String: "${{ matrix.machine_type }}" [1521,1549]
                            STRING [1550,1576]
                                String: "${{ inputs.gpu_flavor }}" [1550,1576]
                    FIELD [1578,1801]
                        String: "container" [1578,1589]
                        OBJECT [1590,1801]
                            FIELD [1591,1649]
                                String: "image" [1591,1598]
                                STRING [1599,1649]
                                    String: "huggingface/transformers-pytorch-amd-gpu-push-ci" [1599,1649]
                            FIELD [1650,1800]
                                String: "options" [1650,1659]
                                STRING [1660,1800]
                                    String: "--device /dev/kfd --device /dev/dri --env ROCR_VISIBLE_DEVICES --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1660,1800]
                    FIELD [1802,1917]
                        String: "outputs" [1802,1811]
                        OBJECT [1812,1917]
                            FIELD [1813,1862]
                                String: "matrix" [1813,1821]
                                STRING [1822,1862]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [1822,1862]
                            FIELD [1863,1916]
                                String: "test_map" [1863,1873]
                                STRING [1874,1916]
                                    String: "${{ steps.set-matrix.outputs.test_map }}" [1874,1916]
                    FIELD [1918,2157]
                        String: "env" [1918,1923]
                        OBJECT [1924,2157]
                            FIELD [1925,1967]
                                String: "CI_BRANCH_PUSH" [1925,1941]
                                STRING [1942,1967]
                                    String: "${{ github.event.ref }}" [1942,1967]
                            FIELD [1968,2039]
                                String: "CI_BRANCH_WORKFLOW_RUN" [1968,1992]
                                STRING [1993,2039]
                                    String: "${{ github.event.workflow_run.head_branch }}" [1993,2039]
                            FIELD [2040,2090]
                                String: "CI_SHA_PUSH" [2040,2053]
                                STRING [2054,2090]
                                    String: "${{ github.event.head_commit.id }}" [2054,2090]
                            FIELD [2091,2156]
                                String: "CI_SHA_WORKFLOW_RUN" [2091,2112]
                                STRING [2113,2156]
                                    String: "${{ github.event.workflow_run.head_sha }}" [2113,2156]
                    FIELD [2158,4371]
                        String: "steps" [2158,2165]
                        ARRAY [2166,4371]
                            OBJECT [2167,2664]
                                FIELD [2168,2213]
                                    String: "name" [2168,2174]
                                    STRING [2175,2213]
                                        String: "Prepare custom environment variables" [2175,2213]
                                FIELD [2214,2228]
                                    String: "shell" [2214,2221]
                                    STRING [2222,2228]
                                        String: "bash" [2222,2228]
                                FIELD [2229,2663]
                                    String: "run" [2229,2234]
                                    STRING [2235,2663]
                                        String: "CI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [2235,2663]
                            OBJECT [2665,2800]
                                FIELD [2666,2702]
                                    String: "name" [2666,2672]
                                    STRING [2673,2702]
                                        String: "print environment variables" [2673,2702]
                                FIELD [2703,2799]
                                    String: "run" [2703,2708]
                                    STRING [2709,2799]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [2709,2799]
                            OBJECT [2801,3122]
                                FIELD [2802,2851]
                                    String: "name" [2802,2808]
                                    STRING [2809,2851]
                                        String: "Update clone using environment variables" [2809,2851]
                                FIELD [2852,2887]
                                    String: "working-directory" [2852,2871]
                                    STRING [2872,2887]
                                        String: "/transformers" [2872,2887]
                                FIELD [2888,3121]
                                    String: "run" [2888,2893]
                                    STRING [2894,3121]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [2894,3121]
                            OBJECT [3123,3261]
                                FIELD [3124,3140]
                                    String: "name" [3124,3130]
                                    STRING [3131,3140]
                                        String: "Cleanup" [3131,3140]
                                FIELD [3141,3176]
                                    String: "working-directory" [3141,3160]
                                    STRING [3161,3176]
                                        String: "/transformers" [3161,3176]
                                FIELD [3177,3260]
                                    String: "run" [3177,3182]
                                    STRING [3183,3260]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [3183,3260]
                            OBJECT [3262,3371]
                                FIELD [3263,3315]
                                    String: "name" [3263,3269]
                                    STRING [3270,3315]
                                        String: "Show installed libraries and their versions" [3270,3315]
                                FIELD [3316,3351]
                                    String: "working-directory" [3316,3335]
                                    STRING [3336,3351]
                                        String: "/transformers" [3336,3351]
                                FIELD [3352,3370]
                                    String: "run" [3352,3357]
                                    STRING [3358,3370]
                                        String: "pip freeze" [3358,3370]
                            OBJECT [3372,3567]
                                FIELD [3373,3404]
                                    String: "name" [3373,3379]
                                    STRING [3380,3404]
                                        String: "Fetch the tests to run" [3380,3404]
                                FIELD [3405,3440]
                                    String: "working-directory" [3405,3424]
                                    STRING [3425,3440]
                                        String: "/transformers" [3425,3440]
                                FIELD [3441,3566]
                                    String: "run" [3441,3446]
                                    STRING [3447,3566]
                                        String: "pip install --upgrade git-python\npython3 utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [3447,3566]
                            OBJECT [3568,3710]
                                FIELD [3569,3598]
                                    String: "name" [3569,3575]
                                    STRING [3576,3598]
                                        String: "Report fetched tests" [3576,3598]
                                FIELD [3599,3634]
                                    String: "uses" [3599,3605]
                                    STRING [3606,3634]
                                        String: "actions/upload-artifact@v4" [3606,3634]
                                FIELD [3635,3709]
                                    String: "with" [3635,3641]
                                    OBJECT [3642,3709]
                                        FIELD [3643,3664]
                                            String: "name" [3643,3649]
                                            STRING [3650,3664]
                                                String: "test_fetched" [3650,3664]
                                        FIELD [3665,3708]
                                            String: "path" [3665,3671]
                                            STRING [3672,3708]
                                                String: "/transformers/test_preparation.txt" [3672,3708]
                            OBJECT [3711,4370]
                                FIELD [3712,3729]
                                    String: "id" [3712,3716]
                                    STRING [3717,3729]
                                        String: "set-matrix" [3717,3729]
                                FIELD [3730,3765]
                                    String: "name" [3730,3736]
                                    STRING [3737,3765]
                                        String: "Organize tests into models" [3737,3765]
                                FIELD [3766,3801]
                                    String: "working-directory" [3766,3785]
                                    STRING [3786,3801]
                                        String: "/transformers" [3786,3801]
                                FIELD [3802,4369]
                                    String: "run" [3802,3807]
                                    STRING [3808,4369]
                                        String: "if [ -f test_map.json ]; then\n    keys=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); d = list(test_map.keys()); print(d)')\n    test_map=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); print(test_map)')\nelse\n    keys=$(python3 -c 'keys = [\"dummy\"]; print(keys)')\n    test_map=$(python3 -c 'test_map = {\"dummy\": []}; print(test_map)')\nfi\necho $keys\necho $test_map\necho \"matrix=$keys\" >> $GITHUB_OUTPUT\necho \"test_map=$test_map\" >> $GITHUB_OUTPUT\n" [3808,4369]
            FIELD [4373,8052]
                String: "run_models_gpu" [4373,4389]
                OBJECT [4390,8052]
                    FIELD [4391,4411]
                        String: "name" [4391,4397]
                        STRING [4398,4411]
                            String: "Model tests" [4398,4411]
                    FIELD [4412,4431]
                        String: "needs" [4412,4419]
                        STRING [4420,4431]
                            String: "setup_gpu" [4420,4431]
                    FIELD [4432,4506]
                        String: "if" [4432,4436]
                        STRING [4437,4506]
                            String: "contains(fromJson(needs.setup_gpu.outputs.matrix), 'dummy') != true" [4437,4506]
                    FIELD [4507,4650]
                        String: "strategy" [4507,4517]
                        OBJECT [4518,4650]
                            FIELD [4519,4536]
                                String: "fail-fast" [4519,4530]
                                FALSE [4531,4536]
                            FIELD [4537,4649]
                                String: "matrix" [4537,4545]
                                OBJECT [4546,4649]
                                    FIELD [4547,4606]
                                        String: "folders" [4547,4556]
                                        STRING [4557,4606]
                                            String: "${{ fromJson(needs.setup_gpu.outputs.matrix) }}" [4557,4606]
                                    FIELD [4607,4648]
                                        String: "machine_type" [4607,4621]
                                        ARRAY [4622,4648]
                                            STRING [4623,4635]
                                                String: "single-gpu" [4623,4635]
                                            STRING [4636,4647]
                                                String: "multi-gpu" [4636,4647]
                    FIELD [4651,4742]
                        String: "runs-on" [4651,4660]
                        ARRAY [4661,4742]
                            STRING [4662,4675]
                                String: "self-hosted" [4662,4675]
                            STRING [4676,4685]
                                String: "amd-gpu" [4676,4685]
                            STRING [4686,4714]
                                String: "${{ matrix.machine_type }}" [4686,4714]
                            STRING [4715,4741]
                                String: "${{ inputs.gpu_flavor }}" [4715,4741]
                    FIELD [4743,4966]
                        String: "container" [4743,4754]
                        OBJECT [4755,4966]
                            FIELD [4756,4814]
                                String: "image" [4756,4763]
                                STRING [4764,4814]
                                    String: "huggingface/transformers-pytorch-amd-gpu-push-ci" [4764,4814]
                            FIELD [4815,4965]
                                String: "options" [4815,4824]
                                STRING [4825,4965]
                                    String: "--device /dev/kfd --device /dev/dri --env ROCR_VISIBLE_DEVICES --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [4825,4965]
                    FIELD [4967,5206]
                        String: "env" [4967,4972]
                        OBJECT [4973,5206]
                            FIELD [4974,5016]
                                String: "CI_BRANCH_PUSH" [4974,4990]
                                STRING [4991,5016]
                                    String: "${{ github.event.ref }}" [4991,5016]
                            FIELD [5017,5088]
                                String: "CI_BRANCH_WORKFLOW_RUN" [5017,5041]
                                STRING [5042,5088]
                                    String: "${{ github.event.workflow_run.head_branch }}" [5042,5088]
                            FIELD [5089,5139]
                                String: "CI_SHA_PUSH" [5089,5102]
                                STRING [5103,5139]
                                    String: "${{ github.event.head_commit.id }}" [5103,5139]
                            FIELD [5140,5205]
                                String: "CI_SHA_WORKFLOW_RUN" [5140,5161]
                                STRING [5162,5205]
                                    String: "${{ github.event.workflow_run.head_sha }}" [5162,5205]
                    FIELD [5207,8051]
                        String: "steps" [5207,5214]
                        ARRAY [5215,8051]
                            OBJECT [5216,5713]
                                FIELD [5217,5262]
                                    String: "name" [5217,5223]
                                    STRING [5224,5262]
                                        String: "Prepare custom environment variables" [5224,5262]
                                FIELD [5263,5277]
                                    String: "shell" [5263,5270]
                                    STRING [5271,5277]
                                        String: "bash" [5271,5277]
                                FIELD [5278,5712]
                                    String: "run" [5278,5283]
                                    STRING [5284,5712]
                                        String: "CI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [5284,5712]
                            OBJECT [5714,5849]
                                FIELD [5715,5751]
                                    String: "name" [5715,5721]
                                    STRING [5722,5751]
                                        String: "print environment variables" [5722,5751]
                                FIELD [5752,5848]
                                    String: "run" [5752,5757]
                                    STRING [5758,5848]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [5758,5848]
                            OBJECT [5850,6171]
                                FIELD [5851,5900]
                                    String: "name" [5851,5857]
                                    STRING [5858,5900]
                                        String: "Update clone using environment variables" [5858,5900]
                                FIELD [5901,5936]
                                    String: "working-directory" [5901,5920]
                                    STRING [5921,5936]
                                        String: "/transformers" [5921,5936]
                                FIELD [5937,6170]
                                    String: "run" [5937,5942]
                                    STRING [5943,6170]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [5943,6170]
                            OBJECT [6172,6387]
                                FIELD [6173,6270]
                                    String: "name" [6173,6179]
                                    STRING [6180,6270]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [6180,6270]
                                FIELD [6271,6306]
                                    String: "working-directory" [6271,6290]
                                    STRING [6291,6306]
                                        String: "/transformers" [6291,6306]
                                FIELD [6307,6386]
                                    String: "run" [6307,6312]
                                    STRING [6313,6386]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [6313,6386]
                            OBJECT [6388,6738]
                                FIELD [6389,6431]
                                    String: "name" [6389,6395]
                                    STRING [6396,6431]
                                        String: "Echo folder ${{ matrix.folders }}" [6396,6431]
                                FIELD [6432,6446]
                                    String: "shell" [6432,6439]
                                    STRING [6440,6446]
                                        String: "bash" [6440,6446]
                                FIELD [6447,6737]
                                    String: "run" [6447,6452]
                                    STRING [6453,6737]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup_gpu.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [6453,6737]
                            OBJECT [6739,6777]
                                FIELD [6740,6757]
                                    String: "name" [6740,6746]
                                    STRING [6747,6757]
                                        String: "ROCM-SMI" [6747,6757]
                                FIELD [6758,6776]
                                    String: "run" [6758,6763]
                                    STRING [6764,6776]
                                        String: "rocm-smi\n" [6764,6776]
                            OBJECT [6778,6841]
                                FIELD [6779,6797]
                                    String: "name" [6779,6785]
                                    STRING [6786,6797]
                                        String: "ROCM-INFO" [6786,6797]
                                FIELD [6798,6840]
                                    String: "run" [6798,6803]
                                    STRING [6804,6840]
                                        String: "rocminfo  | grep \"Agent\" -A 14\n" [6804,6840]
                            OBJECT [6842,6921]
                                FIELD [6843,6873]
                                    String: "name" [6843,6849]
                                    STRING [6850,6873]
                                        String: "Show ROCR environment" [6850,6873]
                                FIELD [6874,6920]
                                    String: "run" [6874,6879]
                                    STRING [6880,6920]
                                        String: "echo \"ROCR: $ROCR_VISIBLE_DEVICES\"\n" [6880,6920]
                            OBJECT [6922,7017]
                                FIELD [6923,6943]
                                    String: "name" [6923,6929]
                                    STRING [6930,6943]
                                        String: "Environment" [6930,6943]
                                FIELD [6944,6979]
                                    String: "working-directory" [6944,6963]
                                    STRING [6964,6979]
                                        String: "/transformers" [6964,6979]
                                FIELD [6980,7016]
                                    String: "run" [6980,6985]
                                    STRING [6986,7016]
                                        String: "python3 utils/print_env.py\n" [6986,7016]
                            OBJECT [7018,7127]
                                FIELD [7019,7071]
                                    String: "name" [7019,7025]
                                    STRING [7026,7071]
                                        String: "Show installed libraries and their versions" [7026,7071]
                                FIELD [7072,7107]
                                    String: "working-directory" [7072,7091]
                                    STRING [7092,7107]
                                        String: "/transformers" [7092,7107]
                                FIELD [7108,7126]
                                    String: "run" [7108,7113]
                                    STRING [7114,7126]
                                        String: "pip freeze" [7114,7126]
                            OBJECT [7128,7450]
                                FIELD [7129,7176]
                                    String: "name" [7129,7135]
                                    STRING [7136,7176]
                                        String: "Run all non-slow selected tests on GPU" [7136,7176]
                                FIELD [7177,7212]
                                    String: "working-directory" [7177,7196]
                                    STRING [7197,7212]
                                        String: "/transformers" [7197,7212]
                                FIELD [7213,7449]
                                    String: "run" [7213,7218]
                                    STRING [7219,7449]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_run_models_gpu_${{ matrix.folders }}_test_reports ${{ fromJson(needs.setup_gpu.outputs.test_map)[matrix.folders] }} -m \"not not_device_test\"\n" [7219,7449]
                            OBJECT [7451,7662]
                                FIELD [7452,7482]
                                    String: "name" [7452,7458]
                                    STRING [7459,7482]
                                        String: "Failure short reports" [7459,7482]
                                FIELD [7483,7506]
                                    String: "if" [7483,7487]
                                    STRING [7488,7506]
                                        String: "${{ failure() }}" [7488,7506]
                                FIELD [7507,7531]
                                    String: "continue-on-error" [7507,7526]
                                    TRUE [7527,7531]
                                FIELD [7532,7661]
                                    String: "run" [7532,7537]
                                    STRING [7538,7661]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_run_models_gpu_${{ matrix.folders }}_test_reports/failures_short.txt" [7538,7661]
                            OBJECT [7663,8050]
                                FIELD [7664,7783]
                                    String: "name" [7664,7670]
                                    STRING [7671,7783]
                                        String: "Test suite reports artifacts: ${{ matrix.machine_type }}_run_models_gpu_${{ env.matrix_folders }}_test_reports" [7671,7783]
                                FIELD [7784,7806]
                                    String: "if" [7784,7788]
                                    STRING [7789,7806]
                                        String: "${{ always() }}" [7789,7806]
                                FIELD [7807,7842]
                                    String: "uses" [7807,7813]
                                    STRING [7814,7842]
                                        String: "actions/upload-artifact@v4" [7814,7842]
                                FIELD [7843,8049]
                                    String: "with" [7843,7849]
                                    OBJECT [7850,8049]
                                        FIELD [7851,7940]
                                            String: "name" [7851,7857]
                                            STRING [7858,7940]
                                                String: "${{ matrix.machine_type }}_run_models_gpu_${{ env.matrix_folders }}_test_reports" [7858,7940]
                                        FIELD [7941,8048]
                                            String: "path" [7941,7947]
                                            STRING [7948,8048]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_run_models_gpu_${{ matrix.folders }}_test_reports" [7948,8048]
            FIELD [8053,10776]
                String: "send_results" [8053,8067]
                OBJECT [8068,10776]
                    FIELD [8069,8101]
                        String: "name" [8069,8075]
                        STRING [8076,8101]
                            String: "Send results to webhook" [8076,8101]
                    FIELD [8102,8126]
                        String: "runs-on" [8102,8111]
                        STRING [8112,8126]
                            String: "ubuntu-22.04" [8112,8126]
                    FIELD [8127,8142]
                        String: "if" [8127,8131]
                        STRING [8132,8142]
                            String: "always()" [8132,8142]
                    FIELD [8143,8219]
                        String: "needs" [8143,8150]
                        ARRAY [8151,8219]
                            STRING [8152,8173]
                                String: "check_runner_status" [8152,8173]
                            STRING [8174,8189]
                                String: "check_runners" [8174,8189]
                            STRING [8190,8201]
                                String: "setup_gpu" [8190,8201]
                            STRING [8202,8218]
                                String: "run_models_gpu" [8202,8218]
                    FIELD [8220,8459]
                        String: "env" [8220,8225]
                        OBJECT [8226,8459]
                            FIELD [8227,8269]
                                String: "CI_BRANCH_PUSH" [8227,8243]
                                STRING [8244,8269]
                                    String: "${{ github.event.ref }}" [8244,8269]
                            FIELD [8270,8341]
                                String: "CI_BRANCH_WORKFLOW_RUN" [8270,8294]
                                STRING [8295,8341]
                                    String: "${{ github.event.workflow_run.head_branch }}" [8295,8341]
                            FIELD [8342,8392]
                                String: "CI_SHA_PUSH" [8342,8355]
                                STRING [8356,8392]
                                    String: "${{ github.event.head_commit.id }}" [8356,8392]
                            FIELD [8393,8458]
                                String: "CI_SHA_WORKFLOW_RUN" [8393,8414]
                                STRING [8415,8458]
                                    String: "${{ github.event.workflow_run.head_sha }}" [8415,8458]
                    FIELD [8460,10775]
                        String: "steps" [8460,8467]
                        ARRAY [8468,10775]
                            OBJECT [8469,8710]
                                FIELD [8470,8501]
                                    String: "name" [8470,8476]
                                    STRING [8477,8501]
                                        String: "Preliminary job status" [8477,8501]
                                FIELD [8502,8516]
                                    String: "shell" [8502,8509]
                                    STRING [8510,8516]
                                        String: "bash" [8510,8516]
                                FIELD [8517,8709]
                                    String: "run" [8517,8522]
                                    STRING [8523,8709]
                                        String: "echo \"Runner availability: ${{ needs.check_runner_status.result }}\"\necho \"Setup status: ${{ needs.setup_gpu.result }}\"\necho \"Runner status: ${{ needs.check_runners.result }}\"\n" [8523,8709]
                            OBJECT [8711,9208]
                                FIELD [8712,8757]
                                    String: "name" [8712,8718]
                                    STRING [8719,8757]
                                        String: "Prepare custom environment variables" [8719,8757]
                                FIELD [8758,8772]
                                    String: "shell" [8758,8765]
                                    STRING [8766,8772]
                                        String: "bash" [8766,8772]
                                FIELD [8773,9207]
                                    String: "run" [8773,8778]
                                    STRING [8779,9207]
                                        String: "CI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [8779,9207]
                            OBJECT [9209,9344]
                                FIELD [9210,9246]
                                    String: "name" [9210,9216]
                                    STRING [9217,9246]
                                        String: "print environment variables" [9217,9246]
                                FIELD [9247,9343]
                                    String: "run" [9247,9252]
                                    STRING [9253,9343]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [9253,9343]
                            OBJECT [9345,9401]
                                FIELD [9346,9374]
                                    String: "uses" [9346,9352]
                                    STRING [9353,9374]
                                        String: "actions/checkout@v4" [9353,9374]
                                FIELD [9375,9400]
                                    String: "with" [9375,9381]
                                    OBJECT [9382,9400]
                                        FIELD [9383,9399]
                                            String: "fetch-depth" [9383,9396]
                                            NUMBER [9397,9399]
                                                Number: 20 [9397,9399]
                            OBJECT [9402,9687]
                                FIELD [9403,9452]
                                    String: "name" [9403,9409]
                                    STRING [9410,9452]
                                        String: "Update clone using environment variables" [9410,9452]
                                FIELD [9453,9686]
                                    String: "run" [9453,9458]
                                    STRING [9459,9686]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [9459,9686]
                            OBJECT [9688,9727]
                                FIELD [9689,9726]
                                    String: "uses" [9689,9695]
                                    STRING [9696,9726]
                                        String: "actions/download-artifact@v4" [9696,9726]
                            OBJECT [9728,10774]
                                FIELD [9729,9759]
                                    String: "name" [9729,9735]
                                    STRING [9736,9759]
                                        String: "Send message to Slack" [9736,9759]
                                FIELD [9760,10614]
                                    String: "env" [9760,9765]
                                    OBJECT [9766,10614]
                                        FIELD [9767,9823]
                                            String: "CI_SLACK_BOT_TOKEN" [9767,9787]
                                            STRING [9788,9823]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [9788,9823]
                                        FIELD [9824,9882]
                                            String: "CI_SLACK_CHANNEL_ID" [9824,9845]
                                            STRING [9846,9882]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [9846,9882]
                                        FIELD [9883,9953]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [9883,9910]
                                            STRING [9911,9953]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [9911,9953]
                                        FIELD [9954,10020]
                                            String: "CI_SLACK_CHANNEL_ID_AMD" [9954,9979]
                                            STRING [9980,10020]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_AMD }}" [9980,10020]
                                        FIELD [10021,10097]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [10021,10051]
                                            STRING [10052,10097]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [10052,10097]
                                        FIELD [10098,10167]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [10098,10126]
                                            STRING [10127,10167]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_AMD }}" [10127,10167]
                                        FIELD [10168,10232]
                                            String: "ACCESS_REPO_INFO_TOKEN" [10168,10192]
                                            STRING [10193,10232]
                                                String: "${{ secrets.ACCESS_REPO_INFO_TOKEN }}" [10193,10232]
                                        FIELD [10233,10286]
                                            String: "CI_EVENT" [10233,10243]
                                            STRING [10244,10286]
                                                String: "Push CI (AMD) - ${{ inputs.gpu_flavor }}" [10244,10286]
                                        FIELD [10287,10344]
                                            String: "CI_TITLE_PUSH" [10287,10302]
                                            STRING [10303,10344]
                                                String: "${{ github.event.head_commit.message }}" [10303,10344]
                                        FIELD [10345,10423]
                                            String: "CI_TITLE_WORKFLOW_RUN" [10345,10368]
                                            STRING [10369,10423]
                                                String: "${{ github.event.workflow_run.head_commit.message }}" [10369,10423]
                                        FIELD [10424,10452]
                                            String: "CI_SHA" [10424,10432]
                                            STRING [10433,10452]
                                                String: "${{ env.CI_SHA }}" [10433,10452]
                                        FIELD [10453,10510]
                                            String: "RUNNER_STATUS" [10453,10468]
                                            STRING [10469,10510]
                                                String: "${{ needs.check_runner_status.result }}" [10469,10510]
                                        FIELD [10511,10566]
                                            String: "RUNNER_ENV_STATUS" [10511,10530]
                                            STRING [10531,10566]
                                                String: "${{ needs.check_runners.result }}" [10531,10566]
                                        FIELD [10567,10613]
                                            String: "SETUP_STATUS" [10567,10581]
                                            STRING [10582,10613]
                                                String: "${{ needs.setup_gpu.result }}" [10582,10613]
                                FIELD [10615,10773]
                                    String: "run" [10615,10620]
                                    STRING [10621,10773]
                                        String: "pip install huggingface_hub\npip install slack_sdk\npip show slack_sdk\npython utils/notification_service.py \"${{ needs.setup_gpu.outputs.matrix }}\"" [10621,10773]