OBJECT [0,2305]
    FIELD [1,18]
        String: "name" [1,7]
        STRING [8,18]
            String: "Doctests" [8,18]
    FIELD [19,120]
        String: "on" [19,23]
        OBJECT [24,120]
            FIELD [25,57]
                String: "push" [25,31]
                OBJECT [32,57]
                    FIELD [33,56]
                        String: "branches" [33,43]
                        ARRAY [44,56]
                            STRING [45,55]
                                String: "doctest*" [45,55]
            FIELD [58,84]
                String: "repository_dispatch" [58,79]
                NULL [80,84]
            FIELD [85,119]
                String: "schedule" [85,95]
                ARRAY [96,119]
                    OBJECT [97,118]
                        FIELD [98,117]
                            String: "cron" [98,104]
                            STRING [105,117]
                                String: "17 2 * * *" [105,117]
    FIELD [121,321]
        String: "env" [121,126]
        OBJECT [127,321]
            FIELD [128,150]
                String: "HF_HOME" [128,137]
                STRING [138,150]
                    String: "/mnt/cache" [138,150]
            FIELD [151,176]
                String: "TRANSFORMERS_IS_CI" [151,171]
                TRUE [172,176]
            FIELD [177,192]
                String: "RUN_SLOW" [177,187]
                TRUE [188,192]
            FIELD [193,213]
                String: "OMP_NUM_THREADS" [193,210]
                NUMBER [211,213]
                    Number: 16 [211,213]
            FIELD [214,234]
                String: "MKL_NUM_THREADS" [214,231]
                NUMBER [232,234]
                    Number: 16 [232,234]
            FIELD [235,287]
                String: "SIGOPT_API_TOKEN" [235,253]
                STRING [254,287]
                    String: "${{ secrets.SIGOPT_API_TOKEN }}" [254,287]
            FIELD [288,320]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [288,315]
                TRUE [316,320]
    FIELD [322,2304]
        String: "jobs" [322,328]
        OBJECT [329,2304]
            FIELD [330,1706]
                String: "run_doctests" [330,344]
                OBJECT [345,1706]
                    FIELD [346,387]
                        String: "runs-on" [346,355]
                        ARRAY [356,387]
                            STRING [357,370]
                                String: "self-hosted" [357,370]
                            STRING [371,386]
                                String: "doc-tests-gpu" [371,386]
                    FIELD [388,548]
                        String: "container" [388,399]
                        OBJECT [400,548]
                            FIELD [401,450]
                                String: "image" [401,408]
                                STRING [409,450]
                                    String: "huggingface/transformers-all-latest-gpu" [409,450]
                            FIELD [451,547]
                                String: "options" [451,460]
                                STRING [461,547]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [461,547]
                    FIELD [549,1705]
                        String: "steps" [549,556]
                        ARRAY [557,1705]
                            OBJECT [558,678]
                                FIELD [559,628]
                                    String: "name" [559,565]
                                    STRING [566,628]
                                        String: "uninstall transformers (installed during docker image build)" [566,628]
                                FIELD [629,677]
                                    String: "run" [629,634]
                                    STRING [635,677]
                                        String: "python3 -m pip uninstall -y transformers" [635,677]
                            OBJECT [679,709]
                                FIELD [680,708]
                                    String: "uses" [680,686]
                                    STRING [687,708]
                                        String: "actions/checkout@v3" [687,708]
                            OBJECT [710,752]
                                FIELD [711,730]
                                    String: "name" [711,717]
                                    STRING [718,730]
                                        String: "NVIDIA-SMI" [718,730]
                                FIELD [731,751]
                                    String: "run" [731,736]
                                    STRING [737,751]
                                        String: "nvidia-smi\n" [737,751]
                            OBJECT [753,833]
                                FIELD [754,796]
                                    String: "name" [754,760]
                                    STRING [761,796]
                                        String: "Install transformers in edit mode" [761,796]
                                FIELD [797,832]
                                    String: "run" [797,802]
                                    STRING [803,832]
                                        String: "python3 -m pip install -e ." [803,832]
                            OBJECT [834,896]
                                FIELD [835,858]
                                    String: "name" [835,841]
                                    STRING [842,858]
                                        String: "GPU visibility" [842,858]
                                FIELD [859,895]
                                    String: "run" [859,864]
                                    STRING [865,895]
                                        String: "python3 utils/print_env.py\n" [865,895]
                            OBJECT [897,970]
                                FIELD [898,950]
                                    String: "name" [898,904]
                                    STRING [905,950]
                                        String: "Show installed libraries and their versions" [905,950]
                                FIELD [951,969]
                                    String: "run" [951,956]
                                    STRING [957,969]
                                        String: "pip freeze" [957,969]
                            OBJECT [971,1213]
                                FIELD [972,998]
                                    String: "name" [972,978]
                                    STRING [979,998]
                                        String: "Get doctest files" [979,998]
                                FIELD [999,1212]
                                    String: "run" [999,1004]
                                    STRING [1005,1212]
                                        String: "$(python3 -c 'from utils.tests_fetcher import get_all_doctest_files; to_test = get_all_doctest_files(); to_test = \" \".join(to_test); fp = open(\"doc_tests.txt\", \"w\"); fp.write(to_test); fp.close()')\n" [1005,1212]
                            OBJECT [1214,1394]
                                FIELD [1215,1236]
                                    String: "name" [1215,1221]
                                    STRING [1222,1236]
                                        String: "Run doctests" [1222,1236]
                                FIELD [1237,1393]
                                    String: "run" [1237,1242]
                                    STRING [1243,1393]
                                        String: "python3 -m pytest -v --make-reports doc_tests_gpu --doctest-modules $(cat doc_tests.txt) -sv --doctest-continue-on-failure --doctest-glob=\"*.md\"\n" [1243,1393]
                            OBJECT [1395,1529]
                                FIELD [1396,1426]
                                    String: "name" [1396,1402]
                                    STRING [1403,1426]
                                        String: "Failure short reports" [1403,1426]
                                FIELD [1427,1450]
                                    String: "if" [1427,1431]
                                    STRING [1432,1450]
                                        String: "${{ failure() }}" [1432,1450]
                                FIELD [1451,1475]
                                    String: "continue-on-error" [1451,1470]
                                    TRUE [1471,1475]
                                FIELD [1476,1528]
                                    String: "run" [1476,1481]
                                    STRING [1482,1528]
                                        String: "cat reports/doc_tests_gpu/failures_short.txt" [1482,1528]
                            OBJECT [1530,1704]
                                FIELD [1531,1568]
                                    String: "name" [1531,1537]
                                    STRING [1538,1568]
                                        String: "Test suite reports artifacts" [1538,1568]
                                FIELD [1569,1591]
                                    String: "if" [1569,1573]
                                    STRING [1574,1591]
                                        String: "${{ always() }}" [1574,1591]
                                FIELD [1592,1627]
                                    String: "uses" [1592,1598]
                                    STRING [1599,1627]
                                        String: "actions/upload-artifact@v3" [1599,1627]
                                FIELD [1628,1703]
                                    String: "with" [1628,1634]
                                    OBJECT [1635,1703]
                                        FIELD [1636,1671]
                                            String: "name" [1636,1642]
                                            STRING [1643,1671]
                                                String: "doc_tests_gpu_test_reports" [1643,1671]
                                        FIELD [1672,1702]
                                            String: "path" [1672,1678]
                                            STRING [1679,1702]
                                                String: "reports/doc_tests_gpu" [1679,1702]
            FIELD [1707,2303]
                String: "send_results" [1707,1721]
                OBJECT [1722,2303]
                    FIELD [1723,1755]
                        String: "name" [1723,1729]
                        STRING [1730,1755]
                            String: "Send results to webhook" [1730,1755]
                    FIELD [1756,1781]
                        String: "runs-on" [1756,1765]
                        STRING [1766,1781]
                            String: "ubuntu-latest" [1766,1781]
                    FIELD [1782,1797]
                        String: "if" [1782,1786]
                        STRING [1787,1797]
                            String: "always()" [1787,1797]
                    FIELD [1798,1822]
                        String: "needs" [1798,1805]
                        ARRAY [1806,1822]
                            STRING [1807,1821]
                                String: "run_doctests" [1807,1821]
                    FIELD [1823,2302]
                        String: "steps" [1823,1830]
                        ARRAY [1831,2302]
                            OBJECT [1832,1862]
                                FIELD [1833,1861]
                                    String: "uses" [1833,1839]
                                    STRING [1840,1861]
                                        String: "actions/checkout@v3" [1840,1861]
                            OBJECT [1863,1902]
                                FIELD [1864,1901]
                                    String: "uses" [1864,1870]
                                    STRING [1871,1901]
                                        String: "actions/download-artifact@v3" [1871,1901]
                            OBJECT [1903,2301]
                                FIELD [1904,1934]
                                    String: "name" [1904,1910]
                                    STRING [1911,1934]
                                        String: "Send message to Slack" [1911,1934]
                                FIELD [1935,2222]
                                    String: "env" [1935,1940]
                                    OBJECT [1941,2222]
                                        FIELD [1942,1998]
                                            String: "CI_SLACK_BOT_TOKEN" [1942,1962]
                                            STRING [1963,1998]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [1963,1998]
                                        FIELD [1999,2068]
                                            String: "CI_SLACK_CHANNEL_ID" [1999,2020]
                                            STRING [2021,2068]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY_DOCS }}" [2021,2068]
                                        FIELD [2069,2144]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [2069,2096]
                                            STRING [2097,2144]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY_DOCS }}" [2097,2144]
                                        FIELD [2145,2221]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [2145,2175]
                                            STRING [2176,2221]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [2176,2221]
                                FIELD [2223,2300]
                                    String: "run" [2223,2228]
                                    STRING [2229,2300]
                                        String: "pip install slack_sdk\npython utils/notification_service_doc_tests.py" [2229,2300]