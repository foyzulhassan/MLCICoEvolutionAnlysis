OBJECT [0,5708]
    FIELD [1,31]
        String: "name" [1,7]
        STRING [8,31]
            String: "CD - Kubernetes - Dev" [8,31]
    FIELD [32,277]
        String: "on" [32,36]
        OBJECT [37,277]
            FIELD [38,73]
                String: "schedule" [38,48]
                ARRAY [49,73]
                    OBJECT [50,72]
                        FIELD [51,71]
                            String: "cron" [51,57]
                            STRING [58,71]
                                String: "0 */3 * * *" [58,71]
            FIELD [74,276]
                String: "workflow_dispatch" [74,93]
                OBJECT [94,276]
                    FIELD [95,275]
                        String: "inputs" [95,103]
                        OBJECT [104,275]
                            FIELD [105,190]
                                String: "check-cache" [105,118]
                                OBJECT [119,190]
                                    FIELD [120,136]
                                        String: "type" [120,126]
                                        STRING [127,136]
                                            String: "boolean" [127,136]
                                    FIELD [137,173]
                                        String: "description" [137,150]
                                        STRING [151,173]
                                            String: "Check workflow cache" [151,173]
                                    FIELD [174,189]
                                        String: "default" [174,183]
                                        FALSE [184,189]
                            FIELD [191,274]
                                String: "deploy-helm" [191,204]
                                OBJECT [205,274]
                                    FIELD [206,222]
                                        String: "type" [206,212]
                                        STRING [213,222]
                                            String: "boolean" [213,222]
                                    FIELD [223,257]
                                        String: "description" [223,236]
                                        STRING [237,257]
                                            String: "Deploy Helm Charts" [237,257]
                                    FIELD [258,273]
                                        String: "default" [258,267]
                                        FALSE [268,273]
    FIELD [278,5707]
        String: "jobs" [278,284]
        OBJECT [285,5707]
            FIELD [286,824]
                String: "check-last-run" [286,302]
                OBJECT [303,824]
                    FIELD [304,329]
                        String: "runs-on" [304,313]
                        STRING [314,329]
                            String: "ubuntu-latest" [314,329]
                    FIELD [330,394]
                        String: "outputs" [330,339]
                        OBJECT [340,394]
                            FIELD [341,393]
                                String: "same-commit" [341,354]
                                STRING [355,393]
                                    String: "${{ steps.cache.outputs.cache-hit }}" [355,393]
                    FIELD [395,823]
                        String: "steps" [395,402]
                        ARRAY [403,823]
                            OBJECT [404,652]
                                FIELD [405,435]
                                    String: "name" [405,411]
                                    STRING [412,435]
                                        String: "Check for new changes" [412,435]
                                FIELD [436,519]
                                    String: "if" [436,440]
                                    STRING [441,519]
                                        String: "github.event_name == 'schedule' || github.event.inputs.check-cache == 'true'" [441,519]
                                FIELD [520,532]
                                    String: "id" [520,524]
                                    STRING [525,532]
                                        String: "cache" [525,532]
                                FIELD [533,558]
                                    String: "uses" [533,539]
                                    STRING [540,558]
                                        String: "actions/cache@v3" [540,558]
                                FIELD [559,651]
                                    String: "with" [559,565]
                                    OBJECT [566,651]
                                        FIELD [567,597]
                                            String: "path" [567,573]
                                            STRING [574,597]
                                                String: "/tmp/k8s_dev_hash.txt" [574,597]
                                        FIELD [598,631]
                                            String: "key" [598,603]
                                            STRING [604,631]
                                                String: "k8s-dev-${{ github.sha }}" [604,631]
                                        FIELD [632,650]
                                            String: "lookup-only" [632,645]
                                            TRUE [646,650]
                            OBJECT [653,822]
                                FIELD [654,678]
                                    String: "name" [654,660]
                                    STRING [661,678]
                                        String: "Save Commit SHA" [661,678]
                                FIELD [679,762]
                                    String: "if" [679,683]
                                    STRING [684,762]
                                        String: "github.event_name == 'schedule' || github.event.inputs.check-cache == 'true'" [684,762]
                                FIELD [763,821]
                                    String: "run" [763,768]
                                    STRING [769,821]
                                        String: "echo \"${{ github.sha }}\" > /tmp/k8s_dev_hash.txt" [769,821]
            FIELD [825,5706]
                String: "deploy-syft-dev" [825,842]
                OBJECT [843,5706]
                    FIELD [844,868]
                        String: "needs" [844,851]
                        STRING [852,868]
                            String: "check-last-run" [852,868]
                    FIELD [869,926]
                        String: "if" [869,873]
                        STRING [874,926]
                            String: "needs.check-last-run.outputs.same-commit != 'true'" [874,926]
                    FIELD [927,952]
                        String: "runs-on" [927,936]
                        STRING [937,952]
                            String: "ubuntu-latest" [937,952]
                    FIELD [953,5705]
                        String: "steps" [953,960]
                        ARRAY [961,5705]
                            OBJECT [962,1043]
                                FIELD [963,1000]
                                    String: "name" [963,969]
                                    STRING [970,1000]
                                        String: "Permission to home directory" [970,1000]
                                FIELD [1001,1042]
                                    String: "run" [1001,1006]
                                    STRING [1007,1042]
                                        String: "sudo chown -R $USER:$USER $HOME\n" [1007,1042]
                            OBJECT [1044,1074]
                                FIELD [1045,1073]
                                    String: "uses" [1045,1051]
                                    STRING [1052,1073]
                                        String: "actions/checkout@v4" [1052,1073]
                            OBJECT [1075,1269]
                                FIELD [1076,1104]
                                    String: "name" [1076,1082]
                                    STRING [1083,1104]
                                        String: "Checkout Infra Repo" [1083,1104]
                                FIELD [1105,1133]
                                    String: "uses" [1105,1111]
                                    STRING [1112,1133]
                                        String: "actions/checkout@v4" [1112,1133]
                                FIELD [1134,1268]
                                    String: "with" [1134,1140]
                                    OBJECT [1141,1268]
                                        FIELD [1142,1182]
                                            String: "repository" [1142,1154]
                                            STRING [1155,1182]
                                                String: "${{ secrets.INFRA_REPO }}" [1155,1182]
                                        FIELD [1183,1195]
                                            String: "ref" [1183,1188]
                                            STRING [1189,1195]
                                                String: "main" [1189,1195]
                                        FIELD [1196,1243]
                                            String: "token" [1196,1203]
                                            STRING [1204,1243]
                                                String: "${{ secrets.INFRA_BOT_COMMIT_TOKEN }}" [1204,1243]
                                        FIELD [1244,1267]
                                            String: "path" [1244,1250]
                                            STRING [1251,1267]
                                                String: "infrastructure" [1251,1267]
                            OBJECT [1270,1360]
                                FIELD [1271,1293]
                                    String: "name" [1271,1277]
                                    STRING [1278,1293]
                                        String: "Set up Python" [1278,1293]
                                FIELD [1294,1326]
                                    String: "uses" [1294,1300]
                                    STRING [1301,1326]
                                        String: "actions/setup-python@v5" [1301,1326]
                                FIELD [1327,1359]
                                    String: "with" [1327,1333]
                                    OBJECT [1334,1359]
                                        FIELD [1335,1358]
                                            String: "python-version" [1335,1351]
                                            STRING [1352,1358]
                                                String: "3.11" [1352,1358]
                            OBJECT [1361,1445]
                                FIELD [1362,1391]
                                    String: "name" [1362,1368]
                                    STRING [1369,1391]
                                        String: "Set up Docker Buildx" [1369,1391]
                                FIELD [1392,1405]
                                    String: "id" [1392,1396]
                                    STRING [1397,1405]
                                        String: "buildx" [1397,1405]
                                FIELD [1406,1444]
                                    String: "uses" [1406,1412]
                                    STRING [1413,1444]
                                        String: "docker/setup-buildx-action@v3" [1413,1444]
                            OBJECT [1446,1551]
                                FIELD [1447,1473]
                                    String: "name" [1447,1453]
                                    STRING [1454,1473]
                                        String: "Install Azure CLI" [1454,1473]
                                FIELD [1474,1550]
                                    String: "run" [1474,1479]
                                    STRING [1480,1550]
                                        String: "curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash\naz version\n" [1480,1550]
                            OBJECT [1552,1667]
                                FIELD [1553,1580]
                                    String: "name" [1553,1559]
                                    STRING [1560,1580]
                                        String: "Login to Azure CLI" [1560,1580]
                                FIELD [1581,1604]
                                    String: "uses" [1581,1587]
                                    STRING [1588,1604]
                                        String: "azure/login@v1" [1588,1604]
                                FIELD [1605,1666]
                                    String: "with" [1605,1611]
                                    OBJECT [1612,1666]
                                        FIELD [1613,1665]
                                            String: "creds" [1613,1620]
                                            STRING [1621,1665]
                                                String: "${{ secrets.AZURE_CREDENTIALS_GITHUB_CI }}" [1621,1665]
                            OBJECT [1668,1877]
                                FIELD [1669,1711]
                                    String: "name" [1669,1675]
                                    STRING [1676,1711]
                                        String: "Login to Azure Container Registry" [1676,1711]
                                FIELD [1712,1742]
                                    String: "uses" [1712,1718]
                                    STRING [1719,1742]
                                        String: "azure/docker-login@v1" [1719,1742]
                                FIELD [1743,1876]
                                    String: "with" [1743,1749]
                                    OBJECT [1750,1876]
                                        FIELD [1751,1793]
                                            String: "login-server" [1751,1765]
                                            STRING [1766,1793]
                                                String: "${{ secrets.ACR_SERVER }}" [1766,1793]
                                        FIELD [1794,1834]
                                            String: "username" [1794,1804]
                                            STRING [1805,1834]
                                                String: "${{ secrets.ACR_USERNAME }}" [1805,1834]
                                        FIELD [1835,1875]
                                            String: "password" [1835,1845]
                                            STRING [1846,1875]
                                                String: "${{ secrets.ACR_PASSWORD }}" [1846,1875]
                            OBJECT [1878,2139]
                                FIELD [1879,1912]
                                    String: "name" [1879,1885]
                                    STRING [1886,1912]
                                        String: "Set Grid package version" [1886,1912]
                                FIELD [1913,1924]
                                    String: "id" [1913,1917]
                                    STRING [1918,1924]
                                        String: "grid" [1918,1924]
                                FIELD [1925,1939]
                                    String: "shell" [1925,1932]
                                    STRING [1933,1939]
                                        String: "bash" [1933,1939]
                                FIELD [1940,2138]
                                    String: "run" [1940,1945]
                                    STRING [1946,2138]
                                        String: "echo \"GRID_VERSION=$(python packages/grid/VERSION)\" >> $GITHUB_OUTPUT\necho \"SEAWEEDFS_version=$(grep 'SEAWEEDFS_VERSION' packages/grid/default.env | cut -d '=' -f2)\" >> $GITHUB_OUTPUT\n" [1946,2138]
                            OBJECT [2140,2575]
                                FIELD [2141,2197]
                                    String: "name" [2141,2147]
                                    STRING [2148,2197]
                                        String: "Build and push `grid-backend` image to registry" [2148,2197]
                                FIELD [2198,2234]
                                    String: "uses" [2198,2204]
                                    STRING [2205,2234]
                                        String: "docker/build-push-action@v5" [2205,2234]
                                FIELD [2235,2574]
                                    String: "with" [2235,2241]
                                    OBJECT [2242,2574]
                                        FIELD [2243,2265]
                                            String: "context" [2243,2252]
                                            STRING [2253,2265]
                                                String: "./packages" [2253,2265]
                                        FIELD [2266,2317]
                                            String: "file" [2266,2272]
                                            STRING [2273,2317]
                                                String: "./packages/grid/backend/backend.dockerfile" [2273,2317]
                                        FIELD [2318,2329]
                                            String: "push" [2318,2324]
                                            TRUE [2325,2329]
                                        FIELD [2330,2348]
                                            String: "target" [2330,2338]
                                            STRING [2339,2348]
                                                String: "backend" [2339,2348]
                                        FIELD [2349,2573]
                                            String: "tags" [2349,2355]
                                            STRING [2356,2573]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-backend:${{ steps.grid.outputs.GRID_VERSION }}\n" [2356,2573]
                            OBJECT [2576,3043]
                                FIELD [2577,2634]
                                    String: "name" [2577,2583]
                                    STRING [2584,2634]
                                        String: "Build and push `grid-frontend` image to registry" [2584,2634]
                                FIELD [2635,2671]
                                    String: "uses" [2635,2641]
                                    STRING [2642,2671]
                                        String: "docker/build-push-action@v5" [2642,2671]
                                FIELD [2672,3042]
                                    String: "with" [2672,2678]
                                    OBJECT [2679,3042]
                                        FIELD [2680,2716]
                                            String: "context" [2680,2689]
                                            STRING [2690,2716]
                                                String: "./packages/grid/frontend" [2690,2716]
                                        FIELD [2717,2770]
                                            String: "file" [2717,2723]
                                            STRING [2724,2770]
                                                String: "./packages/grid/frontend/frontend.dockerfile" [2724,2770]
                                        FIELD [2771,2782]
                                            String: "push" [2771,2777]
                                            TRUE [2778,2782]
                                        FIELD [2783,3010]
                                            String: "tags" [2783,2789]
                                            STRING [2790,3010]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-frontend:${{ steps.grid.outputs.GRID_VERSION }}\n" [2790,3010]
                                        FIELD [3011,3041]
                                            String: "target" [3011,3019]
                                            STRING [3020,3041]
                                                String: "grid-ui-development" [3020,3041]
                            OBJECT [3044,3566]
                                FIELD [3045,3103]
                                    String: "name" [3045,3051]
                                    STRING [3052,3103]
                                        String: "Build and push `grid-seaweedfs` image to registry" [3052,3103]
                                FIELD [3104,3140]
                                    String: "uses" [3104,3110]
                                    STRING [3111,3140]
                                        String: "docker/build-push-action@v5" [3111,3140]
                                FIELD [3141,3565]
                                    String: "with" [3141,3147]
                                    OBJECT [3148,3565]
                                        FIELD [3149,3186]
                                            String: "context" [3149,3158]
                                            STRING [3159,3186]
                                                String: "./packages/grid/seaweedfs" [3159,3186]
                                        FIELD [3187,3242]
                                            String: "file" [3187,3193]
                                            STRING [3194,3242]
                                                String: "./packages/grid/seaweedfs/seaweedfs.dockerfile" [3194,3242]
                                        FIELD [3243,3321]
                                            String: "build-args" [3243,3255]
                                            STRING [3256,3321]
                                                String: "SEAWEEDFS_VERSION=${{ steps.grid.outputs.SEAWEEDFS_VERSION }}\n" [3256,3321]
                                        FIELD [3322,3333]
                                            String: "push" [3322,3328]
                                            TRUE [3329,3333]
                                        FIELD [3334,3564]
                                            String: "tags" [3334,3340]
                                            STRING [3341,3564]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-seaweedfs:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-seaweedfs:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-seaweedfs:${{ steps.grid.outputs.GRID_VERSION }}\n" [3341,3564]
                            OBJECT [3567,4626]
                                FIELD [3568,3609]
                                    String: "name" [3568,3574]
                                    STRING [3575,3609]
                                        String: "Build Helm Chart & Copy to infra" [3575,3609]
                                FIELD [3610,3692]
                                    String: "if" [3610,3614]
                                    STRING [3615,3692]
                                        String: "github.ref == 'refs/heads/dev' || github.event.inputs.deploy-helm == 'true'" [3615,3692]
                                FIELD [3693,3707]
                                    String: "shell" [3693,3700]
                                    STRING [3701,3707]
                                        String: "bash" [3701,3707]
                                FIELD [3708,4625]
                                    String: "run" [3708,3713]
                                    STRING [3714,4625]
                                        String: "K3D_VERSION=v5.6.0\nDEVSPACE_VERSION=v6.3.4\n\n# install k3d\nwget https://github.com/k3d-io/k3d/releases/download/${K3D_VERSION}/k3d-linux-amd64\nmv k3d-linux-amd64 k3d\nchmod +x k3d\nexport PATH=`pwd`:$PATH\nk3d version\n\n# Install devspace\ncurl -sSL https://github.com/loft-sh/devspace/releases/download/${DEVSPACE_VERSION}/devspace-linux-amd64 -o ./devspace\nchmod +x devspace\ndevspace version\n\n# Install helm\ncurl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash\nhelm version\n\n# install tox\npython -m pip install --upgrade pip\npip install tox\n\ntox -e syft.build.helm\n\nrm -rf infrastructure/gitops/environments/dev/\nmkdir -p infrastructure/gitops/environments/dev/\n\ncp -R packages/grid/helm/syft/. infrastructure/gitops/environments/dev/\n\n# write version to VERSION.txt file\necho \"dev-${{github.sha}}\" > infrastructure/gitops/environments/dev/VERSION.txt\n" [3714,4625]
                            OBJECT [4627,4985]
                                FIELD [4628,4672]
                                    String: "name" [4628,4634]
                                    STRING [4635,4672]
                                        String: "Commit & push changes to Infra Repo" [4635,4672]
                                FIELD [4673,4755]
                                    String: "if" [4673,4677]
                                    STRING [4678,4755]
                                        String: "github.ref == 'refs/heads/dev' || github.event.inputs.deploy-helm == 'true'" [4678,4755]
                                FIELD [4756,4789]
                                    String: "uses" [4756,4762]
                                    STRING [4763,4789]
                                        String: "EndBug/add-and-commit@v9" [4763,4789]
                                FIELD [4790,4984]
                                    String: "with" [4790,4796]
                                    OBJECT [4797,4984]
                                        FIELD [4798,4840]
                                            String: "author_name" [4798,4811]
                                            STRING [4812,4840]
                                                String: "${{ secrets.OM_BOT_NAME }}" [4812,4840]
                                        FIELD [4841,4885]
                                            String: "author_email" [4841,4855]
                                            STRING [4856,4885]
                                                String: "${{ secrets.OM_BOT_EMAIL }}" [4856,4885]
                                        FIELD [4886,4926]
                                            String: "message" [4886,4895]
                                            STRING [4896,4926]
                                                String: "[env] Update dev helm charts" [4896,4926]
                                        FIELD [4927,4936]
                                            String: "add" [4927,4932]
                                            STRING [4933,4936]
                                                String: "." [4933,4936]
                                        FIELD [4937,4957]
                                            String: "push" [4937,4943]
                                            STRING [4944,4957]
                                                String: "origin main" [4944,4957]
                                        FIELD [4958,4983]
                                            String: "cwd" [4958,4963]
                                            STRING [4964,4983]
                                                String: "./infrastructure/" [4964,4983]
                            OBJECT [4986,5592]
                                FIELD [4987,5028]
                                    String: "name" [4987,4993]
                                    STRING [4994,5028]
                                        String: "Cleanup Azure Container Registry" [4994,5028]
                                FIELD [5029,5591]
                                    String: "run" [5029,5034]
                                    STRING [5035,5591]
                                        String: "ACR_REGISTRY_NAME=${{ secrets.ACR_REGISTRY_NAME }}\n\necho \">> Fetching repo list..\"\nREPO_LIST=$(az acr repository list -n $ACR_REGISTRY_NAME -o tsv)\n\nKEEP_PREV_VERSIONS=5\nTAIL_FROM_LINE=$(($KEEP_PREV_VERSIONS + 1))\n\nfor repo in $REPO_LIST\ndo\n    echo \"Cleaning up '$repo'\"\n    az acr repository show-tags --name $ACR_REGISTRY_NAME --repository $repo --orderby time_desc --output tsv \\\n      | grep dev- \\\n      | tail -n +$TAIL_FROM_LINE \\\n      | xargs -r -I% az acr repository untag --name $ACR_REGISTRY_NAME --image $repo:%\ndone\n" [5035,5591]
                            OBJECT [5593,5704]
                                FIELD [5594,5635]
                                    String: "name" [5594,5600]
                                    STRING [5601,5635]
                                        String: "Logout and cleanup Azure account" [5601,5635]
                                FIELD [5636,5651]
                                    String: "if" [5636,5640]
                                    STRING [5641,5651]
                                        String: "always()" [5641,5651]
                                FIELD [5652,5703]
                                    String: "run" [5652,5657]
                                    STRING [5658,5703]
                                        String: "az logout\naz cache purge\naz account clear" [5658,5703]