OBJECT [0,4092]
    FIELD [1,23]
        String: "name" [1,7]
        STRING [8,23]
            String: "PHPUnit mysql" [8,23]
    FIELD [24,261]
        String: "on" [24,28]
        OBJECT [29,261]
            FIELD [30,212]
                String: "pull_request" [30,44]
                OBJECT [45,212]
                    FIELD [46,211]
                        String: "paths" [46,53]
                        ARRAY [54,211]
                            STRING [55,77]
                                String: ".github/workflows/**" [55,77]
                            STRING [78,90]
                                String: "appinfo/**" [78,90]
                            STRING [91,99]
                                String: "lib/**" [91,99]
                            STRING [100,114]
                                String: "templates/**" [100,114]
                            STRING [115,125]
                                String: "tests/**" [115,125]
                            STRING [126,137]
                                String: "vendor/**" [126,137]
                            STRING [138,153]
                                String: "vendor-bin/**" [138,153]
                            STRING [154,178]
                                String: ".php-cs-fixer.dist.php" [154,178]
                            STRING [179,194]
                                String: "composer.json" [179,194]
                            STRING [195,210]
                                String: "composer.lock" [195,210]
            FIELD [213,260]
                String: "push" [213,219]
                OBJECT [220,260]
                    FIELD [221,259]
                        String: "branches" [221,231]
                        ARRAY [232,259]
                            STRING [233,239]
                                String: "main" [233,239]
                            STRING [240,248]
                                String: "master" [240,248]
                            STRING [249,258]
                                String: "stable*" [249,258]
    FIELD [262,295]
        String: "permissions" [262,275]
        OBJECT [276,295]
            FIELD [277,294]
                String: "contents" [277,287]
                STRING [288,294]
                    String: "read" [288,294]
    FIELD [296,401]
        String: "concurrency" [296,309]
        OBJECT [310,401]
            FIELD [311,374]
                String: "group" [311,318]
                STRING [319,374]
                    String: "phpunit-mysql-${{ github.head_ref || github.run_id }}" [319,374]
            FIELD [375,400]
                String: "cancel-in-progress" [375,395]
                TRUE [396,400]
    FIELD [402,4091]
        String: "jobs" [402,408]
        OBJECT [409,4091]
            FIELD [410,3836]
                String: "phpunit-mysql" [410,425]
                OBJECT [426,3836]
                    FIELD [427,452]
                        String: "runs-on" [427,436]
                        STRING [437,452]
                            String: "ubuntu-latest" [437,452]
                    FIELD [453,540]
                        String: "strategy" [453,463]
                        OBJECT [464,540]
                            FIELD [465,539]
                                String: "matrix" [465,473]
                                OBJECT [474,539]
                                    FIELD [475,509]
                                        String: "php-versions" [475,489]
                                        ARRAY [490,509]
                                            STRING [491,496]
                                                String: "8.0" [491,496]
                                            STRING [497,502]
                                                String: "8.1" [497,502]
                                            STRING [503,508]
                                                String: "8.2" [503,508]
                                    FIELD [510,538]
                                        String: "server-versions" [510,527]
                                        ARRAY [528,538]
                                            STRING [529,537]
                                                String: "master" [529,537]
                    FIELD [541,810]
                        String: "services" [541,551]
                        OBJECT [552,810]
                            FIELD [553,809]
                                String: "mysql" [553,560]
                                OBJECT [561,809]
                                    FIELD [562,632]
                                        String: "image" [562,569]
                                        STRING [570,632]
                                            String: "ghcr.io/nextcloud/continuous-integration-mariadb-10.6:latest" [570,632]
                                    FIELD [633,658]
                                        String: "ports" [633,640]
                                        ARRAY [641,658]
                                            STRING [642,657]
                                                String: "4444:3306/tcp" [642,657]
                                    FIELD [659,703]
                                        String: "env" [659,664]
                                        OBJECT [665,703]
                                            FIELD [666,702]
                                                String: "MYSQL_ROOT_PASSWORD" [666,687]
                                                STRING [688,702]
                                                    String: "rootpassword" [688,702]
                                    FIELD [704,808]
                                        String: "options" [704,713]
                                        STRING [714,808]
                                            String: "--health-cmd=\"mysqladmin ping\" --health-interval 5s --health-timeout 2s --health-retries 5" [714,808]
                    FIELD [811,3835]
                        String: "steps" [811,818]
                        ARRAY [819,3835]
                            OBJECT [820,933]
                                FIELD [821,841]
                                    String: "name" [821,827]
                                    STRING [828,841]
                                        String: "Set app env" [828,841]
                                FIELD [842,932]
                                    String: "run" [842,847]
                                    STRING [848,932]
                                        String: "# Split and keep last\necho \"APP_NAME=${GITHUB_REPOSITORY##*/}\" >> $GITHUB_ENV\n" [848,932]
                            OBJECT [934,1206]
                                FIELD [935,982]
                                    String: "name" [935,941]
                                    STRING [942,982]
                                        String: "Enable ONLY_FULL_GROUP_BY MySQL option" [942,982]
                                FIELD [983,1205]
                                    String: "run" [983,988]
                                    STRING [989,1205]
                                        String: "echo \"SET GLOBAL sql_mode=(SELECT CONCAT(@@sql_mode,',ONLY_FULL_GROUP_BY'));\" | mysql -h 127.0.0.1 -P 4444 -u root -prootpassword\necho \"SELECT @@sql_mode;\" | mysql -h 127.0.0.1 -P 4444 -u root -prootpassword\n" [989,1205]
                            OBJECT [1207,1397]
                                FIELD [1208,1232]
                                    String: "name" [1208,1214]
                                    STRING [1215,1232]
                                        String: "Checkout server" [1215,1232]
                                FIELD [1233,1299]
                                    String: "uses" [1233,1239]
                                    STRING [1240,1299]
                                        String: "actions/checkout@8e5e7e5ab8b370d6c329ec480221332ada57f0ab" [1240,1299]
                                FIELD [1300,1396]
                                    String: "with" [1300,1306]
                                    OBJECT [1307,1396]
                                        FIELD [1308,1325]
                                            String: "submodules" [1308,1320]
                                            TRUE [1321,1325]
                                        FIELD [1326,1357]
                                            String: "repository" [1326,1338]
                                            STRING [1339,1357]
                                                String: "nextcloud/server" [1339,1357]
                                        FIELD [1358,1395]
                                            String: "ref" [1358,1363]
                                            STRING [1364,1395]
                                                String: "${{ matrix.server-versions }}" [1364,1395]
                            OBJECT [1398,1531]
                                FIELD [1399,1420]
                                    String: "name" [1399,1405]
                                    STRING [1406,1420]
                                        String: "Checkout app" [1406,1420]
                                FIELD [1421,1487]
                                    String: "uses" [1421,1427]
                                    STRING [1428,1487]
                                        String: "actions/checkout@8e5e7e5ab8b370d6c329ec480221332ada57f0ab" [1428,1487]
                                FIELD [1488,1530]
                                    String: "with" [1488,1494]
                                    OBJECT [1495,1530]
                                        FIELD [1496,1529]
                                            String: "path" [1496,1502]
                                            STRING [1503,1529]
                                                String: "apps/${{ env.APP_NAME }}" [1503,1529]
                            OBJECT [1532,1983]
                                FIELD [1533,1579]
                                    String: "name" [1533,1539]
                                    STRING [1540,1579]
                                        String: "Set up php ${{ matrix.php-versions }}" [1540,1579]
                                FIELD [1580,1652]
                                    String: "uses" [1580,1586]
                                    STRING [1587,1652]
                                        String: "shivammathur/setup-php@c5fc0d8281aba02c7fda07d3a70cc5371548067d" [1587,1652]
                                FIELD [1653,1929]
                                    String: "with" [1653,1659]
                                    OBJECT [1660,1929]
                                        FIELD [1661,1703]
                                            String: "php-version" [1661,1674]
                                            STRING [1675,1703]
                                                String: "${{ matrix.php-versions }}" [1675,1703]
                                        FIELD [1704,1885]
                                            String: "extensions" [1704,1716]
                                            STRING [1717,1885]
                                                String: "bz2, ctype, curl, dom, fileinfo, gd, iconv, intl, json, libxml, mbstring, openssl, pcntl, posix, session, simplexml, xmlreader, xmlwriter, zip, zlib, mysql, pdo_mysql" [1717,1885]
                                        FIELD [1886,1903]
                                            String: "coverage" [1886,1896]
                                            STRING [1897,1903]
                                                String: "none" [1897,1903]
                                        FIELD [1904,1928]
                                            String: "ini-file" [1904,1914]
                                            STRING [1915,1928]
                                                String: "development" [1915,1928]
                                FIELD [1930,1982]
                                    String: "env" [1930,1935]
                                    OBJECT [1936,1982]
                                        FIELD [1937,1981]
                                            String: "GITHUB_TOKEN" [1937,1951]
                                            STRING [1952,1981]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [1952,1981]
                            OBJECT [1984,2184]
                                FIELD [1985,2023]
                                    String: "name" [1985,1991]
                                    STRING [1992,2023]
                                        String: "Check composer file existence" [1992,2023]
                                FIELD [2024,2045]
                                    String: "id" [2024,2028]
                                    STRING [2029,2045]
                                        String: "check_composer" [2029,2045]
                                FIELD [2046,2125]
                                    String: "uses" [2046,2052]
                                    STRING [2053,2125]
                                        String: "andstor/file-existence-action@20b4d2e596410855db8f9ca21e96fbe18e12930b" [2053,2125]
                                FIELD [2126,2183]
                                    String: "with" [2126,2132]
                                    OBJECT [2133,2183]
                                        FIELD [2134,2182]
                                            String: "files" [2134,2141]
                                            STRING [2142,2182]
                                                String: "apps/${{ env.APP_NAME }}/composer.json" [2142,2182]
                            OBJECT [2185,2340]
                                FIELD [2186,2214]
                                    String: "name" [2186,2192]
                                    STRING [2193,2214]
                                        String: "Set up dependencies" [2193,2214]
                                FIELD [2215,2273]
                                    String: "if" [2215,2219]
                                    STRING [2220,2273]
                                        String: "steps.check_composer.outputs.files_exists == 'true'" [2220,2273]
                                FIELD [2274,2320]
                                    String: "working-directory" [2274,2293]
                                    STRING [2294,2320]
                                        String: "apps/${{ env.APP_NAME }}" [2294,2320]
                                FIELD [2321,2339]
                                    String: "run" [2321,2326]
                                    STRING [2327,2339]
                                        String: "composer i" [2327,2339]
                            OBJECT [2341,2677]
                                FIELD [2342,2367]
                                    String: "name" [2342,2348]
                                    STRING [2349,2367]
                                        String: "Set up Nextcloud" [2349,2367]
                                FIELD [2368,2390]
                                    String: "env" [2368,2373]
                                    OBJECT [2374,2390]
                                        FIELD [2375,2389]
                                            String: "DB_PORT" [2375,2384]
                                            NUMBER [2385,2389]
                                                Number: 4444 [2385,2389]
                                FIELD [2391,2676]
                                    String: "run" [2391,2396]
                                    STRING [2397,2676]
                                        String: "mkdir data\n./occ maintenance:install --verbose --database=mysql --database-name=nextcloud --database-host=127.0.0.1 --database-port=$DB_PORT --database-user=root --database-pass=rootpassword --admin-user admin --admin-pass admin\n./occ app:enable --force ${{ env.APP_NAME }}\n" [2397,2676]
                            OBJECT [2678,2885]
                                FIELD [2679,2719]
                                    String: "name" [2679,2685]
                                    STRING [2686,2719]
                                        String: "Check PHPUnit script is defined" [2686,2719]
                                FIELD [2720,2740]
                                    String: "id" [2720,2724]
                                    STRING [2725,2740]
                                        String: "check_phpunit" [2725,2740]
                                FIELD [2741,2765]
                                    String: "continue-on-error" [2741,2760]
                                    TRUE [2761,2765]
                                FIELD [2766,2812]
                                    String: "working-directory" [2766,2785]
                                    STRING [2786,2812]
                                        String: "apps/${{ env.APP_NAME }}" [2786,2812]
                                FIELD [2813,2884]
                                    String: "run" [2813,2818]
                                    STRING [2819,2884]
                                        String: "composer run --list | grep \"^  test:unit \" | wc -l | grep 1\n" [2819,2884]
                            OBJECT [2886,3030]
                                FIELD [2887,2903]
                                    String: "name" [2887,2893]
                                    STRING [2894,2903]
                                        String: "PHPUnit" [2894,2903]
                                FIELD [2904,2951]
                                    String: "if" [2904,2908]
                                    STRING [2909,2951]
                                        String: "steps.check_phpunit.outcome == 'success'" [2909,2951]
                                FIELD [2952,2998]
                                    String: "working-directory" [2952,2971]
                                    STRING [2972,2998]
                                        String: "apps/${{ env.APP_NAME }}" [2972,2998]
                                FIELD [2999,3029]
                                    String: "run" [2999,3004]
                                    STRING [3005,3029]
                                        String: "composer run test:unit" [3005,3029]
                            OBJECT [3031,3261]
                                FIELD [3032,3084]
                                    String: "name" [3032,3038]
                                    STRING [3039,3084]
                                        String: "Check PHPUnit integration script is defined" [3039,3084]
                                FIELD [3085,3109]
                                    String: "id" [3085,3089]
                                    STRING [3090,3109]
                                        String: "check_integration" [3090,3109]
                                FIELD [3110,3134]
                                    String: "continue-on-error" [3110,3129]
                                    TRUE [3130,3134]
                                FIELD [3135,3181]
                                    String: "working-directory" [3135,3154]
                                    STRING [3155,3181]
                                        String: "apps/${{ env.APP_NAME }}" [3155,3181]
                                FIELD [3182,3260]
                                    String: "run" [3182,3187]
                                    STRING [3188,3260]
                                        String: "composer run --list | grep \"^  test:integration \" | wc -l | grep 1\n" [3188,3260]
                            OBJECT [3262,3370]
                                FIELD [3263,3285]
                                    String: "name" [3263,3269]
                                    STRING [3270,3285]
                                        String: "Run Nextcloud" [3270,3285]
                                FIELD [3286,3337]
                                    String: "if" [3286,3290]
                                    STRING [3291,3337]
                                        String: "steps.check_integration.outcome == 'success'" [3291,3337]
                                FIELD [3338,3369]
                                    String: "run" [3338,3343]
                                    STRING [3344,3369]
                                        String: "php -S localhost:8080 &" [3344,3369]
                            OBJECT [3371,3538]
                                FIELD [3372,3400]
                                    String: "name" [3372,3378]
                                    STRING [3379,3400]
                                        String: "PHPUnit integration" [3379,3400]
                                FIELD [3401,3452]
                                    String: "if" [3401,3405]
                                    STRING [3406,3452]
                                        String: "steps.check_integration.outcome == 'success'" [3406,3452]
                                FIELD [3453,3499]
                                    String: "working-directory" [3453,3472]
                                    STRING [3473,3499]
                                        String: "apps/${{ env.APP_NAME }}" [3473,3499]
                                FIELD [3500,3537]
                                    String: "run" [3500,3505]
                                    STRING [3506,3537]
                                        String: "composer run test:integration" [3506,3537]
                            OBJECT [3539,3609]
                                FIELD [3540,3559]
                                    String: "name" [3540,3546]
                                    STRING [3547,3559]
                                        String: "Print logs" [3547,3559]
                                FIELD [3560,3575]
                                    String: "if" [3560,3564]
                                    STRING [3565,3575]
                                        String: "always()" [3565,3575]
                                FIELD [3576,3608]
                                    String: "run" [3576,3581]
                                    STRING [3582,3608]
                                        String: "cat data/nextcloud.log\n" [3582,3608]
                            OBJECT [3610,3834]
                                FIELD [3611,3627]
                                    String: "name" [3611,3617]
                                    STRING [3618,3627]
                                        String: "Skipped" [3618,3627]
                                FIELD [3628,3723]
                                    String: "if" [3628,3632]
                                    STRING [3633,3723]
                                        String: "steps.check_phpunit.outcome == 'failure' && steps.check_integration.outcome == 'failure'" [3633,3723]
                                FIELD [3724,3833]
                                    String: "run" [3724,3729]
                                    STRING [3730,3833]
                                        String: "echo 'Neither PHPUnit nor PHPUnit integration tests are specified in composer.json scripts'\nexit 1\n" [3730,3833]
            FIELD [3837,4090]
                String: "summary" [3837,3846]
                OBJECT [3847,4090]
                    FIELD [3848,3881]
                        String: "permissions" [3848,3861]
                        OBJECT [3862,3881]
                            FIELD [3863,3880]
                                String: "contents" [3863,3873]
                                STRING [3874,3880]
                                    String: "none" [3874,3880]
                    FIELD [3882,3907]
                        String: "runs-on" [3882,3891]
                        STRING [3892,3907]
                            String: "ubuntu-latest" [3892,3907]
                    FIELD [3908,3931]
                        String: "needs" [3908,3915]
                        STRING [3916,3931]
                            String: "phpunit-mysql" [3916,3931]
                    FIELD [3932,3947]
                        String: "if" [3932,3936]
                        STRING [3937,3947]
                            String: "always()" [3937,3947]
                    FIELD [3948,3978]
                        String: "name" [3948,3954]
                        STRING [3955,3978]
                            String: "phpunit-mysql-summary" [3955,3978]
                    FIELD [3979,4089]
                        String: "steps" [3979,3986]
                        ARRAY [3987,4089]
                            OBJECT [3988,4088]
                                FIELD [3989,4012]
                                    String: "name" [3989,3995]
                                    STRING [3996,4012]
                                        String: "Summary status" [3996,4012]
                                FIELD [4013,4087]
                                    String: "run" [4013,4018]
                                    STRING [4019,4087]
                                        String: "if ${{ needs.phpunit-mysql.result != 'success' }}; then exit 1; fi" [4019,4087]