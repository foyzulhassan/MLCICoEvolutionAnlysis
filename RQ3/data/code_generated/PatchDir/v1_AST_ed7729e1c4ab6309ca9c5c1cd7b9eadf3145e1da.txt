OBJECT [0,6088]
    FIELD [1,31]
        String: "name" [1,7]
        STRING [8,31]
            String: "CD - Kubernetes - Dev" [8,31]
    FIELD [32,277]
        String: "on" [32,36]
        OBJECT [37,277]
            FIELD [38,73]
                String: "schedule" [38,48]
                ARRAY [49,73]
                    OBJECT [50,72]
                        FIELD [51,71]
                            String: "cron" [51,57]
                            STRING [58,71]
                                String: "0 */3 * * *" [58,71]
            FIELD [74,276]
                String: "workflow_dispatch" [74,93]
                OBJECT [94,276]
                    FIELD [95,275]
                        String: "inputs" [95,103]
                        OBJECT [104,275]
                            FIELD [105,190]
                                String: "test-cache" [105,117]
                                OBJECT [118,190]
                                    FIELD [119,135]
                                        String: "type" [119,125]
                                        STRING [126,135]
                                            String: "boolean" [126,135]
                                    FIELD [136,173]
                                        String: "description" [136,149]
                                        STRING [150,173]
                                            String: "Test workflow caching" [150,173]
                                    FIELD [174,189]
                                        String: "default" [174,183]
                                        FALSE [184,189]
                            FIELD [191,274]
                                String: "deploy-helm" [191,204]
                                OBJECT [205,274]
                                    FIELD [206,222]
                                        String: "type" [206,212]
                                        STRING [213,222]
                                            String: "boolean" [213,222]
                                    FIELD [223,257]
                                        String: "description" [223,236]
                                        STRING [237,257]
                                            String: "Deploy Helm Charts" [237,257]
                                    FIELD [258,273]
                                        String: "default" [258,267]
                                        FALSE [268,273]
    FIELD [278,6087]
        String: "jobs" [278,284]
        OBJECT [285,6087]
            FIELD [286,6086]
                String: "deploy-syft-dev" [286,303]
                OBJECT [304,6086]
                    FIELD [305,340]
                        String: "runs-on" [305,314]
                        STRING [315,340]
                            String: "om-ci-16vcpu-ubuntu2204" [315,340]
                    FIELD [341,6085]
                        String: "steps" [341,348]
                        ARRAY [349,6085]
                            OBJECT [350,598]
                                FIELD [351,381]
                                    String: "name" [351,357]
                                    STRING [358,381]
                                        String: "Check for new changes" [358,381]
                                FIELD [382,394]
                                    String: "id" [382,386]
                                    STRING [387,394]
                                        String: "cache" [387,394]
                                FIELD [395,477]
                                    String: "if" [395,399]
                                    STRING [400,477]
                                        String: "github.event_name == 'schedule' || github.event.inputs.test-cache == 'true'" [400,477]
                                FIELD [478,503]
                                    String: "uses" [478,484]
                                    STRING [485,503]
                                        String: "actions/cache@v3" [485,503]
                                FIELD [504,597]
                                    String: "with" [504,510]
                                    OBJECT [511,597]
                                        FIELD [512,540]
                                            String: "path" [512,518]
                                            STRING [519,540]
                                                String: "scripts/commit_hash" [519,540]
                                        FIELD [541,577]
                                            String: "key" [541,546]
                                            STRING [547,577]
                                                String: "dev-commit-${{ github.sha }}" [547,577]
                                        FIELD [578,596]
                                            String: "lookup-only" [578,591]
                                            TRUE [592,596]
                            OBJECT [599,775]
                                FIELD [600,631]
                                    String: "name" [600,606]
                                    STRING [607,631]
                                        String: "Quit if no new changes" [607,631]
                                FIELD [632,759]
                                    String: "if" [632,636]
                                    STRING [637,759]
                                        String: "(github.event_name == 'schedule' || github.event.inputs.test-cache == 'true') && steps.cache.outputs.cache-hit == 'true'" [637,759]
                                FIELD [760,774]
                                    String: "run" [760,765]
                                    STRING [766,774]
                                        String: "exit 0" [766,774]
                            OBJECT [776,857]
                                FIELD [777,814]
                                    String: "name" [777,783]
                                    STRING [784,814]
                                        String: "Permission to home directory" [784,814]
                                FIELD [815,856]
                                    String: "run" [815,820]
                                    STRING [821,856]
                                        String: "sudo chown -R $USER:$USER $HOME\n" [821,856]
                            OBJECT [858,888]
                                FIELD [859,887]
                                    String: "uses" [859,865]
                                    STRING [866,887]
                                        String: "actions/checkout@v4" [866,887]
                            OBJECT [889,1083]
                                FIELD [890,918]
                                    String: "name" [890,896]
                                    STRING [897,918]
                                        String: "Checkout Infra Repo" [897,918]
                                FIELD [919,947]
                                    String: "uses" [919,925]
                                    STRING [926,947]
                                        String: "actions/checkout@v4" [926,947]
                                FIELD [948,1082]
                                    String: "with" [948,954]
                                    OBJECT [955,1082]
                                        FIELD [956,996]
                                            String: "repository" [956,968]
                                            STRING [969,996]
                                                String: "${{ secrets.INFRA_REPO }}" [969,996]
                                        FIELD [997,1009]
                                            String: "ref" [997,1002]
                                            STRING [1003,1009]
                                                String: "main" [1003,1009]
                                        FIELD [1010,1057]
                                            String: "token" [1010,1017]
                                            STRING [1018,1057]
                                                String: "${{ secrets.INFRA_BOT_COMMIT_TOKEN }}" [1018,1057]
                                        FIELD [1058,1081]
                                            String: "path" [1058,1064]
                                            STRING [1065,1081]
                                                String: "infrastructure" [1065,1081]
                            OBJECT [1084,1174]
                                FIELD [1085,1107]
                                    String: "name" [1085,1091]
                                    STRING [1092,1107]
                                        String: "Set up Python" [1092,1107]
                                FIELD [1108,1140]
                                    String: "uses" [1108,1114]
                                    STRING [1115,1140]
                                        String: "actions/setup-python@v3" [1115,1140]
                                FIELD [1141,1173]
                                    String: "with" [1141,1147]
                                    OBJECT [1148,1173]
                                        FIELD [1149,1172]
                                            String: "python-version" [1149,1165]
                                            STRING [1166,1172]
                                                String: "3.11" [1166,1172]
                            OBJECT [1175,1259]
                                FIELD [1176,1205]
                                    String: "name" [1176,1182]
                                    STRING [1183,1205]
                                        String: "Set up Docker Buildx" [1183,1205]
                                FIELD [1206,1219]
                                    String: "id" [1206,1210]
                                    STRING [1211,1219]
                                        String: "buildx" [1211,1219]
                                FIELD [1220,1258]
                                    String: "uses" [1220,1226]
                                    STRING [1227,1258]
                                        String: "docker/setup-buildx-action@v3" [1227,1258]
                            OBJECT [1260,1365]
                                FIELD [1261,1287]
                                    String: "name" [1261,1267]
                                    STRING [1268,1287]
                                        String: "Install Azure CLI" [1268,1287]
                                FIELD [1288,1364]
                                    String: "run" [1288,1293]
                                    STRING [1294,1364]
                                        String: "curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash\naz version\n" [1294,1364]
                            OBJECT [1366,1481]
                                FIELD [1367,1394]
                                    String: "name" [1367,1373]
                                    STRING [1374,1394]
                                        String: "Login to Azure CLI" [1374,1394]
                                FIELD [1395,1418]
                                    String: "uses" [1395,1401]
                                    STRING [1402,1418]
                                        String: "azure/login@v1" [1402,1418]
                                FIELD [1419,1480]
                                    String: "with" [1419,1425]
                                    OBJECT [1426,1480]
                                        FIELD [1427,1479]
                                            String: "creds" [1427,1434]
                                            STRING [1435,1479]
                                                String: "${{ secrets.AZURE_CREDENTIALS_GITHUB_CI }}" [1435,1479]
                            OBJECT [1482,1691]
                                FIELD [1483,1525]
                                    String: "name" [1483,1489]
                                    STRING [1490,1525]
                                        String: "Login to Azure Container Registry" [1490,1525]
                                FIELD [1526,1556]
                                    String: "uses" [1526,1532]
                                    STRING [1533,1556]
                                        String: "azure/docker-login@v1" [1533,1556]
                                FIELD [1557,1690]
                                    String: "with" [1557,1563]
                                    OBJECT [1564,1690]
                                        FIELD [1565,1607]
                                            String: "login-server" [1565,1579]
                                            STRING [1580,1607]
                                                String: "${{ secrets.ACR_SERVER }}" [1580,1607]
                                        FIELD [1608,1648]
                                            String: "username" [1608,1618]
                                            STRING [1619,1648]
                                                String: "${{ secrets.ACR_USERNAME }}" [1619,1648]
                                        FIELD [1649,1689]
                                            String: "password" [1649,1659]
                                            STRING [1660,1689]
                                                String: "${{ secrets.ACR_PASSWORD }}" [1660,1689]
                            OBJECT [1692,1834]
                                FIELD [1693,1726]
                                    String: "name" [1693,1699]
                                    STRING [1700,1726]
                                        String: "Set Grid package version" [1700,1726]
                                FIELD [1727,1738]
                                    String: "id" [1727,1731]
                                    STRING [1732,1738]
                                        String: "grid" [1732,1738]
                                FIELD [1739,1753]
                                    String: "shell" [1739,1746]
                                    STRING [1747,1753]
                                        String: "bash" [1747,1753]
                                FIELD [1754,1833]
                                    String: "run" [1754,1759]
                                    STRING [1760,1833]
                                        String: "echo \"GRID_VERSION=$(python packages/grid/VERSION)\" >> $GITHUB_OUTPUT" [1760,1833]
                            OBJECT [1835,2270]
                                FIELD [1836,1892]
                                    String: "name" [1836,1842]
                                    STRING [1843,1892]
                                        String: "Build and push `grid-backend` image to registry" [1843,1892]
                                FIELD [1893,1929]
                                    String: "uses" [1893,1899]
                                    STRING [1900,1929]
                                        String: "docker/build-push-action@v4" [1900,1929]
                                FIELD [1930,2269]
                                    String: "with" [1930,1936]
                                    OBJECT [1937,2269]
                                        FIELD [1938,1960]
                                            String: "context" [1938,1947]
                                            STRING [1948,1960]
                                                String: "./packages" [1948,1960]
                                        FIELD [1961,2012]
                                            String: "file" [1961,1967]
                                            STRING [1968,2012]
                                                String: "./packages/grid/backend/backend.dockerfile" [1968,2012]
                                        FIELD [2013,2024]
                                            String: "push" [2013,2019]
                                            TRUE [2020,2024]
                                        FIELD [2025,2043]
                                            String: "target" [2025,2033]
                                            STRING [2034,2043]
                                                String: "backend" [2034,2043]
                                        FIELD [2044,2268]
                                            String: "tags" [2044,2050]
                                            STRING [2051,2268]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-backend:${{ steps.grid.outputs.GRID_VERSION }}\n" [2051,2268]
                            OBJECT [2271,2738]
                                FIELD [2272,2329]
                                    String: "name" [2272,2278]
                                    STRING [2279,2329]
                                        String: "Build and push `grid-frontend` image to registry" [2279,2329]
                                FIELD [2330,2366]
                                    String: "uses" [2330,2336]
                                    STRING [2337,2366]
                                        String: "docker/build-push-action@v4" [2337,2366]
                                FIELD [2367,2737]
                                    String: "with" [2367,2373]
                                    OBJECT [2374,2737]
                                        FIELD [2375,2411]
                                            String: "context" [2375,2384]
                                            STRING [2385,2411]
                                                String: "./packages/grid/frontend" [2385,2411]
                                        FIELD [2412,2465]
                                            String: "file" [2412,2418]
                                            STRING [2419,2465]
                                                String: "./packages/grid/frontend/frontend.dockerfile" [2419,2465]
                                        FIELD [2466,2477]
                                            String: "push" [2466,2472]
                                            TRUE [2473,2477]
                                        FIELD [2478,2705]
                                            String: "tags" [2478,2484]
                                            STRING [2485,2705]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-frontend:${{ steps.grid.outputs.GRID_VERSION }}\n" [2485,2705]
                                        FIELD [2706,2736]
                                            String: "target" [2706,2714]
                                            STRING [2715,2736]
                                                String: "grid-ui-development" [2715,2736]
                            OBJECT [2739,3170]
                                FIELD [2740,2798]
                                    String: "name" [2740,2746]
                                    STRING [2747,2798]
                                        String: "Build and push `grid-headscale` image to registry" [2747,2798]
                                FIELD [2799,2835]
                                    String: "uses" [2799,2805]
                                    STRING [2806,2835]
                                        String: "docker/build-push-action@v4" [2806,2835]
                                FIELD [2836,3169]
                                    String: "with" [2836,2842]
                                    OBJECT [2843,3169]
                                        FIELD [2844,2875]
                                            String: "context" [2844,2853]
                                            STRING [2854,2875]
                                                String: "./packages/grid/vpn" [2854,2875]
                                        FIELD [2876,2925]
                                            String: "file" [2876,2882]
                                            STRING [2883,2925]
                                                String: "./packages/grid/vpn/headscale.dockerfile" [2883,2925]
                                        FIELD [2926,2937]
                                            String: "push" [2926,2932]
                                            TRUE [2933,2937]
                                        FIELD [2938,3168]
                                            String: "tags" [2938,2944]
                                            STRING [2945,3168]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-headscale:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-headscale:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-headscale:${{ steps.grid.outputs.GRID_VERSION }}\n" [2945,3168]
                            OBJECT [3171,3602]
                                FIELD [3172,3230]
                                    String: "name" [3172,3178]
                                    STRING [3179,3230]
                                        String: "Build and push `grid-tailscale` image to registry" [3179,3230]
                                FIELD [3231,3267]
                                    String: "uses" [3231,3237]
                                    STRING [3238,3267]
                                        String: "docker/build-push-action@v4" [3238,3267]
                                FIELD [3268,3601]
                                    String: "with" [3268,3274]
                                    OBJECT [3275,3601]
                                        FIELD [3276,3307]
                                            String: "context" [3276,3285]
                                            STRING [3286,3307]
                                                String: "./packages/grid/vpn" [3286,3307]
                                        FIELD [3308,3357]
                                            String: "file" [3308,3314]
                                            STRING [3315,3357]
                                                String: "./packages/grid/vpn/tailscale.dockerfile" [3315,3357]
                                        FIELD [3358,3369]
                                            String: "push" [3358,3364]
                                            TRUE [3365,3369]
                                        FIELD [3370,3600]
                                            String: "tags" [3370,3376]
                                            STRING [3377,3600]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-tailscale:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-tailscale:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-tailscale:${{ steps.grid.outputs.GRID_VERSION }}\n" [3377,3600]
                            OBJECT [3603,4045]
                                FIELD [3604,3665]
                                    String: "name" [3604,3610]
                                    STRING [3611,3665]
                                        String: "Build and push `grid-vpn-iptables` image to registry" [3611,3665]
                                FIELD [3666,3702]
                                    String: "uses" [3666,3672]
                                    STRING [3673,3702]
                                        String: "docker/build-push-action@v2" [3673,3702]
                                FIELD [3703,4044]
                                    String: "with" [3703,3709]
                                    OBJECT [3710,4044]
                                        FIELD [3711,3742]
                                            String: "context" [3711,3720]
                                            STRING [3721,3742]
                                                String: "./packages/grid/vpn" [3721,3742]
                                        FIELD [3743,3791]
                                            String: "file" [3743,3749]
                                            STRING [3750,3791]
                                                String: "./packages/grid/vpn/iptables.dockerfile" [3750,3791]
                                        FIELD [3792,3803]
                                            String: "push" [3792,3798]
                                            TRUE [3799,3803]
                                        FIELD [3804,4043]
                                            String: "tags" [3804,3810]
                                            STRING [3811,4043]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-vpn-iptables:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-vpn-iptables:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-vpn-iptables:${{ steps.grid.outputs.GRID_VERSION }}\n" [3811,4043]
                            OBJECT [4046,4920]
                                FIELD [4047,4088]
                                    String: "name" [4047,4053]
                                    STRING [4054,4088]
                                        String: "Build Helm Chart & Copy to infra" [4054,4088]
                                FIELD [4089,4171]
                                    String: "if" [4089,4093]
                                    STRING [4094,4171]
                                        String: "github.ref == 'refs/heads/dev' || github.event.inputs.deploy-helm == 'true'" [4094,4171]
                                FIELD [4172,4186]
                                    String: "shell" [4172,4179]
                                    STRING [4180,4186]
                                        String: "bash" [4180,4186]
                                FIELD [4187,4919]
                                    String: "run" [4187,4192]
                                    STRING [4193,4919]
                                        String: "K3D_VERSION=v5.6.0\nDEVSPACE_VERSION=v6.3.3\n\n# install k3d\nwget https://github.com/k3d-io/k3d/releases/download/${K3D_VERSION}/k3d-linux-amd64\nmv k3d-linux-amd64 k3d\nchmod +x k3d\nexport PATH=`pwd`:$PATH\nk3d version\n\n# Install devspace\ncurl -sSL https://github.com/loft-sh/devspace/releases/download/${DEVSPACE_VERSION}/devspace-linux-amd64 -o ./devspace\nchmod +x devspace\ndevspace version\n\nexport CONTAINER_REGISTRY=${{ secrets.ACR_SERVER }}\nexport VERSION=dev-${{github.sha}}\ntox -e syft.build.helm\n\nrm -rf infrastructure/gitops/environments/dev/\nmkdir -p infrastructure/gitops/environments/dev/\ncp -R packages/grid/helm/syft/. packages/grid/helm/manifests.yaml infrastructure/gitops/environments/dev/\n" [4193,4919]
                            OBJECT [4921,5279]
                                FIELD [4922,4966]
                                    String: "name" [4922,4928]
                                    STRING [4929,4966]
                                        String: "Commit & push changes to Infra Repo" [4929,4966]
                                FIELD [4967,5049]
                                    String: "if" [4967,4971]
                                    STRING [4972,5049]
                                        String: "github.ref == 'refs/heads/dev' || github.event.inputs.deploy-helm == 'true'" [4972,5049]
                                FIELD [5050,5083]
                                    String: "uses" [5050,5056]
                                    STRING [5057,5083]
                                        String: "EndBug/add-and-commit@v9" [5057,5083]
                                FIELD [5084,5278]
                                    String: "with" [5084,5090]
                                    OBJECT [5091,5278]
                                        FIELD [5092,5134]
                                            String: "author_name" [5092,5105]
                                            STRING [5106,5134]
                                                String: "${{ secrets.OM_BOT_NAME }}" [5106,5134]
                                        FIELD [5135,5179]
                                            String: "author_email" [5135,5149]
                                            STRING [5150,5179]
                                                String: "${{ secrets.OM_BOT_EMAIL }}" [5150,5179]
                                        FIELD [5180,5220]
                                            String: "message" [5180,5189]
                                            STRING [5190,5220]
                                                String: "[env] Update dev helm charts" [5190,5220]
                                        FIELD [5221,5230]
                                            String: "add" [5221,5226]
                                            STRING [5227,5230]
                                                String: "." [5227,5230]
                                        FIELD [5231,5251]
                                            String: "push" [5231,5237]
                                            STRING [5238,5251]
                                                String: "origin main" [5238,5251]
                                        FIELD [5252,5277]
                                            String: "cwd" [5252,5257]
                                            STRING [5258,5277]
                                                String: "./infrastructure/" [5258,5277]
                            OBJECT [5280,5886]
                                FIELD [5281,5322]
                                    String: "name" [5281,5287]
                                    STRING [5288,5322]
                                        String: "Cleanup Azure Container Registry" [5288,5322]
                                FIELD [5323,5885]
                                    String: "run" [5323,5328]
                                    STRING [5329,5885]
                                        String: "ACR_REGISTRY_NAME=${{ secrets.ACR_REGISTRY_NAME }}\n\necho \">> Fetching repo list..\"\nREPO_LIST=$(az acr repository list -n $ACR_REGISTRY_NAME -o tsv)\n\nKEEP_PREV_VERSIONS=5\nTAIL_FROM_LINE=$(($KEEP_PREV_VERSIONS + 1))\n\nfor repo in $REPO_LIST\ndo\n    echo \"Cleaning up '$repo'\"\n    az acr repository show-tags --name $ACR_REGISTRY_NAME --repository $repo --orderby time_desc --output tsv \\\n      | grep dev- \\\n      | tail -n +$TAIL_FROM_LINE \\\n      | xargs -r -I% az acr repository untag --name $ACR_REGISTRY_NAME --image $repo:%\ndone\n" [5329,5885]
                            OBJECT [5887,6000]
                                FIELD [5888,5929]
                                    String: "name" [5888,5894]
                                    STRING [5895,5929]
                                        String: "Logout and cleanup Azure account" [5895,5929]
                                FIELD [5930,5945]
                                    String: "if" [5930,5934]
                                    STRING [5935,5945]
                                        String: "always()" [5935,5945]
                                FIELD [5946,5999]
                                    String: "run" [5946,5951]
                                    STRING [5952,5999]
                                        String: "az logout\naz cache purge\naz account clear\n" [5952,5999]
                            OBJECT [6001,6084]
                                FIELD [6002,6026]
                                    String: "name" [6002,6008]
                                    STRING [6009,6026]
                                        String: "Save Commit SHA" [6009,6026]
                                FIELD [6027,6083]
                                    String: "run" [6027,6032]
                                    STRING [6033,6083]
                                        String: "echo \"${{ github.sha }}\" > scripts/commit_hash" [6033,6083]