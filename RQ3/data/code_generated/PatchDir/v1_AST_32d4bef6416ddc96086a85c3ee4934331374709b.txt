OBJECT [0,2346]
    FIELD [1,21]
        String: "name" [1,7]
        STRING [8,21]
            String: "Doctest job" [8,21]
    FIELD [22,151]
        String: "on" [22,26]
        OBJECT [27,151]
            FIELD [28,150]
                String: "workflow_call" [28,43]
                OBJECT [44,150]
                    FIELD [45,149]
                        String: "inputs" [45,53]
                        OBJECT [54,149]
                            FIELD [55,101]
                                String: "job_splits" [55,67]
                                OBJECT [68,101]
                                    FIELD [69,84]
                                        String: "required" [69,79]
                                        TRUE [80,84]
                                    FIELD [85,100]
                                        String: "type" [85,91]
                                        STRING [92,100]
                                            String: "string" [92,100]
                            FIELD [102,148]
                                String: "split_keys" [102,114]
                                OBJECT [115,148]
                                    FIELD [116,131]
                                        String: "required" [116,126]
                                        TRUE [127,131]
                                    FIELD [132,147]
                                        String: "type" [132,138]
                                        STRING [139,147]
                                            String: "string" [139,147]
    FIELD [152,352]
        String: "env" [152,157]
        OBJECT [158,352]
            FIELD [159,181]
                String: "HF_HOME" [159,168]
                STRING [169,181]
                    String: "/mnt/cache" [169,181]
            FIELD [182,207]
                String: "TRANSFORMERS_IS_CI" [182,202]
                TRUE [203,207]
            FIELD [208,223]
                String: "RUN_SLOW" [208,218]
                TRUE [219,223]
            FIELD [224,244]
                String: "OMP_NUM_THREADS" [224,241]
                NUMBER [242,244]
                    Number: 16 [242,244]
            FIELD [245,265]
                String: "MKL_NUM_THREADS" [245,262]
                NUMBER [263,265]
                    Number: 16 [263,265]
            FIELD [266,318]
                String: "SIGOPT_API_TOKEN" [266,284]
                STRING [285,318]
                    String: "${{ secrets.SIGOPT_API_TOKEN }}" [285,318]
            FIELD [319,351]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [319,346]
                TRUE [347,351]
    FIELD [353,2345]
        String: "jobs" [353,359]
        OBJECT [360,2345]
            FIELD [361,2344]
                String: "run_doctests" [361,375]
                OBJECT [376,2344]
                    FIELD [377,387]
                        String: "name" [377,383]
                        STRING [384,387]
                            String: " " [384,387]
                    FIELD [388,496]
                        String: "strategy" [388,398]
                        OBJECT [399,496]
                            FIELD [400,416]
                                String: "max-parallel" [400,414]
                                NUMBER [415,416]
                                    Number: 8 [415,416]
                            FIELD [417,434]
                                String: "fail-fast" [417,428]
                                FALSE [429,434]
                            FIELD [435,495]
                                String: "matrix" [435,443]
                                OBJECT [444,495]
                                    FIELD [445,494]
                                        String: "split_keys" [445,457]
                                        STRING [458,494]
                                            String: "${{ fromJson(inputs.split_keys) }}" [458,494]
                    FIELD [497,544]
                        String: "runs-on" [497,506]
                        ARRAY [507,544]
                            STRING [508,520]
                                String: "single-gpu" [508,520]
                            STRING [521,533]
                                String: "nvidia-gpu" [521,533]
                            STRING [534,538]
                                String: "t4" [534,538]
                            STRING [539,543]
                                String: "ci" [539,543]
                    FIELD [545,705]
                        String: "container" [545,556]
                        OBJECT [557,705]
                            FIELD [558,607]
                                String: "image" [558,565]
                                STRING [566,607]
                                    String: "huggingface/transformers-all-latest-gpu" [566,607]
                            FIELD [608,704]
                                String: "options" [608,617]
                                STRING [618,704]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [618,704]
                    FIELD [706,2343]
                        String: "steps" [706,713]
                        ARRAY [714,2343]
                            OBJECT [715,826]
                                FIELD [716,737]
                                    String: "name" [716,722]
                                    STRING [723,737]
                                        String: "Update clone" [723,737]
                                FIELD [738,773]
                                    String: "working-directory" [738,757]
                                    STRING [758,773]
                                        String: "/transformers" [758,773]
                                FIELD [774,825]
                                    String: "run" [774,779]
                                    STRING [780,825]
                                        String: "git fetch && git checkout ${{ github.sha }}" [780,825]
                            OBJECT [827,1048]
                                FIELD [828,925]
                                    String: "name" [828,834]
                                    STRING [835,925]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [835,925]
                                FIELD [926,961]
                                    String: "working-directory" [926,945]
                                    STRING [946,961]
                                        String: "/transformers" [946,961]
                                FIELD [962,1047]
                                    String: "run" [962,967]
                                    STRING [968,1047]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e .[flax]" [968,1047]
                            OBJECT [1049,1147]
                                FIELD [1050,1073]
                                    String: "name" [1050,1056]
                                    STRING [1057,1073]
                                        String: "GPU visibility" [1057,1073]
                                FIELD [1074,1109]
                                    String: "working-directory" [1074,1093]
                                    STRING [1094,1109]
                                        String: "/transformers" [1094,1109]
                                FIELD [1110,1146]
                                    String: "run" [1110,1115]
                                    STRING [1116,1146]
                                        String: "python3 utils/print_env.py\n" [1116,1146]
                            OBJECT [1148,1221]
                                FIELD [1149,1201]
                                    String: "name" [1149,1155]
                                    STRING [1156,1201]
                                        String: "Show installed libraries and their versions" [1156,1201]
                                FIELD [1202,1220]
                                    String: "run" [1202,1207]
                                    STRING [1208,1220]
                                        String: "pip freeze" [1208,1220]
                            OBJECT [1222,1402]
                                FIELD [1223,1249]
                                    String: "name" [1223,1229]
                                    STRING [1230,1249]
                                        String: "Get doctest files" [1230,1249]
                                FIELD [1250,1285]
                                    String: "working-directory" [1250,1269]
                                    STRING [1270,1285]
                                        String: "/transformers" [1270,1285]
                                FIELD [1286,1401]
                                    String: "run" [1286,1291]
                                    STRING [1292,1401]
                                        String: "echo \"${{ toJson(fromJson(inputs.job_splits)[matrix.split_keys]) }}\" > doc_tests.txt\ncat doc_tests.txt\n" [1292,1401]
                            OBJECT [1403,1630]
                                FIELD [1404,1429]
                                    String: "name" [1404,1410]
                                    STRING [1411,1429]
                                        String: "Set `split_keys`" [1411,1429]
                                FIELD [1430,1444]
                                    String: "shell" [1430,1437]
                                    STRING [1438,1444]
                                        String: "bash" [1438,1444]
                                FIELD [1445,1629]
                                    String: "run" [1445,1450]
                                    STRING [1451,1629]
                                        String: "echo \"${{ matrix.split_keys }}\"\nsplit_keys=${{ matrix.split_keys }}\nsplit_keys=${split_keys//'/'/'_'}\necho \"split_keys\"\necho \"split_keys=$split_keys\" >> $GITHUB_ENV\n" [1451,1629]
                            OBJECT [1631,1888]
                                FIELD [1632,1653]
                                    String: "name" [1632,1638]
                                    STRING [1639,1653]
                                        String: "Run doctests" [1639,1653]
                                FIELD [1654,1689]
                                    String: "working-directory" [1654,1673]
                                    STRING [1674,1689]
                                        String: "/transformers" [1674,1689]
                                FIELD [1690,1887]
                                    String: "run" [1690,1695]
                                    STRING [1696,1887]
                                        String: "cat doc_tests.txt\npython3 -m pytest -v --make-reports doc_tests_gpu_${{ env.split_keys }} --doctest-modules $(cat doc_tests.txt) -sv --doctest-continue-on-failure --doctest-glob=\"*.md\"\n" [1696,1887]
                            OBJECT [1889,2059]
                                FIELD [1890,1920]
                                    String: "name" [1890,1896]
                                    STRING [1897,1920]
                                        String: "Failure short reports" [1897,1920]
                                FIELD [1921,1944]
                                    String: "if" [1921,1925]
                                    STRING [1926,1944]
                                        String: "${{ failure() }}" [1926,1944]
                                FIELD [1945,1969]
                                    String: "continue-on-error" [1945,1964]
                                    TRUE [1965,1969]
                                FIELD [1970,2058]
                                    String: "run" [1970,1975]
                                    STRING [1976,2058]
                                        String: "cat /transformers/reports/doc_tests_gpu_${{ env.split_keys }}/failures_short.txt" [1976,2058]
                            OBJECT [2060,2342]
                                FIELD [2061,2148]
                                    String: "name" [2061,2067]
                                    STRING [2068,2148]
                                        String: "Test suite reports artifacts: doc_tests_gpu_test_reports_${{ env.split_keys }}" [2068,2148]
                                FIELD [2149,2171]
                                    String: "if" [2149,2153]
                                    STRING [2154,2171]
                                        String: "${{ always() }}" [2154,2171]
                                FIELD [2172,2207]
                                    String: "uses" [2172,2178]
                                    STRING [2179,2207]
                                        String: "actions/upload-artifact@v4" [2179,2207]
                                FIELD [2208,2341]
                                    String: "with" [2208,2214]
                                    OBJECT [2215,2341]
                                        FIELD [2216,2273]
                                            String: "name" [2216,2222]
                                            STRING [2223,2273]
                                                String: "doc_tests_gpu_test_reports_${{ env.split_keys }}" [2223,2273]
                                        FIELD [2274,2340]
                                            String: "path" [2274,2280]
                                            STRING [2281,2340]
                                                String: "/transformers/reports/doc_tests_gpu_${{ env.split_keys }}" [2281,2340]