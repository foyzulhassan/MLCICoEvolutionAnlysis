OBJECT [0,5911]
    FIELD [1,31]
        String: "name" [1,7]
        STRING [8,31]
            String: "CD - Kubernetes - Dev" [8,31]
    FIELD [32,190]
        String: "on" [32,36]
        OBJECT [37,190]
            FIELD [38,73]
                String: "schedule" [38,48]
                ARRAY [49,73]
                    OBJECT [50,72]
                        FIELD [51,71]
                            String: "cron" [51,57]
                            STRING [58,71]
                                String: "0 */3 * * *" [58,71]
            FIELD [74,189]
                String: "workflow_dispatch" [74,93]
                OBJECT [94,189]
                    FIELD [95,188]
                        String: "inputs" [95,103]
                        OBJECT [104,188]
                            FIELD [105,187]
                                String: "deploy-helm" [105,118]
                                OBJECT [119,187]
                                    FIELD [120,136]
                                        String: "type" [120,126]
                                        STRING [127,136]
                                            String: "boolean" [127,136]
                                    FIELD [137,171]
                                        String: "description" [137,150]
                                        STRING [151,171]
                                            String: "Deploy Helm Charts" [151,171]
                                    FIELD [172,186]
                                        String: "default" [172,181]
                                        TRUE [182,186]
    FIELD [191,5910]
        String: "jobs" [191,197]
        OBJECT [198,5910]
            FIELD [199,5909]
                String: "deploy-syft-dev" [199,216]
                OBJECT [217,5909]
                    FIELD [218,253]
                        String: "runs-on" [218,227]
                        STRING [228,253]
                            String: "om-ci-16vcpu-ubuntu2204" [228,253]
                    FIELD [254,5908]
                        String: "steps" [254,261]
                        ARRAY [262,5908]
                            OBJECT [263,467]
                                FIELD [264,294]
                                    String: "name" [264,270]
                                    STRING [271,294]
                                        String: "Check for new changes" [271,294]
                                FIELD [295,307]
                                    String: "id" [295,299]
                                    STRING [300,307]
                                        String: "cache" [300,307]
                                FIELD [308,346]
                                    String: "if" [308,312]
                                    STRING [313,346]
                                        String: "github.event_name == 'schedule'" [313,346]
                                FIELD [347,372]
                                    String: "uses" [347,353]
                                    STRING [354,372]
                                        String: "actions/cache@v3" [354,372]
                                FIELD [373,466]
                                    String: "with" [373,379]
                                    OBJECT [380,466]
                                        FIELD [381,409]
                                            String: "path" [381,387]
                                            STRING [388,409]
                                                String: "scripts/commit_hash" [388,409]
                                        FIELD [410,446]
                                            String: "key" [410,415]
                                            STRING [416,446]
                                                String: "dev-commit-${{ github.sha }}" [416,446]
                                        FIELD [447,465]
                                            String: "lookup-only" [447,460]
                                            TRUE [461,465]
                            OBJECT [468,598]
                                FIELD [469,500]
                                    String: "name" [469,475]
                                    STRING [476,500]
                                        String: "Quit if no new changes" [476,500]
                                FIELD [501,582]
                                    String: "if" [501,505]
                                    STRING [506,582]
                                        String: "github.event_name == 'schedule' && steps.cache.outputs.cache-hit == 'true'" [506,582]
                                FIELD [583,597]
                                    String: "run" [583,588]
                                    STRING [589,597]
                                        String: "exit 0" [589,597]
                            OBJECT [599,680]
                                FIELD [600,637]
                                    String: "name" [600,606]
                                    STRING [607,637]
                                        String: "Permission to home directory" [607,637]
                                FIELD [638,679]
                                    String: "run" [638,643]
                                    STRING [644,679]
                                        String: "sudo chown -R $USER:$USER $HOME\n" [644,679]
                            OBJECT [681,711]
                                FIELD [682,710]
                                    String: "uses" [682,688]
                                    STRING [689,710]
                                        String: "actions/checkout@v4" [689,710]
                            OBJECT [712,906]
                                FIELD [713,741]
                                    String: "name" [713,719]
                                    STRING [720,741]
                                        String: "Checkout Infra Repo" [720,741]
                                FIELD [742,770]
                                    String: "uses" [742,748]
                                    STRING [749,770]
                                        String: "actions/checkout@v4" [749,770]
                                FIELD [771,905]
                                    String: "with" [771,777]
                                    OBJECT [778,905]
                                        FIELD [779,819]
                                            String: "repository" [779,791]
                                            STRING [792,819]
                                                String: "${{ secrets.INFRA_REPO }}" [792,819]
                                        FIELD [820,832]
                                            String: "ref" [820,825]
                                            STRING [826,832]
                                                String: "main" [826,832]
                                        FIELD [833,880]
                                            String: "token" [833,840]
                                            STRING [841,880]
                                                String: "${{ secrets.INFRA_BOT_COMMIT_TOKEN }}" [841,880]
                                        FIELD [881,904]
                                            String: "path" [881,887]
                                            STRING [888,904]
                                                String: "infrastructure" [888,904]
                            OBJECT [907,997]
                                FIELD [908,930]
                                    String: "name" [908,914]
                                    STRING [915,930]
                                        String: "Set up Python" [915,930]
                                FIELD [931,963]
                                    String: "uses" [931,937]
                                    STRING [938,963]
                                        String: "actions/setup-python@v3" [938,963]
                                FIELD [964,996]
                                    String: "with" [964,970]
                                    OBJECT [971,996]
                                        FIELD [972,995]
                                            String: "python-version" [972,988]
                                            STRING [989,995]
                                                String: "3.11" [989,995]
                            OBJECT [998,1082]
                                FIELD [999,1028]
                                    String: "name" [999,1005]
                                    STRING [1006,1028]
                                        String: "Set up Docker Buildx" [1006,1028]
                                FIELD [1029,1042]
                                    String: "id" [1029,1033]
                                    STRING [1034,1042]
                                        String: "buildx" [1034,1042]
                                FIELD [1043,1081]
                                    String: "uses" [1043,1049]
                                    STRING [1050,1081]
                                        String: "docker/setup-buildx-action@v3" [1050,1081]
                            OBJECT [1083,1188]
                                FIELD [1084,1110]
                                    String: "name" [1084,1090]
                                    STRING [1091,1110]
                                        String: "Install Azure CLI" [1091,1110]
                                FIELD [1111,1187]
                                    String: "run" [1111,1116]
                                    STRING [1117,1187]
                                        String: "curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash\naz version\n" [1117,1187]
                            OBJECT [1189,1304]
                                FIELD [1190,1217]
                                    String: "name" [1190,1196]
                                    STRING [1197,1217]
                                        String: "Login to Azure CLI" [1197,1217]
                                FIELD [1218,1241]
                                    String: "uses" [1218,1224]
                                    STRING [1225,1241]
                                        String: "azure/login@v1" [1225,1241]
                                FIELD [1242,1303]
                                    String: "with" [1242,1248]
                                    OBJECT [1249,1303]
                                        FIELD [1250,1302]
                                            String: "creds" [1250,1257]
                                            STRING [1258,1302]
                                                String: "${{ secrets.AZURE_CREDENTIALS_GITHUB_CI }}" [1258,1302]
                            OBJECT [1305,1514]
                                FIELD [1306,1348]
                                    String: "name" [1306,1312]
                                    STRING [1313,1348]
                                        String: "Login to Azure Container Registry" [1313,1348]
                                FIELD [1349,1379]
                                    String: "uses" [1349,1355]
                                    STRING [1356,1379]
                                        String: "azure/docker-login@v1" [1356,1379]
                                FIELD [1380,1513]
                                    String: "with" [1380,1386]
                                    OBJECT [1387,1513]
                                        FIELD [1388,1430]
                                            String: "login-server" [1388,1402]
                                            STRING [1403,1430]
                                                String: "${{ secrets.ACR_SERVER }}" [1403,1430]
                                        FIELD [1431,1471]
                                            String: "username" [1431,1441]
                                            STRING [1442,1471]
                                                String: "${{ secrets.ACR_USERNAME }}" [1442,1471]
                                        FIELD [1472,1512]
                                            String: "password" [1472,1482]
                                            STRING [1483,1512]
                                                String: "${{ secrets.ACR_PASSWORD }}" [1483,1512]
                            OBJECT [1515,1657]
                                FIELD [1516,1549]
                                    String: "name" [1516,1522]
                                    STRING [1523,1549]
                                        String: "Set Grid package version" [1523,1549]
                                FIELD [1550,1561]
                                    String: "id" [1550,1554]
                                    STRING [1555,1561]
                                        String: "grid" [1555,1561]
                                FIELD [1562,1576]
                                    String: "shell" [1562,1569]
                                    STRING [1570,1576]
                                        String: "bash" [1570,1576]
                                FIELD [1577,1656]
                                    String: "run" [1577,1582]
                                    STRING [1583,1656]
                                        String: "echo \"GRID_VERSION=$(python packages/grid/VERSION)\" >> $GITHUB_OUTPUT" [1583,1656]
                            OBJECT [1658,2093]
                                FIELD [1659,1715]
                                    String: "name" [1659,1665]
                                    STRING [1666,1715]
                                        String: "Build and push `grid-backend` image to registry" [1666,1715]
                                FIELD [1716,1752]
                                    String: "uses" [1716,1722]
                                    STRING [1723,1752]
                                        String: "docker/build-push-action@v4" [1723,1752]
                                FIELD [1753,2092]
                                    String: "with" [1753,1759]
                                    OBJECT [1760,2092]
                                        FIELD [1761,1783]
                                            String: "context" [1761,1770]
                                            STRING [1771,1783]
                                                String: "./packages" [1771,1783]
                                        FIELD [1784,1835]
                                            String: "file" [1784,1790]
                                            STRING [1791,1835]
                                                String: "./packages/grid/backend/backend.dockerfile" [1791,1835]
                                        FIELD [1836,1847]
                                            String: "push" [1836,1842]
                                            TRUE [1843,1847]
                                        FIELD [1848,1866]
                                            String: "target" [1848,1856]
                                            STRING [1857,1866]
                                                String: "backend" [1857,1866]
                                        FIELD [1867,2091]
                                            String: "tags" [1867,1873]
                                            STRING [1874,2091]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-backend:${{ steps.grid.outputs.GRID_VERSION }}\n" [1874,2091]
                            OBJECT [2094,2561]
                                FIELD [2095,2152]
                                    String: "name" [2095,2101]
                                    STRING [2102,2152]
                                        String: "Build and push `grid-frontend` image to registry" [2102,2152]
                                FIELD [2153,2189]
                                    String: "uses" [2153,2159]
                                    STRING [2160,2189]
                                        String: "docker/build-push-action@v4" [2160,2189]
                                FIELD [2190,2560]
                                    String: "with" [2190,2196]
                                    OBJECT [2197,2560]
                                        FIELD [2198,2234]
                                            String: "context" [2198,2207]
                                            STRING [2208,2234]
                                                String: "./packages/grid/frontend" [2208,2234]
                                        FIELD [2235,2288]
                                            String: "file" [2235,2241]
                                            STRING [2242,2288]
                                                String: "./packages/grid/frontend/frontend.dockerfile" [2242,2288]
                                        FIELD [2289,2300]
                                            String: "push" [2289,2295]
                                            TRUE [2296,2300]
                                        FIELD [2301,2528]
                                            String: "tags" [2301,2307]
                                            STRING [2308,2528]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-frontend:${{ steps.grid.outputs.GRID_VERSION }}\n" [2308,2528]
                                        FIELD [2529,2559]
                                            String: "target" [2529,2537]
                                            STRING [2538,2559]
                                                String: "grid-ui-development" [2538,2559]
                            OBJECT [2562,2993]
                                FIELD [2563,2621]
                                    String: "name" [2563,2569]
                                    STRING [2570,2621]
                                        String: "Build and push `grid-headscale` image to registry" [2570,2621]
                                FIELD [2622,2658]
                                    String: "uses" [2622,2628]
                                    STRING [2629,2658]
                                        String: "docker/build-push-action@v4" [2629,2658]
                                FIELD [2659,2992]
                                    String: "with" [2659,2665]
                                    OBJECT [2666,2992]
                                        FIELD [2667,2698]
                                            String: "context" [2667,2676]
                                            STRING [2677,2698]
                                                String: "./packages/grid/vpn" [2677,2698]
                                        FIELD [2699,2748]
                                            String: "file" [2699,2705]
                                            STRING [2706,2748]
                                                String: "./packages/grid/vpn/headscale.dockerfile" [2706,2748]
                                        FIELD [2749,2760]
                                            String: "push" [2749,2755]
                                            TRUE [2756,2760]
                                        FIELD [2761,2991]
                                            String: "tags" [2761,2767]
                                            STRING [2768,2991]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-headscale:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-headscale:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-headscale:${{ steps.grid.outputs.GRID_VERSION }}\n" [2768,2991]
                            OBJECT [2994,3425]
                                FIELD [2995,3053]
                                    String: "name" [2995,3001]
                                    STRING [3002,3053]
                                        String: "Build and push `grid-tailscale` image to registry" [3002,3053]
                                FIELD [3054,3090]
                                    String: "uses" [3054,3060]
                                    STRING [3061,3090]
                                        String: "docker/build-push-action@v4" [3061,3090]
                                FIELD [3091,3424]
                                    String: "with" [3091,3097]
                                    OBJECT [3098,3424]
                                        FIELD [3099,3130]
                                            String: "context" [3099,3108]
                                            STRING [3109,3130]
                                                String: "./packages/grid/vpn" [3109,3130]
                                        FIELD [3131,3180]
                                            String: "file" [3131,3137]
                                            STRING [3138,3180]
                                                String: "./packages/grid/vpn/tailscale.dockerfile" [3138,3180]
                                        FIELD [3181,3192]
                                            String: "push" [3181,3187]
                                            TRUE [3188,3192]
                                        FIELD [3193,3423]
                                            String: "tags" [3193,3199]
                                            STRING [3200,3423]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-tailscale:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-tailscale:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-tailscale:${{ steps.grid.outputs.GRID_VERSION }}\n" [3200,3423]
                            OBJECT [3426,3868]
                                FIELD [3427,3488]
                                    String: "name" [3427,3433]
                                    STRING [3434,3488]
                                        String: "Build and push `grid-vpn-iptables` image to registry" [3434,3488]
                                FIELD [3489,3525]
                                    String: "uses" [3489,3495]
                                    STRING [3496,3525]
                                        String: "docker/build-push-action@v2" [3496,3525]
                                FIELD [3526,3867]
                                    String: "with" [3526,3532]
                                    OBJECT [3533,3867]
                                        FIELD [3534,3565]
                                            String: "context" [3534,3543]
                                            STRING [3544,3565]
                                                String: "./packages/grid/vpn" [3544,3565]
                                        FIELD [3566,3614]
                                            String: "file" [3566,3572]
                                            STRING [3573,3614]
                                                String: "./packages/grid/vpn/iptables.dockerfile" [3573,3614]
                                        FIELD [3615,3626]
                                            String: "push" [3615,3621]
                                            TRUE [3622,3626]
                                        FIELD [3627,3866]
                                            String: "tags" [3627,3633]
                                            STRING [3634,3866]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-vpn-iptables:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-vpn-iptables:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-vpn-iptables:${{ steps.grid.outputs.GRID_VERSION }}\n" [3634,3866]
                            OBJECT [3869,4743]
                                FIELD [3870,3911]
                                    String: "name" [3870,3876]
                                    STRING [3877,3911]
                                        String: "Build Helm Chart & Copy to infra" [3877,3911]
                                FIELD [3912,3994]
                                    String: "if" [3912,3916]
                                    STRING [3917,3994]
                                        String: "github.ref == 'refs/heads/dev' || github.event.inputs.deploy-helm == 'true'" [3917,3994]
                                FIELD [3995,4009]
                                    String: "shell" [3995,4002]
                                    STRING [4003,4009]
                                        String: "bash" [4003,4009]
                                FIELD [4010,4742]
                                    String: "run" [4010,4015]
                                    STRING [4016,4742]
                                        String: "K3D_VERSION=v5.6.0\nDEVSPACE_VERSION=v6.3.3\n\n# install k3d\nwget https://github.com/k3d-io/k3d/releases/download/${K3D_VERSION}/k3d-linux-amd64\nmv k3d-linux-amd64 k3d\nchmod +x k3d\nexport PATH=`pwd`:$PATH\nk3d version\n\n# Install devspace\ncurl -sSL https://github.com/loft-sh/devspace/releases/download/${DEVSPACE_VERSION}/devspace-linux-amd64 -o ./devspace\nchmod +x devspace\ndevspace version\n\nexport CONTAINER_REGISTRY=${{ secrets.ACR_SERVER }}\nexport VERSION=dev-${{github.sha}}\ntox -e syft.build.helm\n\nrm -rf infrastructure/gitops/environments/dev/\nmkdir -p infrastructure/gitops/environments/dev/\ncp -R packages/grid/helm/syft/. packages/grid/helm/manifests.yaml infrastructure/gitops/environments/dev/\n" [4016,4742]
                            OBJECT [4744,5102]
                                FIELD [4745,4789]
                                    String: "name" [4745,4751]
                                    STRING [4752,4789]
                                        String: "Commit & push changes to Infra Repo" [4752,4789]
                                FIELD [4790,4872]
                                    String: "if" [4790,4794]
                                    STRING [4795,4872]
                                        String: "github.ref == 'refs/heads/dev' || github.event.inputs.deploy-helm == 'true'" [4795,4872]
                                FIELD [4873,4906]
                                    String: "uses" [4873,4879]
                                    STRING [4880,4906]
                                        String: "EndBug/add-and-commit@v9" [4880,4906]
                                FIELD [4907,5101]
                                    String: "with" [4907,4913]
                                    OBJECT [4914,5101]
                                        FIELD [4915,4957]
                                            String: "author_name" [4915,4928]
                                            STRING [4929,4957]
                                                String: "${{ secrets.OM_BOT_NAME }}" [4929,4957]
                                        FIELD [4958,5002]
                                            String: "author_email" [4958,4972]
                                            STRING [4973,5002]
                                                String: "${{ secrets.OM_BOT_EMAIL }}" [4973,5002]
                                        FIELD [5003,5043]
                                            String: "message" [5003,5012]
                                            STRING [5013,5043]
                                                String: "[env] Update dev helm charts" [5013,5043]
                                        FIELD [5044,5053]
                                            String: "add" [5044,5049]
                                            STRING [5050,5053]
                                                String: "." [5050,5053]
                                        FIELD [5054,5074]
                                            String: "push" [5054,5060]
                                            STRING [5061,5074]
                                                String: "origin main" [5061,5074]
                                        FIELD [5075,5100]
                                            String: "cwd" [5075,5080]
                                            STRING [5081,5100]
                                                String: "./infrastructure/" [5081,5100]
                            OBJECT [5103,5709]
                                FIELD [5104,5145]
                                    String: "name" [5104,5110]
                                    STRING [5111,5145]
                                        String: "Cleanup Azure Container Registry" [5111,5145]
                                FIELD [5146,5708]
                                    String: "run" [5146,5151]
                                    STRING [5152,5708]
                                        String: "ACR_REGISTRY_NAME=${{ secrets.ACR_REGISTRY_NAME }}\n\necho \">> Fetching repo list..\"\nREPO_LIST=$(az acr repository list -n $ACR_REGISTRY_NAME -o tsv)\n\nKEEP_PREV_VERSIONS=5\nTAIL_FROM_LINE=$(($KEEP_PREV_VERSIONS + 1))\n\nfor repo in $REPO_LIST\ndo\n    echo \"Cleaning up '$repo'\"\n    az acr repository show-tags --name $ACR_REGISTRY_NAME --repository $repo --orderby time_desc --output tsv \\\n      | grep dev- \\\n      | tail -n +$TAIL_FROM_LINE \\\n      | xargs -r -I% az acr repository untag --name $ACR_REGISTRY_NAME --image $repo:%\ndone\n" [5152,5708]
                            OBJECT [5710,5823]
                                FIELD [5711,5752]
                                    String: "name" [5711,5717]
                                    STRING [5718,5752]
                                        String: "Logout and cleanup Azure account" [5718,5752]
                                FIELD [5753,5768]
                                    String: "if" [5753,5757]
                                    STRING [5758,5768]
                                        String: "always()" [5758,5768]
                                FIELD [5769,5822]
                                    String: "run" [5769,5774]
                                    STRING [5775,5822]
                                        String: "az logout\naz cache purge\naz account clear\n" [5775,5822]
                            OBJECT [5824,5907]
                                FIELD [5825,5849]
                                    String: "name" [5825,5831]
                                    STRING [5832,5849]
                                        String: "Save Commit SHA" [5832,5849]
                                FIELD [5850,5906]
                                    String: "run" [5850,5855]
                                    STRING [5856,5906]
                                        String: "echo \"${{ github.sha }}\" > scripts/commit_hash" [5856,5906]