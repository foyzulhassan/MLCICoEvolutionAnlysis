OBJECT [0,6106]
    FIELD [1,21]
        String: "name" [1,7]
        STRING [8,21]
            String: "Build on M1" [8,21]
    FIELD [22,208]
        String: "on" [22,26]
        OBJECT [27,208]
            FIELD [28,96]
                String: "pull_request" [28,42]
                OBJECT [43,96]
                    FIELD [44,95]
                        String: "paths" [44,51]
                        ARRAY [52,95]
                            STRING [53,94]
                                String: ".github/workflows/build-m1-binaries.yml" [53,94]
            FIELD [97,182]
                String: "push" [97,103]
                OBJECT [104,182]
                    FIELD [105,139]
                        String: "branches" [105,115]
                        ARRAY [116,139]
                            STRING [117,126]
                                String: "nightly" [117,126]
                            STRING [127,138]
                                String: "release/*" [127,138]
                    FIELD [140,181]
                        String: "tags" [140,146]
                        ARRAY [147,181]
                            STRING [148,180]
                                String: "v[0-9]+.[0-9]+.[0-9]+-rc[0-9]+" [148,180]
            FIELD [183,207]
                String: "workflow_dispatch" [183,202]
                NULL [203,207]
    FIELD [209,236]
        String: "env" [209,214]
        OBJECT [215,236]
            FIELD [216,235]
                String: "CHANNEL" [216,225]
                STRING [226,235]
                    String: "nightly" [226,235]
    FIELD [237,5928]
        String: "jobs" [237,243]
        OBJECT [244,5928]
            FIELD [245,3613]
                String: "build_wheels" [245,259]
                OBJECT [260,3613]
                    FIELD [261,295]
                        String: "name" [261,267]
                        STRING [268,295]
                            String: "Build TorchText M1 wheels" [268,295]
                    FIELD [296,319]
                        String: "runs-on" [296,305]
                        STRING [306,319]
                            String: "macos-m1-12" [306,319]
                    FIELD [320,392]
                        String: "strategy" [320,330]
                        OBJECT [331,392]
                            FIELD [332,349]
                                String: "fail-fast" [332,343]
                                FALSE [344,349]
                            FIELD [350,391]
                                String: "matrix" [350,358]
                                OBJECT [359,391]
                                    FIELD [360,390]
                                        String: "py_vers" [360,369]
                                        ARRAY [370,390]
                                            STRING [371,376]
                                                String: "3.8" [371,376]
                                            STRING [377,382]
                                                String: "3.9" [377,382]
                                            STRING [383,389]
                                                String: "3.10" [383,389]
                    FIELD [393,3612]
                        String: "steps" [393,400]
                        ARRAY [401,3612]
                            OBJECT [402,461]
                                FIELD [403,431]
                                    String: "name" [403,409]
                                    STRING [410,431]
                                        String: "Checkout repository" [410,431]
                                FIELD [432,460]
                                    String: "uses" [432,438]
                                    STRING [439,460]
                                        String: "actions/checkout@v2" [439,460]
                            OBJECT [462,738]
                                FIELD [463,508]
                                    String: "name" [463,469]
                                    STRING [470,508]
                                        String: "Set CHANNEL (only for tagged pushes)" [470,508]
                                FIELD [509,596]
                                    String: "if" [509,513]
                                    STRING [514,596]
                                        String: "${{ github.event_name == 'push' && startsWith(github.event.ref, 'refs/tags/') }}" [514,596]
                                FIELD [597,737]
                                    String: "run" [597,602]
                                    STRING [603,737]
                                        String: "# reference ends with an RC suffix\nif [[ ${GITHUB_REF_NAME} = *-rc[0-9]* ]]; then\n  echo \"CHANNEL=test\" >> \"$GITHUB_ENV\"\nfi\n" [603,737]
                            OBJECT [739,976]
                                FIELD [740,782]
                                    String: "name" [740,746]
                                    STRING [747,782]
                                        String: "Set Release CHANNEL (for release)" [747,782]
                                FIELD [783,924]
                                    String: "if" [783,787]
                                    STRING [788,924]
                                        String: "${{ (github.event_name == 'pull_request' && startsWith(github.base_ref, 'release')) || startsWith(github.ref, 'refs/heads/release') }}" [788,924]
                                FIELD [925,975]
                                    String: "run" [925,930]
                                    STRING [931,975]
                                        String: "echo \"CHANNEL=test\" >> \"$GITHUB_ENV\"\n" [931,975]
                            OBJECT [977,1068]
                                FIELD [978,1002]
                                    String: "name" [978,984]
                                    STRING [985,1002]
                                        String: "Setup miniconda" [985,1002]
                                FIELD [1003,1067]
                                    String: "uses" [1003,1009]
                                    STRING [1010,1067]
                                        String: "pytorch/test-infra/.github/actions/setup-miniconda@main" [1010,1067]
                            OBJECT [1069,2223]
                                FIELD [1070,1103]
                                    String: "name" [1070,1076]
                                    STRING [1077,1103]
                                        String: "Build TorchText M1 wheel" [1077,1103]
                                FIELD [1104,1139]
                                    String: "shell" [1104,1111]
                                    STRING [1112,1139]
                                        String: "arch -arch arm64 bash {0}" [1112,1139]
                                FIELD [1140,1225]
                                    String: "env" [1140,1145]
                                    OBJECT [1146,1225]
                                        FIELD [1147,1190]
                                            String: "ENV_NAME" [1147,1157]
                                            STRING [1158,1190]
                                                String: "conda-env-${{ github.run_id }}" [1158,1190]
                                        FIELD [1191,1224]
                                            String: "PY_VERS" [1191,1200]
                                            STRING [1201,1224]
                                                String: "${{ matrix.py_vers }}" [1201,1224]
                                FIELD [1226,2222]
                                    String: "run" [1226,1231]
                                    STRING [1232,2222]
                                        String: "set -ex\n. packaging/pkg_helpers.bash\n# if we are uploading to test channell, our version consist only of the base: 0.x.x - no date string or suffix added\nif [[ $CHANNEL == \"test\" ]]; then\n  setup_base_build_version\nelse\n  setup_build_version\nfi\ngit submodule update --init --recursive\nWHL_NAME=torchtext-${BUILD_VERSION}-cp${PY_VERS/.}-cp${PY_VERS/.}-macosx_11_0_arm64.whl\nconda create -yp ${ENV_NAME} python=${PY_VERS} numpy cmake ninja wheel pkg-config\nconda run -p ${ENV_NAME} python3 -mpip install torch --pre --extra-index-url=https://download.pytorch.org/whl/${CHANNEL}\nconda run -p ${ENV_NAME} python3 -mpip install delocate\nconda run -p ${ENV_NAME} python3 setup.py bdist_wheel\nexport PYTORCH_VERSION=\"$(conda run -p ${ENV_NAME} python3 -mpip show torch | grep ^Version: | sed 's/Version: *//')\"\nconda run -p ${ENV_NAME} DYLD_FALLBACK_LIBRARY_PATH=\"${ENV_NAME}/lib\" delocate-wheel -v --ignore-missing-dependencies dist/*.whl\nconda env remove -p ${ENV_NAME}\n" [1232,2222]
                            OBJECT [2224,2854]
                                FIELD [2225,2244]
                                    String: "name" [2225,2231]
                                    STRING [2232,2244]
                                        String: "Test wheel" [2232,2244]
                                FIELD [2245,2280]
                                    String: "shell" [2245,2252]
                                    STRING [2253,2280]
                                        String: "arch -arch arm64 bash {0}" [2253,2280]
                                FIELD [2281,2371]
                                    String: "env" [2281,2286]
                                    OBJECT [2287,2371]
                                        FIELD [2288,2336]
                                            String: "ENV_NAME" [2288,2298]
                                            STRING [2299,2336]
                                                String: "conda-test-env-${{ github.run_id }}" [2299,2336]
                                        FIELD [2337,2370]
                                            String: "PY_VERS" [2337,2346]
                                            STRING [2347,2370]
                                                String: "${{ matrix.py_vers }}" [2347,2370]
                                FIELD [2372,2853]
                                    String: "run" [2372,2377]
                                    STRING [2378,2853]
                                        String: "set -ex\nconda create -yp ${ENV_NAME} python=${PY_VERS} numpy\nconda run -p ${ENV_NAME} python3 -mpip install torch --pre --extra-index-url=https://download.pytorch.org/whl/${CHANNEL}\nconda run -p ${ENV_NAME} python3 -mpip install dist/*.whl\n# Test torch is importable, by changing cwd and running import commands\nconda run --cwd /tmp -p ${ENV_NAME} python3 -c \"import torchtext;print('torchtext version is ', torchtext.__version__)\"\nconda env remove -p ${ENV_NAME}\n" [2378,2853]
                            OBJECT [2855,3136]
                                FIELD [2856,2887]
                                    String: "name" [2856,2862]
                                    STRING [2863,2887]
                                        String: "Upload wheel to GitHub" [2863,2887]
                                FIELD [2888,3021]
                                    String: "if" [2888,2892]
                                    STRING [2893,3021]
                                        String: "${{ github.event_name == 'push' && (github.event.ref == 'refs/heads/nightly' || startsWith(github.event.ref, 'refs/tags/')) }}" [2893,3021]
                                FIELD [3022,3057]
                                    String: "uses" [3022,3028]
                                    STRING [3029,3057]
                                        String: "actions/upload-artifact@v3" [3029,3057]
                                FIELD [3058,3135]
                                    String: "with" [3058,3064]
                                    OBJECT [3065,3135]
                                        FIELD [3066,3119]
                                            String: "name" [3066,3072]
                                            STRING [3073,3119]
                                                String: "torchtext-py${{ matrix.py_vers }}-macos11-m1" [3073,3119]
                                        FIELD [3120,3134]
                                            String: "path" [3120,3126]
                                            STRING [3127,3134]
                                                String: "dist/" [3127,3134]
                            OBJECT [3137,3611]
                                FIELD [3138,3165]
                                    String: "name" [3138,3144]
                                    STRING [3145,3165]
                                        String: "Upload wheel to S3" [3145,3165]
                                FIELD [3166,3299]
                                    String: "if" [3166,3170]
                                    STRING [3171,3299]
                                        String: "${{ github.event_name == 'push' && (github.event.ref == 'refs/heads/nightly' || startsWith(github.event.ref, 'refs/tags/')) }}" [3171,3299]
                                FIELD [3300,3335]
                                    String: "shell" [3300,3307]
                                    STRING [3308,3335]
                                        String: "arch -arch arm64 bash {0}" [3308,3335]
                                FIELD [3336,3495]
                                    String: "env" [3336,3341]
                                    OBJECT [3342,3495]
                                        FIELD [3343,3414]
                                            String: "AWS_ACCESS_KEY_ID" [3343,3362]
                                            STRING [3363,3414]
                                                String: "${{ secrets.AWS_PYTORCH_UPLOADER_ACCESS_KEY_ID }}" [3363,3414]
                                        FIELD [3415,3494]
                                            String: "AWS_SECRET_ACCESS_KEY" [3415,3438]
                                            STRING [3439,3494]
                                                String: "${{ secrets.AWS_PYTORCH_UPLOADER_SECRET_ACCESS_KEY }}" [3439,3494]
                                FIELD [3496,3610]
                                    String: "run" [3496,3501]
                                    STRING [3502,3610]
                                        String: "for pkg in dist/*; do\n  aws s3 cp \"$pkg\" \"s3://pytorch/whl/${CHANNEL}/cpu/\" --acl public-read\ndone\n" [3502,3610]
            FIELD [3614,5927]
                String: "build_conda" [3614,3627]
                OBJECT [3628,5927]
                    FIELD [3629,3671]
                        String: "name" [3629,3635]
                        STRING [3636,3671]
                            String: "Build TorchText M1 conda packages" [3636,3671]
                    FIELD [3672,3695]
                        String: "runs-on" [3672,3681]
                        STRING [3682,3695]
                            String: "macos-m1-12" [3682,3695]
                    FIELD [3696,3750]
                        String: "strategy" [3696,3706]
                        OBJECT [3707,3750]
                            FIELD [3708,3749]
                                String: "matrix" [3708,3716]
                                OBJECT [3717,3749]
                                    FIELD [3718,3748]
                                        String: "py_vers" [3718,3727]
                                        ARRAY [3728,3748]
                                            STRING [3729,3734]
                                                String: "3.8" [3729,3734]
                                            STRING [3735,3740]
                                                String: "3.9" [3735,3740]
                                            STRING [3741,3747]
                                                String: "3.10" [3741,3747]
                    FIELD [3751,5926]
                        String: "steps" [3751,3758]
                        ARRAY [3759,5926]
                            OBJECT [3760,3819]
                                FIELD [3761,3789]
                                    String: "name" [3761,3767]
                                    STRING [3768,3789]
                                        String: "Checkout repository" [3768,3789]
                                FIELD [3790,3818]
                                    String: "uses" [3790,3796]
                                    STRING [3797,3818]
                                        String: "actions/checkout@v2" [3797,3818]
                            OBJECT [3820,4096]
                                FIELD [3821,3866]
                                    String: "name" [3821,3827]
                                    STRING [3828,3866]
                                        String: "Set CHANNEL (only for tagged pushes)" [3828,3866]
                                FIELD [3867,3954]
                                    String: "if" [3867,3871]
                                    STRING [3872,3954]
                                        String: "${{ github.event_name == 'push' && startsWith(github.event.ref, 'refs/tags/') }}" [3872,3954]
                                FIELD [3955,4095]
                                    String: "run" [3955,3960]
                                    STRING [3961,4095]
                                        String: "# reference ends with an RC suffix\nif [[ ${GITHUB_REF_NAME} = *-rc[0-9]* ]]; then\n  echo \"CHANNEL=test\" >> \"$GITHUB_ENV\"\nfi\n" [3961,4095]
                            OBJECT [4097,4334]
                                FIELD [4098,4140]
                                    String: "name" [4098,4104]
                                    STRING [4105,4140]
                                        String: "Set CHANNEL Release (for release)" [4105,4140]
                                FIELD [4141,4282]
                                    String: "if" [4141,4145]
                                    STRING [4146,4282]
                                        String: "${{ (github.event_name == 'pull_request' && startsWith(github.base_ref, 'release')) || startsWith(github.ref, 'refs/heads/release') }}" [4146,4282]
                                FIELD [4283,4333]
                                    String: "run" [4283,4288]
                                    STRING [4289,4333]
                                        String: "echo \"CHANNEL=test\" >> \"$GITHUB_ENV\"\n" [4289,4333]
                            OBJECT [4335,4426]
                                FIELD [4336,4360]
                                    String: "name" [4336,4342]
                                    STRING [4343,4360]
                                        String: "Setup miniconda" [4343,4360]
                                FIELD [4361,4425]
                                    String: "uses" [4361,4367]
                                    STRING [4368,4425]
                                        String: "pytorch/test-infra/.github/actions/setup-miniconda@main" [4368,4425]
                            OBJECT [4427,4585]
                                FIELD [4428,4485]
                                    String: "name" [4428,4434]
                                    STRING [4435,4485]
                                        String: "Install conda-build and purge previous artifacts" [4435,4485]
                                FIELD [4486,4521]
                                    String: "shell" [4486,4493]
                                    STRING [4494,4521]
                                        String: "arch -arch arm64 bash {0}" [4494,4521]
                                FIELD [4522,4584]
                                    String: "run" [4522,4527]
                                    STRING [4528,4584]
                                        String: "conda install -yq conda-build\nconda build purge-all\n" [4528,4584]
                            OBJECT [4586,5302]
                                FIELD [4587,4628]
                                    String: "name" [4587,4593]
                                    STRING [4594,4628]
                                        String: "Build TorchText M1 conda package" [4594,4628]
                                FIELD [4629,4664]
                                    String: "shell" [4629,4636]
                                    STRING [4637,4664]
                                        String: "arch -arch arm64 bash {0}" [4637,4664]
                                FIELD [4665,4776]
                                    String: "env" [4665,4670]
                                    OBJECT [4671,4776]
                                        FIELD [4672,4715]
                                            String: "ENV_NAME" [4672,4682]
                                            STRING [4683,4715]
                                                String: "conda-env-${{ github.run_id }}" [4683,4715]
                                        FIELD [4716,4756]
                                            String: "PYTHON_VERSION" [4716,4732]
                                            STRING [4733,4756]
                                                String: "${{ matrix.py_vers }}" [4733,4756]
                                        FIELD [4757,4775]
                                            String: "CU_VERSION" [4757,4769]
                                            STRING [4770,4775]
                                                String: "cpu" [4770,4775]
                                FIELD [4777,5301]
                                    String: "run" [4777,4782]
                                    STRING [4783,5301]
                                        String: "set -ex\n. packaging/pkg_helpers.bash\n\nif [[ $CHANNEL == \"test\" ]]; then\n  setup_base_build_version\n  export CONDA_CHANNEL_FLAGS=\"-c pytorch-test\"\nelse\n  setup_build_version\nfi\nexport BUILD_TYPE=\"conda\"\nexport NO_CUDA_PACKAGE=1\nexport SOURCE_ROOT_DIR=\"$PWD\"\n\nsetup_conda_pytorch_constraint\nexport SOURCE_ROOT_DIR=$(pwd)\nconda build \\\n  -c defaults \\\n  $CONDA_CHANNEL_FLAGS \\\n  --no-anaconda-upload \\\n  --python \"$PYTHON_VERSION\" \\\n  --output-folder=dist/ \\\n  packaging/torchtext\n" [4783,5301]
                            OBJECT [5303,5458]
                                FIELD [5304,5337]
                                    String: "name" [5304,5310]
                                    STRING [5311,5337]
                                        String: "Upload package to GitHub" [5311,5337]
                                FIELD [5338,5373]
                                    String: "uses" [5338,5344]
                                    STRING [5345,5373]
                                        String: "actions/upload-artifact@v3" [5345,5373]
                                FIELD [5374,5457]
                                    String: "with" [5374,5380]
                                    OBJECT [5381,5457]
                                        FIELD [5382,5441]
                                            String: "name" [5382,5388]
                                            STRING [5389,5441]
                                                String: "torchtext-py${{ matrix.py_vers }}-macos11-m1-conda" [5389,5441]
                                        FIELD [5442,5456]
                                            String: "path" [5442,5448]
                                            STRING [5449,5456]
                                                String: "dist/" [5449,5456]
                            OBJECT [5459,5925]
                                FIELD [5460,5492]
                                    String: "name" [5460,5466]
                                    STRING [5467,5492]
                                        String: "Upload package to conda" [5467,5492]
                                FIELD [5493,5626]
                                    String: "if" [5493,5497]
                                    STRING [5498,5626]
                                        String: "${{ github.event_name == 'push' && (github.event.ref == 'refs/heads/nightly' || startsWith(github.event.ref, 'refs/tags/')) }}" [5498,5626]
                                FIELD [5627,5662]
                                    String: "shell" [5627,5634]
                                    STRING [5635,5662]
                                        String: "arch -arch arm64 bash {0}" [5635,5662]
                                FIELD [5663,5735]
                                    String: "env" [5663,5668]
                                    OBJECT [5669,5735]
                                        FIELD [5670,5734]
                                            String: "CONDA_PYTORCHBOT_TOKEN" [5670,5694]
                                            STRING [5695,5734]
                                                String: "${{ secrets.CONDA_PYTORCHBOT_TOKEN }}" [5695,5734]
                                FIELD [5736,5924]
                                    String: "run" [5736,5741]
                                    STRING [5742,5924]
                                        String: "conda install -yq anaconda-client\nset -x\nanaconda  -t \"${CONDA_PYTORCHBOT_TOKEN}\" upload dist/osx-arm64/*.tar.bz2 -u \"pytorch-${CHANNEL}\" --label main --no-progress --force\n" [5742,5924]
    FIELD [5929,6105]
        String: "concurrency" [5929,5942]
        OBJECT [5943,6105]
            FIELD [5944,6078]
                String: "group" [5944,5951]
                STRING [5952,6078]
                    String: "${{ github.workflow }}-${{ github.event.pull_request.number || github.sha }}-${{ github.event_name == 'workflow_dispatch' }}" [5952,6078]
            FIELD [6079,6104]
                String: "cancel-in-progress" [6079,6099]
                TRUE [6100,6104]