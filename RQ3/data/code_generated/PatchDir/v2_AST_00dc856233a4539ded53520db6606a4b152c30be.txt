OBJECT [0,8950]
    FIELD [1,41]
        String: "name" [1,7]
        STRING [8,41]
            String: "Self-hosted runner (nightly-ci)" [8,41]
    FIELD [42,96]
        String: "on" [42,46]
        OBJECT [47,96]
            FIELD [48,74]
                String: "repository_dispatch" [48,69]
                NULL [70,74]
            FIELD [75,95]
                String: "workflow_call" [75,90]
                NULL [91,95]
    FIELD [97,321]
        String: "env" [97,102]
        OBJECT [103,321]
            FIELD [104,126]
                String: "HF_HOME" [104,113]
                STRING [114,126]
                    String: "/mnt/cache" [114,126]
            FIELD [127,152]
                String: "TRANSFORMERS_IS_CI" [127,147]
                TRUE [148,152]
            FIELD [153,172]
                String: "OMP_NUM_THREADS" [153,170]
                NUMBER [171,172]
                    Number: 8 [171,172]
            FIELD [173,192]
                String: "MKL_NUM_THREADS" [173,190]
                NUMBER [191,192]
                    Number: 8 [191,192]
            FIELD [193,208]
                String: "RUN_SLOW" [193,203]
                TRUE [204,208]
            FIELD [209,261]
                String: "SIGOPT_API_TOKEN" [209,227]
                STRING [228,261]
                    String: "${{ secrets.SIGOPT_API_TOKEN }}" [228,261]
            FIELD [262,294]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [262,289]
                TRUE [290,294]
            FIELD [295,320]
                String: "RUN_PT_TF_CROSS_TESTS" [295,318]
                NUMBER [319,320]
                    Number: 1 [319,320]
    FIELD [322,8949]
        String: "jobs" [322,328]
        OBJECT [329,8949]
            FIELD [330,1576]
                String: "setup" [330,337]
                OBJECT [338,1576]
                    FIELD [339,353]
                        String: "name" [339,345]
                        STRING [346,353]
                            String: "Setup" [346,353]
                    FIELD [354,419]
                        String: "strategy" [354,364]
                        OBJECT [365,419]
                            FIELD [366,418]
                                String: "matrix" [366,374]
                                OBJECT [375,418]
                                    FIELD [376,417]
                                        String: "machine_type" [376,390]
                                        ARRAY [391,417]
                                            STRING [392,404]
                                                String: "single-gpu" [392,404]
                                            STRING [405,416]
                                                String: "multi-gpu" [405,416]
                    FIELD [420,488]
                        String: "runs-on" [420,429]
                        ARRAY [430,488]
                            STRING [431,459]
                                String: "${{ matrix.machine_type }}" [431,459]
                            STRING [460,472]
                                String: "nvidia-gpu" [460,472]
                            STRING [473,477]
                                String: "t4" [473,477]
                            STRING [478,487]
                                String: "past-ci" [478,487]
                    FIELD [489,663]
                        String: "container" [489,500]
                        OBJECT [501,663]
                            FIELD [502,565]
                                String: "image" [502,509]
                                STRING [510,565]
                                    String: "huggingface/transformers-all-latest-torch-nightly-gpu" [510,565]
                            FIELD [566,662]
                                String: "options" [566,575]
                                STRING [576,662]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [576,662]
                    FIELD [664,725]
                        String: "outputs" [664,673]
                        OBJECT [674,725]
                            FIELD [675,724]
                                String: "matrix" [675,683]
                                STRING [684,724]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [684,724]
                    FIELD [726,1575]
                        String: "steps" [726,733]
                        ARRAY [734,1575]
                            OBJECT [735,848]
                                FIELD [736,757]
                                    String: "name" [736,742]
                                    STRING [743,757]
                                        String: "Update clone" [743,757]
                                FIELD [758,793]
                                    String: "working-directory" [758,777]
                                    STRING [778,793]
                                        String: "/transformers" [778,793]
                                FIELD [794,847]
                                    String: "run" [794,799]
                                    STRING [800,847]
                                        String: "git fetch && git checkout ${{ github.sha }}\n" [800,847]
                            OBJECT [849,987]
                                FIELD [850,866]
                                    String: "name" [850,856]
                                    STRING [857,866]
                                        String: "Cleanup" [857,866]
                                FIELD [867,902]
                                    String: "working-directory" [867,886]
                                    STRING [887,902]
                                        String: "/transformers" [887,902]
                                FIELD [903,986]
                                    String: "run" [903,908]
                                    STRING [909,986]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [909,986]
                            OBJECT [988,1097]
                                FIELD [989,1041]
                                    String: "name" [989,995]
                                    STRING [996,1041]
                                        String: "Show installed libraries and their versions" [996,1041]
                                FIELD [1042,1077]
                                    String: "working-directory" [1042,1061]
                                    STRING [1062,1077]
                                        String: "/transformers" [1062,1077]
                                FIELD [1078,1096]
                                    String: "run" [1078,1083]
                                    STRING [1084,1096]
                                        String: "pip freeze" [1084,1096]
                            OBJECT [1098,1531]
                                FIELD [1099,1116]
                                    String: "id" [1099,1103]
                                    STRING [1104,1116]
                                        String: "set-matrix" [1104,1116]
                                FIELD [1117,1149]
                                    String: "name" [1117,1123]
                                    STRING [1124,1149]
                                        String: "Identify models to test" [1124,1149]
                                FIELD [1150,1191]
                                    String: "working-directory" [1150,1169]
                                    STRING [1170,1191]
                                        String: "/transformers/tests" [1170,1191]
                                FIELD [1192,1530]
                                    String: "run" [1192,1197]
                                    STRING [1198,1530]
                                        String: "echo \"matrix=$(python3 -c 'import os; tests = os.getcwd(); model_tests = os.listdir(os.path.join(tests, \"models\")); d1 = sorted(list(filter(os.path.isdir, os.listdir(tests)))); d2 = sorted(list(filter(os.path.isdir, [f\"models/{x}\" for x in model_tests]))); d1.remove(\"models\"); d = d2 + d1; print(d)')\" >> $GITHUB_OUTPUT\n" [1198,1530]
                            OBJECT [1532,1574]
                                FIELD [1533,1552]
                                    String: "name" [1533,1539]
                                    STRING [1540,1552]
                                        String: "NVIDIA-SMI" [1540,1552]
                                FIELD [1553,1573]
                                    String: "run" [1553,1558]
                                    STRING [1559,1573]
                                        String: "nvidia-smi\n" [1559,1573]
            FIELD [1577,3572]
                String: "run_tests_single_gpu" [1577,1599]
                OBJECT [1600,3572]
                    FIELD [1601,1621]
                        String: "name" [1601,1607]
                        STRING [1608,1621]
                            String: "Model tests" [1608,1621]
                    FIELD [1622,1749]
                        String: "strategy" [1622,1632]
                        OBJECT [1633,1749]
                            FIELD [1634,1651]
                                String: "fail-fast" [1634,1645]
                                FALSE [1646,1651]
                            FIELD [1652,1748]
                                String: "matrix" [1652,1660]
                                OBJECT [1661,1748]
                                    FIELD [1662,1717]
                                        String: "folders" [1662,1671]
                                        STRING [1672,1717]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [1672,1717]
                                    FIELD [1718,1747]
                                        String: "machine_type" [1718,1732]
                                        ARRAY [1733,1747]
                                            STRING [1734,1746]
                                                String: "single-gpu" [1734,1746]
                    FIELD [1750,1818]
                        String: "runs-on" [1750,1759]
                        ARRAY [1760,1818]
                            STRING [1761,1789]
                                String: "${{ matrix.machine_type }}" [1761,1789]
                            STRING [1790,1802]
                                String: "nvidia-gpu" [1790,1802]
                            STRING [1803,1807]
                                String: "t4" [1803,1807]
                            STRING [1808,1817]
                                String: "past-ci" [1808,1817]
                    FIELD [1819,1993]
                        String: "container" [1819,1830]
                        OBJECT [1831,1993]
                            FIELD [1832,1895]
                                String: "image" [1832,1839]
                                STRING [1840,1895]
                                    String: "huggingface/transformers-all-latest-torch-nightly-gpu" [1840,1895]
                            FIELD [1896,1992]
                                String: "options" [1896,1905]
                                STRING [1906,1992]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [1906,1992]
                    FIELD [1994,2009]
                        String: "needs" [1994,2001]
                        STRING [2002,2009]
                            String: "setup" [2002,2009]
                    FIELD [2010,3571]
                        String: "steps" [2010,2017]
                        ARRAY [2018,3571]
                            OBJECT [2019,2293]
                                FIELD [2020,2062]
                                    String: "name" [2020,2026]
                                    STRING [2027,2062]
                                        String: "Echo folder ${{ matrix.folders }}" [2027,2062]
                                FIELD [2063,2077]
                                    String: "shell" [2063,2070]
                                    STRING [2071,2077]
                                        String: "bash" [2071,2077]
                                FIELD [2078,2292]
                                    String: "run" [2078,2083]
                                    STRING [2084,2292]
                                        String: "echo \"${{ matrix.folders }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [2084,2292]
                            OBJECT [2294,2405]
                                FIELD [2295,2316]
                                    String: "name" [2295,2301]
                                    STRING [2302,2316]
                                        String: "Update clone" [2302,2316]
                                FIELD [2317,2352]
                                    String: "working-directory" [2317,2336]
                                    STRING [2337,2352]
                                        String: "/transformers" [2337,2352]
                                FIELD [2353,2404]
                                    String: "run" [2353,2358]
                                    STRING [2359,2404]
                                        String: "git fetch && git checkout ${{ github.sha }}" [2359,2404]
                            OBJECT [2406,2621]
                                FIELD [2407,2504]
                                    String: "name" [2407,2413]
                                    STRING [2414,2504]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [2414,2504]
                                FIELD [2505,2540]
                                    String: "working-directory" [2505,2524]
                                    STRING [2525,2540]
                                        String: "/transformers" [2525,2540]
                                FIELD [2541,2620]
                                    String: "run" [2541,2546]
                                    STRING [2547,2620]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [2547,2620]
                            OBJECT [2622,2664]
                                FIELD [2623,2642]
                                    String: "name" [2623,2629]
                                    STRING [2630,2642]
                                        String: "NVIDIA-SMI" [2630,2642]
                                FIELD [2643,2663]
                                    String: "run" [2643,2648]
                                    STRING [2649,2663]
                                        String: "nvidia-smi\n" [2649,2663]
                            OBJECT [2665,2760]
                                FIELD [2666,2686]
                                    String: "name" [2666,2672]
                                    STRING [2673,2686]
                                        String: "Environment" [2673,2686]
                                FIELD [2687,2722]
                                    String: "working-directory" [2687,2706]
                                    STRING [2707,2722]
                                        String: "/transformers" [2707,2722]
                                FIELD [2723,2759]
                                    String: "run" [2723,2728]
                                    STRING [2729,2759]
                                        String: "python3 utils/print_env.py\n" [2729,2759]
                            OBJECT [2761,2870]
                                FIELD [2762,2814]
                                    String: "name" [2762,2768]
                                    STRING [2769,2814]
                                        String: "Show installed libraries and their versions" [2769,2814]
                                FIELD [2815,2850]
                                    String: "working-directory" [2815,2834]
                                    STRING [2835,2850]
                                        String: "/transformers" [2835,2850]
                                FIELD [2851,2869]
                                    String: "run" [2851,2856]
                                    STRING [2857,2869]
                                        String: "pip freeze" [2857,2869]
                            OBJECT [2871,3069]
                                FIELD [2872,2901]
                                    String: "name" [2872,2878]
                                    STRING [2879,2901]
                                        String: "Run all tests on GPU" [2879,2901]
                                FIELD [2902,2937]
                                    String: "working-directory" [2902,2921]
                                    STRING [2922,2937]
                                        String: "/transformers" [2922,2937]
                                FIELD [2938,3068]
                                    String: "run" [2938,2943]
                                    STRING [2944,3068]
                                        String: "python3 -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} tests/${{ matrix.folders }}" [2944,3068]
                            OBJECT [3070,3263]
                                FIELD [3071,3101]
                                    String: "name" [3071,3077]
                                    STRING [3078,3101]
                                        String: "Failure short reports" [3078,3101]
                                FIELD [3102,3125]
                                    String: "if" [3102,3106]
                                    STRING [3107,3125]
                                        String: "${{ failure() }}" [3107,3125]
                                FIELD [3126,3150]
                                    String: "continue-on-error" [3126,3145]
                                    TRUE [3146,3150]
                                FIELD [3151,3262]
                                    String: "run" [3151,3156]
                                    STRING [3157,3262]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [3157,3262]
                            OBJECT [3264,3570]
                                FIELD [3265,3302]
                                    String: "name" [3265,3271]
                                    STRING [3272,3302]
                                        String: "Test suite reports artifacts" [3272,3302]
                                FIELD [3303,3325]
                                    String: "if" [3303,3307]
                                    STRING [3308,3325]
                                        String: "${{ always() }}" [3308,3325]
                                FIELD [3326,3361]
                                    String: "uses" [3326,3332]
                                    STRING [3333,3361]
                                        String: "actions/upload-artifact@v3" [3333,3361]
                                FIELD [3362,3569]
                                    String: "with" [3362,3368]
                                    OBJECT [3369,3569]
                                        FIELD [3370,3478]
                                            String: "name" [3370,3376]
                                            STRING [3377,3478]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports_postfix_nightly" [3377,3478]
                                        FIELD [3479,3568]
                                            String: "path" [3479,3485]
                                            STRING [3486,3568]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [3486,3568]
            FIELD [3573,5568]
                String: "run_tests_multi_gpu" [3573,3594]
                OBJECT [3595,5568]
                    FIELD [3596,3616]
                        String: "name" [3596,3602]
                        STRING [3603,3616]
                            String: "Model tests" [3603,3616]
                    FIELD [3617,3743]
                        String: "strategy" [3617,3627]
                        OBJECT [3628,3743]
                            FIELD [3629,3646]
                                String: "fail-fast" [3629,3640]
                                FALSE [3641,3646]
                            FIELD [3647,3742]
                                String: "matrix" [3647,3655]
                                OBJECT [3656,3742]
                                    FIELD [3657,3712]
                                        String: "folders" [3657,3666]
                                        STRING [3667,3712]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [3667,3712]
                                    FIELD [3713,3741]
                                        String: "machine_type" [3713,3727]
                                        ARRAY [3728,3741]
                                            STRING [3729,3740]
                                                String: "multi-gpu" [3729,3740]
                    FIELD [3744,3812]
                        String: "runs-on" [3744,3753]
                        ARRAY [3754,3812]
                            STRING [3755,3783]
                                String: "${{ matrix.machine_type }}" [3755,3783]
                            STRING [3784,3796]
                                String: "nvidia-gpu" [3784,3796]
                            STRING [3797,3801]
                                String: "t4" [3797,3801]
                            STRING [3802,3811]
                                String: "past-ci" [3802,3811]
                    FIELD [3813,3989]
                        String: "container" [3813,3824]
                        OBJECT [3825,3989]
                            FIELD [3826,3889]
                                String: "image" [3826,3833]
                                STRING [3834,3889]
                                    String: "huggingface/transformers-all-latest-torch-nightly-gpu" [3834,3889]
                            FIELD [3890,3988]
                                String: "options" [3890,3899]
                                STRING [3900,3988]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [3900,3988]
                    FIELD [3990,4005]
                        String: "needs" [3990,3997]
                        STRING [3998,4005]
                            String: "setup" [3998,4005]
                    FIELD [4006,5567]
                        String: "steps" [4006,4013]
                        ARRAY [4014,5567]
                            OBJECT [4015,4289]
                                FIELD [4016,4058]
                                    String: "name" [4016,4022]
                                    STRING [4023,4058]
                                        String: "Echo folder ${{ matrix.folders }}" [4023,4058]
                                FIELD [4059,4073]
                                    String: "shell" [4059,4066]
                                    STRING [4067,4073]
                                        String: "bash" [4067,4073]
                                FIELD [4074,4288]
                                    String: "run" [4074,4079]
                                    STRING [4080,4288]
                                        String: "echo \"${{ matrix.folders }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [4080,4288]
                            OBJECT [4290,4401]
                                FIELD [4291,4312]
                                    String: "name" [4291,4297]
                                    STRING [4298,4312]
                                        String: "Update clone" [4298,4312]
                                FIELD [4313,4348]
                                    String: "working-directory" [4313,4332]
                                    STRING [4333,4348]
                                        String: "/transformers" [4333,4348]
                                FIELD [4349,4400]
                                    String: "run" [4349,4354]
                                    STRING [4355,4400]
                                        String: "git fetch && git checkout ${{ github.sha }}" [4355,4400]
                            OBJECT [4402,4617]
                                FIELD [4403,4500]
                                    String: "name" [4403,4409]
                                    STRING [4410,4500]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [4410,4500]
                                FIELD [4501,4536]
                                    String: "working-directory" [4501,4520]
                                    STRING [4521,4536]
                                        String: "/transformers" [4521,4536]
                                FIELD [4537,4616]
                                    String: "run" [4537,4542]
                                    STRING [4543,4616]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [4543,4616]
                            OBJECT [4618,4660]
                                FIELD [4619,4638]
                                    String: "name" [4619,4625]
                                    STRING [4626,4638]
                                        String: "NVIDIA-SMI" [4626,4638]
                                FIELD [4639,4659]
                                    String: "run" [4639,4644]
                                    STRING [4645,4659]
                                        String: "nvidia-smi\n" [4645,4659]
                            OBJECT [4661,4756]
                                FIELD [4662,4682]
                                    String: "name" [4662,4668]
                                    STRING [4669,4682]
                                        String: "Environment" [4669,4682]
                                FIELD [4683,4718]
                                    String: "working-directory" [4683,4702]
                                    STRING [4703,4718]
                                        String: "/transformers" [4703,4718]
                                FIELD [4719,4755]
                                    String: "run" [4719,4724]
                                    STRING [4725,4755]
                                        String: "python3 utils/print_env.py\n" [4725,4755]
                            OBJECT [4757,4866]
                                FIELD [4758,4810]
                                    String: "name" [4758,4764]
                                    STRING [4765,4810]
                                        String: "Show installed libraries and their versions" [4765,4810]
                                FIELD [4811,4846]
                                    String: "working-directory" [4811,4830]
                                    STRING [4831,4846]
                                        String: "/transformers" [4831,4846]
                                FIELD [4847,4865]
                                    String: "run" [4847,4852]
                                    STRING [4853,4865]
                                        String: "pip freeze" [4853,4865]
                            OBJECT [4867,5065]
                                FIELD [4868,4897]
                                    String: "name" [4868,4874]
                                    STRING [4875,4897]
                                        String: "Run all tests on GPU" [4875,4897]
                                FIELD [4898,4933]
                                    String: "working-directory" [4898,4917]
                                    STRING [4918,4933]
                                        String: "/transformers" [4918,4933]
                                FIELD [4934,5064]
                                    String: "run" [4934,4939]
                                    STRING [4940,5064]
                                        String: "python3 -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} tests/${{ matrix.folders }}" [4940,5064]
                            OBJECT [5066,5259]
                                FIELD [5067,5097]
                                    String: "name" [5067,5073]
                                    STRING [5074,5097]
                                        String: "Failure short reports" [5074,5097]
                                FIELD [5098,5121]
                                    String: "if" [5098,5102]
                                    STRING [5103,5121]
                                        String: "${{ failure() }}" [5103,5121]
                                FIELD [5122,5146]
                                    String: "continue-on-error" [5122,5141]
                                    TRUE [5142,5146]
                                FIELD [5147,5258]
                                    String: "run" [5147,5152]
                                    STRING [5153,5258]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [5153,5258]
                            OBJECT [5260,5566]
                                FIELD [5261,5298]
                                    String: "name" [5261,5267]
                                    STRING [5268,5298]
                                        String: "Test suite reports artifacts" [5268,5298]
                                FIELD [5299,5321]
                                    String: "if" [5299,5303]
                                    STRING [5304,5321]
                                        String: "${{ always() }}" [5304,5321]
                                FIELD [5322,5357]
                                    String: "uses" [5322,5328]
                                    STRING [5329,5357]
                                        String: "actions/upload-artifact@v3" [5329,5357]
                                FIELD [5358,5565]
                                    String: "with" [5358,5364]
                                    OBJECT [5365,5565]
                                        FIELD [5366,5474]
                                            String: "name" [5366,5372]
                                            STRING [5373,5474]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports_postfix_nightly" [5373,5474]
                                        FIELD [5475,5564]
                                            String: "path" [5475,5481]
                                            STRING [5482,5564]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [5482,5564]
            FIELD [5569,7843]
                String: "run_all_tests_torch_cuda_extensions_gpu" [5569,5610]
                OBJECT [5611,7843]
                    FIELD [5612,5647]
                        String: "name" [5612,5618]
                        STRING [5619,5647]
                            String: "Torch CUDA extension tests" [5619,5647]
                    FIELD [5648,5731]
                        String: "strategy" [5648,5658]
                        OBJECT [5659,5731]
                            FIELD [5660,5677]
                                String: "fail-fast" [5660,5671]
                                FALSE [5672,5677]
                            FIELD [5678,5730]
                                String: "matrix" [5678,5686]
                                OBJECT [5687,5730]
                                    FIELD [5688,5729]
                                        String: "machine_type" [5688,5702]
                                        ARRAY [5703,5729]
                                            STRING [5704,5716]
                                                String: "single-gpu" [5704,5716]
                                            STRING [5717,5728]
                                                String: "multi-gpu" [5717,5728]
                    FIELD [5732,5800]
                        String: "runs-on" [5732,5741]
                        ARRAY [5742,5800]
                            STRING [5743,5771]
                                String: "${{ matrix.machine_type }}" [5743,5771]
                            STRING [5772,5784]
                                String: "nvidia-gpu" [5772,5784]
                            STRING [5785,5789]
                                String: "t4" [5785,5789]
                            STRING [5790,5799]
                                String: "past-ci" [5790,5799]
                    FIELD [5801,5816]
                        String: "needs" [5801,5808]
                        STRING [5809,5816]
                            String: "setup" [5809,5816]
                    FIELD [5817,5994]
                        String: "container" [5817,5828]
                        OBJECT [5829,5994]
                            FIELD [5830,5894]
                                String: "image" [5830,5837]
                                STRING [5838,5894]
                                    String: "huggingface/transformers-pytorch-deepspeed-nightly-gpu" [5838,5894]
                            FIELD [5895,5993]
                                String: "options" [5895,5904]
                                STRING [5905,5993]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [5905,5993]
                    FIELD [5995,7842]
                        String: "steps" [5995,6002]
                        ARRAY [6003,7842]
                            OBJECT [6004,6125]
                                FIELD [6005,6026]
                                    String: "name" [6005,6011]
                                    STRING [6012,6026]
                                        String: "Update clone" [6012,6026]
                                FIELD [6027,6072]
                                    String: "working-directory" [6027,6046]
                                    STRING [6047,6072]
                                        String: "/workspace/transformers" [6047,6072]
                                FIELD [6073,6124]
                                    String: "run" [6073,6078]
                                    STRING [6079,6124]
                                        String: "git fetch && git checkout ${{ github.sha }}" [6079,6124]
                            OBJECT [6126,6351]
                                FIELD [6127,6224]
                                    String: "name" [6127,6133]
                                    STRING [6134,6224]
                                        String: "Reinstall transformers in edit mode (remove the one installed during docker image build)" [6134,6224]
                                FIELD [6225,6270]
                                    String: "working-directory" [6225,6244]
                                    STRING [6245,6270]
                                        String: "/workspace/transformers" [6245,6270]
                                FIELD [6271,6350]
                                    String: "run" [6271,6276]
                                    STRING [6277,6350]
                                        String: "python3 -m pip uninstall -y transformers && python3 -m pip install -e ." [6277,6350]
                            OBJECT [6352,6446]
                                FIELD [6353,6392]
                                    String: "name" [6353,6359]
                                    STRING [6360,6392]
                                        String: "Remove cached torch extensions" [6360,6392]
                                FIELD [6393,6445]
                                    String: "run" [6393,6398]
                                    STRING [6399,6445]
                                        String: "rm -rf /github/home/.cache/torch_extensions/" [6399,6445]
                            OBJECT [6447,6847]
                                FIELD [6448,6484]
                                    String: "name" [6448,6454]
                                    STRING [6455,6484]
                                        String: "Pre build DeepSpeed *again*" [6455,6484]
                                FIELD [6485,6517]
                                    String: "working-directory" [6485,6504]
                                    STRING [6505,6517]
                                        String: "/workspace" [6505,6517]
                                FIELD [6518,6846]
                                    String: "run" [6518,6523]
                                    STRING [6524,6846]
                                        String: "python3 -m pip uninstall -y deepspeed\nrm -rf DeepSpeed\ngit clone https://github.com/microsoft/DeepSpeed && cd DeepSpeed && rm -rf build\nDS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 DS_BUILD_UTILS=1 python3 -m pip install . --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [6524,6846]
                            OBJECT [6848,6890]
                                FIELD [6849,6868]
                                    String: "name" [6849,6855]
                                    STRING [6856,6868]
                                        String: "NVIDIA-SMI" [6856,6868]
                                FIELD [6869,6889]
                                    String: "run" [6869,6874]
                                    STRING [6875,6889]
                                        String: "nvidia-smi\n" [6875,6889]
                            OBJECT [6891,6995]
                                FIELD [6892,6912]
                                    String: "name" [6892,6898]
                                    STRING [6899,6912]
                                        String: "Environment" [6899,6912]
                                FIELD [6913,6958]
                                    String: "working-directory" [6913,6932]
                                    STRING [6933,6958]
                                        String: "/workspace/transformers" [6933,6958]
                                FIELD [6959,6994]
                                    String: "run" [6959,6964]
                                    STRING [6965,6994]
                                        String: "python utils/print_env.py\n" [6965,6994]
                            OBJECT [6996,7115]
                                FIELD [6997,7049]
                                    String: "name" [6997,7003]
                                    STRING [7004,7049]
                                        String: "Show installed libraries and their versions" [7004,7049]
                                FIELD [7050,7095]
                                    String: "working-directory" [7050,7069]
                                    STRING [7070,7095]
                                        String: "/workspace/transformers" [7070,7095]
                                FIELD [7096,7114]
                                    String: "run" [7096,7101]
                                    STRING [7102,7114]
                                        String: "pip freeze" [7102,7114]
                            OBJECT [7116,7328]
                                FIELD [7117,7146]
                                    String: "name" [7117,7123]
                                    STRING [7124,7146]
                                        String: "Run all tests on GPU" [7124,7146]
                                FIELD [7147,7192]
                                    String: "working-directory" [7147,7166]
                                    STRING [7167,7192]
                                        String: "/workspace/transformers" [7167,7192]
                                FIELD [7193,7327]
                                    String: "run" [7193,7198]
                                    STRING [7199,7327]
                                        String: "python -m pytest -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [7199,7327]
                            OBJECT [7329,7532]
                                FIELD [7330,7360]
                                    String: "name" [7330,7336]
                                    STRING [7337,7360]
                                        String: "Failure short reports" [7337,7360]
                                FIELD [7361,7384]
                                    String: "if" [7361,7365]
                                    STRING [7366,7384]
                                        String: "${{ failure() }}" [7366,7384]
                                FIELD [7385,7409]
                                    String: "continue-on-error" [7385,7404]
                                    TRUE [7405,7409]
                                FIELD [7410,7531]
                                    String: "run" [7410,7415]
                                    STRING [7416,7531]
                                        String: "cat /workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [7416,7531]
                            OBJECT [7533,7841]
                                FIELD [7534,7571]
                                    String: "name" [7534,7540]
                                    STRING [7541,7571]
                                        String: "Test suite reports artifacts" [7541,7571]
                                FIELD [7572,7594]
                                    String: "if" [7572,7576]
                                    STRING [7577,7594]
                                        String: "${{ always() }}" [7577,7594]
                                FIELD [7595,7630]
                                    String: "uses" [7595,7601]
                                    STRING [7602,7630]
                                        String: "actions/upload-artifact@v3" [7602,7630]
                                FIELD [7631,7840]
                                    String: "with" [7631,7637]
                                    OBJECT [7638,7840]
                                        FIELD [7639,7739]
                                            String: "name" [7639,7645]
                                            STRING [7646,7739]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports_postfix_nightly" [7646,7739]
                                        FIELD [7740,7839]
                                            String: "path" [7740,7746]
                                            STRING [7747,7839]
                                                String: "/workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [7747,7839]
            FIELD [7844,8948]
                String: "send_results" [7844,7858]
                OBJECT [7859,8948]
                    FIELD [7860,7892]
                        String: "name" [7860,7866]
                        STRING [7867,7892]
                            String: "Send results to webhook" [7867,7892]
                    FIELD [7893,7918]
                        String: "runs-on" [7893,7902]
                        STRING [7903,7918]
                            String: "ubuntu-latest" [7903,7918]
                    FIELD [7919,7934]
                        String: "if" [7919,7923]
                        STRING [7924,7934]
                            String: "always()" [7924,7934]
                    FIELD [7935,8039]
                        String: "needs" [7935,7942]
                        ARRAY [7943,8039]
                            STRING [7944,7951]
                                String: "setup" [7944,7951]
                            STRING [7952,7974]
                                String: "run_tests_single_gpu" [7952,7974]
                            STRING [7975,7996]
                                String: "run_tests_multi_gpu" [7975,7996]
                            STRING [7997,8038]
                                String: "run_all_tests_torch_cuda_extensions_gpu" [7997,8038]
                    FIELD [8040,8947]
                        String: "steps" [8040,8047]
                        ARRAY [8048,8947]
                            OBJECT [8049,8156]
                                FIELD [8050,8081]
                                    String: "name" [8050,8056]
                                    STRING [8057,8081]
                                        String: "Preliminary job status" [8057,8081]
                                FIELD [8082,8096]
                                    String: "shell" [8082,8089]
                                    STRING [8090,8096]
                                        String: "bash" [8090,8096]
                                FIELD [8097,8155]
                                    String: "run" [8097,8102]
                                    STRING [8103,8155]
                                        String: "echo \"Setup status: ${{ needs.setup.result }}\"\n" [8103,8155]
                            OBJECT [8157,8187]
                                FIELD [8158,8186]
                                    String: "uses" [8158,8164]
                                    STRING [8165,8186]
                                        String: "actions/checkout@v3" [8165,8186]
                            OBJECT [8188,8227]
                                FIELD [8189,8226]
                                    String: "uses" [8189,8195]
                                    STRING [8196,8226]
                                        String: "actions/download-artifact@v3" [8196,8226]
                            OBJECT [8228,8870]
                                FIELD [8229,8259]
                                    String: "name" [8229,8235]
                                    STRING [8236,8259]
                                        String: "Send message to Slack" [8236,8259]
                                FIELD [8260,8741]
                                    String: "env" [8260,8265]
                                    OBJECT [8266,8741]
                                        FIELD [8267,8323]
                                            String: "CI_SLACK_BOT_TOKEN" [8267,8287]
                                            STRING [8288,8323]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [8288,8323]
                                        FIELD [8324,8382]
                                            String: "CI_SLACK_CHANNEL_ID" [8324,8345]
                                            STRING [8346,8382]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [8346,8382]
                                        FIELD [8383,8453]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [8383,8410]
                                            STRING [8411,8453]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [8411,8453]
                                        FIELD [8454,8530]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [8454,8484]
                                            STRING [8485,8530]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [8485,8530]
                                        FIELD [8531,8608]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [8531,8559]
                                            STRING [8560,8608]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_PAST_FUTURE }}" [8560,8608]
                                        FIELD [8609,8673]
                                            String: "ACCESS_REPO_INFO_TOKEN" [8609,8633]
                                            STRING [8634,8673]
                                                String: "${{ secrets.ACCESS_REPO_INFO_TOKEN }}" [8634,8673]
                                        FIELD [8674,8697]
                                            String: "CI_EVENT" [8674,8684]
                                            STRING [8685,8697]
                                                String: "Nightly CI" [8685,8697]
                                        FIELD [8698,8740]
                                            String: "SETUP_STATUS" [8698,8712]
                                            STRING [8713,8740]
                                                String: "${{ needs.setup.result }}" [8713,8740]
                                FIELD [8742,8869]
                                    String: "run" [8742,8747]
                                    STRING [8748,8869]
                                        String: "pip install slack_sdk\npip show slack_sdk\npython utils/notification_service.py \"${{ needs.setup.outputs.matrix }}\"\n" [8748,8869]
                            OBJECT [8871,8946]
                                FIELD [8872,8909]
                                    String: "uses" [8872,8878]
                                    STRING [8879,8909]
                                        String: "geekyeggo/delete-artifact@v2" [8879,8909]
                                FIELD [8910,8945]
                                    String: "with" [8910,8916]
                                    OBJECT [8917,8945]
                                        FIELD [8918,8944]
                                            String: "name" [8918,8924]
                                            STRING [8925,8944]
                                                String: "single-*\nmulti-*" [8925,8944]