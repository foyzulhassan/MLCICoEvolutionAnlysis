OBJECT [0,3201]
    FIELD [1,21]
        String: "name" [1,7]
        STRING [8,21]
            String: "Build on M1" [8,21]
    FIELD [22,161]
        String: "on" [22,26]
        OBJECT [27,161]
            FIELD [28,96]
                String: "pull_request" [28,42]
                OBJECT [43,96]
                    FIELD [44,95]
                        String: "paths" [44,51]
                        ARRAY [52,95]
                            STRING [53,94]
                                String: ".github/workflows/build-m1-binaries.yml" [53,94]
            FIELD [97,135]
                String: "push" [97,103]
                OBJECT [104,135]
                    FIELD [105,134]
                        String: "branches" [105,115]
                        ARRAY [116,134]
                            STRING [117,126]
                                String: "nightly" [117,126]
                            STRING [127,133]
                                String: "main" [127,133]
            FIELD [136,160]
                String: "workflow_dispatch" [136,155]
                NULL [156,160]
    FIELD [162,3200]
        String: "jobs" [162,168]
        OBJECT [169,3200]
            FIELD [170,3199]
                String: "build_wheels" [170,184]
                OBJECT [185,3199]
                    FIELD [186,222]
                        String: "name" [186,192]
                        STRING [193,222]
                            String: "Build TorchVision M1 wheels" [193,222]
                    FIELD [223,243]
                        String: "runs-on" [223,232]
                        STRING [233,243]
                            String: "macos-m1" [233,243]
                    FIELD [244,298]
                        String: "strategy" [244,254]
                        OBJECT [255,298]
                            FIELD [256,297]
                                String: "matrix" [256,264]
                                OBJECT [265,297]
                                    FIELD [266,296]
                                        String: "py_vers" [266,275]
                                        ARRAY [276,296]
                                            STRING [277,282]
                                                String: "3.8" [277,282]
                                            STRING [283,288]
                                                String: "3.9" [283,288]
                                            STRING [289,295]
                                                String: "3.10" [289,295]
                    FIELD [299,3198]
                        String: "steps" [299,306]
                        ARRAY [307,3198]
                            OBJECT [308,367]
                                FIELD [309,337]
                                    String: "name" [309,315]
                                    STRING [316,337]
                                        String: "Checkout repository" [316,337]
                                FIELD [338,366]
                                    String: "uses" [338,344]
                                    STRING [345,366]
                                        String: "actions/checkout@v2" [345,366]
                            OBJECT [368,1475]
                                FIELD [369,404]
                                    String: "name" [369,375]
                                    STRING [376,404]
                                        String: "Build TorchVision M1 wheel" [376,404]
                                FIELD [405,440]
                                    String: "shell" [405,412]
                                    STRING [413,440]
                                        String: "arch -arch arm64 bash {0}" [413,440]
                                FIELD [441,526]
                                    String: "env" [441,446]
                                    OBJECT [447,526]
                                        FIELD [448,491]
                                            String: "ENV_NAME" [448,458]
                                            STRING [459,491]
                                                String: "conda-env-${{ github.run_id }}" [459,491]
                                        FIELD [492,525]
                                            String: "PY_VERS" [492,501]
                                            STRING [502,525]
                                                String: "${{ matrix.py_vers }}" [502,525]
                                FIELD [527,1474]
                                    String: "run" [527,532]
                                    STRING [533,1474]
                                        String: ". ~/miniconda3/etc/profile.d/conda.sh\n# Needed for JPEG library detection as setup.py detects conda presence by running `shlex.which('conda')`\nexport PATH=~/miniconda3/bin:$PATH\nset -ex\n. packaging/pkg_helpers.bash\nsetup_build_version\nWHL_NAME=torchvision-${BUILD_VERSION}-cp${PY_VERS/.}-cp${PY_VERS/.}-macosx_11_0_arm64.whl\nconda create -yp ${ENV_NAME} python=${PY_VERS} numpy libpng jpeg wheel pkg-config\nconda run -p ${ENV_NAME} python3 -mpip install torch --pre --extra-index-url=https://download.pytorch.org/whl/nightly\nconda run -p ${ENV_NAME} python3 -mpip install delocate\nconda run -p ${ENV_NAME} python3 setup.py bdist_wheel\nexport PYTORCH_VERSION=\"$(conda run -p ${ENV_NAME} python3 -mpip show torch | grep ^Version: | sed 's/Version:  *//')\"\nconda run -p ${ENV_NAME} DYLD_FALLBACK_LIBRARY_PATH=\"${ENV_NAME}/lib\" delocate-wheel -v --ignore-missing-dependencies dist/${WHL_NAME}\nconda env remove -p ${ENV_NAME}\n" [533,1474]
                            OBJECT [1476,2500]
                                FIELD [1477,1496]
                                    String: "name" [1477,1483]
                                    STRING [1484,1496]
                                        String: "Test wheel" [1484,1496]
                                FIELD [1497,1532]
                                    String: "shell" [1497,1504]
                                    STRING [1505,1532]
                                        String: "arch -arch arm64 bash {0}" [1505,1532]
                                FIELD [1533,1623]
                                    String: "env" [1533,1538]
                                    OBJECT [1539,1623]
                                        FIELD [1540,1588]
                                            String: "ENV_NAME" [1540,1550]
                                            STRING [1551,1588]
                                                String: "conda-test-env-${{ github.run_id }}" [1551,1588]
                                        FIELD [1589,1622]
                                            String: "PY_VERS" [1589,1598]
                                            STRING [1599,1622]
                                                String: "${{ matrix.py_vers }}" [1599,1622]
                                FIELD [1624,2499]
                                    String: "run" [1624,1629]
                                    STRING [1630,2499]
                                        String: ". ~/miniconda3/etc/profile.d/conda.sh\nset -ex\nconda create -yp ${ENV_NAME} python=${PY_VERS} numpy\nconda run -p ${ENV_NAME} python3 -mpip install torch --pre --extra-index-url=https://download.pytorch.org/whl/nightly\nconda run -p ${ENV_NAME} python3 -mpip install dist/*.whl\n# Test torch is importable, by changing cwd and running import commands\nconda run --cwd /tmp -p ${ENV_NAME} python3 -c \"import torchvision;print('torchvision version is ', torchvision.__version__)\"\nconda run --cwd /tmp -p ${ENV_NAME} python3 -c \"import torch;import torchvision;print('Is torchvision useable?', all(x is not None for x in [torch.ops.image.decode_png, torch.ops.torchvision.roi_align]))\"\nconda run --cwd /tmp -p ${ENV_NAME} python3 -c \"import torchvision;print(torchvision.io.read_image('${PWD}/gallery/assets/dog1.jpg').shape)\"\nconda env remove -p ${ENV_NAME}\n" [1630,2499]
                            OBJECT [2501,2744]
                                FIELD [2502,2533]
                                    String: "name" [2502,2508]
                                    STRING [2509,2533]
                                        String: "Upload wheel to GitHub" [2509,2533]
                                FIELD [2534,2627]
                                    String: "if" [2534,2538]
                                    STRING [2539,2627]
                                        String: "${{ github.event_name == 'push' && steps.extract_branch.outputs.branch == 'nightly' }}" [2539,2627]
                                FIELD [2628,2663]
                                    String: "uses" [2628,2634]
                                    STRING [2635,2663]
                                        String: "actions/upload-artifact@v3" [2635,2663]
                                FIELD [2664,2743]
                                    String: "with" [2664,2670]
                                    OBJECT [2671,2743]
                                        FIELD [2672,2727]
                                            String: "name" [2672,2678]
                                            STRING [2679,2727]
                                                String: "torchvision-py${{ matrix.py_vers }}-macos11-m1" [2679,2727]
                                        FIELD [2728,2742]
                                            String: "path" [2728,2734]
                                            STRING [2735,2742]
                                                String: "dist/" [2735,2742]
                            OBJECT [2745,3197]
                                FIELD [2746,2773]
                                    String: "name" [2746,2752]
                                    STRING [2753,2773]
                                        String: "Upload wheel to S3" [2753,2773]
                                FIELD [2774,2867]
                                    String: "if" [2774,2778]
                                    STRING [2779,2867]
                                        String: "${{ github.event_name == 'push' && steps.extract_branch.outputs.branch == 'nightly' }}" [2779,2867]
                                FIELD [2868,2903]
                                    String: "shell" [2868,2875]
                                    STRING [2876,2903]
                                        String: "arch -arch arm64 bash {0}" [2876,2903]
                                FIELD [2904,3083]
                                    String: "env" [2904,2909]
                                    OBJECT [2910,3083]
                                        FIELD [2911,2982]
                                            String: "AWS_ACCESS_KEY_ID" [2911,2930]
                                            STRING [2931,2982]
                                                String: "${{ secrets.AWS_PYTORCH_UPLOADER_ACCESS_KEY_ID }}" [2931,2982]
                                        FIELD [2983,3062]
                                            String: "AWS_SECRET_ACCESS_KEY" [2983,3006]
                                            STRING [3007,3062]
                                                String: "${{ secrets.AWS_PYTORCH_UPLOADER_SECRET_ACCESS_KEY }}" [3007,3062]
                                        FIELD [3063,3082]
                                            String: "CHANNEL" [3063,3072]
                                            STRING [3073,3082]
                                                String: "nightly" [3073,3082]
                                FIELD [3084,3196]
                                    String: "run" [3084,3089]
                                    STRING [3090,3196]
                                        String: "for pkg in dist/*; do\n  aws s3 cp \"$pkg\" \"s3://pytorch/whl/${CHANNEL}/cpu/\" --acl public-read\ndone" [3090,3196]