OBJECT [0,16484]
    FIELD [1,12]
        String: "name" [1,7]
        STRING [8,12]
            String: "CI" [8,12]
    FIELD [13,105]
        String: "concurrency" [13,26]
        OBJECT [27,105]
            FIELD [28,78]
                String: "group" [28,35]
                STRING [36,78]
                    String: "${{ github.workflow }}-${{ github.ref }}" [36,78]
            FIELD [79,104]
                String: "cancel-in-progress" [79,99]
                TRUE [100,104]
    FIELD [106,256]
        String: "on" [106,110]
        OBJECT [111,256]
            FIELD [112,148]
                String: "pull_request" [112,126]
                OBJECT [127,148]
                    FIELD [128,147]
                        String: "branches" [128,138]
                        ARRAY [139,147]
                            STRING [140,146]
                                String: "main" [140,146]
            FIELD [149,177]
                String: "push" [149,155]
                OBJECT [156,177]
                    FIELD [157,176]
                        String: "branches" [157,167]
                        ARRAY [168,176]
                            STRING [169,175]
                                String: "main" [169,175]
            FIELD [178,211]
                String: "release" [178,187]
                OBJECT [188,211]
                    FIELD [189,210]
                        String: "types" [189,196]
                        ARRAY [197,210]
                            STRING [198,209]
                                String: "published" [198,209]
            FIELD [212,255]
                String: "schedule" [212,222]
                ARRAY [223,255]
                    OBJECT [224,254]
                        FIELD [225,253]
                            String: "cron" [225,231]
                            STRING [232,253]
                                String: "37 11 * * 1,2,3,4,5" [232,253]
    FIELD [257,603]
        String: "env" [257,262]
        OBJECT [263,603]
            FIELD [264,288]
                String: "TORCH_VERSION" [264,279]
                STRING [280,288]
                    String: "1.11.0" [280,288]
            FIELD [289,374]
                String: "TORCH_CPU_INSTALL" [289,308]
                STRING [309,374]
                    String: "conda install pytorch torchvision torchaudio cpuonly -c pytorch" [309,374]
            FIELD [375,469]
                String: "TORCH_GPU_INSTALL" [375,394]
                STRING [395,469]
                    String: "conda install pytorch torchvision torchaudio cudatoolkit=11.3 -c pytorch" [395,469]
            FIELD [470,490]
                String: "CACHE_PREFIX" [470,484]
                STRING [485,490]
                    String: "v11" [485,490]
            FIELD [491,523]
                String: "TOKENIZERS_PARALLELISM" [491,515]
                STRING [516,523]
                    String: "false" [516,523]
            FIELD [524,545]
                String: "OMP_NUM_THREADS" [524,541]
                STRING [542,545]
                    String: "1" [542,545]
            FIELD [546,573]
                String: "MKL_THREADING_LAYER" [546,567]
                STRING [568,573]
                    String: "GNU" [568,573]
            FIELD [574,602]
                String: "DEFAULT_PYTHON_VERSION" [574,598]
                NUMBER [599,602]
                    Number: 3.8 [599,602]
    FIELD [604,646]
        String: "defaults" [604,614]
        OBJECT [615,646]
            FIELD [616,645]
                String: "run" [616,621]
                OBJECT [622,645]
                    FIELD [623,644]
                        String: "shell" [623,630]
                        STRING [631,644]
                            String: "bash -l {0}" [631,644]
    FIELD [647,16483]
        String: "jobs" [647,653]
        OBJECT [654,16483]
            FIELD [655,1399]
                String: "changelog" [655,666]
                OBJECT [667,1399]
                    FIELD [668,686]
                        String: "name" [668,674]
                        STRING [675,686]
                            String: "CHANGELOG" [675,686]
                    FIELD [687,712]
                        String: "runs-on" [687,696]
                        STRING [697,712]
                            String: "ubuntu-latest" [697,712]
                    FIELD [713,755]
                        String: "if" [713,717]
                        STRING [718,755]
                            String: "github.event_name == 'pull_request'" [718,755]
                    FIELD [756,1398]
                        String: "steps" [756,763]
                        ARRAY [764,1398]
                            OBJECT [765,795]
                                FIELD [766,794]
                                    String: "uses" [766,772]
                                    STRING [773,794]
                                        String: "actions/checkout@v1" [773,794]
                            OBJECT [796,1042]
                                FIELD [797,840]
                                    String: "name" [797,803]
                                    STRING [804,840]
                                        String: "Check if source files have changed" [804,840]
                                FIELD [841,1041]
                                    String: "run" [841,846]
                                    STRING [847,1041]
                                        String: "git diff --name-only $(git merge-base origin/main HEAD) | grep '^allennlp/.*\\.py$' && echo \"source_files_changed=true\" >> $GITHUB_ENV || echo \"source_files_changed=false\" >> $GITHUB_ENV\n" [847,1041]
                            OBJECT [1043,1397]
                                FIELD [1044,1090]
                                    String: "name" [1044,1050]
                                    STRING [1051,1090]
                                        String: "Check that CHANGELOG has been updated" [1051,1090]
                                FIELD [1091,1132]
                                    String: "if" [1091,1095]
                                    STRING [1096,1132]
                                        String: "env.source_files_changed == 'true'" [1096,1132]
                                FIELD [1133,1396]
                                    String: "run" [1133,1138]
                                    STRING [1139,1396]
                                        String: "# If this step fails, this means you haven't updated the CHANGELOG.md\n# file with notes on your contribution.\ngit diff --name-only $(git merge-base origin/main HEAD) | grep '^CHANGELOG.md$' && echo \"Thanks for helping keep our CHANGELOG up-to-date!\"\n" [1139,1396]
            FIELD [1400,1800]
                String: "style" [1400,1407]
                OBJECT [1408,1800]
                    FIELD [1409,1423]
                        String: "name" [1409,1415]
                        STRING [1416,1423]
                            String: "Style" [1416,1423]
                    FIELD [1424,1449]
                        String: "runs-on" [1424,1433]
                        STRING [1434,1449]
                            String: "ubuntu-latest" [1434,1449]
                    FIELD [1450,1799]
                        String: "steps" [1450,1457]
                        ARRAY [1458,1799]
                            OBJECT [1459,1489]
                                FIELD [1460,1488]
                                    String: "uses" [1460,1466]
                                    STRING [1467,1488]
                                        String: "actions/checkout@v2" [1467,1488]
                            OBJECT [1490,1608]
                                FIELD [1491,1512]
                                    String: "name" [1491,1497]
                                    STRING [1498,1512]
                                        String: "Setup Python" [1498,1512]
                                FIELD [1513,1545]
                                    String: "uses" [1513,1519]
                                    STRING [1520,1545]
                                        String: "actions/setup-python@v2" [1520,1545]
                                FIELD [1546,1607]
                                    String: "with" [1546,1552]
                                    OBJECT [1553,1607]
                                        FIELD [1554,1606]
                                            String: "python-version" [1554,1570]
                                            STRING [1571,1606]
                                                String: "${{ env.DEFAULT_PYTHON_VERSION }}" [1571,1606]
                            OBJECT [1609,1708]
                                FIELD [1610,1639]
                                    String: "name" [1610,1616]
                                    STRING [1617,1639]
                                        String: "Install requirements" [1617,1639]
                                FIELD [1640,1707]
                                    String: "run" [1640,1645]
                                    STRING [1646,1707]
                                        String: "grep -E '^black' dev-requirements.txt | xargs pip install\n" [1646,1707]
                            OBJECT [1709,1751]
                                FIELD [1710,1729]
                                    String: "name" [1710,1716]
                                    STRING [1717,1729]
                                        String: "Debug info" [1717,1729]
                                FIELD [1730,1750]
                                    String: "run" [1730,1735]
                                    STRING [1736,1750]
                                        String: "pip freeze\n" [1736,1750]
                            OBJECT [1752,1798]
                                FIELD [1753,1771]
                                    String: "name" [1753,1759]
                                    STRING [1760,1771]
                                        String: "Run black" [1760,1771]
                                FIELD [1772,1797]
                                    String: "run" [1772,1777]
                                    STRING [1778,1797]
                                        String: "black --check .\n" [1778,1797]
            FIELD [1801,5119]
                String: "checks" [1801,1809]
                OBJECT [1810,5119]
                    FIELD [1811,1843]
                        String: "name" [1811,1817]
                        STRING [1818,1843]
                            String: "${{ matrix.task.name }}" [1818,1843]
                    FIELD [1844,1882]
                        String: "runs-on" [1844,1853]
                        STRING [1854,1882]
                            String: "${{ matrix.task.runs_on }}" [1854,1882]
                    FIELD [1883,1903]
                        String: "timeout-minutes" [1883,1900]
                        NUMBER [1901,1903]
                            Number: 30 [1901,1903]
                    FIELD [1904,2504]
                        String: "strategy" [1904,1914]
                        OBJECT [1915,2504]
                            FIELD [1916,1933]
                                String: "fail-fast" [1916,1927]
                                FALSE [1928,1933]
                            FIELD [1934,2503]
                                String: "matrix" [1934,1942]
                                OBJECT [1943,2503]
                                    FIELD [1944,2502]
                                        String: "task" [1944,1950]
                                        ARRAY [1951,2502]
                                            OBJECT [1952,2078]
                                                FIELD [1953,1966]
                                                    String: "name" [1953,1959]
                                                    STRING [1960,1966]
                                                        String: "Lint" [1960,1966]
                                                FIELD [1967,1992]
                                                    String: "runs_on" [1967,1976]
                                                    STRING [1977,1992]
                                                        String: "ubuntu-latest" [1977,1992]
                                                FIELD [1993,2016]
                                                    String: "coverage_report" [1993,2010]
                                                    FALSE [2011,2016]
                                                FIELD [2017,2039]
                                                    String: "torch_platform" [2017,2033]
                                                    STRING [2034,2039]
                                                        String: "cpu" [2034,2039]
                                                FIELD [2040,2077]
                                                    String: "run" [2040,2045]
                                                    STRING [2046,2077]
                                                        String: "make flake8\nmake typecheck\n" [2046,2077]
                                            OBJECT [2079,2189]
                                                FIELD [2080,2098]
                                                    String: "name" [2080,2086]
                                                    STRING [2087,2098]
                                                        String: "CPU Tests" [2087,2098]
                                                FIELD [2099,2124]
                                                    String: "runs_on" [2099,2108]
                                                    STRING [2109,2124]
                                                        String: "ubuntu-latest" [2109,2124]
                                                FIELD [2125,2147]
                                                    String: "coverage_report" [2125,2142]
                                                    TRUE [2143,2147]
                                                FIELD [2148,2170]
                                                    String: "torch_platform" [2148,2164]
                                                    STRING [2165,2170]
                                                        String: "cpu" [2165,2170]
                                                FIELD [2171,2188]
                                                    String: "run" [2171,2176]
                                                    STRING [2177,2188]
                                                        String: "make test" [2177,2188]
                                            OBJECT [2190,2323]
                                                FIELD [2191,2209]
                                                    String: "name" [2191,2197]
                                                    STRING [2198,2209]
                                                        String: "GPU Tests" [2198,2209]
                                                FIELD [2210,2253]
                                                    String: "runs_on" [2210,2219]
                                                    ARRAY [2220,2253]
                                                        STRING [2221,2234]
                                                            String: "self-hosted" [2221,2234]
                                                        STRING [2235,2240]
                                                            String: "GPU" [2235,2240]
                                                        STRING [2241,2252]
                                                            String: "Multi GPU" [2241,2252]
                                                FIELD [2254,2276]
                                                    String: "coverage_report" [2254,2271]
                                                    TRUE [2272,2276]
                                                FIELD [2277,2299]
                                                    String: "torch_platform" [2277,2293]
                                                    STRING [2294,2299]
                                                        String: "gpu" [2294,2299]
                                                FIELD [2300,2322]
                                                    String: "run" [2300,2305]
                                                    STRING [2306,2322]
                                                        String: "make gpu-tests" [2306,2322]
                                            OBJECT [2324,2501]
                                                FIELD [2325,2345]
                                                    String: "name" [2325,2331]
                                                    STRING [2332,2345]
                                                        String: "Model Tests" [2332,2345]
                                                FIELD [2346,2371]
                                                    String: "runs_on" [2346,2355]
                                                    STRING [2356,2371]
                                                        String: "ubuntu-latest" [2356,2371]
                                                FIELD [2372,2394]
                                                    String: "coverage_report" [2372,2389]
                                                    TRUE [2390,2394]
                                                FIELD [2395,2417]
                                                    String: "torch_platform" [2395,2411]
                                                    STRING [2412,2417]
                                                        String: "cpu" [2412,2417]
                                                FIELD [2418,2500]
                                                    String: "run" [2418,2423]
                                                    STRING [2424,2500]
                                                        String: "cd allennlp-models\nmake test-with-cov COV=allennlp\nmv coverage.xml ../\n" [2424,2500]
                    FIELD [2505,5118]
                        String: "steps" [2505,2512]
                        ARRAY [2513,5118]
                            OBJECT [2514,2544]
                                FIELD [2515,2543]
                                    String: "uses" [2515,2521]
                                    STRING [2522,2543]
                                        String: "actions/checkout@v2" [2522,2543]
                            OBJECT [2545,2681]
                                FIELD [2546,2589]
                                    String: "uses" [2546,2552]
                                    STRING [2553,2589]
                                        String: "conda-incubator/setup-miniconda@v2" [2553,2589]
                                FIELD [2590,2680]
                                    String: "with" [2590,2596]
                                    OBJECT [2597,2680]
                                        FIELD [2598,2626]
                                            String: "miniconda-version" [2598,2617]
                                            STRING [2618,2626]
                                                String: "latest" [2618,2626]
                                        FIELD [2627,2679]
                                            String: "python-version" [2627,2643]
                                            STRING [2644,2679]
                                                String: "${{ env.DEFAULT_PYTHON_VERSION }}" [2644,2679]
                            OBJECT [2682,3004]
                                FIELD [2683,2711]
                                    String: "name" [2683,2689]
                                    STRING [2690,2711]
                                        String: "Set build variables" [2690,2711]
                                FIELD [2712,3003]
                                    String: "run" [2712,2717]
                                    STRING [2718,3003]
                                        String: "# Get the exact Python version to use in the cache key.\necho \"PYTHON_VERSION=$(python --version)\" >> $GITHUB_ENV\necho \"RUNNER_ARCH=$(uname -m)\" >> $GITHUB_ENV\n# Use week number in cache key so we can refresh the cache weekly.\necho \"WEEK_NUMBER=$(date +%V)\" >> $GITHUB_ENV\n" [2718,3003]
                            OBJECT [3005,3156]
                                FIELD [3006,3045]
                                    String: "name" [3006,3012]
                                    STRING [3013,3045]
                                        String: "Set build variables (CPU only)" [3013,3045]
                                FIELD [3046,3088]
                                    String: "if" [3046,3050]
                                    STRING [3051,3088]
                                        String: "matrix.task.torch_platform == 'cpu'" [3051,3088]
                                FIELD [3089,3155]
                                    String: "run" [3089,3094]
                                    STRING [3095,3155]
                                        String: "echo \"TORCH_INSTALL=$TORCH_CPU_INSTALL\" >> $GITHUB_ENV\n" [3095,3155]
                            OBJECT [3157,3308]
                                FIELD [3158,3197]
                                    String: "name" [3158,3164]
                                    STRING [3165,3197]
                                        String: "Set build variables (GPU only)" [3165,3197]
                                FIELD [3198,3240]
                                    String: "if" [3198,3202]
                                    STRING [3203,3240]
                                        String: "matrix.task.torch_platform == 'gpu'" [3203,3240]
                                FIELD [3241,3307]
                                    String: "run" [3241,3246]
                                    STRING [3247,3307]
                                        String: "echo \"TORCH_INSTALL=$TORCH_GPU_INSTALL\" >> $GITHUB_ENV\n" [3247,3307]
                            OBJECT [3309,3606]
                                FIELD [3310,3335]
                                    String: "uses" [3310,3316]
                                    STRING [3317,3335]
                                        String: "actions/cache@v2" [3317,3335]
                                FIELD [3336,3359]
                                    String: "id" [3336,3340]
                                    STRING [3341,3359]
                                        String: "virtualenv-cache" [3341,3359]
                                FIELD [3360,3605]
                                    String: "with" [3360,3366]
                                    OBJECT [3367,3605]
                                        FIELD [3368,3382]
                                            String: "path" [3368,3374]
                                            STRING [3375,3382]
                                                String: ".venv" [3375,3382]
                                        FIELD [3383,3604]
                                            String: "key" [3383,3388]
                                            STRING [3389,3604]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-${{ matrix.task.torch_platform }}-${{ hashFiles('setup.py') }}-${{ hashFiles('*requirements.txt') }}" [3389,3604]
                            OBJECT [3607,3863]
                                FIELD [3608,3657]
                                    String: "name" [3608,3614]
                                    STRING [3615,3657]
                                        String: "Setup virtual environment (no cache hit)" [3615,3657]
                                FIELD [3658,3715]
                                    String: "if" [3658,3662]
                                    STRING [3663,3715]
                                        String: "steps.virtualenv-cache.outputs.cache-hit != 'true'" [3663,3715]
                                FIELD [3716,3862]
                                    String: "run" [3716,3721]
                                    STRING [3722,3862]
                                        String: "conda create -y -p .venv python=${{ env.DEFAULT_PYTHON_VERSION }}\nconda activate ./.venv\nmake install TORCH_INSTALL=\"$TORCH_INSTALL\"\n" [3722,3862]
                            OBJECT [3864,4058]
                                FIELD [3865,3911]
                                    String: "name" [3865,3871]
                                    STRING [3872,3911]
                                        String: "Setup virtual environment (cache hit)" [3872,3911]
                                FIELD [3912,3969]
                                    String: "if" [3912,3916]
                                    STRING [3917,3969]
                                        String: "steps.virtualenv-cache.outputs.cache-hit == 'true'" [3917,3969]
                                FIELD [3970,4057]
                                    String: "run" [3970,3975]
                                    STRING [3976,4057]
                                        String: "conda activate ./.venv\npip install --no-deps -e .[all]\nmake download-extras\n" [3976,4057]
                            OBJECT [4059,4316]
                                FIELD [4060,4097]
                                    String: "name" [4060,4066]
                                    STRING [4067,4097]
                                        String: "Pull and install models repo" [4067,4097]
                                FIELD [4098,4138]
                                    String: "if" [4098,4102]
                                    STRING [4103,4138]
                                        String: "matrix.task.name == 'Model Tests'" [4103,4138]
                                FIELD [4139,4177]
                                    String: "env" [4139,4144]
                                    OBJECT [4145,4177]
                                        FIELD [4146,4176]
                                            String: "ALLENNLP_VERSION_OVERRIDE" [4146,4173]
                                            STRING [4174,4176]
                                                String: "" [4174,4176]
                                FIELD [4178,4315]
                                    String: "run" [4178,4183]
                                    STRING [4184,4315]
                                        String: "conda activate ./.venv\ngit clone https://github.com/allenai/allennlp-models.git\ncd allennlp-models\npip install -e .[dev,all]\n" [4184,4315]
                            OBJECT [4317,4383]
                                FIELD [4318,4337]
                                    String: "name" [4318,4324]
                                    STRING [4325,4337]
                                        String: "Debug info" [4325,4337]
                                FIELD [4338,4382]
                                    String: "run" [4338,4343]
                                    STRING [4344,4382]
                                        String: "conda activate ./.venv\nconda list\n" [4344,4382]
                            OBJECT [4384,4490]
                                FIELD [4385,4417]
                                    String: "name" [4385,4391]
                                    STRING [4392,4417]
                                        String: "Ensure torch up-to-date" [4392,4417]
                                FIELD [4418,4489]
                                    String: "run" [4418,4423]
                                    STRING [4424,4489]
                                        String: "conda activate ./.venv\npython scripts/check_torch_version.py\n" [4424,4489]
                            OBJECT [4491,4582]
                                FIELD [4492,4524]
                                    String: "name" [4492,4498]
                                    STRING [4499,4524]
                                        String: "${{ matrix.task.name }}" [4499,4524]
                                FIELD [4525,4581]
                                    String: "run" [4525,4530]
                                    STRING [4531,4581]
                                        String: "conda activate ./.venv\n${{ matrix.task.run }}\n" [4531,4581]
                            OBJECT [4583,4704]
                                FIELD [4584,4616]
                                    String: "name" [4584,4590]
                                    STRING [4591,4616]
                                        String: "Prepare coverage report" [4591,4616]
                                FIELD [4617,4651]
                                    String: "if" [4617,4621]
                                    STRING [4622,4651]
                                        String: "matrix.task.coverage_report" [4622,4651]
                                FIELD [4652,4703]
                                    String: "run" [4652,4657]
                                    STRING [4658,4703]
                                        String: "mkdir coverage\nmv coverage.xml coverage/\n" [4658,4703]
                            OBJECT [4705,4878]
                                FIELD [4706,4735]
                                    String: "name" [4706,4712]
                                    STRING [4713,4735]
                                        String: "Save coverage report" [4713,4735]
                                FIELD [4736,4770]
                                    String: "if" [4736,4740]
                                    STRING [4741,4770]
                                        String: "matrix.task.coverage_report" [4741,4770]
                                FIELD [4771,4806]
                                    String: "uses" [4771,4777]
                                    STRING [4778,4806]
                                        String: "actions/upload-artifact@v1" [4778,4806]
                                FIELD [4807,4877]
                                    String: "with" [4807,4813]
                                    OBJECT [4814,4877]
                                        FIELD [4815,4856]
                                            String: "name" [4815,4821]
                                            STRING [4822,4856]
                                                String: "${{ matrix.task.name }}-coverage" [4822,4856]
                                        FIELD [4857,4876]
                                            String: "path" [4857,4863]
                                            STRING [4864,4876]
                                                String: "./coverage" [4864,4876]
                            OBJECT [4879,5117]
                                FIELD [4880,4897]
                                    String: "name" [4880,4886]
                                    STRING [4887,4897]
                                        String: "Clean up" [4887,4897]
                                FIELD [4898,4913]
                                    String: "if" [4898,4902]
                                    STRING [4903,4913]
                                        String: "always()" [4903,4913]
                                FIELD [4914,5116]
                                    String: "run" [4914,4919]
                                    STRING [4920,5116]
                                        String: "# Could run into issues with the cache if we don't uninstall the editable.\n# See https://github.com/pypa/pip/issues/4537.\nconda activate ./.venv\npip uninstall --yes allennlp allennlp-models\n" [4920,5116]
            FIELD [5120,6079]
                String: "upload_coverage" [5120,5137]
                OBJECT [5138,6079]
                    FIELD [5139,5170]
                        String: "name" [5139,5145]
                        STRING [5146,5170]
                            String: "Upload Coverage Report" [5146,5170]
                    FIELD [5171,5190]
                        String: "timeout-minutes" [5171,5188]
                        NUMBER [5189,5190]
                            Number: 5 [5189,5190]
                    FIELD [5191,5309]
                        String: "if" [5191,5195]
                        STRING [5196,5309]
                            String: "github.repository == 'allenai/allennlp' && (github.event_name == 'push' || github.event_name == 'pull_request')" [5196,5309]
                    FIELD [5310,5335]
                        String: "runs-on" [5310,5319]
                        STRING [5320,5335]
                            String: "ubuntu-latest" [5320,5335]
                    FIELD [5336,5354]
                        String: "needs" [5336,5343]
                        ARRAY [5344,5354]
                            STRING [5345,5353]
                                String: "checks" [5345,5353]
                    FIELD [5355,6078]
                        String: "steps" [5355,5362]
                        ARRAY [5363,6078]
                            OBJECT [5364,5394]
                                FIELD [5365,5393]
                                    String: "uses" [5365,5371]
                                    STRING [5372,5393]
                                        String: "actions/checkout@v2" [5372,5393]
                            OBJECT [5395,5548]
                                FIELD [5396,5444]
                                    String: "name" [5396,5402]
                                    STRING [5403,5444]
                                        String: "Download coverage report from CPU tests" [5403,5444]
                                FIELD [5445,5482]
                                    String: "uses" [5445,5451]
                                    STRING [5452,5482]
                                        String: "actions/download-artifact@v1" [5452,5482]
                                FIELD [5483,5547]
                                    String: "with" [5483,5489]
                                    OBJECT [5490,5547]
                                        FIELD [5491,5518]
                                            String: "name" [5491,5497]
                                            STRING [5498,5518]
                                                String: "CPU Tests-coverage" [5498,5518]
                                        FIELD [5519,5546]
                                            String: "path" [5519,5525]
                                            STRING [5526,5546]
                                                String: "coverage/cpu_tests" [5526,5546]
                            OBJECT [5549,5702]
                                FIELD [5550,5598]
                                    String: "name" [5550,5556]
                                    STRING [5557,5598]
                                        String: "Download coverage report from GPU Tests" [5557,5598]
                                FIELD [5599,5636]
                                    String: "uses" [5599,5605]
                                    STRING [5606,5636]
                                        String: "actions/download-artifact@v1" [5606,5636]
                                FIELD [5637,5701]
                                    String: "with" [5637,5643]
                                    OBJECT [5644,5701]
                                        FIELD [5645,5672]
                                            String: "name" [5645,5651]
                                            STRING [5652,5672]
                                                String: "GPU Tests-coverage" [5652,5672]
                                        FIELD [5673,5700]
                                            String: "path" [5673,5679]
                                            STRING [5680,5700]
                                                String: "coverage/gpu_tests" [5680,5700]
                            OBJECT [5703,5862]
                                FIELD [5704,5754]
                                    String: "name" [5704,5710]
                                    STRING [5711,5754]
                                        String: "Download coverage report from model tests" [5711,5754]
                                FIELD [5755,5792]
                                    String: "uses" [5755,5761]
                                    STRING [5762,5792]
                                        String: "actions/download-artifact@v1" [5762,5792]
                                FIELD [5793,5861]
                                    String: "with" [5793,5799]
                                    OBJECT [5800,5861]
                                        FIELD [5801,5830]
                                            String: "name" [5801,5807]
                                            STRING [5808,5830]
                                                String: "Model Tests-coverage" [5808,5830]
                                        FIELD [5831,5860]
                                            String: "path" [5831,5837]
                                            STRING [5838,5860]
                                                String: "coverage/model_tests" [5838,5860]
                            OBJECT [5863,6077]
                                FIELD [5864,5899]
                                    String: "name" [5864,5870]
                                    STRING [5871,5899]
                                        String: "Upload coverage to Codecov" [5871,5899]
                                FIELD [5900,5934]
                                    String: "uses" [5900,5906]
                                    STRING [5907,5934]
                                        String: "codecov/codecov-action@v1" [5907,5934]
                                FIELD [5935,6076]
                                    String: "with" [5935,5941]
                                    OBJECT [5942,6076]
                                        FIELD [5943,6050]
                                            String: "files" [5943,5950]
                                            STRING [5951,6050]
                                                String: "coverage/cpu_tests/coverage.xml,coverage/gpu_tests/coverage.xml,coverage/model_tests/coverage.xml" [5951,6050]
                                        FIELD [6051,6075]
                                            String: "fail_ci_if_error" [6051,6069]
                                            FALSE [6070,6075]
            FIELD [6080,8795]
                String: "build_package" [6080,6095]
                OBJECT [6096,8795]
                    FIELD [6097,6119]
                        String: "name" [6097,6103]
                        STRING [6104,6119]
                            String: "Build Package" [6104,6119]
                    FIELD [6120,6140]
                        String: "timeout-minutes" [6120,6137]
                        NUMBER [6138,6140]
                            Number: 18 [6138,6140]
                    FIELD [6141,6166]
                        String: "runs-on" [6141,6150]
                        STRING [6151,6166]
                            String: "ubuntu-latest" [6151,6166]
                    FIELD [6167,8794]
                        String: "steps" [6167,6174]
                        ARRAY [6175,8794]
                            OBJECT [6176,6206]
                                FIELD [6177,6205]
                                    String: "uses" [6177,6183]
                                    STRING [6184,6205]
                                        String: "actions/checkout@v2" [6184,6205]
                            OBJECT [6207,6343]
                                FIELD [6208,6251]
                                    String: "uses" [6208,6214]
                                    STRING [6215,6251]
                                        String: "conda-incubator/setup-miniconda@v2" [6215,6251]
                                FIELD [6252,6342]
                                    String: "with" [6252,6258]
                                    OBJECT [6259,6342]
                                        FIELD [6260,6288]
                                            String: "miniconda-version" [6260,6279]
                                            STRING [6280,6288]
                                                String: "latest" [6280,6288]
                                        FIELD [6289,6341]
                                            String: "python-version" [6289,6305]
                                            STRING [6306,6341]
                                                String: "${{ env.DEFAULT_PYTHON_VERSION }}" [6306,6341]
                            OBJECT [6344,6599]
                                FIELD [6345,6373]
                                    String: "name" [6345,6351]
                                    STRING [6352,6373]
                                        String: "Set build variables" [6352,6373]
                                FIELD [6374,6598]
                                    String: "run" [6374,6379]
                                    STRING [6380,6598]
                                        String: "echo \"PYTHON_VERSION=$(python --version)\" >> $GITHUB_ENV\necho \"RUNNER_ARCH=$(uname -m)\" >> $GITHUB_ENV\necho \"WEEK_NUMBER=$(date +%V)\" >> $GITHUB_ENV\necho \"TORCH_INSTALL=$TORCH_CPU_INSTALL\" >> $GITHUB_ENV\n" [6380,6598]
                            OBJECT [6600,6867]
                                FIELD [6601,6626]
                                    String: "uses" [6601,6607]
                                    STRING [6608,6626]
                                        String: "actions/cache@v2" [6608,6626]
                                FIELD [6627,6650]
                                    String: "id" [6627,6631]
                                    STRING [6632,6650]
                                        String: "virtualenv-cache" [6632,6650]
                                FIELD [6651,6866]
                                    String: "with" [6651,6657]
                                    OBJECT [6658,6866]
                                        FIELD [6659,6673]
                                            String: "path" [6659,6665]
                                            STRING [6666,6673]
                                                String: ".venv" [6666,6673]
                                        FIELD [6674,6865]
                                            String: "key" [6674,6679]
                                            STRING [6680,6865]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-cpu-${{ hashFiles('setup.py') }}-${{ hashFiles('*requirements.txt') }}" [6680,6865]
                            OBJECT [6868,7124]
                                FIELD [6869,6918]
                                    String: "name" [6869,6875]
                                    STRING [6876,6918]
                                        String: "Setup virtual environment (no cache hit)" [6876,6918]
                                FIELD [6919,6976]
                                    String: "if" [6919,6923]
                                    STRING [6924,6976]
                                        String: "steps.virtualenv-cache.outputs.cache-hit != 'true'" [6924,6976]
                                FIELD [6977,7123]
                                    String: "run" [6977,6982]
                                    STRING [6983,7123]
                                        String: "conda create -y -p .venv python=${{ env.DEFAULT_PYTHON_VERSION }}\nconda activate ./.venv\nmake install TORCH_INSTALL=\"$TORCH_INSTALL\"\n" [6983,7123]
                            OBJECT [7125,7319]
                                FIELD [7126,7172]
                                    String: "name" [7126,7132]
                                    STRING [7133,7172]
                                        String: "Setup virtual environment (cache hit)" [7133,7172]
                                FIELD [7173,7230]
                                    String: "if" [7173,7177]
                                    STRING [7178,7230]
                                        String: "steps.virtualenv-cache.outputs.cache-hit == 'true'" [7178,7230]
                                FIELD [7231,7318]
                                    String: "run" [7231,7236]
                                    STRING [7237,7318]
                                        String: "conda activate ./.venv\npip install --no-deps -e .[all]\nmake download-extras\n" [7237,7318]
                            OBJECT [7320,7386]
                                FIELD [7321,7340]
                                    String: "name" [7321,7327]
                                    STRING [7328,7340]
                                        String: "Debug info" [7328,7340]
                                FIELD [7341,7385]
                                    String: "run" [7341,7346]
                                    STRING [7347,7385]
                                        String: "conda activate ./.venv\npip freeze\n" [7347,7385]
                            OBJECT [7387,8048]
                                FIELD [7388,7426]
                                    String: "name" [7388,7394]
                                    STRING [7395,7426]
                                        String: "Check and set nightly version" [7395,7426]
                                FIELD [7427,7465]
                                    String: "if" [7427,7431]
                                    STRING [7432,7465]
                                        String: "github.event_name == 'schedule'" [7432,7465]
                                FIELD [7466,8047]
                                    String: "run" [7466,7471]
                                    STRING [7472,8047]
                                        String: "# Verify that current version is ahead of the last release.\nconda activate ./.venv\nLATEST=$(scripts/get_version.py latest)\nCURRENT=$(scripts/get_version.py current)\nif [ \"$CURRENT\" == \"$LATEST\" ]; then\n    echo \"Current version needs to be ahead of latest release in order to build nightly release\";\n    exit 1;\nfi\n# This is somewhat bizarre, but you can't set env variables to bash\n# commands in the action workflow - so we have to use this odd way of\n# exporting a variable instead.\necho \"ALLENNLP_VERSION_SUFFIX=dev$(date -u +%Y%m%d)\" >> $GITHUB_ENV\n" [7472,8047]
                            OBJECT [8049,8427]
                                FIELD [8050,8094]
                                    String: "name" [8050,8056]
                                    STRING [8057,8094]
                                        String: "Check version and release tag match" [8057,8094]
                                FIELD [8095,8132]
                                    String: "if" [8095,8099]
                                    STRING [8100,8132]
                                        String: "github.event_name == 'release'" [8100,8132]
                                FIELD [8133,8426]
                                    String: "run" [8133,8138]
                                    STRING [8139,8426]
                                        String: "# Remove 'refs/tags/' to get the actual tag from the release.\nconda activate ./.venv\nTAG=${GITHUB_REF#refs/tags/};\nVERSION=$(scripts/get_version.py current)\nif [ \"$TAG\" != \"$VERSION\" ]; then\n    echo \"Bad tag or version. Tag $TAG does not match $VERSION\";\n    exit 1;\nfi\n" [8139,8426]
                            OBJECT [8428,8584]
                                FIELD [8429,8456]
                                    String: "name" [8429,8435]
                                    STRING [8436,8456]
                                        String: "Build core package" [8436,8456]
                                FIELD [8457,8583]
                                    String: "run" [8457,8462]
                                    STRING [8463,8583]
                                        String: "# Just print out the version for debugging.\nconda activate ./.venv\nmake version\npython setup.py bdist_wheel sdist\n" [8463,8583]
                            OBJECT [8585,8694]
                                FIELD [8586,8612]
                                    String: "name" [8586,8592]
                                    STRING [8593,8612]
                                        String: "Save core package" [8593,8612]
                                FIELD [8613,8648]
                                    String: "uses" [8613,8619]
                                    STRING [8620,8648]
                                        String: "actions/upload-artifact@v1" [8620,8648]
                                FIELD [8649,8693]
                                    String: "with" [8649,8655]
                                    OBJECT [8656,8693]
                                        FIELD [8657,8678]
                                            String: "name" [8657,8663]
                                            STRING [8664,8678]
                                                String: "core-package" [8664,8678]
                                        FIELD [8679,8692]
                                            String: "path" [8679,8685]
                                            STRING [8686,8692]
                                                String: "dist" [8686,8692]
                            OBJECT [8695,8793]
                                FIELD [8696,8713]
                                    String: "name" [8696,8702]
                                    STRING [8703,8713]
                                        String: "Clean up" [8703,8713]
                                FIELD [8714,8729]
                                    String: "if" [8714,8718]
                                    STRING [8719,8729]
                                        String: "always()" [8719,8729]
                                FIELD [8730,8792]
                                    String: "run" [8730,8735]
                                    STRING [8736,8792]
                                        String: "conda activate ./.venv\npip uninstall --yes allennlp\n" [8736,8792]
            FIELD [8796,9677]
                String: "test_package" [8796,8810]
                OBJECT [8811,9677]
                    FIELD [8812,8833]
                        String: "name" [8812,8818]
                        STRING [8819,8833]
                            String: "Test Package" [8819,8833]
                    FIELD [8834,8854]
                        String: "timeout-minutes" [8834,8851]
                        NUMBER [8852,8854]
                            Number: 10 [8852,8854]
                    FIELD [8855,8880]
                        String: "needs" [8855,8862]
                        ARRAY [8863,8880]
                            STRING [8864,8879]
                                String: "build_package" [8864,8879]
                    FIELD [8881,8906]
                        String: "runs-on" [8881,8890]
                        STRING [8891,8906]
                            String: "ubuntu-latest" [8891,8906]
                    FIELD [8907,8981]
                        String: "strategy" [8907,8917]
                        OBJECT [8918,8981]
                            FIELD [8919,8980]
                                String: "matrix" [8919,8927]
                                OBJECT [8928,8980]
                                    FIELD [8929,8957]
                                        String: "python" [8929,8937]
                                        ARRAY [8938,8957]
                                            STRING [8939,8944]
                                                String: "3.7" [8939,8944]
                                            STRING [8945,8950]
                                                String: "3.8" [8945,8950]
                                            STRING [8951,8956]
                                                String: "3.9" [8951,8956]
                                    FIELD [8958,8979]
                                        String: "flavor" [8958,8966]
                                        ARRAY [8967,8979]
                                            STRING [8968,8970]
                                                String: "" [8968,8970]
                                            STRING [8971,8978]
                                                String: "[all]" [8971,8978]
                    FIELD [8982,9676]
                        String: "steps" [8982,8989]
                        ARRAY [8990,9676]
                            OBJECT [8991,9021]
                                FIELD [8992,9020]
                                    String: "uses" [8992,8998]
                                    STRING [8999,9020]
                                        String: "actions/checkout@v2" [8999,9020]
                            OBJECT [9022,9127]
                                FIELD [9023,9044]
                                    String: "name" [9023,9029]
                                    STRING [9030,9044]
                                        String: "Setup Python" [9030,9044]
                                FIELD [9045,9077]
                                    String: "uses" [9045,9051]
                                    STRING [9052,9077]
                                        String: "actions/setup-python@v2" [9052,9077]
                                FIELD [9078,9126]
                                    String: "with" [9078,9084]
                                    OBJECT [9085,9126]
                                        FIELD [9086,9125]
                                            String: "python-version" [9086,9102]
                                            STRING [9103,9125]
                                                String: "${{ matrix.python }}" [9103,9125]
                            OBJECT [9128,9212]
                                FIELD [9129,9158]
                                    String: "name" [9129,9135]
                                    STRING [9136,9158]
                                        String: "Install requirements" [9136,9158]
                                FIELD [9159,9211]
                                    String: "run" [9159,9164]
                                    STRING [9165,9211]
                                        String: "pip install --upgrade pip setuptools wheel\n" [9165,9211]
                            OBJECT [9213,9328]
                                FIELD [9214,9244]
                                    String: "name" [9214,9220]
                                    STRING [9221,9244]
                                        String: "Download core package" [9221,9244]
                                FIELD [9245,9282]
                                    String: "uses" [9245,9251]
                                    STRING [9252,9282]
                                        String: "actions/download-artifact@v1" [9252,9282]
                                FIELD [9283,9327]
                                    String: "with" [9283,9289]
                                    OBJECT [9290,9327]
                                        FIELD [9291,9312]
                                            String: "name" [9291,9297]
                                            STRING [9298,9312]
                                                String: "core-package" [9298,9312]
                                        FIELD [9313,9326]
                                            String: "path" [9313,9319]
                                            STRING [9320,9326]
                                                String: "dist" [9320,9326]
                            OBJECT [9329,9419]
                                FIELD [9330,9359]
                                    String: "name" [9330,9336]
                                    STRING [9337,9359]
                                        String: "Install core package" [9337,9359]
                                FIELD [9360,9418]
                                    String: "run" [9360,9365]
                                    STRING [9366,9418]
                                        String: "pip install $(ls dist/*.whl)${{ matrix.flavor }}\n" [9366,9418]
                            OBJECT [9420,9489]
                                FIELD [9421,9457]
                                    String: "name" [9421,9427]
                                    STRING [9428,9457]
                                        String: "Download NLTK prerequisites" [9428,9457]
                                FIELD [9458,9488]
                                    String: "run" [9458,9463]
                                    STRING [9464,9488]
                                        String: "make download-extras\n" [9464,9488]
                            OBJECT [9490,9576]
                                FIELD [9491,9517]
                                    String: "name" [9491,9497]
                                    STRING [9498,9517]
                                        String: "Cleanup workspace" [9498,9517]
                                FIELD [9518,9575]
                                    String: "run" [9518,9523]
                                    STRING [9524,9575]
                                        String: "rm -rf allennlp/ setup.py tests/ test_fixtures/\n" [9524,9575]
                            OBJECT [9577,9619]
                                FIELD [9578,9597]
                                    String: "name" [9578,9584]
                                    STRING [9585,9597]
                                        String: "Pip freeze" [9585,9597]
                                FIELD [9598,9618]
                                    String: "run" [9598,9603]
                                    STRING [9604,9618]
                                        String: "pip freeze\n" [9604,9618]
                            OBJECT [9620,9675]
                                FIELD [9621,9642]
                                    String: "name" [9621,9627]
                                    STRING [9628,9642]
                                        String: "Test install" [9628,9642]
                                FIELD [9643,9674]
                                    String: "run" [9643,9648]
                                    STRING [9649,9674]
                                        String: "allennlp test-install\n" [9649,9674]
            FIELD [9678,11281]
                String: "docker" [9678,9686]
                OBJECT [9687,11281]
                    FIELD [9688,9729]
                        String: "name" [9688,9694]
                        STRING [9695,9729]
                            String: "Docker (CUDA ${{ matrix.cuda }})" [9695,9729]
                    FIELD [9730,9750]
                        String: "timeout-minutes" [9730,9747]
                        NUMBER [9748,9750]
                            Number: 18 [9748,9750]
                    FIELD [9751,9797]
                        String: "if" [9751,9755]
                        STRING [9756,9797]
                            String: "github.repository == 'allenai/allennlp'" [9756,9797]
                    FIELD [9798,9823]
                        String: "runs-on" [9798,9807]
                        STRING [9808,9823]
                            String: "ubuntu-latest" [9808,9823]
                    FIELD [9824,9863]
                        String: "strategy" [9824,9834]
                        OBJECT [9835,9863]
                            FIELD [9836,9862]
                                String: "matrix" [9836,9844]
                                OBJECT [9845,9862]
                                    FIELD [9846,9861]
                                        String: "cuda" [9846,9852]
                                        ARRAY [9853,9861]
                                            STRING [9854,9860]
                                                String: "11.3" [9854,9860]
                    FIELD [9864,11280]
                        String: "steps" [9864,9871]
                        ARRAY [9872,11280]
                            OBJECT [9873,9903]
                                FIELD [9874,9902]
                                    String: "uses" [9874,9880]
                                    STRING [9881,9902]
                                        String: "actions/checkout@v2" [9881,9902]
                            OBJECT [9904,10319]
                                FIELD [9905,9946]
                                    String: "name" [9905,9911]
                                    STRING [9912,9946]
                                        String: "Set image name and torch version" [9912,9946]
                                FIELD [9947,9982]
                                    String: "env" [9947,9952]
                                    OBJECT [9953,9982]
                                        FIELD [9954,9981]
                                            String: "CUDA" [9954,9960]
                                            STRING [9961,9981]
                                                String: "${{ matrix.cuda }}" [9961,9981]
                                FIELD [9983,10318]
                                    String: "run" [9983,9988]
                                    STRING [9989,10318]
                                        String: "echo \"DOCKER_TORCH_VERSION=${TORCH_VERSION}-cuda${CUDA}\" >> $GITHUB_ENV;\nif [[ $GITHUB_EVENT_NAME == 'release' ]]; then\n    echo \"DOCKER_IMAGE_NAME=allennlp/allennlp:${GITHUB_REF#refs/tags/}-cuda${CUDA}\" >> $GITHUB_ENV;\nelse\n    echo \"DOCKER_IMAGE_NAME=allennlp/commit:${GITHUB_SHA}-cuda${CUDA}\" >> $GITHUB_ENV;\nfi\n" [9989,10318]
                            OBJECT [10320,10458]
                                FIELD [10321,10341]
                                    String: "name" [10321,10327]
                                    STRING [10328,10341]
                                        String: "Build image" [10328,10341]
                                FIELD [10342,10457]
                                    String: "run" [10342,10347]
                                    STRING [10348,10457]
                                        String: "make docker-image DOCKER_IMAGE_NAME=\"$DOCKER_IMAGE_NAME\" DOCKER_TORCH_VERSION=\"$DOCKER_TORCH_VERSION\"\n" [10348,10457]
                            OBJECT [10459,10538]
                                FIELD [10460,10479]
                                    String: "name" [10460,10466]
                                    STRING [10467,10479]
                                        String: "Test image" [10467,10479]
                                FIELD [10480,10537]
                                    String: "run" [10480,10485]
                                    STRING [10486,10537]
                                        String: "docker run --rm $DOCKER_IMAGE_NAME test-install\n" [10486,10537]
                            OBJECT [10539,10736]
                                FIELD [10540,10575]
                                    String: "name" [10540,10546]
                                    STRING [10547,10575]
                                        String: "Authenticate to Docker Hub" [10547,10575]
                                FIELD [10576,10644]
                                    String: "if" [10576,10580]
                                    STRING [10581,10644]
                                        String: "github.event_name == 'release' || github.event_name == 'push'" [10581,10644]
                                FIELD [10645,10735]
                                    String: "run" [10645,10650]
                                    STRING [10651,10735]
                                        String: "docker login -u ${{ secrets.DOCKER_USERNAME }} -p ${{ secrets.DOCKER_PASSWORD }}\n" [10651,10735]
                            OBJECT [10737,10870]
                                FIELD [10738,10759]
                                    String: "name" [10738,10744]
                                    STRING [10745,10759]
                                        String: "Upload image" [10745,10759]
                                FIELD [10760,10828]
                                    String: "if" [10760,10764]
                                    STRING [10765,10828]
                                        String: "github.event_name == 'release' || github.event_name == 'push'" [10765,10828]
                                FIELD [10829,10869]
                                    String: "run" [10829,10834]
                                    STRING [10835,10869]
                                        String: "docker push $DOCKER_IMAGE_NAME\n" [10835,10869]
                            OBJECT [10871,11082]
                                FIELD [10872,10908]
                                    String: "name" [10872,10878]
                                    STRING [10879,10908]
                                        String: "Upload default commit image" [10879,10908]
                                FIELD [10909,10968]
                                    String: "if" [10909,10913]
                                    STRING [10914,10968]
                                        String: "github.event_name == 'push' && matrix.cuda == '11.3'" [10914,10968]
                                FIELD [10969,11081]
                                    String: "run" [10969,10974]
                                    STRING [10975,11081]
                                        String: "docker tag $DOCKER_IMAGE_NAME allennlp/commit:${GITHUB_SHA}\ndocker push allennlp/commit:${GITHUB_SHA}\n" [10975,11081]
                            OBJECT [11083,11279]
                                FIELD [11084,11112]
                                    String: "name" [11084,11090]
                                    STRING [11091,11112]
                                        String: "Upload latest image" [11091,11112]
                                FIELD [11113,11175]
                                    String: "if" [11113,11117]
                                    STRING [11118,11175]
                                        String: "github.event_name == 'release' && matrix.cuda == '11.3'" [11118,11175]
                                FIELD [11176,11278]
                                    String: "run" [11176,11181]
                                    STRING [11182,11278]
                                        String: "docker tag $DOCKER_IMAGE_NAME allennlp/allennlp:latest\ndocker push allennlp/allennlp:latest\n" [11182,11278]
            FIELD [11282,15746]
                String: "docs" [11282,11288]
                OBJECT [11289,15746]
                    FIELD [11290,11303]
                        String: "name" [11290,11296]
                        STRING [11297,11303]
                            String: "Docs" [11297,11303]
                    FIELD [11304,11324]
                        String: "timeout-minutes" [11304,11321]
                        NUMBER [11322,11324]
                            Number: 15 [11322,11324]
                    FIELD [11325,11371]
                        String: "if" [11325,11329]
                        STRING [11330,11371]
                            String: "github.repository == 'allenai/allennlp'" [11330,11371]
                    FIELD [11372,11397]
                        String: "runs-on" [11372,11381]
                        STRING [11382,11397]
                            String: "ubuntu-latest" [11382,11397]
                    FIELD [11398,15745]
                        String: "steps" [11398,11405]
                        ARRAY [11406,15745]
                            OBJECT [11407,11437]
                                FIELD [11408,11436]
                                    String: "uses" [11408,11414]
                                    STRING [11415,11436]
                                        String: "actions/checkout@v1" [11415,11436]
                            OBJECT [11438,11634]
                                FIELD [11439,11467]
                                    String: "name" [11439,11445]
                                    STRING [11446,11467]
                                        String: "Setup SSH Client 🔑" [11446,11467]
                                FIELD [11468,11536]
                                    String: "if" [11468,11472]
                                    STRING [11473,11536]
                                        String: "github.event_name == 'release' || github.event_name == 'push'" [11473,11536]
                                FIELD [11537,11573]
                                    String: "uses" [11537,11543]
                                    STRING [11544,11573]
                                        String: "webfactory/ssh-agent@v0.4.1" [11544,11573]
                                FIELD [11574,11633]
                                    String: "with" [11574,11580]
                                    OBJECT [11581,11633]
                                        FIELD [11582,11632]
                                            String: "ssh-private-key" [11582,11599]
                                            STRING [11600,11632]
                                                String: "${{ secrets.DOCS_DEPLOY_KEY }}" [11600,11632]
                            OBJECT [11635,11771]
                                FIELD [11636,11679]
                                    String: "uses" [11636,11642]
                                    STRING [11643,11679]
                                        String: "conda-incubator/setup-miniconda@v2" [11643,11679]
                                FIELD [11680,11770]
                                    String: "with" [11680,11686]
                                    OBJECT [11687,11770]
                                        FIELD [11688,11716]
                                            String: "miniconda-version" [11688,11707]
                                            STRING [11708,11716]
                                                String: "latest" [11708,11716]
                                        FIELD [11717,11769]
                                            String: "python-version" [11717,11733]
                                            STRING [11734,11769]
                                                String: "${{ env.DEFAULT_PYTHON_VERSION }}" [11734,11769]
                            OBJECT [11772,12027]
                                FIELD [11773,11801]
                                    String: "name" [11773,11779]
                                    STRING [11780,11801]
                                        String: "Set build variables" [11780,11801]
                                FIELD [11802,12026]
                                    String: "run" [11802,11807]
                                    STRING [11808,12026]
                                        String: "echo \"PYTHON_VERSION=$(python --version)\" >> $GITHUB_ENV\necho \"RUNNER_ARCH=$(uname -m)\" >> $GITHUB_ENV\necho \"WEEK_NUMBER=$(date +%V)\" >> $GITHUB_ENV\necho \"TORCH_INSTALL=$TORCH_CPU_INSTALL\" >> $GITHUB_ENV\n" [11808,12026]
                            OBJECT [12028,12295]
                                FIELD [12029,12054]
                                    String: "uses" [12029,12035]
                                    STRING [12036,12054]
                                        String: "actions/cache@v2" [12036,12054]
                                FIELD [12055,12078]
                                    String: "id" [12055,12059]
                                    STRING [12060,12078]
                                        String: "virtualenv-cache" [12060,12078]
                                FIELD [12079,12294]
                                    String: "with" [12079,12085]
                                    OBJECT [12086,12294]
                                        FIELD [12087,12101]
                                            String: "path" [12087,12093]
                                            STRING [12094,12101]
                                                String: ".venv" [12094,12101]
                                        FIELD [12102,12293]
                                            String: "key" [12102,12107]
                                            STRING [12108,12293]
                                                String: "${{ env.CACHE_PREFIX }}-${{ env.WEEK_NUMBER }}-${{ runner.os }}-${{ env.RUNNER_ARCH }}-${{ env.PYTHON_VERSION }}-cpu-${{ hashFiles('setup.py') }}-${{ hashFiles('*requirements.txt') }}" [12108,12293]
                            OBJECT [12296,12552]
                                FIELD [12297,12346]
                                    String: "name" [12297,12303]
                                    STRING [12304,12346]
                                        String: "Setup virtual environment (no cache hit)" [12304,12346]
                                FIELD [12347,12404]
                                    String: "if" [12347,12351]
                                    STRING [12352,12404]
                                        String: "steps.virtualenv-cache.outputs.cache-hit != 'true'" [12352,12404]
                                FIELD [12405,12551]
                                    String: "run" [12405,12410]
                                    STRING [12411,12551]
                                        String: "conda create -y -p .venv python=${{ env.DEFAULT_PYTHON_VERSION }}\nconda activate ./.venv\nmake install TORCH_INSTALL=\"$TORCH_INSTALL\"\n" [12411,12551]
                            OBJECT [12553,12747]
                                FIELD [12554,12600]
                                    String: "name" [12554,12560]
                                    STRING [12561,12600]
                                        String: "Setup virtual environment (cache hit)" [12561,12600]
                                FIELD [12601,12658]
                                    String: "if" [12601,12605]
                                    STRING [12606,12658]
                                        String: "steps.virtualenv-cache.outputs.cache-hit == 'true'" [12606,12658]
                                FIELD [12659,12746]
                                    String: "run" [12659,12664]
                                    STRING [12665,12746]
                                        String: "conda activate ./.venv\npip install --no-deps -e .[all]\nmake download-extras\n" [12665,12746]
                            OBJECT [12748,12814]
                                FIELD [12749,12768]
                                    String: "name" [12749,12755]
                                    STRING [12756,12768]
                                        String: "Debug info" [12756,12768]
                                FIELD [12769,12813]
                                    String: "run" [12769,12774]
                                    STRING [12775,12813]
                                        String: "conda activate ./.venv\nconda list\n" [12775,12813]
                            OBJECT [12815,13252]
                                FIELD [12816,12844]
                                    String: "name" [12816,12822]
                                    STRING [12823,12844]
                                        String: "Prepare environment" [12823,12844]
                                FIELD [12845,13251]
                                    String: "run" [12845,12850]
                                    STRING [12851,13251]
                                        String: "if [[ $GITHUB_EVENT_NAME == 'release' ]]; then\n    echo \"DOCS_FOLDER=${GITHUB_REF#refs/tags/}\" >> $GITHUB_ENV;\n    echo \"BASE_SOURCE_LINK=https://github.com/allenai/allennlp/blob/${GITHUB_REF#refs/tags/}/allennlp/\" >> $GITHUB_ENV;\nelse\n    echo \"DOCS_FOLDER=main\" >> $GITHUB_ENV;\n    echo \"BASE_SOURCE_LINK=https://github.com/allenai/allennlp/blob/main/allennlp/\" >> $GITHUB_ENV;\nfi\n" [12851,13251]
                            OBJECT [13253,13332]
                                FIELD [13254,13273]
                                    String: "name" [13254,13260]
                                    STRING [13261,13273]
                                        String: "Build docs" [13261,13273]
                                FIELD [13274,13331]
                                    String: "run" [13274,13279]
                                    STRING [13280,13331]
                                        String: "conda activate ./.venv\n./scripts/build_docs.sh\n" [13280,13331]
                            OBJECT [13333,13390]
                                FIELD [13334,13356]
                                    String: "name" [13334,13340]
                                    STRING [13341,13356]
                                        String: "Print the ref" [13341,13356]
                                FIELD [13357,13389]
                                    String: "run" [13357,13362]
                                    STRING [13363,13389]
                                        String: "echo ${{ github.ref }}\n" [13363,13389]
                            OBJECT [13391,13676]
                                FIELD [13392,13414]
                                    String: "name" [13392,13398]
                                    STRING [13399,13414]
                                        String: "Configure Git" [13399,13414]
                                FIELD [13415,13520]
                                    String: "if" [13415,13419]
                                    STRING [13420,13520]
                                        String: "github.event_name == 'release' || (github.event_name == 'push' && github.ref == 'refs/heads/main')" [13420,13520]
                                FIELD [13521,13675]
                                    String: "run" [13521,13526]
                                    STRING [13527,13675]
                                        String: "git config --global user.email \"ai2service@allenai.org\"\ngit config --global user.name \"ai2service\"\ngit config --global push.default simple\n" [13527,13675]
                            OBJECT [13677,14144]
                                FIELD [13678,13697]
                                    String: "name" [13678,13684]
                                    STRING [13685,13697]
                                        String: "Stage docs" [13685,13697]
                                FIELD [13698,13803]
                                    String: "if" [13698,13702]
                                    STRING [13703,13803]
                                        String: "github.event_name == 'release' || (github.event_name == 'push' && github.ref == 'refs/heads/main')" [13703,13803]
                                FIELD [13804,14143]
                                    String: "run" [13804,13809]
                                    STRING [13810,14143]
                                        String: "echo \"Staging docs to $DOCS_FOLDER\"\n\n# Checkout allennlp-docs to /allennlp-docs\ngit clone git@github.com:allenai/allennlp-docs.git ~/allennlp-docs\n\n# Copy the generated docs to the checked out docs repo\nrm -rf ~/allennlp-docs/$DOCS_FOLDER/\nmkdir -p ~/allennlp-docs/$DOCS_FOLDER\ncp -r site/* ~/allennlp-docs/$DOCS_FOLDER\n" [13810,14143]
                            OBJECT [14145,15043]
                                FIELD [14146,14171]
                                    String: "name" [14146,14152]
                                    STRING [14153,14171]
                                        String: "Update shortcuts" [14153,14171]
                                FIELD [14172,14209]
                                    String: "if" [14172,14176]
                                    STRING [14177,14209]
                                        String: "github.event_name == 'release'" [14177,14209]
                                FIELD [14210,15042]
                                    String: "run" [14210,14215]
                                    STRING [14216,15042]
                                        String: "# Fail immediately if any step fails.\nset -e\nconda activate ./.venv\n\nLATEST=$(./scripts/get_version.py latest)\nSTABLE=$(./scripts/get_version.py stable)\n\ncd ~/allennlp-docs/\n\necho \"Updating latest/index.html to point to $LATEST\"\nmkdir -p latest\ncat >latest/index.html << EOL\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"Refresh\" content=\"0; url=/${LATEST}/\" />\n  </head>\n  <body>\n    <p>Please follow <a href=\"/${LATEST}/\">this link</a>.</p>\n  </body>\n</html>\nEOL\n\necho \"Updating stable/index.html to point to $STABLE\"\nmkdir -p stable\ncat >stable/index.html << EOL\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"Refresh\" content=\"0; url=/${STABLE}/\" />\n  </head>\n  <body>\n    <p>Please follow <a href=\"/${STABLE}/\">this link</a>.</p>\n  </body>\n</html>\nEOL\n" [14216,15042]
                            OBJECT [15044,15302]
                                FIELD [15045,15065]
                                    String: "name" [15045,15051]
                                    STRING [15052,15065]
                                        String: "Deploy docs" [15052,15065]
                                FIELD [15066,15171]
                                    String: "if" [15066,15070]
                                    STRING [15071,15171]
                                        String: "github.event_name == 'release' || (github.event_name == 'push' && github.ref == 'refs/heads/main')" [15071,15171]
                                FIELD [15172,15301]
                                    String: "run" [15172,15177]
                                    STRING [15178,15301]
                                        String: "# And push them up to GitHub\ncd ~/allennlp-docs/\ngit add -A\ngit commit -m \"automated update of the docs\"\ngit push\n" [15178,15301]
                            OBJECT [15303,15645]
                                FIELD [15304,15341]
                                    String: "name" [15304,15310]
                                    STRING [15311,15341]
                                        String: "Re-write docs commit history" [15311,15341]
                                FIELD [15342,15379]
                                    String: "if" [15342,15346]
                                    STRING [15347,15379]
                                        String: "github.event_name == 'release'" [15347,15379]
                                FIELD [15380,15644]
                                    String: "run" [15380,15385]
                                    STRING [15386,15644]
                                        String: "cd ~/allennlp-docs/\ngit checkout --orphan latest_branch\ngit add -A\ngit commit -m \"Re-write commit history\"\ngit branch -D master  # remove old master branch\ngit branch -m master  # rename clean new branch to master branch\ngit push -f origin master\n" [15386,15644]
                            OBJECT [15646,15744]
                                FIELD [15647,15664]
                                    String: "name" [15647,15653]
                                    STRING [15654,15664]
                                        String: "Clean up" [15654,15664]
                                FIELD [15665,15680]
                                    String: "if" [15665,15669]
                                    STRING [15670,15680]
                                        String: "always()" [15670,15680]
                                FIELD [15681,15743]
                                    String: "run" [15681,15686]
                                    STRING [15687,15743]
                                        String: "conda activate ./.venv\npip uninstall --yes allennlp\n" [15687,15743]
            FIELD [15747,16482]
                String: "publish" [15747,15756]
                OBJECT [15757,16482]
                    FIELD [15758,15771]
                        String: "name" [15758,15764]
                        STRING [15765,15771]
                            String: "PyPI" [15765,15771]
                    FIELD [15772,15792]
                        String: "timeout-minutes" [15772,15789]
                        NUMBER [15790,15792]
                            Number: 10 [15790,15792]
                    FIELD [15793,15866]
                        String: "needs" [15793,15800]
                        ARRAY [15801,15866]
                            STRING [15802,15809]
                                String: "style" [15802,15809]
                            STRING [15810,15818]
                                String: "checks" [15810,15818]
                            STRING [15819,15834]
                                String: "build_package" [15819,15834]
                            STRING [15835,15849]
                                String: "test_package" [15835,15849]
                            STRING [15850,15858]
                                String: "docker" [15850,15858]
                            STRING [15859,15865]
                                String: "docs" [15859,15865]
                    FIELD [15867,15984]
                        String: "if" [15867,15871]
                        STRING [15872,15984]
                            String: "github.repository == 'allenai/allennlp' && (github.event_name == 'release' || github.event_name == 'schedule')" [15872,15984]
                    FIELD [15985,16010]
                        String: "runs-on" [15985,15994]
                        STRING [15995,16010]
                            String: "ubuntu-latest" [15995,16010]
                    FIELD [16011,16481]
                        String: "steps" [16011,16018]
                        ARRAY [16019,16481]
                            OBJECT [16020,16050]
                                FIELD [16021,16049]
                                    String: "uses" [16021,16027]
                                    STRING [16028,16049]
                                        String: "actions/checkout@v2" [16028,16049]
                            OBJECT [16051,16169]
                                FIELD [16052,16073]
                                    String: "name" [16052,16058]
                                    STRING [16059,16073]
                                        String: "Setup Python" [16059,16073]
                                FIELD [16074,16106]
                                    String: "uses" [16074,16080]
                                    STRING [16081,16106]
                                        String: "actions/setup-python@v2" [16081,16106]
                                FIELD [16107,16168]
                                    String: "with" [16107,16113]
                                    OBJECT [16114,16168]
                                        FIELD [16115,16167]
                                            String: "python-version" [16115,16131]
                                            STRING [16132,16167]
                                                String: "${{ env.DEFAULT_PYTHON_VERSION }}" [16132,16167]
                            OBJECT [16170,16260]
                                FIELD [16171,16200]
                                    String: "name" [16171,16177]
                                    STRING [16178,16200]
                                        String: "Install requirements" [16178,16200]
                                FIELD [16201,16259]
                                    String: "run" [16201,16206]
                                    STRING [16207,16259]
                                        String: "pip install --upgrade pip setuptools wheel twine\n" [16207,16259]
                            OBJECT [16261,16376]
                                FIELD [16262,16292]
                                    String: "name" [16262,16268]
                                    STRING [16269,16292]
                                        String: "Download core package" [16269,16292]
                                FIELD [16293,16330]
                                    String: "uses" [16293,16299]
                                    STRING [16300,16330]
                                        String: "actions/download-artifact@v1" [16300,16330]
                                FIELD [16331,16375]
                                    String: "with" [16331,16337]
                                    OBJECT [16338,16375]
                                        FIELD [16339,16360]
                                            String: "name" [16339,16345]
                                            STRING [16346,16360]
                                                String: "core-package" [16346,16360]
                                        FIELD [16361,16374]
                                            String: "path" [16361,16367]
                                            STRING [16368,16374]
                                                String: "dist" [16368,16374]
                            OBJECT [16377,16480]
                                FIELD [16378,16407]
                                    String: "name" [16378,16384]
                                    STRING [16385,16407]
                                        String: "Publish core package" [16385,16407]
                                FIELD [16408,16479]
                                    String: "run" [16408,16413]
                                    STRING [16414,16479]
                                        String: "twine upload -u allennlp -p ${{ secrets.PYPI_PASSWORD }} dist/*" [16414,16479]