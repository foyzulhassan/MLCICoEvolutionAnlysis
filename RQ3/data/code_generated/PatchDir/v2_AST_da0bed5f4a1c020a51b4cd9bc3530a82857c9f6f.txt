OBJECT [0,9332]
    FIELD [1,35]
        String: "name" [1,7]
        STRING [8,35]
            String: "Self-hosted runner (push)" [8,35]
    FIELD [36,184]
        String: "on" [36,40]
        OBJECT [41,184]
            FIELD [42,156]
                String: "push" [42,48]
                OBJECT [49,156]
                    FIELD [50,86]
                        String: "branches" [50,60]
                        ARRAY [61,86]
                            STRING [62,71]
                                String: "push-ci" [62,71]
                            STRING [72,78]
                                String: "ci_*" [72,78]
                            STRING [79,85]
                                String: "ci-*" [79,85]
                    FIELD [87,155]
                        String: "paths" [87,94]
                        ARRAY [95,155]
                            STRING [96,104]
                                String: "src/**" [96,104]
                            STRING [105,115]
                                String: "tests/**" [105,115]
                            STRING [116,128]
                                String: ".github/**" [116,128]
                            STRING [129,143]
                                String: "templates/**" [129,143]
                            STRING [144,154]
                                String: "utils/**" [144,154]
            FIELD [157,183]
                String: "repository_dispatch" [157,178]
                NULL [179,183]
    FIELD [185,360]
        String: "env" [185,190]
        OBJECT [191,360]
            FIELD [192,214]
                String: "HF_HOME" [192,201]
                STRING [202,214]
                    String: "/mnt/cache" [202,214]
            FIELD [215,240]
                String: "TRANSFORMERS_IS_CI" [215,235]
                TRUE [236,240]
            FIELD [241,260]
                String: "OMP_NUM_THREADS" [241,258]
                NUMBER [259,260]
                    Number: 8 [259,260]
            FIELD [261,280]
                String: "MKL_NUM_THREADS" [261,278]
                NUMBER [279,280]
                    Number: 8 [279,280]
            FIELD [281,300]
                String: "PYTEST_TIMEOUT" [281,297]
                NUMBER [298,300]
                    Number: 60 [298,300]
            FIELD [301,333]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [301,328]
                TRUE [329,333]
            FIELD [334,359]
                String: "RUN_PT_TF_CROSS_TESTS" [334,357]
                NUMBER [358,359]
                    Number: 1 [358,359]
    FIELD [361,9331]
        String: "jobs" [361,367]
        OBJECT [368,9331]
            FIELD [369,1649]
                String: "setup" [369,376]
                OBJECT [377,1649]
                    FIELD [378,392]
                        String: "name" [378,384]
                        STRING [385,392]
                            String: "Setup" [385,392]
                    FIELD [393,418]
                        String: "runs-on" [393,402]
                        STRING [403,418]
                            String: "ubuntu-latest" [403,418]
                    FIELD [419,534]
                        String: "outputs" [419,428]
                        OBJECT [429,534]
                            FIELD [430,479]
                                String: "matrix" [430,438]
                                STRING [439,479]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [439,479]
                            FIELD [480,533]
                                String: "test_map" [480,490]
                                STRING [491,533]
                                    String: "${{ steps.set-matrix.outputs.test_map }}" [491,533]
                    FIELD [535,1648]
                        String: "steps" [535,542]
                        ARRAY [543,1648]
                            OBJECT [544,630]
                                FIELD [545,575]
                                    String: "name" [545,551]
                                    STRING [552,575]
                                        String: "Checkout transformers" [552,575]
                                FIELD [576,604]
                                    String: "uses" [576,582]
                                    STRING [583,604]
                                        String: "actions/checkout@v2" [583,604]
                                FIELD [605,629]
                                    String: "with" [605,611]
                                    OBJECT [612,629]
                                        FIELD [613,628]
                                            String: "fetch-depth" [613,626]
                                            NUMBER [627,628]
                                                Number: 2 [627,628]
                            OBJECT [631,733]
                                FIELD [632,648]
                                    String: "name" [632,638]
                                    STRING [639,648]
                                        String: "Cleanup" [639,648]
                                FIELD [649,732]
                                    String: "run" [649,654]
                                    STRING [655,732]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [655,732]
                            OBJECT [734,892]
                                FIELD [735,766]
                                    String: "name" [735,741]
                                    STRING [742,766]
                                        String: "Fetch the tests to run" [742,766]
                                FIELD [767,891]
                                    String: "run" [767,772]
                                    STRING [773,891]
                                        String: "pip install --upgrade git-python\npython utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [773,891]
                            OBJECT [893,1021]
                                FIELD [894,923]
                                    String: "name" [894,900]
                                    STRING [901,923]
                                        String: "Report fetched tests" [901,923]
                                FIELD [924,959]
                                    String: "uses" [924,930]
                                    STRING [931,959]
                                        String: "actions/upload-artifact@v2" [931,959]
                                FIELD [960,1020]
                                    String: "with" [960,966]
                                    OBJECT [967,1020]
                                        FIELD [968,989]
                                            String: "name" [968,974]
                                            STRING [975,989]
                                                String: "test_fetched" [975,989]
                                        FIELD [990,1019]
                                            String: "path" [990,996]
                                            STRING [997,1019]
                                                String: "test_preparation.txt" [997,1019]
                            OBJECT [1022,1647]
                                FIELD [1023,1040]
                                    String: "id" [1023,1027]
                                    STRING [1028,1040]
                                        String: "set-matrix" [1028,1040]
                                FIELD [1041,1076]
                                    String: "name" [1041,1047]
                                    STRING [1048,1076]
                                        String: "Organize tests into models" [1048,1076]
                                FIELD [1077,1646]
                                    String: "run" [1077,1082]
                                    STRING [1083,1646]
                                        String: "if [ -f test_map.json ]; then\n    keys=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); d = list(test_map.keys()); print(d)')\n    test_map=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); print(test_map)')\nelse\n    keys=$(python3 -c 'keys = [\"dummy\"]; print(keys)')\n    test_map=$(python3 -c 'test_map = {\"dummy\": []}; print(test_map)')\nfi\necho $keys\necho $test_map\necho \"::set-output name=matrix::$keys\"\necho \"::set-output name=test_map::$test_map\"\n" [1083,1646]
            FIELD [1650,3506]
                String: "run_tests_single_gpu" [1650,1672]
                OBJECT [1673,3506]
                    FIELD [1674,1694]
                        String: "name" [1674,1680]
                        STRING [1681,1694]
                            String: "Model tests" [1681,1694]
                    FIELD [1695,1710]
                        String: "needs" [1695,1702]
                        STRING [1703,1710]
                            String: "setup" [1703,1710]
                    FIELD [1711,1781]
                        String: "if" [1711,1715]
                        STRING [1716,1781]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [1716,1781]
                    FIELD [1782,1909]
                        String: "strategy" [1782,1792]
                        OBJECT [1793,1909]
                            FIELD [1794,1811]
                                String: "fail-fast" [1794,1805]
                                FALSE [1806,1811]
                            FIELD [1812,1908]
                                String: "matrix" [1812,1820]
                                OBJECT [1821,1908]
                                    FIELD [1822,1877]
                                        String: "folders" [1822,1831]
                                        STRING [1832,1877]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [1832,1877]
                                    FIELD [1878,1907]
                                        String: "machine_type" [1878,1892]
                                        ARRAY [1893,1907]
                                            STRING [1894,1906]
                                                String: "single-gpu" [1894,1906]
                    FIELD [1910,1977]
                        String: "runs-on" [1910,1919]
                        ARRAY [1920,1977]
                            STRING [1921,1934]
                                String: "self-hosted" [1921,1934]
                            STRING [1935,1947]
                                String: "docker-gpu" [1935,1947]
                            STRING [1948,1976]
                                String: "${{ matrix.machine_type }}" [1948,1976]
                    FIELD [1978,2138]
                        String: "container" [1978,1989]
                        OBJECT [1990,2138]
                            FIELD [1991,2040]
                                String: "image" [1991,1998]
                                STRING [1999,2040]
                                    String: "huggingface/transformers-all-latest-gpu" [1999,2040]
                            FIELD [2041,2137]
                                String: "options" [2041,2050]
                                STRING [2051,2137]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [2051,2137]
                    FIELD [2139,3505]
                        String: "steps" [2139,2146]
                        ARRAY [2147,3505]
                            OBJECT [2148,2494]
                                FIELD [2149,2191]
                                    String: "name" [2149,2155]
                                    STRING [2156,2191]
                                        String: "Echo folder ${{ matrix.folders }}" [2156,2191]
                                FIELD [2192,2206]
                                    String: "shell" [2192,2199]
                                    STRING [2200,2206]
                                        String: "bash" [2200,2206]
                                FIELD [2207,2493]
                                    String: "run" [2207,2212]
                                    STRING [2213,2493]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [2213,2493]
                            OBJECT [2495,2606]
                                FIELD [2496,2517]
                                    String: "name" [2496,2502]
                                    STRING [2503,2517]
                                        String: "Update clone" [2503,2517]
                                FIELD [2518,2553]
                                    String: "working-directory" [2518,2537]
                                    STRING [2538,2553]
                                        String: "/transformers" [2538,2553]
                                FIELD [2554,2605]
                                    String: "run" [2554,2559]
                                    STRING [2560,2605]
                                        String: "git fetch && git checkout ${{ github.sha }}" [2560,2605]
                            OBJECT [2607,2649]
                                FIELD [2608,2627]
                                    String: "name" [2608,2614]
                                    STRING [2615,2627]
                                        String: "NVIDIA-SMI" [2615,2627]
                                FIELD [2628,2648]
                                    String: "run" [2628,2633]
                                    STRING [2634,2648]
                                        String: "nvidia-smi\n" [2634,2648]
                            OBJECT [2650,2745]
                                FIELD [2651,2671]
                                    String: "name" [2651,2657]
                                    STRING [2658,2671]
                                        String: "Environment" [2658,2671]
                                FIELD [2672,2707]
                                    String: "working-directory" [2672,2691]
                                    STRING [2692,2707]
                                        String: "/transformers" [2692,2707]
                                FIELD [2708,2744]
                                    String: "run" [2708,2713]
                                    STRING [2714,2744]
                                        String: "python3 utils/print_env.py\n" [2714,2744]
                            OBJECT [2746,3019]
                                FIELD [2747,2794]
                                    String: "name" [2747,2753]
                                    STRING [2754,2794]
                                        String: "Run all non-slow selected tests on GPU" [2754,2794]
                                FIELD [2795,2830]
                                    String: "working-directory" [2795,2814]
                                    STRING [2815,2830]
                                        String: "/transformers" [2815,2830]
                                FIELD [2831,3018]
                                    String: "run" [2831,2836]
                                    STRING [2837,3018]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [2837,3018]
                            OBJECT [3020,3213]
                                FIELD [3021,3051]
                                    String: "name" [3021,3027]
                                    STRING [3028,3051]
                                        String: "Failure short reports" [3028,3051]
                                FIELD [3052,3075]
                                    String: "if" [3052,3056]
                                    STRING [3057,3075]
                                        String: "${{ failure() }}" [3057,3075]
                                FIELD [3076,3100]
                                    String: "continue-on-error" [3076,3095]
                                    TRUE [3096,3100]
                                FIELD [3101,3212]
                                    String: "run" [3101,3106]
                                    STRING [3107,3212]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [3107,3212]
                            OBJECT [3214,3504]
                                FIELD [3215,3252]
                                    String: "name" [3215,3221]
                                    STRING [3222,3252]
                                        String: "Test suite reports artifacts" [3222,3252]
                                FIELD [3253,3275]
                                    String: "if" [3253,3257]
                                    STRING [3258,3275]
                                        String: "${{ always() }}" [3258,3275]
                                FIELD [3276,3311]
                                    String: "uses" [3276,3282]
                                    STRING [3283,3311]
                                        String: "actions/upload-artifact@v2" [3283,3311]
                                FIELD [3312,3503]
                                    String: "with" [3312,3318]
                                    OBJECT [3319,3503]
                                        FIELD [3320,3412]
                                            String: "name" [3320,3326]
                                            STRING [3327,3412]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [3327,3412]
                                        FIELD [3413,3502]
                                            String: "path" [3413,3419]
                                            STRING [3420,3502]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [3420,3502]
            FIELD [3507,5399]
                String: "run_tests_multi_gpu" [3507,3528]
                OBJECT [3529,5399]
                    FIELD [3530,3550]
                        String: "name" [3530,3536]
                        STRING [3537,3550]
                            String: "Model tests" [3537,3550]
                    FIELD [3551,3566]
                        String: "needs" [3551,3558]
                        STRING [3559,3566]
                            String: "setup" [3559,3566]
                    FIELD [3567,3637]
                        String: "if" [3567,3571]
                        STRING [3572,3637]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [3572,3637]
                    FIELD [3638,3764]
                        String: "strategy" [3638,3648]
                        OBJECT [3649,3764]
                            FIELD [3650,3667]
                                String: "fail-fast" [3650,3661]
                                FALSE [3662,3667]
                            FIELD [3668,3763]
                                String: "matrix" [3668,3676]
                                OBJECT [3677,3763]
                                    FIELD [3678,3733]
                                        String: "folders" [3678,3687]
                                        STRING [3688,3733]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [3688,3733]
                                    FIELD [3734,3762]
                                        String: "machine_type" [3734,3748]
                                        ARRAY [3749,3762]
                                            STRING [3750,3761]
                                                String: "multi-gpu" [3750,3761]
                    FIELD [3765,3832]
                        String: "runs-on" [3765,3774]
                        ARRAY [3775,3832]
                            STRING [3776,3789]
                                String: "self-hosted" [3776,3789]
                            STRING [3790,3802]
                                String: "docker-gpu" [3790,3802]
                            STRING [3803,3831]
                                String: "${{ matrix.machine_type }}" [3803,3831]
                    FIELD [3833,3995]
                        String: "container" [3833,3844]
                        OBJECT [3845,3995]
                            FIELD [3846,3895]
                                String: "image" [3846,3853]
                                STRING [3854,3895]
                                    String: "huggingface/transformers-all-latest-gpu" [3854,3895]
                            FIELD [3896,3994]
                                String: "options" [3896,3905]
                                STRING [3906,3994]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [3906,3994]
                    FIELD [3996,5398]
                        String: "steps" [3996,4003]
                        ARRAY [4004,5398]
                            OBJECT [4005,4351]
                                FIELD [4006,4048]
                                    String: "name" [4006,4012]
                                    STRING [4013,4048]
                                        String: "Echo folder ${{ matrix.folders }}" [4013,4048]
                                FIELD [4049,4063]
                                    String: "shell" [4049,4056]
                                    STRING [4057,4063]
                                        String: "bash" [4057,4063]
                                FIELD [4064,4350]
                                    String: "run" [4064,4069]
                                    STRING [4070,4350]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [4070,4350]
                            OBJECT [4352,4463]
                                FIELD [4353,4374]
                                    String: "name" [4353,4359]
                                    STRING [4360,4374]
                                        String: "Update clone" [4360,4374]
                                FIELD [4375,4410]
                                    String: "working-directory" [4375,4394]
                                    STRING [4395,4410]
                                        String: "/transformers" [4395,4410]
                                FIELD [4411,4462]
                                    String: "run" [4411,4416]
                                    STRING [4417,4462]
                                        String: "git fetch && git checkout ${{ github.sha }}" [4417,4462]
                            OBJECT [4464,4506]
                                FIELD [4465,4484]
                                    String: "name" [4465,4471]
                                    STRING [4472,4484]
                                        String: "NVIDIA-SMI" [4472,4484]
                                FIELD [4485,4505]
                                    String: "run" [4485,4490]
                                    STRING [4491,4505]
                                        String: "nvidia-smi\n" [4491,4505]
                            OBJECT [4507,4602]
                                FIELD [4508,4528]
                                    String: "name" [4508,4514]
                                    STRING [4515,4528]
                                        String: "Environment" [4515,4528]
                                FIELD [4529,4564]
                                    String: "working-directory" [4529,4548]
                                    STRING [4549,4564]
                                        String: "/transformers" [4549,4564]
                                FIELD [4565,4601]
                                    String: "run" [4565,4570]
                                    STRING [4571,4601]
                                        String: "python3 utils/print_env.py\n" [4571,4601]
                            OBJECT [4603,4912]
                                FIELD [4604,4651]
                                    String: "name" [4604,4610]
                                    STRING [4611,4651]
                                        String: "Run all non-slow selected tests on GPU" [4611,4651]
                                FIELD [4652,4687]
                                    String: "env" [4652,4657]
                                    OBJECT [4658,4687]
                                        FIELD [4659,4686]
                                            String: "MKL_SERVICE_FORCE_INTEL" [4659,4684]
                                            NUMBER [4685,4686]
                                                Number: 1 [4685,4686]
                                FIELD [4688,4723]
                                    String: "working-directory" [4688,4707]
                                    STRING [4708,4723]
                                        String: "/transformers" [4708,4723]
                                FIELD [4724,4911]
                                    String: "run" [4724,4729]
                                    STRING [4730,4911]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [4730,4911]
                            OBJECT [4913,5106]
                                FIELD [4914,4944]
                                    String: "name" [4914,4920]
                                    STRING [4921,4944]
                                        String: "Failure short reports" [4921,4944]
                                FIELD [4945,4968]
                                    String: "if" [4945,4949]
                                    STRING [4950,4968]
                                        String: "${{ failure() }}" [4950,4968]
                                FIELD [4969,4993]
                                    String: "continue-on-error" [4969,4988]
                                    TRUE [4989,4993]
                                FIELD [4994,5105]
                                    String: "run" [4994,4999]
                                    STRING [5000,5105]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [5000,5105]
                            OBJECT [5107,5397]
                                FIELD [5108,5145]
                                    String: "name" [5108,5114]
                                    STRING [5115,5145]
                                        String: "Test suite reports artifacts" [5115,5145]
                                FIELD [5146,5168]
                                    String: "if" [5146,5150]
                                    STRING [5151,5168]
                                        String: "${{ always() }}" [5151,5168]
                                FIELD [5169,5204]
                                    String: "uses" [5169,5175]
                                    STRING [5176,5204]
                                        String: "actions/upload-artifact@v2" [5176,5204]
                                FIELD [5205,5396]
                                    String: "with" [5205,5211]
                                    OBJECT [5212,5396]
                                        FIELD [5213,5305]
                                            String: "name" [5213,5219]
                                            STRING [5220,5305]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [5220,5305]
                                        FIELD [5306,5395]
                                            String: "path" [5306,5312]
                                            STRING [5313,5395]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [5313,5395]
            FIELD [5400,6831]
                String: "run_tests_torch_cuda_extensions_single_gpu" [5400,5444]
                OBJECT [5445,6831]
                    FIELD [5446,5481]
                        String: "name" [5446,5452]
                        STRING [5453,5481]
                            String: "Torch CUDA extension tests" [5453,5481]
                    FIELD [5482,5497]
                        String: "needs" [5482,5489]
                        STRING [5490,5497]
                            String: "setup" [5490,5497]
                    FIELD [5498,5626]
                        String: "if" [5498,5502]
                        STRING [5503,5626]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [5503,5626]
                    FIELD [5627,5698]
                        String: "strategy" [5627,5637]
                        OBJECT [5638,5698]
                            FIELD [5639,5656]
                                String: "fail-fast" [5639,5650]
                                FALSE [5651,5656]
                            FIELD [5657,5697]
                                String: "matrix" [5657,5665]
                                OBJECT [5666,5697]
                                    FIELD [5667,5696]
                                        String: "machine_type" [5667,5681]
                                        ARRAY [5682,5696]
                                            STRING [5683,5695]
                                                String: "single-gpu" [5683,5695]
                    FIELD [5699,5766]
                        String: "runs-on" [5699,5708]
                        ARRAY [5709,5766]
                            STRING [5710,5723]
                                String: "self-hosted" [5710,5723]
                            STRING [5724,5736]
                                String: "docker-gpu" [5724,5736]
                            STRING [5737,5765]
                                String: "${{ matrix.machine_type }}" [5737,5765]
                    FIELD [5767,5941]
                        String: "container" [5767,5778]
                        OBJECT [5779,5941]
                            FIELD [5780,5843]
                                String: "image" [5780,5787]
                                STRING [5788,5843]
                                    String: "huggingface/transformers-pytorch-deepspeed-latest-gpu" [5788,5843]
                            FIELD [5844,5940]
                                String: "options" [5844,5853]
                                STRING [5854,5940]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [5854,5940]
                    FIELD [5942,6830]
                        String: "steps" [5942,5949]
                        ARRAY [5950,6830]
                            OBJECT [5951,6072]
                                FIELD [5952,5973]
                                    String: "name" [5952,5958]
                                    STRING [5959,5973]
                                        String: "Update clone" [5959,5973]
                                FIELD [5974,6019]
                                    String: "working-directory" [5974,5993]
                                    STRING [5994,6019]
                                        String: "/workspace/transformers" [5994,6019]
                                FIELD [6020,6071]
                                    String: "run" [6020,6025]
                                    STRING [6026,6071]
                                        String: "git fetch && git checkout ${{ github.sha }}" [6026,6071]
                            OBJECT [6073,6115]
                                FIELD [6074,6093]
                                    String: "name" [6074,6080]
                                    STRING [6081,6093]
                                        String: "NVIDIA-SMI" [6081,6093]
                                FIELD [6094,6114]
                                    String: "run" [6094,6099]
                                    STRING [6100,6114]
                                        String: "nvidia-smi\n" [6100,6114]
                            OBJECT [6116,6174]
                                FIELD [6117,6137]
                                    String: "name" [6117,6123]
                                    STRING [6124,6137]
                                        String: "Environment" [6124,6137]
                                FIELD [6138,6173]
                                    String: "run" [6138,6143]
                                    STRING [6144,6173]
                                        String: "python utils/print_env.py\n" [6144,6173]
                            OBJECT [6175,6380]
                                FIELD [6176,6223]
                                    String: "name" [6176,6182]
                                    STRING [6183,6223]
                                        String: "Run all non-slow selected tests on GPU" [6183,6223]
                                FIELD [6224,6379]
                                    String: "run" [6224,6229]
                                    STRING [6230,6379]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [6230,6379]
                            OBJECT [6381,6560]
                                FIELD [6382,6412]
                                    String: "name" [6382,6388]
                                    STRING [6389,6412]
                                        String: "Failure short reports" [6389,6412]
                                FIELD [6413,6436]
                                    String: "if" [6413,6417]
                                    STRING [6418,6436]
                                        String: "${{ failure() }}" [6418,6436]
                                FIELD [6437,6461]
                                    String: "continue-on-error" [6437,6456]
                                    TRUE [6457,6461]
                                FIELD [6462,6559]
                                    String: "run" [6462,6467]
                                    STRING [6468,6559]
                                        String: "cat reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [6468,6559]
                            OBJECT [6561,6829]
                                FIELD [6562,6599]
                                    String: "name" [6562,6568]
                                    STRING [6569,6599]
                                        String: "Test suite reports artifacts" [6569,6599]
                                FIELD [6600,6622]
                                    String: "if" [6600,6604]
                                    STRING [6605,6622]
                                        String: "${{ always() }}" [6605,6622]
                                FIELD [6623,6658]
                                    String: "uses" [6623,6629]
                                    STRING [6630,6658]
                                        String: "actions/upload-artifact@v2" [6630,6658]
                                FIELD [6659,6828]
                                    String: "with" [6659,6665]
                                    OBJECT [6666,6828]
                                        FIELD [6667,6751]
                                            String: "name" [6667,6673]
                                            STRING [6674,6751]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [6674,6751]
                                        FIELD [6752,6827]
                                            String: "path" [6752,6758]
                                            STRING [6759,6827]
                                                String: "reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [6759,6827]
            FIELD [6832,8403]
                String: "run_tests_torch_cuda_extensions_multi_gpu" [6832,6875]
                OBJECT [6876,8403]
                    FIELD [6877,6912]
                        String: "name" [6877,6883]
                        STRING [6884,6912]
                            String: "Torch CUDA extension tests" [6884,6912]
                    FIELD [6913,6928]
                        String: "needs" [6913,6920]
                        STRING [6921,6928]
                            String: "setup" [6921,6928]
                    FIELD [6929,7057]
                        String: "if" [6929,6933]
                        STRING [6934,7057]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [6934,7057]
                    FIELD [7058,7128]
                        String: "strategy" [7058,7068]
                        OBJECT [7069,7128]
                            FIELD [7070,7087]
                                String: "fail-fast" [7070,7081]
                                FALSE [7082,7087]
                            FIELD [7088,7127]
                                String: "matrix" [7088,7096]
                                OBJECT [7097,7127]
                                    FIELD [7098,7126]
                                        String: "machine_type" [7098,7112]
                                        ARRAY [7113,7126]
                                            STRING [7114,7125]
                                                String: "multi-gpu" [7114,7125]
                    FIELD [7129,7196]
                        String: "runs-on" [7129,7138]
                        ARRAY [7139,7196]
                            STRING [7140,7153]
                                String: "self-hosted" [7140,7153]
                            STRING [7154,7166]
                                String: "docker-gpu" [7154,7166]
                            STRING [7167,7195]
                                String: "${{ matrix.machine_type }}" [7167,7195]
                    FIELD [7197,7373]
                        String: "container" [7197,7208]
                        OBJECT [7209,7373]
                            FIELD [7210,7273]
                                String: "image" [7210,7217]
                                STRING [7218,7273]
                                    String: "huggingface/transformers-pytorch-deepspeed-latest-gpu" [7218,7273]
                            FIELD [7274,7372]
                                String: "options" [7274,7283]
                                STRING [7284,7372]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [7284,7372]
                    FIELD [7374,8402]
                        String: "steps" [7374,7381]
                        ARRAY [7382,8402]
                            OBJECT [7383,7504]
                                FIELD [7384,7405]
                                    String: "name" [7384,7390]
                                    STRING [7391,7405]
                                        String: "Update clone" [7391,7405]
                                FIELD [7406,7451]
                                    String: "working-directory" [7406,7425]
                                    STRING [7426,7451]
                                        String: "/workspace/transformers" [7426,7451]
                                FIELD [7452,7503]
                                    String: "run" [7452,7457]
                                    STRING [7458,7503]
                                        String: "git fetch && git checkout ${{ github.sha }}" [7458,7503]
                            OBJECT [7505,7547]
                                FIELD [7506,7525]
                                    String: "name" [7506,7512]
                                    STRING [7513,7525]
                                        String: "NVIDIA-SMI" [7513,7525]
                                FIELD [7526,7546]
                                    String: "run" [7526,7531]
                                    STRING [7532,7546]
                                        String: "nvidia-smi\n" [7532,7546]
                            OBJECT [7548,7652]
                                FIELD [7549,7569]
                                    String: "name" [7549,7555]
                                    STRING [7556,7569]
                                        String: "Environment" [7556,7569]
                                FIELD [7570,7615]
                                    String: "working-directory" [7570,7589]
                                    STRING [7590,7615]
                                        String: "/workspace/transformers" [7590,7615]
                                FIELD [7616,7651]
                                    String: "run" [7616,7621]
                                    STRING [7622,7651]
                                        String: "python utils/print_env.py\n" [7622,7651]
                            OBJECT [7653,7904]
                                FIELD [7654,7701]
                                    String: "name" [7654,7660]
                                    STRING [7661,7701]
                                        String: "Run all non-slow selected tests on GPU" [7661,7701]
                                FIELD [7702,7747]
                                    String: "working-directory" [7702,7721]
                                    STRING [7722,7747]
                                        String: "/workspace/transformers" [7722,7747]
                                FIELD [7748,7903]
                                    String: "run" [7748,7753]
                                    STRING [7754,7903]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [7754,7903]
                            OBJECT [7905,8108]
                                FIELD [7906,7936]
                                    String: "name" [7906,7912]
                                    STRING [7913,7936]
                                        String: "Failure short reports" [7913,7936]
                                FIELD [7937,7960]
                                    String: "if" [7937,7941]
                                    STRING [7942,7960]
                                        String: "${{ failure() }}" [7942,7960]
                                FIELD [7961,7985]
                                    String: "continue-on-error" [7961,7980]
                                    TRUE [7981,7985]
                                FIELD [7986,8107]
                                    String: "run" [7986,7991]
                                    STRING [7992,8107]
                                        String: "cat /workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [7992,8107]
                            OBJECT [8109,8401]
                                FIELD [8110,8147]
                                    String: "name" [8110,8116]
                                    STRING [8117,8147]
                                        String: "Test suite reports artifacts" [8117,8147]
                                FIELD [8148,8170]
                                    String: "if" [8148,8152]
                                    STRING [8153,8170]
                                        String: "${{ always() }}" [8153,8170]
                                FIELD [8171,8206]
                                    String: "uses" [8171,8177]
                                    STRING [8178,8206]
                                        String: "actions/upload-artifact@v2" [8178,8206]
                                FIELD [8207,8400]
                                    String: "with" [8207,8213]
                                    OBJECT [8214,8400]
                                        FIELD [8215,8299]
                                            String: "name" [8215,8221]
                                            STRING [8222,8299]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [8222,8299]
                                        FIELD [8300,8399]
                                            String: "path" [8300,8306]
                                            STRING [8307,8399]
                                                String: "/workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [8307,8399]
            FIELD [8404,9330]
                String: "send_results" [8404,8418]
                OBJECT [8419,9330]
                    FIELD [8420,8452]
                        String: "name" [8420,8426]
                        STRING [8427,8452]
                            String: "Send results to webhook" [8427,8452]
                    FIELD [8453,8478]
                        String: "runs-on" [8453,8462]
                        STRING [8463,8478]
                            String: "ubuntu-latest" [8463,8478]
                    FIELD [8479,8494]
                        String: "if" [8479,8483]
                        STRING [8484,8494]
                            String: "always()" [8484,8494]
                    FIELD [8495,8646]
                        String: "needs" [8495,8502]
                        ARRAY [8503,8646]
                            STRING [8504,8511]
                                String: "setup" [8504,8511]
                            STRING [8512,8534]
                                String: "run_tests_single_gpu" [8512,8534]
                            STRING [8535,8556]
                                String: "run_tests_multi_gpu" [8535,8556]
                            STRING [8557,8601]
                                String: "run_tests_torch_cuda_extensions_single_gpu" [8557,8601]
                            STRING [8602,8645]
                                String: "run_tests_torch_cuda_extensions_multi_gpu" [8602,8645]
                    FIELD [8647,9329]
                        String: "steps" [8647,8654]
                        ARRAY [8655,9329]
                            OBJECT [8656,8686]
                                FIELD [8657,8685]
                                    String: "uses" [8657,8663]
                                    STRING [8664,8685]
                                        String: "actions/checkout@v2" [8664,8685]
                            OBJECT [8687,8726]
                                FIELD [8688,8725]
                                    String: "uses" [8688,8694]
                                    STRING [8695,8725]
                                        String: "actions/download-artifact@v2" [8695,8725]
                            OBJECT [8727,9328]
                                FIELD [8728,8758]
                                    String: "name" [8728,8734]
                                    STRING [8735,8758]
                                        String: "Send message to Slack" [8735,8758]
                                FIELD [8759,9221]
                                    String: "env" [8759,8764]
                                    OBJECT [8765,9221]
                                        FIELD [8766,8822]
                                            String: "CI_SLACK_BOT_TOKEN" [8766,8786]
                                            STRING [8787,8822]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [8787,8822]
                                        FIELD [8823,8881]
                                            String: "CI_SLACK_CHANNEL_ID" [8823,8844]
                                            STRING [8845,8881]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [8845,8881]
                                        FIELD [8882,8952]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [8882,8909]
                                            STRING [8910,8952]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [8910,8952]
                                        FIELD [8953,9029]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [8953,8983]
                                            STRING [8984,9029]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [8984,9029]
                                        FIELD [9030,9095]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [9030,9058]
                                            STRING [9059,9095]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [9059,9095]
                                        FIELD [9096,9113]
                                            String: "CI_EVENT" [9096,9106]
                                            STRING [9107,9113]
                                                String: "push" [9107,9113]
                                        FIELD [9114,9166]
                                            String: "CI_TITLE" [9114,9124]
                                            STRING [9125,9166]
                                                String: "${{ github.event.head_commit.message }}" [9125,9166]
                                        FIELD [9167,9220]
                                            String: "CI_COMMIT_URL" [9167,9182]
                                            STRING [9183,9220]
                                                String: "${{ github.event.head_commit.url }}" [9183,9220]
                                FIELD [9222,9327]
                                    String: "run" [9222,9227]
                                    STRING [9228,9327]
                                        String: "pip install slack_sdk\npython utils/notification_service.py \"${{ needs.setup.outputs.matrix }}\"" [9228,9327]