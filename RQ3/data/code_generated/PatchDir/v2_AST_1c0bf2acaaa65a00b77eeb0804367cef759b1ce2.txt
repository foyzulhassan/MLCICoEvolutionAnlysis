OBJECT [0,4992]
    FIELD [1,31]
        String: "name" [1,7]
        STRING [8,31]
            String: "CD - Kubernetes - Dev" [8,31]
    FIELD [32,277]
        String: "on" [32,36]
        OBJECT [37,277]
            FIELD [38,73]
                String: "schedule" [38,48]
                ARRAY [49,73]
                    OBJECT [50,72]
                        FIELD [51,71]
                            String: "cron" [51,57]
                            STRING [58,71]
                                String: "0 */3 * * *" [58,71]
            FIELD [74,276]
                String: "workflow_dispatch" [74,93]
                OBJECT [94,276]
                    FIELD [95,275]
                        String: "inputs" [95,103]
                        OBJECT [104,275]
                            FIELD [105,190]
                                String: "check-cache" [105,118]
                                OBJECT [119,190]
                                    FIELD [120,136]
                                        String: "type" [120,126]
                                        STRING [127,136]
                                            String: "boolean" [127,136]
                                    FIELD [137,173]
                                        String: "description" [137,150]
                                        STRING [151,173]
                                            String: "Check workflow cache" [151,173]
                                    FIELD [174,189]
                                        String: "default" [174,183]
                                        FALSE [184,189]
                            FIELD [191,274]
                                String: "deploy-helm" [191,204]
                                OBJECT [205,274]
                                    FIELD [206,222]
                                        String: "type" [206,212]
                                        STRING [213,222]
                                            String: "boolean" [213,222]
                                    FIELD [223,257]
                                        String: "description" [223,236]
                                        STRING [237,257]
                                            String: "Deploy Helm Charts" [237,257]
                                    FIELD [258,273]
                                        String: "default" [258,267]
                                        FALSE [268,273]
    FIELD [278,4991]
        String: "jobs" [278,284]
        OBJECT [285,4991]
            FIELD [286,822]
                String: "check-last-run" [286,302]
                OBJECT [303,822]
                    FIELD [304,329]
                        String: "runs-on" [304,313]
                        STRING [314,329]
                            String: "ubuntu-latest" [314,329]
                    FIELD [330,394]
                        String: "outputs" [330,339]
                        OBJECT [340,394]
                            FIELD [341,393]
                                String: "same-commit" [341,354]
                                STRING [355,393]
                                    String: "${{ steps.cache.outputs.cache-hit }}" [355,393]
                    FIELD [395,821]
                        String: "steps" [395,402]
                        ARRAY [403,821]
                            OBJECT [404,651]
                                FIELD [405,435]
                                    String: "name" [405,411]
                                    STRING [412,435]
                                        String: "Check for new changes" [412,435]
                                FIELD [436,519]
                                    String: "if" [436,440]
                                    STRING [441,519]
                                        String: "github.event_name == 'schedule' || github.event.inputs.check-cache == 'true'" [441,519]
                                FIELD [520,532]
                                    String: "id" [520,524]
                                    STRING [525,532]
                                        String: "cache" [525,532]
                                FIELD [533,558]
                                    String: "uses" [533,539]
                                    STRING [540,558]
                                        String: "actions/cache@v3" [540,558]
                                FIELD [559,650]
                                    String: "with" [559,565]
                                    OBJECT [566,650]
                                        FIELD [567,596]
                                            String: "path" [567,573]
                                            STRING [574,596]
                                                String: "scripts/k8s_dev_hash" [574,596]
                                        FIELD [597,630]
                                            String: "key" [597,602]
                                            STRING [603,630]
                                                String: "k8s-dev-${{ github.sha }}" [603,630]
                                        FIELD [631,649]
                                            String: "lookup-only" [631,644]
                                            TRUE [645,649]
                            OBJECT [652,820]
                                FIELD [653,677]
                                    String: "name" [653,659]
                                    STRING [660,677]
                                        String: "Save Commit SHA" [660,677]
                                FIELD [678,761]
                                    String: "if" [678,682]
                                    STRING [683,761]
                                        String: "github.event_name == 'schedule' || github.event.inputs.check-cache == 'true'" [683,761]
                                FIELD [762,819]
                                    String: "run" [762,767]
                                    STRING [768,819]
                                        String: "echo \"${{ github.sha }}\" > scripts/k8s_dev_hash" [768,819]
            FIELD [823,4990]
                String: "deploy-syft-dev" [823,840]
                OBJECT [841,4990]
                    FIELD [842,866]
                        String: "needs" [842,849]
                        STRING [850,866]
                            String: "check-last-run" [850,866]
                    FIELD [867,924]
                        String: "if" [867,871]
                        STRING [872,924]
                            String: "needs.check-last-run.outputs.same-commit != 'true'" [872,924]
                    FIELD [925,950]
                        String: "runs-on" [925,934]
                        STRING [935,950]
                            String: "ubuntu-latest" [935,950]
                    FIELD [951,4989]
                        String: "steps" [951,958]
                        ARRAY [959,4989]
                            OBJECT [960,1041]
                                FIELD [961,998]
                                    String: "name" [961,967]
                                    STRING [968,998]
                                        String: "Permission to home directory" [968,998]
                                FIELD [999,1040]
                                    String: "run" [999,1004]
                                    STRING [1005,1040]
                                        String: "sudo chown -R $USER:$USER $HOME\n" [1005,1040]
                            OBJECT [1042,1072]
                                FIELD [1043,1071]
                                    String: "uses" [1043,1049]
                                    STRING [1050,1071]
                                        String: "actions/checkout@v4" [1050,1071]
                            OBJECT [1073,1267]
                                FIELD [1074,1102]
                                    String: "name" [1074,1080]
                                    STRING [1081,1102]
                                        String: "Checkout Infra Repo" [1081,1102]
                                FIELD [1103,1131]
                                    String: "uses" [1103,1109]
                                    STRING [1110,1131]
                                        String: "actions/checkout@v4" [1110,1131]
                                FIELD [1132,1266]
                                    String: "with" [1132,1138]
                                    OBJECT [1139,1266]
                                        FIELD [1140,1180]
                                            String: "repository" [1140,1152]
                                            STRING [1153,1180]
                                                String: "${{ secrets.INFRA_REPO }}" [1153,1180]
                                        FIELD [1181,1193]
                                            String: "ref" [1181,1186]
                                            STRING [1187,1193]
                                                String: "main" [1187,1193]
                                        FIELD [1194,1241]
                                            String: "token" [1194,1201]
                                            STRING [1202,1241]
                                                String: "${{ secrets.INFRA_BOT_COMMIT_TOKEN }}" [1202,1241]
                                        FIELD [1242,1265]
                                            String: "path" [1242,1248]
                                            STRING [1249,1265]
                                                String: "infrastructure" [1249,1265]
                            OBJECT [1268,1358]
                                FIELD [1269,1291]
                                    String: "name" [1269,1275]
                                    STRING [1276,1291]
                                        String: "Set up Python" [1276,1291]
                                FIELD [1292,1324]
                                    String: "uses" [1292,1298]
                                    STRING [1299,1324]
                                        String: "actions/setup-python@v3" [1299,1324]
                                FIELD [1325,1357]
                                    String: "with" [1325,1331]
                                    OBJECT [1332,1357]
                                        FIELD [1333,1356]
                                            String: "python-version" [1333,1349]
                                            STRING [1350,1356]
                                                String: "3.11" [1350,1356]
                            OBJECT [1359,1443]
                                FIELD [1360,1389]
                                    String: "name" [1360,1366]
                                    STRING [1367,1389]
                                        String: "Set up Docker Buildx" [1367,1389]
                                FIELD [1390,1403]
                                    String: "id" [1390,1394]
                                    STRING [1395,1403]
                                        String: "buildx" [1395,1403]
                                FIELD [1404,1442]
                                    String: "uses" [1404,1410]
                                    STRING [1411,1442]
                                        String: "docker/setup-buildx-action@v3" [1411,1442]
                            OBJECT [1444,1549]
                                FIELD [1445,1471]
                                    String: "name" [1445,1451]
                                    STRING [1452,1471]
                                        String: "Install Azure CLI" [1452,1471]
                                FIELD [1472,1548]
                                    String: "run" [1472,1477]
                                    STRING [1478,1548]
                                        String: "curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash\naz version\n" [1478,1548]
                            OBJECT [1550,1665]
                                FIELD [1551,1578]
                                    String: "name" [1551,1557]
                                    STRING [1558,1578]
                                        String: "Login to Azure CLI" [1558,1578]
                                FIELD [1579,1602]
                                    String: "uses" [1579,1585]
                                    STRING [1586,1602]
                                        String: "azure/login@v1" [1586,1602]
                                FIELD [1603,1664]
                                    String: "with" [1603,1609]
                                    OBJECT [1610,1664]
                                        FIELD [1611,1663]
                                            String: "creds" [1611,1618]
                                            STRING [1619,1663]
                                                String: "${{ secrets.AZURE_CREDENTIALS_GITHUB_CI }}" [1619,1663]
                            OBJECT [1666,1875]
                                FIELD [1667,1709]
                                    String: "name" [1667,1673]
                                    STRING [1674,1709]
                                        String: "Login to Azure Container Registry" [1674,1709]
                                FIELD [1710,1740]
                                    String: "uses" [1710,1716]
                                    STRING [1717,1740]
                                        String: "azure/docker-login@v1" [1717,1740]
                                FIELD [1741,1874]
                                    String: "with" [1741,1747]
                                    OBJECT [1748,1874]
                                        FIELD [1749,1791]
                                            String: "login-server" [1749,1763]
                                            STRING [1764,1791]
                                                String: "${{ secrets.ACR_SERVER }}" [1764,1791]
                                        FIELD [1792,1832]
                                            String: "username" [1792,1802]
                                            STRING [1803,1832]
                                                String: "${{ secrets.ACR_USERNAME }}" [1803,1832]
                                        FIELD [1833,1873]
                                            String: "password" [1833,1843]
                                            STRING [1844,1873]
                                                String: "${{ secrets.ACR_PASSWORD }}" [1844,1873]
                            OBJECT [1876,2018]
                                FIELD [1877,1910]
                                    String: "name" [1877,1883]
                                    STRING [1884,1910]
                                        String: "Set Grid package version" [1884,1910]
                                FIELD [1911,1922]
                                    String: "id" [1911,1915]
                                    STRING [1916,1922]
                                        String: "grid" [1916,1922]
                                FIELD [1923,1937]
                                    String: "shell" [1923,1930]
                                    STRING [1931,1937]
                                        String: "bash" [1931,1937]
                                FIELD [1938,2017]
                                    String: "run" [1938,1943]
                                    STRING [1944,2017]
                                        String: "echo \"GRID_VERSION=$(python packages/grid/VERSION)\" >> $GITHUB_OUTPUT" [1944,2017]
                            OBJECT [2019,2454]
                                FIELD [2020,2076]
                                    String: "name" [2020,2026]
                                    STRING [2027,2076]
                                        String: "Build and push `grid-backend` image to registry" [2027,2076]
                                FIELD [2077,2113]
                                    String: "uses" [2077,2083]
                                    STRING [2084,2113]
                                        String: "docker/build-push-action@v5" [2084,2113]
                                FIELD [2114,2453]
                                    String: "with" [2114,2120]
                                    OBJECT [2121,2453]
                                        FIELD [2122,2144]
                                            String: "context" [2122,2131]
                                            STRING [2132,2144]
                                                String: "./packages" [2132,2144]
                                        FIELD [2145,2196]
                                            String: "file" [2145,2151]
                                            STRING [2152,2196]
                                                String: "./packages/grid/backend/backend.dockerfile" [2152,2196]
                                        FIELD [2197,2208]
                                            String: "push" [2197,2203]
                                            TRUE [2204,2208]
                                        FIELD [2209,2227]
                                            String: "target" [2209,2217]
                                            STRING [2218,2227]
                                                String: "backend" [2218,2227]
                                        FIELD [2228,2452]
                                            String: "tags" [2228,2234]
                                            STRING [2235,2452]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-backend:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-backend:${{ steps.grid.outputs.GRID_VERSION }}\n" [2235,2452]
                            OBJECT [2455,2922]
                                FIELD [2456,2513]
                                    String: "name" [2456,2462]
                                    STRING [2463,2513]
                                        String: "Build and push `grid-frontend` image to registry" [2463,2513]
                                FIELD [2514,2550]
                                    String: "uses" [2514,2520]
                                    STRING [2521,2550]
                                        String: "docker/build-push-action@v5" [2521,2550]
                                FIELD [2551,2921]
                                    String: "with" [2551,2557]
                                    OBJECT [2558,2921]
                                        FIELD [2559,2595]
                                            String: "context" [2559,2568]
                                            STRING [2569,2595]
                                                String: "./packages/grid/frontend" [2569,2595]
                                        FIELD [2596,2649]
                                            String: "file" [2596,2602]
                                            STRING [2603,2649]
                                                String: "./packages/grid/frontend/frontend.dockerfile" [2603,2649]
                                        FIELD [2650,2661]
                                            String: "push" [2650,2656]
                                            TRUE [2657,2661]
                                        FIELD [2662,2889]
                                            String: "tags" [2662,2668]
                                            STRING [2669,2889]
                                                String: "${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev\n${{ secrets.ACR_SERVER }}/openmined/grid-frontend:dev-${{ github.sha }}\n${{ secrets.ACR_SERVER }}/openmined/grid-frontend:${{ steps.grid.outputs.GRID_VERSION }}\n" [2669,2889]
                                        FIELD [2890,2920]
                                            String: "target" [2890,2898]
                                            STRING [2899,2920]
                                                String: "grid-ui-development" [2899,2920]
                            OBJECT [2923,3910]
                                FIELD [2924,2965]
                                    String: "name" [2924,2930]
                                    STRING [2931,2965]
                                        String: "Build Helm Chart & Copy to infra" [2931,2965]
                                FIELD [2966,3048]
                                    String: "if" [2966,2970]
                                    STRING [2971,3048]
                                        String: "github.ref == 'refs/heads/dev' || github.event.inputs.deploy-helm == 'true'" [2971,3048]
                                FIELD [3049,3063]
                                    String: "shell" [3049,3056]
                                    STRING [3057,3063]
                                        String: "bash" [3057,3063]
                                FIELD [3064,3909]
                                    String: "run" [3064,3069]
                                    STRING [3070,3909]
                                        String: "K3D_VERSION=v5.6.0\nDEVSPACE_VERSION=v6.3.3\n\n# install k3d\nwget https://github.com/k3d-io/k3d/releases/download/${K3D_VERSION}/k3d-linux-amd64\nmv k3d-linux-amd64 k3d\nchmod +x k3d\nexport PATH=`pwd`:$PATH\nk3d version\n\n# Install devspace\ncurl -sSL https://github.com/loft-sh/devspace/releases/download/${DEVSPACE_VERSION}/devspace-linux-amd64 -o ./devspace\nchmod +x devspace\ndevspace version\n\n# Install helm\ncurl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash\nhelm version\n\nexport CONTAINER_REGISTRY=${{ secrets.ACR_SERVER }}\nexport VERSION=dev-${{github.sha}}\ntox -e syft.build.helm\n\nrm -rf infrastructure/gitops/environments/dev/\nmkdir -p infrastructure/gitops/environments/dev/\ncp -R packages/grid/helm/syft/. packages/grid/helm/manifests.yaml infrastructure/gitops/environments/dev/\n" [3070,3909]
                            OBJECT [3911,4269]
                                FIELD [3912,3956]
                                    String: "name" [3912,3918]
                                    STRING [3919,3956]
                                        String: "Commit & push changes to Infra Repo" [3919,3956]
                                FIELD [3957,4039]
                                    String: "if" [3957,3961]
                                    STRING [3962,4039]
                                        String: "github.ref == 'refs/heads/dev' || github.event.inputs.deploy-helm == 'true'" [3962,4039]
                                FIELD [4040,4073]
                                    String: "uses" [4040,4046]
                                    STRING [4047,4073]
                                        String: "EndBug/add-and-commit@v9" [4047,4073]
                                FIELD [4074,4268]
                                    String: "with" [4074,4080]
                                    OBJECT [4081,4268]
                                        FIELD [4082,4124]
                                            String: "author_name" [4082,4095]
                                            STRING [4096,4124]
                                                String: "${{ secrets.OM_BOT_NAME }}" [4096,4124]
                                        FIELD [4125,4169]
                                            String: "author_email" [4125,4139]
                                            STRING [4140,4169]
                                                String: "${{ secrets.OM_BOT_EMAIL }}" [4140,4169]
                                        FIELD [4170,4210]
                                            String: "message" [4170,4179]
                                            STRING [4180,4210]
                                                String: "[env] Update dev helm charts" [4180,4210]
                                        FIELD [4211,4220]
                                            String: "add" [4211,4216]
                                            STRING [4217,4220]
                                                String: "." [4217,4220]
                                        FIELD [4221,4241]
                                            String: "push" [4221,4227]
                                            STRING [4228,4241]
                                                String: "origin main" [4228,4241]
                                        FIELD [4242,4267]
                                            String: "cwd" [4242,4247]
                                            STRING [4248,4267]
                                                String: "./infrastructure/" [4248,4267]
                            OBJECT [4270,4876]
                                FIELD [4271,4312]
                                    String: "name" [4271,4277]
                                    STRING [4278,4312]
                                        String: "Cleanup Azure Container Registry" [4278,4312]
                                FIELD [4313,4875]
                                    String: "run" [4313,4318]
                                    STRING [4319,4875]
                                        String: "ACR_REGISTRY_NAME=${{ secrets.ACR_REGISTRY_NAME }}\n\necho \">> Fetching repo list..\"\nREPO_LIST=$(az acr repository list -n $ACR_REGISTRY_NAME -o tsv)\n\nKEEP_PREV_VERSIONS=5\nTAIL_FROM_LINE=$(($KEEP_PREV_VERSIONS + 1))\n\nfor repo in $REPO_LIST\ndo\n    echo \"Cleaning up '$repo'\"\n    az acr repository show-tags --name $ACR_REGISTRY_NAME --repository $repo --orderby time_desc --output tsv \\\n      | grep dev- \\\n      | tail -n +$TAIL_FROM_LINE \\\n      | xargs -r -I% az acr repository untag --name $ACR_REGISTRY_NAME --image $repo:%\ndone\n" [4319,4875]
                            OBJECT [4877,4988]
                                FIELD [4878,4919]
                                    String: "name" [4878,4884]
                                    STRING [4885,4919]
                                        String: "Logout and cleanup Azure account" [4885,4919]
                                FIELD [4920,4935]
                                    String: "if" [4920,4924]
                                    STRING [4925,4935]
                                        String: "always()" [4925,4935]
                                FIELD [4936,4987]
                                    String: "run" [4936,4941]
                                    STRING [4942,4987]
                                        String: "az logout\naz cache purge\naz account clear" [4942,4987]