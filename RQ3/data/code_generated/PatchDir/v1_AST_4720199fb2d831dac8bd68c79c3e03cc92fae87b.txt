OBJECT [0,9626]
    FIELD [1,16]
        String: "name" [1,7]
        STRING [8,16]
            String: "Master" [8,16]
    FIELD [17,132]
        String: "on" [17,21]
        OBJECT [22,132]
            FIELD [23,53]
                String: "push" [23,29]
                OBJECT [30,53]
                    FIELD [31,52]
                        String: "branches" [31,41]
                        ARRAY [42,52]
                            STRING [43,51]
                                String: "master" [43,51]
            FIELD [54,87]
                String: "release" [54,63]
                OBJECT [64,87]
                    FIELD [65,86]
                        String: "types" [65,72]
                        ARRAY [73,86]
                            STRING [74,85]
                                String: "published" [74,85]
            FIELD [88,131]
                String: "schedule" [88,98]
                ARRAY [99,131]
                    OBJECT [100,130]
                        FIELD [101,129]
                            String: "cron" [101,107]
                            STRING [108,129]
                                String: "37 11 * * 1,2,3,4,5" [108,129]
    FIELD [133,9625]
        String: "jobs" [133,139]
        OBJECT [140,9625]
            FIELD [141,1502]
                String: "check_core" [141,153]
                OBJECT [154,1502]
                    FIELD [155,174]
                        String: "name" [155,161]
                        STRING [162,174]
                            String: "Check Core" [162,174]
                    FIELD [175,200]
                        String: "runs-on" [175,184]
                        STRING [185,200]
                            String: "ubuntu-latest" [185,200]
                    FIELD [201,247]
                        String: "strategy" [201,211]
                        OBJECT [212,247]
                            FIELD [213,246]
                                String: "matrix" [213,221]
                                OBJECT [222,246]
                                    FIELD [223,245]
                                        String: "python" [223,231]
                                        ARRAY [232,245]
                                            STRING [233,238]
                                                String: "3.6" [233,238]
                                            STRING [239,244]
                                                String: "3.7" [239,244]
                    FIELD [248,1501]
                        String: "steps" [248,255]
                        ARRAY [256,1501]
                            OBJECT [257,287]
                                FIELD [258,286]
                                    String: "uses" [258,264]
                                    STRING [265,286]
                                        String: "actions/checkout@v2" [265,286]
                            OBJECT [288,393]
                                FIELD [289,310]
                                    String: "name" [289,295]
                                    STRING [296,310]
                                        String: "Setup Python" [296,310]
                                FIELD [311,343]
                                    String: "uses" [311,317]
                                    STRING [318,343]
                                        String: "actions/setup-python@v1" [318,343]
                                FIELD [344,392]
                                    String: "with" [344,350]
                                    OBJECT [351,392]
                                        FIELD [352,391]
                                            String: "python-version" [352,368]
                                            STRING [369,391]
                                                String: "${{ matrix.python }}" [369,391]
                            OBJECT [394,593]
                                FIELD [395,420]
                                    String: "uses" [395,401]
                                    STRING [402,420]
                                        String: "actions/cache@v1" [402,420]
                                FIELD [421,592]
                                    String: "with" [421,427]
                                    OBJECT [428,592]
                                        FIELD [429,463]
                                            String: "path" [429,435]
                                            STRING [436,463]
                                                String: "${{ env.pythonLocation }}" [436,463]
                                        FIELD [464,591]
                                            String: "key" [464,469]
                                            STRING [470,591]
                                                String: "${{ runner.os }}-pydeps-${{ env.pythonLocation }}-${{ hashFiles('setup.py') }}-${{ hashFiles('dev-requirements.txt') }}" [470,591]
                            OBJECT [594,648]
                                FIELD [595,624]
                                    String: "name" [595,601]
                                    STRING [602,624]
                                        String: "Install requirements" [602,624]
                                FIELD [625,647]
                                    String: "run" [625,630]
                                    STRING [631,647]
                                        String: "make install\n" [631,647]
                            OBJECT [649,691]
                                FIELD [650,669]
                                    String: "name" [650,656]
                                    STRING [657,669]
                                        String: "Debug info" [657,669]
                                FIELD [670,690]
                                    String: "run" [670,675]
                                    STRING [676,690]
                                        String: "pip freeze\n" [676,690]
                            OBJECT [692,727]
                                FIELD [693,706]
                                    String: "name" [693,699]
                                    STRING [700,706]
                                        String: "Lint" [700,706]
                                FIELD [707,726]
                                    String: "run" [707,712]
                                    STRING [713,726]
                                        String: "make lint\n" [713,726]
                            OBJECT [728,774]
                                FIELD [729,748]
                                    String: "name" [729,735]
                                    STRING [736,748]
                                        String: "Type check" [736,748]
                                FIELD [749,773]
                                    String: "run" [749,754]
                                    STRING [755,773]
                                        String: "make typecheck\n" [755,773]
                            OBJECT [775,824]
                                FIELD [776,794]
                                    String: "name" [776,782]
                                    STRING [783,794]
                                        String: "Run tests" [783,794]
                                FIELD [795,823]
                                    String: "run" [795,800]
                                    STRING [801,823]
                                        String: "make test-with-cov\n" [801,823]
                            OBJECT [825,1301]
                                FIELD [826,861]
                                    String: "name" [826,832]
                                    STRING [833,861]
                                        String: "Upload coverage to Codecov" [833,861]
                                FIELD [862,891]
                                    String: "if" [862,866]
                                    STRING [867,891]
                                        String: "matrix.python == '3.7'" [867,891]
                                FIELD [892,946]
                                    String: "env" [892,897]
                                    OBJECT [898,946]
                                        FIELD [899,945]
                                            String: "CODECOV_TOKEN" [899,914]
                                            STRING [915,945]
                                                String: "${{ secrets.CODECOV_TOKEN }}" [915,945]
                                FIELD [947,1300]
                                    String: "run" [947,952]
                                    STRING [953,1300]
                                        String: "# Ignore codecov failures as the codecov server is not\n# very reliable but we don't want to report a failure\n# in the github UI just because the coverage report failed to\n# be published.\n# This will also fail for forked repositories since the secret token won't\n# be available.\ncodecov -t $CODECOV_TOKEN || echo \"codecov upload failed\"\n" [953,1300]
                            OBJECT [1302,1500]
                                FIELD [1303,1320]
                                    String: "name" [1303,1309]
                                    STRING [1310,1320]
                                        String: "Clean up" [1310,1320]
                                FIELD [1321,1336]
                                    String: "if" [1321,1325]
                                    STRING [1326,1336]
                                        String: "always()" [1326,1336]
                                FIELD [1337,1499]
                                    String: "run" [1337,1342]
                                    STRING [1343,1499]
                                        String: "# Could run into issues with the cache if we don't uninstall the editable.\n# See https://github.com/pypa/pip/issues/4537.\npip uninstall --yes allennlp\n" [1343,1499]
            FIELD [1503,2490]
                String: "check_models" [1503,1517]
                OBJECT [1518,2490]
                    FIELD [1519,1540]
                        String: "name" [1519,1525]
                        STRING [1526,1540]
                            String: "Check Models" [1526,1540]
                    FIELD [1541,1566]
                        String: "runs-on" [1541,1550]
                        STRING [1551,1566]
                            String: "ubuntu-latest" [1551,1566]
                    FIELD [1567,1613]
                        String: "strategy" [1567,1577]
                        OBJECT [1578,1613]
                            FIELD [1579,1612]
                                String: "matrix" [1579,1587]
                                OBJECT [1588,1612]
                                    FIELD [1589,1611]
                                        String: "python" [1589,1597]
                                        ARRAY [1598,1611]
                                            STRING [1599,1604]
                                                String: "3.6" [1599,1604]
                                            STRING [1605,1610]
                                                String: "3.7" [1605,1610]
                    FIELD [1614,2489]
                        String: "steps" [1614,1621]
                        ARRAY [1622,2489]
                            OBJECT [1623,1653]
                                FIELD [1624,1652]
                                    String: "uses" [1624,1630]
                                    STRING [1631,1652]
                                        String: "actions/checkout@v2" [1631,1652]
                            OBJECT [1654,1759]
                                FIELD [1655,1676]
                                    String: "name" [1655,1661]
                                    STRING [1662,1676]
                                        String: "Setup Python" [1662,1676]
                                FIELD [1677,1709]
                                    String: "uses" [1677,1683]
                                    STRING [1684,1709]
                                        String: "actions/setup-python@v1" [1684,1709]
                                FIELD [1710,1758]
                                    String: "with" [1710,1716]
                                    OBJECT [1717,1758]
                                        FIELD [1718,1757]
                                            String: "python-version" [1718,1734]
                                            STRING [1735,1757]
                                                String: "${{ matrix.python }}" [1735,1757]
                            OBJECT [1760,1959]
                                FIELD [1761,1786]
                                    String: "uses" [1761,1767]
                                    STRING [1768,1786]
                                        String: "actions/cache@v1" [1768,1786]
                                FIELD [1787,1958]
                                    String: "with" [1787,1793]
                                    OBJECT [1794,1958]
                                        FIELD [1795,1829]
                                            String: "path" [1795,1801]
                                            STRING [1802,1829]
                                                String: "${{ env.pythonLocation }}" [1802,1829]
                                        FIELD [1830,1957]
                                            String: "key" [1830,1835]
                                            STRING [1836,1957]
                                                String: "${{ runner.os }}-pydeps-${{ env.pythonLocation }}-${{ hashFiles('setup.py') }}-${{ hashFiles('dev-requirements.txt') }}" [1836,1957]
                            OBJECT [1960,2014]
                                FIELD [1961,1990]
                                    String: "name" [1961,1967]
                                    STRING [1968,1990]
                                        String: "Install requirements" [1968,1990]
                                FIELD [1991,2013]
                                    String: "run" [1991,1996]
                                    STRING [1997,2013]
                                        String: "make install\n" [1997,2013]
                            OBJECT [2015,2057]
                                FIELD [2016,2035]
                                    String: "name" [2016,2022]
                                    STRING [2023,2035]
                                        String: "Debug info" [2023,2035]
                                FIELD [2036,2056]
                                    String: "run" [2036,2041]
                                    STRING [2042,2056]
                                        String: "pip freeze\n" [2042,2056]
                            OBJECT [2058,2306]
                                FIELD [2059,2096]
                                    String: "name" [2059,2065]
                                    STRING [2066,2096]
                                        String: "Pull and install models repo" [2066,2096]
                                FIELD [2097,2139]
                                    String: "env" [2097,2102]
                                    OBJECT [2103,2139]
                                        FIELD [2104,2138]
                                            String: "EXCLUDE_ALLENNLP_IN_SETUP" [2104,2131]
                                            STRING [2132,2138]
                                                String: "true" [2132,2138]
                                FIELD [2140,2305]
                                    String: "run" [2140,2145]
                                    STRING [2146,2305]
                                        String: "git clone https://github.com/allenai/allennlp-models.git\ncd allennlp-models && pip install --upgrade --upgrade-strategy eager -e . -r dev-requirements.txt\n" [2146,2305]
                            OBJECT [2307,2376]
                                FIELD [2308,2333]
                                    String: "name" [2308,2314]
                                    STRING [2315,2333]
                                        String: "Run models tests" [2315,2333]
                                FIELD [2334,2375]
                                    String: "run" [2334,2339]
                                    STRING [2340,2375]
                                        String: "cd allennlp-models && make test\n" [2340,2375]
                            OBJECT [2377,2488]
                                FIELD [2378,2395]
                                    String: "name" [2378,2384]
                                    STRING [2385,2395]
                                        String: "Clean up" [2385,2395]
                                FIELD [2396,2411]
                                    String: "if" [2396,2400]
                                    STRING [2401,2411]
                                        String: "always()" [2401,2411]
                                FIELD [2412,2487]
                                    String: "run" [2412,2417]
                                    STRING [2418,2487]
                                        String: "pip uninstall --yes allennlp\npip uninstall --yes allennlp_models\n" [2418,2487]
            FIELD [2491,4294]
                String: "build_package" [2491,2506]
                OBJECT [2507,4294]
                    FIELD [2508,2530]
                        String: "name" [2508,2514]
                        STRING [2515,2530]
                            String: "Build Package" [2515,2530]
                    FIELD [2531,2556]
                        String: "runs-on" [2531,2540]
                        STRING [2541,2556]
                            String: "ubuntu-latest" [2541,2556]
                    FIELD [2557,4293]
                        String: "steps" [2557,2564]
                        ARRAY [2565,4293]
                            OBJECT [2566,2596]
                                FIELD [2567,2595]
                                    String: "uses" [2567,2573]
                                    STRING [2574,2595]
                                        String: "actions/checkout@v2" [2574,2595]
                            OBJECT [2597,2683]
                                FIELD [2598,2619]
                                    String: "name" [2598,2604]
                                    STRING [2605,2619]
                                        String: "Setup Python" [2605,2619]
                                FIELD [2620,2652]
                                    String: "uses" [2620,2626]
                                    STRING [2627,2652]
                                        String: "actions/setup-python@v1" [2627,2652]
                                FIELD [2653,2682]
                                    String: "with" [2653,2659]
                                    OBJECT [2660,2682]
                                        FIELD [2661,2681]
                                            String: "python-version" [2661,2677]
                                            NUMBER [2678,2681]
                                                Number: 3.7 [2678,2681]
                            OBJECT [2684,2883]
                                FIELD [2685,2710]
                                    String: "uses" [2685,2691]
                                    STRING [2692,2710]
                                        String: "actions/cache@v1" [2692,2710]
                                FIELD [2711,2882]
                                    String: "with" [2711,2717]
                                    OBJECT [2718,2882]
                                        FIELD [2719,2753]
                                            String: "path" [2719,2725]
                                            STRING [2726,2753]
                                                String: "${{ env.pythonLocation }}" [2726,2753]
                                        FIELD [2754,2881]
                                            String: "key" [2754,2759]
                                            STRING [2760,2881]
                                                String: "${{ runner.os }}-pydeps-${{ env.pythonLocation }}-${{ hashFiles('setup.py') }}-${{ hashFiles('dev-requirements.txt') }}" [2760,2881]
                            OBJECT [2884,2938]
                                FIELD [2885,2914]
                                    String: "name" [2885,2891]
                                    STRING [2892,2914]
                                        String: "Install requirements" [2892,2914]
                                FIELD [2915,2937]
                                    String: "run" [2915,2920]
                                    STRING [2921,2937]
                                        String: "make install\n" [2921,2937]
                            OBJECT [2939,3574]
                                FIELD [2940,2978]
                                    String: "name" [2940,2946]
                                    STRING [2947,2978]
                                        String: "Check and set nightly version" [2947,2978]
                                FIELD [2979,3017]
                                    String: "if" [2979,2983]
                                    STRING [2984,3017]
                                        String: "github.event_name == 'schedule'" [2984,3017]
                                FIELD [3018,3573]
                                    String: "run" [3018,3023]
                                    STRING [3024,3573]
                                        String: "# Verify that current version is ahead of the last release.\nLATEST=$(scripts/get_version.py latest)\nCURRENT=$(scripts/get_version.py current)\nif [ \"$CURRENT\" == \"$LATEST\" ]; then\n    echo \"Current version needs to be ahead of latest release in order to build nightly release\";\n    exit 1;\nfi\n# This is somewhat bizarre, but you can't set env variables to bash\n# commands in the action workflow - so we have to use this odd way of\n# exporting a variable instead.\necho ::set-env name=ALLENNLP_VERSION_SUFFIX::.dev$(date -u +%Y%m%d)\n" [3024,3573]
                            OBJECT [3575,3929]
                                FIELD [3576,3620]
                                    String: "name" [3576,3582]
                                    STRING [3583,3620]
                                        String: "Check version and release tag match" [3583,3620]
                                FIELD [3621,3658]
                                    String: "if" [3621,3625]
                                    STRING [3626,3658]
                                        String: "github.event_name == 'release'" [3626,3658]
                                FIELD [3659,3928]
                                    String: "run" [3659,3664]
                                    STRING [3665,3928]
                                        String: "# Remove 'refs/tags/' to get the actual tag from the release.\nTAG=${GITHUB_REF#refs/tags/};\nVERSION=$(scripts/get_version.py current)\nif [ \"$TAG\" != \"$VERSION\" ]; then\n    echo \"Bad tag or version. Tag $TAG does not match $VERSION\";\n    exit 1;\nfi\n" [3665,3928]
                            OBJECT [3930,4107]
                                FIELD [3931,3958]
                                    String: "name" [3931,3937]
                                    STRING [3938,3958]
                                        String: "Build core package" [3938,3958]
                                FIELD [3959,4106]
                                    String: "run" [3959,3964]
                                    STRING [3965,4106]
                                        String: "echo \"Building packages for core release\"\n# Just print out the version for debugging.\nmake version\npython setup.py bdist_wheel sdist\n" [3965,4106]
                            OBJECT [4108,4217]
                                FIELD [4109,4135]
                                    String: "name" [4109,4115]
                                    STRING [4116,4135]
                                        String: "Save core package" [4116,4135]
                                FIELD [4136,4171]
                                    String: "uses" [4136,4142]
                                    STRING [4143,4171]
                                        String: "actions/upload-artifact@v1" [4143,4171]
                                FIELD [4172,4216]
                                    String: "with" [4172,4178]
                                    OBJECT [4179,4216]
                                        FIELD [4180,4201]
                                            String: "name" [4180,4186]
                                            STRING [4187,4201]
                                                String: "core-package" [4187,4201]
                                        FIELD [4202,4215]
                                            String: "path" [4202,4208]
                                            STRING [4209,4215]
                                                String: "dist" [4209,4215]
                            OBJECT [4218,4292]
                                FIELD [4219,4236]
                                    String: "name" [4219,4225]
                                    STRING [4226,4236]
                                        String: "Clean up" [4226,4236]
                                FIELD [4237,4252]
                                    String: "if" [4237,4241]
                                    STRING [4242,4252]
                                        String: "always()" [4242,4252]
                                FIELD [4253,4291]
                                    String: "run" [4253,4258]
                                    STRING [4259,4291]
                                        String: "pip uninstall --yes allennlp\n" [4259,4291]
            FIELD [4295,4876]
                String: "test_package" [4295,4309]
                OBJECT [4310,4876]
                    FIELD [4311,4332]
                        String: "name" [4311,4317]
                        STRING [4318,4332]
                            String: "Test Package" [4318,4332]
                    FIELD [4333,4358]
                        String: "needs" [4333,4340]
                        ARRAY [4341,4358]
                            STRING [4342,4357]
                                String: "build_package" [4342,4357]
                    FIELD [4359,4384]
                        String: "runs-on" [4359,4368]
                        STRING [4369,4384]
                            String: "ubuntu-latest" [4369,4384]
                    FIELD [4385,4431]
                        String: "strategy" [4385,4395]
                        OBJECT [4396,4431]
                            FIELD [4397,4430]
                                String: "matrix" [4397,4405]
                                OBJECT [4406,4430]
                                    FIELD [4407,4429]
                                        String: "python" [4407,4415]
                                        ARRAY [4416,4429]
                                            STRING [4417,4422]
                                                String: "3.6" [4417,4422]
                                            STRING [4423,4428]
                                                String: "3.7" [4423,4428]
                    FIELD [4432,4875]
                        String: "steps" [4432,4439]
                        ARRAY [4440,4875]
                            OBJECT [4441,4546]
                                FIELD [4442,4463]
                                    String: "name" [4442,4448]
                                    STRING [4449,4463]
                                        String: "Setup Python" [4449,4463]
                                FIELD [4464,4496]
                                    String: "uses" [4464,4470]
                                    STRING [4471,4496]
                                        String: "actions/setup-python@v1" [4471,4496]
                                FIELD [4497,4545]
                                    String: "with" [4497,4503]
                                    OBJECT [4504,4545]
                                        FIELD [4505,4544]
                                            String: "python-version" [4505,4521]
                                            STRING [4522,4544]
                                                String: "${{ matrix.python }}" [4522,4544]
                            OBJECT [4547,4631]
                                FIELD [4548,4577]
                                    String: "name" [4548,4554]
                                    STRING [4555,4577]
                                        String: "Install requirements" [4555,4577]
                                FIELD [4578,4630]
                                    String: "run" [4578,4583]
                                    STRING [4584,4630]
                                        String: "pip install --upgrade pip setuptools wheel\n" [4584,4630]
                            OBJECT [4632,4747]
                                FIELD [4633,4663]
                                    String: "name" [4633,4639]
                                    STRING [4640,4663]
                                        String: "Download core package" [4640,4663]
                                FIELD [4664,4701]
                                    String: "uses" [4664,4670]
                                    STRING [4671,4701]
                                        String: "actions/download-artifact@v1" [4671,4701]
                                FIELD [4702,4746]
                                    String: "with" [4702,4708]
                                    OBJECT [4709,4746]
                                        FIELD [4710,4731]
                                            String: "name" [4710,4716]
                                            STRING [4717,4731]
                                                String: "core-package" [4717,4731]
                                        FIELD [4732,4745]
                                            String: "path" [4732,4738]
                                            STRING [4739,4745]
                                                String: "dist" [4739,4745]
                            OBJECT [4748,4818]
                                FIELD [4749,4778]
                                    String: "name" [4749,4755]
                                    STRING [4756,4778]
                                        String: "Install core package" [4756,4778]
                                FIELD [4779,4817]
                                    String: "run" [4779,4784]
                                    STRING [4785,4817]
                                        String: "pip install $(ls dist/*.whl)\n" [4785,4817]
                            OBJECT [4819,4874]
                                FIELD [4820,4841]
                                    String: "name" [4820,4826]
                                    STRING [4827,4841]
                                        String: "Test install" [4827,4841]
                                FIELD [4842,4873]
                                    String: "run" [4842,4847]
                                    STRING [4848,4873]
                                        String: "allennlp test-install\n" [4848,4873]
            FIELD [4877,6151]
                String: "docker" [4877,4885]
                OBJECT [4886,6151]
                    FIELD [4887,4902]
                        String: "name" [4887,4893]
                        STRING [4894,4902]
                            String: "Docker" [4894,4902]
                    FIELD [4903,4928]
                        String: "needs" [4903,4910]
                        ARRAY [4911,4928]
                            STRING [4912,4927]
                                String: "build_package" [4912,4927]
                    FIELD [4929,4954]
                        String: "runs-on" [4929,4938]
                        STRING [4939,4954]
                            String: "ubuntu-latest" [4939,4954]
                    FIELD [4955,6150]
                        String: "steps" [4955,4962]
                        ARRAY [4963,6150]
                            OBJECT [4964,4994]
                                FIELD [4965,4993]
                                    String: "uses" [4965,4971]
                                    STRING [4972,4993]
                                        String: "actions/checkout@v2" [4972,4993]
                            OBJECT [4995,5110]
                                FIELD [4996,5026]
                                    String: "name" [4996,5002]
                                    STRING [5003,5026]
                                        String: "Download core package" [5003,5026]
                                FIELD [5027,5064]
                                    String: "uses" [5027,5033]
                                    STRING [5034,5064]
                                        String: "actions/download-artifact@v1" [5034,5064]
                                FIELD [5065,5109]
                                    String: "with" [5065,5071]
                                    OBJECT [5072,5109]
                                        FIELD [5073,5094]
                                            String: "name" [5073,5079]
                                            STRING [5080,5094]
                                                String: "core-package" [5080,5094]
                                        FIELD [5095,5108]
                                            String: "path" [5095,5101]
                                            STRING [5102,5108]
                                                String: "dist" [5102,5108]
                            OBJECT [5111,5181]
                                FIELD [5112,5132]
                                    String: "name" [5112,5118]
                                    STRING [5119,5132]
                                        String: "Build image" [5119,5132]
                                FIELD [5133,5180]
                                    String: "run" [5133,5138]
                                    STRING [5139,5180]
                                        String: "make docker-image DOCKER_TAG=allennlp\n" [5139,5180]
                            OBJECT [5182,5251]
                                FIELD [5183,5202]
                                    String: "name" [5183,5189]
                                    STRING [5190,5202]
                                        String: "Test image" [5190,5202]
                                FIELD [5203,5250]
                                    String: "run" [5203,5208]
                                    STRING [5209,5250]
                                        String: "docker run --rm allennlp test-install\n" [5209,5250]
                            OBJECT [5252,5685]
                                FIELD [5253,5281]
                                    String: "name" [5253,5259]
                                    STRING [5260,5281]
                                        String: "Upload master image" [5260,5281]
                                FIELD [5282,5359]
                                    String: "if" [5282,5286]
                                    STRING [5287,5359]
                                        String: "github.repository == 'allenai/allennlp' && github.event_name == 'push'" [5287,5359]
                                FIELD [5360,5684]
                                    String: "run" [5360,5365]
                                    STRING [5366,5684]
                                        String: "docker login -u ${{ secrets.DOCKER_USERNAME }} -p ${{ secrets.DOCKER_PASSWORD }}\n\n# Tag with current commit and 'latest'.\ndocker tag allennlp allennlp/commit:$GITHUB_SHA\ndocker tag allennlp allennlp/commit:latest\n\n# Push both tags.\ndocker push allennlp/commit:$GITHUB_SHA\ndocker push allennlp/commit:latest\n" [5366,5684]
                            OBJECT [5686,6149]
                                FIELD [5687,5716]
                                    String: "name" [5687,5693]
                                    STRING [5694,5716]
                                        String: "Upload release image" [5694,5716]
                                FIELD [5717,5797]
                                    String: "if" [5717,5721]
                                    STRING [5722,5797]
                                        String: "github.repository == 'allenai/allennlp' && github.event_name == 'release'" [5722,5797]
                                FIELD [5798,6148]
                                    String: "run" [5798,5803]
                                    STRING [5804,6148]
                                        String: "docker login -u ${{ secrets.DOCKER_USERNAME }} -p ${{ secrets.DOCKER_PASSWORD }}\nTAG=${GITHUB_REF#refs/tags/};\n\n# Tag with release version and 'latest'.\ndocker tag allennlp allennlp/allennlp:$TAG\ndocker tag allennlp allennlp/allennlp:latest\n\n# Push both tags.\ndocker push allennlp/allennlp:$TAG\ndocker push allennlp/allennlp:latest\n" [5804,6148]
            FIELD [6152,8970]
                String: "docs" [6152,6158]
                OBJECT [6159,8970]
                    FIELD [6160,6173]
                        String: "name" [6160,6166]
                        STRING [6167,6173]
                            String: "Docs" [6167,6173]
                    FIELD [6174,6199]
                        String: "runs-on" [6174,6183]
                        STRING [6184,6199]
                            String: "ubuntu-latest" [6184,6199]
                    FIELD [6200,8969]
                        String: "steps" [6200,6207]
                        ARRAY [6208,8969]
                            OBJECT [6209,6239]
                                FIELD [6210,6238]
                                    String: "uses" [6210,6216]
                                    STRING [6217,6238]
                                        String: "actions/checkout@v1" [6217,6238]
                            OBJECT [6240,6414]
                                FIELD [6241,6269]
                                    String: "name" [6241,6247]
                                    STRING [6248,6269]
                                        String: "Setup SSH Client ðŸ”‘" [6248,6269]
                                FIELD [6270,6316]
                                    String: "if" [6270,6274]
                                    STRING [6275,6316]
                                        String: "github.repository == 'allenai/allennlp'" [6275,6316]
                                FIELD [6317,6353]
                                    String: "uses" [6317,6323]
                                    STRING [6324,6353]
                                        String: "webfactory/ssh-agent@v0.2.0" [6324,6353]
                                FIELD [6354,6413]
                                    String: "with" [6354,6360]
                                    OBJECT [6361,6413]
                                        FIELD [6362,6412]
                                            String: "ssh-private-key" [6362,6379]
                                            STRING [6380,6412]
                                                String: "${{ secrets.DOCS_DEPLOY_KEY }}" [6380,6412]
                            OBJECT [6415,6501]
                                FIELD [6416,6437]
                                    String: "name" [6416,6422]
                                    STRING [6423,6437]
                                        String: "Setup Python" [6423,6437]
                                FIELD [6438,6470]
                                    String: "uses" [6438,6444]
                                    STRING [6445,6470]
                                        String: "actions/setup-python@v1" [6445,6470]
                                FIELD [6471,6500]
                                    String: "with" [6471,6477]
                                    OBJECT [6478,6500]
                                        FIELD [6479,6499]
                                            String: "python-version" [6479,6495]
                                            NUMBER [6496,6499]
                                                Number: 3.7 [6496,6499]
                            OBJECT [6502,6701]
                                FIELD [6503,6528]
                                    String: "uses" [6503,6509]
                                    STRING [6510,6528]
                                        String: "actions/cache@v1" [6510,6528]
                                FIELD [6529,6700]
                                    String: "with" [6529,6535]
                                    OBJECT [6536,6700]
                                        FIELD [6537,6571]
                                            String: "path" [6537,6543]
                                            STRING [6544,6571]
                                                String: "${{ env.pythonLocation }}" [6544,6571]
                                        FIELD [6572,6699]
                                            String: "key" [6572,6577]
                                            STRING [6578,6699]
                                                String: "${{ runner.os }}-pydeps-${{ env.pythonLocation }}-${{ hashFiles('setup.py') }}-${{ hashFiles('dev-requirements.txt') }}" [6578,6699]
                            OBJECT [6702,6756]
                                FIELD [6703,6732]
                                    String: "name" [6703,6709]
                                    STRING [6710,6732]
                                        String: "Install requirements" [6710,6732]
                                FIELD [6733,6755]
                                    String: "run" [6733,6738]
                                    STRING [6739,6755]
                                        String: "make install\n" [6739,6755]
                            OBJECT [6757,6799]
                                FIELD [6758,6777]
                                    String: "name" [6758,6764]
                                    STRING [6765,6777]
                                        String: "Debug info" [6765,6777]
                                FIELD [6778,6798]
                                    String: "run" [6778,6783]
                                    STRING [6784,6798]
                                        String: "pip freeze\n" [6784,6798]
                            OBJECT [6800,6855]
                                FIELD [6801,6820]
                                    String: "name" [6801,6807]
                                    STRING [6808,6820]
                                        String: "Build docs" [6808,6820]
                                FIELD [6821,6854]
                                    String: "run" [6821,6826]
                                    STRING [6827,6854]
                                        String: "./scripts/build_docs.sh\n" [6827,6854]
                            OBJECT [6856,7082]
                                FIELD [6857,6879]
                                    String: "name" [6857,6863]
                                    STRING [6864,6879]
                                        String: "Configure Git" [6864,6879]
                                FIELD [6880,6926]
                                    String: "if" [6880,6884]
                                    STRING [6885,6926]
                                        String: "github.repository == 'allenai/allennlp'" [6885,6926]
                                FIELD [6927,7081]
                                    String: "run" [6927,6932]
                                    STRING [6933,7081]
                                        String: "git config --global user.email \"ai2service@allenai.org\"\ngit config --global user.name \"ai2service\"\ngit config --global push.default simple\n" [6933,7081]
                            OBJECT [7083,7296]
                                FIELD [7084,7111]
                                    String: "name" [7084,7090]
                                    STRING [7091,7111]
                                        String: "Set target folders" [7091,7111]
                                FIELD [7112,7295]
                                    String: "run" [7112,7117]
                                    STRING [7118,7295]
                                        String: "if [[ $GITHUB_EVENT_NAME == 'release' ]]; then\n    echo \"::set-env name=DOCS_FOLDER::${GITHUB_REF#refs/tags/}\"\nelse\n    echo \"::set-env name=DOCS_FOLDER::master\";\nfi\n" [7118,7295]
                            OBJECT [7297,7740]
                                FIELD [7298,7317]
                                    String: "name" [7298,7304]
                                    STRING [7305,7317]
                                        String: "Stage docs" [7305,7317]
                                FIELD [7318,7399]
                                    String: "if" [7318,7322]
                                    STRING [7323,7399]
                                        String: "github.repository == 'allenai/allennlp' && github.event_name != 'schedule'" [7323,7399]
                                FIELD [7400,7739]
                                    String: "run" [7400,7405]
                                    STRING [7406,7739]
                                        String: "echo \"Staging docs to $DOCS_FOLDER\"\n\n# Checkout allennlp-docs to /allennlp-docs\ngit clone git@github.com:allenai/allennlp-docs.git ~/allennlp-docs\n\n# Copy the generated docs to the checked out docs repo\nrm -rf ~/allennlp-docs/$DOCS_FOLDER/\nmkdir -p ~/allennlp-docs/$DOCS_FOLDER\ncp -r site/* ~/allennlp-docs/$DOCS_FOLDER\n" [7406,7739]
                            OBJECT [7741,8658]
                                FIELD [7742,7767]
                                    String: "name" [7742,7748]
                                    STRING [7749,7767]
                                        String: "Update shortcuts" [7749,7767]
                                FIELD [7768,7848]
                                    String: "if" [7768,7772]
                                    STRING [7773,7848]
                                        String: "github.repository == 'allenai/allennlp' && github.event_name == 'release'" [7773,7848]
                                FIELD [7849,8657]
                                    String: "run" [7849,7854]
                                    STRING [7855,8657]
                                        String: "# Fail immediately if any step fails.\nset -e\n\ncd ~/allennlp-docs/\n\nLATEST=$(./scripts/get_version.py latest)\nSTABLE=$(./scripts/get_version.py stable)\n\necho \"Updating latest/index.html to point to $LATEST\"\nmkdir -p latest\ncat >latest/index.html << EOL\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"Refresh\" content=\"0; url=/${LATEST}/\" />\n  </head>\n  <body>\n    <p>Please follow <a href=\"/${LATEST}/\">this link</a>.</p>\n  </body>\n</html>\nEOL\n\necho \"Updating stable/index.html to point to $STABLE\"\nmkdir -p stable\ncat >stable/index.html << EOL\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta http-equiv=\"Refresh\" content=\"0; url=/${STABLE}/\" />\n  </head>\n  <body>\n    <p>Please follow <a href=\"/${STABLE}/\">this link</a>.</p>\n  </body>\n</html>\nEOL\n" [7855,8657]
                            OBJECT [8659,8893]
                                FIELD [8660,8680]
                                    String: "name" [8660,8666]
                                    STRING [8667,8680]
                                        String: "Deploy docs" [8667,8680]
                                FIELD [8681,8762]
                                    String: "if" [8681,8685]
                                    STRING [8686,8762]
                                        String: "github.repository == 'allenai/allennlp' && github.event_name != 'schedule'" [8686,8762]
                                FIELD [8763,8892]
                                    String: "run" [8763,8768]
                                    STRING [8769,8892]
                                        String: "# And push them up to GitHub\ncd ~/allennlp-docs/\ngit add -A\ngit commit -m \"automated update of the docs\"\ngit push\n" [8769,8892]
                            OBJECT [8894,8968]
                                FIELD [8895,8912]
                                    String: "name" [8895,8901]
                                    STRING [8902,8912]
                                        String: "Clean up" [8902,8912]
                                FIELD [8913,8928]
                                    String: "if" [8913,8917]
                                    STRING [8918,8928]
                                        String: "always()" [8918,8928]
                                FIELD [8929,8967]
                                    String: "run" [8929,8934]
                                    STRING [8935,8967]
                                        String: "pip uninstall --yes allennlp\n" [8935,8967]
            FIELD [8971,9624]
                String: "publish" [8971,8980]
                OBJECT [8981,9624]
                    FIELD [8982,8995]
                        String: "name" [8982,8988]
                        STRING [8989,8995]
                            String: "PyPI" [8989,8995]
                    FIELD [8996,9080]
                        String: "needs" [8996,9003]
                        ARRAY [9004,9080]
                            STRING [9005,9017]
                                String: "check_core" [9005,9017]
                            STRING [9018,9032]
                                String: "check_models" [9018,9032]
                            STRING [9033,9048]
                                String: "build_package" [9033,9048]
                            STRING [9049,9063]
                                String: "test_package" [9049,9063]
                            STRING [9064,9072]
                                String: "docker" [9064,9072]
                            STRING [9073,9079]
                                String: "docs" [9073,9079]
                    FIELD [9081,9158]
                        String: "if" [9081,9085]
                        STRING [9086,9158]
                            String: "github.repository == 'allenai/allennlp' && github.event_name != 'push'" [9086,9158]
                    FIELD [9159,9184]
                        String: "runs-on" [9159,9168]
                        STRING [9169,9184]
                            String: "ubuntu-latest" [9169,9184]
                    FIELD [9185,9623]
                        String: "steps" [9185,9192]
                        ARRAY [9193,9623]
                            OBJECT [9194,9224]
                                FIELD [9195,9223]
                                    String: "uses" [9195,9201]
                                    STRING [9202,9223]
                                        String: "actions/checkout@v2" [9202,9223]
                            OBJECT [9225,9311]
                                FIELD [9226,9247]
                                    String: "name" [9226,9232]
                                    STRING [9233,9247]
                                        String: "Setup Python" [9233,9247]
                                FIELD [9248,9280]
                                    String: "uses" [9248,9254]
                                    STRING [9255,9280]
                                        String: "actions/setup-python@v1" [9255,9280]
                                FIELD [9281,9310]
                                    String: "with" [9281,9287]
                                    OBJECT [9288,9310]
                                        FIELD [9289,9309]
                                            String: "python-version" [9289,9305]
                                            NUMBER [9306,9309]
                                                Number: 3.7 [9306,9309]
                            OBJECT [9312,9402]
                                FIELD [9313,9342]
                                    String: "name" [9313,9319]
                                    STRING [9320,9342]
                                        String: "Install requirements" [9320,9342]
                                FIELD [9343,9401]
                                    String: "run" [9343,9348]
                                    STRING [9349,9401]
                                        String: "pip install --upgrade pip setuptools wheel twine\n" [9349,9401]
                            OBJECT [9403,9518]
                                FIELD [9404,9434]
                                    String: "name" [9404,9410]
                                    STRING [9411,9434]
                                        String: "Download core package" [9411,9434]
                                FIELD [9435,9472]
                                    String: "uses" [9435,9441]
                                    STRING [9442,9472]
                                        String: "actions/download-artifact@v1" [9442,9472]
                                FIELD [9473,9517]
                                    String: "with" [9473,9479]
                                    OBJECT [9480,9517]
                                        FIELD [9481,9502]
                                            String: "name" [9481,9487]
                                            STRING [9488,9502]
                                                String: "core-package" [9488,9502]
                                        FIELD [9503,9516]
                                            String: "path" [9503,9509]
                                            STRING [9510,9516]
                                                String: "dist" [9510,9516]
                            OBJECT [9519,9622]
                                FIELD [9520,9549]
                                    String: "name" [9520,9526]
                                    STRING [9527,9549]
                                        String: "Publish core package" [9527,9549]
                                FIELD [9550,9621]
                                    String: "run" [9550,9555]
                                    STRING [9556,9621]
                                        String: "twine upload -u allennlp -p ${{ secrets.PYPI_PASSWORD }} dist/*" [9556,9621]