OBJECT [0,5709]
    FIELD [1,30]
        String: "name" [1,7]
        STRING [8,30]
            String: "pr-integration-tests" [8,30]
    FIELD [31,104]
        String: "on" [31,35]
        OBJECT [36,104]
            FIELD [37,103]
                String: "pull_request_target" [37,58]
                OBJECT [59,103]
                    FIELD [60,102]
                        String: "types" [60,67]
                        ARRAY [68,102]
                            STRING [69,77]
                                String: "opened" [69,77]
                            STRING [78,91]
                                String: "synchronize" [78,91]
                            STRING [92,101]
                                String: "labeled" [92,101]
    FIELD [105,5708]
        String: "jobs" [105,111]
        OBJECT [112,5708]
            FIELD [113,2254]
                String: "build-docker-image" [113,133]
                OBJECT [134,2254]
                    FIELD [135,434]
                        String: "if" [135,139]
                        STRING [140,434]
                            String: "(github.event.action == 'labeled' && (github.event.label.name == 'approved' || github.event.label.name == 'ok-to-test')) || (github.event.action != 'labeled' && (contains(github.event.pull_request.labels.*.name, 'ok-to-test') || contains(github.event.pull_request.labels.*.name, 'approved')))" [140,434]
                    FIELD [435,460]
                        String: "runs-on" [435,444]
                        STRING [445,460]
                            String: "ubuntu-latest" [445,460]
                    FIELD [461,2172]
                        String: "steps" [461,468]
                        ARRAY [469,2172]
                            OBJECT [470,598]
                                FIELD [471,499]
                                    String: "uses" [471,477]
                                    STRING [478,499]
                                        String: "actions/checkout@v2" [478,499]
                                FIELD [500,597]
                                    String: "with" [500,506]
                                    OBJECT [507,597]
                                        FIELD [508,571]
                                            String: "ref" [508,513]
                                            STRING [514,571]
                                                String: "refs/pull/${{ github.event.pull_request.number }}/merge" [514,571]
                                        FIELD [572,596]
                                            String: "submodules" [572,584]
                                            STRING [585,596]
                                                String: "recursive" [585,596]
                            OBJECT [599,658]
                                FIELD [600,620]
                                    String: "name" [600,606]
                                    STRING [607,620]
                                        String: "Set up QEMU" [607,620]
                                FIELD [621,657]
                                    String: "uses" [621,627]
                                    STRING [628,657]
                                        String: "docker/setup-qemu-action@v1" [628,657]
                            OBJECT [659,729]
                                FIELD [660,689]
                                    String: "name" [660,666]
                                    STRING [667,689]
                                        String: "Set up Docker Buildx" [667,689]
                                FIELD [690,728]
                                    String: "uses" [690,696]
                                    STRING [697,728]
                                        String: "docker/setup-buildx-action@v1" [697,728]
                            OBJECT [730,957]
                                FIELD [731,754]
                                    String: "name" [731,737]
                                    STRING [738,754]
                                        String: "Set up AWS SDK" [738,754]
                                FIELD [755,804]
                                    String: "uses" [755,761]
                                    STRING [762,804]
                                        String: "aws-actions/configure-aws-credentials@v1" [762,804]
                                FIELD [805,956]
                                    String: "with" [805,811]
                                    OBJECT [812,956]
                                        FIELD [813,867]
                                            String: "aws-access-key-id" [813,832]
                                            STRING [833,867]
                                                String: "${{ secrets.AWS_ACCESS_KEY_ID }}" [833,867]
                                        FIELD [868,930]
                                            String: "aws-secret-access-key" [868,891]
                                            STRING [892,930]
                                                String: "${{ secrets.AWS_SECRET_ACCESS_KEY }}" [892,930]
                                        FIELD [931,955]
                                            String: "aws-region" [931,943]
                                            STRING [944,955]
                                                String: "us-west-2" [944,955]
                            OBJECT [958,1046]
                                FIELD [959,987]
                                    String: "name" [959,965]
                                    STRING [966,987]
                                        String: "Login to Amazon ECR" [966,987]
                                FIELD [988,1004]
                                    String: "id" [988,992]
                                    STRING [993,1004]
                                        String: "login-ecr" [993,1004]
                                FIELD [1005,1045]
                                    String: "uses" [1005,1011]
                                    STRING [1012,1045]
                                        String: "aws-actions/amazon-ecr-login@v1" [1012,1045]
                            OBJECT [1047,1166]
                                FIELD [1048,1074]
                                    String: "name" [1048,1054]
                                    STRING [1055,1074]
                                        String: "Set ECR image tag" [1055,1074]
                                FIELD [1075,1091]
                                    String: "id" [1075,1079]
                                    STRING [1080,1091]
                                        String: "image-tag" [1080,1091]
                                FIELD [1092,1165]
                                    String: "run" [1092,1097]
                                    STRING [1098,1165]
                                        String: "echo \"::set-output name=DOCKER_IMAGE_TAG::`git rev-parse HEAD`\"" [1098,1165]
                            OBJECT [1167,1303]
                                FIELD [1168,1199]
                                    String: "name" [1168,1174]
                                    STRING [1175,1199]
                                        String: "Cache Public ECR Image" [1175,1199]
                                FIELD [1200,1224]
                                    String: "id" [1200,1204]
                                    STRING [1205,1224]
                                        String: "lambda_python_3_9" [1205,1224]
                                FIELD [1225,1250]
                                    String: "uses" [1225,1231]
                                    STRING [1232,1250]
                                        String: "actions/cache@v2" [1232,1250]
                                FIELD [1251,1302]
                                    String: "with" [1251,1257]
                                    OBJECT [1258,1302]
                                        FIELD [1259,1275]
                                            String: "path" [1259,1265]
                                            STRING [1266,1275]
                                                String: "~/cache" [1266,1275]
                                        FIELD [1276,1301]
                                            String: "key" [1276,1281]
                                            STRING [1282,1301]
                                                String: "lambda_python_3_9" [1282,1301]
                            OBJECT [1304,1584]
                                FIELD [1305,1377]
                                    String: "name" [1305,1311]
                                    STRING [1312,1377]
                                        String: "Handle Cache Miss (pull public ECR image & save it to tar file)" [1312,1377]
                                FIELD [1378,1431]
                                    String: "if" [1378,1382]
                                    STRING [1383,1431]
                                        String: "steps.cache-primes.outputs.cache-hit != 'true'" [1383,1431]
                                FIELD [1432,1583]
                                    String: "run" [1432,1437]
                                    STRING [1438,1583]
                                        String: "mkdir -p ~/cache\ndocker pull public.ecr.aws/lambda/python:3.9\ndocker save public.ecr.aws/lambda/python:3.9 -o ~/cache/lambda_python_3_9.tar\n" [1438,1583]
                            OBJECT [1585,1755]
                                FIELD [1586,1645]
                                    String: "name" [1586,1592]
                                    STRING [1593,1645]
                                        String: "Handle Cache Hit (load docker image from tar file)" [1593,1645]
                                FIELD [1646,1699]
                                    String: "if" [1646,1650]
                                    STRING [1651,1699]
                                        String: "steps.cache-primes.outputs.cache-hit == 'true'" [1651,1699]
                                FIELD [1700,1754]
                                    String: "run" [1700,1705]
                                    STRING [1706,1754]
                                        String: "docker load -i ~/cache/lambda_python_3_9.tar\n" [1706,1754]
                            OBJECT [1756,2171]
                                FIELD [1757,1780]
                                    String: "name" [1757,1763]
                                    STRING [1764,1780]
                                        String: "Build and push" [1764,1780]
                                FIELD [1781,1884]
                                    String: "env" [1781,1786]
                                    OBJECT [1787,1884]
                                        FIELD [1788,1844]
                                            String: "ECR_REGISTRY" [1788,1802]
                                            STRING [1803,1844]
                                                String: "${{ steps.login-ecr.outputs.registry }}" [1803,1844]
                                        FIELD [1845,1883]
                                            String: "ECR_REPOSITORY" [1845,1861]
                                            STRING [1862,1883]
                                                String: "feast-python-server" [1862,1883]
                                FIELD [1885,2170]
                                    String: "run" [1885,1890]
                                    STRING [1891,2170]
                                        String: "docker build \\\n  --file sdk/python/feast/infra/feature_servers/aws_lambda/Dockerfile \\\n  --tag $ECR_REGISTRY/$ECR_REPOSITORY:${{ steps.image-tag.outputs.DOCKER_IMAGE_TAG }} \\\n  .\ndocker push $ECR_REGISTRY/$ECR_REPOSITORY:${{ steps.image-tag.outputs.DOCKER_IMAGE_TAG }}\n" [1891,2170]
                    FIELD [2173,2253]
                        String: "outputs" [2173,2182]
                        OBJECT [2183,2253]
                            FIELD [2184,2252]
                                String: "DOCKER_IMAGE_TAG" [2184,2202]
                                STRING [2203,2252]
                                    String: "${{ steps.image-tag.outputs.DOCKER_IMAGE_TAG }}" [2203,2252]
            FIELD [2255,5707]
                String: "integration-test-python" [2255,2280]
                OBJECT [2281,5707]
                    FIELD [2282,2581]
                        String: "if" [2282,2286]
                        STRING [2287,2581]
                            String: "(github.event.action == 'labeled' && (github.event.label.name == 'approved' || github.event.label.name == 'ok-to-test')) || (github.event.action != 'labeled' && (contains(github.event.pull_request.labels.*.name, 'ok-to-test') || contains(github.event.pull_request.labels.*.name, 'approved')))" [2287,2581]
                    FIELD [2582,2610]
                        String: "needs" [2582,2589]
                        STRING [2590,2610]
                            String: "build-docker-image" [2590,2610]
                    FIELD [2611,2639]
                        String: "runs-on" [2611,2620]
                        STRING [2621,2639]
                            String: "${{ matrix.os }}" [2621,2639]
                    FIELD [2640,2727]
                        String: "strategy" [2640,2650]
                        OBJECT [2651,2727]
                            FIELD [2652,2669]
                                String: "fail-fast" [2652,2663]
                                FALSE [2664,2669]
                            FIELD [2670,2726]
                                String: "matrix" [2670,2678]
                                OBJECT [2679,2726]
                                    FIELD [2680,2702]
                                        String: "python-version" [2680,2696]
                                        ARRAY [2697,2702]
                                            NUMBER [2698,2701]
                                                Number: 3.7 [2698,2701]
                                    FIELD [2703,2725]
                                        String: "os" [2703,2707]
                                        ARRAY [2708,2725]
                                            STRING [2709,2724]
                                                String: "ubuntu-latest" [2709,2724]
                    FIELD [2728,2799]
                        String: "env" [2728,2733]
                        OBJECT [2734,2799]
                            FIELD [2735,2758]
                                String: "OS" [2735,2739]
                                STRING [2740,2758]
                                    String: "${{ matrix.os }}" [2740,2758]
                            FIELD [2759,2798]
                                String: "PYTHON" [2759,2767]
                                STRING [2768,2798]
                                    String: "${{ matrix.python-version }}" [2768,2798]
                    FIELD [2800,5706]
                        String: "steps" [2800,2807]
                        ARRAY [2808,5706]
                            OBJECT [2809,2937]
                                FIELD [2810,2838]
                                    String: "uses" [2810,2816]
                                    STRING [2817,2838]
                                        String: "actions/checkout@v2" [2817,2838]
                                FIELD [2839,2936]
                                    String: "with" [2839,2845]
                                    OBJECT [2846,2936]
                                        FIELD [2847,2910]
                                            String: "ref" [2847,2852]
                                            STRING [2853,2910]
                                                String: "refs/pull/${{ github.event.pull_request.number }}/merge" [2853,2910]
                                        FIELD [2911,2935]
                                            String: "submodules" [2911,2923]
                                            STRING [2924,2935]
                                                String: "recursive" [2924,2935]
                            OBJECT [2938,3081]
                                FIELD [2939,2959]
                                    String: "name" [2939,2945]
                                    STRING [2946,2959]
                                        String: "Start Redis" [2946,2959]
                                FIELD [2960,3006]
                                    String: "uses" [2960,2966]
                                    STRING [2967,3006]
                                        String: "supercharge/redis-github-action@1.4.0" [2967,3006]
                                FIELD [3007,3080]
                                    String: "with" [3007,3013]
                                    OBJECT [3014,3080]
                                        FIELD [3015,3060]
                                            String: "redis-version" [3015,3030]
                                            STRING [3031,3060]
                                                String: "${{ matrix.redis-version }}" [3031,3060]
                                        FIELD [3061,3079]
                                            String: "redis-port" [3061,3073]
                                            NUMBER [3074,3079]
                                                Number: 12345 [3074,3079]
                            OBJECT [3082,3236]
                                FIELD [3083,3104]
                                    String: "name" [3083,3089]
                                    STRING [3090,3104]
                                        String: "Setup Python" [3090,3104]
                                FIELD [3105,3137]
                                    String: "uses" [3105,3111]
                                    STRING [3112,3137]
                                        String: "actions/setup-python@v2" [3112,3137]
                                FIELD [3138,3157]
                                    String: "id" [3138,3142]
                                    STRING [3143,3157]
                                        String: "setup-python" [3143,3157]
                                FIELD [3158,3235]
                                    String: "with" [3158,3164]
                                    OBJECT [3165,3235]
                                        FIELD [3166,3213]
                                            String: "python-version" [3166,3182]
                                            STRING [3183,3213]
                                                String: "${{ matrix.python-version }}" [3183,3213]
                                        FIELD [3214,3234]
                                            String: "architecture" [3214,3228]
                                            STRING [3229,3234]
                                                String: "x64" [3229,3234]
                            OBJECT [3237,3332]
                                FIELD [3238,3255]
                                    String: "name" [3238,3244]
                                    STRING [3245,3255]
                                        String: "Setup Go" [3245,3255]
                                FIELD [3256,3271]
                                    String: "id" [3256,3260]
                                    STRING [3261,3271]
                                        String: "setup-go" [3261,3271]
                                FIELD [3272,3300]
                                    String: "uses" [3272,3278]
                                    STRING [3279,3300]
                                        String: "actions/setup-go@v2" [3279,3300]
                                FIELD [3301,3331]
                                    String: "with" [3301,3307]
                                    OBJECT [3308,3331]
                                        FIELD [3309,3330]
                                            String: "go-version" [3309,3321]
                                            STRING [3322,3330]
                                                String: "1.17.7" [3322,3330]
                            OBJECT [3333,3546]
                                FIELD [3334,3360]
                                    String: "name" [3334,3340]
                                    STRING [3341,3360]
                                        String: "Set up gcloud SDK" [3341,3360]
                                FIELD [3361,3407]
                                    String: "uses" [3361,3367]
                                    STRING [3368,3407]
                                        String: "google-github-actions/setup-gcloud@v0" [3368,3407]
                                FIELD [3408,3545]
                                    String: "with" [3408,3414]
                                    OBJECT [3415,3545]
                                        FIELD [3416,3460]
                                            String: "project_id" [3416,3428]
                                            STRING [3429,3460]
                                                String: "${{ secrets.GCP_PROJECT_ID }}" [3429,3460]
                                        FIELD [3461,3510]
                                            String: "service_account_key" [3461,3482]
                                            STRING [3483,3510]
                                                String: "${{ secrets.GCP_SA_KEY }}" [3483,3510]
                                        FIELD [3511,3544]
                                            String: "export_default_credentials" [3511,3539]
                                            TRUE [3540,3544]
                            OBJECT [3547,3592]
                                FIELD [3548,3571]
                                    String: "name" [3548,3554]
                                    STRING [3555,3571]
                                        String: "Use gcloud CLI" [3555,3571]
                                FIELD [3572,3591]
                                    String: "run" [3572,3577]
                                    STRING [3578,3591]
                                        String: "gcloud info" [3578,3591]
                            OBJECT [3593,3820]
                                FIELD [3594,3617]
                                    String: "name" [3594,3600]
                                    STRING [3601,3617]
                                        String: "Set up AWS SDK" [3601,3617]
                                FIELD [3618,3667]
                                    String: "uses" [3618,3624]
                                    STRING [3625,3667]
                                        String: "aws-actions/configure-aws-credentials@v1" [3625,3667]
                                FIELD [3668,3819]
                                    String: "with" [3668,3674]
                                    OBJECT [3675,3819]
                                        FIELD [3676,3730]
                                            String: "aws-access-key-id" [3676,3695]
                                            STRING [3696,3730]
                                                String: "${{ secrets.AWS_ACCESS_KEY_ID }}" [3696,3730]
                                        FIELD [3731,3793]
                                            String: "aws-secret-access-key" [3731,3754]
                                            STRING [3755,3793]
                                                String: "${{ secrets.AWS_SECRET_ACCESS_KEY }}" [3755,3793]
                                        FIELD [3794,3818]
                                            String: "aws-region" [3794,3806]
                                            STRING [3807,3818]
                                                String: "us-west-2" [3807,3818]
                            OBJECT [3821,3879]
                                FIELD [3822,3842]
                                    String: "name" [3822,3828]
                                    STRING [3829,3842]
                                        String: "Use AWS CLI" [3829,3842]
                                FIELD [3843,3878]
                                    String: "run" [3843,3848]
                                    STRING [3849,3878]
                                        String: "aws sts get-caller-identity" [3849,3878]
                            OBJECT [3880,3958]
                                FIELD [3881,3909]
                                    String: "name" [3881,3887]
                                    STRING [3888,3909]
                                        String: "Upgrade pip version" [3888,3909]
                                FIELD [3910,3957]
                                    String: "run" [3910,3915]
                                    STRING [3916,3957]
                                        String: "pip install --upgrade \"pip>=21.3.1\"\n" [3916,3957]
                            OBJECT [3959,4063]
                                FIELD [3960,3986]
                                    String: "name" [3960,3966]
                                    STRING [3967,3986]
                                        String: "Get pip cache dir" [3967,3986]
                                FIELD [3987,4003]
                                    String: "id" [3987,3991]
                                    STRING [3992,4003]
                                        String: "pip-cache" [3992,4003]
                                FIELD [4004,4062]
                                    String: "run" [4004,4009]
                                    STRING [4010,4062]
                                        String: "echo \"::set-output name=dir::$(pip cache dir)\"\n" [4010,4062]
                            OBJECT [4064,4469]
                                FIELD [4065,4083]
                                    String: "name" [4065,4071]
                                    STRING [4072,4083]
                                        String: "pip cache" [4072,4083]
                                FIELD [4084,4109]
                                    String: "uses" [4084,4090]
                                    STRING [4091,4109]
                                        String: "actions/cache@v2" [4091,4109]
                                FIELD [4110,4468]
                                    String: "with" [4110,4116]
                                    OBJECT [4117,4468]
                                        FIELD [4118,4230]
                                            String: "path" [4118,4124]
                                            STRING [4125,4230]
                                                String: "${{ steps.pip-cache.outputs.dir }}\n/opt/hostedtoolcache/Python\n/Users/runner/hostedtoolcache/Python\n" [4125,4230]
                                        FIELD [4231,4377]
                                            String: "key" [4231,4236]
                                            STRING [4237,4377]
                                                String: "${{ runner.os }}-${{ steps.setup-python.outputs.python-version }}-pip-${{ hashFiles(format('**/py{0}-ci-requirements.txt', env.PYTHON)) }}" [4237,4377]
                                        FIELD [4378,4467]
                                            String: "restore-keys" [4378,4392]
                                            STRING [4393,4467]
                                                String: "${{ runner.os }}-${{ steps.setup-python.outputs.python-version }}-pip-\n" [4393,4467]
                            OBJECT [4470,4528]
                                FIELD [4471,4497]
                                    String: "name" [4471,4477]
                                    STRING [4478,4497]
                                        String: "Install pip-tools" [4478,4497]
                                FIELD [4498,4527]
                                    String: "run" [4498,4503]
                                    STRING [4504,4527]
                                        String: "pip install pip-tools" [4504,4527]
                            OBJECT [4529,4630]
                                FIELD [4530,4559]
                                    String: "name" [4530,4536]
                                    STRING [4537,4559]
                                        String: "Install dependencies" [4537,4559]
                                FIELD [4560,4629]
                                    String: "run" [4560,4565]
                                    STRING [4566,4629]
                                        String: "make compile-protos-go\nmake install-python-ci-dependencies\n" [4566,4629]
                            OBJECT [4631,4868]
                                FIELD [4632,4660]
                                    String: "name" [4632,4638]
                                    STRING [4639,4660]
                                        String: "Setup Redis Cluster" [4639,4660]
                                FIELD [4661,4867]
                                    String: "run" [4661,4666]
                                    STRING [4667,4867]
                                        String: "docker pull vishnunair/docker-redis-cluster:latest\ndocker run -d -p 6001:6379 -p 6002:6380 -p 6003:6381 -p 6004:6382 -p 6005:6383 -p 6006:6384 --name redis-cluster vishnunair/docker-redis-cluster\n" [4667,4867]
                            OBJECT [4869,5470]
                                FIELD [4870,4890]
                                    String: "name" [4870,4876]
                                    STRING [4877,4890]
                                        String: "Test python" [4877,4890]
                                FIELD [4891,4913]
                                    String: "if" [4891,4895]
                                    STRING [4896,4913]
                                        String: "${{ always() }}" [4896,4913]
                                FIELD [4914,5356]
                                    String: "env" [4914,4919]
                                    OBJECT [4920,5356]
                                        FIELD [4921,5011]
                                            String: "FEAST_SERVER_DOCKER_IMAGE_TAG" [4921,4952]
                                            STRING [4953,5011]
                                                String: "${{ needs.build-docker-image.outputs.DOCKER_IMAGE_TAG }}" [4953,5011]
                                        FIELD [5012,5033]
                                            String: "FEAST_USAGE" [5012,5025]
                                            STRING [5026,5033]
                                                String: "False" [5026,5033]
                                        FIELD [5034,5050]
                                            String: "IS_TEST" [5034,5043]
                                            STRING [5044,5050]
                                                String: "True" [5044,5050]
                                        FIELD [5051,5117]
                                            String: "SNOWFLAKE_CI_DEPLOYMENT" [5051,5076]
                                            STRING [5077,5117]
                                                String: "${{ secrets.SNOWFLAKE_CI_DEPLOYMENT }}" [5077,5117]
                                        FIELD [5118,5172]
                                            String: "SNOWFLAKE_CI_USER" [5118,5137]
                                            STRING [5138,5172]
                                                String: "${{ secrets.SNOWFLAKE_CI_USER }}" [5138,5172]
                                        FIELD [5173,5235]
                                            String: "SNOWFLAKE_CI_PASSWORD" [5173,5196]
                                            STRING [5197,5235]
                                                String: "${{ secrets.SNOWFLAKE_CI_PASSWORD }}" [5197,5235]
                                        FIELD [5236,5290]
                                            String: "SNOWFLAKE_CI_ROLE" [5236,5255]
                                            STRING [5256,5290]
                                                String: "${{ secrets.SNOWFLAKE_CI_ROLE }}" [5256,5290]
                                        FIELD [5291,5355]
                                            String: "SNOWFLAKE_CI_WAREHOUSE" [5291,5315]
                                            STRING [5316,5355]
                                                String: "${{ secrets.SNOWFLAKE_CI_WAREHOUSE }}" [5316,5355]
                                FIELD [5357,5469]
                                    String: "run" [5357,5362]
                                    STRING [5363,5469]
                                        String: "pytest -n 8 --cov=./ --cov-report=xml --verbose --color=yes sdk/python/tests --integration --durations=5" [5363,5469]
                            OBJECT [5471,5705]
                                FIELD [5472,5507]
                                    String: "name" [5472,5478]
                                    STRING [5479,5507]
                                        String: "Upload coverage to Codecov" [5479,5507]
                                FIELD [5508,5542]
                                    String: "uses" [5508,5514]
                                    STRING [5515,5542]
                                        String: "codecov/codecov-action@v1" [5515,5542]
                                FIELD [5543,5704]
                                    String: "with" [5543,5549]
                                    OBJECT [5550,5704]
                                        FIELD [5551,5589]
                                            String: "token" [5551,5558]
                                            STRING [5559,5589]
                                                String: "${{ secrets.CODECOV_TOKEN }}" [5559,5589]
                                        FIELD [5590,5614]
                                            String: "files" [5590,5597]
                                            STRING [5598,5614]
                                                String: "./coverage.xml" [5598,5614]
                                        FIELD [5615,5641]
                                            String: "flags" [5615,5622]
                                            STRING [5623,5641]
                                                String: "integrationtests" [5623,5641]
                                        FIELD [5642,5664]
                                            String: "env_vars" [5642,5652]
                                            STRING [5653,5664]
                                                String: "OS,PYTHON" [5653,5664]
                                        FIELD [5665,5688]
                                            String: "fail_ci_if_error" [5665,5683]
                                            TRUE [5684,5688]
                                        FIELD [5689,5703]
                                            String: "verbose" [5689,5698]
                                            TRUE [5699,5703]