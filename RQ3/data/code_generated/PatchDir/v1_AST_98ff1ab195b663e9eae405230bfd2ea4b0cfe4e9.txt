OBJECT [0,5230]
    FIELD [1,20]
        String: "name" [1,7]
        STRING [8,20]
            String: "Autoformat" [8,20]
    FIELD [21,74]
        String: "on" [21,25]
        OBJECT [26,74]
            FIELD [27,73]
                String: "issue_comment" [27,42]
                OBJECT [43,73]
                    FIELD [44,72]
                        String: "types" [44,51]
                        ARRAY [52,72]
                            STRING [53,62]
                                String: "created" [53,62]
                            STRING [63,71]
                                String: "edited" [63,71]
    FIELD [75,147]
        String: "defaults" [75,85]
        OBJECT [86,147]
            FIELD [87,146]
                String: "run" [87,92]
                OBJECT [93,146]
                    FIELD [94,145]
                        String: "shell" [94,101]
                        STRING [102,145]
                            String: "bash --noprofile --norc -exo pipefail {0}" [102,145]
    FIELD [148,5229]
        String: "jobs" [148,154]
        OBJECT [155,5229]
            FIELD [156,1701]
                String: "check-comment" [156,171]
                OBJECT [172,1701]
                    FIELD [173,198]
                        String: "runs-on" [173,182]
                        STRING [183,198]
                            String: "ubuntu-latest" [183,198]
                    FIELD [199,219]
                        String: "timeout-minutes" [199,216]
                        NUMBER [217,219]
                            Number: 10 [217,219]
                    FIELD [220,379]
                        String: "if" [220,224]
                        STRING [225,379]
                            String: "${{ github.event.issue.pull_request && contains(github.event.comment.body, '@mlflow-automation') && contains(github.event.comment.body, 'autoformat') }}" [225,379]
                    FIELD [380,880]
                        String: "outputs" [380,389]
                        OBJECT [390,880]
                            FIELD [391,473]
                                String: "should_autoformat" [391,410]
                                STRING [411,473]
                                    String: "${{ fromJSON(steps.judge.outputs.result).shouldAutoformat }}" [411,473]
                            FIELD [474,543]
                                String: "repository" [474,486]
                                STRING [487,543]
                                    String: "${{ fromJSON(steps.judge.outputs.result).repository }}" [487,543]
                            FIELD [544,609]
                                String: "head_ref" [544,554]
                                STRING [555,609]
                                    String: "${{ fromJSON(steps.judge.outputs.result).head_ref }}" [555,609]
                            FIELD [610,675]
                                String: "head_sha" [610,620]
                                STRING [621,675]
                                    String: "${{ fromJSON(steps.judge.outputs.result).head_sha }}" [621,675]
                            FIELD [676,741]
                                String: "base_ref" [676,686]
                                STRING [687,741]
                                    String: "${{ fromJSON(steps.judge.outputs.result).base_ref }}" [687,741]
                            FIELD [742,807]
                                String: "base_sha" [742,752]
                                STRING [753,807]
                                    String: "${{ fromJSON(steps.judge.outputs.result).base_sha }}" [753,807]
                            FIELD [808,879]
                                String: "pull_number" [808,821]
                                STRING [822,879]
                                    String: "${{ fromJSON(steps.judge.outputs.result).pull_number }}" [822,879]
                    FIELD [881,1700]
                        String: "steps" [881,888]
                        ARRAY [889,1700]
                            OBJECT [890,920]
                                FIELD [891,919]
                                    String: "uses" [891,897]
                                    STRING [898,919]
                                        String: "actions/checkout@v3" [898,919]
                            OBJECT [921,1699]
                                FIELD [922,936]
                                    String: "name" [922,928]
                                    STRING [929,936]
                                        String: "judge" [929,936]
                                FIELD [937,949]
                                    String: "id" [937,941]
                                    STRING [942,949]
                                        String: "judge" [942,949]
                                FIELD [950,983]
                                    String: "uses" [950,956]
                                    STRING [957,983]
                                        String: "actions/github-script@v6" [957,983]
                                FIELD [984,1698]
                                    String: "with" [984,990]
                                    OBJECT [991,1698]
                                        FIELD [992,1036]
                                            String: "github-token" [992,1006]
                                            STRING [1007,1036]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [1007,1036]
                                        FIELD [1037,1697]
                                            String: "script" [1037,1045]
                                            STRING [1046,1697]
                                                String: "core.debug(JSON.stringify(context, null, 2));\nconst autoformat = require('./.github/workflows/autoformat.js');\nconst { comment } = context.payload;\nconst isMaintainer = autoformat.isMlflowMaintainer(comment.author_association);\nif (!isMaintainer) {\n  core.setFailed(\"Only MLflow maintainers can trigger this workflow.\");\n}\nconst shouldAutoformat = autoformat.shouldAutoformat(comment);\nif (shouldAutoformat) {\n  await autoformat.createReaction(context, github);\n  await autoformat.createStatus(context, github, core);\n}\nconst pullInfo = await autoformat.getPullInformation(context, github);\nreturn { ...pullInfo, shouldAutoformat };\n" [1046,1697]
            FIELD [1702,4656]
                String: "format" [1702,1710]
                OBJECT [1711,4656]
                    FIELD [1712,1737]
                        String: "runs-on" [1712,1721]
                        STRING [1722,1737]
                            String: "ubuntu-latest" [1722,1737]
                    FIELD [1738,1758]
                        String: "timeout-minutes" [1738,1755]
                        NUMBER [1756,1758]
                            Number: 30 [1756,1758]
                    FIELD [1759,1782]
                        String: "needs" [1759,1766]
                        STRING [1767,1782]
                            String: "check-comment" [1767,1782]
                    FIELD [1783,1852]
                        String: "if" [1783,1787]
                        STRING [1788,1852]
                            String: "${{ needs.check-comment.outputs.should_autoformat == 'true' }}" [1788,1852]
                    FIELD [1853,4655]
                        String: "steps" [1853,1860]
                        ARRAY [1861,4655]
                            OBJECT [1862,2081]
                                FIELD [1863,1891]
                                    String: "uses" [1863,1869]
                                    STRING [1870,1891]
                                        String: "actions/checkout@v3" [1870,1891]
                                FIELD [1892,2080]
                                    String: "with" [1892,1898]
                                    OBJECT [1899,2080]
                                        FIELD [1900,1960]
                                            String: "repository" [1900,1912]
                                            STRING [1913,1960]
                                                String: "${{ needs.check-comment.outputs.repository }}" [1913,1960]
                                        FIELD [1961,2012]
                                            String: "ref" [1961,1966]
                                            STRING [1967,2012]
                                                String: "${{ needs.check-comment.outputs.head_ref }}" [1967,2012]
                                        FIELD [2013,2030]
                                            String: "fetch-depth" [2013,2026]
                                            NUMBER [2027,2030]
                                                Number: 300 [2027,2030]
                                        FIELD [2031,2079]
                                            String: "token" [2031,2038]
                                            STRING [2039,2079]
                                                String: "${{ secrets.MLFLOW_AUTOMATION_TOKEN }}" [2039,2079]
                            OBJECT [2082,2911]
                                FIELD [2083,2102]
                                    String: "name" [2083,2089]
                                    STRING [2090,2102]
                                        String: "Check diff" [2090,2102]
                                FIELD [2103,2114]
                                    String: "id" [2103,2107]
                                    STRING [2108,2114]
                                        String: "diff" [2108,2114]
                                FIELD [2115,2167]
                                    String: "env" [2115,2120]
                                    OBJECT [2121,2167]
                                        FIELD [2122,2166]
                                            String: "GITHUB_TOKEN" [2122,2136]
                                            STRING [2137,2166]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [2137,2166]
                                FIELD [2168,2910]
                                    String: "run" [2168,2173]
                                    STRING [2174,2910]
                                        String: "changed_files=\"$(gh pr view --repo ${{ github.repository }} ${{ needs.check-comment.outputs.pull_number }} --json files --jq '.files.[].path')\"\nprotos=$([[ -z $(echo \"$changed_files\" | grep '^mlflow/protos') ]] && echo \"false\" || echo \"true\")\npython=$([[ -z $(echo \"$changed_files\" | grep '\\.py$\\|^pyproject\\.toml$') ]] && echo \"false\" || echo \"true\")\njs=$([[ -z $(echo \"$changed_files\" | grep '^mlflow/server/js') ]] && echo \"false\" || echo \"true\")\nr=$([[ -z $(echo \"$changed_files\" | grep '^mlflow/R/mlflow') ]] && echo \"false\" || echo \"true\")\necho \"protos=$protos\" >> $GITHUB_OUTPUT\necho \"python=$python\" >> $GITHUB_OUTPUT\necho \"js=$js\" >> $GITHUB_OUTPUT\necho \"r=$r\" >> $GITHUB_OUTPUT\n" [2174,2910]
                            OBJECT [2912,3258]
                                FIELD [2913,2939]
                                    String: "name" [2913,2919]
                                    STRING [2920,2939]
                                        String: "Merge base branch" [2920,2939]
                                FIELD [2940,3257]
                                    String: "run" [2940,2945]
                                    STRING [2946,3257]
                                        String: "git config user.name 'mlflow-automation'\ngit config user.email 'mlflow-automation@users.noreply.github.com'\ngit remote add mlflow https://github.com/mlflow/mlflow.git\ngit remote -v\ngit fetch mlflow ${{ needs.check-comment.outputs.base_ref }}\ngit merge mlflow/${{ needs.check-comment.outputs.base_ref }}\n" [2946,3257]
                            OBJECT [3259,3329]
                                FIELD [3260,3328]
                                    String: "run" [3260,3265]
                                    STRING [3266,3328]
                                        String: "pre-commit run prettier --all-files --color=always || true\n" [3266,3328]
                            OBJECT [3330,3466]
                                FIELD [3331,3373]
                                    String: "if" [3331,3335]
                                    STRING [3336,3373]
                                        String: "steps.diff.outputs.protos == 'true'" [3336,3373]
                                FIELD [3374,3401]
                                    String: "env" [3374,3379]
                                    OBJECT [3380,3401]
                                        FIELD [3381,3400]
                                            String: "DOCKER_BUILDKIT" [3381,3398]
                                            NUMBER [3399,3400]
                                                Number: 1 [3399,3400]
                                FIELD [3402,3465]
                                    String: "run" [3402,3407]
                                    STRING [3408,3465]
                                        String: "docker build -t gen-protos -f dev/Dockerfile.protos .\n" [3408,3465]
                            OBJECT [3467,3602]
                                FIELD [3468,3510]
                                    String: "if" [3468,3472]
                                    STRING [3473,3510]
                                        String: "steps.diff.outputs.protos == 'true'" [3473,3510]
                                FIELD [3511,3601]
                                    String: "run" [3511,3516]
                                    STRING [3517,3601]
                                        String: "docker run --rm -w /mlflow -v $(pwd):/mlflow gen-protos ./dev/generate-protos.sh\n" [3517,3601]
                            OBJECT [3603,3687]
                                FIELD [3604,3646]
                                    String: "if" [3604,3608]
                                    STRING [3609,3646]
                                        String: "steps.diff.outputs.python == 'true'" [3609,3646]
                                FIELD [3647,3686]
                                    String: "uses" [3647,3653]
                                    STRING [3654,3686]
                                        String: "./.github/actions/setup-python" [3654,3686]
                            OBJECT [3688,3792]
                                FIELD [3689,3731]
                                    String: "if" [3689,3693]
                                    STRING [3694,3731]
                                        String: "steps.diff.outputs.python == 'true'" [3694,3731]
                                FIELD [3732,3791]
                                    String: "run" [3732,3737]
                                    STRING [3738,3791]
                                        String: "pip install -r requirements/lint-requirements.txt\n" [3738,3791]
                            OBJECT [3793,3929]
                                FIELD [3794,3836]
                                    String: "if" [3794,3798]
                                    STRING [3799,3836]
                                        String: "steps.diff.outputs.python == 'true'" [3799,3836]
                                FIELD [3837,3928]
                                    String: "run" [3837,3842]
                                    STRING [3843,3928]
                                        String: "ruff --fix .\nblack .\nblacken-docs $(git ls-files '*.py' '*.rst' '*.md') || true\n" [3843,3928]
                            OBJECT [3930,4030]
                                FIELD [3931,3969]
                                    String: "if" [3931,3935]
                                    STRING [3936,3969]
                                        String: "steps.diff.outputs.js == 'true'" [3936,3969]
                                FIELD [3970,4000]
                                    String: "uses" [3970,3976]
                                    STRING [3977,4000]
                                        String: "actions/setup-node@v3" [3977,4000]
                                FIELD [4001,4029]
                                    String: "with" [4001,4007]
                                    OBJECT [4008,4029]
                                        FIELD [4009,4028]
                                            String: "node-version" [4009,4023]
                                            STRING [4024,4028]
                                                String: "16" [4024,4028]
                            OBJECT [4031,4133]
                                FIELD [4032,4070]
                                    String: "if" [4032,4036]
                                    STRING [4037,4070]
                                        String: "steps.diff.outputs.js == 'true'" [4037,4070]
                                FIELD [4071,4109]
                                    String: "working-directory" [4071,4090]
                                    STRING [4091,4109]
                                        String: "mlflow/server/js" [4091,4109]
                                FIELD [4110,4132]
                                    String: "run" [4110,4115]
                                    STRING [4116,4132]
                                        String: "yarn install\n" [4116,4132]
                            OBJECT [4134,4237]
                                FIELD [4135,4173]
                                    String: "if" [4135,4139]
                                    STRING [4140,4173]
                                        String: "steps.diff.outputs.js == 'true'" [4140,4173]
                                FIELD [4174,4212]
                                    String: "working-directory" [4174,4193]
                                    STRING [4194,4212]
                                        String: "mlflow/server/js" [4194,4212]
                                FIELD [4213,4236]
                                    String: "run" [4213,4218]
                                    STRING [4219,4236]
                                        String: "yarn lint:fix\n" [4219,4236]
                            OBJECT [4238,4337]
                                FIELD [4239,4277]
                                    String: "if" [4239,4243]
                                    STRING [4244,4277]
                                        String: "steps.diff.outputs.js == 'true'" [4244,4277]
                                FIELD [4278,4316]
                                    String: "working-directory" [4278,4297]
                                    STRING [4298,4316]
                                        String: "mlflow/server/js" [4298,4316]
                                FIELD [4317,4336]
                                    String: "run" [4317,4322]
                                    STRING [4323,4336]
                                        String: "yarn i18n\n" [4323,4336]
                            OBJECT [4338,4430]
                                FIELD [4339,4376]
                                    String: "if" [4339,4343]
                                    STRING [4344,4376]
                                        String: "steps.diff.outputs.r == 'true'" [4344,4376]
                                FIELD [4377,4403]
                                    String: "working-directory" [4377,4396]
                                    STRING [4397,4403]
                                        String: "docs" [4397,4403]
                                FIELD [4404,4429]
                                    String: "run" [4404,4409]
                                    STRING [4410,4429]
                                        String: "./build-rdoc.sh\n" [4410,4429]
                            OBJECT [4431,4654]
                                FIELD [4432,4453]
                                    String: "name" [4432,4438]
                                    STRING [4439,4453]
                                        String: "Push changes" [4439,4453]
                                FIELD [4454,4653]
                                    String: "run" [4454,4459]
                                    STRING [4460,4653]
                                        String: "if [ -n \"$(git status --porcelain)\" ]; then\n  git add -A\n  git commit -s -m \"Autoformat: https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}\"\n  git push\nfi\n" [4460,4653]
            FIELD [4657,5228]
                String: "update-status" [4657,4672]
                OBJECT [4673,5228]
                    FIELD [4674,4699]
                        String: "runs-on" [4674,4683]
                        STRING [4684,4699]
                            String: "ubuntu-latest" [4684,4699]
                    FIELD [4700,4720]
                        String: "timeout-minutes" [4700,4717]
                        NUMBER [4718,4720]
                            Number: 10 [4718,4720]
                    FIELD [4721,4755]
                        String: "needs" [4721,4728]
                        ARRAY [4729,4755]
                            STRING [4730,4745]
                                String: "check-comment" [4730,4745]
                            STRING [4746,4754]
                                String: "format" [4746,4754]
                    FIELD [4756,4830]
                        String: "if" [4756,4760]
                        STRING [4761,4830]
                            String: "always() && needs.check-comment.outputs.should_autoformat == 'true'" [4761,4830]
                    FIELD [4831,5227]
                        String: "steps" [4831,4838]
                        ARRAY [4839,5227]
                            OBJECT [4840,4870]
                                FIELD [4841,4869]
                                    String: "uses" [4841,4847]
                                    STRING [4848,4869]
                                        String: "actions/checkout@v3" [4848,4869]
                            OBJECT [4871,5226]
                                FIELD [4872,4894]
                                    String: "name" [4872,4878]
                                    STRING [4879,4894]
                                        String: "Update status" [4879,4894]
                                FIELD [4895,4928]
                                    String: "uses" [4895,4901]
                                    STRING [4902,4928]
                                        String: "actions/github-script@v6" [4902,4928]
                                FIELD [4929,5225]
                                    String: "with" [4929,4935]
                                    OBJECT [4936,5225]
                                        FIELD [4937,4981]
                                            String: "github-token" [4937,4951]
                                            STRING [4952,4981]
                                                String: "${{ secrets.GITHUB_TOKEN }}" [4952,4981]
                                        FIELD [4982,5224]
                                            String: "script" [4982,4990]
                                            STRING [4991,5224]
                                                String: "const needs = ${{ toJson(needs) }};\nconst head_sha = '${{ needs.check-comment.outputs.head_sha }}'\nconst autoformat = require('./.github/workflows/autoformat.js');\nawait autoformat.updateStatus(context, github, head_sha, needs);" [4991,5224]