OBJECT [0,17556]
    FIELD [1,35]
        String: "name" [1,7]
        STRING [8,35]
            String: "Self-hosted runner (push)" [8,35]
    FIELD [36,282]
        String: "on" [36,40]
        OBJECT [41,282]
            FIELD [42,149]
                String: "workflow_run" [42,56]
                OBJECT [57,149]
                    FIELD [58,106]
                        String: "workflows" [58,69]
                        ARRAY [70,106]
                            STRING [71,105]
                                String: "Self-hosted runner (push-caller)" [71,105]
                    FIELD [107,126]
                        String: "branches" [107,117]
                        ARRAY [118,126]
                            STRING [119,125]
                                String: "main" [119,125]
                    FIELD [127,148]
                        String: "types" [127,134]
                        ARRAY [135,148]
                            STRING [136,147]
                                String: "completed" [136,147]
            FIELD [150,254]
                String: "push" [150,156]
                OBJECT [157,254]
                    FIELD [158,184]
                        String: "branches" [158,168]
                        ARRAY [169,184]
                            STRING [170,176]
                                String: "ci_*" [170,176]
                            STRING [177,183]
                                String: "ci-*" [177,183]
                    FIELD [185,253]
                        String: "paths" [185,192]
                        ARRAY [193,253]
                            STRING [194,202]
                                String: "src/**" [194,202]
                            STRING [203,213]
                                String: "tests/**" [203,213]
                            STRING [214,226]
                                String: ".github/**" [214,226]
                            STRING [227,241]
                                String: "templates/**" [227,241]
                            STRING [242,252]
                                String: "utils/**" [242,252]
            FIELD [255,281]
                String: "repository_dispatch" [255,276]
                NULL [277,281]
    FIELD [283,458]
        String: "env" [283,288]
        OBJECT [289,458]
            FIELD [290,312]
                String: "HF_HOME" [290,299]
                STRING [300,312]
                    String: "/mnt/cache" [300,312]
            FIELD [313,338]
                String: "TRANSFORMERS_IS_CI" [313,333]
                TRUE [334,338]
            FIELD [339,358]
                String: "OMP_NUM_THREADS" [339,356]
                NUMBER [357,358]
                    Number: 8 [357,358]
            FIELD [359,378]
                String: "MKL_NUM_THREADS" [359,376]
                NUMBER [377,378]
                    Number: 8 [377,378]
            FIELD [379,398]
                String: "PYTEST_TIMEOUT" [379,395]
                NUMBER [396,398]
                    Number: 60 [396,398]
            FIELD [399,431]
                String: "TF_FORCE_GPU_ALLOW_GROWTH" [399,426]
                TRUE [427,431]
            FIELD [432,457]
                String: "RUN_PT_TF_CROSS_TESTS" [432,455]
                NUMBER [456,457]
                    Number: 1 [456,457]
    FIELD [459,17555]
        String: "jobs" [459,465]
        OBJECT [466,17555]
            FIELD [467,2887]
                String: "setup" [467,474]
                OBJECT [475,2887]
                    FIELD [476,490]
                        String: "name" [476,482]
                        STRING [483,490]
                            String: "Setup" [483,490]
                    FIELD [491,516]
                        String: "runs-on" [491,500]
                        STRING [501,516]
                            String: "ubuntu-latest" [501,516]
                    FIELD [517,632]
                        String: "outputs" [517,526]
                        OBJECT [527,632]
                            FIELD [528,577]
                                String: "matrix" [528,536]
                                STRING [537,577]
                                    String: "${{ steps.set-matrix.outputs.matrix }}" [537,577]
                            FIELD [578,631]
                                String: "test_map" [578,588]
                                STRING [589,631]
                                    String: "${{ steps.set-matrix.outputs.test_map }}" [589,631]
                    FIELD [633,2886]
                        String: "steps" [633,640]
                        ARRAY [641,2886]
                            OBJECT [642,1359]
                                FIELD [643,688]
                                    String: "name" [643,649]
                                    STRING [650,688]
                                        String: "Prepare custom environment variables" [650,688]
                                FIELD [689,703]
                                    String: "shell" [689,696]
                                    STRING [697,703]
                                        String: "bash" [697,703]
                                FIELD [704,1358]
                                    String: "run" [704,709]
                                    STRING [710,1358]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [710,1358]
                            OBJECT [1360,1495]
                                FIELD [1361,1397]
                                    String: "name" [1361,1367]
                                    STRING [1368,1397]
                                        String: "print environment variables" [1368,1397]
                                FIELD [1398,1494]
                                    String: "run" [1398,1403]
                                    STRING [1404,1494]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [1404,1494]
                            OBJECT [1496,1582]
                                FIELD [1497,1527]
                                    String: "name" [1497,1503]
                                    STRING [1504,1527]
                                        String: "Checkout transformers" [1504,1527]
                                FIELD [1528,1556]
                                    String: "uses" [1528,1534]
                                    STRING [1535,1556]
                                        String: "actions/checkout@v2" [1535,1556]
                                FIELD [1557,1581]
                                    String: "with" [1557,1563]
                                    OBJECT [1564,1581]
                                        FIELD [1565,1580]
                                            String: "fetch-depth" [1565,1578]
                                            NUMBER [1579,1580]
                                                Number: 2 [1579,1580]
                            OBJECT [1583,1868]
                                FIELD [1584,1633]
                                    String: "name" [1584,1590]
                                    STRING [1591,1633]
                                        String: "Update clone using environment variables" [1591,1633]
                                FIELD [1634,1867]
                                    String: "run" [1634,1639]
                                    STRING [1640,1867]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [1640,1867]
                            OBJECT [1869,1971]
                                FIELD [1870,1886]
                                    String: "name" [1870,1876]
                                    STRING [1877,1886]
                                        String: "Cleanup" [1877,1886]
                                FIELD [1887,1970]
                                    String: "run" [1887,1892]
                                    STRING [1893,1970]
                                        String: "rm -rf tests/__pycache__\nrm -rf tests/models/__pycache__\nrm -rf reports\n" [1893,1970]
                            OBJECT [1972,2130]
                                FIELD [1973,2004]
                                    String: "name" [1973,1979]
                                    STRING [1980,2004]
                                        String: "Fetch the tests to run" [1980,2004]
                                FIELD [2005,2129]
                                    String: "run" [2005,2010]
                                    STRING [2011,2129]
                                        String: "pip install --upgrade git-python\npython utils/tests_fetcher.py --diff_with_last_commit | tee test_preparation.txt\n" [2011,2129]
                            OBJECT [2131,2259]
                                FIELD [2132,2161]
                                    String: "name" [2132,2138]
                                    STRING [2139,2161]
                                        String: "Report fetched tests" [2139,2161]
                                FIELD [2162,2197]
                                    String: "uses" [2162,2168]
                                    STRING [2169,2197]
                                        String: "actions/upload-artifact@v2" [2169,2197]
                                FIELD [2198,2258]
                                    String: "with" [2198,2204]
                                    OBJECT [2205,2258]
                                        FIELD [2206,2227]
                                            String: "name" [2206,2212]
                                            STRING [2213,2227]
                                                String: "test_fetched" [2213,2227]
                                        FIELD [2228,2257]
                                            String: "path" [2228,2234]
                                            STRING [2235,2257]
                                                String: "test_preparation.txt" [2235,2257]
                            OBJECT [2260,2885]
                                FIELD [2261,2278]
                                    String: "id" [2261,2265]
                                    STRING [2266,2278]
                                        String: "set-matrix" [2266,2278]
                                FIELD [2279,2314]
                                    String: "name" [2279,2285]
                                    STRING [2286,2314]
                                        String: "Organize tests into models" [2286,2314]
                                FIELD [2315,2884]
                                    String: "run" [2315,2320]
                                    STRING [2321,2884]
                                        String: "if [ -f test_map.json ]; then\n    keys=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); d = list(test_map.keys()); print(d)')\n    test_map=$(python3 -c 'import json; fp = open(\"test_map.json\"); test_map = json.load(fp); fp.close(); print(test_map)')\nelse\n    keys=$(python3 -c 'keys = [\"dummy\"]; print(keys)')\n    test_map=$(python3 -c 'test_map = {\"dummy\": []}; print(test_map)')\nfi\necho $keys\necho $test_map\necho \"::set-output name=matrix::$keys\"\necho \"::set-output name=test_map::$test_map\"\n" [2321,2884]
            FIELD [2888,3296]
                String: "run_check_runners" [2888,2907]
                OBJECT [2908,3296]
                    FIELD [2909,2931]
                        String: "name" [2909,2915]
                        STRING [2916,2931]
                            String: "Check Runners" [2916,2931]
                    FIELD [2932,2947]
                        String: "needs" [2932,2939]
                        STRING [2940,2947]
                            String: "setup" [2940,2947]
                    FIELD [2948,3013]
                        String: "strategy" [2948,2958]
                        OBJECT [2959,3013]
                            FIELD [2960,3012]
                                String: "matrix" [2960,2968]
                                OBJECT [2969,3012]
                                    FIELD [2970,3011]
                                        String: "machine_type" [2970,2984]
                                        ARRAY [2985,3011]
                                            STRING [2986,2998]
                                                String: "single-gpu" [2986,2998]
                                            STRING [2999,3010]
                                                String: "multi-gpu" [2999,3010]
                    FIELD [3014,3081]
                        String: "runs-on" [3014,3023]
                        ARRAY [3024,3081]
                            STRING [3025,3038]
                                String: "self-hosted" [3025,3038]
                            STRING [3039,3051]
                                String: "docker-gpu" [3039,3051]
                            STRING [3052,3080]
                                String: "${{ matrix.machine_type }}" [3052,3080]
                    FIELD [3082,3242]
                        String: "container" [3082,3093]
                        OBJECT [3094,3242]
                            FIELD [3095,3144]
                                String: "image" [3095,3102]
                                STRING [3103,3144]
                                    String: "huggingface/transformers-all-latest-gpu" [3103,3144]
                            FIELD [3145,3241]
                                String: "options" [3145,3154]
                                STRING [3155,3241]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [3155,3241]
                    FIELD [3243,3295]
                        String: "steps" [3243,3250]
                        ARRAY [3251,3295]
                            OBJECT [3252,3294]
                                FIELD [3253,3272]
                                    String: "name" [3253,3259]
                                    STRING [3260,3272]
                                        String: "NVIDIA-SMI" [3260,3272]
                                FIELD [3273,3293]
                                    String: "run" [3273,3278]
                                    STRING [3279,3293]
                                        String: "nvidia-smi\n" [3279,3293]
            FIELD [3297,6239]
                String: "run_tests_single_gpu" [3297,3319]
                OBJECT [3320,6239]
                    FIELD [3321,3341]
                        String: "name" [3321,3327]
                        STRING [3328,3341]
                            String: "Model tests" [3328,3341]
                    FIELD [3342,3379]
                        String: "needs" [3342,3349]
                        ARRAY [3350,3379]
                            STRING [3351,3358]
                                String: "setup" [3351,3358]
                            STRING [3359,3378]
                                String: "run_check_runners" [3359,3378]
                    FIELD [3380,3450]
                        String: "if" [3380,3384]
                        STRING [3385,3450]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [3385,3450]
                    FIELD [3451,3578]
                        String: "strategy" [3451,3461]
                        OBJECT [3462,3578]
                            FIELD [3463,3480]
                                String: "fail-fast" [3463,3474]
                                FALSE [3475,3480]
                            FIELD [3481,3577]
                                String: "matrix" [3481,3489]
                                OBJECT [3490,3577]
                                    FIELD [3491,3546]
                                        String: "folders" [3491,3500]
                                        STRING [3501,3546]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [3501,3546]
                                    FIELD [3547,3576]
                                        String: "machine_type" [3547,3561]
                                        ARRAY [3562,3576]
                                            STRING [3563,3575]
                                                String: "single-gpu" [3563,3575]
                    FIELD [3579,3646]
                        String: "runs-on" [3579,3588]
                        ARRAY [3589,3646]
                            STRING [3590,3603]
                                String: "self-hosted" [3590,3603]
                            STRING [3604,3616]
                                String: "docker-gpu" [3604,3616]
                            STRING [3617,3645]
                                String: "${{ matrix.machine_type }}" [3617,3645]
                    FIELD [3647,3807]
                        String: "container" [3647,3658]
                        OBJECT [3659,3807]
                            FIELD [3660,3709]
                                String: "image" [3660,3667]
                                STRING [3668,3709]
                                    String: "huggingface/transformers-all-latest-gpu" [3668,3709]
                            FIELD [3710,3806]
                                String: "options" [3710,3719]
                                STRING [3720,3806]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [3720,3806]
                    FIELD [3808,6238]
                        String: "steps" [3808,3815]
                        ARRAY [3816,6238]
                            OBJECT [3817,4534]
                                FIELD [3818,3863]
                                    String: "name" [3818,3824]
                                    STRING [3825,3863]
                                        String: "Prepare custom environment variables" [3825,3863]
                                FIELD [3864,3878]
                                    String: "shell" [3864,3871]
                                    STRING [3872,3878]
                                        String: "bash" [3872,3878]
                                FIELD [3879,4533]
                                    String: "run" [3879,3884]
                                    STRING [3885,4533]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [3885,4533]
                            OBJECT [4535,4670]
                                FIELD [4536,4572]
                                    String: "name" [4536,4542]
                                    STRING [4543,4572]
                                        String: "print environment variables" [4543,4572]
                                FIELD [4573,4669]
                                    String: "run" [4573,4578]
                                    STRING [4579,4669]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [4579,4669]
                            OBJECT [4671,4992]
                                FIELD [4672,4721]
                                    String: "name" [4672,4678]
                                    STRING [4679,4721]
                                        String: "Update clone using environment variables" [4679,4721]
                                FIELD [4722,4757]
                                    String: "working-directory" [4722,4741]
                                    STRING [4742,4757]
                                        String: "/transformers" [4742,4757]
                                FIELD [4758,4991]
                                    String: "run" [4758,4763]
                                    STRING [4764,4991]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [4764,4991]
                            OBJECT [4993,5339]
                                FIELD [4994,5036]
                                    String: "name" [4994,5000]
                                    STRING [5001,5036]
                                        String: "Echo folder ${{ matrix.folders }}" [5001,5036]
                                FIELD [5037,5051]
                                    String: "shell" [5037,5044]
                                    STRING [5045,5051]
                                        String: "bash" [5045,5051]
                                FIELD [5052,5338]
                                    String: "run" [5052,5057]
                                    STRING [5058,5338]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [5058,5338]
                            OBJECT [5340,5382]
                                FIELD [5341,5360]
                                    String: "name" [5341,5347]
                                    STRING [5348,5360]
                                        String: "NVIDIA-SMI" [5348,5360]
                                FIELD [5361,5381]
                                    String: "run" [5361,5366]
                                    STRING [5367,5381]
                                        String: "nvidia-smi\n" [5367,5381]
                            OBJECT [5383,5478]
                                FIELD [5384,5404]
                                    String: "name" [5384,5390]
                                    STRING [5391,5404]
                                        String: "Environment" [5391,5404]
                                FIELD [5405,5440]
                                    String: "working-directory" [5405,5424]
                                    STRING [5425,5440]
                                        String: "/transformers" [5425,5440]
                                FIELD [5441,5477]
                                    String: "run" [5441,5446]
                                    STRING [5447,5477]
                                        String: "python3 utils/print_env.py\n" [5447,5477]
                            OBJECT [5479,5752]
                                FIELD [5480,5527]
                                    String: "name" [5480,5486]
                                    STRING [5487,5527]
                                        String: "Run all non-slow selected tests on GPU" [5487,5527]
                                FIELD [5528,5563]
                                    String: "working-directory" [5528,5547]
                                    STRING [5548,5563]
                                        String: "/transformers" [5548,5563]
                                FIELD [5564,5751]
                                    String: "run" [5564,5569]
                                    STRING [5570,5751]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [5570,5751]
                            OBJECT [5753,5946]
                                FIELD [5754,5784]
                                    String: "name" [5754,5760]
                                    STRING [5761,5784]
                                        String: "Failure short reports" [5761,5784]
                                FIELD [5785,5808]
                                    String: "if" [5785,5789]
                                    STRING [5790,5808]
                                        String: "${{ failure() }}" [5790,5808]
                                FIELD [5809,5833]
                                    String: "continue-on-error" [5809,5828]
                                    TRUE [5829,5833]
                                FIELD [5834,5945]
                                    String: "run" [5834,5839]
                                    STRING [5840,5945]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [5840,5945]
                            OBJECT [5947,6237]
                                FIELD [5948,5985]
                                    String: "name" [5948,5954]
                                    STRING [5955,5985]
                                        String: "Test suite reports artifacts" [5955,5985]
                                FIELD [5986,6008]
                                    String: "if" [5986,5990]
                                    STRING [5991,6008]
                                        String: "${{ always() }}" [5991,6008]
                                FIELD [6009,6044]
                                    String: "uses" [6009,6015]
                                    STRING [6016,6044]
                                        String: "actions/upload-artifact@v2" [6016,6044]
                                FIELD [6045,6236]
                                    String: "with" [6045,6051]
                                    OBJECT [6052,6236]
                                        FIELD [6053,6145]
                                            String: "name" [6053,6059]
                                            STRING [6060,6145]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [6060,6145]
                                        FIELD [6146,6235]
                                            String: "path" [6146,6152]
                                            STRING [6153,6235]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [6153,6235]
            FIELD [6240,9218]
                String: "run_tests_multi_gpu" [6240,6261]
                OBJECT [6262,9218]
                    FIELD [6263,6283]
                        String: "name" [6263,6269]
                        STRING [6270,6283]
                            String: "Model tests" [6270,6283]
                    FIELD [6284,6321]
                        String: "needs" [6284,6291]
                        ARRAY [6292,6321]
                            STRING [6293,6300]
                                String: "setup" [6293,6300]
                            STRING [6301,6320]
                                String: "run_check_runners" [6301,6320]
                    FIELD [6322,6392]
                        String: "if" [6322,6326]
                        STRING [6327,6392]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'dummy') != true" [6327,6392]
                    FIELD [6393,6519]
                        String: "strategy" [6393,6403]
                        OBJECT [6404,6519]
                            FIELD [6405,6422]
                                String: "fail-fast" [6405,6416]
                                FALSE [6417,6422]
                            FIELD [6423,6518]
                                String: "matrix" [6423,6431]
                                OBJECT [6432,6518]
                                    FIELD [6433,6488]
                                        String: "folders" [6433,6442]
                                        STRING [6443,6488]
                                            String: "${{ fromJson(needs.setup.outputs.matrix) }}" [6443,6488]
                                    FIELD [6489,6517]
                                        String: "machine_type" [6489,6503]
                                        ARRAY [6504,6517]
                                            STRING [6505,6516]
                                                String: "multi-gpu" [6505,6516]
                    FIELD [6520,6587]
                        String: "runs-on" [6520,6529]
                        ARRAY [6530,6587]
                            STRING [6531,6544]
                                String: "self-hosted" [6531,6544]
                            STRING [6545,6557]
                                String: "docker-gpu" [6545,6557]
                            STRING [6558,6586]
                                String: "${{ matrix.machine_type }}" [6558,6586]
                    FIELD [6588,6750]
                        String: "container" [6588,6599]
                        OBJECT [6600,6750]
                            FIELD [6601,6650]
                                String: "image" [6601,6608]
                                STRING [6609,6650]
                                    String: "huggingface/transformers-all-latest-gpu" [6609,6650]
                            FIELD [6651,6749]
                                String: "options" [6651,6660]
                                STRING [6661,6749]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [6661,6749]
                    FIELD [6751,9217]
                        String: "steps" [6751,6758]
                        ARRAY [6759,9217]
                            OBJECT [6760,7477]
                                FIELD [6761,6806]
                                    String: "name" [6761,6767]
                                    STRING [6768,6806]
                                        String: "Prepare custom environment variables" [6768,6806]
                                FIELD [6807,6821]
                                    String: "shell" [6807,6814]
                                    STRING [6815,6821]
                                        String: "bash" [6815,6821]
                                FIELD [6822,7476]
                                    String: "run" [6822,6827]
                                    STRING [6828,7476]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [6828,7476]
                            OBJECT [7478,7613]
                                FIELD [7479,7515]
                                    String: "name" [7479,7485]
                                    STRING [7486,7515]
                                        String: "print environment variables" [7486,7515]
                                FIELD [7516,7612]
                                    String: "run" [7516,7521]
                                    STRING [7522,7612]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [7522,7612]
                            OBJECT [7614,7935]
                                FIELD [7615,7664]
                                    String: "name" [7615,7621]
                                    STRING [7622,7664]
                                        String: "Update clone using environment variables" [7622,7664]
                                FIELD [7665,7700]
                                    String: "working-directory" [7665,7684]
                                    STRING [7685,7700]
                                        String: "/transformers" [7685,7700]
                                FIELD [7701,7934]
                                    String: "run" [7701,7706]
                                    STRING [7707,7934]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [7707,7934]
                            OBJECT [7936,8282]
                                FIELD [7937,7979]
                                    String: "name" [7937,7943]
                                    STRING [7944,7979]
                                        String: "Echo folder ${{ matrix.folders }}" [7944,7979]
                                FIELD [7980,7994]
                                    String: "shell" [7980,7987]
                                    STRING [7988,7994]
                                        String: "bash" [7988,7994]
                                FIELD [7995,8281]
                                    String: "run" [7995,8000]
                                    STRING [8001,8281]
                                        String: "echo \"${{ matrix.folders }}\"\necho \"${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\"\nmatrix_folders=${{ matrix.folders }}\nmatrix_folders=${matrix_folders/'models/'/'models_'}\necho \"$matrix_folders\"\necho \"matrix_folders=$matrix_folders\" >> $GITHUB_ENV\n" [8001,8281]
                            OBJECT [8283,8325]
                                FIELD [8284,8303]
                                    String: "name" [8284,8290]
                                    STRING [8291,8303]
                                        String: "NVIDIA-SMI" [8291,8303]
                                FIELD [8304,8324]
                                    String: "run" [8304,8309]
                                    STRING [8310,8324]
                                        String: "nvidia-smi\n" [8310,8324]
                            OBJECT [8326,8421]
                                FIELD [8327,8347]
                                    String: "name" [8327,8333]
                                    STRING [8334,8347]
                                        String: "Environment" [8334,8347]
                                FIELD [8348,8383]
                                    String: "working-directory" [8348,8367]
                                    STRING [8368,8383]
                                        String: "/transformers" [8368,8383]
                                FIELD [8384,8420]
                                    String: "run" [8384,8389]
                                    STRING [8390,8420]
                                        String: "python3 utils/print_env.py\n" [8390,8420]
                            OBJECT [8422,8731]
                                FIELD [8423,8470]
                                    String: "name" [8423,8429]
                                    STRING [8430,8470]
                                        String: "Run all non-slow selected tests on GPU" [8430,8470]
                                FIELD [8471,8506]
                                    String: "env" [8471,8476]
                                    OBJECT [8477,8506]
                                        FIELD [8478,8505]
                                            String: "MKL_SERVICE_FORCE_INTEL" [8478,8503]
                                            NUMBER [8504,8505]
                                                Number: 1 [8504,8505]
                                FIELD [8507,8542]
                                    String: "working-directory" [8507,8526]
                                    STRING [8527,8542]
                                        String: "/transformers" [8527,8542]
                                FIELD [8543,8730]
                                    String: "run" [8543,8548]
                                    STRING [8549,8730]
                                        String: "python3 -m pytest -n 2 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }} ${{ fromJson(needs.setup.outputs.test_map)[matrix.folders] }}\n" [8549,8730]
                            OBJECT [8732,8925]
                                FIELD [8733,8763]
                                    String: "name" [8733,8739]
                                    STRING [8740,8763]
                                        String: "Failure short reports" [8740,8763]
                                FIELD [8764,8787]
                                    String: "if" [8764,8768]
                                    STRING [8769,8787]
                                        String: "${{ failure() }}" [8769,8787]
                                FIELD [8788,8812]
                                    String: "continue-on-error" [8788,8807]
                                    TRUE [8808,8812]
                                FIELD [8813,8924]
                                    String: "run" [8813,8818]
                                    STRING [8819,8924]
                                        String: "cat /transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}/failures_short.txt" [8819,8924]
                            OBJECT [8926,9216]
                                FIELD [8927,8964]
                                    String: "name" [8927,8933]
                                    STRING [8934,8964]
                                        String: "Test suite reports artifacts" [8934,8964]
                                FIELD [8965,8987]
                                    String: "if" [8965,8969]
                                    STRING [8970,8987]
                                        String: "${{ always() }}" [8970,8987]
                                FIELD [8988,9023]
                                    String: "uses" [8988,8994]
                                    STRING [8995,9023]
                                        String: "actions/upload-artifact@v2" [8995,9023]
                                FIELD [9024,9215]
                                    String: "with" [9024,9030]
                                    OBJECT [9031,9215]
                                        FIELD [9032,9124]
                                            String: "name" [9032,9038]
                                            STRING [9039,9124]
                                                String: "${{ matrix.machine_type }}_run_all_tests_gpu_${{ env.matrix_folders }}_test_reports" [9039,9124]
                                        FIELD [9125,9214]
                                            String: "path" [9125,9131]
                                            STRING [9132,9214]
                                                String: "/transformers/reports/${{ matrix.machine_type }}_tests_gpu_${{ matrix.folders }}" [9132,9214]
            FIELD [9219,12178]
                String: "run_tests_torch_cuda_extensions_single_gpu" [9219,9263]
                OBJECT [9264,12178]
                    FIELD [9265,9300]
                        String: "name" [9265,9271]
                        STRING [9272,9300]
                            String: "Torch CUDA extension tests" [9272,9300]
                    FIELD [9301,9338]
                        String: "needs" [9301,9308]
                        ARRAY [9309,9338]
                            STRING [9310,9317]
                                String: "setup" [9310,9317]
                            STRING [9318,9337]
                                String: "run_check_runners" [9318,9337]
                    FIELD [9339,9467]
                        String: "if" [9339,9343]
                        STRING [9344,9467]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [9344,9467]
                    FIELD [9468,9539]
                        String: "strategy" [9468,9478]
                        OBJECT [9479,9539]
                            FIELD [9480,9497]
                                String: "fail-fast" [9480,9491]
                                FALSE [9492,9497]
                            FIELD [9498,9538]
                                String: "matrix" [9498,9506]
                                OBJECT [9507,9538]
                                    FIELD [9508,9537]
                                        String: "machine_type" [9508,9522]
                                        ARRAY [9523,9537]
                                            STRING [9524,9536]
                                                String: "single-gpu" [9524,9536]
                    FIELD [9540,9607]
                        String: "runs-on" [9540,9549]
                        ARRAY [9550,9607]
                            STRING [9551,9564]
                                String: "self-hosted" [9551,9564]
                            STRING [9565,9577]
                                String: "docker-gpu" [9565,9577]
                            STRING [9578,9606]
                                String: "${{ matrix.machine_type }}" [9578,9606]
                    FIELD [9608,9782]
                        String: "container" [9608,9619]
                        OBJECT [9620,9782]
                            FIELD [9621,9684]
                                String: "image" [9621,9628]
                                STRING [9629,9684]
                                    String: "huggingface/transformers-pytorch-deepspeed-latest-gpu" [9629,9684]
                            FIELD [9685,9781]
                                String: "options" [9685,9694]
                                STRING [9695,9781]
                                    String: "--gpus 0 --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [9695,9781]
                    FIELD [9783,12177]
                        String: "steps" [9783,9790]
                        ARRAY [9791,12177]
                            OBJECT [9792,10509]
                                FIELD [9793,9838]
                                    String: "name" [9793,9799]
                                    STRING [9800,9838]
                                        String: "Prepare custom environment variables" [9800,9838]
                                FIELD [9839,9853]
                                    String: "shell" [9839,9846]
                                    STRING [9847,9853]
                                        String: "bash" [9847,9853]
                                FIELD [9854,10508]
                                    String: "run" [9854,9859]
                                    STRING [9860,10508]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [9860,10508]
                            OBJECT [10510,10645]
                                FIELD [10511,10547]
                                    String: "name" [10511,10517]
                                    STRING [10518,10547]
                                        String: "print environment variables" [10518,10547]
                                FIELD [10548,10644]
                                    String: "run" [10548,10553]
                                    STRING [10554,10644]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [10554,10644]
                            OBJECT [10646,10977]
                                FIELD [10647,10696]
                                    String: "name" [10647,10653]
                                    STRING [10654,10696]
                                        String: "Update clone using environment variables" [10654,10696]
                                FIELD [10697,10742]
                                    String: "working-directory" [10697,10716]
                                    STRING [10717,10742]
                                        String: "/workspace/transformers" [10717,10742]
                                FIELD [10743,10976]
                                    String: "run" [10743,10748]
                                    STRING [10749,10976]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [10749,10976]
                            OBJECT [10978,11279]
                                FIELD [10979,11015]
                                    String: "name" [10979,10985]
                                    STRING [10986,11015]
                                        String: "Pre build DeepSpeed *again*" [10986,11015]
                                FIELD [11016,11048]
                                    String: "working-directory" [11016,11035]
                                    STRING [11036,11048]
                                        String: "/workspace" [11036,11048]
                                FIELD [11049,11278]
                                    String: "run" [11049,11054]
                                    STRING [11055,11278]
                                        String: "python3 -m pip uninstall -y deepspeed\nDS_BUILD_CPU_ADAM=1 DS_BUILD_AIO=1 DS_BUILD_UTILS=1 python3 -m pip install deepspeed --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [11055,11278]
                            OBJECT [11280,11322]
                                FIELD [11281,11300]
                                    String: "name" [11281,11287]
                                    STRING [11288,11300]
                                        String: "NVIDIA-SMI" [11288,11300]
                                FIELD [11301,11321]
                                    String: "run" [11301,11306]
                                    STRING [11307,11321]
                                        String: "nvidia-smi\n" [11307,11321]
                            OBJECT [11323,11427]
                                FIELD [11324,11344]
                                    String: "name" [11324,11330]
                                    STRING [11331,11344]
                                        String: "Environment" [11331,11344]
                                FIELD [11345,11390]
                                    String: "working-directory" [11345,11364]
                                    STRING [11365,11390]
                                        String: "/workspace/transformers" [11365,11390]
                                FIELD [11391,11426]
                                    String: "run" [11391,11396]
                                    STRING [11397,11426]
                                        String: "python utils/print_env.py\n" [11397,11426]
                            OBJECT [11428,11679]
                                FIELD [11429,11476]
                                    String: "name" [11429,11435]
                                    STRING [11436,11476]
                                        String: "Run all non-slow selected tests on GPU" [11436,11476]
                                FIELD [11477,11522]
                                    String: "working-directory" [11477,11496]
                                    STRING [11497,11522]
                                        String: "/workspace/transformers" [11497,11522]
                                FIELD [11523,11678]
                                    String: "run" [11523,11528]
                                    STRING [11529,11678]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [11529,11678]
                            OBJECT [11680,11883]
                                FIELD [11681,11711]
                                    String: "name" [11681,11687]
                                    STRING [11688,11711]
                                        String: "Failure short reports" [11688,11711]
                                FIELD [11712,11735]
                                    String: "if" [11712,11716]
                                    STRING [11717,11735]
                                        String: "${{ failure() }}" [11717,11735]
                                FIELD [11736,11760]
                                    String: "continue-on-error" [11736,11755]
                                    TRUE [11756,11760]
                                FIELD [11761,11882]
                                    String: "run" [11761,11766]
                                    STRING [11767,11882]
                                        String: "cat /workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [11767,11882]
                            OBJECT [11884,12176]
                                FIELD [11885,11922]
                                    String: "name" [11885,11891]
                                    STRING [11892,11922]
                                        String: "Test suite reports artifacts" [11892,11922]
                                FIELD [11923,11945]
                                    String: "if" [11923,11927]
                                    STRING [11928,11945]
                                        String: "${{ always() }}" [11928,11945]
                                FIELD [11946,11981]
                                    String: "uses" [11946,11952]
                                    STRING [11953,11981]
                                        String: "actions/upload-artifact@v2" [11953,11981]
                                FIELD [11982,12175]
                                    String: "with" [11982,11988]
                                    OBJECT [11989,12175]
                                        FIELD [11990,12074]
                                            String: "name" [11990,11996]
                                            STRING [11997,12074]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [11997,12074]
                                        FIELD [12075,12174]
                                            String: "path" [12075,12081]
                                            STRING [12082,12174]
                                                String: "/workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [12082,12174]
            FIELD [12179,15138]
                String: "run_tests_torch_cuda_extensions_multi_gpu" [12179,12222]
                OBJECT [12223,15138]
                    FIELD [12224,12259]
                        String: "name" [12224,12230]
                        STRING [12231,12259]
                            String: "Torch CUDA extension tests" [12231,12259]
                    FIELD [12260,12297]
                        String: "needs" [12260,12267]
                        ARRAY [12268,12297]
                            STRING [12269,12276]
                                String: "setup" [12269,12276]
                            STRING [12277,12296]
                                String: "run_check_runners" [12277,12296]
                    FIELD [12298,12426]
                        String: "if" [12298,12302]
                        STRING [12303,12426]
                            String: "contains(fromJson(needs.setup.outputs.matrix), 'deepspeed') || contains(fromJson(needs.setup.outputs.matrix), 'extended')" [12303,12426]
                    FIELD [12427,12497]
                        String: "strategy" [12427,12437]
                        OBJECT [12438,12497]
                            FIELD [12439,12456]
                                String: "fail-fast" [12439,12450]
                                FALSE [12451,12456]
                            FIELD [12457,12496]
                                String: "matrix" [12457,12465]
                                OBJECT [12466,12496]
                                    FIELD [12467,12495]
                                        String: "machine_type" [12467,12481]
                                        ARRAY [12482,12495]
                                            STRING [12483,12494]
                                                String: "multi-gpu" [12483,12494]
                    FIELD [12498,12565]
                        String: "runs-on" [12498,12507]
                        ARRAY [12508,12565]
                            STRING [12509,12522]
                                String: "self-hosted" [12509,12522]
                            STRING [12523,12535]
                                String: "docker-gpu" [12523,12535]
                            STRING [12536,12564]
                                String: "${{ matrix.machine_type }}" [12536,12564]
                    FIELD [12566,12742]
                        String: "container" [12566,12577]
                        OBJECT [12578,12742]
                            FIELD [12579,12642]
                                String: "image" [12579,12586]
                                STRING [12587,12642]
                                    String: "huggingface/transformers-pytorch-deepspeed-latest-gpu" [12587,12642]
                            FIELD [12643,12741]
                                String: "options" [12643,12652]
                                STRING [12653,12741]
                                    String: "--gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/" [12653,12741]
                    FIELD [12743,15137]
                        String: "steps" [12743,12750]
                        ARRAY [12751,15137]
                            OBJECT [12752,13469]
                                FIELD [12753,12798]
                                    String: "name" [12753,12759]
                                    STRING [12760,12798]
                                        String: "Prepare custom environment variables" [12760,12798]
                                FIELD [12799,12813]
                                    String: "shell" [12799,12806]
                                    STRING [12807,12813]
                                        String: "bash" [12807,12813]
                                FIELD [12814,13468]
                                    String: "run" [12814,12819]
                                    STRING [12820,13468]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [12820,13468]
                            OBJECT [13470,13605]
                                FIELD [13471,13507]
                                    String: "name" [13471,13477]
                                    STRING [13478,13507]
                                        String: "print environment variables" [13478,13507]
                                FIELD [13508,13604]
                                    String: "run" [13508,13513]
                                    STRING [13514,13604]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [13514,13604]
                            OBJECT [13606,13937]
                                FIELD [13607,13656]
                                    String: "name" [13607,13613]
                                    STRING [13614,13656]
                                        String: "Update clone using environment variables" [13614,13656]
                                FIELD [13657,13702]
                                    String: "working-directory" [13657,13676]
                                    STRING [13677,13702]
                                        String: "/workspace/transformers" [13677,13702]
                                FIELD [13703,13936]
                                    String: "run" [13703,13708]
                                    STRING [13709,13936]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [13709,13936]
                            OBJECT [13938,14239]
                                FIELD [13939,13975]
                                    String: "name" [13939,13945]
                                    STRING [13946,13975]
                                        String: "Pre build DeepSpeed *again*" [13946,13975]
                                FIELD [13976,14008]
                                    String: "working-directory" [13976,13995]
                                    STRING [13996,14008]
                                        String: "/workspace" [13996,14008]
                                FIELD [14009,14238]
                                    String: "run" [14009,14014]
                                    STRING [14015,14238]
                                        String: "python3 -m pip uninstall -y deepspeed\nDS_BUILD_CPU_ADAM=1 DS_BUILD_AIO=1 DS_BUILD_UTILS=1 python3 -m pip install deepspeed --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache -v --disable-pip-version-check\n" [14015,14238]
                            OBJECT [14240,14282]
                                FIELD [14241,14260]
                                    String: "name" [14241,14247]
                                    STRING [14248,14260]
                                        String: "NVIDIA-SMI" [14248,14260]
                                FIELD [14261,14281]
                                    String: "run" [14261,14266]
                                    STRING [14267,14281]
                                        String: "nvidia-smi\n" [14267,14281]
                            OBJECT [14283,14387]
                                FIELD [14284,14304]
                                    String: "name" [14284,14290]
                                    STRING [14291,14304]
                                        String: "Environment" [14291,14304]
                                FIELD [14305,14350]
                                    String: "working-directory" [14305,14324]
                                    STRING [14325,14350]
                                        String: "/workspace/transformers" [14325,14350]
                                FIELD [14351,14386]
                                    String: "run" [14351,14356]
                                    STRING [14357,14386]
                                        String: "python utils/print_env.py\n" [14357,14386]
                            OBJECT [14388,14639]
                                FIELD [14389,14436]
                                    String: "name" [14389,14395]
                                    STRING [14396,14436]
                                        String: "Run all non-slow selected tests on GPU" [14396,14436]
                                FIELD [14437,14482]
                                    String: "working-directory" [14437,14456]
                                    STRING [14457,14482]
                                        String: "/workspace/transformers" [14457,14482]
                                FIELD [14483,14638]
                                    String: "run" [14483,14488]
                                    STRING [14489,14638]
                                        String: "python -m pytest -n 1 --dist=loadfile -v --make-reports=${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu tests/deepspeed tests/extended\n" [14489,14638]
                            OBJECT [14640,14843]
                                FIELD [14641,14671]
                                    String: "name" [14641,14647]
                                    STRING [14648,14671]
                                        String: "Failure short reports" [14648,14671]
                                FIELD [14672,14695]
                                    String: "if" [14672,14676]
                                    STRING [14677,14695]
                                        String: "${{ failure() }}" [14677,14695]
                                FIELD [14696,14720]
                                    String: "continue-on-error" [14696,14715]
                                    TRUE [14716,14720]
                                FIELD [14721,14842]
                                    String: "run" [14721,14726]
                                    STRING [14727,14842]
                                        String: "cat /workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu/failures_short.txt" [14727,14842]
                            OBJECT [14844,15136]
                                FIELD [14845,14882]
                                    String: "name" [14845,14851]
                                    STRING [14852,14882]
                                        String: "Test suite reports artifacts" [14852,14882]
                                FIELD [14883,14905]
                                    String: "if" [14883,14887]
                                    STRING [14888,14905]
                                        String: "${{ always() }}" [14888,14905]
                                FIELD [14906,14941]
                                    String: "uses" [14906,14912]
                                    STRING [14913,14941]
                                        String: "actions/upload-artifact@v2" [14913,14941]
                                FIELD [14942,15135]
                                    String: "with" [14942,14948]
                                    OBJECT [14949,15135]
                                        FIELD [14950,15034]
                                            String: "name" [14950,14956]
                                            STRING [14957,15034]
                                                String: "${{ matrix.machine_type }}_run_tests_torch_cuda_extensions_gpu_test_reports" [14957,15034]
                                        FIELD [15035,15134]
                                            String: "path" [15035,15041]
                                            STRING [15042,15134]
                                                String: "/workspace/transformers/reports/${{ matrix.machine_type }}_tests_torch_cuda_extensions_gpu" [15042,15134]
            FIELD [15139,17554]
                String: "send_results" [15139,15153]
                OBJECT [15154,17554]
                    FIELD [15155,15187]
                        String: "name" [15155,15161]
                        STRING [15162,15187]
                            String: "Send results to webhook" [15162,15187]
                    FIELD [15188,15213]
                        String: "runs-on" [15188,15197]
                        STRING [15198,15213]
                            String: "ubuntu-latest" [15198,15213]
                    FIELD [15214,15229]
                        String: "if" [15214,15218]
                        STRING [15219,15229]
                            String: "always()" [15219,15229]
                    FIELD [15230,15401]
                        String: "needs" [15230,15237]
                        ARRAY [15238,15401]
                            STRING [15239,15246]
                                String: "setup" [15239,15246]
                            STRING [15247,15266]
                                String: "run_check_runners" [15247,15266]
                            STRING [15267,15289]
                                String: "run_tests_single_gpu" [15267,15289]
                            STRING [15290,15311]
                                String: "run_tests_multi_gpu" [15290,15311]
                            STRING [15312,15356]
                                String: "run_tests_torch_cuda_extensions_single_gpu" [15312,15356]
                            STRING [15357,15400]
                                String: "run_tests_torch_cuda_extensions_multi_gpu" [15357,15400]
                    FIELD [15402,17553]
                        String: "steps" [15402,15409]
                        ARRAY [15410,17553]
                            OBJECT [15411,15581]
                                FIELD [15412,15443]
                                    String: "name" [15412,15418]
                                    STRING [15419,15443]
                                        String: "Preliminary job status" [15419,15443]
                                FIELD [15444,15458]
                                    String: "shell" [15444,15451]
                                    STRING [15452,15458]
                                        String: "bash" [15452,15458]
                                FIELD [15459,15580]
                                    String: "run" [15459,15464]
                                    STRING [15465,15580]
                                        String: "echo \"Setup status: ${{ needs.setup.result }}\"\necho \"Runner status: ${{ needs.run_check_runners.result }}\"\n" [15465,15580]
                            OBJECT [15582,16299]
                                FIELD [15583,15628]
                                    String: "name" [15583,15589]
                                    STRING [15590,15628]
                                        String: "Prepare custom environment variables" [15590,15628]
                                FIELD [15629,15643]
                                    String: "shell" [15629,15636]
                                    STRING [15637,15643]
                                        String: "bash" [15637,15643]
                                FIELD [15644,16298]
                                    String: "run" [15644,15649]
                                    STRING [15650,16298]
                                        String: "CI_BRANCH_PUSH=${{ github.event.ref }}\nCI_BRANCH_PUSH=${CI_BRANCH_PUSH/'refs/heads/'/''}\nCI_BRANCH_WORKFLOW_RUN=${{ github.event.workflow_run.head_branch }}\nCI_SHA_PUSH=${{ github.event.head_commit.id }}\nCI_SHA_WORKFLOW_RUN=${{ github.event.workflow_run.head_sha }}\necho $CI_BRANCH_PUSH\necho $CI_BRANCH_WORKFLOW_RUN\necho $CI_SHA_PUSH\necho $CI_SHA_WORKFLOW_RUN\n[[ ! -z \"$CI_BRANCH_PUSH\" ]] && echo \"CI_BRANCH=$CI_BRANCH_PUSH\" >> $GITHUB_ENV || echo \"CI_BRANCH=$CI_BRANCH_WORKFLOW_RUN\" >> $GITHUB_ENV\n[[ ! -z \"$CI_SHA_PUSH\" ]] && echo \"CI_SHA=$CI_SHA_PUSH\" >> $GITHUB_ENV || echo \"CI_SHA=$CI_SHA_WORKFLOW_RUN\" >> $GITHUB_ENV\n" [15650,16298]
                            OBJECT [16300,16435]
                                FIELD [16301,16337]
                                    String: "name" [16301,16307]
                                    STRING [16308,16337]
                                        String: "print environment variables" [16308,16337]
                                FIELD [16338,16434]
                                    String: "run" [16338,16343]
                                    STRING [16344,16434]
                                        String: "echo \"env.CI_BRANCH = ${{ env.CI_BRANCH }}\"\necho \"env.CI_SHA = ${{ env.CI_SHA }}\"\n" [16344,16434]
                            OBJECT [16436,16466]
                                FIELD [16437,16465]
                                    String: "uses" [16437,16443]
                                    STRING [16444,16465]
                                        String: "actions/checkout@v2" [16444,16465]
                            OBJECT [16467,16752]
                                FIELD [16468,16517]
                                    String: "name" [16468,16474]
                                    STRING [16475,16517]
                                        String: "Update clone using environment variables" [16475,16517]
                                FIELD [16518,16751]
                                    String: "run" [16518,16523]
                                    STRING [16524,16751]
                                        String: "echo \"original branch = $(git branch --show-current)\"\ngit fetch && git checkout ${{ env.CI_BRANCH }}\necho \"updated branch = $(git branch --show-current)\"\ngit checkout ${{ env.CI_SHA }}\necho \"log = $(git log -n 1)\"\n" [16524,16751]
                            OBJECT [16753,16792]
                                FIELD [16754,16791]
                                    String: "uses" [16754,16760]
                                    STRING [16761,16791]
                                        String: "actions/download-artifact@v2" [16761,16791]
                            OBJECT [16793,17552]
                                FIELD [16794,16824]
                                    String: "name" [16794,16800]
                                    STRING [16801,16824]
                                        String: "Send message to Slack" [16801,16824]
                                FIELD [16825,17445]
                                    String: "env" [16825,16830]
                                    OBJECT [16831,17445]
                                        FIELD [16832,16888]
                                            String: "CI_SLACK_BOT_TOKEN" [16832,16852]
                                            STRING [16853,16888]
                                                String: "${{ secrets.CI_SLACK_BOT_TOKEN }}" [16853,16888]
                                        FIELD [16889,16947]
                                            String: "CI_SLACK_CHANNEL_ID" [16889,16910]
                                            STRING [16911,16947]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [16911,16947]
                                        FIELD [16948,17018]
                                            String: "CI_SLACK_CHANNEL_ID_DAILY" [16948,16975]
                                            STRING [16976,17018]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID_DAILY }}" [16976,17018]
                                        FIELD [17019,17095]
                                            String: "CI_SLACK_CHANNEL_DUMMY_TESTS" [17019,17049]
                                            STRING [17050,17095]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_DUMMY_TESTS }}" [17050,17095]
                                        FIELD [17096,17161]
                                            String: "CI_SLACK_REPORT_CHANNEL_ID" [17096,17124]
                                            STRING [17125,17161]
                                                String: "${{ secrets.CI_SLACK_CHANNEL_ID }}" [17125,17161]
                                        FIELD [17162,17179]
                                            String: "CI_EVENT" [17162,17172]
                                            STRING [17173,17179]
                                                String: "push" [17173,17179]
                                        FIELD [17180,17237]
                                            String: "CI_TITLE_PUSH" [17180,17195]
                                            STRING [17196,17237]
                                                String: "${{ github.event.head_commit.message }}" [17196,17237]
                                        FIELD [17238,17316]
                                            String: "CI_TITLE_WORKFLOW_RUN" [17238,17261]
                                            STRING [17262,17316]
                                                String: "${{ github.event.workflow_run.head_commit.message }}" [17262,17316]
                                        FIELD [17317,17345]
                                            String: "CI_SHA" [17317,17325]
                                            STRING [17326,17345]
                                                String: "${{ env.CI_SHA }}" [17326,17345]
                                        FIELD [17346,17388]
                                            String: "SETUP_STATUS" [17346,17360]
                                            STRING [17361,17388]
                                                String: "${{ needs.setup.result }}" [17361,17388]
                                        FIELD [17389,17444]
                                            String: "RUNNER_STATUS" [17389,17404]
                                            STRING [17405,17444]
                                                String: "${{ needs.run_check_runners.result }}" [17405,17444]
                                FIELD [17446,17551]
                                    String: "run" [17446,17451]
                                    STRING [17452,17551]
                                        String: "pip install slack_sdk\npython utils/notification_service.py \"${{ needs.setup.outputs.matrix }}\"" [17452,17551]